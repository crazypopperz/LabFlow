<div id="add-object-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h3 id="modal-objet-title" class="modal-title-with-icon">
                <svg class="modal-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M440-200h80v-160h160v-80H520v-160h-80v160H280v80h160v160ZM200-80q-33 0-56.5-23.5T120-160v-640q0-33 23.5-56.5T200-880h560q33 0 56.5 23.5T840-800v640q0 33-23.5 56.5T760-80H200Z"/></svg>
                <span>Ajouter un Nouvel Objet</span>
            </h3>
            <button type="button" class="close-btn">×</button>
        </div>
        <form id="modal-form-objet" action="" method="post" class="modal-form">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <div class="form-grid">
                <!-- Colonne de gauche -->
                <div class="form-column">
                    <div class="form-group">
                        <label for="nom">Nom de l'objet</label>
                        <input type="text" id="nom" name="nom" required>
                    </div>
                    <div class="form-group">
                        <label for="quantite">Quantité</label>
                        <input type="number" id="quantite" name="quantite" required>
                    </div>
                    <div class="form-group">
                        <label for="seuil">Seuil d'alerte</label>
                        <input type="number" id="seuil" name="seuil" required>
                    </div>
                    <div class="form-group">
                        <label for="date_peremption">Date de péremption</label>
                        <input type="date" id="date_peremption" name="date_peremption">
                    </div>
                    <div class="form-group">
                        <label for="armoire_id">Armoire</label>
                        <select id="armoire_id" name="armoire_id" required>
                            {% for a in all_armoires %}<option value="{{ a.id }}">{{ a.nom }}</option>{% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="categorie_id">Catégorie</label>
                        <select id="categorie_id" name="categorie_id" required>
                            {% for c in all_categories %}<option value="{{ c.id }}">{{ c.nom }}</option>{% endfor %}
                        </select>
                    </div>
                </div>
                <!-- Colonne de droite -->
                <div class="form-column">
                    <div class="form-group">
                        <label for="image_url">Image (Optionnel)</label>
                        <div class="input-with-button">
                            <input type="text" id="image_url" name="image_url" placeholder="Coller une URL ou chercher">
                            <button type="button" id="btn-search-pexels" class="btn-action">Chercher</button>
                        </div>
                        <small class="form-help-text">Utilisez le nom de l'objet et cliquez sur "Chercher".</small>
                    </div>
                    <div id="pexels-results" class="pexels-results-grid" style="display: none;"></div>
                    <div id="image-preview-container" style="display:none; text-align: center;">
                        <img id="image-preview" src="" class="image-preview-modal" alt="Aperçu">
                    </div>
                    <div class="form-group">
                        <label for="fds_url">Fiche de Sécurité (URL du PDF)</label>
                        <input type="text" id="fds_url" name="fds_url" placeholder="Coller l'URL de la FDS">
                        <small class="form-help-text">Disponible sur le site de votre fournisseur.</small>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
				<!-- On s'assure que les classes sont bien là -->
				<button type="button" class="btn btn-secondary btn-cancel">Annuler</button>
				<button type="submit" id="modal-submit-btn" class="btn btn-primary">Enregistrer l'objet</button>
			</div>
        </form>
    </div>
</div>