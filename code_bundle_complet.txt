=== CONTEXTE COMPLET DU PROJET LABFLOW ===


==================================================
FICHIER : Adresse-Serveur-Render.txt
==================================================
postgresql://labflow_db_user:lHM9AjScz1mqEQOhQqy6z3iIAdnQd9p6@dpg-d5hr4mi4d50c73993m50-a/labflow_db

==================================================
FICHIER : api_pexels.txt
==================================================
eXyUFwq2u2j0PdTD06ctisTuF577uGWasC6Wxz3cmzeffMAa6wCTK6gb

==================================================
FICHIER : app.py
==================================================
# ============================================================
# FICHIER : app.py (Version Compatible Syst√®me Maison)
# ============================================================
import os
import secrets
import logging
from logging.handlers import RotatingFileHandler
from datetime import date, datetime, timedelta
from flask import Flask, redirect, request, session, url_for, current_app, render_template
from flask_wtf.csrf import CSRFProtect
from flask_talisman import Talisman
from sqlalchemy.exc import SQLAlchemyError
from dotenv import load_dotenv
from werkzeug.middleware.proxy_fix import ProxyFix

# Extensions (Cache & Rate Limit) - PAS DE LOGIN_MANAGER
from extensions import limiter, cache

# Imports locaux
from db import db, Parametre, Armoire, Categorie, init_app as init_db_app
from utils import get_alerte_info, is_setup_needed, annee_scolaire_format, get_etablissement_params

# Imports des Blueprints
from views.auth import auth_bp
from views.inventaire import inventaire_bp
from views.admin import admin_bp
from views.main import main_bp
from views.api import api_bp
from views.securite import securite_bp

# Chargement .env
load_dotenv()

def configure_logging(app):
    """Configure les logs pour la production et le d√©veloppement."""
    if not app.debug and not app.testing:
        if not os.path.exists('logs'):
            os.mkdir('logs')
        file_handler = RotatingFileHandler('logs/app.log', maxBytes=10240, backupCount=10)
        file_handler.setFormatter(logging.Formatter(
            '%(asctime)s %(levelname)s: %(message)s [in %(pathname)s:%(lineno)d]'
        ))
        file_handler.setLevel(logging.INFO)
        app.logger.addHandler(file_handler)
        app.logger.setLevel(logging.INFO)
        app.logger.info('LabFlow startup')

def create_app():
    app = Flask(__name__)
    app.wsgi_app = ProxyFix(
        app.wsgi_app, x_for=1, x_proto=1, x_host=1, x_prefix=1
    )

    # ============================================================
    # 0. V√âRIFICATION ENVIRONNEMENT (FAIL FAST)
    # ============================================================
    is_production = os.environ.get('FLASK_ENV') == 'production'
    REQUIRED_VARS = ['DATABASE_URL', 'GMLCL_PRO_KEY']
    
    if is_production:
        REQUIRED_VARS.append('SECRET_KEY')

    missing_vars = [var for var in REQUIRED_VARS if not os.environ.get(var)]
    if missing_vars:
        raise RuntimeError(f"ERREUR CRITIQUE : Variables d'environnement manquantes : {', '.join(missing_vars)}")

    # ============================================================
    # 1. CONFIGURATION
    # ============================================================
    app.config.from_object('config') 

    secret_key = os.environ.get('SECRET_KEY')
    if not secret_key:
        secret_key = 'dev-key-stable-pour-eviter-deconnexion'
        if not is_production:
            print("‚ö†Ô∏è  MODE DEV : Utilisation d'une SECRET_KEY fixe par d√©faut.")
    app.config['SECRET_KEY'] = secret_key
    
    app.config['PERMANENT_SESSION_LIFETIME'] = timedelta(days=30)

    db_url = os.environ.get('DATABASE_URL')
    if db_url:
        if db_url.startswith("postgres://"):
            db_url = db_url.replace("postgres://", "postgresql://", 1)
        app.config['SQLALCHEMY_DATABASE_URI'] = db_url

    app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False
    app.config['MAX_CONTENT_LENGTH'] = 10 * 1024 * 1024 
    app.config['CACHE_TYPE'] = 'SimpleCache'
    app.config['CACHE_DEFAULT_TIMEOUT'] = 300

    if is_production:
        app.config['SESSION_COOKIE_HTTPONLY'] = True
        app.config['SESSION_COOKIE_SECURE'] = True
        app.config['SESSION_COOKIE_SAMESITE'] = 'Lax'
    
    if os.environ.get('FLASK_ENV') == 'testing':
        app.config['TESTING'] = True
        app.config['WTF_CSRF_ENABLED'] = False
        app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///:memory:'
        logging.warning("‚ö†Ô∏è  MODE TESTING ACTIV√â : Base de donn√©es en m√©moire.")

    # ============================================================
    # 2. INITIALISATION DES EXTENSIONS
    # ============================================================
    init_db_app(app)
    with app.app_context():
        db.create_all()
    CSRFProtect(app)
    limiter.init_app(app)
    cache.init_app(app)
    configure_logging(app)

    # ============================================================
    # 3. S√âCURIT√â HTTP (TALISMAN)
    # ============================================================
    if is_production:
        csp = {
            'default-src': "'self'",
            'script-src': ["'self'", "'unsafe-inline'", "cdn.jsdelivr.net"],
            'style-src': ["'self'", "'unsafe-inline'", "cdn.jsdelivr.net", "fonts.googleapis.com", "fonts.gstatic.com"],
            'font-src': ["'self'", "data:", "cdn.jsdelivr.net", "fonts.gstatic.com"],
            'img-src': ["'self'", "data:", "blob:", "https:", "images.pexels.com", "*.pexels.com"],
            'connect-src': ["'self'", "cdn.jsdelivr.net"]
        }

        Talisman(app, 
            force_https=True,
            content_security_policy=csp,
            strict_transport_security=True,
            session_cookie_secure=True,
            frame_options='DENY' 
        )

    # ============================================================
    # 4. BLUEPRINTS
    # ============================================================
    app.register_blueprint(auth_bp)
    app.register_blueprint(inventaire_bp)
    app.register_blueprint(admin_bp)
    app.register_blueprint(main_bp)
    app.register_blueprint(api_bp)
    app.register_blueprint(securite_bp)

    # ============================================================
    # 5. GESTION ERREURS
    # ============================================================
    @app.errorhandler(404)
    def not_found_error(error):
        return render_template('errors/404.html'), 404

    @app.errorhandler(500)
    def internal_error(error):
        db.session.rollback()
        app.logger.error(f"Server Error: {error}")
        return render_template('errors/500.html'), 500

    @app.errorhandler(429)
    def ratelimit_handler(e):
        if request.is_json or request.path.startswith('/api/'):
            return {"error": "Trop de requ√™tes. Veuillez patienter."}, 429
        return render_template("errors/429.html"), 429

    # ============================================================
    # 6. FILTRES JINJA
    # ============================================================
    @app.template_filter('strftime')
    def format_datetime_filter(value, fmt='%d/%m/%Y %H:%M'):
        if isinstance(value, str):
            try: value = datetime.fromisoformat(value)
            except (ValueError, TypeError): return value
        if isinstance(value, (datetime, date)): return value.strftime(fmt)
        return value

    @app.template_filter('strftime_fr')
    def format_datetime_fr_filter(value, fmt):
        if isinstance(value, str):
            try: value = datetime.fromisoformat(value)
            except (ValueError, TypeError): return value
        if not isinstance(value, (datetime, date)): return value
        
        jours = ["lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi", "dimanche"]
        mois = ["janvier", "f√©vrier", "mars", "avril", "mai", "juin", "juillet", "ao√ªt", "septembre", "octobre", "novembre", "d√©cembre"]
        
        format_fr = fmt.replace('%A', jours[value.weekday()].capitalize())
        format_fr = format_fr.replace('%B', mois[value.month - 1])
        return value.strftime(format_fr)

    app.jinja_env.filters['annee_scolaire'] = annee_scolaire_format

    # ============================================================
    # 7. CONTEXT PROCESSORS (GLOBAL DATA)
    # ============================================================
    @app.context_processor
    def inject_global_data():
        context = {
            'all_armoires': [], 'all_categories': [], 'alertes_total': 0,
            'licence': {'statut': 'FREE', 'is_pro': False, 'instance_id': 'N/A'},
            'nom_etablissement': None
        }
        
        etablissement_id = session.get('etablissement_id')
        if not etablissement_id: return context
            
        try:
            context['all_armoires'] = db.session.execute(
                db.select(Armoire).filter_by(etablissement_id=etablissement_id).order_by(Armoire.nom)
            ).scalars().all()
            
            context['all_categories'] = db.session.execute(
                db.select(Categorie).filter_by(etablissement_id=etablissement_id).order_by(Categorie.nom)
            ).scalars().all()
            
            alert_info = get_alerte_info()
            context['alertes_total'] = alert_info.get('alertes_total', 0)
            
            params_dict = get_etablissement_params(etablissement_id)
            
            if params_dict.get('licence_statut') == 'PRO':
                context['licence']['statut'] = 'PRO'
                context['licence']['is_pro'] = True
            
            if params_dict.get('instance_id'):
                context['licence']['instance_id'] = params_dict.get('instance_id')

            context['nom_etablissement'] = session.get('nom_etablissement')
            
            return context
            
        except SQLAlchemyError as e:
            current_app.logger.error(f"Erreur context_processor : {e}")
            return context
        except Exception as e:
            current_app.logger.error(f"Erreur inattendue context_processor : {e}")
            return context
            
    return app

if __name__ == '__main__':
    app = create_app()
    app.run(host='0.0.0.0', port=5000, debug=True)

==================================================
FICHIER : audit_files.py
==================================================
import os

# Liste des fichiers connus et valides (chemins relatifs)
WHITELIST = {
    # Racine
    "app.py", "db.py", "extensions.py", "utils.py", "config.py", "reset_db.py", ".env", "requirements.txt", "audit_files.py",
    
    # Views
    "views/__init__.py", "views/auth.py", "views/main.py", "views/inventaire.py", "views/admin.py", "views/api.py",
    
    # Services
    "services/__init__.py", "services/stock_service.py", "services/kit_service.py", "services/panier_service.py", "services/inventory_service.py",
    
    # Static JS
    "static/js/script.js",
    "static/js/modules/booking-modal.js", "static/js/modules/calendar-monthly.js", "static/js/modules/calendar-daily.js",
    "static/js/modules/cart-summary.js", "static/js/modules/cart-utils.js", "static/js/modules/toast.js", "static/js/modules/tour.js",
    
    # Static CSS
    "static/css/style.css",
    
    # Templates Base
    "templates/base.html", "templates/header.html", "templates/footer.html", "templates/sub_header.html",
    "templates/_breadcrumb.html", "templates/_pagination.html", "templates/_modals.html", "templates/_inventaire_content.html",
    
    # Templates Pages
    "templates/index.html", "templates/login.html", "templates/register.html", "templates/setup.html", "templates/profil.html",
    "templates/inventaire.html", "templates/objet_details.html", "templates/armoire.html", "templates/categorie.html", "templates/fournisseurs.html",
    "templates/calendrier.html", "templates/vue_jour.html", "templates/panier.html", "templates/alertes.html", "templates/budget.html",
    "templates/a_propos.html", "templates/legal.html", "templates/documentation.html",
    
    # Templates Admin
    "templates/admin.html", "templates/admin_utilisateurs.html", "templates/admin_kits.html", "templates/admin_kit_modifier.html",
    "templates/admin_echeances.html", "templates/admin_import.html", "templates/admin_backup.html", "templates/rapports.html",
    
    # Templates Erreurs
    "templates/errors/404.html", "templates/errors/500.html", "templates/errors/429.html",
    
    # Modales s√©par√©es (si tu as choisi l'option fichiers s√©par√©s)
    "templates/_modale_fournisseur_add.html", "templates/_modale_fournisseur_edit.html",
    "templates/_modale_budget_config.html", "templates/_modale_depense_add.html", "templates/_modale_depense_edit.html",
    "templates/_modale_danger.html", "templates/_modale_suggestion.html"
}

# Dossiers √† ignorer compl√®tement
IGNORE_DIRS = {".git", "__pycache__", "venv", "env", "instance", "logs", "static/uploads", "static/icons", "static/images", ".idea", ".vscode"}

def audit():
    print("üîç AUDIT DES FICHIERS EN COURS...\n")
    root_dir = os.getcwd()
    ghost_files = []

    for dirpath, dirnames, filenames in os.walk(root_dir):
        # Filtrer les dossiers ignor√©s
        dirnames[:] = [d for d in dirnames if d not in IGNORE_DIRS]
        
        for filename in filenames:
            full_path = os.path.join(dirpath, filename)
            rel_path = os.path.relpath(full_path, root_dir).replace("\\", "/")
            
            # Ignorer les fichiers compil√©s Python
            if filename.endswith(".pyc"): continue
            
            if rel_path not in WHITELIST:
                ghost_files.append(rel_path)

    if ghost_files:
        print(f"‚ö†Ô∏è  {len(ghost_files)} FICHIERS SUSPECTS D√âTECT√âS :\n")
        for f in sorted(ghost_files):
            print(f"  [?] {f}")
        print("\nüëâ V√©rifie cette liste. Si un fichier est important, ajoute-le √† la WHITELIST.")
        print("üëâ Sinon, d√©place-les dans un dossier '_TRASH' pour tester.")
    else:
        print("‚úÖ Aucun fichier suspect trouv√©. Ton projet est propre !")

if __name__ == "__main__":
    audit()

==================================================
FICHIER : code_bundle_complet.txt
==================================================
=== CONTEXTE COMPLET DU PROJET LABFLOW ===


==================================================
FICHIER : Adresse-Serveur-Render.txt
==================================================
postgresql://labflow_db_user:lHM9AjScz1mqEQOhQqy6z3iIAdnQd9p6@dpg-d5hr4mi4d50c73993m50-a/labflow_db

==================================================
FICHIER : api_pexels.txt
==================================================
eXyUFwq2u2j0PdTD06ctisTuF577uGWasC6Wxz3cmzeffMAa6wCTK6gb

==================================================
FICHIER : app.py
==================================================
# ============================================================
# FICHIER : app.py (Version Compatible Syst√®me Maison)
# ============================================================
import os
import secrets
import logging
from logging.handlers import RotatingFileHandler
from datetime import date, datetime, timedelta
from flask import Flask, redirect, request, session, url_for, current_app, render_template
from flask_wtf.csrf import CSRFProtect
from flask_talisman import Talisman
from sqlalchemy.exc import SQLAlchemyError
from dotenv import load_dotenv
from werkzeug.middleware.proxy_fix import ProxyFix

# Extensions (Cache & Rate Limit) - PAS DE LOGIN_MANAGER
from extensions import limiter, cache

# Imports locaux
from db import db, Parametre, Armoire, Categorie, init_app as init_db_app
from utils import get_alerte_info, is_setup_needed, annee_scolaire_format, get_etablissement_params

# Imports des Blueprints
from views.auth import auth_bp
from views.inventaire import inventaire_bp
from views.admin import admin_bp
from views.main import main_bp
from views.api import api_bp
from views.securite import securite_bp

# Chargement .env
load_dotenv()

def configure_logging(app):
    """Configure les logs pour la production et le d√©veloppement."""
    if not app.debug and not app.testing:
        if not os.path.exists('logs'):
            os.mkdir('logs')
        file_handler = RotatingFileHandler('logs/app.log', maxBytes=10240, backupCount=10)
        file_handler.setFormatter(logging.Formatter(
            '%(asctime)s %(levelname)s: %(message)s [in %(pathname)s:%(lineno)d]'
        ))
        file_handler.setLevel(logging.INFO)
        app.logger.addHandler(file_handler)
        app.logger.setLevel(logging.INFO)
        app.logger.info('LabFlow startup')

def create_app():
    app = Flask(__name__)
    app.wsgi_app = ProxyFix(
        app.wsgi_app, x_for=1, x_proto=1, x_host=1, x_prefix=1
    )

    # ============================================================
    # 0. V√âRIFICATION ENVIRONNEMENT (FAIL FAST)
    # ============================================================
    is_production = os.environ.get('FLASK_ENV') == 'production'
    REQUIRED_VARS = ['DATABASE_URL', 'GMLCL_PRO_KEY']
    
    if is_production:
        REQUIRED_VARS.append('SECRET_KEY')

    missing_vars = [var for var in REQUIRED_VARS if not os.environ.get(var)]
    if missing_vars:
        raise RuntimeError(f"ERREUR CRITIQUE : Variables d'environnement manquantes : {', '.join(missing_vars)}")

    # ============================================================
    # 1. CONFIGURATION
    # ============================================================
    app.config.from_object('config') 

    secret_key = os.environ.get('SECRET_KEY')
    if not secret_key:
        secret_key = 'dev-key-stable-pour-eviter-deconnexion'
        if not is_production:
            print("‚ö†Ô∏è  MODE DEV : Utilisation d'une SECRET_KEY fixe par d√©faut.")
    app.config['SECRET_KEY'] = secret_key
    
    app.config['PERMANENT_SESSION_LIFETIME'] = timedelta(days=30)

    db_url = os.environ.get('DATABASE_URL')
    if db_url:
        if db_url.startswith("postgres://"):
            db_url = db_url.replace("postgres://", "postgresql://", 1)
        app.config['SQLALCHEMY_DATABASE_URI'] = db_url

    app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False
    app.config['MAX_CONTENT_LENGTH'] = 10 * 1024 * 1024 
    app.config['CACHE_TYPE'] = 'SimpleCache'
    app.config['CACHE_DEFAULT_TIMEOUT'] = 300

    if is_production:
        app.config['SESSION_COOKIE_HTTPONLY'] = True
        app.config['SESSION_COOKIE_SECURE'] = True
        app.config['SESSION_COOKIE_SAMESITE'] = 'Lax'
    
    if os.environ.get('FLASK_ENV') == 'testing':
        app.config['TESTING'] = True
        app.config['WTF_CSRF_ENABLED'] = False
        app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///:memory:'
        logging.warning("‚ö†Ô∏è  MODE TESTING ACTIV√â : Base de donn√©es en m√©moire.")

    # ============================================================
    # 2. INITIALISATION DES EXTENSIONS
    # ============================================================
    init_db_app(app)
    with app.app_context():
        db.create_all()
    CSRFProtect(app)
    limiter.init_app(app)
    cache.init_app(app)
    configure_logging(app)

    # ============================================================
    # 3. S√âCURIT√â HTTP (TALISMAN)
    # ============================================================
    if is_production:
        csp = {
            'default-src': "'self'",
            'script-src': ["'self'", "'unsafe-inline'", "cdn.jsdelivr.net"],
            'style-src': ["'self'", "'unsafe-inline'", "cdn.jsdelivr.net", "fonts.googleapis.com", "fonts.gstatic.com"],
            'font-src': ["'self'", "data:", "cdn.jsdelivr.net", "fonts.gstatic.com"],
            'img-src': ["'self'", "data:", "blob:", "https:", "images.pexels.com", "*.pexels.com"],
            'connect-src': ["'self'", "cdn.jsdelivr.net"]
        }

        Talisman(app, 
            force_https=True,
            content_security_policy=csp,
            strict_transport_security=True,
            session_cookie_secure=True,
            frame_options='DENY' 
        )

    # ============================================================
    # 4. BLUEPRINTS
    # ============================================================
    app.register_blueprint(auth_bp)
    app.register_blueprint(inventaire_bp)
    app.register_blueprint(admin_bp)
    app.register_blueprint(main_bp)
    app.register_blueprint(api_bp)
    app.register_blueprint(securite_bp)

    # ============================================================
    # 5. GESTION ERREURS
    # ============================================================
    @app.errorhandler(404)
    def not_found_error(error):
        return render_template('errors/404.html'), 404

    @app.errorhandler(500)
    def internal_error(error):
        db.session.rollback()
        app.logger.error(f"Server Error: {error}")
        return render_template('errors/500.html'), 500

    @app.errorhandler(429)
    def ratelimit_handler(e):
        if request.is_json or request.path.startswith('/api/'):
            return {"error": "Trop de requ√™tes. Veuillez patienter."}, 429
        return render_template("errors/429.html"), 429

    # ============================================================
    # 6. FILTRES JINJA
    # ============================================================
    @app.template_filter('strftime')
    def format_datetime_filter(value, fmt='%d/%m/%Y %H:%M'):
        if isinstance(value, str):
            try: value = datetime.fromisoformat(value)
            except (ValueError, TypeError): return value
        if isinstance(value, (datetime, date)): return value.strftime(fmt)
        return value

    @app.template_filter('strftime_fr')
    def format_datetime_fr_filter(value, fmt):
        if isinstance(value, str):
            try: value = datetime.fromisoformat(value)
            except (ValueError, TypeError): return value
        if not isinstance(value, (datetime, date)): return value
        
        jours = ["lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi", "dimanche"]
        mois = ["janvier", "f√©vrier", "mars", "avril", "mai", "juin", "juillet", "ao√ªt", "septembre", "octobre", "novembre", "d√©cembre"]
        
        format_fr = fmt.replace('%A', jours[value.weekday()].capitalize())
        format_fr = format_fr.replace('%B', mois[value.month - 1])
        return value.strftime(format_fr)

    app.jinja_env.filters['annee_scolaire'] = annee_scolaire_format

    # ============================================================
    # 7. CONTEXT PROCESSORS (GLOBAL DATA)
    # ============================================================
    @app.context_processor
    def inject_global_data():
        context = {
            'all_armoires': [], 'all_categories': [], 'alertes_total': 0,
            'licence': {'statut': 'FREE', 'is_pro': False, 'instance_id': 'N/A'},
            'nom_etablissement': None
        }
        
        etablissement_id = session.get('etablissement_id')
        if not etablissement_id: return context
            
        try:
            context['all_armoires'] = db.session.execute(
                db.select(Armoire).filter_by(etablissement_id=etablissement_id).order_by(Armoire.nom)
            ).scalars().all()
            
            context['all_categories'] = db.session.execute(
                db.select(Categorie).filter_by(etablissement_id=etablissement_id).order_by(Categorie.nom)
            ).scalars().all()
            
            alert_info = get_alerte_info()
            context['alertes_total'] = alert_info.get('alertes_total', 0)
            
            params_dict = get_etablissement_params(etablissement_id)
            
            if params_dict.get('licence_statut') == 'PRO':
                context['licence']['statut'] = 'PRO'
                context['licence']['is_pro'] = True
            
            if params_dict.get('instance_id'):
                context['licence']['instance_id'] = params_dict.get('instance_id')

            context['nom_etablissement'] = session.get('nom_etablissement')
            
            return context
            
        except SQLAlchemyError as e:
            current_app.logger.error(f"Erreur context_processor : {e}")
            return context
        except Exception as e:
            current_app.logger.error(f"Erreur inattendue context_processor : {e}")
            return context
            
    return app

if __name__ == '__main__':
    app = create_app()
    app.run(host='0.0.0.0', port=5000, debug=True)


==================================================
FICHIER : config.py
==================================================
ITEMS_PER_PAGE = 10

==================================================
FICHIER : db.py
==================================================
import uuid
from datetime import datetime, date
from flask_sqlalchemy import SQLAlchemy
from sqlalchemy.sql import func
from flask_login import UserMixin

db = SQLAlchemy()

def init_app(app):
    db.init_app(app)
    # La cr√©ation des tables se fait via reset_db.py

# ============================================================
# 1. MOD√àLES DE BASE (Etablissement & Utilisateur)
# ============================================================

class Etablissement(db.Model):
    __tablename__ = 'etablissements'
    id = db.Column(db.Integer, primary_key=True)
    nom = db.Column(db.String(100), nullable=False)
    code_invitation = db.Column(db.String(20), unique=True)
    
    # Relations compl√®tes (Bidirectionnelles)
    utilisateurs = db.relationship('Utilisateur', backref='etablissement', lazy=True)
    objets = db.relationship('Objet', backref='etablissement', lazy=True)
    kits = db.relationship('Kit', backref='etablissement', lazy=True)
    armoires = db.relationship('Armoire', backref='etablissement', lazy=True)
    categories = db.relationship('Categorie', backref='etablissement', lazy=True)
    # Relation S√©curit√©
    equipements_securite = db.relationship('EquipementSecurite', backref='etablissement', lazy=True)

class Utilisateur(UserMixin, db.Model):
    __tablename__ = 'utilisateurs'
    id = db.Column(db.Integer, primary_key=True)
    nom_utilisateur = db.Column(db.String(150), nullable=False)
    email = db.Column(db.String(150))
    mot_de_passe = db.Column(db.String(255), nullable=False) # Hash bcrypt/scrypt
    role = db.Column(db.String(50), default='utilisateur')
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)

# ============================================================
# 2. GESTION DU MAT√âRIEL (Objets & Kits)
# ============================================================

class Armoire(db.Model):
    __tablename__ = 'armoires'
    id = db.Column(db.Integer, primary_key=True)
    nom = db.Column(db.String(100), nullable=False)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    objets = db.relationship('Objet', back_populates='armoire')

class Categorie(db.Model):
    __tablename__ = 'categories'
    id = db.Column(db.Integer, primary_key=True)
    nom = db.Column(db.String(100), nullable=False)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    objets = db.relationship('Objet', back_populates='categorie')

class Objet(db.Model):
    __tablename__ = 'objets'
    id = db.Column(db.Integer, primary_key=True)
    nom = db.Column(db.String(100), nullable=False)
    quantite_physique = db.Column(db.Integer, default=0)
    seuil = db.Column(db.Integer, default=0)
    date_peremption = db.Column(db.Date, nullable=True)
    image_url = db.Column(db.String(255), nullable=True)
    fds_url = db.Column(db.String(255), nullable=True)
    
    # FK
    armoire_id = db.Column(db.Integer, db.ForeignKey('armoires.id'))
    categorie_id = db.Column(db.Integer, db.ForeignKey('categories.id'))
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    
    # Relations
    armoire = db.relationship('Armoire', back_populates='objets')
    categorie = db.relationship('Categorie', back_populates='objets')
    
    # Champs de gestion
    en_commande = db.Column(db.Integer, default=0) 
    traite = db.Column(db.Integer, default=0)

    __table_args__ = (
        db.Index('idx_objets_etablissement_categorie', 'etablissement_id', 'categorie_id'),
    )

class Kit(db.Model):
    __tablename__ = 'kits'
    id = db.Column(db.Integer, primary_key=True)
    nom = db.Column(db.String(100), nullable=False)
    description = db.Column(db.Text)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    
    # Relation vers la table de liaison
    objets_assoc = db.relationship("KitObjet", back_populates="kit", cascade="all, delete-orphan")

class KitObjet(db.Model):
    """Table de liaison Kit <-> Objet (kit_composants)"""
    __tablename__ = 'kit_composants'

    id = db.Column(db.Integer, primary_key=True, autoincrement=True)
    
    # Cl√©s √©trang√®res
    kit_id = db.Column(db.Integer, db.ForeignKey('kits.id', ondelete='CASCADE'), nullable=False)
    objet_id = db.Column(db.Integer, db.ForeignKey('objets.id', ondelete='RESTRICT'), nullable=False)
    
    # Donn√©es
    quantite = db.Column(db.Integer, nullable=False)
    date_creation = db.Column(db.DateTime(timezone=True), server_default=func.current_timestamp())
    
    # SaaS
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)

    # Relations
    kit = db.relationship("Kit", back_populates="objets_assoc")
    objet = db.relationship("Objet")

    __table_args__ = (
        db.UniqueConstraint('kit_id', 'objet_id', name='_kit_objet_uc'),
        db.CheckConstraint('quantite > 0', name='check_quantite_positive'),
        db.Index('idx_kit_composants_kit', 'kit_id'),
        db.Index('idx_kit_composants_objet', 'objet_id'),
    )

# ============================================================
# 3. SYST√àME DE R√âSERVATION & PANIER
# ============================================================

class Panier(db.Model):
    __tablename__ = 'paniers'
    
    # UUID stock√© en String(36)
    id = db.Column(db.String(36), primary_key=True, default=lambda: str(uuid.uuid4()))
    id_utilisateur = db.Column(db.Integer, db.ForeignKey('utilisateurs.id', ondelete='CASCADE'), nullable=False)
    date_creation = db.Column(db.DateTime(timezone=True), server_default=func.current_timestamp())
    date_expiration = db.Column(db.DateTime(timezone=True), nullable=False)
    statut = db.Column(db.String(20), default='actif') # actif, valid√©, expir√©
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)

    items = db.relationship("PanierItem", back_populates="panier", cascade="all, delete-orphan")
    
    __table_args__ = (
        db.Index('idx_paniers_utilisateur', 'id_utilisateur'),
        db.Index('idx_paniers_expiration', 'date_expiration'),
    )

class PanierItem(db.Model):
    __tablename__ = 'panier_items'
    
    id = db.Column(db.Integer, primary_key=True, autoincrement=True)
    id_panier = db.Column(db.String(36), db.ForeignKey('paniers.id', ondelete='CASCADE'), nullable=False)
    
    type = db.Column(db.String(10), nullable=False) # 'objet' ou 'kit'
    id_item = db.Column(db.Integer, nullable=False) # ID de l'objet ou du kit
    quantite = db.Column(db.Integer, nullable=False)
    
    # Cr√©neau
    date_reservation = db.Column(db.Date, nullable=False)
    heure_debut = db.Column(db.String(5), nullable=False)
    heure_fin = db.Column(db.String(5), nullable=False)
    
    date_ajout = db.Column(db.DateTime(timezone=True), server_default=func.current_timestamp())

    panier = db.relationship("Panier", back_populates="items")
    
    __table_args__ = (
        db.CheckConstraint('quantite > 0', name='check_panier_qte_positive'),
        db.Index('idx_panier_items_panier', 'id_panier'),
    )

class Reservation(db.Model):
    __tablename__ = 'reservations'
    id = db.Column(db.Integer, primary_key=True)
    
    utilisateur_id = db.Column(db.Integer, db.ForeignKey('utilisateurs.id'), nullable=False)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    
    # Quoi (Objet OU Kit) - XOR Logic
    objet_id = db.Column(db.Integer, db.ForeignKey('objets.id'), nullable=True)
    kit_id = db.Column(db.Integer, db.ForeignKey('kits.id'), nullable=True)
    
    # D√©tails
    quantite_reservee = db.Column(db.Integer, nullable=False)
    debut_reservation = db.Column(db.DateTime, nullable=False)
    fin_reservation = db.Column(db.DateTime, nullable=False)
    
    # Groupement et Statut
    groupe_id = db.Column(db.String(36), nullable=False, index=True)
    statut = db.Column(db.String(20), default='confirm√©e') # en_attente, confirm√©e, annul√©e
    
    # Tra√ßabilit√©
    date_creation = db.Column(db.DateTime(timezone=True), server_default=func.current_timestamp())
    date_modification = db.Column(db.DateTime(timezone=True), onupdate=func.current_timestamp())

    # Relations
    objet = db.relationship('Objet')
    kit = db.relationship('Kit')
    utilisateur = db.relationship('Utilisateur')

    __table_args__ = (
        db.CheckConstraint(
            '(objet_id IS NOT NULL AND kit_id IS NULL) OR (objet_id IS NULL AND kit_id IS NOT NULL)',
            name='check_objet_ou_kit'
        ),
        db.Index('idx_reservations_groupe', 'groupe_id'),
        db.Index('idx_reservations_statut', 'statut'),
        db.Index('idx_reservations_dates', 'debut_reservation', 'fin_reservation'),
        db.Index('idx_reservations_etablissement_statut', 'etablissement_id', 'statut'),
    )

# ============================================================
# 4. AUDIT & LOGS
# ============================================================

class AuditLog(db.Model):
    __tablename__ = 'audit_log'
    
    id = db.Column(db.Integer, primary_key=True, autoincrement=True)
    timestamp = db.Column(db.DateTime(timezone=True), server_default=func.current_timestamp())
    id_utilisateur = db.Column(db.Integer, db.ForeignKey('utilisateurs.id', ondelete='SET NULL'), nullable=True)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    
    action = db.Column(db.String(50), nullable=False)
    table_cible = db.Column(db.String(50), nullable=False)
    id_enregistrement = db.Column(db.String(50), nullable=True)
    
    details = db.Column(db.Text, nullable=True)
    ip_address = db.Column(db.String(45), nullable=True)
    
    utilisateur = db.relationship("Utilisateur")

    __table_args__ = (
        db.Index('idx_audit_timestamp', 'timestamp'),
        db.Index('idx_audit_utilisateur', 'id_utilisateur'),
    )

class Historique(db.Model):
    """DEPRECATED: Utilisez AuditLog pour les nouveaux enregistrements."""
    __tablename__ = 'historique'
    id = db.Column(db.Integer, primary_key=True)
    objet_id = db.Column(db.Integer, nullable=True)
    utilisateur_id = db.Column(db.Integer, db.ForeignKey('utilisateurs.id'))
    action = db.Column(db.String(50), nullable=False)
    details = db.Column(db.String(255))
    timestamp = db.Column(db.DateTime, default=datetime.now)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    utilisateur = db.relationship('Utilisateur')

# ============================================================
# 5. AUTRES (Budget, Param√®tres...)
# ============================================================

class Parametre(db.Model):
    __tablename__ = 'parametres'
    id = db.Column(db.Integer, primary_key=True)
    cle = db.Column(db.String(50), nullable=False)
    valeur = db.Column(db.Text, nullable=False)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)

class Budget(db.Model):
    __tablename__ = 'budgets'
    id = db.Column(db.Integer, primary_key=True)
    annee = db.Column(db.Integer, nullable=False)
    montant_initial = db.Column(db.Float, default=0.0)
    cloture = db.Column(db.Boolean, default=False)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    depenses = db.relationship('Depense', backref='budget', lazy=True, cascade="all, delete-orphan")

class Depense(db.Model):
    __tablename__ = 'depenses'
    id = db.Column(db.Integer, primary_key=True)
    date_depense = db.Column(db.Date, nullable=False)
    contenu = db.Column(db.String(200))
    montant = db.Column(db.Float, nullable=False)
    est_bon_achat = db.Column(db.Boolean, default=False)
    fournisseur_id = db.Column(db.Integer, db.ForeignKey('fournisseurs.id'), nullable=True)
    budget_id = db.Column(db.Integer, db.ForeignKey('budgets.id'), nullable=False)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    fournisseur = db.relationship('Fournisseur', back_populates='depenses')

class Fournisseur(db.Model):
    __tablename__ = 'fournisseurs'
    id = db.Column(db.Integer, primary_key=True)
    nom = db.Column(db.String(100), nullable=False)
    site_web = db.Column(db.String(255))
    logo = db.Column(db.String(255))
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    depenses = db.relationship('Depense', back_populates='fournisseur')

class Echeance(db.Model):
    __tablename__ = 'echeances'
    id = db.Column(db.Integer, primary_key=True)
    intitule = db.Column(db.String(100), nullable=False)
    date_echeance = db.Column(db.Date, nullable=False)
    details = db.Column(db.Text)
    traite = db.Column(db.Integer, default=0)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)

class Suggestion(db.Model):
    __tablename__ = 'suggestions'
    id = db.Column(db.Integer, primary_key=True)
    objet_id = db.Column(db.Integer, db.ForeignKey('objets.id'), nullable=False)
    utilisateur_id = db.Column(db.Integer, db.ForeignKey('utilisateurs.id'), nullable=False)
    quantite = db.Column(db.Integer, default=1)
    commentaire = db.Column(db.Text)
    date_demande = db.Column(db.DateTime, default=datetime.now)
    statut = db.Column(db.String(20), default='En attente')
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    objet = db.relationship('Objet')
    utilisateur = db.relationship('Utilisateur')

# ============================================================
# 6. S√âCURIT√â & INFRASTRUCTURE (NOUVEAU)
# ============================================================

class EquipementSecurite(db.Model):
    __tablename__ = 'equipements_securite'
    
    id = db.Column(db.Integer, primary_key=True)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    
    nom = db.Column(db.String(100), nullable=False)  # ex: Sorbonne 2
    type_equipement = db.Column(db.String(50), nullable=False) # ex: 'Hotte', 'Extincteur', 'Douche'
    localisation = db.Column(db.String(100)) # ex: Salle 204
    numero_serie = db.Column(db.String(100))
    date_installation = db.Column(db.Date)
    
    # Statut op√©rationnel
    en_service = db.Column(db.Boolean, default=True)
    etat_general = db.Column(db.String(20), default='bon') # 'bon', 'moyen', 'critique'
    
    # Relations
    plans_maintenance = db.relationship('MaintenancePlan', backref='equipement', cascade="all, delete-orphan")
    historique = db.relationship('MaintenanceLog', backref='equipement', cascade="all, delete-orphan")

class MaintenancePlan(db.Model):
    """D√©finit la r√®gle : Ce qu'il faut faire et tous les combien"""
    __tablename__ = 'maintenance_plans'
    
    id = db.Column(db.Integer, primary_key=True)
    equipement_id = db.Column(db.Integer, db.ForeignKey('equipements_securite.id'), nullable=False)
    
    titre = db.Column(db.String(100), nullable=False) # ex: V√©rification annuelle flux d'air
    periodicite_jours = db.Column(db.Integer, nullable=False) # ex: 365
    type_prestataire = db.Column(db.String(20)) # 'interne', 'externe'
    
    # Calcul√© automatiquement par le Service
    date_derniere_action = db.Column(db.Date)
    date_prochaine_action = db.Column(db.Date, nullable=False)
    
    alerte_active = db.Column(db.Boolean, default=True)

class MaintenanceLog(db.Model):
    """La preuve de l'intervention"""
    __tablename__ = 'maintenance_logs'
    
    id = db.Column(db.Integer, primary_key=True)
    equipement_id = db.Column(db.Integer, db.ForeignKey('equipements_securite.id'), nullable=False)
    plan_id = db.Column(db.Integer, db.ForeignKey('maintenance_plans.id'), nullable=True)
    
    date_intervention = db.Column(db.Date, nullable=False, default=datetime.utcnow)
    operateur = db.Column(db.String(100)) # Qui a fait l'action
    resultat = db.Column(db.String(20)) # 'conforme', 'non_conforme', 'repare'
    observations = db.Column(db.Text)
    
    # Gestion documentaire (GED)
    fichier_rapport = db.Column(db.String(255)) # Chemin vers le PDF stock√©

==================================================
FICHIER : extensions.py
==================================================
# extensions.py
from flask_sqlalchemy import SQLAlchemy
from flask_caching import Cache
from flask_limiter import Limiter
from flask_limiter.util import get_remote_address

db = SQLAlchemy()
cache = Cache()

# Configuration du Rate Limiter
limiter = Limiter(
    key_func=get_remote_address,
    default_limits=["2000 per day", "500 per hour"], # Limites globales larges
    storage_uri="memory://", # Stockage en m√©moire (suffisant pour une instance unique)
    strategy="fixed-window"
)

==================================================
FICHIER : forms.py
==================================================
from flask_wtf import FlaskForm
from wtforms import IntegerField, FloatField, DateField, TextAreaField, SelectField, BooleanField, SubmitField
from wtforms.validators import DataRequired, NumberRange, Optional

class BudgetForm(FlaskForm):
    """Formulaire pour cr√©er ou modifier un budget annuel."""
    annee = IntegerField(
        "Ann√©e de d√©but de l'ann√©e scolaire", 
        validators=[DataRequired(message="L'ann√©e est requise."), NumberRange(min=2020, max=2100)]
    )
    montant_initial = FloatField(
        'Montant initial (‚Ç¨)', 
        validators=[DataRequired(message="Le montant est requis."), NumberRange(min=0)]
    )
    submit = SubmitField('Enregistrer')

class DepenseForm(FlaskForm):
    """Formulaire pour ajouter ou modifier une d√©pense."""
    date_depense = DateField(
        'Date de la d√©pense', 
        validators=[DataRequired(message="La date est requise.")], 
        format='%Y-%m-%d'
    )
    fournisseur_id = SelectField(
        'Fournisseur', 
        coerce=int, 
        validators=[Optional()]
    )
    est_bon_achat = BooleanField("Bon d'achat petit mat√©riel (sans fournisseur)")
    contenu = TextAreaField(
        'Contenu / Libell√©', 
        validators=[DataRequired(message="Le contenu est requis.")]
    )
    montant = FloatField(
        'Montant (‚Ç¨)', 
        validators=[DataRequired(message="Le montant est requis."), NumberRange(min=0.01)]
    )
    submit = SubmitField('Ajouter')

==================================================
FICHIER : README.md
==================================================
# Gestion Mat√©riel Labo Coll√®ge et Lyc√©e (GMLCL)

**Version 1.0**

![Logo de l'application](https://raw.githubusercontent.com/crazypopperz/GestionLabo/main/static/logo.png)

## Description

GMLCL est une application web de gestion d'inventaire con√ßue sp√©cifiquement pour les laboratoires de sciences. Elle permet de suivre le stock de mat√©riel, de g√©rer les r√©servations, de suivre un budget et de recevoir des alertes automatiques.

Construite avec Flask, elle fonctionne comme un serveur local accessible sur le r√©seau de l'√©tablissement, sans n√©cessiter de connexion internet. Sa base de donn√©es SQLite la rend enti√®rement autonome et facile √† d√©ployer via un simple ex√©cutable.

### Mod√®le Freemium
- **Version Gratuite :** Acc√®s √† toutes les fonctionnalit√©s, mais l'inventaire est limit√© √† 50 objets uniques.
- **Version Pro :** D√©bloque un nombre illimit√© d'objets et la fonctionnalit√© de sauvegarde de la base de donn√©es.

## Technologies Utilis√©es

- **Backend :** Python 3, Flask, Waitress (serveur de production)
- **Base de Donn√©es :** SQLite 3
- **Frontend :** HTML5, CSS3, JavaScript
- **Packaging :** PyInstaller

## Installation (pour les d√©veloppeurs)

Ce guide est destin√© √† la mise en place d'un environnement de d√©veloppement. Pour une utilisation finale, veuillez utiliser l'ex√©cutable fourni (`GestionLabo.exe`).

1.  **Cloner le projet :**
    ```bash
    git clone https://github.com/crazypopperz/GestionLabo.git
    cd GestionLabo
    ```

2.  **Cr√©er et activer un environnement virtuel :**
    ```bash
    # Cr√©er l'environnement
    python -m venv venv
    # Activer sur Windows
    venv\Scripts\activate
    # Activer sur macOS/Linux
    source venv/bin/activate
    ```

3.  **Installer les d√©pendances :**
    ```bash
    pip install -r requirements.txt
    ```

## Lancement de l'application

### En Mode D√©veloppement
Ce mode active le d√©bogage et le rechargement automatique. Lancez l'application avec la commande suivante. Elle sera accessible √† `http://127.0.0.1:5000`.
```bash
python run.py
```

### En Mode Production (via l'ex√©cutable)
Double-cliquez sur le fichier `GestionLabo.exe`. Une console s'ouvrira, affichant les adresses de connexion pour l'administrateur et pour les autres utilisateurs du r√©seau.

## Cr√©ation de l'Ex√©cutable (Packaging)

L'application est configur√©e pour √™tre compil√©e avec PyInstaller en utilisant un fichier de sp√©cification (`.spec`) pour plus de fiabilit√©.

1.  **Installer les outils n√©cessaires :**
    ```bash
    pip install pyinstaller waitress
    ```

2.  **Lancer la compilation :**
    La configuration est enti√®rement g√©r√©e par le fichier `run.spec`. Ex√©cutez simplement :
    ```bash
    pyinstaller run.spec
    ```

3.  L'ex√©cutable final et ses d√©pendances se trouveront dans le dossier `dist/GestionLabo`.

## Structure du Projet

```
.
‚îú‚îÄ‚îÄ instance/
‚îÇ   ‚îî‚îÄ‚îÄ gestionlabo.db  # Base de donn√©es (cr√©√©e au premier lancement)
‚îú‚îÄ‚îÄ static/             # Fichiers CSS, JS, images
‚îú‚îÄ‚îÄ templates/          # Templates HTML Jinja2
‚îú‚îÄ‚îÄ views/              # Blueprints Flask (logique des routes)
‚îÇ   ‚îú‚îÄ‚îÄ admin.py
‚îÇ   ‚îú‚îÄ‚îÄ auth.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ app.py              # Factory de l'application Flask
‚îú‚îÄ‚îÄ config.py           # Configuration statique
‚îú‚îÄ‚îÄ db.py               # Initialisation de la base de donn√©es
‚îú‚îÄ‚îÄ run.py              # Lanceur pour le D√âVELOPPEMENT
‚îú‚îÄ‚îÄ run_production.py   # Lanceur pour la PRODUCTION (utilis√© par PyInstaller)
‚îú‚îÄ‚îÄ run.spec            # Fichier de configuration pour PyInstaller
‚îú‚îÄ‚îÄ requirements.txt    # D√©pendances Python
‚îî‚îÄ‚îÄ README.md           # Ce fichier
```

## Auteurs et Licence

- **Auteurs :** Yll Basha & Xavier De Baudry d'Asson
- **Licence :** [CC BY-NC-ND 4.0](https://creativecommons.org/licenses/by-nc-nd/4.0/)

==================================================
FICHIER : requirements.txt
==================================================
# --- Framework & Extensions ---
Flask
Flask-Caching
Flask-Limiter
Flask-Login
Flask-SQLAlchemy
Flask-Talisman
Flask-WTF
WTForms
Jinja2
Werkzeug
MarkupSafe
click
itsdangerous
blinker
email-validator
filetype

# --- Serveur & Base de donn√©es (Prod) ---
gunicorn
psycopg2-binary
python-dotenv

# --- Utilitaires M√©tier (PDF, Excel, Images) ---
openpyxl
et_xmlfile
fpdf2
reportlab
pillow
fonttools
defusedxml

# --- R√©seau & Syst√®me ---
requests
packaging
setuptools

==================================================
FICHIER : run.py
==================================================
import socket
from app import app
# from waitress import serve

def get_local_ip():
    """
    Tente de trouver l'adresse IP locale de la machine sur le r√©seau.
    """
    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    try:
        # Cette IP n'a pas besoin d'√™tre joignable, c'est une astuce
        # pour que le syst√®me d'exploitation choisisse la bonne interface r√©seau.
        s.connect(('10.255.255.255', 1))
        IP = s.getsockname()[0]
    except Exception:
        # Si la machine n'est connect√©e √† aucun r√©seau, on retourne l'adresse
        # de boucle locale par d√©faut.
        IP = '127.0.0.1'
    finally:
        s.close()
    return IP

if __name__ == "__main__":
    # Configuration du serveur
    host = '0.0.0.0'  # √âcoute sur toutes les interfaces r√©seau disponibles
    port = 5000
    local_ip = get_local_ip()
    
    # Affichage des informations pour l'administrateur
    print("="*60)
    print("          Serveur GMLCL D√©marr√©")
    print("="*60)
    print("\nL'application est maintenant accessible aux adresses suivantes :")
    print(f"  - Depuis cet ordinateur : http://127.0.0.1:{port}")
    print(f"  - Depuis un autre PC du r√©seau : http://{local_ip}:{port}")
    print("\nIMPORTANT :")
    print("  - NE FERMEZ PAS CETTE FEN√äTRE !")
    print("  - Pour arr√™ter le serveur, fermez cette fen√™tre ou faites Ctrl+C.")
    print("="*60)
    
    # Lancement du serveur de production waitress
    # serve(app, host=host, port=port)
    app.run(host=host, port=port, debug=True)


==================================================
FICHIER : runtime.txt
==================================================
python-3.11.9

==================================================
FICHIER : utils.py
==================================================
# ============================================================
# FICHIER : utils.py (Version Finale - Tout inclus)
# ============================================================
import hashlib
import os
import re
import unicodedata
from functools import wraps
from datetime import datetime, timedelta

# Imports Flask
from flask import session, flash, redirect, url_for, request, current_app

# Imports SQLAlchemy
from sqlalchemy.exc import SQLAlchemyError
from sqlalchemy import func

# Imports Locaux
from db import db, Utilisateur, Parametre, Objet, Reservation, AuditLog, MaintenanceLog, EquipementSecurite, Suggestion
from extensions import cache

# -----------------------------------------------------------------------------
# 1. VALIDATION & SANITIZATION (C'est ce qu'il manquait !)
# -----------------------------------------------------------------------------

# Regex Email conforme RFC 5321 (simplifi√©e mais robuste)
EMAIL_REGEX = re.compile(r'^[a-zA-Z0-9][a-zA-Z0-9._%+-]{0,63}@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$')

def validate_email(email):
    """Valide le format d'un email."""
    if not email or len(email) > 254:
        return False
    return EMAIL_REGEX.match(email.strip().lower()) is not None

def validate_password_strength(password):
    """
    V√©rifie la force du mot de passe.
    Retourne (bool, message_erreur).
    """
    if len(password) < 12:
        return False, "Le mot de passe doit contenir au moins 12 caract√®res."
    if not re.search(r'[A-Z]', password):
        return False, "Le mot de passe doit contenir au moins une majuscule."
    if not re.search(r'[a-z]', password):
        return False, "Le mot de passe doit contenir au moins une minuscule."
    if not re.search(r'[0-9]', password):
        return False, "Le mot de passe doit contenir au moins un chiffre."
    if not re.search(r'[^a-zA-Z0-9]', password):
        return False, "Le mot de passe doit contenir au moins un caract√®re sp√©cial."
    return True, ""

def sanitize_input(text, max_length=100):
    """Nettoie une entr√©e utilisateur (supprime caract√®res de contr√¥le)."""
    if not text: return ""
    text = text.strip()[:max_length]
    # Retire les caract√®res non imprimables
    return re.sub(r'[\x00-\x1f\x7f-\x9f]', '', text)

# -----------------------------------------------------------------------------
# 2. LOGIQUE DE LICENCE
# -----------------------------------------------------------------------------
def calculate_license_key(instance_id):
    """
    G√©n√®re une cl√© bas√©e uniquement sur l'ID unique de l'installation.
    """
    secret = os.environ.get('GMLCL_PRO_KEY')
    if not secret or not instance_id: return None
    
    # Signature simple : ID + Secret
    raw_string = f"{instance_id}-{secret}"
    return hashlib.sha256(raw_string.encode()).hexdigest()[:16].upper()

# -----------------------------------------------------------------------------
# 3. FONCTIONS DE V√âRIFICATION SYST√àME
# -----------------------------------------------------------------------------
def is_setup_needed(app):
    return False

# -----------------------------------------------------------------------------
# 4. LOGGING (AUDIT)
# -----------------------------------------------------------------------------
def log_action(action, details=None):
    """Enregistre une action dans l'Audit Log."""
    try:
        user_id = session.get('user_id')
        etablissement_id = session.get('etablissement_id')
        
        if not user_id or not etablissement_id:
            return 

        # On r√©cup√®re l'IP r√©elle
        ip = request.headers.get('X-Forwarded-For', request.remote_addr)
        
        # Hashage MD5 pour compatibilit√© DB (32 chars)
        if ip:
            ip_safe = hashlib.md5(ip.encode()).hexdigest()
        else:
            ip_safe = 'unknown'

        log = AuditLog(
            id_utilisateur=user_id,
            ip_address=ip_safe,
            action=action,
            details=str(details) if details else None,
            etablissement_id=etablissement_id,
            table_cible="GENERAL"
        )
        
        db.session.add(log)
        db.session.commit()
        
    except Exception as e:
        current_app.logger.error(f"‚ö†Ô∏è ERREUR AUDIT LOG: {e}")
        db.session.rollback()

# -----------------------------------------------------------------------------
# 5. GESTION DU CACHE
# -----------------------------------------------------------------------------
@cache.memoize(timeout=300)
def get_etablissement_params(etablissement_id):
    """R√©cup√®re les param√®tres critiques (Licence) avec mise en cache."""
    if not etablissement_id:
        return {}

    try:
        params = db.session.execute(
            db.select(Parametre)
            .filter_by(etablissement_id=etablissement_id)
            .where(Parametre.cle.in_(['licence_statut', 'instance_id']))
        ).scalars().all()
        
        return {p.cle: p.valeur for p in params}
    except SQLAlchemyError:
        return {}

# -----------------------------------------------------------------------------
# 6. D√âCORATEURS DE S√âCURIT√â
# -----------------------------------------------------------------------------
def login_required(f):
    @wraps(f)
    def decorated_function(*args, **kwargs):
        if 'user_id' not in session:
            flash("Veuillez vous connecter pour acc√©der √† cette page.", "error")
            return redirect(url_for('auth.login'))
        return f(*args, **kwargs)
    return decorated_function

def admin_required(f):
    @wraps(f)
    def decorated_function(*args, **kwargs):
        if session.get('user_role') != 'admin':
            flash("Acc√®s r√©serv√© aux administrateurs.", "error")
            return redirect(url_for('inventaire.index'))
        return f(*args, **kwargs)
    return decorated_function

def limit_objets_required(f):
    @wraps(f)
    def decorated_function(*args, **kwargs):
        etablissement_id = session.get('etablissement_id')
        if not etablissement_id:
            flash("Session invalide. Veuillez vous reconnecter.", "error")
            return redirect(url_for('auth.login'))

        params = get_etablissement_params(etablissement_id)
        is_pro = params.get('licence_statut') == 'PRO'
        
        if not is_pro:
            count = db.session.query(Objet).filter_by(etablissement_id=etablissement_id).count()
            if count >= 50:
                flash("La version gratuite est limit√©e √† 50 objets. Passez √† la version Pro.", "warning")
                return redirect(request.referrer or url_for('inventaire.index'))
        
        return f(*args, **kwargs)
    return decorated_function

# -----------------------------------------------------------------------------
# 7. LOGIQUE M√âTIER (ALERTES)
# -----------------------------------------------------------------------------
def get_alerte_info():
    """Calcule les alertes. Chaque bloc est isol√© pour √©viter un crash global."""
    etablissement_id = session.get('etablissement_id')
    
    # Valeurs par d√©faut
    alerts = {
        "alertes_stock": 0,
        "alertes_peremption": 0,
        "alertes_securite": 0,
        "alertes_suggestions": 0,
        "alertes_total": 0
    }

    if not etablissement_id:
        return alerts

    now = datetime.now()

    # A. Calcul Stock & P√©remption
    try:
        all_objets = db.session.execute(
            db.select(Objet).filter_by(etablissement_id=etablissement_id)
        ).scalars().all()

        count_stock = 0
        count_peremption = 0
        date_limite_peremption = (now + timedelta(days=30)).date()

        for objet in all_objets:
            try:
                # Stock
                total_reserve = db.session.query(func.sum(Reservation.quantite_reservee)).filter(
                    Reservation.objet_id == objet.id,
                    Reservation.fin_reservation > now
                ).scalar() or 0
                
                quantite_disponible = objet.quantite_physique - total_reserve
                seuil_numeric = int(objet.seuil) if objet.seuil is not None else 0
                
                if objet.en_commande == 0 and int(quantite_disponible) <= seuil_numeric:
                    count_stock += 1
                
                # P√©remption
                if objet.date_peremption and objet.traite == 0:
                    d_perim = objet.date_peremption if isinstance(objet.date_peremption, datetime) else datetime.strptime(str(objet.date_peremption), '%Y-%m-%d').date()
                    if d_perim < date_limite_peremption:
                        count_peremption += 1
            except Exception:
                continue 

        alerts["alertes_stock"] = count_stock
        alerts["alertes_peremption"] = count_peremption

    except Exception as e:
        current_app.logger.error(f"Erreur calcul stock/p√©remption: {e}")

    # B. Calcul S√©curit√© (Signalements)
    try:
        count_securite = db.session.query(MaintenanceLog).join(EquipementSecurite).filter(
            EquipementSecurite.etablissement_id == etablissement_id,
            MaintenanceLog.resultat == 'signalement'
        ).count()
        alerts["alertes_securite"] = count_securite
    except Exception as e:
        current_app.logger.error(f"Erreur calcul s√©curit√©: {e}")

    # C. Calcul Suggestions
    try:
        count_suggestions = db.session.query(Suggestion).filter_by(
            etablissement_id=etablissement_id, 
            statut='En attente'
        ).count()
        alerts["alertes_suggestions"] = count_suggestions
    except Exception as e:
        current_app.logger.error(f"Erreur calcul suggestions: {e}")

    # Total
    alerts["alertes_total"] = (
        alerts["alertes_stock"] + 
        alerts["alertes_peremption"] + 
        alerts["alertes_securite"] + 
        alerts["alertes_suggestions"]
    )

    return alerts

def annee_scolaire_format(year):
    if isinstance(year, int): return f"{year}-{year + 1}"
    return year

# ===============================================
#  VERIFICATION DES UPLOADS
# ===============================================
ALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'pdf', 'json', 'csv', 'xlsx'}

def allowed_file(filename):
    return '.' in filename and filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS

==================================================
FICHIER : services\inventory_service.py
==================================================
# -*- coding: utf-8 -*-
import logging
from dataclasses import dataclass
from typing import List, Optional, Dict, Any
from datetime import datetime, timedelta
from sqlalchemy import select, or_, func
from sqlalchemy.orm import joinedload  # <--- C'EST L'IMPORT QUI MANQUAIT
from sqlalchemy.exc import SQLAlchemyError
from db import db, Objet, Categorie, Armoire, Reservation, Historique

logger = logging.getLogger(__name__)

class InventoryServiceError(Exception):
    """Exception m√©tier pour l'inventaire."""
    pass

# --- DTOs (Data Transfer Objects) ---
@dataclass
class InventoryContext:
    armoire_nom: Optional[str]
    categorie_nom: Optional[str]

@dataclass
class InventoryDTO:
    items: List[Dict[str, Any]]
    total_pages: int
    current_page: int
    context: InventoryContext

class InventoryService:
    def __init__(self, etablissement_id: int):
        self.etablissement_id = etablissement_id

    def search_objets(self, query_text: str, limit: int = 10) -> List[Dict[str, Any]]:
        """Recherche rapide pour l'autocompl√©tion."""
        if not query_text or len(query_text) < 2:
            return []
        
        safe_limit = min(limit, 50)
            
        try:
            stmt = (
                select(Objet)
                .filter(
                    Objet.etablissement_id == self.etablissement_id,
                    Objet.nom.ilike(f"%{query_text}%")
                )
                .limit(safe_limit)
            )
            results = db.session.execute(stmt).scalars().all()
            
            return [{
                'id': obj.id, 
                'nom': obj.nom, 
                'image': obj.image_url,
                'armoire': obj.armoire.nom if obj.armoire else None, 
                'quantite': obj.quantite_physique
            } for obj in results]
        except SQLAlchemyError as e:
            logger.error(f"Search error: {e}")
            raise InventoryServiceError("Erreur lors de la recherche.")

    def get_paginated_inventory(self, page: int, sort_by: str, direction: str, filters: dict) -> InventoryDTO:
        """R√©cup√®re l'inventaire filtr√© et pagin√©."""
        ITEMS_PER_PAGE = 20
        try:
            page = max(1, min(int(page), 1000))
        except (ValueError, TypeError):
            page = 1

        try:
            query = select(Objet).filter_by(etablissement_id=self.etablissement_id)
            query = query.outerjoin(Categorie).outerjoin(Armoire)

            if filters.get('q'):
                term = f"%{filters['q']}%"
                query = query.filter(or_(
                    Objet.nom.ilike(term), 
                    Categorie.nom.ilike(term), 
                    Armoire.nom.ilike(term)
                ))
            
            if filters.get('armoire_id'):
                query = query.filter(Objet.armoire_id == filters['armoire_id'])
            if filters.get('categorie_id'):
                query = query.filter(Objet.categorie_id == filters['categorie_id'])

            if filters.get('etat'):
                today = datetime.now().date()
                if filters['etat'] == 'perime':
                    query = query.filter(Objet.date_peremption < today)
                elif filters['etat'] == 'bientot':
                    query = query.filter(
                        Objet.date_peremption >= today, 
                        Objet.date_peremption <= today + timedelta(days=30)
                    )
                elif filters['etat'] == 'stock':
                    query = query.filter(
                        or_(
                            Objet.quantite_physique <= Objet.seuil,
                            (Objet.quantite_physique <= Objet.seuil + 2) & (Objet.seuil > 2)
                        )
                    )

            ALLOWED_SORT = {
                'nom': Objet.nom, 'quantite': Objet.quantite_physique,
                'seuil': Objet.seuil, 'date_peremption': Objet.date_peremption,
                'categorie': Categorie.nom, 'armoire': Armoire.nom
            }
            sort_expr = ALLOWED_SORT.get(sort_by, Objet.nom)
            query = query.order_by(sort_expr.desc() if direction == 'desc' else sort_expr.asc())

            pagination = db.paginate(query, page=page, per_page=ITEMS_PER_PAGE, error_out=False)
            
            serialized_items = [{
                'id': obj.id,
                'nom': obj.nom,
                'quantite_physique': obj.quantite_physique,
                'seuil': obj.seuil,
                'date_peremption': obj.date_peremption,
                'image_url': obj.image_url,
                'fds_url': obj.fds_url,
                'armoire_nom': obj.armoire.nom if obj.armoire else None,
                'categorie_nom': obj.categorie.nom if obj.categorie else None,
                'armoire_id': obj.armoire_id,
                'categorie_id': obj.categorie_id,
                'quantite_disponible': obj.quantite_physique 
            } for obj in pagination.items]

            armoire_nom = None
            categorie_nom = None
            if filters.get('armoire_id'):
                a = db.session.get(Armoire, filters['armoire_id'])
                if a: armoire_nom = a.nom
            if filters.get('categorie_id'):
                c = db.session.get(Categorie, filters['categorie_id'])
                if c: categorie_nom = c.nom

            return InventoryDTO(
                items=serialized_items,
                total_pages=pagination.pages,
                current_page=page,
                context=InventoryContext(armoire_nom=armoire_nom, categorie_nom=categorie_nom)
            )

        except SQLAlchemyError as e:
            logger.error(f"Inventory error: {e}")
            raise InventoryServiceError("Impossible de charger l'inventaire.")

    def get_dormant_objects(self, days: int = 365) -> List[Dict[str, Any]]:
        """
        R√©cup√®re les objets non r√©serv√©s ET non v√©rifi√©s depuis 'days' jours.
        """
        limit_date = datetime.now() - timedelta(days=days)
        
        # 1. Objets r√©serv√©s r√©cemment
        recent_reservations = select(Reservation.objet_id).filter(
            Reservation.etablissement_id == self.etablissement_id,
            Reservation.fin_reservation >= limit_date
        )
        
        # 2. Objets v√©rifi√©s/modifi√©s r√©cemment (via Historique)
        recent_activity = select(Historique.objet_id).filter(
            Historique.etablissement_id == self.etablissement_id,
            Historique.timestamp >= limit_date,
            Historique.objet_id != None
        )
        
        # 3. Requ√™te principale
        stmt = (
            select(Objet)
            .options(joinedload(Objet.armoire), joinedload(Objet.categorie))
            .filter(
                Objet.etablissement_id == self.etablissement_id,
                Objet.id.not_in(recent_reservations),
                Objet.id.not_in(recent_activity)
            )
            .order_by(Objet.nom)
        )
        
        objets = db.session.execute(stmt).scalars().all()
        
        results = []
        for obj in objets:
            # Derni√®re utilisation pour info
            last_resa = db.session.execute(
                select(func.max(Reservation.fin_reservation))
                .filter_by(objet_id=obj.id, etablissement_id=self.etablissement_id)
            ).scalar()
            
            results.append({
                'id': obj.id,
                'nom': obj.nom,
                'image': obj.image_url,
                'armoire': obj.armoire.nom if obj.armoire else "Non rang√©",
                'categorie': obj.categorie.nom if obj.categorie else "-",
                'quantite': obj.quantite_physique,
                'derniere_utilisation': last_resa
            })
            
        return results

==================================================
FICHIER : services\kit_service.py
==================================================
import logging
from typing import List, Dict, Any, Set, Tuple
from sqlalchemy import select
from sqlalchemy.exc import SQLAlchemyError
from db import db, Kit, KitObjet

logger = logging.getLogger(__name__)

class KitServiceError(Exception):
    """Exception lev√©e lors d'une erreur m√©tier dans le service Kit."""
    pass

class KitService:
    TYPE_KIT = 'kit'
    TYPE_OBJET = 'objet'
    MAX_ITEMS_BATCH = 100
    MAX_QTY_PER_ITEM = 100

    @staticmethod
    def decomposer_items(items_list: List[Dict[str, Any]], etablissement_id: int) -> Dict[int, int]:
        """
        D√©compose une liste d'items en besoins unitaires.
        """
        if not items_list:
            return {}

        if len(items_list) > KitService.MAX_ITEMS_BATCH:
            raise KitServiceError(f"Trop d'items ({len(items_list)}). Max autoris√©: {KitService.MAX_ITEMS_BATCH}")

        consommation: Dict[int, int] = {}
        kit_ids_to_fetch: Set[int] = set()
        valid_items: List[Tuple[str, int, int]] = []

        try:
            for idx, item in enumerate(items_list):
                qty = item.get('quantite') if 'quantite' in item else item.get('quantity')
                
                if qty is None:
                    logger.warning(f"Item index {idx} ignor√© : quantit√© manquante. Payload: {item}")
                    continue

                try:
                    i_type = str(item.get('type'))
                    i_id = int(item.get('id'))
                    i_qty = int(qty)
                except (ValueError, TypeError):
                    continue

                if i_qty <= 0: continue
                
                if i_qty > KitService.MAX_QTY_PER_ITEM:
                    raise KitServiceError(f"Quantit√© excessive pour l'item {i_type} #{i_id} ({i_qty}). Max: {KitService.MAX_QTY_PER_ITEM}")

                valid_items.append((i_type, i_id, i_qty))
                
                if i_type == KitService.TYPE_KIT:
                    kit_ids_to_fetch.add(i_id)

            kits_map = {}
            if kit_ids_to_fetch:
                stmt = select(Kit).filter(
                    Kit.id.in_(kit_ids_to_fetch),
                    Kit.etablissement_id == etablissement_id
                )
                kits = db.session.execute(stmt).scalars().all()
                kits_map = {k.id: k for k in kits}

            for i_type, i_id, i_qty in valid_items:
                if i_type == KitService.TYPE_OBJET:
                    consommation[i_id] = consommation.get(i_id, 0) + i_qty
                
                elif i_type == KitService.TYPE_KIT:
                    kit = kits_map.get(i_id)
                    if not kit:
                        logger.warning(f"Kit introuvable ou interdit : ID {i_id} (Etab: {etablissement_id})")
                        raise KitServiceError(f"Le kit demand√© (ID {i_id}) est introuvable ou indisponible.")
                    
                    for comp in kit.objets_assoc:
                        total = i_qty * comp.quantite
                        consommation[comp.objet_id] = consommation.get(comp.objet_id, 0) + total
            
            return consommation

        except SQLAlchemyError as e:
            logger.error(f"DB Error in decomposer_items: {e}")
            raise KitServiceError("Erreur base de donn√©es lors de la d√©composition") from e

==================================================
FICHIER : services\panier_service.py
==================================================
# -*- coding: utf-8 -*-
import logging
import uuid
import re
import json
from datetime import datetime, timedelta, date, timezone
from typing import List, Dict, Any, Optional, Tuple
from sqlalchemy import select, delete
from sqlalchemy.exc import SQLAlchemyError
from sqlalchemy.orm import joinedload

from db import db, Panier, PanierItem, Reservation, AuditLog, Objet, Kit
from services.stock_service import StockService, StockServiceError
from services.kit_service import KitService

logger = logging.getLogger(__name__)

class PanierServiceError(Exception):
    """Exception m√©tier pour la gestion du panier."""
    pass

class PanierService:
    PANIER_TTL_HOURS = 24
    MAX_ITEMS_PANIER = 50
    MAX_QTY_PER_ITEM = 9999 # Valeur par d√©faut si KitService non dispo
    MAX_CRENEAUX = 10       # Limite de cr√©neaux simultan√©s

    def __init__(self, etablissement_id: int):
        self.etablissement_id = etablissement_id
        self.stock_service = StockService(etablissement_id)
        # On r√©cup√®re la constante de KitService si disponible
        if hasattr(KitService, 'MAX_QTY_PER_ITEM'):
            self.MAX_QTY_PER_ITEM = KitService.MAX_QTY_PER_ITEM

    def _get_active_panier(self, user_id: int, create_if_missing: bool = True, with_lock: bool = False) -> Optional[Panier]:
        """R√©cup√®re le panier actif avec gestion d'expiration."""
        now = datetime.now(timezone.utc)
        
        stmt = select(Panier).filter_by(
            id_utilisateur=user_id,
            etablissement_id=self.etablissement_id,
            statut='actif'
        )
        
        if with_lock:
            stmt = stmt.with_for_update()

        panier = db.session.execute(stmt).scalar_one_or_none()

        # Rotation si expir√©
        if panier and panier.date_expiration < now:
            panier.statut = 'expir√©'
            panier = None

        if not panier and create_if_missing:
            panier = Panier(
                id=str(uuid.uuid4()),
                id_utilisateur=user_id,
                etablissement_id=self.etablissement_id,
                date_expiration=now + timedelta(hours=self.PANIER_TTL_HOURS),
                statut='actif'
            )
            db.session.add(panier)
            db.session.flush()
        elif panier:
            # Refresh TTL
            panier.date_expiration = now + timedelta(hours=self.PANIER_TTL_HOURS)
            
        return panier

    def _verify_item_ownership(self, item_type: str, item_id: int):
        """S√âCURIT√â IDOR : V√©rifie l'appartenance √† l'√©tablissement."""
        exists = False
        if item_type == 'objet':
            exists = db.session.execute(
                select(Objet.id).filter_by(id=item_id, etablissement_id=self.etablissement_id)
            ).scalar()
        elif item_type == 'kit':
            exists = db.session.execute(
                select(Kit.id).filter_by(id=item_id, etablissement_id=self.etablissement_id)
            ).scalar()
        
        if not exists:
            logger.warning(f"SECURITY: IDOR Attempt. Etab {self.etablissement_id} tried accessing {item_type} {item_id}")
            raise PanierServiceError("√âl√©ment introuvable ou acc√®s refus√©.")

    def _parse_and_validate_dates(self, date_str: str, h_debut: str, h_fin: str) -> Tuple[datetime, datetime]:
        """Valide format et r√®gles m√©tier (Pass√©, Futur, Dur√©e)."""
        if not re.match(r'^\d{4}-\d{2}-\d{2}$', date_str):
            raise PanierServiceError("Format date invalide.")
        if not re.match(r'^\d{2}:\d{2}$', h_debut) or not re.match(r'^\d{2}:\d{2}$', h_fin):
            raise PanierServiceError("Format heure invalide.")

        try:
            d = datetime.strptime(date_str, "%Y-%m-%d").date()
            t_start = datetime.strptime(h_debut, "%H:%M").time()
            t_end = datetime.strptime(h_fin, "%H:%M").time()
            
            start_dt = datetime.combine(d, t_start)
            end_dt = datetime.combine(d, t_end)
        except ValueError:
            raise PanierServiceError("Date/Heure incoh√©rente.")

        if start_dt >= end_dt:
            raise PanierServiceError("D√©but doit √™tre avant Fin.")

        # R√®gles m√©tier StockService
        now = datetime.now()
        if start_dt < now - timedelta(minutes=StockService.PAST_BUFFER_MINUTES):
            raise PanierServiceError("Impossible de r√©server dans le pass√©.")
        if start_dt > now + timedelta(days=StockService.MAX_FUTURE_DAYS):
            raise PanierServiceError(f"Limite de r√©servation : {StockService.MAX_FUTURE_DAYS} jours.")
        
        duration = (end_dt - start_dt).total_seconds() / 3600
        if duration > StockService.MAX_RESERVATION_DURATION_HOURS:
            raise PanierServiceError(f"Dur√©e max d√©pass√©e ({StockService.MAX_RESERVATION_DURATION_HOURS}h).")

        return start_dt, end_dt

    def get_contenu(self, user_id: int) -> Dict[str, Any]:
        """
        R√©cup√®re le contenu (Lecture Seule).
        CORRECTION : Le total compte les CR√âNEAUX UNIQUES.
        """
        panier = self._get_active_panier(user_id, create_if_missing=False)
        
        if not panier or not panier.items:
            return {'panier_id': None, 'items': [], 'total': 0}

        # Optimisation : Chargement en lot des noms
        objet_ids = [i.id_item for i in panier.items if i.type == 'objet']
        kit_ids = [i.id_item for i in panier.items if i.type == 'kit']
        
        objets_map = {}
        if objet_ids:
            objs = db.session.execute(select(Objet).filter(Objet.id.in_(objet_ids))).scalars().all()
            objets_map = {o.id: o for o in objs}
            
        kits_map = {}
        if kit_ids:
            kits = db.session.execute(select(Kit).filter(Kit.id.in_(kit_ids))).scalars().all()
            kits_map = {k.id: k for k in kits}

        items_data = []
        creneaux_uniques = set()

        for item in panier.items:
            nom = "√âl√©ment supprim√©"
            image = None
            
            if item.type == 'objet':
                obj = objets_map.get(item.id_item)
                if obj:
                    nom = obj.nom
                    image = obj.image_url
            elif item.type == 'kit':
                kit = kits_map.get(item.id_item)
                if kit: nom = kit.nom

            items_data.append({
                'id': item.id,
                'type': item.type,
                'id_item': item.id_item,
                'nom': nom,
                'image': image,
                'quantite': item.quantite,
                'date': item.date_reservation.isoformat(),
                'date_reservation': item.date_reservation.isoformat(),
                'heure_debut': item.heure_debut,
                'heure_fin': item.heure_fin
            })
            
            # Signature unique du cr√©neau
            creneaux_uniques.add((item.date_reservation, item.heure_debut, item.heure_fin))

        return {
            'id_panier': panier.id,
            'expiration': panier.date_expiration.isoformat(),
            'items': items_data,
            'total': len(creneaux_uniques) # C'est ici que √ßa change tout !
        }

    def ajouter_item(self, user_id: int, item_data: Dict[str, Any]) -> Dict[str, Any]:
        """Ajoute un item au panier (S√©curis√©)."""
        try:
            required = ['type', 'id', 'quantite', 'date', 'heure_debut', 'heure_fin']
            if not all(k in item_data for k in required):
                raise PanierServiceError("Donn√©es manquantes.")

            try:
                qte = int(item_data['quantite'])
                item_id = int(item_data['id'])
                item_type = item_data['type']
            except (ValueError, TypeError):
                raise PanierServiceError("Types invalides.")

            if item_type not in ['objet', 'kit']:
                raise PanierServiceError("Type inconnu.")

            if qte <= 0 or qte > self.MAX_QTY_PER_ITEM:
                raise PanierServiceError(f"Quantit√© invalide (Max {self.MAX_QTY_PER_ITEM}).")

            start_dt, end_dt = self._parse_and_validate_dates(
                item_data['date'], item_data['heure_debut'], item_data['heure_fin']
            )

            self._verify_item_ownership(item_type, item_id)

            panier = self._get_active_panier(user_id, create_if_missing=True)
            
            # V√©rification limite items
            if len(panier.items) >= self.MAX_ITEMS_PANIER:
                raise PanierServiceError(f"Panier plein (Max {self.MAX_ITEMS_PANIER}).")

            # V√©rification limite cr√©neaux
            creneaux_actuels = set((i.date_reservation, i.heure_debut, i.heure_fin) for i in panier.items)
            nouveau_creneau = (start_dt.date(), item_data['heure_debut'], item_data['heure_fin'])
            if nouveau_creneau not in creneaux_actuels and len(creneaux_actuels) >= self.MAX_CRENEAUX:
                raise PanierServiceError(f"Limite de {self.MAX_CRENEAUX} cr√©neaux atteinte.")

            # V√©rification Stock
            check_item = [{'type': item_type, 'id': item_id, 'quantite': qte}]
            try:
                # On passe le panier actuel pour d√©duire ce qu'on a d√©j√† pris
                # (Attention : il faut convertir les items du panier au format attendu par get_disponibilites)
                panier_items_fmt = []
                for pi in panier.items:
                    panier_items_fmt.append({
                        'type': pi.type, 'id': pi.id_item, 'quantite': pi.quantite,
                        'date_reservation': pi.date_reservation.isoformat(),
                        'heure_debut': pi.heure_debut, 'heure_fin': pi.heure_fin
                    })
                
                self.stock_service.get_disponibilites(start_dt, end_dt, panier_items=panier_items_fmt)
            except StockServiceError as e:
                raise PanierServiceError(f"Indisponible : {str(e)}")

            # Ajout ou Mise √† jour
            existing_item = next((i for i in panier.items if 
                           i.id_item == item_id and 
                           i.type == item_type and
                           i.date_reservation == start_dt.date() and
                           i.heure_debut == item_data['heure_debut'] and
                           i.heure_fin == item_data['heure_fin']), None)
            
            if existing_item:
                new_total = existing_item.quantite + qte
                if new_total > self.MAX_QTY_PER_ITEM:
                    raise PanierServiceError("Quantit√© totale excessive.")
                existing_item.quantite = new_total
            else:
                new_item = PanierItem(
                    id_panier=panier.id,
                    type=item_type,
                    id_item=item_id,
                    quantite=qte,
                    date_reservation=start_dt.date(),
                    heure_debut=item_data['heure_debut'],
                    heure_fin=item_data['heure_fin']
                )
                db.session.add(new_item)

            db.session.commit()
            return self.get_contenu(user_id)

        except PanierServiceError:
            db.session.rollback()
            raise
        except Exception as e:
            db.session.rollback()
            logger.exception(f"Erreur interne ajouter_item User {user_id}")
            raise PanierServiceError("Erreur interne.")

    def retirer_item(self, user_id: int, item_id: int) -> Dict[str, Any]:
        """Retire un item (S√©curis√©)."""
        try:
            panier = self._get_active_panier(user_id, create_if_missing=False)
            if not panier: raise PanierServiceError("Panier introuvable.")

            item = db.session.get(PanierItem, item_id)
            if not item or item.id_panier != panier.id:
                raise PanierServiceError("Item introuvable.")
            
            db.session.delete(item)
            db.session.commit()
            return {"success": True}
        except SQLAlchemyError:
            db.session.rollback()
            raise PanierServiceError("Erreur suppression.")

    def vider_panier(self, user_id: int) -> Dict[str, Any]:
        """Vide le panier."""
        try:
            panier = self._get_active_panier(user_id, create_if_missing=False)
            if panier:
                db.session.execute(delete(PanierItem).where(PanierItem.id_panier == panier.id))
                db.session.commit()
            return {"success": True}
        except SQLAlchemyError:
            db.session.rollback()
            raise PanierServiceError("Erreur vidage panier.")

    def valider_panier(self, user_id: int) -> Dict[str, Any]:
        """CHECKOUT ATOMIQUE & S√âCURIS√â."""
        try:
            panier = self._get_active_panier(user_id, create_if_missing=False, with_lock=True)
            
            if not panier or not panier.items:
                raise PanierServiceError("Panier vide ou expir√©.")

            # Groupement par cr√©neau
            creneaux = {}
            for item in panier.items:
                key = (item.date_reservation, item.heure_debut, item.heure_fin)
                if key not in creneaux: creneaux[key] = []
                creneaux[key].append(item)

            resultats = []
            audit_details = []

            for (d_res, h_deb, h_fin), items_list in creneaux.items():
                start_dt, end_dt = self._parse_and_validate_dates(d_res.isoformat(), h_deb, h_fin)

                # V√©rification IDOR
                for it in items_list:
                    self._verify_item_ownership(it.type, it.id_item)

                # Pr√©paration donn√©es pour StockService
                items_dict = [{'type': i.type, 'id': i.id_item, 'quantite': i.quantite} for i in items_list]

                # 1. V√©rification Atomique (Lock DB)
                self.stock_service.verify_stock_atomic(items_dict, start_dt, end_dt, user_id)
                
                # 2. Cr√©ation R√©servation
                groupe_id = str(uuid.uuid4())
                
                for item in items_list:
                    resa = Reservation(
                        utilisateur_id=user_id,
                        etablissement_id=self.etablissement_id,
                        quantite_reservee=item.quantite,
                        debut_reservation=start_dt,
                        fin_reservation=end_dt,
                        groupe_id=groupe_id,
                        statut='confirm√©e'
                    )
                    if item.type == 'kit': resa.kit_id = item.id_item
                    else: resa.objet_id = item.id_item
                    
                    db.session.add(resa)
                    audit_details.append(f"{item.type}#{item.id_item} (x{item.quantite}) [{h_deb}-{h_fin}]")
                
                resultats.append(groupe_id)

            # 3. Nettoyage
            db.session.execute(delete(PanierItem).where(PanierItem.id_panier == panier.id))
            
            # Audit
            audit_json = json.dumps(audit_details)
            audit = AuditLog(
                id_utilisateur=user_id,
                etablissement_id=self.etablissement_id,
                action="CHECKOUT",
                table_cible="reservations",
                id_enregistrement=resultats[0] if resultats else None,
                details=f"Items: {len(audit_details)}. Groupes: {len(resultats)}"
            )
            db.session.add(audit)

            db.session.commit()
            return {
                "success": True, 
                "groupes": resultats,
                "count": len(resultats) 
            }

        except (PanierServiceError, StockServiceError) as e:
            db.session.rollback()
            logger.warning(f"Checkout FAILED | User {user_id} | {e}")
            raise PanierServiceError(str(e))
        except SQLAlchemyError as e:
            db.session.rollback()
            logger.error(f"Checkout CRITICAL DB ERROR | User {user_id} | {e}")
            raise PanierServiceError("Erreur technique validation.")

==================================================
FICHIER : services\security_service.py
==================================================
from db import db, EquipementSecurite, MaintenancePlan, MaintenanceLog
from datetime import date, timedelta
from sqlalchemy import and_

class SecurityService:
    def get_dashboard_stats(self, etablissement_id):
        """
        Calcule les indicateurs pour le widget du Dashboard.
        """
        # 1. Total √©quipements
        total = EquipementSecurite.query.filter_by(
            etablissement_id=etablissement_id, 
            en_service=True
        ).count()
        
        if total == 0:
            return {'total_equipements': 0, 'alertes': 0, 'taux_conformite': 100}

        # 2. Alertes Maintenance (Dates d√©pass√©es)
        today = date.today()
        seuil_alerte = today + timedelta(days=30)
        
        alertes_maintenance = db.session.query(MaintenancePlan).join(EquipementSecurite).filter(
            EquipementSecurite.etablissement_id == etablissement_id,
            EquipementSecurite.en_service == True,
            MaintenancePlan.alerte_active == True,
            MaintenancePlan.date_prochaine_action <= seuil_alerte
        ).count()

        # 3. Alertes Signalements (Pannes signal√©es par utilisateurs)
        alertes_signalements = db.session.query(MaintenanceLog).join(EquipementSecurite).filter(
            EquipementSecurite.etablissement_id == etablissement_id,
            MaintenanceLog.resultat == 'signalement'
        ).count()

        # Total combin√©
        total_alertes = alertes_maintenance + alertes_signalements

        # Calcul Taux
        taux = 100
        if total > 0 and total_alertes > 0:
            taux = int(((total - total_alertes) / total) * 100)
            if taux < 0: taux = 0

        return {
            'total_equipements': total,
            'alertes': total_alertes,
            'taux_conformite': taux
        }

    def get_all_equipements(self, etablissement_id):
        return EquipementSecurite.query.filter_by(etablissement_id=etablissement_id).all()

    def create_equipement(self, etablissement_id, data):
        nouvel_eq = EquipementSecurite(
            etablissement_id=etablissement_id,
            nom=data.get('nom'),
            type_equipement=data.get('type_equipement'),
            localisation=data.get('localisation'),
            numero_serie=data.get('numero_serie'),
            date_installation=data.get('date_installation')
        )
        db.session.add(nouvel_eq)
        db.session.commit()
        return nouvel_eq

==================================================
FICHIER : services\stock_service.py
==================================================
import logging
from datetime import datetime, timedelta
from typing import List, Dict, Any, Optional
from sqlalchemy import select
from sqlalchemy.orm import joinedload
from sqlalchemy.exc import SQLAlchemyError, OperationalError

from db import db, Objet, Kit, Reservation
from services.kit_service import KitService, KitServiceError

logger = logging.getLogger(__name__)

class StockServiceError(Exception):
    """Exception m√©tier pour le stock."""
    pass

class StockService:
    MAX_KIT_QUANTITY = 9999
    
    # R√®gles de validation temporelle
    MAX_RESERVATION_DURATION_HOURS = 12
    MAX_FUTURE_DAYS = 365
    PAST_BUFFER_MINUTES = 15  # Tol√©rance pour le d√©calage d'horloge

    def __init__(self, etablissement_id: int):
        self.etablissement_id = etablissement_id

    def _normalize_items(self, items: List[Dict[str, Any]]) -> List[Dict[str, Any]]:
        """Normalise les items pour KitService (quantite vs quantity)."""
        clean_items = []
        for item in items:
            qty = item.get('quantite') if 'quantite' in item else item.get('quantity')
            if qty is not None and 'type' in item and 'id' in item:
                clean_items.append({
                    'type': item['type'],
                    'id': item['id'],
                    'quantite': qty
                })
        return clean_items

    def _validate_dates(self, start_dt: datetime, end_dt: datetime):
        """Validation centralis√©e des r√®gles de dates."""
        now = datetime.now()
        
        # 1. Coh√©rence de base
        if start_dt >= end_dt:
            raise StockServiceError("La date de d√©but doit √™tre ant√©rieure √† la date de fin.")
        
        # 2. Pas dans le pass√© (avec tol√©rance)
        if start_dt < now - timedelta(minutes=self.PAST_BUFFER_MINUTES):
            raise StockServiceError("Impossible de r√©server dans le pass√©.")
            
        # 3. Pas trop loin dans le futur
        if start_dt > now + timedelta(days=self.MAX_FUTURE_DAYS):
            raise StockServiceError(f"Les r√©servations sont limit√©es √† {self.MAX_FUTURE_DAYS} jours √† l'avance.")
            
        # 4. Dur√©e maximale
        duration = (end_dt - start_dt).total_seconds() / 3600
        if duration > self.MAX_RESERVATION_DURATION_HOURS:
            raise StockServiceError(f"La dur√©e maximale d'une r√©servation est de {self.MAX_RESERVATION_DURATION_HOURS} heures.")

    def _get_reservations_actives(self, start_dt: datetime, end_dt: datetime) -> List[Reservation]:
        """
        R√©cup√®re les r√©servations actives qui CHEVAUCHENT le cr√©neau demand√©.
        Logique de chevauchement : (StartA < EndB) et (EndA > StartB)
        """
        try:
            stmt = (
                select(Reservation)
                .options(
                    joinedload(Reservation.kit).joinedload(Kit.objets_assoc),
                    joinedload(Reservation.objet)
                )
                .filter(
                    Reservation.etablissement_id == self.etablissement_id,
                    Reservation.statut == 'confirm√©e', 
                    # --- FILTRE TEMPOREL CRUCIAL ---
                    Reservation.debut_reservation < end_dt, # La r√©sa commence avant la fin demand√©e
                    Reservation.fin_reservation > start_dt  # La r√©sa finit apr√®s le d√©but demand√©
                )
            )
            return db.session.execute(stmt).unique().scalars().all()
        except SQLAlchemyError as e:
            logger.error(f"DB Error fetching reservations: {e}")
            raise StockServiceError("Impossible de lire les r√©servations.") from e

    def verify_stock_atomic(
        self, 
        items: List[Dict[str, Any]], 
        start_dt: datetime, 
        end_dt: datetime, 
        user_id: Optional[int] = None
    ) -> Dict[str, Any]:
        """
        V√©rifie le stock ET verrouille les lignes (SELECT FOR UPDATE NOWAIT).
        Utilis√© lors de la validation finale (Checkout).
        """
        # 1. Validations
        self._validate_dates(start_dt, end_dt)
        
        items_propres = self._normalize_items(items)
        if not items_propres:
            return {'objets_map': {}, 'besoins': {}}

        try:
            # 2. Calcul des besoins de la NOUVELLE r√©servation
            besoins_demandes = KitService.decomposer_items(items_propres, self.etablissement_id)
            if not besoins_demandes:
                return {'objets_map': {}, 'besoins': {}}

            # 3. Lecture de l'existant (Ce qui est D√âJ√Ä r√©serv√© sur ce cr√©neau)
            reservations_existantes = self._get_reservations_actives(start_dt, end_dt)
            
            items_reserves_existants = []
            for r in reservations_existantes:
                if r.kit_id:
                    items_reserves_existants.append({'type': 'kit', 'id': r.kit_id, 'quantite': r.quantite_reservee})
                elif r.objet_id:
                    items_reserves_existants.append({'type': 'objet', 'id': r.objet_id, 'quantite': r.quantite_reservee})

            conso_existante = KitService.decomposer_items(items_reserves_existants, self.etablissement_id)

            # 4. Verrouillage Pessimiste (Tri√© + NoWait) pour √©viter les Race Conditions
            objet_ids_to_lock = sorted(list(besoins_demandes.keys()))
            
            stmt = (
                select(Objet)
                .filter(
                    Objet.id.in_(objet_ids_to_lock),
                    Objet.etablissement_id == self.etablissement_id
                )
                .with_for_update(nowait=True)
            )
            
            objets_db = db.session.execute(stmt).scalars().all()
            objets_map = {obj.id: obj for obj in objets_db}

            # 5. S√©curit√© IDOR
            if len(objets_db) != len(objet_ids_to_lock):
                missing = set(objet_ids_to_lock) - set(objets_map.keys())
                logger.warning(f"SECURITY: IDOR Attempt? User {user_id} Etab {self.etablissement_id} requested missing objects: {missing}")
                raise StockServiceError("Certains objets demand√©s sont introuvables ou non autoris√©s.")

            # 6. V√©rification Quantit√©s (Stock Physique - (D√©j√† R√©serv√© + Demande Actuelle))
            for obj_id, qte_demandee in besoins_demandes.items():
                obj = objets_map[obj_id]
                stock_total = obj.quantite_physique
                stock_pris = conso_existante.get(obj_id, 0)
                disponible = stock_total - stock_pris

                if disponible < qte_demandee:
                    logger.info(f"STOCK REFUS√â | User: {user_id} | Objet: {obj.id} | Demand√©: {qte_demandee} | Dispo: {disponible}")
                    raise StockServiceError(f"Stock insuffisant pour '{obj.nom}'. Disponible: {disponible}")

            return {
                'objets_map': objets_map,
                'besoins': besoins_demandes
            }

        except OperationalError as e:
            logger.warning(f"Concurrency conflict for User {user_id}: {e}")
            raise StockServiceError("Le stock est actuellement modifi√© par une autre personne. Veuillez r√©essayer dans un instant.")
            
        except KitServiceError as e:
            logger.error(f"KitService Error for User {user_id}: {e}")
            raise StockServiceError(str(e))
            
        except SQLAlchemyError as e:
            logger.error(f"DB Critical Error for User {user_id}: {e}")
            raise StockServiceError("Erreur technique lors de la v√©rification du stock.")

    def get_disponibilites(self, start_dt: datetime, end_dt: datetime, panier_items: Optional[List[Dict[str, Any]]] = None) -> Dict[str, Any]:
        """
        Calcule les stocks disponibles pour l'affichage (Lecture seule).
        Prend en compte :
        1. Le stock physique total.
        2. Les r√©servations existantes SUR CE CR√âNEAU.
        3. Les items du panier (d√©j√† filtr√©s par date par l'API).
        """
        # Validation des dates
        self._validate_dates(start_dt, end_dt)

        try:
            # 1. R√©cup√©ration des r√©servations en conflit (Chevauchement temporel)
            reservations = self._get_reservations_actives(start_dt, end_dt)
            
            items_a_deduire = []
            
            # Ajout des r√©servations existantes en base
            for r in reservations:
                if r.kit_id:
                    items_a_deduire.append({'type': 'kit', 'id': r.kit_id, 'quantite': r.quantite_reservee})
                elif r.objet_id:
                    items_a_deduire.append({'type': 'objet', 'id': r.objet_id, 'quantite': r.quantite_reservee})

            # Ajout des items du panier (s'ils ont √©t√© pass√©s et filtr√©s par l'API)
            if panier_items:
                panier_propre = self._normalize_items(panier_items)
                items_a_deduire.extend(panier_propre)

            # 2. Calcul de la consommation totale par objet (d√©composition des kits)
            conso_totale = KitService.decomposer_items(items_a_deduire, self.etablissement_id)

            # 3. R√©cup√©ration de tout l'inventaire
            all_objets = db.session.execute(
                select(Objet)
                .options(joinedload(Objet.armoire))
                .filter_by(etablissement_id=self.etablissement_id)
            ).scalars().all()

            objets_data = []
            stock_map = {} # Pour le calcul des kits ensuite

            # 4. Calcul du disponible par objet
            for obj in all_objets:
                conso = conso_totale.get(obj.id, 0)
                dispo = max(0, obj.quantite_physique - conso)
                stock_map[obj.id] = dispo
                
                objets_data.append({
                    'id': obj.id,
                    'nom': obj.nom,
                    'stock': obj.quantite_physique,
                    'disponible': dispo,
                    'image': obj.image_url,
                    'armoire': obj.armoire.nom if obj.armoire else "Non rang√©"
                })

            # 5. Calcul du disponible par kit (bas√© sur le stock objet restant)
            all_kits = db.session.execute(
                select(Kit)
                .options(joinedload(Kit.objets_assoc))
                .filter_by(etablissement_id=self.etablissement_id)
            ).unique().scalars().all()

            kits_data = []
            for kit in all_kits:
                max_possible = self.MAX_KIT_QUANTITY
                if not kit.objets_assoc:
                    max_possible = 0
                else:
                    for comp in kit.objets_assoc:
                        if comp.quantite > 0:
                            stock_obj = stock_map.get(comp.objet_id, 0)
                            possible = stock_obj // comp.quantite
                            if possible < max_possible:
                                max_possible = possible
                
                kits_data.append({
                    'id': kit.id,
                    'nom': kit.nom,
                    'description': kit.description,
                    'disponible': int(max_possible)
                })

            return {'objets': objets_data, 'kits': kits_data}

        except KitServiceError as e:
            raise StockServiceError(str(e))
            
        except SQLAlchemyError as e:
            logger.error(f"DB Error in get_disponibilites: {e}")
            raise StockServiceError("Erreur d'acc√®s aux donn√©es de stock.")
            
        except Exception as e:
            logger.exception("Erreur inattendue dans get_disponibilites")
            raise StockServiceError("Une erreur interne est survenue.") from e

==================================================
FICHIER : static\css\base.css
==================================================
/* =================================================================
   BASE.CSS (Version Compatible Bootstrap)
   ================================================================= */

:root {
  /* Tes couleurs personnalis√©es LabFlow */
  --couleur-principale: #1f3b73;
  --couleur-secondaire: #01257d;
  --couleur-accent: #a7d3f2;
  --texte-principal: #2c3e50;
  --texte-inverse: #ffffff;
  --texte-lien: var(--couleur-principale);
  --texte-discret: #6c7a89;
  --fond-page: #f8f9fa;
  --fond-element: #ffffff;
  --couleur-succes: #28a745;
  --couleur-erreur: #dc3545;
  --couleur-avertissement: #ffc107;
  --couleur-bordure: #dee2e6;
  --ombre-legere: 0 1px 3px rgba(0, 0, 0, 0.05);
  --ombre-moyenne: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* On laisse Bootstrap g√©rer le box-sizing et le body margin */

body {
  /* On surcharge juste la police et la couleur de fond si n√©cessaire */
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  background-color: var(--fond-page);
  color: var(--texte-principal);
}

/* On force tes liens √† utiliser ta couleur, sinon Bootstrap met son bleu par d√©faut */
/* --- LIENS --- */
a {
  color: var(--texte-lien);
  text-decoration: none; /* Pas de soulignement au repos */
  transition: color 0.2s ease;
}

a:hover {
  color: var(--couleur-secondaire);
  text-decoration: none !important;
}

==================================================
FICHIER : static\css\bootstrap-icons.css
==================================================
/*!
 * Bootstrap Icons v1.10.5 (https://icons.getbootstrap.com/)
 * Copyright 2019-2023 The Bootstrap Authors
 * Licensed under MIT (https://github.com/twbs/icons/blob/main/LICENSE)
 */

@font-face {
  font-display: block;
  font-family: "bootstrap-icons";
  src: url("./fonts/bootstrap-icons.woff2?1bb88866b4085542c8ed5fb61b9393dd") format("woff2"),
url("./fonts/bootstrap-icons.woff?1bb88866b4085542c8ed5fb61b9393dd") format("woff");
}

.bi::before,
[class^="bi-"]::before,
[class*=" bi-"]::before {
  display: inline-block;
  font-family: bootstrap-icons !important;
  font-style: normal;
  font-weight: normal !important;
  font-variant: normal;
  text-transform: none;
  line-height: 1;
  vertical-align: -.125em;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.bi-123::before { content: "\f67f"; }
.bi-alarm-fill::before { content: "\f101"; }
.bi-alarm::before { content: "\f102"; }
.bi-align-bottom::before { content: "\f103"; }
.bi-align-center::before { content: "\f104"; }
.bi-align-end::before { content: "\f105"; }
.bi-align-middle::before { content: "\f106"; }
.bi-align-start::before { content: "\f107"; }
.bi-align-top::before { content: "\f108"; }
.bi-alt::before { content: "\f109"; }
.bi-app-indicator::before { content: "\f10a"; }
.bi-app::before { content: "\f10b"; }
.bi-archive-fill::before { content: "\f10c"; }
.bi-archive::before { content: "\f10d"; }
.bi-arrow-90deg-down::before { content: "\f10e"; }
.bi-arrow-90deg-left::before { content: "\f10f"; }
.bi-arrow-90deg-right::before { content: "\f110"; }
.bi-arrow-90deg-up::before { content: "\f111"; }
.bi-arrow-bar-down::before { content: "\f112"; }
.bi-arrow-bar-left::before { content: "\f113"; }
.bi-arrow-bar-right::before { content: "\f114"; }
.bi-arrow-bar-up::before { content: "\f115"; }
.bi-arrow-clockwise::before { content: "\f116"; }
.bi-arrow-counterclockwise::before { content: "\f117"; }
.bi-arrow-down-circle-fill::before { content: "\f118"; }
.bi-arrow-down-circle::before { content: "\f119"; }
.bi-arrow-down-left-circle-fill::before { content: "\f11a"; }
.bi-arrow-down-left-circle::before { content: "\f11b"; }
.bi-arrow-down-left-square-fill::before { content: "\f11c"; }
.bi-arrow-down-left-square::before { content: "\f11d"; }
.bi-arrow-down-left::before { content: "\f11e"; }
.bi-arrow-down-right-circle-fill::before { content: "\f11f"; }
.bi-arrow-down-right-circle::before { content: "\f120"; }
.bi-arrow-down-right-square-fill::before { content: "\f121"; }
.bi-arrow-down-right-square::before { content: "\f122"; }
.bi-arrow-down-right::before { content: "\f123"; }
.bi-arrow-down-short::before { content: "\f124"; }
.bi-arrow-down-square-fill::before { content: "\f125"; }
.bi-arrow-down-square::before { content: "\f126"; }
.bi-arrow-down-up::before { content: "\f127"; }
.bi-arrow-down::before { content: "\f128"; }
.bi-arrow-left-circle-fill::before { content: "\f129"; }
.bi-arrow-left-circle::before { content: "\f12a"; }
.bi-arrow-left-right::before { content: "\f12b"; }
.bi-arrow-left-short::before { content: "\f12c"; }
.bi-arrow-left-square-fill::before { content: "\f12d"; }
.bi-arrow-left-square::before { content: "\f12e"; }
.bi-arrow-left::before { content: "\f12f"; }
.bi-arrow-repeat::before { content: "\f130"; }
.bi-arrow-return-left::before { content: "\f131"; }
.bi-arrow-return-right::before { content: "\f132"; }
.bi-arrow-right-circle-fill::before { content: "\f133"; }
.bi-arrow-right-circle::before { content: "\f134"; }
.bi-arrow-right-short::before { content: "\f135"; }
.bi-arrow-right-square-fill::before { content: "\f136"; }
.bi-arrow-right-square::before { content: "\f137"; }
.bi-arrow-right::before { content: "\f138"; }
.bi-arrow-up-circle-fill::before { content: "\f139"; }
.bi-arrow-up-circle::before { content: "\f13a"; }
.bi-arrow-up-left-circle-fill::before { content: "\f13b"; }
.bi-arrow-up-left-circle::before { content: "\f13c"; }
.bi-arrow-up-left-square-fill::before { content: "\f13d"; }
.bi-arrow-up-left-square::before { content: "\f13e"; }
.bi-arrow-up-left::before { content: "\f13f"; }
.bi-arrow-up-right-circle-fill::before { content: "\f140"; }
.bi-arrow-up-right-circle::before { content: "\f141"; }
.bi-arrow-up-right-square-fill::before { content: "\f142"; }
.bi-arrow-up-right-square::before { content: "\f143"; }
.bi-arrow-up-right::before { content: "\f144"; }
.bi-arrow-up-short::before { content: "\f145"; }
.bi-arrow-up-square-fill::before { content: "\f146"; }
.bi-arrow-up-square::before { content: "\f147"; }
.bi-arrow-up::before { content: "\f148"; }
.bi-arrows-angle-contract::before { content: "\f149"; }
.bi-arrows-angle-expand::before { content: "\f14a"; }
.bi-arrows-collapse::before { content: "\f14b"; }
.bi-arrows-expand::before { content: "\f14c"; }
.bi-arrows-fullscreen::before { content: "\f14d"; }
.bi-arrows-move::before { content: "\f14e"; }
.bi-aspect-ratio-fill::before { content: "\f14f"; }
.bi-aspect-ratio::before { content: "\f150"; }
.bi-asterisk::before { content: "\f151"; }
.bi-at::before { content: "\f152"; }
.bi-award-fill::before { content: "\f153"; }
.bi-award::before { content: "\f154"; }
.bi-back::before { content: "\f155"; }
.bi-backspace-fill::before { content: "\f156"; }
.bi-backspace-reverse-fill::before { content: "\f157"; }
.bi-backspace-reverse::before { content: "\f158"; }
.bi-backspace::before { content: "\f159"; }
.bi-badge-3d-fill::before { content: "\f15a"; }
.bi-badge-3d::before { content: "\f15b"; }
.bi-badge-4k-fill::before { content: "\f15c"; }
.bi-badge-4k::before { content: "\f15d"; }
.bi-badge-8k-fill::before { content: "\f15e"; }
.bi-badge-8k::before { content: "\f15f"; }
.bi-badge-ad-fill::before { content: "\f160"; }
.bi-badge-ad::before { content: "\f161"; }
.bi-badge-ar-fill::before { content: "\f162"; }
.bi-badge-ar::before { content: "\f163"; }
.bi-badge-cc-fill::before { content: "\f164"; }
.bi-badge-cc::before { content: "\f165"; }
.bi-badge-hd-fill::before { content: "\f166"; }
.bi-badge-hd::before { content: "\f167"; }
.bi-badge-tm-fill::before { content: "\f168"; }
.bi-badge-tm::before { content: "\f169"; }
.bi-badge-vo-fill::before { content: "\f16a"; }
.bi-badge-vo::before { content: "\f16b"; }
.bi-badge-vr-fill::before { content: "\f16c"; }
.bi-badge-vr::before { content: "\f16d"; }
.bi-badge-wc-fill::before { content: "\f16e"; }
.bi-badge-wc::before { content: "\f16f"; }
.bi-bag-check-fill::before { content: "\f170"; }
.bi-bag-check::before { content: "\f171"; }
.bi-bag-dash-fill::before { content: "\f172"; }
.bi-bag-dash::before { content: "\f173"; }
.bi-bag-fill::before { content: "\f174"; }
.bi-bag-plus-fill::before { content: "\f175"; }
.bi-bag-plus::before { content: "\f176"; }
.bi-bag-x-fill::before { content: "\f177"; }
.bi-bag-x::before { content: "\f178"; }
.bi-bag::before { content: "\f179"; }
.bi-bar-chart-fill::before { content: "\f17a"; }
.bi-bar-chart-line-fill::before { content: "\f17b"; }
.bi-bar-chart-line::before { content: "\f17c"; }
.bi-bar-chart-steps::before { content: "\f17d"; }
.bi-bar-chart::before { content: "\f17e"; }
.bi-basket-fill::before { content: "\f17f"; }
.bi-basket::before { content: "\f180"; }
.bi-basket2-fill::before { content: "\f181"; }
.bi-basket2::before { content: "\f182"; }
.bi-basket3-fill::before { content: "\f183"; }
.bi-basket3::before { content: "\f184"; }
.bi-battery-charging::before { content: "\f185"; }
.bi-battery-full::before { content: "\f186"; }
.bi-battery-half::before { content: "\f187"; }
.bi-battery::before { content: "\f188"; }
.bi-bell-fill::before { content: "\f189"; }
.bi-bell::before { content: "\f18a"; }
.bi-bezier::before { content: "\f18b"; }
.bi-bezier2::before { content: "\f18c"; }
.bi-bicycle::before { content: "\f18d"; }
.bi-binoculars-fill::before { content: "\f18e"; }
.bi-binoculars::before { content: "\f18f"; }
.bi-blockquote-left::before { content: "\f190"; }
.bi-blockquote-right::before { content: "\f191"; }
.bi-book-fill::before { content: "\f192"; }
.bi-book-half::before { content: "\f193"; }
.bi-book::before { content: "\f194"; }
.bi-bookmark-check-fill::before { content: "\f195"; }
.bi-bookmark-check::before { content: "\f196"; }
.bi-bookmark-dash-fill::before { content: "\f197"; }
.bi-bookmark-dash::before { content: "\f198"; }
.bi-bookmark-fill::before { content: "\f199"; }
.bi-bookmark-heart-fill::before { content: "\f19a"; }
.bi-bookmark-heart::before { content: "\f19b"; }
.bi-bookmark-plus-fill::before { content: "\f19c"; }
.bi-bookmark-plus::before { content: "\f19d"; }
.bi-bookmark-star-fill::before { content: "\f19e"; }
.bi-bookmark-star::before { content: "\f19f"; }
.bi-bookmark-x-fill::before { content: "\f1a0"; }
.bi-bookmark-x::before { content: "\f1a1"; }
.bi-bookmark::before { content: "\f1a2"; }
.bi-bookmarks-fill::before { content: "\f1a3"; }
.bi-bookmarks::before { content: "\f1a4"; }
.bi-bookshelf::before { content: "\f1a5"; }
.bi-bootstrap-fill::before { content: "\f1a6"; }
.bi-bootstrap-reboot::before { content: "\f1a7"; }
.bi-bootstrap::before { content: "\f1a8"; }
.bi-border-all::before { content: "\f1a9"; }
.bi-border-bottom::before { content: "\f1aa"; }
.bi-border-center::before { content: "\f1ab"; }
.bi-border-inner::before { content: "\f1ac"; }
.bi-border-left::before { content: "\f1ad"; }
.bi-border-middle::before { content: "\f1ae"; }
.bi-border-outer::before { content: "\f1af"; }
.bi-border-right::before { content: "\f1b0"; }
.bi-border-style::before { content: "\f1b1"; }
.bi-border-top::before { content: "\f1b2"; }
.bi-border-width::before { content: "\f1b3"; }
.bi-border::before { content: "\f1b4"; }
.bi-bounding-box-circles::before { content: "\f1b5"; }
.bi-bounding-box::before { content: "\f1b6"; }
.bi-box-arrow-down-left::before { content: "\f1b7"; }
.bi-box-arrow-down-right::before { content: "\f1b8"; }
.bi-box-arrow-down::before { content: "\f1b9"; }
.bi-box-arrow-in-down-left::before { content: "\f1ba"; }
.bi-box-arrow-in-down-right::before { content: "\f1bb"; }
.bi-box-arrow-in-down::before { content: "\f1bc"; }
.bi-box-arrow-in-left::before { content: "\f1bd"; }
.bi-box-arrow-in-right::before { content: "\f1be"; }
.bi-box-arrow-in-up-left::before { content: "\f1bf"; }
.bi-box-arrow-in-up-right::before { content: "\f1c0"; }
.bi-box-arrow-in-up::before { content: "\f1c1"; }
.bi-box-arrow-left::before { content: "\f1c2"; }
.bi-box-arrow-right::before { content: "\f1c3"; }
.bi-box-arrow-up-left::before { content: "\f1c4"; }
.bi-box-arrow-up-right::before { content: "\f1c5"; }
.bi-box-arrow-up::before { content: "\f1c6"; }
.bi-box-seam::before { content: "\f1c7"; }
.bi-box::before { content: "\f1c8"; }
.bi-braces::before { content: "\f1c9"; }
.bi-bricks::before { content: "\f1ca"; }
.bi-briefcase-fill::before { content: "\f1cb"; }
.bi-briefcase::before { content: "\f1cc"; }
.bi-brightness-alt-high-fill::before { content: "\f1cd"; }
.bi-brightness-alt-high::before { content: "\f1ce"; }
.bi-brightness-alt-low-fill::before { content: "\f1cf"; }
.bi-brightness-alt-low::before { content: "\f1d0"; }
.bi-brightness-high-fill::before { content: "\f1d1"; }
.bi-brightness-high::before { content: "\f1d2"; }
.bi-brightness-low-fill::before { content: "\f1d3"; }
.bi-brightness-low::before { content: "\f1d4"; }
.bi-broadcast-pin::before { content: "\f1d5"; }
.bi-broadcast::before { content: "\f1d6"; }
.bi-brush-fill::before { content: "\f1d7"; }
.bi-brush::before { content: "\f1d8"; }
.bi-bucket-fill::before { content: "\f1d9"; }
.bi-bucket::before { content: "\f1da"; }
.bi-bug-fill::before { content: "\f1db"; }
.bi-bug::before { content: "\f1dc"; }
.bi-building::before { content: "\f1dd"; }
.bi-bullseye::before { content: "\f1de"; }
.bi-calculator-fill::before { content: "\f1df"; }
.bi-calculator::before { content: "\f1e0"; }
.bi-calendar-check-fill::before { content: "\f1e1"; }
.bi-calendar-check::before { content: "\f1e2"; }
.bi-calendar-date-fill::before { content: "\f1e3"; }
.bi-calendar-date::before { content: "\f1e4"; }
.bi-calendar-day-fill::before { content: "\f1e5"; }
.bi-calendar-day::before { content: "\f1e6"; }
.bi-calendar-event-fill::before { content: "\f1e7"; }
.bi-calendar-event::before { content: "\f1e8"; }
.bi-calendar-fill::before { content: "\f1e9"; }
.bi-calendar-minus-fill::before { content: "\f1ea"; }
.bi-calendar-minus::before { content: "\f1eb"; }
.bi-calendar-month-fill::before { content: "\f1ec"; }
.bi-calendar-month::before { content: "\f1ed"; }
.bi-calendar-plus-fill::before { content: "\f1ee"; }
.bi-calendar-plus::before { content: "\f1ef"; }
.bi-calendar-range-fill::before { content: "\f1f0"; }
.bi-calendar-range::before { content: "\f1f1"; }
.bi-calendar-week-fill::before { content: "\f1f2"; }
.bi-calendar-week::before { content: "\f1f3"; }
.bi-calendar-x-fill::before { content: "\f1f4"; }
.bi-calendar-x::before { content: "\f1f5"; }
.bi-calendar::before { content: "\f1f6"; }
.bi-calendar2-check-fill::before { content: "\f1f7"; }
.bi-calendar2-check::before { content: "\f1f8"; }
.bi-calendar2-date-fill::before { content: "\f1f9"; }
.bi-calendar2-date::before { content: "\f1fa"; }
.bi-calendar2-day-fill::before { content: "\f1fb"; }
.bi-calendar2-day::before { content: "\f1fc"; }
.bi-calendar2-event-fill::before { content: "\f1fd"; }
.bi-calendar2-event::before { content: "\f1fe"; }
.bi-calendar2-fill::before { content: "\f1ff"; }
.bi-calendar2-minus-fill::before { content: "\f200"; }
.bi-calendar2-minus::before { content: "\f201"; }
.bi-calendar2-month-fill::before { content: "\f202"; }
.bi-calendar2-month::before { content: "\f203"; }
.bi-calendar2-plus-fill::before { content: "\f204"; }
.bi-calendar2-plus::before { content: "\f205"; }
.bi-calendar2-range-fill::before { content: "\f206"; }
.bi-calendar2-range::before { content: "\f207"; }
.bi-calendar2-week-fill::before { content: "\f208"; }
.bi-calendar2-week::before { content: "\f209"; }
.bi-calendar2-x-fill::before { content: "\f20a"; }
.bi-calendar2-x::before { content: "\f20b"; }
.bi-calendar2::before { content: "\f20c"; }
.bi-calendar3-event-fill::before { content: "\f20d"; }
.bi-calendar3-event::before { content: "\f20e"; }
.bi-calendar3-fill::before { content: "\f20f"; }
.bi-calendar3-range-fill::before { content: "\f210"; }
.bi-calendar3-range::before { content: "\f211"; }
.bi-calendar3-week-fill::before { content: "\f212"; }
.bi-calendar3-week::before { content: "\f213"; }
.bi-calendar3::before { content: "\f214"; }
.bi-calendar4-event::before { content: "\f215"; }
.bi-calendar4-range::before { content: "\f216"; }
.bi-calendar4-week::before { content: "\f217"; }
.bi-calendar4::before { content: "\f218"; }
.bi-camera-fill::before { content: "\f219"; }
.bi-camera-reels-fill::before { content: "\f21a"; }
.bi-camera-reels::before { content: "\f21b"; }
.bi-camera-video-fill::before { content: "\f21c"; }
.bi-camera-video-off-fill::before { content: "\f21d"; }
.bi-camera-video-off::before { content: "\f21e"; }
.bi-camera-video::before { content: "\f21f"; }
.bi-camera::before { content: "\f220"; }
.bi-camera2::before { content: "\f221"; }
.bi-capslock-fill::before { content: "\f222"; }
.bi-capslock::before { content: "\f223"; }
.bi-card-checklist::before { content: "\f224"; }
.bi-card-heading::before { content: "\f225"; }
.bi-card-image::before { content: "\f226"; }
.bi-card-list::before { content: "\f227"; }
.bi-card-text::before { content: "\f228"; }
.bi-caret-down-fill::before { content: "\f229"; }
.bi-caret-down-square-fill::before { content: "\f22a"; }
.bi-caret-down-square::before { content: "\f22b"; }
.bi-caret-down::before { content: "\f22c"; }
.bi-caret-left-fill::before { content: "\f22d"; }
.bi-caret-left-square-fill::before { content: "\f22e"; }
.bi-caret-left-square::before { content: "\f22f"; }
.bi-caret-left::before { content: "\f230"; }
.bi-caret-right-fill::before { content: "\f231"; }
.bi-caret-right-square-fill::before { content: "\f232"; }
.bi-caret-right-square::before { content: "\f233"; }
.bi-caret-right::before { content: "\f234"; }
.bi-caret-up-fill::before { content: "\f235"; }
.bi-caret-up-square-fill::before { content: "\f236"; }
.bi-caret-up-square::before { content: "\f237"; }
.bi-caret-up::before { content: "\f238"; }
.bi-cart-check-fill::before { content: "\f239"; }
.bi-cart-check::before { content: "\f23a"; }
.bi-cart-dash-fill::before { content: "\f23b"; }
.bi-cart-dash::before { content: "\f23c"; }
.bi-cart-fill::before { content: "\f23d"; }
.bi-cart-plus-fill::before { content: "\f23e"; }
.bi-cart-plus::before { content: "\f23f"; }
.bi-cart-x-fill::before { content: "\f240"; }
.bi-cart-x::before { content: "\f241"; }
.bi-cart::before { content: "\f242"; }
.bi-cart2::before { content: "\f243"; }
.bi-cart3::before { content: "\f244"; }
.bi-cart4::before { content: "\f245"; }
.bi-cash-stack::before { content: "\f246"; }
.bi-cash::before { content: "\f247"; }
.bi-cast::before { content: "\f248"; }
.bi-chat-dots-fill::before { content: "\f249"; }
.bi-chat-dots::before { content: "\f24a"; }
.bi-chat-fill::before { content: "\f24b"; }
.bi-chat-left-dots-fill::before { content: "\f24c"; }
.bi-chat-left-dots::before { content: "\f24d"; }
.bi-chat-left-fill::before { content: "\f24e"; }
.bi-chat-left-quote-fill::before { content: "\f24f"; }
.bi-chat-left-quote::before { content: "\f250"; }
.bi-chat-left-text-fill::before { content: "\f251"; }
.bi-chat-left-text::before { content: "\f252"; }
.bi-chat-left::before { content: "\f253"; }
.bi-chat-quote-fill::before { content: "\f254"; }
.bi-chat-quote::before { content: "\f255"; }
.bi-chat-right-dots-fill::before { content: "\f256"; }
.bi-chat-right-dots::before { content: "\f257"; }
.bi-chat-right-fill::before { content: "\f258"; }
.bi-chat-right-quote-fill::before { content: "\f259"; }
.bi-chat-right-quote::before { content: "\f25a"; }
.bi-chat-right-text-fill::before { content: "\f25b"; }
.bi-chat-right-text::before { content: "\f25c"; }
.bi-chat-right::before { content: "\f25d"; }
.bi-chat-square-dots-fill::before { content: "\f25e"; }
.bi-chat-square-dots::before { content: "\f25f"; }
.bi-chat-square-fill::before { content: "\f260"; }
.bi-chat-square-quote-fill::before { content: "\f261"; }
.bi-chat-square-quote::before { content: "\f262"; }
.bi-chat-square-text-fill::before { content: "\f263"; }
.bi-chat-square-text::before { content: "\f264"; }
.bi-chat-square::before { content: "\f265"; }
.bi-chat-text-fill::before { content: "\f266"; }
.bi-chat-text::before { content: "\f267"; }
.bi-chat::before { content: "\f268"; }
.bi-check-all::before { content: "\f269"; }
.bi-check-circle-fill::before { content: "\f26a"; }
.bi-check-circle::before { content: "\f26b"; }
.bi-check-square-fill::before { content: "\f26c"; }
.bi-check-square::before { content: "\f26d"; }
.bi-check::before { content: "\f26e"; }
.bi-check2-all::before { content: "\f26f"; }
.bi-check2-circle::before { content: "\f270"; }
.bi-check2-square::before { content: "\f271"; }
.bi-check2::before { content: "\f272"; }
.bi-chevron-bar-contract::before { content: "\f273"; }
.bi-chevron-bar-down::before { content: "\f274"; }
.bi-chevron-bar-expand::before { content: "\f275"; }
.bi-chevron-bar-left::before { content: "\f276"; }
.bi-chevron-bar-right::before { content: "\f277"; }
.bi-chevron-bar-up::before { content: "\f278"; }
.bi-chevron-compact-down::before { content: "\f279"; }
.bi-chevron-compact-left::before { content: "\f27a"; }
.bi-chevron-compact-right::before { content: "\f27b"; }
.bi-chevron-compact-up::before { content: "\f27c"; }
.bi-chevron-contract::before { content: "\f27d"; }
.bi-chevron-double-down::before { content: "\f27e"; }
.bi-chevron-double-left::before { content: "\f27f"; }
.bi-chevron-double-right::before { content: "\f280"; }
.bi-chevron-double-up::before { content: "\f281"; }
.bi-chevron-down::before { content: "\f282"; }
.bi-chevron-expand::before { content: "\f283"; }
.bi-chevron-left::before { content: "\f284"; }
.bi-chevron-right::before { content: "\f285"; }
.bi-chevron-up::before { content: "\f286"; }
.bi-circle-fill::before { content: "\f287"; }
.bi-circle-half::before { content: "\f288"; }
.bi-circle-square::before { content: "\f289"; }
.bi-circle::before { content: "\f28a"; }
.bi-clipboard-check::before { content: "\f28b"; }
.bi-clipboard-data::before { content: "\f28c"; }
.bi-clipboard-minus::before { content: "\f28d"; }
.bi-clipboard-plus::before { content: "\f28e"; }
.bi-clipboard-x::before { content: "\f28f"; }
.bi-clipboard::before { content: "\f290"; }
.bi-clock-fill::before { content: "\f291"; }
.bi-clock-history::before { content: "\f292"; }
.bi-clock::before { content: "\f293"; }
.bi-cloud-arrow-down-fill::before { content: "\f294"; }
.bi-cloud-arrow-down::before { content: "\f295"; }
.bi-cloud-arrow-up-fill::before { content: "\f296"; }
.bi-cloud-arrow-up::before { content: "\f297"; }
.bi-cloud-check-fill::before { content: "\f298"; }
.bi-cloud-check::before { content: "\f299"; }
.bi-cloud-download-fill::before { content: "\f29a"; }
.bi-cloud-download::before { content: "\f29b"; }
.bi-cloud-drizzle-fill::before { content: "\f29c"; }
.bi-cloud-drizzle::before { content: "\f29d"; }
.bi-cloud-fill::before { content: "\f29e"; }
.bi-cloud-fog-fill::before { content: "\f29f"; }
.bi-cloud-fog::before { content: "\f2a0"; }
.bi-cloud-fog2-fill::before { content: "\f2a1"; }
.bi-cloud-fog2::before { content: "\f2a2"; }
.bi-cloud-hail-fill::before { content: "\f2a3"; }
.bi-cloud-hail::before { content: "\f2a4"; }
.bi-cloud-haze-fill::before { content: "\f2a6"; }
.bi-cloud-haze::before { content: "\f2a7"; }
.bi-cloud-haze2-fill::before { content: "\f2a8"; }
.bi-cloud-lightning-fill::before { content: "\f2a9"; }
.bi-cloud-lightning-rain-fill::before { content: "\f2aa"; }
.bi-cloud-lightning-rain::before { content: "\f2ab"; }
.bi-cloud-lightning::before { content: "\f2ac"; }
.bi-cloud-minus-fill::before { content: "\f2ad"; }
.bi-cloud-minus::before { content: "\f2ae"; }
.bi-cloud-moon-fill::before { content: "\f2af"; }
.bi-cloud-moon::before { content: "\f2b0"; }
.bi-cloud-plus-fill::before { content: "\f2b1"; }
.bi-cloud-plus::before { content: "\f2b2"; }
.bi-cloud-rain-fill::before { content: "\f2b3"; }
.bi-cloud-rain-heavy-fill::before { content: "\f2b4"; }
.bi-cloud-rain-heavy::before { content: "\f2b5"; }
.bi-cloud-rain::before { content: "\f2b6"; }
.bi-cloud-slash-fill::before { content: "\f2b7"; }
.bi-cloud-slash::before { content: "\f2b8"; }
.bi-cloud-sleet-fill::before { content: "\f2b9"; }
.bi-cloud-sleet::before { content: "\f2ba"; }
.bi-cloud-snow-fill::before { content: "\f2bb"; }
.bi-cloud-snow::before { content: "\f2bc"; }
.bi-cloud-sun-fill::before { content: "\f2bd"; }
.bi-cloud-sun::before { content: "\f2be"; }
.bi-cloud-upload-fill::before { content: "\f2bf"; }
.bi-cloud-upload::before { content: "\f2c0"; }
.bi-cloud::before { content: "\f2c1"; }
.bi-clouds-fill::before { content: "\f2c2"; }
.bi-clouds::before { content: "\f2c3"; }
.bi-cloudy-fill::before { content: "\f2c4"; }
.bi-cloudy::before { content: "\f2c5"; }
.bi-code-slash::before { content: "\f2c6"; }
.bi-code-square::before { content: "\f2c7"; }
.bi-code::before { content: "\f2c8"; }
.bi-collection-fill::before { content: "\f2c9"; }
.bi-collection-play-fill::before { content: "\f2ca"; }
.bi-collection-play::before { content: "\f2cb"; }
.bi-collection::before { content: "\f2cc"; }
.bi-columns-gap::before { content: "\f2cd"; }
.bi-columns::before { content: "\f2ce"; }
.bi-command::before { content: "\f2cf"; }
.bi-compass-fill::before { content: "\f2d0"; }
.bi-compass::before { content: "\f2d1"; }
.bi-cone-striped::before { content: "\f2d2"; }
.bi-cone::before { content: "\f2d3"; }
.bi-controller::before { content: "\f2d4"; }
.bi-cpu-fill::before { content: "\f2d5"; }
.bi-cpu::before { content: "\f2d6"; }
.bi-credit-card-2-back-fill::before { content: "\f2d7"; }
.bi-credit-card-2-back::before { content: "\f2d8"; }
.bi-credit-card-2-front-fill::before { content: "\f2d9"; }
.bi-credit-card-2-front::before { content: "\f2da"; }
.bi-credit-card-fill::before { content: "\f2db"; }
.bi-credit-card::before { content: "\f2dc"; }
.bi-crop::before { content: "\f2dd"; }
.bi-cup-fill::before { content: "\f2de"; }
.bi-cup-straw::before { content: "\f2df"; }
.bi-cup::before { content: "\f2e0"; }
.bi-cursor-fill::before { content: "\f2e1"; }
.bi-cursor-text::before { content: "\f2e2"; }
.bi-cursor::before { content: "\f2e3"; }
.bi-dash-circle-dotted::before { content: "\f2e4"; }
.bi-dash-circle-fill::before { content: "\f2e5"; }
.bi-dash-circle::before { content: "\f2e6"; }
.bi-dash-square-dotted::before { content: "\f2e7"; }
.bi-dash-square-fill::before { content: "\f2e8"; }
.bi-dash-square::before { content: "\f2e9"; }
.bi-dash::before { content: "\f2ea"; }
.bi-diagram-2-fill::before { content: "\f2eb"; }
.bi-diagram-2::before { content: "\f2ec"; }
.bi-diagram-3-fill::before { content: "\f2ed"; }
.bi-diagram-3::before { content: "\f2ee"; }
.bi-diamond-fill::before { content: "\f2ef"; }
.bi-diamond-half::before { content: "\f2f0"; }
.bi-diamond::before { content: "\f2f1"; }
.bi-dice-1-fill::before { content: "\f2f2"; }
.bi-dice-1::before { content: "\f2f3"; }
.bi-dice-2-fill::before { content: "\f2f4"; }
.bi-dice-2::before { content: "\f2f5"; }
.bi-dice-3-fill::before { content: "\f2f6"; }
.bi-dice-3::before { content: "\f2f7"; }
.bi-dice-4-fill::before { content: "\f2f8"; }
.bi-dice-4::before { content: "\f2f9"; }
.bi-dice-5-fill::before { content: "\f2fa"; }
.bi-dice-5::before { content: "\f2fb"; }
.bi-dice-6-fill::before { content: "\f2fc"; }
.bi-dice-6::before { content: "\f2fd"; }
.bi-disc-fill::before { content: "\f2fe"; }
.bi-disc::before { content: "\f2ff"; }
.bi-discord::before { content: "\f300"; }
.bi-display-fill::before { content: "\f301"; }
.bi-display::before { content: "\f302"; }
.bi-distribute-horizontal::before { content: "\f303"; }
.bi-distribute-vertical::before { content: "\f304"; }
.bi-door-closed-fill::before { content: "\f305"; }
.bi-door-closed::before { content: "\f306"; }
.bi-door-open-fill::before { content: "\f307"; }
.bi-door-open::before { content: "\f308"; }
.bi-dot::before { content: "\f309"; }
.bi-download::before { content: "\f30a"; }
.bi-droplet-fill::before { content: "\f30b"; }
.bi-droplet-half::before { content: "\f30c"; }
.bi-droplet::before { content: "\f30d"; }
.bi-earbuds::before { content: "\f30e"; }
.bi-easel-fill::before { content: "\f30f"; }
.bi-easel::before { content: "\f310"; }
.bi-egg-fill::before { content: "\f311"; }
.bi-egg-fried::before { content: "\f312"; }
.bi-egg::before { content: "\f313"; }
.bi-eject-fill::before { content: "\f314"; }
.bi-eject::before { content: "\f315"; }
.bi-emoji-angry-fill::before { content: "\f316"; }
.bi-emoji-angry::before { content: "\f317"; }
.bi-emoji-dizzy-fill::before { content: "\f318"; }
.bi-emoji-dizzy::before { content: "\f319"; }
.bi-emoji-expressionless-fill::before { content: "\f31a"; }
.bi-emoji-expressionless::before { content: "\f31b"; }
.bi-emoji-frown-fill::before { content: "\f31c"; }
.bi-emoji-frown::before { content: "\f31d"; }
.bi-emoji-heart-eyes-fill::before { content: "\f31e"; }
.bi-emoji-heart-eyes::before { content: "\f31f"; }
.bi-emoji-laughing-fill::before { content: "\f320"; }
.bi-emoji-laughing::before { content: "\f321"; }
.bi-emoji-neutral-fill::before { content: "\f322"; }
.bi-emoji-neutral::before { content: "\f323"; }
.bi-emoji-smile-fill::before { content: "\f324"; }
.bi-emoji-smile-upside-down-fill::before { content: "\f325"; }
.bi-emoji-smile-upside-down::before { content: "\f326"; }
.bi-emoji-smile::before { content: "\f327"; }
.bi-emoji-sunglasses-fill::before { content: "\f328"; }
.bi-emoji-sunglasses::before { content: "\f329"; }
.bi-emoji-wink-fill::before { content: "\f32a"; }
.bi-emoji-wink::before { content: "\f32b"; }
.bi-envelope-fill::before { content: "\f32c"; }
.bi-envelope-open-fill::before { content: "\f32d"; }
.bi-envelope-open::before { content: "\f32e"; }
.bi-envelope::before { content: "\f32f"; }
.bi-eraser-fill::before { content: "\f330"; }
.bi-eraser::before { content: "\f331"; }
.bi-exclamation-circle-fill::before { content: "\f332"; }
.bi-exclamation-circle::before { content: "\f333"; }
.bi-exclamation-diamond-fill::before { content: "\f334"; }
.bi-exclamation-diamond::before { content: "\f335"; }
.bi-exclamation-octagon-fill::before { content: "\f336"; }
.bi-exclamation-octagon::before { content: "\f337"; }
.bi-exclamation-square-fill::before { content: "\f338"; }
.bi-exclamation-square::before { content: "\f339"; }
.bi-exclamation-triangle-fill::before { content: "\f33a"; }
.bi-exclamation-triangle::before { content: "\f33b"; }
.bi-exclamation::before { content: "\f33c"; }
.bi-exclude::before { content: "\f33d"; }
.bi-eye-fill::before { content: "\f33e"; }
.bi-eye-slash-fill::before { content: "\f33f"; }
.bi-eye-slash::before { content: "\f340"; }
.bi-eye::before { content: "\f341"; }
.bi-eyedropper::before { content: "\f342"; }
.bi-eyeglasses::before { content: "\f343"; }
.bi-facebook::before { content: "\f344"; }
.bi-file-arrow-down-fill::before { content: "\f345"; }
.bi-file-arrow-down::before { content: "\f346"; }
.bi-file-arrow-up-fill::before { content: "\f347"; }
.bi-file-arrow-up::before { content: "\f348"; }
.bi-file-bar-graph-fill::before { content: "\f349"; }
.bi-file-bar-graph::before { content: "\f34a"; }
.bi-file-binary-fill::before { content: "\f34b"; }
.bi-file-binary::before { content: "\f34c"; }
.bi-file-break-fill::before { content: "\f34d"; }
.bi-file-break::before { content: "\f34e"; }
.bi-file-check-fill::before { content: "\f34f"; }
.bi-file-check::before { content: "\f350"; }
.bi-file-code-fill::before { content: "\f351"; }
.bi-file-code::before { content: "\f352"; }
.bi-file-diff-fill::before { content: "\f353"; }
.bi-file-diff::before { content: "\f354"; }
.bi-file-earmark-arrow-down-fill::before { content: "\f355"; }
.bi-file-earmark-arrow-down::before { content: "\f356"; }
.bi-file-earmark-arrow-up-fill::before { content: "\f357"; }
.bi-file-earmark-arrow-up::before { content: "\f358"; }
.bi-file-earmark-bar-graph-fill::before { content: "\f359"; }
.bi-file-earmark-bar-graph::before { content: "\f35a"; }
.bi-file-earmark-binary-fill::before { content: "\f35b"; }
.bi-file-earmark-binary::before { content: "\f35c"; }
.bi-file-earmark-break-fill::before { content: "\f35d"; }
.bi-file-earmark-break::before { content: "\f35e"; }
.bi-file-earmark-check-fill::before { content: "\f35f"; }
.bi-file-earmark-check::before { content: "\f360"; }
.bi-file-earmark-code-fill::before { content: "\f361"; }
.bi-file-earmark-code::before { content: "\f362"; }
.bi-file-earmark-diff-fill::before { content: "\f363"; }
.bi-file-earmark-diff::before { content: "\f364"; }
.bi-file-earmark-easel-fill::before { content: "\f365"; }
.bi-file-earmark-easel::before { content: "\f366"; }
.bi-file-earmark-excel-fill::before { content: "\f367"; }
.bi-file-earmark-excel::before { content: "\f368"; }
.bi-file-earmark-fill::before { content: "\f369"; }
.bi-file-earmark-font-fill::before { content: "\f36a"; }
.bi-file-earmark-font::before { content: "\f36b"; }
.bi-file-earmark-image-fill::before { content: "\f36c"; }
.bi-file-earmark-image::before { content: "\f36d"; }
.bi-file-earmark-lock-fill::before { content: "\f36e"; }
.bi-file-earmark-lock::before { content: "\f36f"; }
.bi-file-earmark-lock2-fill::before { content: "\f370"; }
.bi-file-earmark-lock2::before { content: "\f371"; }
.bi-file-earmark-medical-fill::before { content: "\f372"; }
.bi-file-earmark-medical::before { content: "\f373"; }
.bi-file-earmark-minus-fill::before { content: "\f374"; }
.bi-file-earmark-minus::before { content: "\f375"; }
.bi-file-earmark-music-fill::before { content: "\f376"; }
.bi-file-earmark-music::before { content: "\f377"; }
.bi-file-earmark-person-fill::before { content: "\f378"; }
.bi-file-earmark-person::before { content: "\f379"; }
.bi-file-earmark-play-fill::before { content: "\f37a"; }
.bi-file-earmark-play::before { content: "\f37b"; }
.bi-file-earmark-plus-fill::before { content: "\f37c"; }
.bi-file-earmark-plus::before { content: "\f37d"; }
.bi-file-earmark-post-fill::before { content: "\f37e"; }
.bi-file-earmark-post::before { content: "\f37f"; }
.bi-file-earmark-ppt-fill::before { content: "\f380"; }
.bi-file-earmark-ppt::before { content: "\f381"; }
.bi-file-earmark-richtext-fill::before { content: "\f382"; }
.bi-file-earmark-richtext::before { content: "\f383"; }
.bi-file-earmark-ruled-fill::before { content: "\f384"; }
.bi-file-earmark-ruled::before { content: "\f385"; }
.bi-file-earmark-slides-fill::before { content: "\f386"; }
.bi-file-earmark-slides::before { content: "\f387"; }
.bi-file-earmark-spreadsheet-fill::before { content: "\f388"; }
.bi-file-earmark-spreadsheet::before { content: "\f389"; }
.bi-file-earmark-text-fill::before { content: "\f38a"; }
.bi-file-earmark-text::before { content: "\f38b"; }
.bi-file-earmark-word-fill::before { content: "\f38c"; }
.bi-file-earmark-word::before { content: "\f38d"; }
.bi-file-earmark-x-fill::before { content: "\f38e"; }
.bi-file-earmark-x::before { content: "\f38f"; }
.bi-file-earmark-zip-fill::before { content: "\f390"; }
.bi-file-earmark-zip::before { content: "\f391"; }
.bi-file-earmark::before { content: "\f392"; }
.bi-file-easel-fill::before { content: "\f393"; }
.bi-file-easel::before { content: "\f394"; }
.bi-file-excel-fill::before { content: "\f395"; }
.bi-file-excel::before { content: "\f396"; }
.bi-file-fill::before { content: "\f397"; }
.bi-file-font-fill::before { content: "\f398"; }
.bi-file-font::before { content: "\f399"; }
.bi-file-image-fill::before { content: "\f39a"; }
.bi-file-image::before { content: "\f39b"; }
.bi-file-lock-fill::before { content: "\f39c"; }
.bi-file-lock::before { content: "\f39d"; }
.bi-file-lock2-fill::before { content: "\f39e"; }
.bi-file-lock2::before { content: "\f39f"; }
.bi-file-medical-fill::before { content: "\f3a0"; }
.bi-file-medical::before { content: "\f3a1"; }
.bi-file-minus-fill::before { content: "\f3a2"; }
.bi-file-minus::before { content: "\f3a3"; }
.bi-file-music-fill::before { content: "\f3a4"; }
.bi-file-music::before { content: "\f3a5"; }
.bi-file-person-fill::before { content: "\f3a6"; }
.bi-file-person::before { content: "\f3a7"; }
.bi-file-play-fill::before { content: "\f3a8"; }
.bi-file-play::before { content: "\f3a9"; }
.bi-file-plus-fill::before { content: "\f3aa"; }
.bi-file-plus::before { content: "\f3ab"; }
.bi-file-post-fill::before { content: "\f3ac"; }
.bi-file-post::before { content: "\f3ad"; }
.bi-file-ppt-fill::before { content: "\f3ae"; }
.bi-file-ppt::before { content: "\f3af"; }
.bi-file-richtext-fill::before { content: "\f3b0"; }
.bi-file-richtext::before { content: "\f3b1"; }
.bi-file-ruled-fill::before { content: "\f3b2"; }
.bi-file-ruled::before { content: "\f3b3"; }
.bi-file-slides-fill::before { content: "\f3b4"; }
.bi-file-slides::before { content: "\f3b5"; }
.bi-file-spreadsheet-fill::before { content: "\f3b6"; }
.bi-file-spreadsheet::before { content: "\f3b7"; }
.bi-file-text-fill::before { content: "\f3b8"; }
.bi-file-text::before { content: "\f3b9"; }
.bi-file-word-fill::before { content: "\f3ba"; }
.bi-file-word::before { content: "\f3bb"; }
.bi-file-x-fill::before { content: "\f3bc"; }
.bi-file-x::before { content: "\f3bd"; }
.bi-file-zip-fill::before { content: "\f3be"; }
.bi-file-zip::before { content: "\f3bf"; }
.bi-file::before { content: "\f3c0"; }
.bi-files-alt::before { content: "\f3c1"; }
.bi-files::before { content: "\f3c2"; }
.bi-film::before { content: "\f3c3"; }
.bi-filter-circle-fill::before { content: "\f3c4"; }
.bi-filter-circle::before { content: "\f3c5"; }
.bi-filter-left::before { content: "\f3c6"; }
.bi-filter-right::before { content: "\f3c7"; }
.bi-filter-square-fill::before { content: "\f3c8"; }
.bi-filter-square::before { content: "\f3c9"; }
.bi-filter::before { content: "\f3ca"; }
.bi-flag-fill::before { content: "\f3cb"; }
.bi-flag::before { content: "\f3cc"; }
.bi-flower1::before { content: "\f3cd"; }
.bi-flower2::before { content: "\f3ce"; }
.bi-flower3::before { content: "\f3cf"; }
.bi-folder-check::before { content: "\f3d0"; }
.bi-folder-fill::before { content: "\f3d1"; }
.bi-folder-minus::before { content: "\f3d2"; }
.bi-folder-plus::before { content: "\f3d3"; }
.bi-folder-symlink-fill::before { content: "\f3d4"; }
.bi-folder-symlink::before { content: "\f3d5"; }
.bi-folder-x::before { content: "\f3d6"; }
.bi-folder::before { content: "\f3d7"; }
.bi-folder2-open::before { content: "\f3d8"; }
.bi-folder2::before { content: "\f3d9"; }
.bi-fonts::before { content: "\f3da"; }
.bi-forward-fill::before { content: "\f3db"; }
.bi-forward::before { content: "\f3dc"; }
.bi-front::before { content: "\f3dd"; }
.bi-fullscreen-exit::before { content: "\f3de"; }
.bi-fullscreen::before { content: "\f3df"; }
.bi-funnel-fill::before { content: "\f3e0"; }
.bi-funnel::before { content: "\f3e1"; }
.bi-gear-fill::before { content: "\f3e2"; }
.bi-gear-wide-connected::before { content: "\f3e3"; }
.bi-gear-wide::before { content: "\f3e4"; }
.bi-gear::before { content: "\f3e5"; }
.bi-gem::before { content: "\f3e6"; }
.bi-geo-alt-fill::before { content: "\f3e7"; }
.bi-geo-alt::before { content: "\f3e8"; }
.bi-geo-fill::before { content: "\f3e9"; }
.bi-geo::before { content: "\f3ea"; }
.bi-gift-fill::before { content: "\f3eb"; }
.bi-gift::before { content: "\f3ec"; }
.bi-github::before { content: "\f3ed"; }
.bi-globe::before { content: "\f3ee"; }
.bi-globe2::before { content: "\f3ef"; }
.bi-google::before { content: "\f3f0"; }
.bi-graph-down::before { content: "\f3f1"; }
.bi-graph-up::before { content: "\f3f2"; }
.bi-grid-1x2-fill::before { content: "\f3f3"; }
.bi-grid-1x2::before { content: "\f3f4"; }
.bi-grid-3x2-gap-fill::before { content: "\f3f5"; }
.bi-grid-3x2-gap::before { content: "\f3f6"; }
.bi-grid-3x2::before { content: "\f3f7"; }
.bi-grid-3x3-gap-fill::before { content: "\f3f8"; }
.bi-grid-3x3-gap::before { content: "\f3f9"; }
.bi-grid-3x3::before { content: "\f3fa"; }
.bi-grid-fill::before { content: "\f3fb"; }
.bi-grid::before { content: "\f3fc"; }
.bi-grip-horizontal::before { content: "\f3fd"; }
.bi-grip-vertical::before { content: "\f3fe"; }
.bi-hammer::before { content: "\f3ff"; }
.bi-hand-index-fill::before { content: "\f400"; }
.bi-hand-index-thumb-fill::before { content: "\f401"; }
.bi-hand-index-thumb::before { content: "\f402"; }
.bi-hand-index::before { content: "\f403"; }
.bi-hand-thumbs-down-fill::before { content: "\f404"; }
.bi-hand-thumbs-down::before { content: "\f405"; }
.bi-hand-thumbs-up-fill::before { content: "\f406"; }
.bi-hand-thumbs-up::before { content: "\f407"; }
.bi-handbag-fill::before { content: "\f408"; }
.bi-handbag::before { content: "\f409"; }
.bi-hash::before { content: "\f40a"; }
.bi-hdd-fill::before { content: "\f40b"; }
.bi-hdd-network-fill::before { content: "\f40c"; }
.bi-hdd-network::before { content: "\f40d"; }
.bi-hdd-rack-fill::before { content: "\f40e"; }
.bi-hdd-rack::before { content: "\f40f"; }
.bi-hdd-stack-fill::before { content: "\f410"; }
.bi-hdd-stack::before { content: "\f411"; }
.bi-hdd::before { content: "\f412"; }
.bi-headphones::before { content: "\f413"; }
.bi-headset::before { content: "\f414"; }
.bi-heart-fill::before { content: "\f415"; }
.bi-heart-half::before { content: "\f416"; }
.bi-heart::before { content: "\f417"; }
.bi-heptagon-fill::before { content: "\f418"; }
.bi-heptagon-half::before { content: "\f419"; }
.bi-heptagon::before { content: "\f41a"; }
.bi-hexagon-fill::before { content: "\f41b"; }
.bi-hexagon-half::before { content: "\f41c"; }
.bi-hexagon::before { content: "\f41d"; }
.bi-hourglass-bottom::before { content: "\f41e"; }
.bi-hourglass-split::before { content: "\f41f"; }
.bi-hourglass-top::before { content: "\f420"; }
.bi-hourglass::before { content: "\f421"; }
.bi-house-door-fill::before { content: "\f422"; }
.bi-house-door::before { content: "\f423"; }
.bi-house-fill::before { content: "\f424"; }
.bi-house::before { content: "\f425"; }
.bi-hr::before { content: "\f426"; }
.bi-hurricane::before { content: "\f427"; }
.bi-image-alt::before { content: "\f428"; }
.bi-image-fill::before { content: "\f429"; }
.bi-image::before { content: "\f42a"; }
.bi-images::before { content: "\f42b"; }
.bi-inbox-fill::before { content: "\f42c"; }
.bi-inbox::before { content: "\f42d"; }
.bi-inboxes-fill::before { content: "\f42e"; }
.bi-inboxes::before { content: "\f42f"; }
.bi-info-circle-fill::before { content: "\f430"; }
.bi-info-circle::before { content: "\f431"; }
.bi-info-square-fill::before { content: "\f432"; }
.bi-info-square::before { content: "\f433"; }
.bi-info::before { content: "\f434"; }
.bi-input-cursor-text::before { content: "\f435"; }
.bi-input-cursor::before { content: "\f436"; }
.bi-instagram::before { content: "\f437"; }
.bi-intersect::before { content: "\f438"; }
.bi-journal-album::before { content: "\f439"; }
.bi-journal-arrow-down::before { content: "\f43a"; }
.bi-journal-arrow-up::before { content: "\f43b"; }
.bi-journal-bookmark-fill::before { content: "\f43c"; }
.bi-journal-bookmark::before { content: "\f43d"; }
.bi-journal-check::before { content: "\f43e"; }
.bi-journal-code::before { content: "\f43f"; }
.bi-journal-medical::before { content: "\f440"; }
.bi-journal-minus::before { content: "\f441"; }
.bi-journal-plus::before { content: "\f442"; }
.bi-journal-richtext::before { content: "\f443"; }
.bi-journal-text::before { content: "\f444"; }
.bi-journal-x::before { content: "\f445"; }
.bi-journal::before { content: "\f446"; }
.bi-journals::before { content: "\f447"; }
.bi-joystick::before { content: "\f448"; }
.bi-justify-left::before { content: "\f449"; }
.bi-justify-right::before { content: "\f44a"; }
.bi-justify::before { content: "\f44b"; }
.bi-kanban-fill::before { content: "\f44c"; }
.bi-kanban::before { content: "\f44d"; }
.bi-key-fill::before { content: "\f44e"; }
.bi-key::before { content: "\f44f"; }
.bi-keyboard-fill::before { content: "\f450"; }
.bi-keyboard::before { content: "\f451"; }
.bi-ladder::before { content: "\f452"; }
.bi-lamp-fill::before { content: "\f453"; }
.bi-lamp::before { content: "\f454"; }
.bi-laptop-fill::before { content: "\f455"; }
.bi-laptop::before { content: "\f456"; }
.bi-layer-backward::before { content: "\f457"; }
.bi-layer-forward::before { content: "\f458"; }
.bi-layers-fill::before { content: "\f459"; }
.bi-layers-half::before { content: "\f45a"; }
.bi-layers::before { content: "\f45b"; }
.bi-layout-sidebar-inset-reverse::before { content: "\f45c"; }
.bi-layout-sidebar-inset::before { content: "\f45d"; }
.bi-layout-sidebar-reverse::before { content: "\f45e"; }
.bi-layout-sidebar::before { content: "\f45f"; }
.bi-layout-split::before { content: "\f460"; }
.bi-layout-text-sidebar-reverse::before { content: "\f461"; }
.bi-layout-text-sidebar::before { content: "\f462"; }
.bi-layout-text-window-reverse::before { content: "\f463"; }
.bi-layout-text-window::before { content: "\f464"; }
.bi-layout-three-columns::before { content: "\f465"; }
.bi-layout-wtf::before { content: "\f466"; }
.bi-life-preserver::before { content: "\f467"; }
.bi-lightbulb-fill::before { content: "\f468"; }
.bi-lightbulb-off-fill::before { content: "\f469"; }
.bi-lightbulb-off::before { content: "\f46a"; }
.bi-lightbulb::before { content: "\f46b"; }
.bi-lightning-charge-fill::before { content: "\f46c"; }
.bi-lightning-charge::before { content: "\f46d"; }
.bi-lightning-fill::before { content: "\f46e"; }
.bi-lightning::before { content: "\f46f"; }
.bi-link-45deg::before { content: "\f470"; }
.bi-link::before { content: "\f471"; }
.bi-linkedin::before { content: "\f472"; }
.bi-list-check::before { content: "\f473"; }
.bi-list-nested::before { content: "\f474"; }
.bi-list-ol::before { content: "\f475"; }
.bi-list-stars::before { content: "\f476"; }
.bi-list-task::before { content: "\f477"; }
.bi-list-ul::before { content: "\f478"; }
.bi-list::before { content: "\f479"; }
.bi-lock-fill::before { content: "\f47a"; }
.bi-lock::before { content: "\f47b"; }
.bi-mailbox::before { content: "\f47c"; }
.bi-mailbox2::before { content: "\f47d"; }
.bi-map-fill::before { content: "\f47e"; }
.bi-map::before { content: "\f47f"; }
.bi-markdown-fill::before { content: "\f480"; }
.bi-markdown::before { content: "\f481"; }
.bi-mask::before { content: "\f482"; }
.bi-megaphone-fill::before { content: "\f483"; }
.bi-megaphone::before { content: "\f484"; }
.bi-menu-app-fill::before { content: "\f485"; }
.bi-menu-app::before { content: "\f486"; }
.bi-menu-button-fill::before { content: "\f487"; }
.bi-menu-button-wide-fill::before { content: "\f488"; }
.bi-menu-button-wide::before { content: "\f489"; }
.bi-menu-button::before { content: "\f48a"; }
.bi-menu-down::before { content: "\f48b"; }
.bi-menu-up::before { content: "\f48c"; }
.bi-mic-fill::before { content: "\f48d"; }
.bi-mic-mute-fill::before { content: "\f48e"; }
.bi-mic-mute::before { content: "\f48f"; }
.bi-mic::before { content: "\f490"; }
.bi-minecart-loaded::before { content: "\f491"; }
.bi-minecart::before { content: "\f492"; }
.bi-moisture::before { content: "\f493"; }
.bi-moon-fill::before { content: "\f494"; }
.bi-moon-stars-fill::before { content: "\f495"; }
.bi-moon-stars::before { content: "\f496"; }
.bi-moon::before { content: "\f497"; }
.bi-mouse-fill::before { content: "\f498"; }
.bi-mouse::before { content: "\f499"; }
.bi-mouse2-fill::before { content: "\f49a"; }
.bi-mouse2::before { content: "\f49b"; }
.bi-mouse3-fill::before { content: "\f49c"; }
.bi-mouse3::before { content: "\f49d"; }
.bi-music-note-beamed::before { content: "\f49e"; }
.bi-music-note-list::before { content: "\f49f"; }
.bi-music-note::before { content: "\f4a0"; }
.bi-music-player-fill::before { content: "\f4a1"; }
.bi-music-player::before { content: "\f4a2"; }
.bi-newspaper::before { content: "\f4a3"; }
.bi-node-minus-fill::before { content: "\f4a4"; }
.bi-node-minus::before { content: "\f4a5"; }
.bi-node-plus-fill::before { content: "\f4a6"; }
.bi-node-plus::before { content: "\f4a7"; }
.bi-nut-fill::before { content: "\f4a8"; }
.bi-nut::before { content: "\f4a9"; }
.bi-octagon-fill::before { content: "\f4aa"; }
.bi-octagon-half::before { content: "\f4ab"; }
.bi-octagon::before { content: "\f4ac"; }
.bi-option::before { content: "\f4ad"; }
.bi-outlet::before { content: "\f4ae"; }
.bi-paint-bucket::before { content: "\f4af"; }
.bi-palette-fill::before { content: "\f4b0"; }
.bi-palette::before { content: "\f4b1"; }
.bi-palette2::before { content: "\f4b2"; }
.bi-paperclip::before { content: "\f4b3"; }
.bi-paragraph::before { content: "\f4b4"; }
.bi-patch-check-fill::before { content: "\f4b5"; }
.bi-patch-check::before { content: "\f4b6"; }
.bi-patch-exclamation-fill::before { content: "\f4b7"; }
.bi-patch-exclamation::before { content: "\f4b8"; }
.bi-patch-minus-fill::before { content: "\f4b9"; }
.bi-patch-minus::before { content: "\f4ba"; }
.bi-patch-plus-fill::before { content: "\f4bb"; }
.bi-patch-plus::before { content: "\f4bc"; }
.bi-patch-question-fill::before { content: "\f4bd"; }
.bi-patch-question::before { content: "\f4be"; }
.bi-pause-btn-fill::before { content: "\f4bf"; }
.bi-pause-btn::before { content: "\f4c0"; }
.bi-pause-circle-fill::before { content: "\f4c1"; }
.bi-pause-circle::before { content: "\f4c2"; }
.bi-pause-fill::before { content: "\f4c3"; }
.bi-pause::before { content: "\f4c4"; }
.bi-peace-fill::before { content: "\f4c5"; }
.bi-peace::before { content: "\f4c6"; }
.bi-pen-fill::before { content: "\f4c7"; }
.bi-pen::before { content: "\f4c8"; }
.bi-pencil-fill::before { content: "\f4c9"; }
.bi-pencil-square::before { content: "\f4ca"; }
.bi-pencil::before { content: "\f4cb"; }
.bi-pentagon-fill::before { content: "\f4cc"; }
.bi-pentagon-half::before { content: "\f4cd"; }
.bi-pentagon::before { content: "\f4ce"; }
.bi-people-fill::before { content: "\f4cf"; }
.bi-people::before { content: "\f4d0"; }
.bi-percent::before { content: "\f4d1"; }
.bi-person-badge-fill::before { content: "\f4d2"; }
.bi-person-badge::before { content: "\f4d3"; }
.bi-person-bounding-box::before { content: "\f4d4"; }
.bi-person-check-fill::before { content: "\f4d5"; }
.bi-person-check::before { content: "\f4d6"; }
.bi-person-circle::before { content: "\f4d7"; }
.bi-person-dash-fill::before { content: "\f4d8"; }
.bi-person-dash::before { content: "\f4d9"; }
.bi-person-fill::before { content: "\f4da"; }
.bi-person-lines-fill::before { content: "\f4db"; }
.bi-person-plus-fill::before { content: "\f4dc"; }
.bi-person-plus::before { content: "\f4dd"; }
.bi-person-square::before { content: "\f4de"; }
.bi-person-x-fill::before { content: "\f4df"; }
.bi-person-x::before { content: "\f4e0"; }
.bi-person::before { content: "\f4e1"; }
.bi-phone-fill::before { content: "\f4e2"; }
.bi-phone-landscape-fill::before { content: "\f4e3"; }
.bi-phone-landscape::before { content: "\f4e4"; }
.bi-phone-vibrate-fill::before { content: "\f4e5"; }
.bi-phone-vibrate::before { content: "\f4e6"; }
.bi-phone::before { content: "\f4e7"; }
.bi-pie-chart-fill::before { content: "\f4e8"; }
.bi-pie-chart::before { content: "\f4e9"; }
.bi-pin-angle-fill::before { content: "\f4ea"; }
.bi-pin-angle::before { content: "\f4eb"; }
.bi-pin-fill::before { content: "\f4ec"; }
.bi-pin::before { content: "\f4ed"; }
.bi-pip-fill::before { content: "\f4ee"; }
.bi-pip::before { content: "\f4ef"; }
.bi-play-btn-fill::before { content: "\f4f0"; }
.bi-play-btn::before { content: "\f4f1"; }
.bi-play-circle-fill::before { content: "\f4f2"; }
.bi-play-circle::before { content: "\f4f3"; }
.bi-play-fill::before { content: "\f4f4"; }
.bi-play::before { content: "\f4f5"; }
.bi-plug-fill::before { content: "\f4f6"; }
.bi-plug::before { content: "\f4f7"; }
.bi-plus-circle-dotted::before { content: "\f4f8"; }
.bi-plus-circle-fill::before { content: "\f4f9"; }
.bi-plus-circle::before { content: "\f4fa"; }
.bi-plus-square-dotted::before { content: "\f4fb"; }
.bi-plus-square-fill::before { content: "\f4fc"; }
.bi-plus-square::before { content: "\f4fd"; }
.bi-plus::before { content: "\f4fe"; }
.bi-power::before { content: "\f4ff"; }
.bi-printer-fill::before { content: "\f500"; }
.bi-printer::before { content: "\f501"; }
.bi-puzzle-fill::before { content: "\f502"; }
.bi-puzzle::before { content: "\f503"; }
.bi-question-circle-fill::before { content: "\f504"; }
.bi-question-circle::before { content: "\f505"; }
.bi-question-diamond-fill::before { content: "\f506"; }
.bi-question-diamond::before { content: "\f507"; }
.bi-question-octagon-fill::before { content: "\f508"; }
.bi-question-octagon::before { content: "\f509"; }
.bi-question-square-fill::before { content: "\f50a"; }
.bi-question-square::before { content: "\f50b"; }
.bi-question::before { content: "\f50c"; }
.bi-rainbow::before { content: "\f50d"; }
.bi-receipt-cutoff::before { content: "\f50e"; }
.bi-receipt::before { content: "\f50f"; }
.bi-reception-0::before { content: "\f510"; }
.bi-reception-1::before { content: "\f511"; }
.bi-reception-2::before { content: "\f512"; }
.bi-reception-3::before { content: "\f513"; }
.bi-reception-4::before { content: "\f514"; }
.bi-record-btn-fill::before { content: "\f515"; }
.bi-record-btn::before { content: "\f516"; }
.bi-record-circle-fill::before { content: "\f517"; }
.bi-record-circle::before { content: "\f518"; }
.bi-record-fill::before { content: "\f519"; }
.bi-record::before { content: "\f51a"; }
.bi-record2-fill::before { content: "\f51b"; }
.bi-record2::before { content: "\f51c"; }
.bi-reply-all-fill::before { content: "\f51d"; }
.bi-reply-all::before { content: "\f51e"; }
.bi-reply-fill::before { content: "\f51f"; }
.bi-reply::before { content: "\f520"; }
.bi-rss-fill::before { content: "\f521"; }
.bi-rss::before { content: "\f522"; }
.bi-rulers::before { content: "\f523"; }
.bi-save-fill::before { content: "\f524"; }
.bi-save::before { content: "\f525"; }
.bi-save2-fill::before { content: "\f526"; }
.bi-save2::before { content: "\f527"; }
.bi-scissors::before { content: "\f528"; }
.bi-screwdriver::before { content: "\f529"; }
.bi-search::before { content: "\f52a"; }
.bi-segmented-nav::before { content: "\f52b"; }
.bi-server::before { content: "\f52c"; }
.bi-share-fill::before { content: "\f52d"; }
.bi-share::before { content: "\f52e"; }
.bi-shield-check::before { content: "\f52f"; }
.bi-shield-exclamation::before { content: "\f530"; }
.bi-shield-fill-check::before { content: "\f531"; }
.bi-shield-fill-exclamation::before { content: "\f532"; }
.bi-shield-fill-minus::before { content: "\f533"; }
.bi-shield-fill-plus::before { content: "\f534"; }
.bi-shield-fill-x::before { content: "\f535"; }
.bi-shield-fill::before { content: "\f536"; }
.bi-shield-lock-fill::before { content: "\f537"; }
.bi-shield-lock::before { content: "\f538"; }
.bi-shield-minus::before { content: "\f539"; }
.bi-shield-plus::before { content: "\f53a"; }
.bi-shield-shaded::before { content: "\f53b"; }
.bi-shield-slash-fill::before { content: "\f53c"; }
.bi-shield-slash::before { content: "\f53d"; }
.bi-shield-x::before { content: "\f53e"; }
.bi-shield::before { content: "\f53f"; }
.bi-shift-fill::before { content: "\f540"; }
.bi-shift::before { content: "\f541"; }
.bi-shop-window::before { content: "\f542"; }
.bi-shop::before { content: "\f543"; }
.bi-shuffle::before { content: "\f544"; }
.bi-signpost-2-fill::before { content: "\f545"; }
.bi-signpost-2::before { content: "\f546"; }
.bi-signpost-fill::before { content: "\f547"; }
.bi-signpost-split-fill::before { content: "\f548"; }
.bi-signpost-split::before { content: "\f549"; }
.bi-signpost::before { content: "\f54a"; }
.bi-sim-fill::before { content: "\f54b"; }
.bi-sim::before { content: "\f54c"; }
.bi-skip-backward-btn-fill::before { content: "\f54d"; }
.bi-skip-backward-btn::before { content: "\f54e"; }
.bi-skip-backward-circle-fill::before { content: "\f54f"; }
.bi-skip-backward-circle::before { content: "\f550"; }
.bi-skip-backward-fill::before { content: "\f551"; }
.bi-skip-backward::before { content: "\f552"; }
.bi-skip-end-btn-fill::before { content: "\f553"; }
.bi-skip-end-btn::before { content: "\f554"; }
.bi-skip-end-circle-fill::before { content: "\f555"; }
.bi-skip-end-circle::before { content: "\f556"; }
.bi-skip-end-fill::before { content: "\f557"; }
.bi-skip-end::before { content: "\f558"; }
.bi-skip-forward-btn-fill::before { content: "\f559"; }
.bi-skip-forward-btn::before { content: "\f55a"; }
.bi-skip-forward-circle-fill::before { content: "\f55b"; }
.bi-skip-forward-circle::before { content: "\f55c"; }
.bi-skip-forward-fill::before { content: "\f55d"; }
.bi-skip-forward::before { content: "\f55e"; }
.bi-skip-start-btn-fill::before { content: "\f55f"; }
.bi-skip-start-btn::before { content: "\f560"; }
.bi-skip-start-circle-fill::before { content: "\f561"; }
.bi-skip-start-circle::before { content: "\f562"; }
.bi-skip-start-fill::before { content: "\f563"; }
.bi-skip-start::before { content: "\f564"; }
.bi-slack::before { content: "\f565"; }
.bi-slash-circle-fill::before { content: "\f566"; }
.bi-slash-circle::before { content: "\f567"; }
.bi-slash-square-fill::before { content: "\f568"; }
.bi-slash-square::before { content: "\f569"; }
.bi-slash::before { content: "\f56a"; }
.bi-sliders::before { content: "\f56b"; }
.bi-smartwatch::before { content: "\f56c"; }
.bi-snow::before { content: "\f56d"; }
.bi-snow2::before { content: "\f56e"; }
.bi-snow3::before { content: "\f56f"; }
.bi-sort-alpha-down-alt::before { content: "\f570"; }
.bi-sort-alpha-down::before { content: "\f571"; }
.bi-sort-alpha-up-alt::before { content: "\f572"; }
.bi-sort-alpha-up::before { content: "\f573"; }
.bi-sort-down-alt::before { content: "\f574"; }
.bi-sort-down::before { content: "\f575"; }
.bi-sort-numeric-down-alt::before { content: "\f576"; }
.bi-sort-numeric-down::before { content: "\f577"; }
.bi-sort-numeric-up-alt::before { content: "\f578"; }
.bi-sort-numeric-up::before { content: "\f579"; }
.bi-sort-up-alt::before { content: "\f57a"; }
.bi-sort-up::before { content: "\f57b"; }
.bi-soundwave::before { content: "\f57c"; }
.bi-speaker-fill::before { content: "\f57d"; }
.bi-speaker::before { content: "\f57e"; }
.bi-speedometer::before { content: "\f57f"; }
.bi-speedometer2::before { content: "\f580"; }
.bi-spellcheck::before { content: "\f581"; }
.bi-square-fill::before { content: "\f582"; }
.bi-square-half::before { content: "\f583"; }
.bi-square::before { content: "\f584"; }
.bi-stack::before { content: "\f585"; }
.bi-star-fill::before { content: "\f586"; }
.bi-star-half::before { content: "\f587"; }
.bi-star::before { content: "\f588"; }
.bi-stars::before { content: "\f589"; }
.bi-stickies-fill::before { content: "\f58a"; }
.bi-stickies::before { content: "\f58b"; }
.bi-sticky-fill::before { content: "\f58c"; }
.bi-sticky::before { content: "\f58d"; }
.bi-stop-btn-fill::before { content: "\f58e"; }
.bi-stop-btn::before { content: "\f58f"; }
.bi-stop-circle-fill::before { content: "\f590"; }
.bi-stop-circle::before { content: "\f591"; }
.bi-stop-fill::before { content: "\f592"; }
.bi-stop::before { content: "\f593"; }
.bi-stoplights-fill::before { content: "\f594"; }
.bi-stoplights::before { content: "\f595"; }
.bi-stopwatch-fill::before { content: "\f596"; }
.bi-stopwatch::before { content: "\f597"; }
.bi-subtract::before { content: "\f598"; }
.bi-suit-club-fill::before { content: "\f599"; }
.bi-suit-club::before { content: "\f59a"; }
.bi-suit-diamond-fill::before { content: "\f59b"; }
.bi-suit-diamond::before { content: "\f59c"; }
.bi-suit-heart-fill::before { content: "\f59d"; }
.bi-suit-heart::before { content: "\f59e"; }
.bi-suit-spade-fill::before { content: "\f59f"; }
.bi-suit-spade::before { content: "\f5a0"; }
.bi-sun-fill::before { content: "\f5a1"; }
.bi-sun::before { content: "\f5a2"; }
.bi-sunglasses::before { content: "\f5a3"; }
.bi-sunrise-fill::before { content: "\f5a4"; }
.bi-sunrise::before { content: "\f5a5"; }
.bi-sunset-fill::before { content: "\f5a6"; }
.bi-sunset::before { content: "\f5a7"; }
.bi-symmetry-horizontal::before { content: "\f5a8"; }
.bi-symmetry-vertical::before { content: "\f5a9"; }
.bi-table::before { content: "\f5aa"; }
.bi-tablet-fill::before { content: "\f5ab"; }
.bi-tablet-landscape-fill::before { content: "\f5ac"; }
.bi-tablet-landscape::before { content: "\f5ad"; }
.bi-tablet::before { content: "\f5ae"; }
.bi-tag-fill::before { content: "\f5af"; }
.bi-tag::before { content: "\f5b0"; }
.bi-tags-fill::before { content: "\f5b1"; }
.bi-tags::before { content: "\f5b2"; }
.bi-telegram::before { content: "\f5b3"; }
.bi-telephone-fill::before { content: "\f5b4"; }
.bi-telephone-forward-fill::before { content: "\f5b5"; }
.bi-telephone-forward::before { content: "\f5b6"; }
.bi-telephone-inbound-fill::before { content: "\f5b7"; }
.bi-telephone-inbound::before { content: "\f5b8"; }
.bi-telephone-minus-fill::before { content: "\f5b9"; }
.bi-telephone-minus::before { content: "\f5ba"; }
.bi-telephone-outbound-fill::before { content: "\f5bb"; }
.bi-telephone-outbound::before { content: "\f5bc"; }
.bi-telephone-plus-fill::before { content: "\f5bd"; }
.bi-telephone-plus::before { content: "\f5be"; }
.bi-telephone-x-fill::before { content: "\f5bf"; }
.bi-telephone-x::before { content: "\f5c0"; }
.bi-telephone::before { content: "\f5c1"; }
.bi-terminal-fill::before { content: "\f5c2"; }
.bi-terminal::before { content: "\f5c3"; }
.bi-text-center::before { content: "\f5c4"; }
.bi-text-indent-left::before { content: "\f5c5"; }
.bi-text-indent-right::before { content: "\f5c6"; }
.bi-text-left::before { content: "\f5c7"; }
.bi-text-paragraph::before { content: "\f5c8"; }
.bi-text-right::before { content: "\f5c9"; }
.bi-textarea-resize::before { content: "\f5ca"; }
.bi-textarea-t::before { content: "\f5cb"; }
.bi-textarea::before { content: "\f5cc"; }
.bi-thermometer-half::before { content: "\f5cd"; }
.bi-thermometer-high::before { content: "\f5ce"; }
.bi-thermometer-low::before { content: "\f5cf"; }
.bi-thermometer-snow::before { content: "\f5d0"; }
.bi-thermometer-sun::before { content: "\f5d1"; }
.bi-thermometer::before { content: "\f5d2"; }
.bi-three-dots-vertical::before { content: "\f5d3"; }
.bi-three-dots::before { content: "\f5d4"; }
.bi-toggle-off::before { content: "\f5d5"; }
.bi-toggle-on::before { content: "\f5d6"; }
.bi-toggle2-off::before { content: "\f5d7"; }
.bi-toggle2-on::before { content: "\f5d8"; }
.bi-toggles::before { content: "\f5d9"; }
.bi-toggles2::before { content: "\f5da"; }
.bi-tools::before { content: "\f5db"; }
.bi-tornado::before { content: "\f5dc"; }
.bi-trash-fill::before { content: "\f5dd"; }
.bi-trash::before { content: "\f5de"; }
.bi-trash2-fill::before { content: "\f5df"; }
.bi-trash2::before { content: "\f5e0"; }
.bi-tree-fill::before { content: "\f5e1"; }
.bi-tree::before { content: "\f5e2"; }
.bi-triangle-fill::before { content: "\f5e3"; }
.bi-triangle-half::before { content: "\f5e4"; }
.bi-triangle::before { content: "\f5e5"; }
.bi-trophy-fill::before { content: "\f5e6"; }
.bi-trophy::before { content: "\f5e7"; }
.bi-tropical-storm::before { content: "\f5e8"; }
.bi-truck-flatbed::before { content: "\f5e9"; }
.bi-truck::before { content: "\f5ea"; }
.bi-tsunami::before { content: "\f5eb"; }
.bi-tv-fill::before { content: "\f5ec"; }
.bi-tv::before { content: "\f5ed"; }
.bi-twitch::before { content: "\f5ee"; }
.bi-twitter::before { content: "\f5ef"; }
.bi-type-bold::before { content: "\f5f0"; }
.bi-type-h1::before { content: "\f5f1"; }
.bi-type-h2::before { content: "\f5f2"; }
.bi-type-h3::before { content: "\f5f3"; }
.bi-type-italic::before { content: "\f5f4"; }
.bi-type-strikethrough::before { content: "\f5f5"; }
.bi-type-underline::before { content: "\f5f6"; }
.bi-type::before { content: "\f5f7"; }
.bi-ui-checks-grid::before { content: "\f5f8"; }
.bi-ui-checks::before { content: "\f5f9"; }
.bi-ui-radios-grid::before { content: "\f5fa"; }
.bi-ui-radios::before { content: "\f5fb"; }
.bi-umbrella-fill::before { content: "\f5fc"; }
.bi-umbrella::before { content: "\f5fd"; }
.bi-union::before { content: "\f5fe"; }
.bi-unlock-fill::before { content: "\f5ff"; }
.bi-unlock::before { content: "\f600"; }
.bi-upc-scan::before { content: "\f601"; }
.bi-upc::before { content: "\f602"; }
.bi-upload::before { content: "\f603"; }
.bi-vector-pen::before { content: "\f604"; }
.bi-view-list::before { content: "\f605"; }
.bi-view-stacked::before { content: "\f606"; }
.bi-vinyl-fill::before { content: "\f607"; }
.bi-vinyl::before { content: "\f608"; }
.bi-voicemail::before { content: "\f609"; }
.bi-volume-down-fill::before { content: "\f60a"; }
.bi-volume-down::before { content: "\f60b"; }
.bi-volume-mute-fill::before { content: "\f60c"; }
.bi-volume-mute::before { content: "\f60d"; }
.bi-volume-off-fill::before { content: "\f60e"; }
.bi-volume-off::before { content: "\f60f"; }
.bi-volume-up-fill::before { content: "\f610"; }
.bi-volume-up::before { content: "\f611"; }
.bi-vr::before { content: "\f612"; }
.bi-wallet-fill::before { content: "\f613"; }
.bi-wallet::before { content: "\f614"; }
.bi-wallet2::before { content: "\f615"; }
.bi-watch::before { content: "\f616"; }
.bi-water::before { content: "\f617"; }
.bi-whatsapp::before { content: "\f618"; }
.bi-wifi-1::before { content: "\f619"; }
.bi-wifi-2::before { content: "\f61a"; }
.bi-wifi-off::before { content: "\f61b"; }
.bi-wifi::before { content: "\f61c"; }
.bi-wind::before { content: "\f61d"; }
.bi-window-dock::before { content: "\f61e"; }
.bi-window-sidebar::before { content: "\f61f"; }
.bi-window::before { content: "\f620"; }
.bi-wrench::before { content: "\f621"; }
.bi-x-circle-fill::before { content: "\f622"; }
.bi-x-circle::before { content: "\f623"; }
.bi-x-diamond-fill::before { content: "\f624"; }
.bi-x-diamond::before { content: "\f625"; }
.bi-x-octagon-fill::before { content: "\f626"; }
.bi-x-octagon::before { content: "\f627"; }
.bi-x-square-fill::before { content: "\f628"; }
.bi-x-square::before { content: "\f629"; }
.bi-x::before { content: "\f62a"; }
.bi-youtube::before { content: "\f62b"; }
.bi-zoom-in::before { content: "\f62c"; }
.bi-zoom-out::before { content: "\f62d"; }
.bi-bank::before { content: "\f62e"; }
.bi-bank2::before { content: "\f62f"; }
.bi-bell-slash-fill::before { content: "\f630"; }
.bi-bell-slash::before { content: "\f631"; }
.bi-cash-coin::before { content: "\f632"; }
.bi-check-lg::before { content: "\f633"; }
.bi-coin::before { content: "\f634"; }
.bi-currency-bitcoin::before { content: "\f635"; }
.bi-currency-dollar::before { content: "\f636"; }
.bi-currency-euro::before { content: "\f637"; }
.bi-currency-exchange::before { content: "\f638"; }
.bi-currency-pound::before { content: "\f639"; }
.bi-currency-yen::before { content: "\f63a"; }
.bi-dash-lg::before { content: "\f63b"; }
.bi-exclamation-lg::before { content: "\f63c"; }
.bi-file-earmark-pdf-fill::before { content: "\f63d"; }
.bi-file-earmark-pdf::before { content: "\f63e"; }
.bi-file-pdf-fill::before { content: "\f63f"; }
.bi-file-pdf::before { content: "\f640"; }
.bi-gender-ambiguous::before { content: "\f641"; }
.bi-gender-female::before { content: "\f642"; }
.bi-gender-male::before { content: "\f643"; }
.bi-gender-trans::before { content: "\f644"; }
.bi-headset-vr::before { content: "\f645"; }
.bi-info-lg::before { content: "\f646"; }
.bi-mastodon::before { content: "\f647"; }
.bi-messenger::before { content: "\f648"; }
.bi-piggy-bank-fill::before { content: "\f649"; }
.bi-piggy-bank::before { content: "\f64a"; }
.bi-pin-map-fill::before { content: "\f64b"; }
.bi-pin-map::before { content: "\f64c"; }
.bi-plus-lg::before { content: "\f64d"; }
.bi-question-lg::before { content: "\f64e"; }
.bi-recycle::before { content: "\f64f"; }
.bi-reddit::before { content: "\f650"; }
.bi-safe-fill::before { content: "\f651"; }
.bi-safe2-fill::before { content: "\f652"; }
.bi-safe2::before { content: "\f653"; }
.bi-sd-card-fill::before { content: "\f654"; }
.bi-sd-card::before { content: "\f655"; }
.bi-skype::before { content: "\f656"; }
.bi-slash-lg::before { content: "\f657"; }
.bi-translate::before { content: "\f658"; }
.bi-x-lg::before { content: "\f659"; }
.bi-safe::before { content: "\f65a"; }
.bi-apple::before { content: "\f65b"; }
.bi-microsoft::before { content: "\f65d"; }
.bi-windows::before { content: "\f65e"; }
.bi-behance::before { content: "\f65c"; }
.bi-dribbble::before { content: "\f65f"; }
.bi-line::before { content: "\f660"; }
.bi-medium::before { content: "\f661"; }
.bi-paypal::before { content: "\f662"; }
.bi-pinterest::before { content: "\f663"; }
.bi-signal::before { content: "\f664"; }
.bi-snapchat::before { content: "\f665"; }
.bi-spotify::before { content: "\f666"; }
.bi-stack-overflow::before { content: "\f667"; }
.bi-strava::before { content: "\f668"; }
.bi-wordpress::before { content: "\f669"; }
.bi-vimeo::before { content: "\f66a"; }
.bi-activity::before { content: "\f66b"; }
.bi-easel2-fill::before { content: "\f66c"; }
.bi-easel2::before { content: "\f66d"; }
.bi-easel3-fill::before { content: "\f66e"; }
.bi-easel3::before { content: "\f66f"; }
.bi-fan::before { content: "\f670"; }
.bi-fingerprint::before { content: "\f671"; }
.bi-graph-down-arrow::before { content: "\f672"; }
.bi-graph-up-arrow::before { content: "\f673"; }
.bi-hypnotize::before { content: "\f674"; }
.bi-magic::before { content: "\f675"; }
.bi-person-rolodex::before { content: "\f676"; }
.bi-person-video::before { content: "\f677"; }
.bi-person-video2::before { content: "\f678"; }
.bi-person-video3::before { content: "\f679"; }
.bi-person-workspace::before { content: "\f67a"; }
.bi-radioactive::before { content: "\f67b"; }
.bi-webcam-fill::before { content: "\f67c"; }
.bi-webcam::before { content: "\f67d"; }
.bi-yin-yang::before { content: "\f67e"; }
.bi-bandaid-fill::before { content: "\f680"; }
.bi-bandaid::before { content: "\f681"; }
.bi-bluetooth::before { content: "\f682"; }
.bi-body-text::before { content: "\f683"; }
.bi-boombox::before { content: "\f684"; }
.bi-boxes::before { content: "\f685"; }
.bi-dpad-fill::before { content: "\f686"; }
.bi-dpad::before { content: "\f687"; }
.bi-ear-fill::before { content: "\f688"; }
.bi-ear::before { content: "\f689"; }
.bi-envelope-check-fill::before { content: "\f68b"; }
.bi-envelope-check::before { content: "\f68c"; }
.bi-envelope-dash-fill::before { content: "\f68e"; }
.bi-envelope-dash::before { content: "\f68f"; }
.bi-envelope-exclamation-fill::before { content: "\f691"; }
.bi-envelope-exclamation::before { content: "\f692"; }
.bi-envelope-plus-fill::before { content: "\f693"; }
.bi-envelope-plus::before { content: "\f694"; }
.bi-envelope-slash-fill::before { content: "\f696"; }
.bi-envelope-slash::before { content: "\f697"; }
.bi-envelope-x-fill::before { content: "\f699"; }
.bi-envelope-x::before { content: "\f69a"; }
.bi-explicit-fill::before { content: "\f69b"; }
.bi-explicit::before { content: "\f69c"; }
.bi-git::before { content: "\f69d"; }
.bi-infinity::before { content: "\f69e"; }
.bi-list-columns-reverse::before { content: "\f69f"; }
.bi-list-columns::before { content: "\f6a0"; }
.bi-meta::before { content: "\f6a1"; }
.bi-nintendo-switch::before { content: "\f6a4"; }
.bi-pc-display-horizontal::before { content: "\f6a5"; }
.bi-pc-display::before { content: "\f6a6"; }
.bi-pc-horizontal::before { content: "\f6a7"; }
.bi-pc::before { content: "\f6a8"; }
.bi-playstation::before { content: "\f6a9"; }
.bi-plus-slash-minus::before { content: "\f6aa"; }
.bi-projector-fill::before { content: "\f6ab"; }
.bi-projector::before { content: "\f6ac"; }
.bi-qr-code-scan::before { content: "\f6ad"; }
.bi-qr-code::before { content: "\f6ae"; }
.bi-quora::before { content: "\f6af"; }
.bi-quote::before { content: "\f6b0"; }
.bi-robot::before { content: "\f6b1"; }
.bi-send-check-fill::before { content: "\f6b2"; }
.bi-send-check::before { content: "\f6b3"; }
.bi-send-dash-fill::before { content: "\f6b4"; }
.bi-send-dash::before { content: "\f6b5"; }
.bi-send-exclamation-fill::before { content: "\f6b7"; }
.bi-send-exclamation::before { content: "\f6b8"; }
.bi-send-fill::before { content: "\f6b9"; }
.bi-send-plus-fill::before { content: "\f6ba"; }
.bi-send-plus::before { content: "\f6bb"; }
.bi-send-slash-fill::before { content: "\f6bc"; }
.bi-send-slash::before { content: "\f6bd"; }
.bi-send-x-fill::before { content: "\f6be"; }
.bi-send-x::before { content: "\f6bf"; }
.bi-send::before { content: "\f6c0"; }
.bi-steam::before { content: "\f6c1"; }
.bi-terminal-dash::before { content: "\f6c3"; }
.bi-terminal-plus::before { content: "\f6c4"; }
.bi-terminal-split::before { content: "\f6c5"; }
.bi-ticket-detailed-fill::before { content: "\f6c6"; }
.bi-ticket-detailed::before { content: "\f6c7"; }
.bi-ticket-fill::before { content: "\f6c8"; }
.bi-ticket-perforated-fill::before { content: "\f6c9"; }
.bi-ticket-perforated::before { content: "\f6ca"; }
.bi-ticket::before { content: "\f6cb"; }
.bi-tiktok::before { content: "\f6cc"; }
.bi-window-dash::before { content: "\f6cd"; }
.bi-window-desktop::before { content: "\f6ce"; }
.bi-window-fullscreen::before { content: "\f6cf"; }
.bi-window-plus::before { content: "\f6d0"; }
.bi-window-split::before { content: "\f6d1"; }
.bi-window-stack::before { content: "\f6d2"; }
.bi-window-x::before { content: "\f6d3"; }
.bi-xbox::before { content: "\f6d4"; }
.bi-ethernet::before { content: "\f6d5"; }
.bi-hdmi-fill::before { content: "\f6d6"; }
.bi-hdmi::before { content: "\f6d7"; }
.bi-usb-c-fill::before { content: "\f6d8"; }
.bi-usb-c::before { content: "\f6d9"; }
.bi-usb-fill::before { content: "\f6da"; }
.bi-usb-plug-fill::before { content: "\f6db"; }
.bi-usb-plug::before { content: "\f6dc"; }
.bi-usb-symbol::before { content: "\f6dd"; }
.bi-usb::before { content: "\f6de"; }
.bi-boombox-fill::before { content: "\f6df"; }
.bi-displayport::before { content: "\f6e1"; }
.bi-gpu-card::before { content: "\f6e2"; }
.bi-memory::before { content: "\f6e3"; }
.bi-modem-fill::before { content: "\f6e4"; }
.bi-modem::before { content: "\f6e5"; }
.bi-motherboard-fill::before { content: "\f6e6"; }
.bi-motherboard::before { content: "\f6e7"; }
.bi-optical-audio-fill::before { content: "\f6e8"; }
.bi-optical-audio::before { content: "\f6e9"; }
.bi-pci-card::before { content: "\f6ea"; }
.bi-router-fill::before { content: "\f6eb"; }
.bi-router::before { content: "\f6ec"; }
.bi-thunderbolt-fill::before { content: "\f6ef"; }
.bi-thunderbolt::before { content: "\f6f0"; }
.bi-usb-drive-fill::before { content: "\f6f1"; }
.bi-usb-drive::before { content: "\f6f2"; }
.bi-usb-micro-fill::before { content: "\f6f3"; }
.bi-usb-micro::before { content: "\f6f4"; }
.bi-usb-mini-fill::before { content: "\f6f5"; }
.bi-usb-mini::before { content: "\f6f6"; }
.bi-cloud-haze2::before { content: "\f6f7"; }
.bi-device-hdd-fill::before { content: "\f6f8"; }
.bi-device-hdd::before { content: "\f6f9"; }
.bi-device-ssd-fill::before { content: "\f6fa"; }
.bi-device-ssd::before { content: "\f6fb"; }
.bi-displayport-fill::before { content: "\f6fc"; }
.bi-mortarboard-fill::before { content: "\f6fd"; }
.bi-mortarboard::before { content: "\f6fe"; }
.bi-terminal-x::before { content: "\f6ff"; }
.bi-arrow-through-heart-fill::before { content: "\f700"; }
.bi-arrow-through-heart::before { content: "\f701"; }
.bi-badge-sd-fill::before { content: "\f702"; }
.bi-badge-sd::before { content: "\f703"; }
.bi-bag-heart-fill::before { content: "\f704"; }
.bi-bag-heart::before { content: "\f705"; }
.bi-balloon-fill::before { content: "\f706"; }
.bi-balloon-heart-fill::before { content: "\f707"; }
.bi-balloon-heart::before { content: "\f708"; }
.bi-balloon::before { content: "\f709"; }
.bi-box2-fill::before { content: "\f70a"; }
.bi-box2-heart-fill::before { content: "\f70b"; }
.bi-box2-heart::before { content: "\f70c"; }
.bi-box2::before { content: "\f70d"; }
.bi-braces-asterisk::before { content: "\f70e"; }
.bi-calendar-heart-fill::before { content: "\f70f"; }
.bi-calendar-heart::before { content: "\f710"; }
.bi-calendar2-heart-fill::before { content: "\f711"; }
.bi-calendar2-heart::before { content: "\f712"; }
.bi-chat-heart-fill::before { content: "\f713"; }
.bi-chat-heart::before { content: "\f714"; }
.bi-chat-left-heart-fill::before { content: "\f715"; }
.bi-chat-left-heart::before { content: "\f716"; }
.bi-chat-right-heart-fill::before { content: "\f717"; }
.bi-chat-right-heart::before { content: "\f718"; }
.bi-chat-square-heart-fill::before { content: "\f719"; }
.bi-chat-square-heart::before { content: "\f71a"; }
.bi-clipboard-check-fill::before { content: "\f71b"; }
.bi-clipboard-data-fill::before { content: "\f71c"; }
.bi-clipboard-fill::before { content: "\f71d"; }
.bi-clipboard-heart-fill::before { content: "\f71e"; }
.bi-clipboard-heart::before { content: "\f71f"; }
.bi-clipboard-minus-fill::before { content: "\f720"; }
.bi-clipboard-plus-fill::before { content: "\f721"; }
.bi-clipboard-pulse::before { content: "\f722"; }
.bi-clipboard-x-fill::before { content: "\f723"; }
.bi-clipboard2-check-fill::before { content: "\f724"; }
.bi-clipboard2-check::before { content: "\f725"; }
.bi-clipboard2-data-fill::before { content: "\f726"; }
.bi-clipboard2-data::before { content: "\f727"; }
.bi-clipboard2-fill::before { content: "\f728"; }
.bi-clipboard2-heart-fill::before { content: "\f729"; }
.bi-clipboard2-heart::before { content: "\f72a"; }
.bi-clipboard2-minus-fill::before { content: "\f72b"; }
.bi-clipboard2-minus::before { content: "\f72c"; }
.bi-clipboard2-plus-fill::before { content: "\f72d"; }
.bi-clipboard2-plus::before { content: "\f72e"; }
.bi-clipboard2-pulse-fill::before { content: "\f72f"; }
.bi-clipboard2-pulse::before { content: "\f730"; }
.bi-clipboard2-x-fill::before { content: "\f731"; }
.bi-clipboard2-x::before { content: "\f732"; }
.bi-clipboard2::before { content: "\f733"; }
.bi-emoji-kiss-fill::before { content: "\f734"; }
.bi-emoji-kiss::before { content: "\f735"; }
.bi-envelope-heart-fill::before { content: "\f736"; }
.bi-envelope-heart::before { content: "\f737"; }
.bi-envelope-open-heart-fill::before { content: "\f738"; }
.bi-envelope-open-heart::before { content: "\f739"; }
.bi-envelope-paper-fill::before { content: "\f73a"; }
.bi-envelope-paper-heart-fill::before { content: "\f73b"; }
.bi-envelope-paper-heart::before { content: "\f73c"; }
.bi-envelope-paper::before { content: "\f73d"; }
.bi-filetype-aac::before { content: "\f73e"; }
.bi-filetype-ai::before { content: "\f73f"; }
.bi-filetype-bmp::before { content: "\f740"; }
.bi-filetype-cs::before { content: "\f741"; }
.bi-filetype-css::before { content: "\f742"; }
.bi-filetype-csv::before { content: "\f743"; }
.bi-filetype-doc::before { content: "\f744"; }
.bi-filetype-docx::before { content: "\f745"; }
.bi-filetype-exe::before { content: "\f746"; }
.bi-filetype-gif::before { content: "\f747"; }
.bi-filetype-heic::before { content: "\f748"; }
.bi-filetype-html::before { content: "\f749"; }
.bi-filetype-java::before { content: "\f74a"; }
.bi-filetype-jpg::before { content: "\f74b"; }
.bi-filetype-js::before { content: "\f74c"; }
.bi-filetype-jsx::before { content: "\f74d"; }
.bi-filetype-key::before { content: "\f74e"; }
.bi-filetype-m4p::before { content: "\f74f"; }
.bi-filetype-md::before { content: "\f750"; }
.bi-filetype-mdx::before { content: "\f751"; }
.bi-filetype-mov::before { content: "\f752"; }
.bi-filetype-mp3::before { content: "\f753"; }
.bi-filetype-mp4::before { content: "\f754"; }
.bi-filetype-otf::before { content: "\f755"; }
.bi-filetype-pdf::before { content: "\f756"; }
.bi-filetype-php::before { content: "\f757"; }
.bi-filetype-png::before { content: "\f758"; }
.bi-filetype-ppt::before { content: "\f75a"; }
.bi-filetype-psd::before { content: "\f75b"; }
.bi-filetype-py::before { content: "\f75c"; }
.bi-filetype-raw::before { content: "\f75d"; }
.bi-filetype-rb::before { content: "\f75e"; }
.bi-filetype-sass::before { content: "\f75f"; }
.bi-filetype-scss::before { content: "\f760"; }
.bi-filetype-sh::before { content: "\f761"; }
.bi-filetype-svg::before { content: "\f762"; }
.bi-filetype-tiff::before { content: "\f763"; }
.bi-filetype-tsx::before { content: "\f764"; }
.bi-filetype-ttf::before { content: "\f765"; }
.bi-filetype-txt::before { content: "\f766"; }
.bi-filetype-wav::before { content: "\f767"; }
.bi-filetype-woff::before { content: "\f768"; }
.bi-filetype-xls::before { content: "\f76a"; }
.bi-filetype-xml::before { content: "\f76b"; }
.bi-filetype-yml::before { content: "\f76c"; }
.bi-heart-arrow::before { content: "\f76d"; }
.bi-heart-pulse-fill::before { content: "\f76e"; }
.bi-heart-pulse::before { content: "\f76f"; }
.bi-heartbreak-fill::before { content: "\f770"; }
.bi-heartbreak::before { content: "\f771"; }
.bi-hearts::before { content: "\f772"; }
.bi-hospital-fill::before { content: "\f773"; }
.bi-hospital::before { content: "\f774"; }
.bi-house-heart-fill::before { content: "\f775"; }
.bi-house-heart::before { content: "\f776"; }
.bi-incognito::before { content: "\f777"; }
.bi-magnet-fill::before { content: "\f778"; }
.bi-magnet::before { content: "\f779"; }
.bi-person-heart::before { content: "\f77a"; }
.bi-person-hearts::before { content: "\f77b"; }
.bi-phone-flip::before { content: "\f77c"; }
.bi-plugin::before { content: "\f77d"; }
.bi-postage-fill::before { content: "\f77e"; }
.bi-postage-heart-fill::before { content: "\f77f"; }
.bi-postage-heart::before { content: "\f780"; }
.bi-postage::before { content: "\f781"; }
.bi-postcard-fill::before { content: "\f782"; }
.bi-postcard-heart-fill::before { content: "\f783"; }
.bi-postcard-heart::before { content: "\f784"; }
.bi-postcard::before { content: "\f785"; }
.bi-search-heart-fill::before { content: "\f786"; }
.bi-search-heart::before { content: "\f787"; }
.bi-sliders2-vertical::before { content: "\f788"; }
.bi-sliders2::before { content: "\f789"; }
.bi-trash3-fill::before { content: "\f78a"; }
.bi-trash3::before { content: "\f78b"; }
.bi-valentine::before { content: "\f78c"; }
.bi-valentine2::before { content: "\f78d"; }
.bi-wrench-adjustable-circle-fill::before { content: "\f78e"; }
.bi-wrench-adjustable-circle::before { content: "\f78f"; }
.bi-wrench-adjustable::before { content: "\f790"; }
.bi-filetype-json::before { content: "\f791"; }
.bi-filetype-pptx::before { content: "\f792"; }
.bi-filetype-xlsx::before { content: "\f793"; }
.bi-1-circle-fill::before { content: "\f796"; }
.bi-1-circle::before { content: "\f797"; }
.bi-1-square-fill::before { content: "\f798"; }
.bi-1-square::before { content: "\f799"; }
.bi-2-circle-fill::before { content: "\f79c"; }
.bi-2-circle::before { content: "\f79d"; }
.bi-2-square-fill::before { content: "\f79e"; }
.bi-2-square::before { content: "\f79f"; }
.bi-3-circle-fill::before { content: "\f7a2"; }
.bi-3-circle::before { content: "\f7a3"; }
.bi-3-square-fill::before { content: "\f7a4"; }
.bi-3-square::before { content: "\f7a5"; }
.bi-4-circle-fill::before { content: "\f7a8"; }
.bi-4-circle::before { content: "\f7a9"; }
.bi-4-square-fill::before { content: "\f7aa"; }
.bi-4-square::before { content: "\f7ab"; }
.bi-5-circle-fill::before { content: "\f7ae"; }
.bi-5-circle::before { content: "\f7af"; }
.bi-5-square-fill::before { content: "\f7b0"; }
.bi-5-square::before { content: "\f7b1"; }
.bi-6-circle-fill::before { content: "\f7b4"; }
.bi-6-circle::before { content: "\f7b5"; }
.bi-6-square-fill::before { content: "\f7b6"; }
.bi-6-square::before { content: "\f7b7"; }
.bi-7-circle-fill::before { content: "\f7ba"; }
.bi-7-circle::before { content: "\f7bb"; }
.bi-7-square-fill::before { content: "\f7bc"; }
.bi-7-square::before { content: "\f7bd"; }
.bi-8-circle-fill::before { content: "\f7c0"; }
.bi-8-circle::before { content: "\f7c1"; }
.bi-8-square-fill::before { content: "\f7c2"; }
.bi-8-square::before { content: "\f7c3"; }
.bi-9-circle-fill::before { content: "\f7c6"; }
.bi-9-circle::before { content: "\f7c7"; }
.bi-9-square-fill::before { content: "\f7c8"; }
.bi-9-square::before { content: "\f7c9"; }
.bi-airplane-engines-fill::before { content: "\f7ca"; }
.bi-airplane-engines::before { content: "\f7cb"; }
.bi-airplane-fill::before { content: "\f7cc"; }
.bi-airplane::before { content: "\f7cd"; }
.bi-alexa::before { content: "\f7ce"; }
.bi-alipay::before { content: "\f7cf"; }
.bi-android::before { content: "\f7d0"; }
.bi-android2::before { content: "\f7d1"; }
.bi-box-fill::before { content: "\f7d2"; }
.bi-box-seam-fill::before { content: "\f7d3"; }
.bi-browser-chrome::before { content: "\f7d4"; }
.bi-browser-edge::before { content: "\f7d5"; }
.bi-browser-firefox::before { content: "\f7d6"; }
.bi-browser-safari::before { content: "\f7d7"; }
.bi-c-circle-fill::before { content: "\f7da"; }
.bi-c-circle::before { content: "\f7db"; }
.bi-c-square-fill::before { content: "\f7dc"; }
.bi-c-square::before { content: "\f7dd"; }
.bi-capsule-pill::before { content: "\f7de"; }
.bi-capsule::before { content: "\f7df"; }
.bi-car-front-fill::before { content: "\f7e0"; }
.bi-car-front::before { content: "\f7e1"; }
.bi-cassette-fill::before { content: "\f7e2"; }
.bi-cassette::before { content: "\f7e3"; }
.bi-cc-circle-fill::before { content: "\f7e6"; }
.bi-cc-circle::before { content: "\f7e7"; }
.bi-cc-square-fill::before { content: "\f7e8"; }
.bi-cc-square::before { content: "\f7e9"; }
.bi-cup-hot-fill::before { content: "\f7ea"; }
.bi-cup-hot::before { content: "\f7eb"; }
.bi-currency-rupee::before { content: "\f7ec"; }
.bi-dropbox::before { content: "\f7ed"; }
.bi-escape::before { content: "\f7ee"; }
.bi-fast-forward-btn-fill::before { content: "\f7ef"; }
.bi-fast-forward-btn::before { content: "\f7f0"; }
.bi-fast-forward-circle-fill::before { content: "\f7f1"; }
.bi-fast-forward-circle::before { content: "\f7f2"; }
.bi-fast-forward-fill::before { content: "\f7f3"; }
.bi-fast-forward::before { content: "\f7f4"; }
.bi-filetype-sql::before { content: "\f7f5"; }
.bi-fire::before { content: "\f7f6"; }
.bi-google-play::before { content: "\f7f7"; }
.bi-h-circle-fill::before { content: "\f7fa"; }
.bi-h-circle::before { content: "\f7fb"; }
.bi-h-square-fill::before { content: "\f7fc"; }
.bi-h-square::before { content: "\f7fd"; }
.bi-indent::before { content: "\f7fe"; }
.bi-lungs-fill::before { content: "\f7ff"; }
.bi-lungs::before { content: "\f800"; }
.bi-microsoft-teams::before { content: "\f801"; }
.bi-p-circle-fill::before { content: "\f804"; }
.bi-p-circle::before { content: "\f805"; }
.bi-p-square-fill::before { content: "\f806"; }
.bi-p-square::before { content: "\f807"; }
.bi-pass-fill::before { content: "\f808"; }
.bi-pass::before { content: "\f809"; }
.bi-prescription::before { content: "\f80a"; }
.bi-prescription2::before { content: "\f80b"; }
.bi-r-circle-fill::before { content: "\f80e"; }
.bi-r-circle::before { content: "\f80f"; }
.bi-r-square-fill::before { content: "\f810"; }
.bi-r-square::before { content: "\f811"; }
.bi-repeat-1::before { content: "\f812"; }
.bi-repeat::before { content: "\f813"; }
.bi-rewind-btn-fill::before { content: "\f814"; }
.bi-rewind-btn::before { content: "\f815"; }
.bi-rewind-circle-fill::before { content: "\f816"; }
.bi-rewind-circle::before { content: "\f817"; }
.bi-rewind-fill::before { content: "\f818"; }
.bi-rewind::before { content: "\f819"; }
.bi-train-freight-front-fill::before { content: "\f81a"; }
.bi-train-freight-front::before { content: "\f81b"; }
.bi-train-front-fill::before { content: "\f81c"; }
.bi-train-front::before { content: "\f81d"; }
.bi-train-lightrail-front-fill::before { content: "\f81e"; }
.bi-train-lightrail-front::before { content: "\f81f"; }
.bi-truck-front-fill::before { content: "\f820"; }
.bi-truck-front::before { content: "\f821"; }
.bi-ubuntu::before { content: "\f822"; }
.bi-unindent::before { content: "\f823"; }
.bi-unity::before { content: "\f824"; }
.bi-universal-access-circle::before { content: "\f825"; }
.bi-universal-access::before { content: "\f826"; }
.bi-virus::before { content: "\f827"; }
.bi-virus2::before { content: "\f828"; }
.bi-wechat::before { content: "\f829"; }
.bi-yelp::before { content: "\f82a"; }
.bi-sign-stop-fill::before { content: "\f82b"; }
.bi-sign-stop-lights-fill::before { content: "\f82c"; }
.bi-sign-stop-lights::before { content: "\f82d"; }
.bi-sign-stop::before { content: "\f82e"; }
.bi-sign-turn-left-fill::before { content: "\f82f"; }
.bi-sign-turn-left::before { content: "\f830"; }
.bi-sign-turn-right-fill::before { content: "\f831"; }
.bi-sign-turn-right::before { content: "\f832"; }
.bi-sign-turn-slight-left-fill::before { content: "\f833"; }
.bi-sign-turn-slight-left::before { content: "\f834"; }
.bi-sign-turn-slight-right-fill::before { content: "\f835"; }
.bi-sign-turn-slight-right::before { content: "\f836"; }
.bi-sign-yield-fill::before { content: "\f837"; }
.bi-sign-yield::before { content: "\f838"; }
.bi-ev-station-fill::before { content: "\f839"; }
.bi-ev-station::before { content: "\f83a"; }
.bi-fuel-pump-diesel-fill::before { content: "\f83b"; }
.bi-fuel-pump-diesel::before { content: "\f83c"; }
.bi-fuel-pump-fill::before { content: "\f83d"; }
.bi-fuel-pump::before { content: "\f83e"; }
.bi-0-circle-fill::before { content: "\f83f"; }
.bi-0-circle::before { content: "\f840"; }
.bi-0-square-fill::before { content: "\f841"; }
.bi-0-square::before { content: "\f842"; }
.bi-rocket-fill::before { content: "\f843"; }
.bi-rocket-takeoff-fill::before { content: "\f844"; }
.bi-rocket-takeoff::before { content: "\f845"; }
.bi-rocket::before { content: "\f846"; }
.bi-stripe::before { content: "\f847"; }
.bi-subscript::before { content: "\f848"; }
.bi-superscript::before { content: "\f849"; }
.bi-trello::before { content: "\f84a"; }
.bi-envelope-at-fill::before { content: "\f84b"; }
.bi-envelope-at::before { content: "\f84c"; }
.bi-regex::before { content: "\f84d"; }
.bi-text-wrap::before { content: "\f84e"; }
.bi-sign-dead-end-fill::before { content: "\f84f"; }
.bi-sign-dead-end::before { content: "\f850"; }
.bi-sign-do-not-enter-fill::before { content: "\f851"; }
.bi-sign-do-not-enter::before { content: "\f852"; }
.bi-sign-intersection-fill::before { content: "\f853"; }
.bi-sign-intersection-side-fill::before { content: "\f854"; }
.bi-sign-intersection-side::before { content: "\f855"; }
.bi-sign-intersection-t-fill::before { content: "\f856"; }
.bi-sign-intersection-t::before { content: "\f857"; }
.bi-sign-intersection-y-fill::before { content: "\f858"; }
.bi-sign-intersection-y::before { content: "\f859"; }
.bi-sign-intersection::before { content: "\f85a"; }
.bi-sign-merge-left-fill::before { content: "\f85b"; }
.bi-sign-merge-left::before { content: "\f85c"; }
.bi-sign-merge-right-fill::before { content: "\f85d"; }
.bi-sign-merge-right::before { content: "\f85e"; }
.bi-sign-no-left-turn-fill::before { content: "\f85f"; }
.bi-sign-no-left-turn::before { content: "\f860"; }
.bi-sign-no-parking-fill::before { content: "\f861"; }
.bi-sign-no-parking::before { content: "\f862"; }
.bi-sign-no-right-turn-fill::before { content: "\f863"; }
.bi-sign-no-right-turn::before { content: "\f864"; }
.bi-sign-railroad-fill::before { content: "\f865"; }
.bi-sign-railroad::before { content: "\f866"; }
.bi-building-add::before { content: "\f867"; }
.bi-building-check::before { content: "\f868"; }
.bi-building-dash::before { content: "\f869"; }
.bi-building-down::before { content: "\f86a"; }
.bi-building-exclamation::before { content: "\f86b"; }
.bi-building-fill-add::before { content: "\f86c"; }
.bi-building-fill-check::before { content: "\f86d"; }
.bi-building-fill-dash::before { content: "\f86e"; }
.bi-building-fill-down::before { content: "\f86f"; }
.bi-building-fill-exclamation::before { content: "\f870"; }
.bi-building-fill-gear::before { content: "\f871"; }
.bi-building-fill-lock::before { content: "\f872"; }
.bi-building-fill-slash::before { content: "\f873"; }
.bi-building-fill-up::before { content: "\f874"; }
.bi-building-fill-x::before { content: "\f875"; }
.bi-building-fill::before { content: "\f876"; }
.bi-building-gear::before { content: "\f877"; }
.bi-building-lock::before { content: "\f878"; }
.bi-building-slash::before { content: "\f879"; }
.bi-building-up::before { content: "\f87a"; }
.bi-building-x::before { content: "\f87b"; }
.bi-buildings-fill::before { content: "\f87c"; }
.bi-buildings::before { content: "\f87d"; }
.bi-bus-front-fill::before { content: "\f87e"; }
.bi-bus-front::before { content: "\f87f"; }
.bi-ev-front-fill::before { content: "\f880"; }
.bi-ev-front::before { content: "\f881"; }
.bi-globe-americas::before { content: "\f882"; }
.bi-globe-asia-australia::before { content: "\f883"; }
.bi-globe-central-south-asia::before { content: "\f884"; }
.bi-globe-europe-africa::before { content: "\f885"; }
.bi-house-add-fill::before { content: "\f886"; }
.bi-house-add::before { content: "\f887"; }
.bi-house-check-fill::before { content: "\f888"; }
.bi-house-check::before { content: "\f889"; }
.bi-house-dash-fill::before { content: "\f88a"; }
.bi-house-dash::before { content: "\f88b"; }
.bi-house-down-fill::before { content: "\f88c"; }
.bi-house-down::before { content: "\f88d"; }
.bi-house-exclamation-fill::before { content: "\f88e"; }
.bi-house-exclamation::before { content: "\f88f"; }
.bi-house-gear-fill::before { content: "\f890"; }
.bi-house-gear::before { content: "\f891"; }
.bi-house-lock-fill::before { content: "\f892"; }
.bi-house-lock::before { content: "\f893"; }
.bi-house-slash-fill::before { content: "\f894"; }
.bi-house-slash::before { content: "\f895"; }
.bi-house-up-fill::before { content: "\f896"; }
.bi-house-up::before { content: "\f897"; }
.bi-house-x-fill::before { content: "\f898"; }
.bi-house-x::before { content: "\f899"; }
.bi-person-add::before { content: "\f89a"; }
.bi-person-down::before { content: "\f89b"; }
.bi-person-exclamation::before { content: "\f89c"; }
.bi-person-fill-add::before { content: "\f89d"; }
.bi-person-fill-check::before { content: "\f89e"; }
.bi-person-fill-dash::before { content: "\f89f"; }
.bi-person-fill-down::before { content: "\f8a0"; }
.bi-person-fill-exclamation::before { content: "\f8a1"; }
.bi-person-fill-gear::before { content: "\f8a2"; }
.bi-person-fill-lock::before { content: "\f8a3"; }
.bi-person-fill-slash::before { content: "\f8a4"; }
.bi-person-fill-up::before { content: "\f8a5"; }
.bi-person-fill-x::before { content: "\f8a6"; }
.bi-person-gear::before { content: "\f8a7"; }
.bi-person-lock::before { content: "\f8a8"; }
.bi-person-slash::before { content: "\f8a9"; }
.bi-person-up::before { content: "\f8aa"; }
.bi-scooter::before { content: "\f8ab"; }
.bi-taxi-front-fill::before { content: "\f8ac"; }
.bi-taxi-front::before { content: "\f8ad"; }
.bi-amd::before { content: "\f8ae"; }
.bi-database-add::before { content: "\f8af"; }
.bi-database-check::before { content: "\f8b0"; }
.bi-database-dash::before { content: "\f8b1"; }
.bi-database-down::before { content: "\f8b2"; }
.bi-database-exclamation::before { content: "\f8b3"; }
.bi-database-fill-add::before { content: "\f8b4"; }
.bi-database-fill-check::before { content: "\f8b5"; }
.bi-database-fill-dash::before { content: "\f8b6"; }
.bi-database-fill-down::before { content: "\f8b7"; }
.bi-database-fill-exclamation::before { content: "\f8b8"; }
.bi-database-fill-gear::before { content: "\f8b9"; }
.bi-database-fill-lock::before { content: "\f8ba"; }
.bi-database-fill-slash::before { content: "\f8bb"; }
.bi-database-fill-up::before { content: "\f8bc"; }
.bi-database-fill-x::before { content: "\f8bd"; }
.bi-database-fill::before { content: "\f8be"; }
.bi-database-gear::before { content: "\f8bf"; }
.bi-database-lock::before { content: "\f8c0"; }
.bi-database-slash::before { content: "\f8c1"; }
.bi-database-up::before { content: "\f8c2"; }
.bi-database-x::before { content: "\f8c3"; }
.bi-database::before { content: "\f8c4"; }
.bi-houses-fill::before { content: "\f8c5"; }
.bi-houses::before { content: "\f8c6"; }
.bi-nvidia::before { content: "\f8c7"; }
.bi-person-vcard-fill::before { content: "\f8c8"; }
.bi-person-vcard::before { content: "\f8c9"; }
.bi-sina-weibo::before { content: "\f8ca"; }
.bi-tencent-qq::before { content: "\f8cb"; }
.bi-wikipedia::before { content: "\f8cc"; }
.bi-alphabet-uppercase::before { content: "\f2a5"; }
.bi-alphabet::before { content: "\f68a"; }
.bi-amazon::before { content: "\f68d"; }
.bi-arrows-collapse-vertical::before { content: "\f690"; }
.bi-arrows-expand-vertical::before { content: "\f695"; }
.bi-arrows-vertical::before { content: "\f698"; }
.bi-arrows::before { content: "\f6a2"; }
.bi-ban-fill::before { content: "\f6a3"; }
.bi-ban::before { content: "\f6b6"; }
.bi-bing::before { content: "\f6c2"; }
.bi-cake::before { content: "\f6e0"; }
.bi-cake2::before { content: "\f6ed"; }
.bi-cookie::before { content: "\f6ee"; }
.bi-copy::before { content: "\f759"; }
.bi-crosshair::before { content: "\f769"; }
.bi-crosshair2::before { content: "\f794"; }
.bi-emoji-astonished-fill::before { content: "\f795"; }
.bi-emoji-astonished::before { content: "\f79a"; }
.bi-emoji-grimace-fill::before { content: "\f79b"; }
.bi-emoji-grimace::before { content: "\f7a0"; }
.bi-emoji-grin-fill::before { content: "\f7a1"; }
.bi-emoji-grin::before { content: "\f7a6"; }
.bi-emoji-surprise-fill::before { content: "\f7a7"; }
.bi-emoji-surprise::before { content: "\f7ac"; }
.bi-emoji-tear-fill::before { content: "\f7ad"; }
.bi-emoji-tear::before { content: "\f7b2"; }
.bi-envelope-arrow-down-fill::before { content: "\f7b3"; }
.bi-envelope-arrow-down::before { content: "\f7b8"; }
.bi-envelope-arrow-up-fill::before { content: "\f7b9"; }
.bi-envelope-arrow-up::before { content: "\f7be"; }
.bi-feather::before { content: "\f7bf"; }
.bi-feather2::before { content: "\f7c4"; }
.bi-floppy-fill::before { content: "\f7c5"; }
.bi-floppy::before { content: "\f7d8"; }
.bi-floppy2-fill::before { content: "\f7d9"; }
.bi-floppy2::before { content: "\f7e4"; }
.bi-gitlab::before { content: "\f7e5"; }
.bi-highlighter::before { content: "\f7f8"; }
.bi-marker-tip::before { content: "\f802"; }
.bi-nvme-fill::before { content: "\f803"; }
.bi-nvme::before { content: "\f80c"; }
.bi-opencollective::before { content: "\f80d"; }
.bi-pci-card-network::before { content: "\f8cd"; }
.bi-pci-card-sound::before { content: "\f8ce"; }
.bi-radar::before { content: "\f8cf"; }
.bi-send-arrow-down-fill::before { content: "\f8d0"; }
.bi-send-arrow-down::before { content: "\f8d1"; }
.bi-send-arrow-up-fill::before { content: "\f8d2"; }
.bi-send-arrow-up::before { content: "\f8d3"; }
.bi-sim-slash-fill::before { content: "\f8d4"; }
.bi-sim-slash::before { content: "\f8d5"; }
.bi-sourceforge::before { content: "\f8d6"; }
.bi-substack::before { content: "\f8d7"; }
.bi-threads-fill::before { content: "\f8d8"; }
.bi-threads::before { content: "\f8d9"; }
.bi-transparency::before { content: "\f8da"; }
.bi-twitter-x::before { content: "\f8db"; }
.bi-type-h4::before { content: "\f8dc"; }
.bi-type-h5::before { content: "\f8dd"; }
.bi-type-h6::before { content: "\f8de"; }
.bi-backpack-fill::before { content: "\f8df"; }
.bi-backpack::before { content: "\f8e0"; }
.bi-backpack2-fill::before { content: "\f8e1"; }
.bi-backpack2::before { content: "\f8e2"; }
.bi-backpack3-fill::before { content: "\f8e3"; }
.bi-backpack3::before { content: "\f8e4"; }
.bi-backpack4-fill::before { content: "\f8e5"; }
.bi-backpack4::before { content: "\f8e6"; }
.bi-brilliance::before { content: "\f8e7"; }
.bi-cake-fill::before { content: "\f8e8"; }
.bi-cake2-fill::before { content: "\f8e9"; }
.bi-duffle-fill::before { content: "\f8ea"; }
.bi-duffle::before { content: "\f8eb"; }
.bi-exposure::before { content: "\f8ec"; }
.bi-gender-neuter::before { content: "\f8ed"; }
.bi-highlights::before { content: "\f8ee"; }
.bi-luggage-fill::before { content: "\f8ef"; }
.bi-luggage::before { content: "\f8f0"; }
.bi-mailbox-flag::before { content: "\f8f1"; }
.bi-mailbox2-flag::before { content: "\f8f2"; }
.bi-noise-reduction::before { content: "\f8f3"; }
.bi-passport-fill::before { content: "\f8f4"; }
.bi-passport::before { content: "\f8f5"; }
.bi-person-arms-up::before { content: "\f8f6"; }
.bi-person-raised-hand::before { content: "\f8f7"; }
.bi-person-standing-dress::before { content: "\f8f8"; }
.bi-person-standing::before { content: "\f8f9"; }
.bi-person-walking::before { content: "\f8fa"; }
.bi-person-wheelchair::before { content: "\f8fb"; }
.bi-shadows::before { content: "\f8fc"; }
.bi-suitcase-fill::before { content: "\f8fd"; }
.bi-suitcase-lg-fill::before { content: "\f8fe"; }
.bi-suitcase-lg::before { content: "\f8ff"; }
.bi-suitcase::before { content: "\f900"; }
.bi-suitcase2-fill::before { content: "\f901"; }
.bi-suitcase2::before { content: "\f902"; }
.bi-vignette::before { content: "\f903"; }


==================================================
FICHIER : static\css\bootstrap.min.css
==================================================
@charset "UTF-8";/*!
 * Bootstrap  v5.3.0 (https://getbootstrap.com/)
 * Copyright 2011-2023 The Bootstrap Authors
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
 */:root,[data-bs-theme=light]{--bs-blue:#0d6efd;--bs-indigo:#6610f2;--bs-purple:#6f42c1;--bs-pink:#d63384;--bs-red:#dc3545;--bs-orange:#fd7e14;--bs-yellow:#ffc107;--bs-green:#198754;--bs-teal:#20c997;--bs-cyan:#0dcaf0;--bs-black:#000;--bs-white:#fff;--bs-gray:#6c757d;--bs-gray-dark:#343a40;--bs-gray-100:#f8f9fa;--bs-gray-200:#e9ecef;--bs-gray-300:#dee2e6;--bs-gray-400:#ced4da;--bs-gray-500:#adb5bd;--bs-gray-600:#6c757d;--bs-gray-700:#495057;--bs-gray-800:#343a40;--bs-gray-900:#212529;--bs-primary:#0d6efd;--bs-secondary:#6c757d;--bs-success:#198754;--bs-info:#0dcaf0;--bs-warning:#ffc107;--bs-danger:#dc3545;--bs-light:#f8f9fa;--bs-dark:#212529;--bs-primary-rgb:13,110,253;--bs-secondary-rgb:108,117,125;--bs-success-rgb:25,135,84;--bs-info-rgb:13,202,240;--bs-warning-rgb:255,193,7;--bs-danger-rgb:220,53,69;--bs-light-rgb:248,249,250;--bs-dark-rgb:33,37,41;--bs-primary-text-emphasis:#052c65;--bs-secondary-text-emphasis:#2b2f32;--bs-success-text-emphasis:#0a3622;--bs-info-text-emphasis:#055160;--bs-warning-text-emphasis:#664d03;--bs-danger-text-emphasis:#58151c;--bs-light-text-emphasis:#495057;--bs-dark-text-emphasis:#495057;--bs-primary-bg-subtle:#cfe2ff;--bs-secondary-bg-subtle:#e2e3e5;--bs-success-bg-subtle:#d1e7dd;--bs-info-bg-subtle:#cff4fc;--bs-warning-bg-subtle:#fff3cd;--bs-danger-bg-subtle:#f8d7da;--bs-light-bg-subtle:#fcfcfd;--bs-dark-bg-subtle:#ced4da;--bs-primary-border-subtle:#9ec5fe;--bs-secondary-border-subtle:#c4c8cb;--bs-success-border-subtle:#a3cfbb;--bs-info-border-subtle:#9eeaf9;--bs-warning-border-subtle:#ffe69c;--bs-danger-border-subtle:#f1aeb5;--bs-light-border-subtle:#e9ecef;--bs-dark-border-subtle:#adb5bd;--bs-white-rgb:255,255,255;--bs-black-rgb:0,0,0;--bs-font-sans-serif:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue","Noto Sans","Liberation Sans",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--bs-font-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--bs-gradient:linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0));--bs-body-font-family:var(--bs-font-sans-serif);--bs-body-font-size:1rem;--bs-body-font-weight:400;--bs-body-line-height:1.5;--bs-body-color:#212529;--bs-body-color-rgb:33,37,41;--bs-body-bg:#fff;--bs-body-bg-rgb:255,255,255;--bs-emphasis-color:#000;--bs-emphasis-color-rgb:0,0,0;--bs-secondary-color:rgba(33, 37, 41, 0.75);--bs-secondary-color-rgb:33,37,41;--bs-secondary-bg:#e9ecef;--bs-secondary-bg-rgb:233,236,239;--bs-tertiary-color:rgba(33, 37, 41, 0.5);--bs-tertiary-color-rgb:33,37,41;--bs-tertiary-bg:#f8f9fa;--bs-tertiary-bg-rgb:248,249,250;--bs-heading-color:inherit;--bs-link-color:#0d6efd;--bs-link-color-rgb:13,110,253;--bs-link-decoration:underline;--bs-link-hover-color:#0a58ca;--bs-link-hover-color-rgb:10,88,202;--bs-code-color:#d63384;--bs-highlight-bg:#fff3cd;--bs-border-width:1px;--bs-border-style:solid;--bs-border-color:#dee2e6;--bs-border-color-translucent:rgba(0, 0, 0, 0.175);--bs-border-radius:0.375rem;--bs-border-radius-sm:0.25rem;--bs-border-radius-lg:0.5rem;--bs-border-radius-xl:1rem;--bs-border-radius-xxl:2rem;--bs-border-radius-2xl:var(--bs-border-radius-xxl);--bs-border-radius-pill:50rem;--bs-box-shadow:0 0.5rem 1rem rgba(0, 0, 0, 0.15);--bs-box-shadow-sm:0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);--bs-box-shadow-lg:0 1rem 3rem rgba(0, 0, 0, 0.175);--bs-box-shadow-inset:inset 0 1px 2px rgba(0, 0, 0, 0.075);--bs-focus-ring-width:0.25rem;--bs-focus-ring-opacity:0.25;--bs-focus-ring-color:rgba(13, 110, 253, 0.25);--bs-form-valid-color:#198754;--bs-form-valid-border-color:#198754;--bs-form-invalid-color:#dc3545;--bs-form-invalid-border-color:#dc3545}[data-bs-theme=dark]{color-scheme:dark;--bs-body-color:#adb5bd;--bs-body-color-rgb:173,181,189;--bs-body-bg:#212529;--bs-body-bg-rgb:33,37,41;--bs-emphasis-color:#fff;--bs-emphasis-color-rgb:255,255,255;--bs-secondary-color:rgba(173, 181, 189, 0.75);--bs-secondary-color-rgb:173,181,189;--bs-secondary-bg:#343a40;--bs-secondary-bg-rgb:52,58,64;--bs-tertiary-color:rgba(173, 181, 189, 0.5);--bs-tertiary-color-rgb:173,181,189;--bs-tertiary-bg:#2b3035;--bs-tertiary-bg-rgb:43,48,53;--bs-primary-text-emphasis:#6ea8fe;--bs-secondary-text-emphasis:#a7acb1;--bs-success-text-emphasis:#75b798;--bs-info-text-emphasis:#6edff6;--bs-warning-text-emphasis:#ffda6a;--bs-danger-text-emphasis:#ea868f;--bs-light-text-emphasis:#f8f9fa;--bs-dark-text-emphasis:#dee2e6;--bs-primary-bg-subtle:#031633;--bs-secondary-bg-subtle:#161719;--bs-success-bg-subtle:#051b11;--bs-info-bg-subtle:#032830;--bs-warning-bg-subtle:#332701;--bs-danger-bg-subtle:#2c0b0e;--bs-light-bg-subtle:#343a40;--bs-dark-bg-subtle:#1a1d20;--bs-primary-border-subtle:#084298;--bs-secondary-border-subtle:#41464b;--bs-success-border-subtle:#0f5132;--bs-info-border-subtle:#087990;--bs-warning-border-subtle:#997404;--bs-danger-border-subtle:#842029;--bs-light-border-subtle:#495057;--bs-dark-border-subtle:#343a40;--bs-heading-color:inherit;--bs-link-color:#6ea8fe;--bs-link-hover-color:#8bb9fe;--bs-link-color-rgb:110,168,254;--bs-link-hover-color-rgb:139,185,254;--bs-code-color:#e685b5;--bs-border-color:#495057;--bs-border-color-translucent:rgba(255, 255, 255, 0.15);--bs-form-valid-color:#75b798;--bs-form-valid-border-color:#75b798;--bs-form-invalid-color:#ea868f;--bs-form-invalid-border-color:#ea868f}*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:var(--bs-body-font-family);font-size:var(--bs-body-font-size);font-weight:var(--bs-body-font-weight);line-height:var(--bs-body-line-height);color:var(--bs-body-color);text-align:var(--bs-body-text-align);background-color:var(--bs-body-bg);-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;border:0;border-top:var(--bs-border-width) solid;opacity:.25}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2;color:var(--bs-heading-color)}.h1,h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){.h1,h1{font-size:2.5rem}}.h2,h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){.h2,h2{font-size:2rem}}.h3,h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){.h3,h3{font-size:1.75rem}}.h4,h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){.h4,h4{font-size:1.5rem}}.h5,h5{font-size:1.25rem}.h6,h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}.small,small{font-size:.875em}.mark,mark{padding:.1875em;background-color:var(--bs-highlight-bg)}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:rgba(var(--bs-link-color-rgb),var(--bs-link-opacity,1));text-decoration:underline}a:hover{--bs-link-color-rgb:var(--bs-link-hover-color-rgb)}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:var(--bs-font-monospace);font-size:1em}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:var(--bs-code-color);word-wrap:break-word}a>code{color:inherit}kbd{padding:.1875rem .375rem;font-size:.875em;color:var(--bs-body-bg);background-color:var(--bs-body-color);border-radius:.25rem}kbd kbd{padding:0;font-size:1em}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:var(--bs-secondary-color);text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]:not([type=date]):not([type=datetime-local]):not([type=month]):not([type=week]):not([type=time])::-webkit-calendar-picker-indicator{display:none!important}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}::file-selector-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:calc(1.625rem + 4.5vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-1{font-size:5rem}}.display-2{font-size:calc(1.575rem + 3.9vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-2{font-size:4.5rem}}.display-3{font-size:calc(1.525rem + 3.3vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-3{font-size:4rem}}.display-4{font-size:calc(1.475rem + 2.7vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-4{font-size:3.5rem}}.display-5{font-size:calc(1.425rem + 2.1vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-5{font-size:3rem}}.display-6{font-size:calc(1.375rem + 1.5vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-6{font-size:2.5rem}}.list-unstyled{padding-left:0;list-style:none}.list-inline{padding-left:0;list-style:none}.list-inline-item{display:inline-block}.list-inline-item:not(:last-child){margin-right:.5rem}.initialism{font-size:.875em;text-transform:uppercase}.blockquote{margin-bottom:1rem;font-size:1.25rem}.blockquote>:last-child{margin-bottom:0}.blockquote-footer{margin-top:-1rem;margin-bottom:1rem;font-size:.875em;color:#6c757d}.blockquote-footer::before{content:"‚Äî¬†"}.img-fluid{max-width:100%;height:auto}.img-thumbnail{padding:.25rem;background-color:var(--bs-body-bg);border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius);max-width:100%;height:auto}.figure{display:inline-block}.figure-img{margin-bottom:.5rem;line-height:1}.figure-caption{font-size:.875em;color:var(--bs-secondary-color)}.container,.container-fluid,.container-lg,.container-md,.container-sm,.container-xl,.container-xxl{--bs-gutter-x:1.5rem;--bs-gutter-y:0;width:100%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-right:auto;margin-left:auto}@media (min-width:576px){.container,.container-sm{max-width:540px}}@media (min-width:768px){.container,.container-md,.container-sm{max-width:720px}}@media (min-width:992px){.container,.container-lg,.container-md,.container-sm{max-width:960px}}@media (min-width:1200px){.container,.container-lg,.container-md,.container-sm,.container-xl{max-width:1140px}}@media (min-width:1400px){.container,.container-lg,.container-md,.container-sm,.container-xl,.container-xxl{max-width:1320px}}:root{--bs-breakpoint-xs:0;--bs-breakpoint-sm:576px;--bs-breakpoint-md:768px;--bs-breakpoint-lg:992px;--bs-breakpoint-xl:1200px;--bs-breakpoint-xxl:1400px}.row{--bs-gutter-x:1.5rem;--bs-gutter-y:0;display:flex;flex-wrap:wrap;margin-top:calc(-1 * var(--bs-gutter-y));margin-right:calc(-.5 * var(--bs-gutter-x));margin-left:calc(-.5 * var(--bs-gutter-x))}.row>*{flex-shrink:0;width:100%;max-width:100%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-top:var(--bs-gutter-y)}.col{flex:1 0 0%}.row-cols-auto>*{flex:0 0 auto;width:auto}.row-cols-1>*{flex:0 0 auto;width:100%}.row-cols-2>*{flex:0 0 auto;width:50%}.row-cols-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-4>*{flex:0 0 auto;width:25%}.row-cols-5>*{flex:0 0 auto;width:20%}.row-cols-6>*{flex:0 0 auto;width:16.6666666667%}.col-auto{flex:0 0 auto;width:auto}.col-1{flex:0 0 auto;width:8.33333333%}.col-2{flex:0 0 auto;width:16.66666667%}.col-3{flex:0 0 auto;width:25%}.col-4{flex:0 0 auto;width:33.33333333%}.col-5{flex:0 0 auto;width:41.66666667%}.col-6{flex:0 0 auto;width:50%}.col-7{flex:0 0 auto;width:58.33333333%}.col-8{flex:0 0 auto;width:66.66666667%}.col-9{flex:0 0 auto;width:75%}.col-10{flex:0 0 auto;width:83.33333333%}.col-11{flex:0 0 auto;width:91.66666667%}.col-12{flex:0 0 auto;width:100%}.offset-1{margin-left:8.33333333%}.offset-2{margin-left:16.66666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.33333333%}.offset-5{margin-left:41.66666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.33333333%}.offset-8{margin-left:66.66666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.33333333%}.offset-11{margin-left:91.66666667%}.g-0,.gx-0{--bs-gutter-x:0}.g-0,.gy-0{--bs-gutter-y:0}.g-1,.gx-1{--bs-gutter-x:0.25rem}.g-1,.gy-1{--bs-gutter-y:0.25rem}.g-2,.gx-2{--bs-gutter-x:0.5rem}.g-2,.gy-2{--bs-gutter-y:0.5rem}.g-3,.gx-3{--bs-gutter-x:1rem}.g-3,.gy-3{--bs-gutter-y:1rem}.g-4,.gx-4{--bs-gutter-x:1.5rem}.g-4,.gy-4{--bs-gutter-y:1.5rem}.g-5,.gx-5{--bs-gutter-x:3rem}.g-5,.gy-5{--bs-gutter-y:3rem}@media (min-width:576px){.col-sm{flex:1 0 0%}.row-cols-sm-auto>*{flex:0 0 auto;width:auto}.row-cols-sm-1>*{flex:0 0 auto;width:100%}.row-cols-sm-2>*{flex:0 0 auto;width:50%}.row-cols-sm-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-sm-4>*{flex:0 0 auto;width:25%}.row-cols-sm-5>*{flex:0 0 auto;width:20%}.row-cols-sm-6>*{flex:0 0 auto;width:16.6666666667%}.col-sm-auto{flex:0 0 auto;width:auto}.col-sm-1{flex:0 0 auto;width:8.33333333%}.col-sm-2{flex:0 0 auto;width:16.66666667%}.col-sm-3{flex:0 0 auto;width:25%}.col-sm-4{flex:0 0 auto;width:33.33333333%}.col-sm-5{flex:0 0 auto;width:41.66666667%}.col-sm-6{flex:0 0 auto;width:50%}.col-sm-7{flex:0 0 auto;width:58.33333333%}.col-sm-8{flex:0 0 auto;width:66.66666667%}.col-sm-9{flex:0 0 auto;width:75%}.col-sm-10{flex:0 0 auto;width:83.33333333%}.col-sm-11{flex:0 0 auto;width:91.66666667%}.col-sm-12{flex:0 0 auto;width:100%}.offset-sm-0{margin-left:0}.offset-sm-1{margin-left:8.33333333%}.offset-sm-2{margin-left:16.66666667%}.offset-sm-3{margin-left:25%}.offset-sm-4{margin-left:33.33333333%}.offset-sm-5{margin-left:41.66666667%}.offset-sm-6{margin-left:50%}.offset-sm-7{margin-left:58.33333333%}.offset-sm-8{margin-left:66.66666667%}.offset-sm-9{margin-left:75%}.offset-sm-10{margin-left:83.33333333%}.offset-sm-11{margin-left:91.66666667%}.g-sm-0,.gx-sm-0{--bs-gutter-x:0}.g-sm-0,.gy-sm-0{--bs-gutter-y:0}.g-sm-1,.gx-sm-1{--bs-gutter-x:0.25rem}.g-sm-1,.gy-sm-1{--bs-gutter-y:0.25rem}.g-sm-2,.gx-sm-2{--bs-gutter-x:0.5rem}.g-sm-2,.gy-sm-2{--bs-gutter-y:0.5rem}.g-sm-3,.gx-sm-3{--bs-gutter-x:1rem}.g-sm-3,.gy-sm-3{--bs-gutter-y:1rem}.g-sm-4,.gx-sm-4{--bs-gutter-x:1.5rem}.g-sm-4,.gy-sm-4{--bs-gutter-y:1.5rem}.g-sm-5,.gx-sm-5{--bs-gutter-x:3rem}.g-sm-5,.gy-sm-5{--bs-gutter-y:3rem}}@media (min-width:768px){.col-md{flex:1 0 0%}.row-cols-md-auto>*{flex:0 0 auto;width:auto}.row-cols-md-1>*{flex:0 0 auto;width:100%}.row-cols-md-2>*{flex:0 0 auto;width:50%}.row-cols-md-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-md-4>*{flex:0 0 auto;width:25%}.row-cols-md-5>*{flex:0 0 auto;width:20%}.row-cols-md-6>*{flex:0 0 auto;width:16.6666666667%}.col-md-auto{flex:0 0 auto;width:auto}.col-md-1{flex:0 0 auto;width:8.33333333%}.col-md-2{flex:0 0 auto;width:16.66666667%}.col-md-3{flex:0 0 auto;width:25%}.col-md-4{flex:0 0 auto;width:33.33333333%}.col-md-5{flex:0 0 auto;width:41.66666667%}.col-md-6{flex:0 0 auto;width:50%}.col-md-7{flex:0 0 auto;width:58.33333333%}.col-md-8{flex:0 0 auto;width:66.66666667%}.col-md-9{flex:0 0 auto;width:75%}.col-md-10{flex:0 0 auto;width:83.33333333%}.col-md-11{flex:0 0 auto;width:91.66666667%}.col-md-12{flex:0 0 auto;width:100%}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.33333333%}.offset-md-2{margin-left:16.66666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.33333333%}.offset-md-5{margin-left:41.66666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.33333333%}.offset-md-8{margin-left:66.66666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.33333333%}.offset-md-11{margin-left:91.66666667%}.g-md-0,.gx-md-0{--bs-gutter-x:0}.g-md-0,.gy-md-0{--bs-gutter-y:0}.g-md-1,.gx-md-1{--bs-gutter-x:0.25rem}.g-md-1,.gy-md-1{--bs-gutter-y:0.25rem}.g-md-2,.gx-md-2{--bs-gutter-x:0.5rem}.g-md-2,.gy-md-2{--bs-gutter-y:0.5rem}.g-md-3,.gx-md-3{--bs-gutter-x:1rem}.g-md-3,.gy-md-3{--bs-gutter-y:1rem}.g-md-4,.gx-md-4{--bs-gutter-x:1.5rem}.g-md-4,.gy-md-4{--bs-gutter-y:1.5rem}.g-md-5,.gx-md-5{--bs-gutter-x:3rem}.g-md-5,.gy-md-5{--bs-gutter-y:3rem}}@media (min-width:992px){.col-lg{flex:1 0 0%}.row-cols-lg-auto>*{flex:0 0 auto;width:auto}.row-cols-lg-1>*{flex:0 0 auto;width:100%}.row-cols-lg-2>*{flex:0 0 auto;width:50%}.row-cols-lg-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-lg-4>*{flex:0 0 auto;width:25%}.row-cols-lg-5>*{flex:0 0 auto;width:20%}.row-cols-lg-6>*{flex:0 0 auto;width:16.6666666667%}.col-lg-auto{flex:0 0 auto;width:auto}.col-lg-1{flex:0 0 auto;width:8.33333333%}.col-lg-2{flex:0 0 auto;width:16.66666667%}.col-lg-3{flex:0 0 auto;width:25%}.col-lg-4{flex:0 0 auto;width:33.33333333%}.col-lg-5{flex:0 0 auto;width:41.66666667%}.col-lg-6{flex:0 0 auto;width:50%}.col-lg-7{flex:0 0 auto;width:58.33333333%}.col-lg-8{flex:0 0 auto;width:66.66666667%}.col-lg-9{flex:0 0 auto;width:75%}.col-lg-10{flex:0 0 auto;width:83.33333333%}.col-lg-11{flex:0 0 auto;width:91.66666667%}.col-lg-12{flex:0 0 auto;width:100%}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.33333333%}.offset-lg-2{margin-left:16.66666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.33333333%}.offset-lg-5{margin-left:41.66666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.33333333%}.offset-lg-8{margin-left:66.66666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.33333333%}.offset-lg-11{margin-left:91.66666667%}.g-lg-0,.gx-lg-0{--bs-gutter-x:0}.g-lg-0,.gy-lg-0{--bs-gutter-y:0}.g-lg-1,.gx-lg-1{--bs-gutter-x:0.25rem}.g-lg-1,.gy-lg-1{--bs-gutter-y:0.25rem}.g-lg-2,.gx-lg-2{--bs-gutter-x:0.5rem}.g-lg-2,.gy-lg-2{--bs-gutter-y:0.5rem}.g-lg-3,.gx-lg-3{--bs-gutter-x:1rem}.g-lg-3,.gy-lg-3{--bs-gutter-y:1rem}.g-lg-4,.gx-lg-4{--bs-gutter-x:1.5rem}.g-lg-4,.gy-lg-4{--bs-gutter-y:1.5rem}.g-lg-5,.gx-lg-5{--bs-gutter-x:3rem}.g-lg-5,.gy-lg-5{--bs-gutter-y:3rem}}@media (min-width:1200px){.col-xl{flex:1 0 0%}.row-cols-xl-auto>*{flex:0 0 auto;width:auto}.row-cols-xl-1>*{flex:0 0 auto;width:100%}.row-cols-xl-2>*{flex:0 0 auto;width:50%}.row-cols-xl-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-xl-4>*{flex:0 0 auto;width:25%}.row-cols-xl-5>*{flex:0 0 auto;width:20%}.row-cols-xl-6>*{flex:0 0 auto;width:16.6666666667%}.col-xl-auto{flex:0 0 auto;width:auto}.col-xl-1{flex:0 0 auto;width:8.33333333%}.col-xl-2{flex:0 0 auto;width:16.66666667%}.col-xl-3{flex:0 0 auto;width:25%}.col-xl-4{flex:0 0 auto;width:33.33333333%}.col-xl-5{flex:0 0 auto;width:41.66666667%}.col-xl-6{flex:0 0 auto;width:50%}.col-xl-7{flex:0 0 auto;width:58.33333333%}.col-xl-8{flex:0 0 auto;width:66.66666667%}.col-xl-9{flex:0 0 auto;width:75%}.col-xl-10{flex:0 0 auto;width:83.33333333%}.col-xl-11{flex:0 0 auto;width:91.66666667%}.col-xl-12{flex:0 0 auto;width:100%}.offset-xl-0{margin-left:0}.offset-xl-1{margin-left:8.33333333%}.offset-xl-2{margin-left:16.66666667%}.offset-xl-3{margin-left:25%}.offset-xl-4{margin-left:33.33333333%}.offset-xl-5{margin-left:41.66666667%}.offset-xl-6{margin-left:50%}.offset-xl-7{margin-left:58.33333333%}.offset-xl-8{margin-left:66.66666667%}.offset-xl-9{margin-left:75%}.offset-xl-10{margin-left:83.33333333%}.offset-xl-11{margin-left:91.66666667%}.g-xl-0,.gx-xl-0{--bs-gutter-x:0}.g-xl-0,.gy-xl-0{--bs-gutter-y:0}.g-xl-1,.gx-xl-1{--bs-gutter-x:0.25rem}.g-xl-1,.gy-xl-1{--bs-gutter-y:0.25rem}.g-xl-2,.gx-xl-2{--bs-gutter-x:0.5rem}.g-xl-2,.gy-xl-2{--bs-gutter-y:0.5rem}.g-xl-3,.gx-xl-3{--bs-gutter-x:1rem}.g-xl-3,.gy-xl-3{--bs-gutter-y:1rem}.g-xl-4,.gx-xl-4{--bs-gutter-x:1.5rem}.g-xl-4,.gy-xl-4{--bs-gutter-y:1.5rem}.g-xl-5,.gx-xl-5{--bs-gutter-x:3rem}.g-xl-5,.gy-xl-5{--bs-gutter-y:3rem}}@media (min-width:1400px){.col-xxl{flex:1 0 0%}.row-cols-xxl-auto>*{flex:0 0 auto;width:auto}.row-cols-xxl-1>*{flex:0 0 auto;width:100%}.row-cols-xxl-2>*{flex:0 0 auto;width:50%}.row-cols-xxl-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-xxl-4>*{flex:0 0 auto;width:25%}.row-cols-xxl-5>*{flex:0 0 auto;width:20%}.row-cols-xxl-6>*{flex:0 0 auto;width:16.6666666667%}.col-xxl-auto{flex:0 0 auto;width:auto}.col-xxl-1{flex:0 0 auto;width:8.33333333%}.col-xxl-2{flex:0 0 auto;width:16.66666667%}.col-xxl-3{flex:0 0 auto;width:25%}.col-xxl-4{flex:0 0 auto;width:33.33333333%}.col-xxl-5{flex:0 0 auto;width:41.66666667%}.col-xxl-6{flex:0 0 auto;width:50%}.col-xxl-7{flex:0 0 auto;width:58.33333333%}.col-xxl-8{flex:0 0 auto;width:66.66666667%}.col-xxl-9{flex:0 0 auto;width:75%}.col-xxl-10{flex:0 0 auto;width:83.33333333%}.col-xxl-11{flex:0 0 auto;width:91.66666667%}.col-xxl-12{flex:0 0 auto;width:100%}.offset-xxl-0{margin-left:0}.offset-xxl-1{margin-left:8.33333333%}.offset-xxl-2{margin-left:16.66666667%}.offset-xxl-3{margin-left:25%}.offset-xxl-4{margin-left:33.33333333%}.offset-xxl-5{margin-left:41.66666667%}.offset-xxl-6{margin-left:50%}.offset-xxl-7{margin-left:58.33333333%}.offset-xxl-8{margin-left:66.66666667%}.offset-xxl-9{margin-left:75%}.offset-xxl-10{margin-left:83.33333333%}.offset-xxl-11{margin-left:91.66666667%}.g-xxl-0,.gx-xxl-0{--bs-gutter-x:0}.g-xxl-0,.gy-xxl-0{--bs-gutter-y:0}.g-xxl-1,.gx-xxl-1{--bs-gutter-x:0.25rem}.g-xxl-1,.gy-xxl-1{--bs-gutter-y:0.25rem}.g-xxl-2,.gx-xxl-2{--bs-gutter-x:0.5rem}.g-xxl-2,.gy-xxl-2{--bs-gutter-y:0.5rem}.g-xxl-3,.gx-xxl-3{--bs-gutter-x:1rem}.g-xxl-3,.gy-xxl-3{--bs-gutter-y:1rem}.g-xxl-4,.gx-xxl-4{--bs-gutter-x:1.5rem}.g-xxl-4,.gy-xxl-4{--bs-gutter-y:1.5rem}.g-xxl-5,.gx-xxl-5{--bs-gutter-x:3rem}.g-xxl-5,.gy-xxl-5{--bs-gutter-y:3rem}}.table{--bs-table-color-type:initial;--bs-table-bg-type:initial;--bs-table-color-state:initial;--bs-table-bg-state:initial;--bs-table-color:var(--bs-body-color);--bs-table-bg:var(--bs-body-bg);--bs-table-border-color:var(--bs-border-color);--bs-table-accent-bg:transparent;--bs-table-striped-color:var(--bs-body-color);--bs-table-striped-bg:rgba(0, 0, 0, 0.05);--bs-table-active-color:var(--bs-body-color);--bs-table-active-bg:rgba(0, 0, 0, 0.1);--bs-table-hover-color:var(--bs-body-color);--bs-table-hover-bg:rgba(0, 0, 0, 0.075);width:100%;margin-bottom:1rem;vertical-align:top;border-color:var(--bs-table-border-color)}.table>:not(caption)>*>*{padding:.5rem .5rem;color:var(--bs-table-color-state,var(--bs-table-color-type,var(--bs-table-color)));background-color:var(--bs-table-bg);border-bottom-width:var(--bs-border-width);box-shadow:inset 0 0 0 9999px var(--bs-table-bg-state,var(--bs-table-bg-type,var(--bs-table-accent-bg)))}.table>tbody{vertical-align:inherit}.table>thead{vertical-align:bottom}.table-group-divider{border-top:calc(var(--bs-border-width) * 2) solid currentcolor}.caption-top{caption-side:top}.table-sm>:not(caption)>*>*{padding:.25rem .25rem}.table-bordered>:not(caption)>*{border-width:var(--bs-border-width) 0}.table-bordered>:not(caption)>*>*{border-width:0 var(--bs-border-width)}.table-borderless>:not(caption)>*>*{border-bottom-width:0}.table-borderless>:not(:first-child){border-top-width:0}.table-striped>tbody>tr:nth-of-type(odd)>*{--bs-table-color-type:var(--bs-table-striped-color);--bs-table-bg-type:var(--bs-table-striped-bg)}.table-striped-columns>:not(caption)>tr>:nth-child(2n){--bs-table-color-type:var(--bs-table-striped-color);--bs-table-bg-type:var(--bs-table-striped-bg)}.table-active{--bs-table-color-state:var(--bs-table-active-color);--bs-table-bg-state:var(--bs-table-active-bg)}.table-hover>tbody>tr:hover>*{--bs-table-color-state:var(--bs-table-hover-color);--bs-table-bg-state:var(--bs-table-hover-bg)}.table-primary{--bs-table-color:#000;--bs-table-bg:#cfe2ff;--bs-table-border-color:#bacbe6;--bs-table-striped-bg:#c5d7f2;--bs-table-striped-color:#000;--bs-table-active-bg:#bacbe6;--bs-table-active-color:#000;--bs-table-hover-bg:#bfd1ec;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-secondary{--bs-table-color:#000;--bs-table-bg:#e2e3e5;--bs-table-border-color:#cbccce;--bs-table-striped-bg:#d7d8da;--bs-table-striped-color:#000;--bs-table-active-bg:#cbccce;--bs-table-active-color:#000;--bs-table-hover-bg:#d1d2d4;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-success{--bs-table-color:#000;--bs-table-bg:#d1e7dd;--bs-table-border-color:#bcd0c7;--bs-table-striped-bg:#c7dbd2;--bs-table-striped-color:#000;--bs-table-active-bg:#bcd0c7;--bs-table-active-color:#000;--bs-table-hover-bg:#c1d6cc;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-info{--bs-table-color:#000;--bs-table-bg:#cff4fc;--bs-table-border-color:#badce3;--bs-table-striped-bg:#c5e8ef;--bs-table-striped-color:#000;--bs-table-active-bg:#badce3;--bs-table-active-color:#000;--bs-table-hover-bg:#bfe2e9;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-warning{--bs-table-color:#000;--bs-table-bg:#fff3cd;--bs-table-border-color:#e6dbb9;--bs-table-striped-bg:#f2e7c3;--bs-table-striped-color:#000;--bs-table-active-bg:#e6dbb9;--bs-table-active-color:#000;--bs-table-hover-bg:#ece1be;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-danger{--bs-table-color:#000;--bs-table-bg:#f8d7da;--bs-table-border-color:#dfc2c4;--bs-table-striped-bg:#eccccf;--bs-table-striped-color:#000;--bs-table-active-bg:#dfc2c4;--bs-table-active-color:#000;--bs-table-hover-bg:#e5c7ca;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-light{--bs-table-color:#000;--bs-table-bg:#f8f9fa;--bs-table-border-color:#dfe0e1;--bs-table-striped-bg:#ecedee;--bs-table-striped-color:#000;--bs-table-active-bg:#dfe0e1;--bs-table-active-color:#000;--bs-table-hover-bg:#e5e6e7;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-dark{--bs-table-color:#fff;--bs-table-bg:#212529;--bs-table-border-color:#373b3e;--bs-table-striped-bg:#2c3034;--bs-table-striped-color:#fff;--bs-table-active-bg:#373b3e;--bs-table-active-color:#fff;--bs-table-hover-bg:#323539;--bs-table-hover-color:#fff;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-responsive{overflow-x:auto;-webkit-overflow-scrolling:touch}@media (max-width:575.98px){.table-responsive-sm{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:767.98px){.table-responsive-md{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:991.98px){.table-responsive-lg{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:1199.98px){.table-responsive-xl{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:1399.98px){.table-responsive-xxl{overflow-x:auto;-webkit-overflow-scrolling:touch}}.form-label{margin-bottom:.5rem}.col-form-label{padding-top:calc(.375rem + var(--bs-border-width));padding-bottom:calc(.375rem + var(--bs-border-width));margin-bottom:0;font-size:inherit;line-height:1.5}.col-form-label-lg{padding-top:calc(.5rem + var(--bs-border-width));padding-bottom:calc(.5rem + var(--bs-border-width));font-size:1.25rem}.col-form-label-sm{padding-top:calc(.25rem + var(--bs-border-width));padding-bottom:calc(.25rem + var(--bs-border-width));font-size:.875rem}.form-text{margin-top:.25rem;font-size:.875em;color:var(--bs-secondary-color)}.form-control{display:block;width:100%;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);background-color:var(--bs-body-bg);background-clip:padding-box;border:var(--bs-border-width) solid var(--bs-border-color);-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--bs-border-radius);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-control{transition:none}}.form-control[type=file]{overflow:hidden}.form-control[type=file]:not(:disabled):not([readonly]){cursor:pointer}.form-control:focus{color:var(--bs-body-color);background-color:var(--bs-body-bg);border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-control::-webkit-date-and-time-value{min-width:85px;height:1.5em;margin:0}.form-control::-webkit-datetime-edit{display:block;padding:0}.form-control::-moz-placeholder{color:var(--bs-secondary-color);opacity:1}.form-control::placeholder{color:var(--bs-secondary-color);opacity:1}.form-control:disabled{background-color:var(--bs-secondary-bg);opacity:1}.form-control::-webkit-file-upload-button{padding:.375rem .75rem;margin:-.375rem -.75rem;-webkit-margin-end:.75rem;margin-inline-end:.75rem;color:var(--bs-body-color);background-color:var(--bs-tertiary-bg);pointer-events:none;border-color:inherit;border-style:solid;border-width:0;border-inline-end-width:var(--bs-border-width);border-radius:0;-webkit-transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control::file-selector-button{padding:.375rem .75rem;margin:-.375rem -.75rem;-webkit-margin-end:.75rem;margin-inline-end:.75rem;color:var(--bs-body-color);background-color:var(--bs-tertiary-bg);pointer-events:none;border-color:inherit;border-style:solid;border-width:0;border-inline-end-width:var(--bs-border-width);border-radius:0;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-control::-webkit-file-upload-button{-webkit-transition:none;transition:none}.form-control::file-selector-button{transition:none}}.form-control:hover:not(:disabled):not([readonly])::-webkit-file-upload-button{background-color:var(--bs-secondary-bg)}.form-control:hover:not(:disabled):not([readonly])::file-selector-button{background-color:var(--bs-secondary-bg)}.form-control-plaintext{display:block;width:100%;padding:.375rem 0;margin-bottom:0;line-height:1.5;color:var(--bs-body-color);background-color:transparent;border:solid transparent;border-width:var(--bs-border-width) 0}.form-control-plaintext:focus{outline:0}.form-control-plaintext.form-control-lg,.form-control-plaintext.form-control-sm{padding-right:0;padding-left:0}.form-control-sm{min-height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2));padding:.25rem .5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.form-control-sm::-webkit-file-upload-button{padding:.25rem .5rem;margin:-.25rem -.5rem;-webkit-margin-end:.5rem;margin-inline-end:.5rem}.form-control-sm::file-selector-button{padding:.25rem .5rem;margin:-.25rem -.5rem;-webkit-margin-end:.5rem;margin-inline-end:.5rem}.form-control-lg{min-height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2));padding:.5rem 1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}.form-control-lg::-webkit-file-upload-button{padding:.5rem 1rem;margin:-.5rem -1rem;-webkit-margin-end:1rem;margin-inline-end:1rem}.form-control-lg::file-selector-button{padding:.5rem 1rem;margin:-.5rem -1rem;-webkit-margin-end:1rem;margin-inline-end:1rem}textarea.form-control{min-height:calc(1.5em + .75rem + calc(var(--bs-border-width) * 2))}textarea.form-control-sm{min-height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2))}textarea.form-control-lg{min-height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2))}.form-control-color{width:3rem;height:calc(1.5em + .75rem + calc(var(--bs-border-width) * 2));padding:.375rem}.form-control-color:not(:disabled):not([readonly]){cursor:pointer}.form-control-color::-moz-color-swatch{border:0!important;border-radius:var(--bs-border-radius)}.form-control-color::-webkit-color-swatch{border:0!important;border-radius:var(--bs-border-radius)}.form-control-color.form-control-sm{height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2))}.form-control-color.form-control-lg{height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2))}.form-select{--bs-form-select-bg-img:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e");display:block;width:100%;padding:.375rem 2.25rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);background-color:var(--bs-body-bg);background-image:var(--bs-form-select-bg-img),var(--bs-form-select-bg-icon,none);background-repeat:no-repeat;background-position:right .75rem center;background-size:16px 12px;border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;-moz-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.form-select{transition:none}}.form-select:focus{border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-select[multiple],.form-select[size]:not([size="1"]){padding-right:.75rem;background-image:none}.form-select:disabled{background-color:var(--bs-secondary-bg)}.form-select:-moz-focusring{color:transparent;text-shadow:0 0 0 var(--bs-body-color)}.form-select-sm{padding-top:.25rem;padding-bottom:.25rem;padding-left:.5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.form-select-lg{padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}[data-bs-theme=dark] .form-select{--bs-form-select-bg-img:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23adb5bd' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e")}.form-check{display:block;min-height:1.5rem;padding-left:1.5em;margin-bottom:.125rem}.form-check .form-check-input{float:left;margin-left:-1.5em}.form-check-reverse{padding-right:1.5em;padding-left:0;text-align:right}.form-check-reverse .form-check-input{float:right;margin-right:-1.5em;margin-left:0}.form-check-input{--bs-form-check-bg:var(--bs-body-bg);width:1em;height:1em;margin-top:.25em;vertical-align:top;background-color:var(--bs-form-check-bg);background-image:var(--bs-form-check-bg-image);background-repeat:no-repeat;background-position:center;background-size:contain;border:var(--bs-border-width) solid var(--bs-border-color);-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-print-color-adjust:exact;color-adjust:exact;print-color-adjust:exact}.form-check-input[type=checkbox]{border-radius:.25em}.form-check-input[type=radio]{border-radius:50%}.form-check-input:active{filter:brightness(90%)}.form-check-input:focus{border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-check-input:checked{background-color:#0d6efd;border-color:#0d6efd}.form-check-input:checked[type=checkbox]{--bs-form-check-bg-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='m6 10 3 3 6-6'/%3e%3c/svg%3e")}.form-check-input:checked[type=radio]{--bs-form-check-bg-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='2' fill='%23fff'/%3e%3c/svg%3e")}.form-check-input[type=checkbox]:indeterminate{background-color:#0d6efd;border-color:#0d6efd;--bs-form-check-bg-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 10h8'/%3e%3c/svg%3e")}.form-check-input:disabled{pointer-events:none;filter:none;opacity:.5}.form-check-input:disabled~.form-check-label,.form-check-input[disabled]~.form-check-label{cursor:default;opacity:.5}.form-switch{padding-left:2.5em}.form-switch .form-check-input{--bs-form-switch-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba%280, 0, 0, 0.25%29'/%3e%3c/svg%3e");width:2em;margin-left:-2.5em;background-image:var(--bs-form-switch-bg);background-position:left center;border-radius:2em;transition:background-position .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-switch .form-check-input{transition:none}}.form-switch .form-check-input:focus{--bs-form-switch-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%2386b7fe'/%3e%3c/svg%3e")}.form-switch .form-check-input:checked{background-position:right center;--bs-form-switch-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%23fff'/%3e%3c/svg%3e")}.form-switch.form-check-reverse{padding-right:2.5em;padding-left:0}.form-switch.form-check-reverse .form-check-input{margin-right:-2.5em;margin-left:0}.form-check-inline{display:inline-block;margin-right:1rem}.btn-check{position:absolute;clip:rect(0,0,0,0);pointer-events:none}.btn-check:disabled+.btn,.btn-check[disabled]+.btn{pointer-events:none;filter:none;opacity:.65}[data-bs-theme=dark] .form-switch .form-check-input:not(:checked):not(:focus){--bs-form-switch-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba%28255, 255, 255, 0.25%29'/%3e%3c/svg%3e")}.form-range{width:100%;height:1.5rem;padding:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none}.form-range:focus{outline:0}.form-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .25rem rgba(13,110,253,.25)}.form-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .25rem rgba(13,110,253,.25)}.form-range::-moz-focus-outer{border:0}.form-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-.25rem;background-color:#0d6efd;border:0;border-radius:1rem;-webkit-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.form-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.form-range::-webkit-slider-thumb:active{background-color:#b6d4fe}.form-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:var(--bs-tertiary-bg);border-color:transparent;border-radius:1rem}.form-range::-moz-range-thumb{width:1rem;height:1rem;background-color:#0d6efd;border:0;border-radius:1rem;-moz-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-moz-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.form-range::-moz-range-thumb{-moz-transition:none;transition:none}}.form-range::-moz-range-thumb:active{background-color:#b6d4fe}.form-range::-moz-range-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:var(--bs-tertiary-bg);border-color:transparent;border-radius:1rem}.form-range:disabled{pointer-events:none}.form-range:disabled::-webkit-slider-thumb{background-color:var(--bs-secondary-color)}.form-range:disabled::-moz-range-thumb{background-color:var(--bs-secondary-color)}.form-floating{position:relative}.form-floating>.form-control,.form-floating>.form-control-plaintext,.form-floating>.form-select{height:calc(3.5rem + calc(var(--bs-border-width) * 2));min-height:calc(3.5rem + calc(var(--bs-border-width) * 2));line-height:1.25}.form-floating>label{position:absolute;top:0;left:0;z-index:2;height:100%;padding:1rem .75rem;overflow:hidden;text-align:start;text-overflow:ellipsis;white-space:nowrap;pointer-events:none;border:var(--bs-border-width) solid transparent;transform-origin:0 0;transition:opacity .1s ease-in-out,transform .1s ease-in-out}@media (prefers-reduced-motion:reduce){.form-floating>label{transition:none}}.form-floating>.form-control,.form-floating>.form-control-plaintext{padding:1rem .75rem}.form-floating>.form-control-plaintext::-moz-placeholder,.form-floating>.form-control::-moz-placeholder{color:transparent}.form-floating>.form-control-plaintext::placeholder,.form-floating>.form-control::placeholder{color:transparent}.form-floating>.form-control-plaintext:not(:-moz-placeholder-shown),.form-floating>.form-control:not(:-moz-placeholder-shown){padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control-plaintext:focus,.form-floating>.form-control-plaintext:not(:placeholder-shown),.form-floating>.form-control:focus,.form-floating>.form-control:not(:placeholder-shown){padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control-plaintext:-webkit-autofill,.form-floating>.form-control:-webkit-autofill{padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-select{padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control:not(:-moz-placeholder-shown)~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control-plaintext~label,.form-floating>.form-control:focus~label,.form-floating>.form-control:not(:placeholder-shown)~label,.form-floating>.form-select~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control:not(:-moz-placeholder-shown)~label::after{position:absolute;inset:1rem 0.375rem;z-index:-1;height:1.5em;content:"";background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius)}.form-floating>.form-control-plaintext~label::after,.form-floating>.form-control:focus~label::after,.form-floating>.form-control:not(:placeholder-shown)~label::after,.form-floating>.form-select~label::after{position:absolute;inset:1rem 0.375rem;z-index:-1;height:1.5em;content:"";background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius)}.form-floating>.form-control:-webkit-autofill~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control-plaintext~label{border-width:var(--bs-border-width) 0}.form-floating>:disabled~label{color:#6c757d}.form-floating>:disabled~label::after{background-color:var(--bs-secondary-bg)}.input-group{position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.input-group>.form-control,.input-group>.form-floating,.input-group>.form-select{position:relative;flex:1 1 auto;width:1%;min-width:0}.input-group>.form-control:focus,.input-group>.form-floating:focus-within,.input-group>.form-select:focus{z-index:5}.input-group .btn{position:relative;z-index:2}.input-group .btn:focus{z-index:5}.input-group-text{display:flex;align-items:center;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);text-align:center;white-space:nowrap;background-color:var(--bs-tertiary-bg);border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius)}.input-group-lg>.btn,.input-group-lg>.form-control,.input-group-lg>.form-select,.input-group-lg>.input-group-text{padding:.5rem 1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}.input-group-sm>.btn,.input-group-sm>.form-control,.input-group-sm>.form-select,.input-group-sm>.input-group-text{padding:.25rem .5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.input-group-lg>.form-select,.input-group-sm>.form-select{padding-right:3rem}.input-group:not(.has-validation)>.dropdown-toggle:nth-last-child(n+3),.input-group:not(.has-validation)>.form-floating:not(:last-child)>.form-control,.input-group:not(.has-validation)>.form-floating:not(:last-child)>.form-select,.input-group:not(.has-validation)>:not(:last-child):not(.dropdown-toggle):not(.dropdown-menu):not(.form-floating){border-top-right-radius:0;border-bottom-right-radius:0}.input-group.has-validation>.dropdown-toggle:nth-last-child(n+4),.input-group.has-validation>.form-floating:nth-last-child(n+3)>.form-control,.input-group.has-validation>.form-floating:nth-last-child(n+3)>.form-select,.input-group.has-validation>:nth-last-child(n+3):not(.dropdown-toggle):not(.dropdown-menu):not(.form-floating){border-top-right-radius:0;border-bottom-right-radius:0}.input-group>:not(:first-child):not(.dropdown-menu):not(.valid-tooltip):not(.valid-feedback):not(.invalid-tooltip):not(.invalid-feedback){margin-left:calc(var(--bs-border-width) * -1);border-top-left-radius:0;border-bottom-left-radius:0}.input-group>.form-floating:not(:first-child)>.form-control,.input-group>.form-floating:not(:first-child)>.form-select{border-top-left-radius:0;border-bottom-left-radius:0}.valid-feedback{display:none;width:100%;margin-top:.25rem;font-size:.875em;color:var(--bs-form-valid-color)}.valid-tooltip{position:absolute;top:100%;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:.875rem;color:#fff;background-color:var(--bs-success);border-radius:var(--bs-border-radius)}.is-valid~.valid-feedback,.is-valid~.valid-tooltip,.was-validated :valid~.valid-feedback,.was-validated :valid~.valid-tooltip{display:block}.form-control.is-valid,.was-validated .form-control:valid{border-color:var(--bs-form-valid-border-color);padding-right:calc(1.5em + .75rem);background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-valid:focus,.was-validated .form-control:valid:focus{border-color:var(--bs-form-valid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.was-validated textarea.form-control:valid,textarea.form-control.is-valid{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.form-select.is-valid,.was-validated .form-select:valid{border-color:var(--bs-form-valid-border-color)}.form-select.is-valid:not([multiple]):not([size]),.form-select.is-valid:not([multiple])[size="1"],.was-validated .form-select:valid:not([multiple]):not([size]),.was-validated .form-select:valid:not([multiple])[size="1"]{--bs-form-select-bg-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");padding-right:4.125rem;background-position:right .75rem center,center right 2.25rem;background-size:16px 12px,calc(.75em + .375rem) calc(.75em + .375rem)}.form-select.is-valid:focus,.was-validated .form-select:valid:focus{border-color:var(--bs-form-valid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.form-control-color.is-valid,.was-validated .form-control-color:valid{width:calc(3rem + calc(1.5em + .75rem))}.form-check-input.is-valid,.was-validated .form-check-input:valid{border-color:var(--bs-form-valid-border-color)}.form-check-input.is-valid:checked,.was-validated .form-check-input:valid:checked{background-color:var(--bs-form-valid-color)}.form-check-input.is-valid:focus,.was-validated .form-check-input:valid:focus{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.form-check-input.is-valid~.form-check-label,.was-validated .form-check-input:valid~.form-check-label{color:var(--bs-form-valid-color)}.form-check-inline .form-check-input~.valid-feedback{margin-left:.5em}.input-group>.form-control:not(:focus).is-valid,.input-group>.form-floating:not(:focus-within).is-valid,.input-group>.form-select:not(:focus).is-valid,.was-validated .input-group>.form-control:not(:focus):valid,.was-validated .input-group>.form-floating:not(:focus-within):valid,.was-validated .input-group>.form-select:not(:focus):valid{z-index:3}.invalid-feedback{display:none;width:100%;margin-top:.25rem;font-size:.875em;color:var(--bs-form-invalid-color)}.invalid-tooltip{position:absolute;top:100%;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:.875rem;color:#fff;background-color:var(--bs-danger);border-radius:var(--bs-border-radius)}.is-invalid~.invalid-feedback,.is-invalid~.invalid-tooltip,.was-validated :invalid~.invalid-feedback,.was-validated :invalid~.invalid-tooltip{display:block}.form-control.is-invalid,.was-validated .form-control:invalid{border-color:var(--bs-form-invalid-border-color);padding-right:calc(1.5em + .75rem);background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-invalid:focus,.was-validated .form-control:invalid:focus{border-color:var(--bs-form-invalid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.was-validated textarea.form-control:invalid,textarea.form-control.is-invalid{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.form-select.is-invalid,.was-validated .form-select:invalid{border-color:var(--bs-form-invalid-border-color)}.form-select.is-invalid:not([multiple]):not([size]),.form-select.is-invalid:not([multiple])[size="1"],.was-validated .form-select:invalid:not([multiple]):not([size]),.was-validated .form-select:invalid:not([multiple])[size="1"]{--bs-form-select-bg-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");padding-right:4.125rem;background-position:right .75rem center,center right 2.25rem;background-size:16px 12px,calc(.75em + .375rem) calc(.75em + .375rem)}.form-select.is-invalid:focus,.was-validated .form-select:invalid:focus{border-color:var(--bs-form-invalid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.form-control-color.is-invalid,.was-validated .form-control-color:invalid{width:calc(3rem + calc(1.5em + .75rem))}.form-check-input.is-invalid,.was-validated .form-check-input:invalid{border-color:var(--bs-form-invalid-border-color)}.form-check-input.is-invalid:checked,.was-validated .form-check-input:invalid:checked{background-color:var(--bs-form-invalid-color)}.form-check-input.is-invalid:focus,.was-validated .form-check-input:invalid:focus{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.form-check-input.is-invalid~.form-check-label,.was-validated .form-check-input:invalid~.form-check-label{color:var(--bs-form-invalid-color)}.form-check-inline .form-check-input~.invalid-feedback{margin-left:.5em}.input-group>.form-control:not(:focus).is-invalid,.input-group>.form-floating:not(:focus-within).is-invalid,.input-group>.form-select:not(:focus).is-invalid,.was-validated .input-group>.form-control:not(:focus):invalid,.was-validated .input-group>.form-floating:not(:focus-within):invalid,.was-validated .input-group>.form-select:not(:focus):invalid{z-index:4}.btn{--bs-btn-padding-x:0.75rem;--bs-btn-padding-y:0.375rem;--bs-btn-font-family: ;--bs-btn-font-size:1rem;--bs-btn-font-weight:400;--bs-btn-line-height:1.5;--bs-btn-color:var(--bs-body-color);--bs-btn-bg:transparent;--bs-btn-border-width:var(--bs-border-width);--bs-btn-border-color:transparent;--bs-btn-border-radius:var(--bs-border-radius);--bs-btn-hover-border-color:transparent;--bs-btn-box-shadow:inset 0 1px 0 rgba(255, 255, 255, 0.15),0 1px 1px rgba(0, 0, 0, 0.075);--bs-btn-disabled-opacity:0.65;--bs-btn-focus-box-shadow:0 0 0 0.25rem rgba(var(--bs-btn-focus-shadow-rgb), .5);display:inline-block;padding:var(--bs-btn-padding-y) var(--bs-btn-padding-x);font-family:var(--bs-btn-font-family);font-size:var(--bs-btn-font-size);font-weight:var(--bs-btn-font-weight);line-height:var(--bs-btn-line-height);color:var(--bs-btn-color);text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;border:var(--bs-btn-border-width) solid var(--bs-btn-border-color);border-radius:var(--bs-btn-border-radius);background-color:var(--bs-btn-bg);transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:var(--bs-btn-hover-color);background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color)}.btn-check+.btn:hover{color:var(--bs-btn-color);background-color:var(--bs-btn-bg);border-color:var(--bs-btn-border-color)}.btn:focus-visible{color:var(--bs-btn-hover-color);background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color);outline:0;box-shadow:var(--bs-btn-focus-box-shadow)}.btn-check:focus-visible+.btn{border-color:var(--bs-btn-hover-border-color);outline:0;box-shadow:var(--bs-btn-focus-box-shadow)}.btn-check:checked+.btn,.btn.active,.btn.show,.btn:first-child:active,:not(.btn-check)+.btn:active{color:var(--bs-btn-active-color);background-color:var(--bs-btn-active-bg);border-color:var(--bs-btn-active-border-color)}.btn-check:checked+.btn:focus-visible,.btn.active:focus-visible,.btn.show:focus-visible,.btn:first-child:active:focus-visible,:not(.btn-check)+.btn:active:focus-visible{box-shadow:var(--bs-btn-focus-box-shadow)}.btn.disabled,.btn:disabled,fieldset:disabled .btn{color:var(--bs-btn-disabled-color);pointer-events:none;background-color:var(--bs-btn-disabled-bg);border-color:var(--bs-btn-disabled-border-color);opacity:var(--bs-btn-disabled-opacity)}.btn-primary{--bs-btn-color:#fff;--bs-btn-bg:#0d6efd;--bs-btn-border-color:#0d6efd;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#0b5ed7;--bs-btn-hover-border-color:#0a58ca;--bs-btn-focus-shadow-rgb:49,132,253;--bs-btn-active-color:#fff;--bs-btn-active-bg:#0a58ca;--bs-btn-active-border-color:#0a53be;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#0d6efd;--bs-btn-disabled-border-color:#0d6efd}.btn-secondary{--bs-btn-color:#fff;--bs-btn-bg:#6c757d;--bs-btn-border-color:#6c757d;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#5c636a;--bs-btn-hover-border-color:#565e64;--bs-btn-focus-shadow-rgb:130,138,145;--bs-btn-active-color:#fff;--bs-btn-active-bg:#565e64;--bs-btn-active-border-color:#51585e;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#6c757d;--bs-btn-disabled-border-color:#6c757d}.btn-success{--bs-btn-color:#fff;--bs-btn-bg:#198754;--bs-btn-border-color:#198754;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#157347;--bs-btn-hover-border-color:#146c43;--bs-btn-focus-shadow-rgb:60,153,110;--bs-btn-active-color:#fff;--bs-btn-active-bg:#146c43;--bs-btn-active-border-color:#13653f;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#198754;--bs-btn-disabled-border-color:#198754}.btn-info{--bs-btn-color:#000;--bs-btn-bg:#0dcaf0;--bs-btn-border-color:#0dcaf0;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#31d2f2;--bs-btn-hover-border-color:#25cff2;--bs-btn-focus-shadow-rgb:11,172,204;--bs-btn-active-color:#000;--bs-btn-active-bg:#3dd5f3;--bs-btn-active-border-color:#25cff2;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#0dcaf0;--bs-btn-disabled-border-color:#0dcaf0}.btn-warning{--bs-btn-color:#000;--bs-btn-bg:#ffc107;--bs-btn-border-color:#ffc107;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#ffca2c;--bs-btn-hover-border-color:#ffc720;--bs-btn-focus-shadow-rgb:217,164,6;--bs-btn-active-color:#000;--bs-btn-active-bg:#ffcd39;--bs-btn-active-border-color:#ffc720;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#ffc107;--bs-btn-disabled-border-color:#ffc107}.btn-danger{--bs-btn-color:#fff;--bs-btn-bg:#dc3545;--bs-btn-border-color:#dc3545;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#bb2d3b;--bs-btn-hover-border-color:#b02a37;--bs-btn-focus-shadow-rgb:225,83,97;--bs-btn-active-color:#fff;--bs-btn-active-bg:#b02a37;--bs-btn-active-border-color:#a52834;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#dc3545;--bs-btn-disabled-border-color:#dc3545}.btn-light{--bs-btn-color:#000;--bs-btn-bg:#f8f9fa;--bs-btn-border-color:#f8f9fa;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#d3d4d5;--bs-btn-hover-border-color:#c6c7c8;--bs-btn-focus-shadow-rgb:211,212,213;--bs-btn-active-color:#000;--bs-btn-active-bg:#c6c7c8;--bs-btn-active-border-color:#babbbc;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#f8f9fa;--bs-btn-disabled-border-color:#f8f9fa}.btn-dark{--bs-btn-color:#fff;--bs-btn-bg:#212529;--bs-btn-border-color:#212529;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#424649;--bs-btn-hover-border-color:#373b3e;--bs-btn-focus-shadow-rgb:66,70,73;--bs-btn-active-color:#fff;--bs-btn-active-bg:#4d5154;--bs-btn-active-border-color:#373b3e;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#212529;--bs-btn-disabled-border-color:#212529}.btn-outline-primary{--bs-btn-color:#0d6efd;--bs-btn-border-color:#0d6efd;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#0d6efd;--bs-btn-hover-border-color:#0d6efd;--bs-btn-focus-shadow-rgb:13,110,253;--bs-btn-active-color:#fff;--bs-btn-active-bg:#0d6efd;--bs-btn-active-border-color:#0d6efd;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#0d6efd;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#0d6efd;--bs-gradient:none}.btn-outline-secondary{--bs-btn-color:#6c757d;--bs-btn-border-color:#6c757d;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#6c757d;--bs-btn-hover-border-color:#6c757d;--bs-btn-focus-shadow-rgb:108,117,125;--bs-btn-active-color:#fff;--bs-btn-active-bg:#6c757d;--bs-btn-active-border-color:#6c757d;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#6c757d;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#6c757d;--bs-gradient:none}.btn-outline-success{--bs-btn-color:#198754;--bs-btn-border-color:#198754;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#198754;--bs-btn-hover-border-color:#198754;--bs-btn-focus-shadow-rgb:25,135,84;--bs-btn-active-color:#fff;--bs-btn-active-bg:#198754;--bs-btn-active-border-color:#198754;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#198754;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#198754;--bs-gradient:none}.btn-outline-info{--bs-btn-color:#0dcaf0;--bs-btn-border-color:#0dcaf0;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#0dcaf0;--bs-btn-hover-border-color:#0dcaf0;--bs-btn-focus-shadow-rgb:13,202,240;--bs-btn-active-color:#000;--bs-btn-active-bg:#0dcaf0;--bs-btn-active-border-color:#0dcaf0;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#0dcaf0;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#0dcaf0;--bs-gradient:none}.btn-outline-warning{--bs-btn-color:#ffc107;--bs-btn-border-color:#ffc107;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#ffc107;--bs-btn-hover-border-color:#ffc107;--bs-btn-focus-shadow-rgb:255,193,7;--bs-btn-active-color:#000;--bs-btn-active-bg:#ffc107;--bs-btn-active-border-color:#ffc107;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#ffc107;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#ffc107;--bs-gradient:none}.btn-outline-danger{--bs-btn-color:#dc3545;--bs-btn-border-color:#dc3545;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#dc3545;--bs-btn-hover-border-color:#dc3545;--bs-btn-focus-shadow-rgb:220,53,69;--bs-btn-active-color:#fff;--bs-btn-active-bg:#dc3545;--bs-btn-active-border-color:#dc3545;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#dc3545;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#dc3545;--bs-gradient:none}.btn-outline-light{--bs-btn-color:#f8f9fa;--bs-btn-border-color:#f8f9fa;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#f8f9fa;--bs-btn-hover-border-color:#f8f9fa;--bs-btn-focus-shadow-rgb:248,249,250;--bs-btn-active-color:#000;--bs-btn-active-bg:#f8f9fa;--bs-btn-active-border-color:#f8f9fa;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#f8f9fa;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#f8f9fa;--bs-gradient:none}.btn-outline-dark{--bs-btn-color:#212529;--bs-btn-border-color:#212529;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#212529;--bs-btn-hover-border-color:#212529;--bs-btn-focus-shadow-rgb:33,37,41;--bs-btn-active-color:#fff;--bs-btn-active-bg:#212529;--bs-btn-active-border-color:#212529;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#212529;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#212529;--bs-gradient:none}.btn-link{--bs-btn-font-weight:400;--bs-btn-color:var(--bs-link-color);--bs-btn-bg:transparent;--bs-btn-border-color:transparent;--bs-btn-hover-color:var(--bs-link-hover-color);--bs-btn-hover-border-color:transparent;--bs-btn-active-color:var(--bs-link-hover-color);--bs-btn-active-border-color:transparent;--bs-btn-disabled-color:#6c757d;--bs-btn-disabled-border-color:transparent;--bs-btn-box-shadow:0 0 0 #000;--bs-btn-focus-shadow-rgb:49,132,253;text-decoration:underline}.btn-link:focus-visible{color:var(--bs-btn-color)}.btn-link:hover{color:var(--bs-btn-hover-color)}.btn-group-lg>.btn,.btn-lg{--bs-btn-padding-y:0.5rem;--bs-btn-padding-x:1rem;--bs-btn-font-size:1.25rem;--bs-btn-border-radius:var(--bs-border-radius-lg)}.btn-group-sm>.btn,.btn-sm{--bs-btn-padding-y:0.25rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.875rem;--bs-btn-border-radius:var(--bs-border-radius-sm)}.fade{transition:opacity .15s linear}@media (prefers-reduced-motion:reduce){.fade{transition:none}}.fade:not(.show){opacity:0}.collapse:not(.show){display:none}.collapsing{height:0;overflow:hidden;transition:height .35s ease}@media (prefers-reduced-motion:reduce){.collapsing{transition:none}}.collapsing.collapse-horizontal{width:0;height:auto;transition:width .35s ease}@media (prefers-reduced-motion:reduce){.collapsing.collapse-horizontal{transition:none}}.dropdown,.dropdown-center,.dropend,.dropstart,.dropup,.dropup-center{position:relative}.dropdown-toggle{white-space:nowrap}.dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:"";border-top:.3em solid;border-right:.3em solid transparent;border-bottom:0;border-left:.3em solid transparent}.dropdown-toggle:empty::after{margin-left:0}.dropdown-menu{--bs-dropdown-zindex:1000;--bs-dropdown-min-width:10rem;--bs-dropdown-padding-x:0;--bs-dropdown-padding-y:0.5rem;--bs-dropdown-spacer:0.125rem;--bs-dropdown-font-size:1rem;--bs-dropdown-color:var(--bs-body-color);--bs-dropdown-bg:var(--bs-body-bg);--bs-dropdown-border-color:var(--bs-border-color-translucent);--bs-dropdown-border-radius:var(--bs-border-radius);--bs-dropdown-border-width:var(--bs-border-width);--bs-dropdown-inner-border-radius:calc(var(--bs-border-radius) - var(--bs-border-width));--bs-dropdown-divider-bg:var(--bs-border-color-translucent);--bs-dropdown-divider-margin-y:0.5rem;--bs-dropdown-box-shadow:0 0.5rem 1rem rgba(0, 0, 0, 0.15);--bs-dropdown-link-color:var(--bs-body-color);--bs-dropdown-link-hover-color:var(--bs-body-color);--bs-dropdown-link-hover-bg:var(--bs-tertiary-bg);--bs-dropdown-link-active-color:#fff;--bs-dropdown-link-active-bg:#0d6efd;--bs-dropdown-link-disabled-color:var(--bs-tertiary-color);--bs-dropdown-item-padding-x:1rem;--bs-dropdown-item-padding-y:0.25rem;--bs-dropdown-header-color:#6c757d;--bs-dropdown-header-padding-x:1rem;--bs-dropdown-header-padding-y:0.5rem;position:absolute;z-index:var(--bs-dropdown-zindex);display:none;min-width:var(--bs-dropdown-min-width);padding:var(--bs-dropdown-padding-y) var(--bs-dropdown-padding-x);margin:0;font-size:var(--bs-dropdown-font-size);color:var(--bs-dropdown-color);text-align:left;list-style:none;background-color:var(--bs-dropdown-bg);background-clip:padding-box;border:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color);border-radius:var(--bs-dropdown-border-radius)}.dropdown-menu[data-bs-popper]{top:100%;left:0;margin-top:var(--bs-dropdown-spacer)}.dropdown-menu-start{--bs-position:start}.dropdown-menu-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-end{--bs-position:end}.dropdown-menu-end[data-bs-popper]{right:0;left:auto}@media (min-width:576px){.dropdown-menu-sm-start{--bs-position:start}.dropdown-menu-sm-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-sm-end{--bs-position:end}.dropdown-menu-sm-end[data-bs-popper]{right:0;left:auto}}@media (min-width:768px){.dropdown-menu-md-start{--bs-position:start}.dropdown-menu-md-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-md-end{--bs-position:end}.dropdown-menu-md-end[data-bs-popper]{right:0;left:auto}}@media (min-width:992px){.dropdown-menu-lg-start{--bs-position:start}.dropdown-menu-lg-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-lg-end{--bs-position:end}.dropdown-menu-lg-end[data-bs-popper]{right:0;left:auto}}@media (min-width:1200px){.dropdown-menu-xl-start{--bs-position:start}.dropdown-menu-xl-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-xl-end{--bs-position:end}.dropdown-menu-xl-end[data-bs-popper]{right:0;left:auto}}@media (min-width:1400px){.dropdown-menu-xxl-start{--bs-position:start}.dropdown-menu-xxl-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-xxl-end{--bs-position:end}.dropdown-menu-xxl-end[data-bs-popper]{right:0;left:auto}}.dropup .dropdown-menu[data-bs-popper]{top:auto;bottom:100%;margin-top:0;margin-bottom:var(--bs-dropdown-spacer)}.dropup .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:"";border-top:0;border-right:.3em solid transparent;border-bottom:.3em solid;border-left:.3em solid transparent}.dropup .dropdown-toggle:empty::after{margin-left:0}.dropend .dropdown-menu[data-bs-popper]{top:0;right:auto;left:100%;margin-top:0;margin-left:var(--bs-dropdown-spacer)}.dropend .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:"";border-top:.3em solid transparent;border-right:0;border-bottom:.3em solid transparent;border-left:.3em solid}.dropend .dropdown-toggle:empty::after{margin-left:0}.dropend .dropdown-toggle::after{vertical-align:0}.dropstart .dropdown-menu[data-bs-popper]{top:0;right:100%;left:auto;margin-top:0;margin-right:var(--bs-dropdown-spacer)}.dropstart .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:""}.dropstart .dropdown-toggle::after{display:none}.dropstart .dropdown-toggle::before{display:inline-block;margin-right:.255em;vertical-align:.255em;content:"";border-top:.3em solid transparent;border-right:.3em solid;border-bottom:.3em solid transparent}.dropstart .dropdown-toggle:empty::after{margin-left:0}.dropstart .dropdown-toggle::before{vertical-align:0}.dropdown-divider{height:0;margin:var(--bs-dropdown-divider-margin-y) 0;overflow:hidden;border-top:1px solid var(--bs-dropdown-divider-bg);opacity:1}.dropdown-item{display:block;width:100%;padding:var(--bs-dropdown-item-padding-y) var(--bs-dropdown-item-padding-x);clear:both;font-weight:400;color:var(--bs-dropdown-link-color);text-align:inherit;text-decoration:none;white-space:nowrap;background-color:transparent;border:0;border-radius:var(--bs-dropdown-item-border-radius,0)}.dropdown-item:focus,.dropdown-item:hover{color:var(--bs-dropdown-link-hover-color);background-color:var(--bs-dropdown-link-hover-bg)}.dropdown-item.active,.dropdown-item:active{color:var(--bs-dropdown-link-active-color);text-decoration:none;background-color:var(--bs-dropdown-link-active-bg)}.dropdown-item.disabled,.dropdown-item:disabled{color:var(--bs-dropdown-link-disabled-color);pointer-events:none;background-color:transparent}.dropdown-menu.show{display:block}.dropdown-header{display:block;padding:var(--bs-dropdown-header-padding-y) var(--bs-dropdown-header-padding-x);margin-bottom:0;font-size:.875rem;color:var(--bs-dropdown-header-color);white-space:nowrap}.dropdown-item-text{display:block;padding:var(--bs-dropdown-item-padding-y) var(--bs-dropdown-item-padding-x);color:var(--bs-dropdown-link-color)}.dropdown-menu-dark{--bs-dropdown-color:#dee2e6;--bs-dropdown-bg:#343a40;--bs-dropdown-border-color:var(--bs-border-color-translucent);--bs-dropdown-box-shadow: ;--bs-dropdown-link-color:#dee2e6;--bs-dropdown-link-hover-color:#fff;--bs-dropdown-divider-bg:var(--bs-border-color-translucent);--bs-dropdown-link-hover-bg:rgba(255, 255, 255, 0.15);--bs-dropdown-link-active-color:#fff;--bs-dropdown-link-active-bg:#0d6efd;--bs-dropdown-link-disabled-color:#adb5bd;--bs-dropdown-header-color:#adb5bd}.btn-group,.btn-group-vertical{position:relative;display:inline-flex;vertical-align:middle}.btn-group-vertical>.btn,.btn-group>.btn{position:relative;flex:1 1 auto}.btn-group-vertical>.btn-check:checked+.btn,.btn-group-vertical>.btn-check:focus+.btn,.btn-group-vertical>.btn.active,.btn-group-vertical>.btn:active,.btn-group-vertical>.btn:focus,.btn-group-vertical>.btn:hover,.btn-group>.btn-check:checked+.btn,.btn-group>.btn-check:focus+.btn,.btn-group>.btn.active,.btn-group>.btn:active,.btn-group>.btn:focus,.btn-group>.btn:hover{z-index:1}.btn-toolbar{display:flex;flex-wrap:wrap;justify-content:flex-start}.btn-toolbar .input-group{width:auto}.btn-group{border-radius:var(--bs-border-radius)}.btn-group>.btn-group:not(:first-child),.btn-group>:not(.btn-check:first-child)+.btn{margin-left:calc(var(--bs-border-width) * -1)}.btn-group>.btn-group:not(:last-child)>.btn,.btn-group>.btn.dropdown-toggle-split:first-child,.btn-group>.btn:not(:last-child):not(.dropdown-toggle){border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:nth-child(n+3),.btn-group>:not(.btn-check)+.btn{border-top-left-radius:0;border-bottom-left-radius:0}.dropdown-toggle-split{padding-right:.5625rem;padding-left:.5625rem}.dropdown-toggle-split::after,.dropend .dropdown-toggle-split::after,.dropup .dropdown-toggle-split::after{margin-left:0}.dropstart .dropdown-toggle-split::before{margin-right:0}.btn-group-sm>.btn+.dropdown-toggle-split,.btn-sm+.dropdown-toggle-split{padding-right:.375rem;padding-left:.375rem}.btn-group-lg>.btn+.dropdown-toggle-split,.btn-lg+.dropdown-toggle-split{padding-right:.75rem;padding-left:.75rem}.btn-group-vertical{flex-direction:column;align-items:flex-start;justify-content:center}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group{width:100%}.btn-group-vertical>.btn-group:not(:first-child),.btn-group-vertical>.btn:not(:first-child){margin-top:calc(var(--bs-border-width) * -1)}.btn-group-vertical>.btn-group:not(:last-child)>.btn,.btn-group-vertical>.btn:not(:last-child):not(.dropdown-toggle){border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn-group:not(:first-child)>.btn,.btn-group-vertical>.btn~.btn{border-top-left-radius:0;border-top-right-radius:0}.nav{--bs-nav-link-padding-x:1rem;--bs-nav-link-padding-y:0.5rem;--bs-nav-link-font-weight: ;--bs-nav-link-color:var(--bs-link-color);--bs-nav-link-hover-color:var(--bs-link-hover-color);--bs-nav-link-disabled-color:var(--bs-secondary-color);display:flex;flex-wrap:wrap;padding-left:0;margin-bottom:0;list-style:none}.nav-link{display:block;padding:var(--bs-nav-link-padding-y) var(--bs-nav-link-padding-x);font-size:var(--bs-nav-link-font-size);font-weight:var(--bs-nav-link-font-weight);color:var(--bs-nav-link-color);text-decoration:none;background:0 0;border:0;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out}@media (prefers-reduced-motion:reduce){.nav-link{transition:none}}.nav-link:focus,.nav-link:hover{color:var(--bs-nav-link-hover-color)}.nav-link:focus-visible{outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.nav-link.disabled{color:var(--bs-nav-link-disabled-color);pointer-events:none;cursor:default}.nav-tabs{--bs-nav-tabs-border-width:var(--bs-border-width);--bs-nav-tabs-border-color:var(--bs-border-color);--bs-nav-tabs-border-radius:var(--bs-border-radius);--bs-nav-tabs-link-hover-border-color:var(--bs-secondary-bg) var(--bs-secondary-bg) var(--bs-border-color);--bs-nav-tabs-link-active-color:var(--bs-emphasis-color);--bs-nav-tabs-link-active-bg:var(--bs-body-bg);--bs-nav-tabs-link-active-border-color:var(--bs-border-color) var(--bs-border-color) var(--bs-body-bg);border-bottom:var(--bs-nav-tabs-border-width) solid var(--bs-nav-tabs-border-color)}.nav-tabs .nav-link{margin-bottom:calc(-1 * var(--bs-nav-tabs-border-width));border:var(--bs-nav-tabs-border-width) solid transparent;border-top-left-radius:var(--bs-nav-tabs-border-radius);border-top-right-radius:var(--bs-nav-tabs-border-radius)}.nav-tabs .nav-link:focus,.nav-tabs .nav-link:hover{isolation:isolate;border-color:var(--bs-nav-tabs-link-hover-border-color)}.nav-tabs .nav-link.disabled,.nav-tabs .nav-link:disabled{color:var(--bs-nav-link-disabled-color);background-color:transparent;border-color:transparent}.nav-tabs .nav-item.show .nav-link,.nav-tabs .nav-link.active{color:var(--bs-nav-tabs-link-active-color);background-color:var(--bs-nav-tabs-link-active-bg);border-color:var(--bs-nav-tabs-link-active-border-color)}.nav-tabs .dropdown-menu{margin-top:calc(-1 * var(--bs-nav-tabs-border-width));border-top-left-radius:0;border-top-right-radius:0}.nav-pills{--bs-nav-pills-border-radius:var(--bs-border-radius);--bs-nav-pills-link-active-color:#fff;--bs-nav-pills-link-active-bg:#0d6efd}.nav-pills .nav-link{border-radius:var(--bs-nav-pills-border-radius)}.nav-pills .nav-link:disabled{color:var(--bs-nav-link-disabled-color);background-color:transparent;border-color:transparent}.nav-pills .nav-link.active,.nav-pills .show>.nav-link{color:var(--bs-nav-pills-link-active-color);background-color:var(--bs-nav-pills-link-active-bg)}.nav-underline{--bs-nav-underline-gap:1rem;--bs-nav-underline-border-width:0.125rem;--bs-nav-underline-link-active-color:var(--bs-emphasis-color);gap:var(--bs-nav-underline-gap)}.nav-underline .nav-link{padding-right:0;padding-left:0;border-bottom:var(--bs-nav-underline-border-width) solid transparent}.nav-underline .nav-link:focus,.nav-underline .nav-link:hover{border-bottom-color:currentcolor}.nav-underline .nav-link.active,.nav-underline .show>.nav-link{font-weight:700;color:var(--bs-nav-underline-link-active-color);border-bottom-color:currentcolor}.nav-fill .nav-item,.nav-fill>.nav-link{flex:1 1 auto;text-align:center}.nav-justified .nav-item,.nav-justified>.nav-link{flex-basis:0;flex-grow:1;text-align:center}.nav-fill .nav-item .nav-link,.nav-justified .nav-item .nav-link{width:100%}.tab-content>.tab-pane{display:none}.tab-content>.active{display:block}.navbar{--bs-navbar-padding-x:0;--bs-navbar-padding-y:0.5rem;--bs-navbar-color:rgba(var(--bs-emphasis-color-rgb), 0.65);--bs-navbar-hover-color:rgba(var(--bs-emphasis-color-rgb), 0.8);--bs-navbar-disabled-color:rgba(var(--bs-emphasis-color-rgb), 0.3);--bs-navbar-active-color:rgba(var(--bs-emphasis-color-rgb), 1);--bs-navbar-brand-padding-y:0.3125rem;--bs-navbar-brand-margin-end:1rem;--bs-navbar-brand-font-size:1.25rem;--bs-navbar-brand-color:rgba(var(--bs-emphasis-color-rgb), 1);--bs-navbar-brand-hover-color:rgba(var(--bs-emphasis-color-rgb), 1);--bs-navbar-nav-link-padding-x:0.5rem;--bs-navbar-toggler-padding-y:0.25rem;--bs-navbar-toggler-padding-x:0.75rem;--bs-navbar-toggler-font-size:1.25rem;--bs-navbar-toggler-icon-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%2833, 37, 41, 0.75%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");--bs-navbar-toggler-border-color:rgba(var(--bs-emphasis-color-rgb), 0.15);--bs-navbar-toggler-border-radius:var(--bs-border-radius);--bs-navbar-toggler-focus-width:0.25rem;--bs-navbar-toggler-transition:box-shadow 0.15s ease-in-out;position:relative;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;padding:var(--bs-navbar-padding-y) var(--bs-navbar-padding-x)}.navbar>.container,.navbar>.container-fluid,.navbar>.container-lg,.navbar>.container-md,.navbar>.container-sm,.navbar>.container-xl,.navbar>.container-xxl{display:flex;flex-wrap:inherit;align-items:center;justify-content:space-between}.navbar-brand{padding-top:var(--bs-navbar-brand-padding-y);padding-bottom:var(--bs-navbar-brand-padding-y);margin-right:var(--bs-navbar-brand-margin-end);font-size:var(--bs-navbar-brand-font-size);color:var(--bs-navbar-brand-color);text-decoration:none;white-space:nowrap}.navbar-brand:focus,.navbar-brand:hover{color:var(--bs-navbar-brand-hover-color)}.navbar-nav{--bs-nav-link-padding-x:0;--bs-nav-link-padding-y:0.5rem;--bs-nav-link-font-weight: ;--bs-nav-link-color:var(--bs-navbar-color);--bs-nav-link-hover-color:var(--bs-navbar-hover-color);--bs-nav-link-disabled-color:var(--bs-navbar-disabled-color);display:flex;flex-direction:column;padding-left:0;margin-bottom:0;list-style:none}.navbar-nav .nav-link.active,.navbar-nav .nav-link.show{color:var(--bs-navbar-active-color)}.navbar-nav .dropdown-menu{position:static}.navbar-text{padding-top:.5rem;padding-bottom:.5rem;color:var(--bs-navbar-color)}.navbar-text a,.navbar-text a:focus,.navbar-text a:hover{color:var(--bs-navbar-active-color)}.navbar-collapse{flex-basis:100%;flex-grow:1;align-items:center}.navbar-toggler{padding:var(--bs-navbar-toggler-padding-y) var(--bs-navbar-toggler-padding-x);font-size:var(--bs-navbar-toggler-font-size);line-height:1;color:var(--bs-navbar-color);background-color:transparent;border:var(--bs-border-width) solid var(--bs-navbar-toggler-border-color);border-radius:var(--bs-navbar-toggler-border-radius);transition:var(--bs-navbar-toggler-transition)}@media (prefers-reduced-motion:reduce){.navbar-toggler{transition:none}}.navbar-toggler:hover{text-decoration:none}.navbar-toggler:focus{text-decoration:none;outline:0;box-shadow:0 0 0 var(--bs-navbar-toggler-focus-width)}.navbar-toggler-icon{display:inline-block;width:1.5em;height:1.5em;vertical-align:middle;background-image:var(--bs-navbar-toggler-icon-bg);background-repeat:no-repeat;background-position:center;background-size:100%}.navbar-nav-scroll{max-height:var(--bs-scroll-height,75vh);overflow-y:auto}@media (min-width:576px){.navbar-expand-sm{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-sm .navbar-nav{flex-direction:row}.navbar-expand-sm .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-sm .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-sm .navbar-nav-scroll{overflow:visible}.navbar-expand-sm .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand-sm .navbar-toggler{display:none}.navbar-expand-sm .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand-sm .offcanvas .offcanvas-header{display:none}.navbar-expand-sm .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}@media (min-width:768px){.navbar-expand-md{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-md .navbar-nav{flex-direction:row}.navbar-expand-md .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-md .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-md .navbar-nav-scroll{overflow:visible}.navbar-expand-md .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand-md .navbar-toggler{display:none}.navbar-expand-md .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand-md .offcanvas .offcanvas-header{display:none}.navbar-expand-md .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}@media (min-width:992px){.navbar-expand-lg{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-lg .navbar-nav{flex-direction:row}.navbar-expand-lg .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-lg .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-lg .navbar-nav-scroll{overflow:visible}.navbar-expand-lg .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand-lg .navbar-toggler{display:none}.navbar-expand-lg .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand-lg .offcanvas .offcanvas-header{display:none}.navbar-expand-lg .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}@media (min-width:1200px){.navbar-expand-xl{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-xl .navbar-nav{flex-direction:row}.navbar-expand-xl .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-xl .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-xl .navbar-nav-scroll{overflow:visible}.navbar-expand-xl .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand-xl .navbar-toggler{display:none}.navbar-expand-xl .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand-xl .offcanvas .offcanvas-header{display:none}.navbar-expand-xl .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}@media (min-width:1400px){.navbar-expand-xxl{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-xxl .navbar-nav{flex-direction:row}.navbar-expand-xxl .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-xxl .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-xxl .navbar-nav-scroll{overflow:visible}.navbar-expand-xxl .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand-xxl .navbar-toggler{display:none}.navbar-expand-xxl .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand-xxl .offcanvas .offcanvas-header{display:none}.navbar-expand-xxl .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}.navbar-expand{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand .navbar-nav{flex-direction:row}.navbar-expand .navbar-nav .dropdown-menu{position:absolute}.navbar-expand .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand .navbar-nav-scroll{overflow:visible}.navbar-expand .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand .navbar-toggler{display:none}.navbar-expand .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand .offcanvas .offcanvas-header{display:none}.navbar-expand .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}.navbar-dark,.navbar[data-bs-theme=dark]{--bs-navbar-color:rgba(255, 255, 255, 0.55);--bs-navbar-hover-color:rgba(255, 255, 255, 0.75);--bs-navbar-disabled-color:rgba(255, 255, 255, 0.25);--bs-navbar-active-color:#fff;--bs-navbar-brand-color:#fff;--bs-navbar-brand-hover-color:#fff;--bs-navbar-toggler-border-color:rgba(255, 255, 255, 0.1);--bs-navbar-toggler-icon-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.55%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e")}[data-bs-theme=dark] .navbar-toggler-icon{--bs-navbar-toggler-icon-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.55%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e")}.card{--bs-card-spacer-y:1rem;--bs-card-spacer-x:1rem;--bs-card-title-spacer-y:0.5rem;--bs-card-title-color: ;--bs-card-subtitle-color: ;--bs-card-border-width:var(--bs-border-width);--bs-card-border-color:var(--bs-border-color-translucent);--bs-card-border-radius:var(--bs-border-radius);--bs-card-box-shadow: ;--bs-card-inner-border-radius:calc(var(--bs-border-radius) - (var(--bs-border-width)));--bs-card-cap-padding-y:0.5rem;--bs-card-cap-padding-x:1rem;--bs-card-cap-bg:rgba(var(--bs-body-color-rgb), 0.03);--bs-card-cap-color: ;--bs-card-height: ;--bs-card-color: ;--bs-card-bg:var(--bs-body-bg);--bs-card-img-overlay-padding:1rem;--bs-card-group-margin:0.75rem;position:relative;display:flex;flex-direction:column;min-width:0;height:var(--bs-card-height);color:var(--bs-body-color);word-wrap:break-word;background-color:var(--bs-card-bg);background-clip:border-box;border:var(--bs-card-border-width) solid var(--bs-card-border-color);border-radius:var(--bs-card-border-radius)}.card>hr{margin-right:0;margin-left:0}.card>.list-group{border-top:inherit;border-bottom:inherit}.card>.list-group:first-child{border-top-width:0;border-top-left-radius:var(--bs-card-inner-border-radius);border-top-right-radius:var(--bs-card-inner-border-radius)}.card>.list-group:last-child{border-bottom-width:0;border-bottom-right-radius:var(--bs-card-inner-border-radius);border-bottom-left-radius:var(--bs-card-inner-border-radius)}.card>.card-header+.list-group,.card>.list-group+.card-footer{border-top:0}.card-body{flex:1 1 auto;padding:var(--bs-card-spacer-y) var(--bs-card-spacer-x);color:var(--bs-card-color)}.card-title{margin-bottom:var(--bs-card-title-spacer-y);color:var(--bs-card-title-color)}.card-subtitle{margin-top:calc(-.5 * var(--bs-card-title-spacer-y));margin-bottom:0;color:var(--bs-card-subtitle-color)}.card-text:last-child{margin-bottom:0}.card-link+.card-link{margin-left:var(--bs-card-spacer-x)}.card-header{padding:var(--bs-card-cap-padding-y) var(--bs-card-cap-padding-x);margin-bottom:0;color:var(--bs-card-cap-color);background-color:var(--bs-card-cap-bg);border-bottom:var(--bs-card-border-width) solid var(--bs-card-border-color)}.card-header:first-child{border-radius:var(--bs-card-inner-border-radius) var(--bs-card-inner-border-radius) 0 0}.card-footer{padding:var(--bs-card-cap-padding-y) var(--bs-card-cap-padding-x);color:var(--bs-card-cap-color);background-color:var(--bs-card-cap-bg);border-top:var(--bs-card-border-width) solid var(--bs-card-border-color)}.card-footer:last-child{border-radius:0 0 var(--bs-card-inner-border-radius) var(--bs-card-inner-border-radius)}.card-header-tabs{margin-right:calc(-.5 * var(--bs-card-cap-padding-x));margin-bottom:calc(-1 * var(--bs-card-cap-padding-y));margin-left:calc(-.5 * var(--bs-card-cap-padding-x));border-bottom:0}.card-header-tabs .nav-link.active{background-color:var(--bs-card-bg);border-bottom-color:var(--bs-card-bg)}.card-header-pills{margin-right:calc(-.5 * var(--bs-card-cap-padding-x));margin-left:calc(-.5 * var(--bs-card-cap-padding-x))}.card-img-overlay{position:absolute;top:0;right:0;bottom:0;left:0;padding:var(--bs-card-img-overlay-padding);border-radius:var(--bs-card-inner-border-radius)}.card-img,.card-img-bottom,.card-img-top{width:100%}.card-img,.card-img-top{border-top-left-radius:var(--bs-card-inner-border-radius);border-top-right-radius:var(--bs-card-inner-border-radius)}.card-img,.card-img-bottom{border-bottom-right-radius:var(--bs-card-inner-border-radius);border-bottom-left-radius:var(--bs-card-inner-border-radius)}.card-group>.card{margin-bottom:var(--bs-card-group-margin)}@media (min-width:576px){.card-group{display:flex;flex-flow:row wrap}.card-group>.card{flex:1 0 0%;margin-bottom:0}.card-group>.card+.card{margin-left:0;border-left:0}.card-group>.card:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.card-group>.card:not(:last-child) .card-header,.card-group>.card:not(:last-child) .card-img-top{border-top-right-radius:0}.card-group>.card:not(:last-child) .card-footer,.card-group>.card:not(:last-child) .card-img-bottom{border-bottom-right-radius:0}.card-group>.card:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.card-group>.card:not(:first-child) .card-header,.card-group>.card:not(:first-child) .card-img-top{border-top-left-radius:0}.card-group>.card:not(:first-child) .card-footer,.card-group>.card:not(:first-child) .card-img-bottom{border-bottom-left-radius:0}}.accordion{--bs-accordion-color:var(--bs-body-color);--bs-accordion-bg:var(--bs-body-bg);--bs-accordion-transition:color 0.15s ease-in-out,background-color 0.15s ease-in-out,border-color 0.15s ease-in-out,box-shadow 0.15s ease-in-out,border-radius 0.15s ease;--bs-accordion-border-color:var(--bs-border-color);--bs-accordion-border-width:var(--bs-border-width);--bs-accordion-border-radius:var(--bs-border-radius);--bs-accordion-inner-border-radius:calc(var(--bs-border-radius) - (var(--bs-border-width)));--bs-accordion-btn-padding-x:1.25rem;--bs-accordion-btn-padding-y:1rem;--bs-accordion-btn-color:var(--bs-body-color);--bs-accordion-btn-bg:var(--bs-accordion-bg);--bs-accordion-btn-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23212529'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");--bs-accordion-btn-icon-width:1.25rem;--bs-accordion-btn-icon-transform:rotate(-180deg);--bs-accordion-btn-icon-transition:transform 0.2s ease-in-out;--bs-accordion-btn-active-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23052c65'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");--bs-accordion-btn-focus-border-color:#86b7fe;--bs-accordion-btn-focus-box-shadow:0 0 0 0.25rem rgba(13, 110, 253, 0.25);--bs-accordion-body-padding-x:1.25rem;--bs-accordion-body-padding-y:1rem;--bs-accordion-active-color:var(--bs-primary-text-emphasis);--bs-accordion-active-bg:var(--bs-primary-bg-subtle)}.accordion-button{position:relative;display:flex;align-items:center;width:100%;padding:var(--bs-accordion-btn-padding-y) var(--bs-accordion-btn-padding-x);font-size:1rem;color:var(--bs-accordion-btn-color);text-align:left;background-color:var(--bs-accordion-btn-bg);border:0;border-radius:0;overflow-anchor:none;transition:var(--bs-accordion-transition)}@media (prefers-reduced-motion:reduce){.accordion-button{transition:none}}.accordion-button:not(.collapsed){color:var(--bs-accordion-active-color);background-color:var(--bs-accordion-active-bg);box-shadow:inset 0 calc(-1 * var(--bs-accordion-border-width)) 0 var(--bs-accordion-border-color)}.accordion-button:not(.collapsed)::after{background-image:var(--bs-accordion-btn-active-icon);transform:var(--bs-accordion-btn-icon-transform)}.accordion-button::after{flex-shrink:0;width:var(--bs-accordion-btn-icon-width);height:var(--bs-accordion-btn-icon-width);margin-left:auto;content:"";background-image:var(--bs-accordion-btn-icon);background-repeat:no-repeat;background-size:var(--bs-accordion-btn-icon-width);transition:var(--bs-accordion-btn-icon-transition)}@media (prefers-reduced-motion:reduce){.accordion-button::after{transition:none}}.accordion-button:hover{z-index:2}.accordion-button:focus{z-index:3;border-color:var(--bs-accordion-btn-focus-border-color);outline:0;box-shadow:var(--bs-accordion-btn-focus-box-shadow)}.accordion-header{margin-bottom:0}.accordion-item{color:var(--bs-accordion-color);background-color:var(--bs-accordion-bg);border:var(--bs-accordion-border-width) solid var(--bs-accordion-border-color)}.accordion-item:first-of-type{border-top-left-radius:var(--bs-accordion-border-radius);border-top-right-radius:var(--bs-accordion-border-radius)}.accordion-item:first-of-type .accordion-button{border-top-left-radius:var(--bs-accordion-inner-border-radius);border-top-right-radius:var(--bs-accordion-inner-border-radius)}.accordion-item:not(:first-of-type){border-top:0}.accordion-item:last-of-type{border-bottom-right-radius:var(--bs-accordion-border-radius);border-bottom-left-radius:var(--bs-accordion-border-radius)}.accordion-item:last-of-type .accordion-button.collapsed{border-bottom-right-radius:var(--bs-accordion-inner-border-radius);border-bottom-left-radius:var(--bs-accordion-inner-border-radius)}.accordion-item:last-of-type .accordion-collapse{border-bottom-right-radius:var(--bs-accordion-border-radius);border-bottom-left-radius:var(--bs-accordion-border-radius)}.accordion-body{padding:var(--bs-accordion-body-padding-y) var(--bs-accordion-body-padding-x)}.accordion-flush .accordion-collapse{border-width:0}.accordion-flush .accordion-item{border-right:0;border-left:0;border-radius:0}.accordion-flush .accordion-item:first-child{border-top:0}.accordion-flush .accordion-item:last-child{border-bottom:0}.accordion-flush .accordion-item .accordion-button,.accordion-flush .accordion-item .accordion-button.collapsed{border-radius:0}[data-bs-theme=dark] .accordion-button::after{--bs-accordion-btn-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%236ea8fe'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");--bs-accordion-btn-active-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%236ea8fe'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e")}.breadcrumb{--bs-breadcrumb-padding-x:0;--bs-breadcrumb-padding-y:0;--bs-breadcrumb-margin-bottom:1rem;--bs-breadcrumb-bg: ;--bs-breadcrumb-border-radius: ;--bs-breadcrumb-divider-color:var(--bs-secondary-color);--bs-breadcrumb-item-padding-x:0.5rem;--bs-breadcrumb-item-active-color:var(--bs-secondary-color);display:flex;flex-wrap:wrap;padding:var(--bs-breadcrumb-padding-y) var(--bs-breadcrumb-padding-x);margin-bottom:var(--bs-breadcrumb-margin-bottom);font-size:var(--bs-breadcrumb-font-size);list-style:none;background-color:var(--bs-breadcrumb-bg);border-radius:var(--bs-breadcrumb-border-radius)}.breadcrumb-item+.breadcrumb-item{padding-left:var(--bs-breadcrumb-item-padding-x)}.breadcrumb-item+.breadcrumb-item::before{float:left;padding-right:var(--bs-breadcrumb-item-padding-x);color:var(--bs-breadcrumb-divider-color);content:var(--bs-breadcrumb-divider, "/")}.breadcrumb-item.active{color:var(--bs-breadcrumb-item-active-color)}.pagination{--bs-pagination-padding-x:0.75rem;--bs-pagination-padding-y:0.375rem;--bs-pagination-font-size:1rem;--bs-pagination-color:var(--bs-link-color);--bs-pagination-bg:var(--bs-body-bg);--bs-pagination-border-width:var(--bs-border-width);--bs-pagination-border-color:var(--bs-border-color);--bs-pagination-border-radius:var(--bs-border-radius);--bs-pagination-hover-color:var(--bs-link-hover-color);--bs-pagination-hover-bg:var(--bs-tertiary-bg);--bs-pagination-hover-border-color:var(--bs-border-color);--bs-pagination-focus-color:var(--bs-link-hover-color);--bs-pagination-focus-bg:var(--bs-secondary-bg);--bs-pagination-focus-box-shadow:0 0 0 0.25rem rgba(13, 110, 253, 0.25);--bs-pagination-active-color:#fff;--bs-pagination-active-bg:#0d6efd;--bs-pagination-active-border-color:#0d6efd;--bs-pagination-disabled-color:var(--bs-secondary-color);--bs-pagination-disabled-bg:var(--bs-secondary-bg);--bs-pagination-disabled-border-color:var(--bs-border-color);display:flex;padding-left:0;list-style:none}.page-link{position:relative;display:block;padding:var(--bs-pagination-padding-y) var(--bs-pagination-padding-x);font-size:var(--bs-pagination-font-size);color:var(--bs-pagination-color);text-decoration:none;background-color:var(--bs-pagination-bg);border:var(--bs-pagination-border-width) solid var(--bs-pagination-border-color);transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.page-link{transition:none}}.page-link:hover{z-index:2;color:var(--bs-pagination-hover-color);background-color:var(--bs-pagination-hover-bg);border-color:var(--bs-pagination-hover-border-color)}.page-link:focus{z-index:3;color:var(--bs-pagination-focus-color);background-color:var(--bs-pagination-focus-bg);outline:0;box-shadow:var(--bs-pagination-focus-box-shadow)}.active>.page-link,.page-link.active{z-index:3;color:var(--bs-pagination-active-color);background-color:var(--bs-pagination-active-bg);border-color:var(--bs-pagination-active-border-color)}.disabled>.page-link,.page-link.disabled{color:var(--bs-pagination-disabled-color);pointer-events:none;background-color:var(--bs-pagination-disabled-bg);border-color:var(--bs-pagination-disabled-border-color)}.page-item:not(:first-child) .page-link{margin-left:calc(var(--bs-border-width) * -1)}.page-item:first-child .page-link{border-top-left-radius:var(--bs-pagination-border-radius);border-bottom-left-radius:var(--bs-pagination-border-radius)}.page-item:last-child .page-link{border-top-right-radius:var(--bs-pagination-border-radius);border-bottom-right-radius:var(--bs-pagination-border-radius)}.pagination-lg{--bs-pagination-padding-x:1.5rem;--bs-pagination-padding-y:0.75rem;--bs-pagination-font-size:1.25rem;--bs-pagination-border-radius:var(--bs-border-radius-lg)}.pagination-sm{--bs-pagination-padding-x:0.5rem;--bs-pagination-padding-y:0.25rem;--bs-pagination-font-size:0.875rem;--bs-pagination-border-radius:var(--bs-border-radius-sm)}.badge{--bs-badge-padding-x:0.65em;--bs-badge-padding-y:0.35em;--bs-badge-font-size:0.75em;--bs-badge-font-weight:700;--bs-badge-color:#fff;--bs-badge-border-radius:var(--bs-border-radius);display:inline-block;padding:var(--bs-badge-padding-y) var(--bs-badge-padding-x);font-size:var(--bs-badge-font-size);font-weight:var(--bs-badge-font-weight);line-height:1;color:var(--bs-badge-color);text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:var(--bs-badge-border-radius)}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.alert{--bs-alert-bg:transparent;--bs-alert-padding-x:1rem;--bs-alert-padding-y:1rem;--bs-alert-margin-bottom:1rem;--bs-alert-color:inherit;--bs-alert-border-color:transparent;--bs-alert-border:var(--bs-border-width) solid var(--bs-alert-border-color);--bs-alert-border-radius:var(--bs-border-radius);--bs-alert-link-color:inherit;position:relative;padding:var(--bs-alert-padding-y) var(--bs-alert-padding-x);margin-bottom:var(--bs-alert-margin-bottom);color:var(--bs-alert-color);background-color:var(--bs-alert-bg);border:var(--bs-alert-border);border-radius:var(--bs-alert-border-radius)}.alert-heading{color:inherit}.alert-link{font-weight:700;color:var(--bs-alert-link-color)}.alert-dismissible{padding-right:3rem}.alert-dismissible .btn-close{position:absolute;top:0;right:0;z-index:2;padding:1.25rem 1rem}.alert-primary{--bs-alert-color:var(--bs-primary-text-emphasis);--bs-alert-bg:var(--bs-primary-bg-subtle);--bs-alert-border-color:var(--bs-primary-border-subtle);--bs-alert-link-color:var(--bs-primary-text-emphasis)}.alert-secondary{--bs-alert-color:var(--bs-secondary-text-emphasis);--bs-alert-bg:var(--bs-secondary-bg-subtle);--bs-alert-border-color:var(--bs-secondary-border-subtle);--bs-alert-link-color:var(--bs-secondary-text-emphasis)}.alert-success{--bs-alert-color:var(--bs-success-text-emphasis);--bs-alert-bg:var(--bs-success-bg-subtle);--bs-alert-border-color:var(--bs-success-border-subtle);--bs-alert-link-color:var(--bs-success-text-emphasis)}.alert-info{--bs-alert-color:var(--bs-info-text-emphasis);--bs-alert-bg:var(--bs-info-bg-subtle);--bs-alert-border-color:var(--bs-info-border-subtle);--bs-alert-link-color:var(--bs-info-text-emphasis)}.alert-warning{--bs-alert-color:var(--bs-warning-text-emphasis);--bs-alert-bg:var(--bs-warning-bg-subtle);--bs-alert-border-color:var(--bs-warning-border-subtle);--bs-alert-link-color:var(--bs-warning-text-emphasis)}.alert-danger{--bs-alert-color:var(--bs-danger-text-emphasis);--bs-alert-bg:var(--bs-danger-bg-subtle);--bs-alert-border-color:var(--bs-danger-border-subtle);--bs-alert-link-color:var(--bs-danger-text-emphasis)}.alert-light{--bs-alert-color:var(--bs-light-text-emphasis);--bs-alert-bg:var(--bs-light-bg-subtle);--bs-alert-border-color:var(--bs-light-border-subtle);--bs-alert-link-color:var(--bs-light-text-emphasis)}.alert-dark{--bs-alert-color:var(--bs-dark-text-emphasis);--bs-alert-bg:var(--bs-dark-bg-subtle);--bs-alert-border-color:var(--bs-dark-border-subtle);--bs-alert-link-color:var(--bs-dark-text-emphasis)}@keyframes progress-bar-stripes{0%{background-position-x:1rem}}.progress,.progress-stacked{--bs-progress-height:1rem;--bs-progress-font-size:0.75rem;--bs-progress-bg:var(--bs-secondary-bg);--bs-progress-border-radius:var(--bs-border-radius);--bs-progress-box-shadow:var(--bs-box-shadow-inset);--bs-progress-bar-color:#fff;--bs-progress-bar-bg:#0d6efd;--bs-progress-bar-transition:width 0.6s ease;display:flex;height:var(--bs-progress-height);overflow:hidden;font-size:var(--bs-progress-font-size);background-color:var(--bs-progress-bg);border-radius:var(--bs-progress-border-radius)}.progress-bar{display:flex;flex-direction:column;justify-content:center;overflow:hidden;color:var(--bs-progress-bar-color);text-align:center;white-space:nowrap;background-color:var(--bs-progress-bar-bg);transition:var(--bs-progress-bar-transition)}@media (prefers-reduced-motion:reduce){.progress-bar{transition:none}}.progress-bar-striped{background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-size:var(--bs-progress-height) var(--bs-progress-height)}.progress-stacked>.progress{overflow:visible}.progress-stacked>.progress>.progress-bar{width:100%}.progress-bar-animated{animation:1s linear infinite progress-bar-stripes}@media (prefers-reduced-motion:reduce){.progress-bar-animated{animation:none}}.list-group{--bs-list-group-color:var(--bs-body-color);--bs-list-group-bg:var(--bs-body-bg);--bs-list-group-border-color:var(--bs-border-color);--bs-list-group-border-width:var(--bs-border-width);--bs-list-group-border-radius:var(--bs-border-radius);--bs-list-group-item-padding-x:1rem;--bs-list-group-item-padding-y:0.5rem;--bs-list-group-action-color:var(--bs-secondary-color);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-tertiary-bg);--bs-list-group-action-active-color:var(--bs-body-color);--bs-list-group-action-active-bg:var(--bs-secondary-bg);--bs-list-group-disabled-color:var(--bs-secondary-color);--bs-list-group-disabled-bg:var(--bs-body-bg);--bs-list-group-active-color:#fff;--bs-list-group-active-bg:#0d6efd;--bs-list-group-active-border-color:#0d6efd;display:flex;flex-direction:column;padding-left:0;margin-bottom:0;border-radius:var(--bs-list-group-border-radius)}.list-group-numbered{list-style-type:none;counter-reset:section}.list-group-numbered>.list-group-item::before{content:counters(section, ".") ". ";counter-increment:section}.list-group-item-action{width:100%;color:var(--bs-list-group-action-color);text-align:inherit}.list-group-item-action:focus,.list-group-item-action:hover{z-index:1;color:var(--bs-list-group-action-hover-color);text-decoration:none;background-color:var(--bs-list-group-action-hover-bg)}.list-group-item-action:active{color:var(--bs-list-group-action-active-color);background-color:var(--bs-list-group-action-active-bg)}.list-group-item{position:relative;display:block;padding:var(--bs-list-group-item-padding-y) var(--bs-list-group-item-padding-x);color:var(--bs-list-group-color);text-decoration:none;background-color:var(--bs-list-group-bg);border:var(--bs-list-group-border-width) solid var(--bs-list-group-border-color)}.list-group-item:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.list-group-item:last-child{border-bottom-right-radius:inherit;border-bottom-left-radius:inherit}.list-group-item.disabled,.list-group-item:disabled{color:var(--bs-list-group-disabled-color);pointer-events:none;background-color:var(--bs-list-group-disabled-bg)}.list-group-item.active{z-index:2;color:var(--bs-list-group-active-color);background-color:var(--bs-list-group-active-bg);border-color:var(--bs-list-group-active-border-color)}.list-group-item+.list-group-item{border-top-width:0}.list-group-item+.list-group-item.active{margin-top:calc(-1 * var(--bs-list-group-border-width));border-top-width:var(--bs-list-group-border-width)}.list-group-horizontal{flex-direction:row}.list-group-horizontal>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal>.list-group-item.active{margin-top:0}.list-group-horizontal>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}@media (min-width:576px){.list-group-horizontal-sm{flex-direction:row}.list-group-horizontal-sm>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-sm>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-sm>.list-group-item.active{margin-top:0}.list-group-horizontal-sm>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-sm>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}}@media (min-width:768px){.list-group-horizontal-md{flex-direction:row}.list-group-horizontal-md>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-md>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-md>.list-group-item.active{margin-top:0}.list-group-horizontal-md>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-md>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}}@media (min-width:992px){.list-group-horizontal-lg{flex-direction:row}.list-group-horizontal-lg>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-lg>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-lg>.list-group-item.active{margin-top:0}.list-group-horizontal-lg>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-lg>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}}@media (min-width:1200px){.list-group-horizontal-xl{flex-direction:row}.list-group-horizontal-xl>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-xl>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-xl>.list-group-item.active{margin-top:0}.list-group-horizontal-xl>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-xl>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}}@media (min-width:1400px){.list-group-horizontal-xxl{flex-direction:row}.list-group-horizontal-xxl>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-xxl>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-xxl>.list-group-item.active{margin-top:0}.list-group-horizontal-xxl>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-xxl>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}}.list-group-flush{border-radius:0}.list-group-flush>.list-group-item{border-width:0 0 var(--bs-list-group-border-width)}.list-group-flush>.list-group-item:last-child{border-bottom-width:0}.list-group-item-primary{--bs-list-group-color:var(--bs-primary-text-emphasis);--bs-list-group-bg:var(--bs-primary-bg-subtle);--bs-list-group-border-color:var(--bs-primary-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-primary-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-primary-border-subtle);--bs-list-group-active-color:var(--bs-primary-bg-subtle);--bs-list-group-active-bg:var(--bs-primary-text-emphasis);--bs-list-group-active-border-color:var(--bs-primary-text-emphasis)}.list-group-item-secondary{--bs-list-group-color:var(--bs-secondary-text-emphasis);--bs-list-group-bg:var(--bs-secondary-bg-subtle);--bs-list-group-border-color:var(--bs-secondary-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-secondary-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-secondary-border-subtle);--bs-list-group-active-color:var(--bs-secondary-bg-subtle);--bs-list-group-active-bg:var(--bs-secondary-text-emphasis);--bs-list-group-active-border-color:var(--bs-secondary-text-emphasis)}.list-group-item-success{--bs-list-group-color:var(--bs-success-text-emphasis);--bs-list-group-bg:var(--bs-success-bg-subtle);--bs-list-group-border-color:var(--bs-success-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-success-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-success-border-subtle);--bs-list-group-active-color:var(--bs-success-bg-subtle);--bs-list-group-active-bg:var(--bs-success-text-emphasis);--bs-list-group-active-border-color:var(--bs-success-text-emphasis)}.list-group-item-info{--bs-list-group-color:var(--bs-info-text-emphasis);--bs-list-group-bg:var(--bs-info-bg-subtle);--bs-list-group-border-color:var(--bs-info-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-info-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-info-border-subtle);--bs-list-group-active-color:var(--bs-info-bg-subtle);--bs-list-group-active-bg:var(--bs-info-text-emphasis);--bs-list-group-active-border-color:var(--bs-info-text-emphasis)}.list-group-item-warning{--bs-list-group-color:var(--bs-warning-text-emphasis);--bs-list-group-bg:var(--bs-warning-bg-subtle);--bs-list-group-border-color:var(--bs-warning-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-warning-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-warning-border-subtle);--bs-list-group-active-color:var(--bs-warning-bg-subtle);--bs-list-group-active-bg:var(--bs-warning-text-emphasis);--bs-list-group-active-border-color:var(--bs-warning-text-emphasis)}.list-group-item-danger{--bs-list-group-color:var(--bs-danger-text-emphasis);--bs-list-group-bg:var(--bs-danger-bg-subtle);--bs-list-group-border-color:var(--bs-danger-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-danger-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-danger-border-subtle);--bs-list-group-active-color:var(--bs-danger-bg-subtle);--bs-list-group-active-bg:var(--bs-danger-text-emphasis);--bs-list-group-active-border-color:var(--bs-danger-text-emphasis)}.list-group-item-light{--bs-list-group-color:var(--bs-light-text-emphasis);--bs-list-group-bg:var(--bs-light-bg-subtle);--bs-list-group-border-color:var(--bs-light-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-light-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-light-border-subtle);--bs-list-group-active-color:var(--bs-light-bg-subtle);--bs-list-group-active-bg:var(--bs-light-text-emphasis);--bs-list-group-active-border-color:var(--bs-light-text-emphasis)}.list-group-item-dark{--bs-list-group-color:var(--bs-dark-text-emphasis);--bs-list-group-bg:var(--bs-dark-bg-subtle);--bs-list-group-border-color:var(--bs-dark-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-dark-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-dark-border-subtle);--bs-list-group-active-color:var(--bs-dark-bg-subtle);--bs-list-group-active-bg:var(--bs-dark-text-emphasis);--bs-list-group-active-border-color:var(--bs-dark-text-emphasis)}.btn-close{--bs-btn-close-color:#000;--bs-btn-close-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23000'%3e%3cpath d='M.293.293a1 1 0 0 1 1.414 0L8 6.586 14.293.293a1 1 0 1 1 1.414 1.414L9.414 8l6.293 6.293a1 1 0 0 1-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 0 1-1.414-1.414L6.586 8 .293 1.707a1 1 0 0 1 0-1.414z'/%3e%3c/svg%3e");--bs-btn-close-opacity:0.5;--bs-btn-close-hover-opacity:0.75;--bs-btn-close-focus-shadow:0 0 0 0.25rem rgba(13, 110, 253, 0.25);--bs-btn-close-focus-opacity:1;--bs-btn-close-disabled-opacity:0.25;--bs-btn-close-white-filter:invert(1) grayscale(100%) brightness(200%);box-sizing:content-box;width:1em;height:1em;padding:.25em .25em;color:var(--bs-btn-close-color);background:transparent var(--bs-btn-close-bg) center/1em auto no-repeat;border:0;border-radius:.375rem;opacity:var(--bs-btn-close-opacity)}.btn-close:hover{color:var(--bs-btn-close-color);text-decoration:none;opacity:var(--bs-btn-close-hover-opacity)}.btn-close:focus{outline:0;box-shadow:var(--bs-btn-close-focus-shadow);opacity:var(--bs-btn-close-focus-opacity)}.btn-close.disabled,.btn-close:disabled{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:var(--bs-btn-close-disabled-opacity)}.btn-close-white{filter:var(--bs-btn-close-white-filter)}[data-bs-theme=dark] .btn-close{filter:var(--bs-btn-close-white-filter)}.toast{--bs-toast-zindex:1090;--bs-toast-padding-x:0.75rem;--bs-toast-padding-y:0.5rem;--bs-toast-spacing:1.5rem;--bs-toast-max-width:350px;--bs-toast-font-size:0.875rem;--bs-toast-color: ;--bs-toast-bg:rgba(var(--bs-body-bg-rgb), 0.85);--bs-toast-border-width:var(--bs-border-width);--bs-toast-border-color:var(--bs-border-color-translucent);--bs-toast-border-radius:var(--bs-border-radius);--bs-toast-box-shadow:var(--bs-box-shadow);--bs-toast-header-color:var(--bs-secondary-color);--bs-toast-header-bg:rgba(var(--bs-body-bg-rgb), 0.85);--bs-toast-header-border-color:var(--bs-border-color-translucent);width:var(--bs-toast-max-width);max-width:100%;font-size:var(--bs-toast-font-size);color:var(--bs-toast-color);pointer-events:auto;background-color:var(--bs-toast-bg);background-clip:padding-box;border:var(--bs-toast-border-width) solid var(--bs-toast-border-color);box-shadow:var(--bs-toast-box-shadow);border-radius:var(--bs-toast-border-radius)}.toast.showing{opacity:0}.toast:not(.show){display:none}.toast-container{--bs-toast-zindex:1090;position:absolute;z-index:var(--bs-toast-zindex);width:-webkit-max-content;width:-moz-max-content;width:max-content;max-width:100%;pointer-events:none}.toast-container>:not(:last-child){margin-bottom:var(--bs-toast-spacing)}.toast-header{display:flex;align-items:center;padding:var(--bs-toast-padding-y) var(--bs-toast-padding-x);color:var(--bs-toast-header-color);background-color:var(--bs-toast-header-bg);background-clip:padding-box;border-bottom:var(--bs-toast-border-width) solid var(--bs-toast-header-border-color);border-top-left-radius:calc(var(--bs-toast-border-radius) - var(--bs-toast-border-width));border-top-right-radius:calc(var(--bs-toast-border-radius) - var(--bs-toast-border-width))}.toast-header .btn-close{margin-right:calc(-.5 * var(--bs-toast-padding-x));margin-left:var(--bs-toast-padding-x)}.toast-body{padding:var(--bs-toast-padding-x);word-wrap:break-word}.modal{--bs-modal-zindex:1055;--bs-modal-width:500px;--bs-modal-padding:1rem;--bs-modal-margin:0.5rem;--bs-modal-color: ;--bs-modal-bg:var(--bs-body-bg);--bs-modal-border-color:var(--bs-border-color-translucent);--bs-modal-border-width:var(--bs-border-width);--bs-modal-border-radius:var(--bs-border-radius-lg);--bs-modal-box-shadow:0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);--bs-modal-inner-border-radius:calc(var(--bs-border-radius-lg) - (var(--bs-border-width)));--bs-modal-header-padding-x:1rem;--bs-modal-header-padding-y:1rem;--bs-modal-header-padding:1rem 1rem;--bs-modal-header-border-color:var(--bs-border-color);--bs-modal-header-border-width:var(--bs-border-width);--bs-modal-title-line-height:1.5;--bs-modal-footer-gap:0.5rem;--bs-modal-footer-bg: ;--bs-modal-footer-border-color:var(--bs-border-color);--bs-modal-footer-border-width:var(--bs-border-width);position:fixed;top:0;left:0;z-index:var(--bs-modal-zindex);display:none;width:100%;height:100%;overflow-x:hidden;overflow-y:auto;outline:0}.modal-dialog{position:relative;width:auto;margin:var(--bs-modal-margin);pointer-events:none}.modal.fade .modal-dialog{transition:transform .3s ease-out;transform:translate(0,-50px)}@media (prefers-reduced-motion:reduce){.modal.fade .modal-dialog{transition:none}}.modal.show .modal-dialog{transform:none}.modal.modal-static .modal-dialog{transform:scale(1.02)}.modal-dialog-scrollable{height:calc(100% - var(--bs-modal-margin) * 2)}.modal-dialog-scrollable .modal-content{max-height:100%;overflow:hidden}.modal-dialog-scrollable .modal-body{overflow-y:auto}.modal-dialog-centered{display:flex;align-items:center;min-height:calc(100% - var(--bs-modal-margin) * 2)}.modal-content{position:relative;display:flex;flex-direction:column;width:100%;color:var(--bs-modal-color);pointer-events:auto;background-color:var(--bs-modal-bg);background-clip:padding-box;border:var(--bs-modal-border-width) solid var(--bs-modal-border-color);border-radius:var(--bs-modal-border-radius);outline:0}.modal-backdrop{--bs-backdrop-zindex:1050;--bs-backdrop-bg:#000;--bs-backdrop-opacity:0.5;position:fixed;top:0;left:0;z-index:var(--bs-backdrop-zindex);width:100vw;height:100vh;background-color:var(--bs-backdrop-bg)}.modal-backdrop.fade{opacity:0}.modal-backdrop.show{opacity:var(--bs-backdrop-opacity)}.modal-header{display:flex;flex-shrink:0;align-items:center;justify-content:space-between;padding:var(--bs-modal-header-padding);border-bottom:var(--bs-modal-header-border-width) solid var(--bs-modal-header-border-color);border-top-left-radius:var(--bs-modal-inner-border-radius);border-top-right-radius:var(--bs-modal-inner-border-radius)}.modal-header .btn-close{padding:calc(var(--bs-modal-header-padding-y) * .5) calc(var(--bs-modal-header-padding-x) * .5);margin:calc(-.5 * var(--bs-modal-header-padding-y)) calc(-.5 * var(--bs-modal-header-padding-x)) calc(-.5 * var(--bs-modal-header-padding-y)) auto}.modal-title{margin-bottom:0;line-height:var(--bs-modal-title-line-height)}.modal-body{position:relative;flex:1 1 auto;padding:var(--bs-modal-padding)}.modal-footer{display:flex;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;padding:calc(var(--bs-modal-padding) - var(--bs-modal-footer-gap) * .5);background-color:var(--bs-modal-footer-bg);border-top:var(--bs-modal-footer-border-width) solid var(--bs-modal-footer-border-color);border-bottom-right-radius:var(--bs-modal-inner-border-radius);border-bottom-left-radius:var(--bs-modal-inner-border-radius)}.modal-footer>*{margin:calc(var(--bs-modal-footer-gap) * .5)}@media (min-width:576px){.modal{--bs-modal-margin:1.75rem;--bs-modal-box-shadow:0 0.5rem 1rem rgba(0, 0, 0, 0.15)}.modal-dialog{max-width:var(--bs-modal-width);margin-right:auto;margin-left:auto}.modal-sm{--bs-modal-width:300px}}@media (min-width:992px){.modal-lg,.modal-xl{--bs-modal-width:800px}}@media (min-width:1200px){.modal-xl{--bs-modal-width:1140px}}.modal-fullscreen{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen .modal-footer,.modal-fullscreen .modal-header{border-radius:0}.modal-fullscreen .modal-body{overflow-y:auto}@media (max-width:575.98px){.modal-fullscreen-sm-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-sm-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-sm-down .modal-footer,.modal-fullscreen-sm-down .modal-header{border-radius:0}.modal-fullscreen-sm-down .modal-body{overflow-y:auto}}@media (max-width:767.98px){.modal-fullscreen-md-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-md-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-md-down .modal-footer,.modal-fullscreen-md-down .modal-header{border-radius:0}.modal-fullscreen-md-down .modal-body{overflow-y:auto}}@media (max-width:991.98px){.modal-fullscreen-lg-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-lg-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-lg-down .modal-footer,.modal-fullscreen-lg-down .modal-header{border-radius:0}.modal-fullscreen-lg-down .modal-body{overflow-y:auto}}@media (max-width:1199.98px){.modal-fullscreen-xl-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-xl-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-xl-down .modal-footer,.modal-fullscreen-xl-down .modal-header{border-radius:0}.modal-fullscreen-xl-down .modal-body{overflow-y:auto}}@media (max-width:1399.98px){.modal-fullscreen-xxl-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-xxl-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-xxl-down .modal-footer,.modal-fullscreen-xxl-down .modal-header{border-radius:0}.modal-fullscreen-xxl-down .modal-body{overflow-y:auto}}.tooltip{--bs-tooltip-zindex:1080;--bs-tooltip-max-width:200px;--bs-tooltip-padding-x:0.5rem;--bs-tooltip-padding-y:0.25rem;--bs-tooltip-margin: ;--bs-tooltip-font-size:0.875rem;--bs-tooltip-color:var(--bs-body-bg);--bs-tooltip-bg:var(--bs-emphasis-color);--bs-tooltip-border-radius:var(--bs-border-radius);--bs-tooltip-opacity:0.9;--bs-tooltip-arrow-width:0.8rem;--bs-tooltip-arrow-height:0.4rem;z-index:var(--bs-tooltip-zindex);display:block;margin:var(--bs-tooltip-margin);font-family:var(--bs-font-sans-serif);font-style:normal;font-weight:400;line-height:1.5;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;white-space:normal;word-spacing:normal;line-break:auto;font-size:var(--bs-tooltip-font-size);word-wrap:break-word;opacity:0}.tooltip.show{opacity:var(--bs-tooltip-opacity)}.tooltip .tooltip-arrow{display:block;width:var(--bs-tooltip-arrow-width);height:var(--bs-tooltip-arrow-height)}.tooltip .tooltip-arrow::before{position:absolute;content:"";border-color:transparent;border-style:solid}.bs-tooltip-auto[data-popper-placement^=top] .tooltip-arrow,.bs-tooltip-top .tooltip-arrow{bottom:calc(-1 * var(--bs-tooltip-arrow-height))}.bs-tooltip-auto[data-popper-placement^=top] .tooltip-arrow::before,.bs-tooltip-top .tooltip-arrow::before{top:-1px;border-width:var(--bs-tooltip-arrow-height) calc(var(--bs-tooltip-arrow-width) * .5) 0;border-top-color:var(--bs-tooltip-bg)}.bs-tooltip-auto[data-popper-placement^=right] .tooltip-arrow,.bs-tooltip-end .tooltip-arrow{left:calc(-1 * var(--bs-tooltip-arrow-height));width:var(--bs-tooltip-arrow-height);height:var(--bs-tooltip-arrow-width)}.bs-tooltip-auto[data-popper-placement^=right] .tooltip-arrow::before,.bs-tooltip-end .tooltip-arrow::before{right:-1px;border-width:calc(var(--bs-tooltip-arrow-width) * .5) var(--bs-tooltip-arrow-height) calc(var(--bs-tooltip-arrow-width) * .5) 0;border-right-color:var(--bs-tooltip-bg)}.bs-tooltip-auto[data-popper-placement^=bottom] .tooltip-arrow,.bs-tooltip-bottom .tooltip-arrow{top:calc(-1 * var(--bs-tooltip-arrow-height))}.bs-tooltip-auto[data-popper-placement^=bottom] .tooltip-arrow::before,.bs-tooltip-bottom .tooltip-arrow::before{bottom:-1px;border-width:0 calc(var(--bs-tooltip-arrow-width) * .5) var(--bs-tooltip-arrow-height);border-bottom-color:var(--bs-tooltip-bg)}.bs-tooltip-auto[data-popper-placement^=left] .tooltip-arrow,.bs-tooltip-start .tooltip-arrow{right:calc(-1 * var(--bs-tooltip-arrow-height));width:var(--bs-tooltip-arrow-height);height:var(--bs-tooltip-arrow-width)}.bs-tooltip-auto[data-popper-placement^=left] .tooltip-arrow::before,.bs-tooltip-start .tooltip-arrow::before{left:-1px;border-width:calc(var(--bs-tooltip-arrow-width) * .5) 0 calc(var(--bs-tooltip-arrow-width) * .5) var(--bs-tooltip-arrow-height);border-left-color:var(--bs-tooltip-bg)}.tooltip-inner{max-width:var(--bs-tooltip-max-width);padding:var(--bs-tooltip-padding-y) var(--bs-tooltip-padding-x);color:var(--bs-tooltip-color);text-align:center;background-color:var(--bs-tooltip-bg);border-radius:var(--bs-tooltip-border-radius)}.popover{--bs-popover-zindex:1070;--bs-popover-max-width:276px;--bs-popover-font-size:0.875rem;--bs-popover-bg:var(--bs-body-bg);--bs-popover-border-width:var(--bs-border-width);--bs-popover-border-color:var(--bs-border-color-translucent);--bs-popover-border-radius:var(--bs-border-radius-lg);--bs-popover-inner-border-radius:calc(var(--bs-border-radius-lg) - var(--bs-border-width));--bs-popover-box-shadow:0 0.5rem 1rem rgba(0, 0, 0, 0.15);--bs-popover-header-padding-x:1rem;--bs-popover-header-padding-y:0.5rem;--bs-popover-header-font-size:1rem;--bs-popover-header-color:inherit;--bs-popover-header-bg:var(--bs-secondary-bg);--bs-popover-body-padding-x:1rem;--bs-popover-body-padding-y:1rem;--bs-popover-body-color:var(--bs-body-color);--bs-popover-arrow-width:1rem;--bs-popover-arrow-height:0.5rem;--bs-popover-arrow-border:var(--bs-popover-border-color);z-index:var(--bs-popover-zindex);display:block;max-width:var(--bs-popover-max-width);font-family:var(--bs-font-sans-serif);font-style:normal;font-weight:400;line-height:1.5;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;white-space:normal;word-spacing:normal;line-break:auto;font-size:var(--bs-popover-font-size);word-wrap:break-word;background-color:var(--bs-popover-bg);background-clip:padding-box;border:var(--bs-popover-border-width) solid var(--bs-popover-border-color);border-radius:var(--bs-popover-border-radius)}.popover .popover-arrow{display:block;width:var(--bs-popover-arrow-width);height:var(--bs-popover-arrow-height)}.popover .popover-arrow::after,.popover .popover-arrow::before{position:absolute;display:block;content:"";border-color:transparent;border-style:solid;border-width:0}.bs-popover-auto[data-popper-placement^=top]>.popover-arrow,.bs-popover-top>.popover-arrow{bottom:calc(-1 * (var(--bs-popover-arrow-height)) - var(--bs-popover-border-width))}.bs-popover-auto[data-popper-placement^=top]>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=top]>.popover-arrow::before,.bs-popover-top>.popover-arrow::after,.bs-popover-top>.popover-arrow::before{border-width:var(--bs-popover-arrow-height) calc(var(--bs-popover-arrow-width) * .5) 0}.bs-popover-auto[data-popper-placement^=top]>.popover-arrow::before,.bs-popover-top>.popover-arrow::before{bottom:0;border-top-color:var(--bs-popover-arrow-border)}.bs-popover-auto[data-popper-placement^=top]>.popover-arrow::after,.bs-popover-top>.popover-arrow::after{bottom:var(--bs-popover-border-width);border-top-color:var(--bs-popover-bg)}.bs-popover-auto[data-popper-placement^=right]>.popover-arrow,.bs-popover-end>.popover-arrow{left:calc(-1 * (var(--bs-popover-arrow-height)) - var(--bs-popover-border-width));width:var(--bs-popover-arrow-height);height:var(--bs-popover-arrow-width)}.bs-popover-auto[data-popper-placement^=right]>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=right]>.popover-arrow::before,.bs-popover-end>.popover-arrow::after,.bs-popover-end>.popover-arrow::before{border-width:calc(var(--bs-popover-arrow-width) * .5) var(--bs-popover-arrow-height) calc(var(--bs-popover-arrow-width) * .5) 0}.bs-popover-auto[data-popper-placement^=right]>.popover-arrow::before,.bs-popover-end>.popover-arrow::before{left:0;border-right-color:var(--bs-popover-arrow-border)}.bs-popover-auto[data-popper-placement^=right]>.popover-arrow::after,.bs-popover-end>.popover-arrow::after{left:var(--bs-popover-border-width);border-right-color:var(--bs-popover-bg)}.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow,.bs-popover-bottom>.popover-arrow{top:calc(-1 * (var(--bs-popover-arrow-height)) - var(--bs-popover-border-width))}.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow::before,.bs-popover-bottom>.popover-arrow::after,.bs-popover-bottom>.popover-arrow::before{border-width:0 calc(var(--bs-popover-arrow-width) * .5) var(--bs-popover-arrow-height)}.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow::before,.bs-popover-bottom>.popover-arrow::before{top:0;border-bottom-color:var(--bs-popover-arrow-border)}.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow::after,.bs-popover-bottom>.popover-arrow::after{top:var(--bs-popover-border-width);border-bottom-color:var(--bs-popover-bg)}.bs-popover-auto[data-popper-placement^=bottom] .popover-header::before,.bs-popover-bottom .popover-header::before{position:absolute;top:0;left:50%;display:block;width:var(--bs-popover-arrow-width);margin-left:calc(-.5 * var(--bs-popover-arrow-width));content:"";border-bottom:var(--bs-popover-border-width) solid var(--bs-popover-header-bg)}.bs-popover-auto[data-popper-placement^=left]>.popover-arrow,.bs-popover-start>.popover-arrow{right:calc(-1 * (var(--bs-popover-arrow-height)) - var(--bs-popover-border-width));width:var(--bs-popover-arrow-height);height:var(--bs-popover-arrow-width)}.bs-popover-auto[data-popper-placement^=left]>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=left]>.popover-arrow::before,.bs-popover-start>.popover-arrow::after,.bs-popover-start>.popover-arrow::before{border-width:calc(var(--bs-popover-arrow-width) * .5) 0 calc(var(--bs-popover-arrow-width) * .5) var(--bs-popover-arrow-height)}.bs-popover-auto[data-popper-placement^=left]>.popover-arrow::before,.bs-popover-start>.popover-arrow::before{right:0;border-left-color:var(--bs-popover-arrow-border)}.bs-popover-auto[data-popper-placement^=left]>.popover-arrow::after,.bs-popover-start>.popover-arrow::after{right:var(--bs-popover-border-width);border-left-color:var(--bs-popover-bg)}.popover-header{padding:var(--bs-popover-header-padding-y) var(--bs-popover-header-padding-x);margin-bottom:0;font-size:var(--bs-popover-header-font-size);color:var(--bs-popover-header-color);background-color:var(--bs-popover-header-bg);border-bottom:var(--bs-popover-border-width) solid var(--bs-popover-border-color);border-top-left-radius:var(--bs-popover-inner-border-radius);border-top-right-radius:var(--bs-popover-inner-border-radius)}.popover-header:empty{display:none}.popover-body{padding:var(--bs-popover-body-padding-y) var(--bs-popover-body-padding-x);color:var(--bs-popover-body-color)}.carousel{position:relative}.carousel.pointer-event{touch-action:pan-y}.carousel-inner{position:relative;width:100%;overflow:hidden}.carousel-inner::after{display:block;clear:both;content:""}.carousel-item{position:relative;display:none;float:left;width:100%;margin-right:-100%;-webkit-backface-visibility:hidden;backface-visibility:hidden;transition:transform .6s ease-in-out}@media (prefers-reduced-motion:reduce){.carousel-item{transition:none}}.carousel-item-next,.carousel-item-prev,.carousel-item.active{display:block}.active.carousel-item-end,.carousel-item-next:not(.carousel-item-start){transform:translateX(100%)}.active.carousel-item-start,.carousel-item-prev:not(.carousel-item-end){transform:translateX(-100%)}.carousel-fade .carousel-item{opacity:0;transition-property:opacity;transform:none}.carousel-fade .carousel-item-next.carousel-item-start,.carousel-fade .carousel-item-prev.carousel-item-end,.carousel-fade .carousel-item.active{z-index:1;opacity:1}.carousel-fade .active.carousel-item-end,.carousel-fade .active.carousel-item-start{z-index:0;opacity:0;transition:opacity 0s .6s}@media (prefers-reduced-motion:reduce){.carousel-fade .active.carousel-item-end,.carousel-fade .active.carousel-item-start{transition:none}}.carousel-control-next,.carousel-control-prev{position:absolute;top:0;bottom:0;z-index:1;display:flex;align-items:center;justify-content:center;width:15%;padding:0;color:#fff;text-align:center;background:0 0;border:0;opacity:.5;transition:opacity .15s ease}@media (prefers-reduced-motion:reduce){.carousel-control-next,.carousel-control-prev{transition:none}}.carousel-control-next:focus,.carousel-control-next:hover,.carousel-control-prev:focus,.carousel-control-prev:hover{color:#fff;text-decoration:none;outline:0;opacity:.9}.carousel-control-prev{left:0}.carousel-control-next{right:0}.carousel-control-next-icon,.carousel-control-prev-icon{display:inline-block;width:2rem;height:2rem;background-repeat:no-repeat;background-position:50%;background-size:100% 100%}.carousel-control-prev-icon{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23fff'%3e%3cpath d='M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z'/%3e%3c/svg%3e")}.carousel-control-next-icon{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23fff'%3e%3cpath d='M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e")}.carousel-indicators{position:absolute;right:0;bottom:0;left:0;z-index:2;display:flex;justify-content:center;padding:0;margin-right:15%;margin-bottom:1rem;margin-left:15%}.carousel-indicators [data-bs-target]{box-sizing:content-box;flex:0 1 auto;width:30px;height:3px;padding:0;margin-right:3px;margin-left:3px;text-indent:-999px;cursor:pointer;background-color:#fff;background-clip:padding-box;border:0;border-top:10px solid transparent;border-bottom:10px solid transparent;opacity:.5;transition:opacity .6s ease}@media (prefers-reduced-motion:reduce){.carousel-indicators [data-bs-target]{transition:none}}.carousel-indicators .active{opacity:1}.carousel-caption{position:absolute;right:15%;bottom:1.25rem;left:15%;padding-top:1.25rem;padding-bottom:1.25rem;color:#fff;text-align:center}.carousel-dark .carousel-control-next-icon,.carousel-dark .carousel-control-prev-icon{filter:invert(1) grayscale(100)}.carousel-dark .carousel-indicators [data-bs-target]{background-color:#000}.carousel-dark .carousel-caption{color:#000}[data-bs-theme=dark] .carousel .carousel-control-next-icon,[data-bs-theme=dark] .carousel .carousel-control-prev-icon,[data-bs-theme=dark].carousel .carousel-control-next-icon,[data-bs-theme=dark].carousel .carousel-control-prev-icon{filter:invert(1) grayscale(100)}[data-bs-theme=dark] .carousel .carousel-indicators [data-bs-target],[data-bs-theme=dark].carousel .carousel-indicators [data-bs-target]{background-color:#000}[data-bs-theme=dark] .carousel .carousel-caption,[data-bs-theme=dark].carousel .carousel-caption{color:#000}.spinner-border,.spinner-grow{display:inline-block;width:var(--bs-spinner-width);height:var(--bs-spinner-height);vertical-align:var(--bs-spinner-vertical-align);border-radius:50%;animation:var(--bs-spinner-animation-speed) linear infinite var(--bs-spinner-animation-name)}@keyframes spinner-border{to{transform:rotate(360deg)}}.spinner-border{--bs-spinner-width:2rem;--bs-spinner-height:2rem;--bs-spinner-vertical-align:-0.125em;--bs-spinner-border-width:0.25em;--bs-spinner-animation-speed:0.75s;--bs-spinner-animation-name:spinner-border;border:var(--bs-spinner-border-width) solid currentcolor;border-right-color:transparent}.spinner-border-sm{--bs-spinner-width:1rem;--bs-spinner-height:1rem;--bs-spinner-border-width:0.2em}@keyframes spinner-grow{0%{transform:scale(0)}50%{opacity:1;transform:none}}.spinner-grow{--bs-spinner-width:2rem;--bs-spinner-height:2rem;--bs-spinner-vertical-align:-0.125em;--bs-spinner-animation-speed:0.75s;--bs-spinner-animation-name:spinner-grow;background-color:currentcolor;opacity:0}.spinner-grow-sm{--bs-spinner-width:1rem;--bs-spinner-height:1rem}@media (prefers-reduced-motion:reduce){.spinner-border,.spinner-grow{--bs-spinner-animation-speed:1.5s}}.offcanvas,.offcanvas-lg,.offcanvas-md,.offcanvas-sm,.offcanvas-xl,.offcanvas-xxl{--bs-offcanvas-zindex:1045;--bs-offcanvas-width:400px;--bs-offcanvas-height:30vh;--bs-offcanvas-padding-x:1rem;--bs-offcanvas-padding-y:1rem;--bs-offcanvas-color:var(--bs-body-color);--bs-offcanvas-bg:var(--bs-body-bg);--bs-offcanvas-border-width:var(--bs-border-width);--bs-offcanvas-border-color:var(--bs-border-color-translucent);--bs-offcanvas-box-shadow:0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);--bs-offcanvas-transition:transform 0.3s ease-in-out;--bs-offcanvas-title-line-height:1.5}@media (max-width:575.98px){.offcanvas-sm{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}}@media (max-width:575.98px) and (prefers-reduced-motion:reduce){.offcanvas-sm{transition:none}}@media (max-width:575.98px){.offcanvas-sm.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas-sm.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas-sm.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas-sm.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas-sm.show:not(.hiding),.offcanvas-sm.showing{transform:none}.offcanvas-sm.hiding,.offcanvas-sm.show,.offcanvas-sm.showing{visibility:visible}}@media (min-width:576px){.offcanvas-sm{--bs-offcanvas-height:auto;--bs-offcanvas-border-width:0;background-color:transparent!important}.offcanvas-sm .offcanvas-header{display:none}.offcanvas-sm .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:transparent!important}}@media (max-width:767.98px){.offcanvas-md{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}}@media (max-width:767.98px) and (prefers-reduced-motion:reduce){.offcanvas-md{transition:none}}@media (max-width:767.98px){.offcanvas-md.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas-md.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas-md.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas-md.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas-md.show:not(.hiding),.offcanvas-md.showing{transform:none}.offcanvas-md.hiding,.offcanvas-md.show,.offcanvas-md.showing{visibility:visible}}@media (min-width:768px){.offcanvas-md{--bs-offcanvas-height:auto;--bs-offcanvas-border-width:0;background-color:transparent!important}.offcanvas-md .offcanvas-header{display:none}.offcanvas-md .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:transparent!important}}@media (max-width:991.98px){.offcanvas-lg{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}}@media (max-width:991.98px) and (prefers-reduced-motion:reduce){.offcanvas-lg{transition:none}}@media (max-width:991.98px){.offcanvas-lg.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas-lg.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas-lg.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas-lg.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas-lg.show:not(.hiding),.offcanvas-lg.showing{transform:none}.offcanvas-lg.hiding,.offcanvas-lg.show,.offcanvas-lg.showing{visibility:visible}}@media (min-width:992px){.offcanvas-lg{--bs-offcanvas-height:auto;--bs-offcanvas-border-width:0;background-color:transparent!important}.offcanvas-lg .offcanvas-header{display:none}.offcanvas-lg .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:transparent!important}}@media (max-width:1199.98px){.offcanvas-xl{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}}@media (max-width:1199.98px) and (prefers-reduced-motion:reduce){.offcanvas-xl{transition:none}}@media (max-width:1199.98px){.offcanvas-xl.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas-xl.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas-xl.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas-xl.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas-xl.show:not(.hiding),.offcanvas-xl.showing{transform:none}.offcanvas-xl.hiding,.offcanvas-xl.show,.offcanvas-xl.showing{visibility:visible}}@media (min-width:1200px){.offcanvas-xl{--bs-offcanvas-height:auto;--bs-offcanvas-border-width:0;background-color:transparent!important}.offcanvas-xl .offcanvas-header{display:none}.offcanvas-xl .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:transparent!important}}@media (max-width:1399.98px){.offcanvas-xxl{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}}@media (max-width:1399.98px) and (prefers-reduced-motion:reduce){.offcanvas-xxl{transition:none}}@media (max-width:1399.98px){.offcanvas-xxl.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas-xxl.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas-xxl.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas-xxl.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas-xxl.show:not(.hiding),.offcanvas-xxl.showing{transform:none}.offcanvas-xxl.hiding,.offcanvas-xxl.show,.offcanvas-xxl.showing{visibility:visible}}@media (min-width:1400px){.offcanvas-xxl{--bs-offcanvas-height:auto;--bs-offcanvas-border-width:0;background-color:transparent!important}.offcanvas-xxl .offcanvas-header{display:none}.offcanvas-xxl .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:transparent!important}}.offcanvas{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}@media (prefers-reduced-motion:reduce){.offcanvas{transition:none}}.offcanvas.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas.show:not(.hiding),.offcanvas.showing{transform:none}.offcanvas.hiding,.offcanvas.show,.offcanvas.showing{visibility:visible}.offcanvas-backdrop{position:fixed;top:0;left:0;z-index:1040;width:100vw;height:100vh;background-color:#000}.offcanvas-backdrop.fade{opacity:0}.offcanvas-backdrop.show{opacity:.5}.offcanvas-header{display:flex;align-items:center;justify-content:space-between;padding:var(--bs-offcanvas-padding-y) var(--bs-offcanvas-padding-x)}.offcanvas-header .btn-close{padding:calc(var(--bs-offcanvas-padding-y) * .5) calc(var(--bs-offcanvas-padding-x) * .5);margin-top:calc(-.5 * var(--bs-offcanvas-padding-y));margin-right:calc(-.5 * var(--bs-offcanvas-padding-x));margin-bottom:calc(-.5 * var(--bs-offcanvas-padding-y))}.offcanvas-title{margin-bottom:0;line-height:var(--bs-offcanvas-title-line-height)}.offcanvas-body{flex-grow:1;padding:var(--bs-offcanvas-padding-y) var(--bs-offcanvas-padding-x);overflow-y:auto}.placeholder{display:inline-block;min-height:1em;vertical-align:middle;cursor:wait;background-color:currentcolor;opacity:.5}.placeholder.btn::before{display:inline-block;content:""}.placeholder-xs{min-height:.6em}.placeholder-sm{min-height:.8em}.placeholder-lg{min-height:1.2em}.placeholder-glow .placeholder{animation:placeholder-glow 2s ease-in-out infinite}@keyframes placeholder-glow{50%{opacity:.2}}.placeholder-wave{-webkit-mask-image:linear-gradient(130deg,#000 55%,rgba(0,0,0,0.8) 75%,#000 95%);mask-image:linear-gradient(130deg,#000 55%,rgba(0,0,0,0.8) 75%,#000 95%);-webkit-mask-size:200% 100%;mask-size:200% 100%;animation:placeholder-wave 2s linear infinite}@keyframes placeholder-wave{100%{-webkit-mask-position:-200% 0%;mask-position:-200% 0%}}.clearfix::after{display:block;clear:both;content:""}.text-bg-primary{color:#fff!important;background-color:RGBA(13,110,253,var(--bs-bg-opacity,1))!important}.text-bg-secondary{color:#fff!important;background-color:RGBA(108,117,125,var(--bs-bg-opacity,1))!important}.text-bg-success{color:#fff!important;background-color:RGBA(25,135,84,var(--bs-bg-opacity,1))!important}.text-bg-info{color:#000!important;background-color:RGBA(13,202,240,var(--bs-bg-opacity,1))!important}.text-bg-warning{color:#000!important;background-color:RGBA(255,193,7,var(--bs-bg-opacity,1))!important}.text-bg-danger{color:#fff!important;background-color:RGBA(220,53,69,var(--bs-bg-opacity,1))!important}.text-bg-light{color:#000!important;background-color:RGBA(248,249,250,var(--bs-bg-opacity,1))!important}.text-bg-dark{color:#fff!important;background-color:RGBA(33,37,41,var(--bs-bg-opacity,1))!important}.link-primary{color:RGBA(var(--bs-primary-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-primary-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-primary-rgb),var(--bs-link-underline-opacity,1))!important}.link-primary:focus,.link-primary:hover{color:RGBA(10,88,202,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(10,88,202,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(10,88,202,var(--bs-link-underline-opacity,1))!important}.link-secondary{color:RGBA(var(--bs-secondary-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-secondary-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-secondary-rgb),var(--bs-link-underline-opacity,1))!important}.link-secondary:focus,.link-secondary:hover{color:RGBA(86,94,100,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(86,94,100,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(86,94,100,var(--bs-link-underline-opacity,1))!important}.link-success{color:RGBA(var(--bs-success-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-success-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-success-rgb),var(--bs-link-underline-opacity,1))!important}.link-success:focus,.link-success:hover{color:RGBA(20,108,67,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(20,108,67,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(20,108,67,var(--bs-link-underline-opacity,1))!important}.link-info{color:RGBA(var(--bs-info-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-info-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-info-rgb),var(--bs-link-underline-opacity,1))!important}.link-info:focus,.link-info:hover{color:RGBA(61,213,243,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(61,213,243,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(61,213,243,var(--bs-link-underline-opacity,1))!important}.link-warning{color:RGBA(var(--bs-warning-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-warning-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-warning-rgb),var(--bs-link-underline-opacity,1))!important}.link-warning:focus,.link-warning:hover{color:RGBA(255,205,57,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(255,205,57,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(255,205,57,var(--bs-link-underline-opacity,1))!important}.link-danger{color:RGBA(var(--bs-danger-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-danger-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-danger-rgb),var(--bs-link-underline-opacity,1))!important}.link-danger:focus,.link-danger:hover{color:RGBA(176,42,55,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(176,42,55,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(176,42,55,var(--bs-link-underline-opacity,1))!important}.link-light{color:RGBA(var(--bs-light-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-light-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-light-rgb),var(--bs-link-underline-opacity,1))!important}.link-light:focus,.link-light:hover{color:RGBA(249,250,251,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(249,250,251,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(249,250,251,var(--bs-link-underline-opacity,1))!important}.link-dark{color:RGBA(var(--bs-dark-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-dark-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-dark-rgb),var(--bs-link-underline-opacity,1))!important}.link-dark:focus,.link-dark:hover{color:RGBA(26,30,33,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(26,30,33,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(26,30,33,var(--bs-link-underline-opacity,1))!important}.link-body-emphasis{color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-underline-opacity,1))!important}.link-body-emphasis:focus,.link-body-emphasis:hover{color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-opacity,.75))!important;-webkit-text-decoration-color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-underline-opacity,0.75))!important;text-decoration-color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-underline-opacity,0.75))!important}.focus-ring:focus{outline:0;box-shadow:var(--bs-focus-ring-x,0) var(--bs-focus-ring-y,0) var(--bs-focus-ring-blur,0) var(--bs-focus-ring-width) var(--bs-focus-ring-color)}.icon-link{display:inline-flex;gap:.375rem;align-items:center;-webkit-text-decoration-color:rgba(var(--bs-link-color-rgb),var(--bs-link-opacity,0.5));text-decoration-color:rgba(var(--bs-link-color-rgb),var(--bs-link-opacity,0.5));text-underline-offset:0.25em;-webkit-backface-visibility:hidden;backface-visibility:hidden}.icon-link>.bi{flex-shrink:0;width:1em;height:1em;fill:currentcolor;transition:.2s ease-in-out transform}@media (prefers-reduced-motion:reduce){.icon-link>.bi{transition:none}}.icon-link-hover:focus-visible>.bi,.icon-link-hover:hover>.bi{transform:var(--bs-icon-link-transform,translate3d(.25em,0,0))}.ratio{position:relative;width:100%}.ratio::before{display:block;padding-top:var(--bs-aspect-ratio);content:""}.ratio>*{position:absolute;top:0;left:0;width:100%;height:100%}.ratio-1x1{--bs-aspect-ratio:100%}.ratio-4x3{--bs-aspect-ratio:75%}.ratio-16x9{--bs-aspect-ratio:56.25%}.ratio-21x9{--bs-aspect-ratio:42.8571428571%}.fixed-top{position:fixed;top:0;right:0;left:0;z-index:1030}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.sticky-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}@media (min-width:576px){.sticky-sm-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-sm-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}@media (min-width:768px){.sticky-md-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-md-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}@media (min-width:992px){.sticky-lg-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-lg-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}@media (min-width:1200px){.sticky-xl-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-xl-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}@media (min-width:1400px){.sticky-xxl-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-xxl-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}.hstack{display:flex;flex-direction:row;align-items:center;align-self:stretch}.vstack{display:flex;flex:1 1 auto;flex-direction:column;align-self:stretch}.visually-hidden,.visually-hidden-focusable:not(:focus):not(:focus-within){width:1px!important;height:1px!important;padding:0!important;margin:-1px!important;overflow:hidden!important;clip:rect(0,0,0,0)!important;white-space:nowrap!important;border:0!important}.visually-hidden-focusable:not(:focus):not(:focus-within):not(caption),.visually-hidden:not(caption){position:absolute!important}.stretched-link::after{position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;content:""}.text-truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.vr{display:inline-block;align-self:stretch;width:1px;min-height:1em;background-color:currentcolor;opacity:.25}.align-baseline{vertical-align:baseline!important}.align-top{vertical-align:top!important}.align-middle{vertical-align:middle!important}.align-bottom{vertical-align:bottom!important}.align-text-bottom{vertical-align:text-bottom!important}.align-text-top{vertical-align:text-top!important}.float-start{float:left!important}.float-end{float:right!important}.float-none{float:none!important}.object-fit-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-none{-o-object-fit:none!important;object-fit:none!important}.opacity-0{opacity:0!important}.opacity-25{opacity:.25!important}.opacity-50{opacity:.5!important}.opacity-75{opacity:.75!important}.opacity-100{opacity:1!important}.overflow-auto{overflow:auto!important}.overflow-hidden{overflow:hidden!important}.overflow-visible{overflow:visible!important}.overflow-scroll{overflow:scroll!important}.overflow-x-auto{overflow-x:auto!important}.overflow-x-hidden{overflow-x:hidden!important}.overflow-x-visible{overflow-x:visible!important}.overflow-x-scroll{overflow-x:scroll!important}.overflow-y-auto{overflow-y:auto!important}.overflow-y-hidden{overflow-y:hidden!important}.overflow-y-visible{overflow-y:visible!important}.overflow-y-scroll{overflow-y:scroll!important}.d-inline{display:inline!important}.d-inline-block{display:inline-block!important}.d-block{display:block!important}.d-grid{display:grid!important}.d-inline-grid{display:inline-grid!important}.d-table{display:table!important}.d-table-row{display:table-row!important}.d-table-cell{display:table-cell!important}.d-flex{display:flex!important}.d-inline-flex{display:inline-flex!important}.d-none{display:none!important}.shadow{box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important}.shadow-sm{box-shadow:0 .125rem .25rem rgba(0,0,0,.075)!important}.shadow-lg{box-shadow:0 1rem 3rem rgba(0,0,0,.175)!important}.shadow-none{box-shadow:none!important}.focus-ring-primary{--bs-focus-ring-color:rgba(var(--bs-primary-rgb), var(--bs-focus-ring-opacity))}.focus-ring-secondary{--bs-focus-ring-color:rgba(var(--bs-secondary-rgb), var(--bs-focus-ring-opacity))}.focus-ring-success{--bs-focus-ring-color:rgba(var(--bs-success-rgb), var(--bs-focus-ring-opacity))}.focus-ring-info{--bs-focus-ring-color:rgba(var(--bs-info-rgb), var(--bs-focus-ring-opacity))}.focus-ring-warning{--bs-focus-ring-color:rgba(var(--bs-warning-rgb), var(--bs-focus-ring-opacity))}.focus-ring-danger{--bs-focus-ring-color:rgba(var(--bs-danger-rgb), var(--bs-focus-ring-opacity))}.focus-ring-light{--bs-focus-ring-color:rgba(var(--bs-light-rgb), var(--bs-focus-ring-opacity))}.focus-ring-dark{--bs-focus-ring-color:rgba(var(--bs-dark-rgb), var(--bs-focus-ring-opacity))}.position-static{position:static!important}.position-relative{position:relative!important}.position-absolute{position:absolute!important}.position-fixed{position:fixed!important}.position-sticky{position:-webkit-sticky!important;position:sticky!important}.top-0{top:0!important}.top-50{top:50%!important}.top-100{top:100%!important}.bottom-0{bottom:0!important}.bottom-50{bottom:50%!important}.bottom-100{bottom:100%!important}.start-0{left:0!important}.start-50{left:50%!important}.start-100{left:100%!important}.end-0{right:0!important}.end-50{right:50%!important}.end-100{right:100%!important}.translate-middle{transform:translate(-50%,-50%)!important}.translate-middle-x{transform:translateX(-50%)!important}.translate-middle-y{transform:translateY(-50%)!important}.border{border:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color)!important}.border-0{border:0!important}.border-top{border-top:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color)!important}.border-top-0{border-top:0!important}.border-end{border-right:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color)!important}.border-end-0{border-right:0!important}.border-bottom{border-bottom:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color)!important}.border-bottom-0{border-bottom:0!important}.border-start{border-left:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color)!important}.border-start-0{border-left:0!important}.border-primary{--bs-border-opacity:1;border-color:rgba(var(--bs-primary-rgb),var(--bs-border-opacity))!important}.border-secondary{--bs-border-opacity:1;border-color:rgba(var(--bs-secondary-rgb),var(--bs-border-opacity))!important}.border-success{--bs-border-opacity:1;border-color:rgba(var(--bs-success-rgb),var(--bs-border-opacity))!important}.border-info{--bs-border-opacity:1;border-color:rgba(var(--bs-info-rgb),var(--bs-border-opacity))!important}.border-warning{--bs-border-opacity:1;border-color:rgba(var(--bs-warning-rgb),var(--bs-border-opacity))!important}.border-danger{--bs-border-opacity:1;border-color:rgba(var(--bs-danger-rgb),var(--bs-border-opacity))!important}.border-light{--bs-border-opacity:1;border-color:rgba(var(--bs-light-rgb),var(--bs-border-opacity))!important}.border-dark{--bs-border-opacity:1;border-color:rgba(var(--bs-dark-rgb),var(--bs-border-opacity))!important}.border-black{--bs-border-opacity:1;border-color:rgba(var(--bs-black-rgb),var(--bs-border-opacity))!important}.border-white{--bs-border-opacity:1;border-color:rgba(var(--bs-white-rgb),var(--bs-border-opacity))!important}.border-primary-subtle{border-color:var(--bs-primary-border-subtle)!important}.border-secondary-subtle{border-color:var(--bs-secondary-border-subtle)!important}.border-success-subtle{border-color:var(--bs-success-border-subtle)!important}.border-info-subtle{border-color:var(--bs-info-border-subtle)!important}.border-warning-subtle{border-color:var(--bs-warning-border-subtle)!important}.border-danger-subtle{border-color:var(--bs-danger-border-subtle)!important}.border-light-subtle{border-color:var(--bs-light-border-subtle)!important}.border-dark-subtle{border-color:var(--bs-dark-border-subtle)!important}.border-1{border-width:1px!important}.border-2{border-width:2px!important}.border-3{border-width:3px!important}.border-4{border-width:4px!important}.border-5{border-width:5px!important}.border-opacity-10{--bs-border-opacity:0.1}.border-opacity-25{--bs-border-opacity:0.25}.border-opacity-50{--bs-border-opacity:0.5}.border-opacity-75{--bs-border-opacity:0.75}.border-opacity-100{--bs-border-opacity:1}.w-25{width:25%!important}.w-50{width:50%!important}.w-75{width:75%!important}.w-100{width:100%!important}.w-auto{width:auto!important}.mw-100{max-width:100%!important}.vw-100{width:100vw!important}.min-vw-100{min-width:100vw!important}.h-25{height:25%!important}.h-50{height:50%!important}.h-75{height:75%!important}.h-100{height:100%!important}.h-auto{height:auto!important}.mh-100{max-height:100%!important}.vh-100{height:100vh!important}.min-vh-100{min-height:100vh!important}.flex-fill{flex:1 1 auto!important}.flex-row{flex-direction:row!important}.flex-column{flex-direction:column!important}.flex-row-reverse{flex-direction:row-reverse!important}.flex-column-reverse{flex-direction:column-reverse!important}.flex-grow-0{flex-grow:0!important}.flex-grow-1{flex-grow:1!important}.flex-shrink-0{flex-shrink:0!important}.flex-shrink-1{flex-shrink:1!important}.flex-wrap{flex-wrap:wrap!important}.flex-nowrap{flex-wrap:nowrap!important}.flex-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-start{justify-content:flex-start!important}.justify-content-end{justify-content:flex-end!important}.justify-content-center{justify-content:center!important}.justify-content-between{justify-content:space-between!important}.justify-content-around{justify-content:space-around!important}.justify-content-evenly{justify-content:space-evenly!important}.align-items-start{align-items:flex-start!important}.align-items-end{align-items:flex-end!important}.align-items-center{align-items:center!important}.align-items-baseline{align-items:baseline!important}.align-items-stretch{align-items:stretch!important}.align-content-start{align-content:flex-start!important}.align-content-end{align-content:flex-end!important}.align-content-center{align-content:center!important}.align-content-between{align-content:space-between!important}.align-content-around{align-content:space-around!important}.align-content-stretch{align-content:stretch!important}.align-self-auto{align-self:auto!important}.align-self-start{align-self:flex-start!important}.align-self-end{align-self:flex-end!important}.align-self-center{align-self:center!important}.align-self-baseline{align-self:baseline!important}.align-self-stretch{align-self:stretch!important}.order-first{order:-1!important}.order-0{order:0!important}.order-1{order:1!important}.order-2{order:2!important}.order-3{order:3!important}.order-4{order:4!important}.order-5{order:5!important}.order-last{order:6!important}.m-0{margin:0!important}.m-1{margin:.25rem!important}.m-2{margin:.5rem!important}.m-3{margin:1rem!important}.m-4{margin:1.5rem!important}.m-5{margin:3rem!important}.m-auto{margin:auto!important}.mx-0{margin-right:0!important;margin-left:0!important}.mx-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-3{margin-right:1rem!important;margin-left:1rem!important}.mx-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-5{margin-right:3rem!important;margin-left:3rem!important}.mx-auto{margin-right:auto!important;margin-left:auto!important}.my-0{margin-top:0!important;margin-bottom:0!important}.my-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-0{margin-top:0!important}.mt-1{margin-top:.25rem!important}.mt-2{margin-top:.5rem!important}.mt-3{margin-top:1rem!important}.mt-4{margin-top:1.5rem!important}.mt-5{margin-top:3rem!important}.mt-auto{margin-top:auto!important}.me-0{margin-right:0!important}.me-1{margin-right:.25rem!important}.me-2{margin-right:.5rem!important}.me-3{margin-right:1rem!important}.me-4{margin-right:1.5rem!important}.me-5{margin-right:3rem!important}.me-auto{margin-right:auto!important}.mb-0{margin-bottom:0!important}.mb-1{margin-bottom:.25rem!important}.mb-2{margin-bottom:.5rem!important}.mb-3{margin-bottom:1rem!important}.mb-4{margin-bottom:1.5rem!important}.mb-5{margin-bottom:3rem!important}.mb-auto{margin-bottom:auto!important}.ms-0{margin-left:0!important}.ms-1{margin-left:.25rem!important}.ms-2{margin-left:.5rem!important}.ms-3{margin-left:1rem!important}.ms-4{margin-left:1.5rem!important}.ms-5{margin-left:3rem!important}.ms-auto{margin-left:auto!important}.p-0{padding:0!important}.p-1{padding:.25rem!important}.p-2{padding:.5rem!important}.p-3{padding:1rem!important}.p-4{padding:1.5rem!important}.p-5{padding:3rem!important}.px-0{padding-right:0!important;padding-left:0!important}.px-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-3{padding-right:1rem!important;padding-left:1rem!important}.px-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-5{padding-right:3rem!important;padding-left:3rem!important}.py-0{padding-top:0!important;padding-bottom:0!important}.py-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-0{padding-top:0!important}.pt-1{padding-top:.25rem!important}.pt-2{padding-top:.5rem!important}.pt-3{padding-top:1rem!important}.pt-4{padding-top:1.5rem!important}.pt-5{padding-top:3rem!important}.pe-0{padding-right:0!important}.pe-1{padding-right:.25rem!important}.pe-2{padding-right:.5rem!important}.pe-3{padding-right:1rem!important}.pe-4{padding-right:1.5rem!important}.pe-5{padding-right:3rem!important}.pb-0{padding-bottom:0!important}.pb-1{padding-bottom:.25rem!important}.pb-2{padding-bottom:.5rem!important}.pb-3{padding-bottom:1rem!important}.pb-4{padding-bottom:1.5rem!important}.pb-5{padding-bottom:3rem!important}.ps-0{padding-left:0!important}.ps-1{padding-left:.25rem!important}.ps-2{padding-left:.5rem!important}.ps-3{padding-left:1rem!important}.ps-4{padding-left:1.5rem!important}.ps-5{padding-left:3rem!important}.gap-0{gap:0!important}.gap-1{gap:.25rem!important}.gap-2{gap:.5rem!important}.gap-3{gap:1rem!important}.gap-4{gap:1.5rem!important}.gap-5{gap:3rem!important}.row-gap-0{row-gap:0!important}.row-gap-1{row-gap:.25rem!important}.row-gap-2{row-gap:.5rem!important}.row-gap-3{row-gap:1rem!important}.row-gap-4{row-gap:1.5rem!important}.row-gap-5{row-gap:3rem!important}.column-gap-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.font-monospace{font-family:var(--bs-font-monospace)!important}.fs-1{font-size:calc(1.375rem + 1.5vw)!important}.fs-2{font-size:calc(1.325rem + .9vw)!important}.fs-3{font-size:calc(1.3rem + .6vw)!important}.fs-4{font-size:calc(1.275rem + .3vw)!important}.fs-5{font-size:1.25rem!important}.fs-6{font-size:1rem!important}.fst-italic{font-style:italic!important}.fst-normal{font-style:normal!important}.fw-lighter{font-weight:lighter!important}.fw-light{font-weight:300!important}.fw-normal{font-weight:400!important}.fw-medium{font-weight:500!important}.fw-semibold{font-weight:600!important}.fw-bold{font-weight:700!important}.fw-bolder{font-weight:bolder!important}.lh-1{line-height:1!important}.lh-sm{line-height:1.25!important}.lh-base{line-height:1.5!important}.lh-lg{line-height:2!important}.text-start{text-align:left!important}.text-end{text-align:right!important}.text-center{text-align:center!important}.text-decoration-none{text-decoration:none!important}.text-decoration-underline{text-decoration:underline!important}.text-decoration-line-through{text-decoration:line-through!important}.text-lowercase{text-transform:lowercase!important}.text-uppercase{text-transform:uppercase!important}.text-capitalize{text-transform:capitalize!important}.text-wrap{white-space:normal!important}.text-nowrap{white-space:nowrap!important}.text-break{word-wrap:break-word!important;word-break:break-word!important}.text-primary{--bs-text-opacity:1;color:rgba(var(--bs-primary-rgb),var(--bs-text-opacity))!important}.text-secondary{--bs-text-opacity:1;color:rgba(var(--bs-secondary-rgb),var(--bs-text-opacity))!important}.text-success{--bs-text-opacity:1;color:rgba(var(--bs-success-rgb),var(--bs-text-opacity))!important}.text-info{--bs-text-opacity:1;color:rgba(var(--bs-info-rgb),var(--bs-text-opacity))!important}.text-warning{--bs-text-opacity:1;color:rgba(var(--bs-warning-rgb),var(--bs-text-opacity))!important}.text-danger{--bs-text-opacity:1;color:rgba(var(--bs-danger-rgb),var(--bs-text-opacity))!important}.text-light{--bs-text-opacity:1;color:rgba(var(--bs-light-rgb),var(--bs-text-opacity))!important}.text-dark{--bs-text-opacity:1;color:rgba(var(--bs-dark-rgb),var(--bs-text-opacity))!important}.text-black{--bs-text-opacity:1;color:rgba(var(--bs-black-rgb),var(--bs-text-opacity))!important}.text-white{--bs-text-opacity:1;color:rgba(var(--bs-white-rgb),var(--bs-text-opacity))!important}.text-body{--bs-text-opacity:1;color:rgba(var(--bs-body-color-rgb),var(--bs-text-opacity))!important}.text-muted{--bs-text-opacity:1;color:var(--bs-secondary-color)!important}.text-black-50{--bs-text-opacity:1;color:rgba(0,0,0,.5)!important}.text-white-50{--bs-text-opacity:1;color:rgba(255,255,255,.5)!important}.text-body-secondary{--bs-text-opacity:1;color:var(--bs-secondary-color)!important}.text-body-tertiary{--bs-text-opacity:1;color:var(--bs-tertiary-color)!important}.text-body-emphasis{--bs-text-opacity:1;color:var(--bs-emphasis-color)!important}.text-reset{--bs-text-opacity:1;color:inherit!important}.text-opacity-25{--bs-text-opacity:0.25}.text-opacity-50{--bs-text-opacity:0.5}.text-opacity-75{--bs-text-opacity:0.75}.text-opacity-100{--bs-text-opacity:1}.text-primary-emphasis{color:var(--bs-primary-text-emphasis)!important}.text-secondary-emphasis{color:var(--bs-secondary-text-emphasis)!important}.text-success-emphasis{color:var(--bs-success-text-emphasis)!important}.text-info-emphasis{color:var(--bs-info-text-emphasis)!important}.text-warning-emphasis{color:var(--bs-warning-text-emphasis)!important}.text-danger-emphasis{color:var(--bs-danger-text-emphasis)!important}.text-light-emphasis{color:var(--bs-light-text-emphasis)!important}.text-dark-emphasis{color:var(--bs-dark-text-emphasis)!important}.link-opacity-10{--bs-link-opacity:0.1}.link-opacity-10-hover:hover{--bs-link-opacity:0.1}.link-opacity-25{--bs-link-opacity:0.25}.link-opacity-25-hover:hover{--bs-link-opacity:0.25}.link-opacity-50{--bs-link-opacity:0.5}.link-opacity-50-hover:hover{--bs-link-opacity:0.5}.link-opacity-75{--bs-link-opacity:0.75}.link-opacity-75-hover:hover{--bs-link-opacity:0.75}.link-opacity-100{--bs-link-opacity:1}.link-opacity-100-hover:hover{--bs-link-opacity:1}.link-offset-1{text-underline-offset:0.125em!important}.link-offset-1-hover:hover{text-underline-offset:0.125em!important}.link-offset-2{text-underline-offset:0.25em!important}.link-offset-2-hover:hover{text-underline-offset:0.25em!important}.link-offset-3{text-underline-offset:0.375em!important}.link-offset-3-hover:hover{text-underline-offset:0.375em!important}.link-underline-primary{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-primary-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-primary-rgb),var(--bs-link-underline-opacity))!important}.link-underline-secondary{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-secondary-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-secondary-rgb),var(--bs-link-underline-opacity))!important}.link-underline-success{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-success-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-success-rgb),var(--bs-link-underline-opacity))!important}.link-underline-info{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-info-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-info-rgb),var(--bs-link-underline-opacity))!important}.link-underline-warning{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-warning-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-warning-rgb),var(--bs-link-underline-opacity))!important}.link-underline-danger{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-danger-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-danger-rgb),var(--bs-link-underline-opacity))!important}.link-underline-light{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-light-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-light-rgb),var(--bs-link-underline-opacity))!important}.link-underline-dark{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-dark-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-dark-rgb),var(--bs-link-underline-opacity))!important}.link-underline{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-link-color-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:rgba(var(--bs-link-color-rgb),var(--bs-link-underline-opacity,1))!important}.link-underline-opacity-0{--bs-link-underline-opacity:0}.link-underline-opacity-0-hover:hover{--bs-link-underline-opacity:0}.link-underline-opacity-10{--bs-link-underline-opacity:0.1}.link-underline-opacity-10-hover:hover{--bs-link-underline-opacity:0.1}.link-underline-opacity-25{--bs-link-underline-opacity:0.25}.link-underline-opacity-25-hover:hover{--bs-link-underline-opacity:0.25}.link-underline-opacity-50{--bs-link-underline-opacity:0.5}.link-underline-opacity-50-hover:hover{--bs-link-underline-opacity:0.5}.link-underline-opacity-75{--bs-link-underline-opacity:0.75}.link-underline-opacity-75-hover:hover{--bs-link-underline-opacity:0.75}.link-underline-opacity-100{--bs-link-underline-opacity:1}.link-underline-opacity-100-hover:hover{--bs-link-underline-opacity:1}.bg-primary{--bs-bg-opacity:1;background-color:rgba(var(--bs-primary-rgb),var(--bs-bg-opacity))!important}.bg-secondary{--bs-bg-opacity:1;background-color:rgba(var(--bs-secondary-rgb),var(--bs-bg-opacity))!important}.bg-success{--bs-bg-opacity:1;background-color:rgba(var(--bs-success-rgb),var(--bs-bg-opacity))!important}.bg-info{--bs-bg-opacity:1;background-color:rgba(var(--bs-info-rgb),var(--bs-bg-opacity))!important}.bg-warning{--bs-bg-opacity:1;background-color:rgba(var(--bs-warning-rgb),var(--bs-bg-opacity))!important}.bg-danger{--bs-bg-opacity:1;background-color:rgba(var(--bs-danger-rgb),var(--bs-bg-opacity))!important}.bg-light{--bs-bg-opacity:1;background-color:rgba(var(--bs-light-rgb),var(--bs-bg-opacity))!important}.bg-dark{--bs-bg-opacity:1;background-color:rgba(var(--bs-dark-rgb),var(--bs-bg-opacity))!important}.bg-black{--bs-bg-opacity:1;background-color:rgba(var(--bs-black-rgb),var(--bs-bg-opacity))!important}.bg-white{--bs-bg-opacity:1;background-color:rgba(var(--bs-white-rgb),var(--bs-bg-opacity))!important}.bg-body{--bs-bg-opacity:1;background-color:rgba(var(--bs-body-bg-rgb),var(--bs-bg-opacity))!important}.bg-transparent{--bs-bg-opacity:1;background-color:transparent!important}.bg-body-secondary{--bs-bg-opacity:1;background-color:rgba(var(--bs-secondary-bg-rgb),var(--bs-bg-opacity))!important}.bg-body-tertiary{--bs-bg-opacity:1;background-color:rgba(var(--bs-tertiary-bg-rgb),var(--bs-bg-opacity))!important}.bg-opacity-10{--bs-bg-opacity:0.1}.bg-opacity-25{--bs-bg-opacity:0.25}.bg-opacity-50{--bs-bg-opacity:0.5}.bg-opacity-75{--bs-bg-opacity:0.75}.bg-opacity-100{--bs-bg-opacity:1}.bg-primary-subtle{background-color:var(--bs-primary-bg-subtle)!important}.bg-secondary-subtle{background-color:var(--bs-secondary-bg-subtle)!important}.bg-success-subtle{background-color:var(--bs-success-bg-subtle)!important}.bg-info-subtle{background-color:var(--bs-info-bg-subtle)!important}.bg-warning-subtle{background-color:var(--bs-warning-bg-subtle)!important}.bg-danger-subtle{background-color:var(--bs-danger-bg-subtle)!important}.bg-light-subtle{background-color:var(--bs-light-bg-subtle)!important}.bg-dark-subtle{background-color:var(--bs-dark-bg-subtle)!important}.bg-gradient{background-image:var(--bs-gradient)!important}.user-select-all{-webkit-user-select:all!important;-moz-user-select:all!important;user-select:all!important}.user-select-auto{-webkit-user-select:auto!important;-moz-user-select:auto!important;user-select:auto!important}.user-select-none{-webkit-user-select:none!important;-moz-user-select:none!important;user-select:none!important}.pe-none{pointer-events:none!important}.pe-auto{pointer-events:auto!important}.rounded{border-radius:var(--bs-border-radius)!important}.rounded-0{border-radius:0!important}.rounded-1{border-radius:var(--bs-border-radius-sm)!important}.rounded-2{border-radius:var(--bs-border-radius)!important}.rounded-3{border-radius:var(--bs-border-radius-lg)!important}.rounded-4{border-radius:var(--bs-border-radius-xl)!important}.rounded-5{border-radius:var(--bs-border-radius-xxl)!important}.rounded-circle{border-radius:50%!important}.rounded-pill{border-radius:var(--bs-border-radius-pill)!important}.rounded-top{border-top-left-radius:var(--bs-border-radius)!important;border-top-right-radius:var(--bs-border-radius)!important}.rounded-top-0{border-top-left-radius:0!important;border-top-right-radius:0!important}.rounded-top-1{border-top-left-radius:var(--bs-border-radius-sm)!important;border-top-right-radius:var(--bs-border-radius-sm)!important}.rounded-top-2{border-top-left-radius:var(--bs-border-radius)!important;border-top-right-radius:var(--bs-border-radius)!important}.rounded-top-3{border-top-left-radius:var(--bs-border-radius-lg)!important;border-top-right-radius:var(--bs-border-radius-lg)!important}.rounded-top-4{border-top-left-radius:var(--bs-border-radius-xl)!important;border-top-right-radius:var(--bs-border-radius-xl)!important}.rounded-top-5{border-top-left-radius:var(--bs-border-radius-xxl)!important;border-top-right-radius:var(--bs-border-radius-xxl)!important}.rounded-top-circle{border-top-left-radius:50%!important;border-top-right-radius:50%!important}.rounded-top-pill{border-top-left-radius:var(--bs-border-radius-pill)!important;border-top-right-radius:var(--bs-border-radius-pill)!important}.rounded-end{border-top-right-radius:var(--bs-border-radius)!important;border-bottom-right-radius:var(--bs-border-radius)!important}.rounded-end-0{border-top-right-radius:0!important;border-bottom-right-radius:0!important}.rounded-end-1{border-top-right-radius:var(--bs-border-radius-sm)!important;border-bottom-right-radius:var(--bs-border-radius-sm)!important}.rounded-end-2{border-top-right-radius:var(--bs-border-radius)!important;border-bottom-right-radius:var(--bs-border-radius)!important}.rounded-end-3{border-top-right-radius:var(--bs-border-radius-lg)!important;border-bottom-right-radius:var(--bs-border-radius-lg)!important}.rounded-end-4{border-top-right-radius:var(--bs-border-radius-xl)!important;border-bottom-right-radius:var(--bs-border-radius-xl)!important}.rounded-end-5{border-top-right-radius:var(--bs-border-radius-xxl)!important;border-bottom-right-radius:var(--bs-border-radius-xxl)!important}.rounded-end-circle{border-top-right-radius:50%!important;border-bottom-right-radius:50%!important}.rounded-end-pill{border-top-right-radius:var(--bs-border-radius-pill)!important;border-bottom-right-radius:var(--bs-border-radius-pill)!important}.rounded-bottom{border-bottom-right-radius:var(--bs-border-radius)!important;border-bottom-left-radius:var(--bs-border-radius)!important}.rounded-bottom-0{border-bottom-right-radius:0!important;border-bottom-left-radius:0!important}.rounded-bottom-1{border-bottom-right-radius:var(--bs-border-radius-sm)!important;border-bottom-left-radius:var(--bs-border-radius-sm)!important}.rounded-bottom-2{border-bottom-right-radius:var(--bs-border-radius)!important;border-bottom-left-radius:var(--bs-border-radius)!important}.rounded-bottom-3{border-bottom-right-radius:var(--bs-border-radius-lg)!important;border-bottom-left-radius:var(--bs-border-radius-lg)!important}.rounded-bottom-4{border-bottom-right-radius:var(--bs-border-radius-xl)!important;border-bottom-left-radius:var(--bs-border-radius-xl)!important}.rounded-bottom-5{border-bottom-right-radius:var(--bs-border-radius-xxl)!important;border-bottom-left-radius:var(--bs-border-radius-xxl)!important}.rounded-bottom-circle{border-bottom-right-radius:50%!important;border-bottom-left-radius:50%!important}.rounded-bottom-pill{border-bottom-right-radius:var(--bs-border-radius-pill)!important;border-bottom-left-radius:var(--bs-border-radius-pill)!important}.rounded-start{border-bottom-left-radius:var(--bs-border-radius)!important;border-top-left-radius:var(--bs-border-radius)!important}.rounded-start-0{border-bottom-left-radius:0!important;border-top-left-radius:0!important}.rounded-start-1{border-bottom-left-radius:var(--bs-border-radius-sm)!important;border-top-left-radius:var(--bs-border-radius-sm)!important}.rounded-start-2{border-bottom-left-radius:var(--bs-border-radius)!important;border-top-left-radius:var(--bs-border-radius)!important}.rounded-start-3{border-bottom-left-radius:var(--bs-border-radius-lg)!important;border-top-left-radius:var(--bs-border-radius-lg)!important}.rounded-start-4{border-bottom-left-radius:var(--bs-border-radius-xl)!important;border-top-left-radius:var(--bs-border-radius-xl)!important}.rounded-start-5{border-bottom-left-radius:var(--bs-border-radius-xxl)!important;border-top-left-radius:var(--bs-border-radius-xxl)!important}.rounded-start-circle{border-bottom-left-radius:50%!important;border-top-left-radius:50%!important}.rounded-start-pill{border-bottom-left-radius:var(--bs-border-radius-pill)!important;border-top-left-radius:var(--bs-border-radius-pill)!important}.visible{visibility:visible!important}.invisible{visibility:hidden!important}.z-n1{z-index:-1!important}.z-0{z-index:0!important}.z-1{z-index:1!important}.z-2{z-index:2!important}.z-3{z-index:3!important}@media (min-width:576px){.float-sm-start{float:left!important}.float-sm-end{float:right!important}.float-sm-none{float:none!important}.object-fit-sm-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-sm-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-sm-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-sm-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-sm-none{-o-object-fit:none!important;object-fit:none!important}.d-sm-inline{display:inline!important}.d-sm-inline-block{display:inline-block!important}.d-sm-block{display:block!important}.d-sm-grid{display:grid!important}.d-sm-inline-grid{display:inline-grid!important}.d-sm-table{display:table!important}.d-sm-table-row{display:table-row!important}.d-sm-table-cell{display:table-cell!important}.d-sm-flex{display:flex!important}.d-sm-inline-flex{display:inline-flex!important}.d-sm-none{display:none!important}.flex-sm-fill{flex:1 1 auto!important}.flex-sm-row{flex-direction:row!important}.flex-sm-column{flex-direction:column!important}.flex-sm-row-reverse{flex-direction:row-reverse!important}.flex-sm-column-reverse{flex-direction:column-reverse!important}.flex-sm-grow-0{flex-grow:0!important}.flex-sm-grow-1{flex-grow:1!important}.flex-sm-shrink-0{flex-shrink:0!important}.flex-sm-shrink-1{flex-shrink:1!important}.flex-sm-wrap{flex-wrap:wrap!important}.flex-sm-nowrap{flex-wrap:nowrap!important}.flex-sm-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-sm-start{justify-content:flex-start!important}.justify-content-sm-end{justify-content:flex-end!important}.justify-content-sm-center{justify-content:center!important}.justify-content-sm-between{justify-content:space-between!important}.justify-content-sm-around{justify-content:space-around!important}.justify-content-sm-evenly{justify-content:space-evenly!important}.align-items-sm-start{align-items:flex-start!important}.align-items-sm-end{align-items:flex-end!important}.align-items-sm-center{align-items:center!important}.align-items-sm-baseline{align-items:baseline!important}.align-items-sm-stretch{align-items:stretch!important}.align-content-sm-start{align-content:flex-start!important}.align-content-sm-end{align-content:flex-end!important}.align-content-sm-center{align-content:center!important}.align-content-sm-between{align-content:space-between!important}.align-content-sm-around{align-content:space-around!important}.align-content-sm-stretch{align-content:stretch!important}.align-self-sm-auto{align-self:auto!important}.align-self-sm-start{align-self:flex-start!important}.align-self-sm-end{align-self:flex-end!important}.align-self-sm-center{align-self:center!important}.align-self-sm-baseline{align-self:baseline!important}.align-self-sm-stretch{align-self:stretch!important}.order-sm-first{order:-1!important}.order-sm-0{order:0!important}.order-sm-1{order:1!important}.order-sm-2{order:2!important}.order-sm-3{order:3!important}.order-sm-4{order:4!important}.order-sm-5{order:5!important}.order-sm-last{order:6!important}.m-sm-0{margin:0!important}.m-sm-1{margin:.25rem!important}.m-sm-2{margin:.5rem!important}.m-sm-3{margin:1rem!important}.m-sm-4{margin:1.5rem!important}.m-sm-5{margin:3rem!important}.m-sm-auto{margin:auto!important}.mx-sm-0{margin-right:0!important;margin-left:0!important}.mx-sm-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-sm-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-sm-3{margin-right:1rem!important;margin-left:1rem!important}.mx-sm-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-sm-5{margin-right:3rem!important;margin-left:3rem!important}.mx-sm-auto{margin-right:auto!important;margin-left:auto!important}.my-sm-0{margin-top:0!important;margin-bottom:0!important}.my-sm-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-sm-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-sm-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-sm-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-sm-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-sm-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-sm-0{margin-top:0!important}.mt-sm-1{margin-top:.25rem!important}.mt-sm-2{margin-top:.5rem!important}.mt-sm-3{margin-top:1rem!important}.mt-sm-4{margin-top:1.5rem!important}.mt-sm-5{margin-top:3rem!important}.mt-sm-auto{margin-top:auto!important}.me-sm-0{margin-right:0!important}.me-sm-1{margin-right:.25rem!important}.me-sm-2{margin-right:.5rem!important}.me-sm-3{margin-right:1rem!important}.me-sm-4{margin-right:1.5rem!important}.me-sm-5{margin-right:3rem!important}.me-sm-auto{margin-right:auto!important}.mb-sm-0{margin-bottom:0!important}.mb-sm-1{margin-bottom:.25rem!important}.mb-sm-2{margin-bottom:.5rem!important}.mb-sm-3{margin-bottom:1rem!important}.mb-sm-4{margin-bottom:1.5rem!important}.mb-sm-5{margin-bottom:3rem!important}.mb-sm-auto{margin-bottom:auto!important}.ms-sm-0{margin-left:0!important}.ms-sm-1{margin-left:.25rem!important}.ms-sm-2{margin-left:.5rem!important}.ms-sm-3{margin-left:1rem!important}.ms-sm-4{margin-left:1.5rem!important}.ms-sm-5{margin-left:3rem!important}.ms-sm-auto{margin-left:auto!important}.p-sm-0{padding:0!important}.p-sm-1{padding:.25rem!important}.p-sm-2{padding:.5rem!important}.p-sm-3{padding:1rem!important}.p-sm-4{padding:1.5rem!important}.p-sm-5{padding:3rem!important}.px-sm-0{padding-right:0!important;padding-left:0!important}.px-sm-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-sm-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-sm-3{padding-right:1rem!important;padding-left:1rem!important}.px-sm-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-sm-5{padding-right:3rem!important;padding-left:3rem!important}.py-sm-0{padding-top:0!important;padding-bottom:0!important}.py-sm-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-sm-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-sm-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-sm-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-sm-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-sm-0{padding-top:0!important}.pt-sm-1{padding-top:.25rem!important}.pt-sm-2{padding-top:.5rem!important}.pt-sm-3{padding-top:1rem!important}.pt-sm-4{padding-top:1.5rem!important}.pt-sm-5{padding-top:3rem!important}.pe-sm-0{padding-right:0!important}.pe-sm-1{padding-right:.25rem!important}.pe-sm-2{padding-right:.5rem!important}.pe-sm-3{padding-right:1rem!important}.pe-sm-4{padding-right:1.5rem!important}.pe-sm-5{padding-right:3rem!important}.pb-sm-0{padding-bottom:0!important}.pb-sm-1{padding-bottom:.25rem!important}.pb-sm-2{padding-bottom:.5rem!important}.pb-sm-3{padding-bottom:1rem!important}.pb-sm-4{padding-bottom:1.5rem!important}.pb-sm-5{padding-bottom:3rem!important}.ps-sm-0{padding-left:0!important}.ps-sm-1{padding-left:.25rem!important}.ps-sm-2{padding-left:.5rem!important}.ps-sm-3{padding-left:1rem!important}.ps-sm-4{padding-left:1.5rem!important}.ps-sm-5{padding-left:3rem!important}.gap-sm-0{gap:0!important}.gap-sm-1{gap:.25rem!important}.gap-sm-2{gap:.5rem!important}.gap-sm-3{gap:1rem!important}.gap-sm-4{gap:1.5rem!important}.gap-sm-5{gap:3rem!important}.row-gap-sm-0{row-gap:0!important}.row-gap-sm-1{row-gap:.25rem!important}.row-gap-sm-2{row-gap:.5rem!important}.row-gap-sm-3{row-gap:1rem!important}.row-gap-sm-4{row-gap:1.5rem!important}.row-gap-sm-5{row-gap:3rem!important}.column-gap-sm-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-sm-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-sm-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-sm-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-sm-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-sm-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.text-sm-start{text-align:left!important}.text-sm-end{text-align:right!important}.text-sm-center{text-align:center!important}}@media (min-width:768px){.float-md-start{float:left!important}.float-md-end{float:right!important}.float-md-none{float:none!important}.object-fit-md-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-md-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-md-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-md-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-md-none{-o-object-fit:none!important;object-fit:none!important}.d-md-inline{display:inline!important}.d-md-inline-block{display:inline-block!important}.d-md-block{display:block!important}.d-md-grid{display:grid!important}.d-md-inline-grid{display:inline-grid!important}.d-md-table{display:table!important}.d-md-table-row{display:table-row!important}.d-md-table-cell{display:table-cell!important}.d-md-flex{display:flex!important}.d-md-inline-flex{display:inline-flex!important}.d-md-none{display:none!important}.flex-md-fill{flex:1 1 auto!important}.flex-md-row{flex-direction:row!important}.flex-md-column{flex-direction:column!important}.flex-md-row-reverse{flex-direction:row-reverse!important}.flex-md-column-reverse{flex-direction:column-reverse!important}.flex-md-grow-0{flex-grow:0!important}.flex-md-grow-1{flex-grow:1!important}.flex-md-shrink-0{flex-shrink:0!important}.flex-md-shrink-1{flex-shrink:1!important}.flex-md-wrap{flex-wrap:wrap!important}.flex-md-nowrap{flex-wrap:nowrap!important}.flex-md-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-md-start{justify-content:flex-start!important}.justify-content-md-end{justify-content:flex-end!important}.justify-content-md-center{justify-content:center!important}.justify-content-md-between{justify-content:space-between!important}.justify-content-md-around{justify-content:space-around!important}.justify-content-md-evenly{justify-content:space-evenly!important}.align-items-md-start{align-items:flex-start!important}.align-items-md-end{align-items:flex-end!important}.align-items-md-center{align-items:center!important}.align-items-md-baseline{align-items:baseline!important}.align-items-md-stretch{align-items:stretch!important}.align-content-md-start{align-content:flex-start!important}.align-content-md-end{align-content:flex-end!important}.align-content-md-center{align-content:center!important}.align-content-md-between{align-content:space-between!important}.align-content-md-around{align-content:space-around!important}.align-content-md-stretch{align-content:stretch!important}.align-self-md-auto{align-self:auto!important}.align-self-md-start{align-self:flex-start!important}.align-self-md-end{align-self:flex-end!important}.align-self-md-center{align-self:center!important}.align-self-md-baseline{align-self:baseline!important}.align-self-md-stretch{align-self:stretch!important}.order-md-first{order:-1!important}.order-md-0{order:0!important}.order-md-1{order:1!important}.order-md-2{order:2!important}.order-md-3{order:3!important}.order-md-4{order:4!important}.order-md-5{order:5!important}.order-md-last{order:6!important}.m-md-0{margin:0!important}.m-md-1{margin:.25rem!important}.m-md-2{margin:.5rem!important}.m-md-3{margin:1rem!important}.m-md-4{margin:1.5rem!important}.m-md-5{margin:3rem!important}.m-md-auto{margin:auto!important}.mx-md-0{margin-right:0!important;margin-left:0!important}.mx-md-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-md-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-md-3{margin-right:1rem!important;margin-left:1rem!important}.mx-md-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-md-5{margin-right:3rem!important;margin-left:3rem!important}.mx-md-auto{margin-right:auto!important;margin-left:auto!important}.my-md-0{margin-top:0!important;margin-bottom:0!important}.my-md-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-md-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-md-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-md-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-md-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-md-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-md-0{margin-top:0!important}.mt-md-1{margin-top:.25rem!important}.mt-md-2{margin-top:.5rem!important}.mt-md-3{margin-top:1rem!important}.mt-md-4{margin-top:1.5rem!important}.mt-md-5{margin-top:3rem!important}.mt-md-auto{margin-top:auto!important}.me-md-0{margin-right:0!important}.me-md-1{margin-right:.25rem!important}.me-md-2{margin-right:.5rem!important}.me-md-3{margin-right:1rem!important}.me-md-4{margin-right:1.5rem!important}.me-md-5{margin-right:3rem!important}.me-md-auto{margin-right:auto!important}.mb-md-0{margin-bottom:0!important}.mb-md-1{margin-bottom:.25rem!important}.mb-md-2{margin-bottom:.5rem!important}.mb-md-3{margin-bottom:1rem!important}.mb-md-4{margin-bottom:1.5rem!important}.mb-md-5{margin-bottom:3rem!important}.mb-md-auto{margin-bottom:auto!important}.ms-md-0{margin-left:0!important}.ms-md-1{margin-left:.25rem!important}.ms-md-2{margin-left:.5rem!important}.ms-md-3{margin-left:1rem!important}.ms-md-4{margin-left:1.5rem!important}.ms-md-5{margin-left:3rem!important}.ms-md-auto{margin-left:auto!important}.p-md-0{padding:0!important}.p-md-1{padding:.25rem!important}.p-md-2{padding:.5rem!important}.p-md-3{padding:1rem!important}.p-md-4{padding:1.5rem!important}.p-md-5{padding:3rem!important}.px-md-0{padding-right:0!important;padding-left:0!important}.px-md-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-md-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-md-3{padding-right:1rem!important;padding-left:1rem!important}.px-md-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-md-5{padding-right:3rem!important;padding-left:3rem!important}.py-md-0{padding-top:0!important;padding-bottom:0!important}.py-md-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-md-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-md-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-md-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-md-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-md-0{padding-top:0!important}.pt-md-1{padding-top:.25rem!important}.pt-md-2{padding-top:.5rem!important}.pt-md-3{padding-top:1rem!important}.pt-md-4{padding-top:1.5rem!important}.pt-md-5{padding-top:3rem!important}.pe-md-0{padding-right:0!important}.pe-md-1{padding-right:.25rem!important}.pe-md-2{padding-right:.5rem!important}.pe-md-3{padding-right:1rem!important}.pe-md-4{padding-right:1.5rem!important}.pe-md-5{padding-right:3rem!important}.pb-md-0{padding-bottom:0!important}.pb-md-1{padding-bottom:.25rem!important}.pb-md-2{padding-bottom:.5rem!important}.pb-md-3{padding-bottom:1rem!important}.pb-md-4{padding-bottom:1.5rem!important}.pb-md-5{padding-bottom:3rem!important}.ps-md-0{padding-left:0!important}.ps-md-1{padding-left:.25rem!important}.ps-md-2{padding-left:.5rem!important}.ps-md-3{padding-left:1rem!important}.ps-md-4{padding-left:1.5rem!important}.ps-md-5{padding-left:3rem!important}.gap-md-0{gap:0!important}.gap-md-1{gap:.25rem!important}.gap-md-2{gap:.5rem!important}.gap-md-3{gap:1rem!important}.gap-md-4{gap:1.5rem!important}.gap-md-5{gap:3rem!important}.row-gap-md-0{row-gap:0!important}.row-gap-md-1{row-gap:.25rem!important}.row-gap-md-2{row-gap:.5rem!important}.row-gap-md-3{row-gap:1rem!important}.row-gap-md-4{row-gap:1.5rem!important}.row-gap-md-5{row-gap:3rem!important}.column-gap-md-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-md-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-md-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-md-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-md-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-md-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.text-md-start{text-align:left!important}.text-md-end{text-align:right!important}.text-md-center{text-align:center!important}}@media (min-width:992px){.float-lg-start{float:left!important}.float-lg-end{float:right!important}.float-lg-none{float:none!important}.object-fit-lg-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-lg-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-lg-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-lg-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-lg-none{-o-object-fit:none!important;object-fit:none!important}.d-lg-inline{display:inline!important}.d-lg-inline-block{display:inline-block!important}.d-lg-block{display:block!important}.d-lg-grid{display:grid!important}.d-lg-inline-grid{display:inline-grid!important}.d-lg-table{display:table!important}.d-lg-table-row{display:table-row!important}.d-lg-table-cell{display:table-cell!important}.d-lg-flex{display:flex!important}.d-lg-inline-flex{display:inline-flex!important}.d-lg-none{display:none!important}.flex-lg-fill{flex:1 1 auto!important}.flex-lg-row{flex-direction:row!important}.flex-lg-column{flex-direction:column!important}.flex-lg-row-reverse{flex-direction:row-reverse!important}.flex-lg-column-reverse{flex-direction:column-reverse!important}.flex-lg-grow-0{flex-grow:0!important}.flex-lg-grow-1{flex-grow:1!important}.flex-lg-shrink-0{flex-shrink:0!important}.flex-lg-shrink-1{flex-shrink:1!important}.flex-lg-wrap{flex-wrap:wrap!important}.flex-lg-nowrap{flex-wrap:nowrap!important}.flex-lg-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-lg-start{justify-content:flex-start!important}.justify-content-lg-end{justify-content:flex-end!important}.justify-content-lg-center{justify-content:center!important}.justify-content-lg-between{justify-content:space-between!important}.justify-content-lg-around{justify-content:space-around!important}.justify-content-lg-evenly{justify-content:space-evenly!important}.align-items-lg-start{align-items:flex-start!important}.align-items-lg-end{align-items:flex-end!important}.align-items-lg-center{align-items:center!important}.align-items-lg-baseline{align-items:baseline!important}.align-items-lg-stretch{align-items:stretch!important}.align-content-lg-start{align-content:flex-start!important}.align-content-lg-end{align-content:flex-end!important}.align-content-lg-center{align-content:center!important}.align-content-lg-between{align-content:space-between!important}.align-content-lg-around{align-content:space-around!important}.align-content-lg-stretch{align-content:stretch!important}.align-self-lg-auto{align-self:auto!important}.align-self-lg-start{align-self:flex-start!important}.align-self-lg-end{align-self:flex-end!important}.align-self-lg-center{align-self:center!important}.align-self-lg-baseline{align-self:baseline!important}.align-self-lg-stretch{align-self:stretch!important}.order-lg-first{order:-1!important}.order-lg-0{order:0!important}.order-lg-1{order:1!important}.order-lg-2{order:2!important}.order-lg-3{order:3!important}.order-lg-4{order:4!important}.order-lg-5{order:5!important}.order-lg-last{order:6!important}.m-lg-0{margin:0!important}.m-lg-1{margin:.25rem!important}.m-lg-2{margin:.5rem!important}.m-lg-3{margin:1rem!important}.m-lg-4{margin:1.5rem!important}.m-lg-5{margin:3rem!important}.m-lg-auto{margin:auto!important}.mx-lg-0{margin-right:0!important;margin-left:0!important}.mx-lg-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-lg-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-lg-3{margin-right:1rem!important;margin-left:1rem!important}.mx-lg-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-lg-5{margin-right:3rem!important;margin-left:3rem!important}.mx-lg-auto{margin-right:auto!important;margin-left:auto!important}.my-lg-0{margin-top:0!important;margin-bottom:0!important}.my-lg-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-lg-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-lg-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-lg-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-lg-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-lg-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-lg-0{margin-top:0!important}.mt-lg-1{margin-top:.25rem!important}.mt-lg-2{margin-top:.5rem!important}.mt-lg-3{margin-top:1rem!important}.mt-lg-4{margin-top:1.5rem!important}.mt-lg-5{margin-top:3rem!important}.mt-lg-auto{margin-top:auto!important}.me-lg-0{margin-right:0!important}.me-lg-1{margin-right:.25rem!important}.me-lg-2{margin-right:.5rem!important}.me-lg-3{margin-right:1rem!important}.me-lg-4{margin-right:1.5rem!important}.me-lg-5{margin-right:3rem!important}.me-lg-auto{margin-right:auto!important}.mb-lg-0{margin-bottom:0!important}.mb-lg-1{margin-bottom:.25rem!important}.mb-lg-2{margin-bottom:.5rem!important}.mb-lg-3{margin-bottom:1rem!important}.mb-lg-4{margin-bottom:1.5rem!important}.mb-lg-5{margin-bottom:3rem!important}.mb-lg-auto{margin-bottom:auto!important}.ms-lg-0{margin-left:0!important}.ms-lg-1{margin-left:.25rem!important}.ms-lg-2{margin-left:.5rem!important}.ms-lg-3{margin-left:1rem!important}.ms-lg-4{margin-left:1.5rem!important}.ms-lg-5{margin-left:3rem!important}.ms-lg-auto{margin-left:auto!important}.p-lg-0{padding:0!important}.p-lg-1{padding:.25rem!important}.p-lg-2{padding:.5rem!important}.p-lg-3{padding:1rem!important}.p-lg-4{padding:1.5rem!important}.p-lg-5{padding:3rem!important}.px-lg-0{padding-right:0!important;padding-left:0!important}.px-lg-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-lg-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-lg-3{padding-right:1rem!important;padding-left:1rem!important}.px-lg-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-lg-5{padding-right:3rem!important;padding-left:3rem!important}.py-lg-0{padding-top:0!important;padding-bottom:0!important}.py-lg-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-lg-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-lg-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-lg-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-lg-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-lg-0{padding-top:0!important}.pt-lg-1{padding-top:.25rem!important}.pt-lg-2{padding-top:.5rem!important}.pt-lg-3{padding-top:1rem!important}.pt-lg-4{padding-top:1.5rem!important}.pt-lg-5{padding-top:3rem!important}.pe-lg-0{padding-right:0!important}.pe-lg-1{padding-right:.25rem!important}.pe-lg-2{padding-right:.5rem!important}.pe-lg-3{padding-right:1rem!important}.pe-lg-4{padding-right:1.5rem!important}.pe-lg-5{padding-right:3rem!important}.pb-lg-0{padding-bottom:0!important}.pb-lg-1{padding-bottom:.25rem!important}.pb-lg-2{padding-bottom:.5rem!important}.pb-lg-3{padding-bottom:1rem!important}.pb-lg-4{padding-bottom:1.5rem!important}.pb-lg-5{padding-bottom:3rem!important}.ps-lg-0{padding-left:0!important}.ps-lg-1{padding-left:.25rem!important}.ps-lg-2{padding-left:.5rem!important}.ps-lg-3{padding-left:1rem!important}.ps-lg-4{padding-left:1.5rem!important}.ps-lg-5{padding-left:3rem!important}.gap-lg-0{gap:0!important}.gap-lg-1{gap:.25rem!important}.gap-lg-2{gap:.5rem!important}.gap-lg-3{gap:1rem!important}.gap-lg-4{gap:1.5rem!important}.gap-lg-5{gap:3rem!important}.row-gap-lg-0{row-gap:0!important}.row-gap-lg-1{row-gap:.25rem!important}.row-gap-lg-2{row-gap:.5rem!important}.row-gap-lg-3{row-gap:1rem!important}.row-gap-lg-4{row-gap:1.5rem!important}.row-gap-lg-5{row-gap:3rem!important}.column-gap-lg-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-lg-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-lg-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-lg-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-lg-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-lg-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.text-lg-start{text-align:left!important}.text-lg-end{text-align:right!important}.text-lg-center{text-align:center!important}}@media (min-width:1200px){.float-xl-start{float:left!important}.float-xl-end{float:right!important}.float-xl-none{float:none!important}.object-fit-xl-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-xl-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-xl-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-xl-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-xl-none{-o-object-fit:none!important;object-fit:none!important}.d-xl-inline{display:inline!important}.d-xl-inline-block{display:inline-block!important}.d-xl-block{display:block!important}.d-xl-grid{display:grid!important}.d-xl-inline-grid{display:inline-grid!important}.d-xl-table{display:table!important}.d-xl-table-row{display:table-row!important}.d-xl-table-cell{display:table-cell!important}.d-xl-flex{display:flex!important}.d-xl-inline-flex{display:inline-flex!important}.d-xl-none{display:none!important}.flex-xl-fill{flex:1 1 auto!important}.flex-xl-row{flex-direction:row!important}.flex-xl-column{flex-direction:column!important}.flex-xl-row-reverse{flex-direction:row-reverse!important}.flex-xl-column-reverse{flex-direction:column-reverse!important}.flex-xl-grow-0{flex-grow:0!important}.flex-xl-grow-1{flex-grow:1!important}.flex-xl-shrink-0{flex-shrink:0!important}.flex-xl-shrink-1{flex-shrink:1!important}.flex-xl-wrap{flex-wrap:wrap!important}.flex-xl-nowrap{flex-wrap:nowrap!important}.flex-xl-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-xl-start{justify-content:flex-start!important}.justify-content-xl-end{justify-content:flex-end!important}.justify-content-xl-center{justify-content:center!important}.justify-content-xl-between{justify-content:space-between!important}.justify-content-xl-around{justify-content:space-around!important}.justify-content-xl-evenly{justify-content:space-evenly!important}.align-items-xl-start{align-items:flex-start!important}.align-items-xl-end{align-items:flex-end!important}.align-items-xl-center{align-items:center!important}.align-items-xl-baseline{align-items:baseline!important}.align-items-xl-stretch{align-items:stretch!important}.align-content-xl-start{align-content:flex-start!important}.align-content-xl-end{align-content:flex-end!important}.align-content-xl-center{align-content:center!important}.align-content-xl-between{align-content:space-between!important}.align-content-xl-around{align-content:space-around!important}.align-content-xl-stretch{align-content:stretch!important}.align-self-xl-auto{align-self:auto!important}.align-self-xl-start{align-self:flex-start!important}.align-self-xl-end{align-self:flex-end!important}.align-self-xl-center{align-self:center!important}.align-self-xl-baseline{align-self:baseline!important}.align-self-xl-stretch{align-self:stretch!important}.order-xl-first{order:-1!important}.order-xl-0{order:0!important}.order-xl-1{order:1!important}.order-xl-2{order:2!important}.order-xl-3{order:3!important}.order-xl-4{order:4!important}.order-xl-5{order:5!important}.order-xl-last{order:6!important}.m-xl-0{margin:0!important}.m-xl-1{margin:.25rem!important}.m-xl-2{margin:.5rem!important}.m-xl-3{margin:1rem!important}.m-xl-4{margin:1.5rem!important}.m-xl-5{margin:3rem!important}.m-xl-auto{margin:auto!important}.mx-xl-0{margin-right:0!important;margin-left:0!important}.mx-xl-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-xl-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-xl-3{margin-right:1rem!important;margin-left:1rem!important}.mx-xl-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-xl-5{margin-right:3rem!important;margin-left:3rem!important}.mx-xl-auto{margin-right:auto!important;margin-left:auto!important}.my-xl-0{margin-top:0!important;margin-bottom:0!important}.my-xl-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-xl-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-xl-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-xl-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-xl-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-xl-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-xl-0{margin-top:0!important}.mt-xl-1{margin-top:.25rem!important}.mt-xl-2{margin-top:.5rem!important}.mt-xl-3{margin-top:1rem!important}.mt-xl-4{margin-top:1.5rem!important}.mt-xl-5{margin-top:3rem!important}.mt-xl-auto{margin-top:auto!important}.me-xl-0{margin-right:0!important}.me-xl-1{margin-right:.25rem!important}.me-xl-2{margin-right:.5rem!important}.me-xl-3{margin-right:1rem!important}.me-xl-4{margin-right:1.5rem!important}.me-xl-5{margin-right:3rem!important}.me-xl-auto{margin-right:auto!important}.mb-xl-0{margin-bottom:0!important}.mb-xl-1{margin-bottom:.25rem!important}.mb-xl-2{margin-bottom:.5rem!important}.mb-xl-3{margin-bottom:1rem!important}.mb-xl-4{margin-bottom:1.5rem!important}.mb-xl-5{margin-bottom:3rem!important}.mb-xl-auto{margin-bottom:auto!important}.ms-xl-0{margin-left:0!important}.ms-xl-1{margin-left:.25rem!important}.ms-xl-2{margin-left:.5rem!important}.ms-xl-3{margin-left:1rem!important}.ms-xl-4{margin-left:1.5rem!important}.ms-xl-5{margin-left:3rem!important}.ms-xl-auto{margin-left:auto!important}.p-xl-0{padding:0!important}.p-xl-1{padding:.25rem!important}.p-xl-2{padding:.5rem!important}.p-xl-3{padding:1rem!important}.p-xl-4{padding:1.5rem!important}.p-xl-5{padding:3rem!important}.px-xl-0{padding-right:0!important;padding-left:0!important}.px-xl-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-xl-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-xl-3{padding-right:1rem!important;padding-left:1rem!important}.px-xl-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-xl-5{padding-right:3rem!important;padding-left:3rem!important}.py-xl-0{padding-top:0!important;padding-bottom:0!important}.py-xl-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-xl-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-xl-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-xl-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-xl-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-xl-0{padding-top:0!important}.pt-xl-1{padding-top:.25rem!important}.pt-xl-2{padding-top:.5rem!important}.pt-xl-3{padding-top:1rem!important}.pt-xl-4{padding-top:1.5rem!important}.pt-xl-5{padding-top:3rem!important}.pe-xl-0{padding-right:0!important}.pe-xl-1{padding-right:.25rem!important}.pe-xl-2{padding-right:.5rem!important}.pe-xl-3{padding-right:1rem!important}.pe-xl-4{padding-right:1.5rem!important}.pe-xl-5{padding-right:3rem!important}.pb-xl-0{padding-bottom:0!important}.pb-xl-1{padding-bottom:.25rem!important}.pb-xl-2{padding-bottom:.5rem!important}.pb-xl-3{padding-bottom:1rem!important}.pb-xl-4{padding-bottom:1.5rem!important}.pb-xl-5{padding-bottom:3rem!important}.ps-xl-0{padding-left:0!important}.ps-xl-1{padding-left:.25rem!important}.ps-xl-2{padding-left:.5rem!important}.ps-xl-3{padding-left:1rem!important}.ps-xl-4{padding-left:1.5rem!important}.ps-xl-5{padding-left:3rem!important}.gap-xl-0{gap:0!important}.gap-xl-1{gap:.25rem!important}.gap-xl-2{gap:.5rem!important}.gap-xl-3{gap:1rem!important}.gap-xl-4{gap:1.5rem!important}.gap-xl-5{gap:3rem!important}.row-gap-xl-0{row-gap:0!important}.row-gap-xl-1{row-gap:.25rem!important}.row-gap-xl-2{row-gap:.5rem!important}.row-gap-xl-3{row-gap:1rem!important}.row-gap-xl-4{row-gap:1.5rem!important}.row-gap-xl-5{row-gap:3rem!important}.column-gap-xl-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-xl-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-xl-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-xl-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-xl-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-xl-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.text-xl-start{text-align:left!important}.text-xl-end{text-align:right!important}.text-xl-center{text-align:center!important}}@media (min-width:1400px){.float-xxl-start{float:left!important}.float-xxl-end{float:right!important}.float-xxl-none{float:none!important}.object-fit-xxl-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-xxl-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-xxl-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-xxl-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-xxl-none{-o-object-fit:none!important;object-fit:none!important}.d-xxl-inline{display:inline!important}.d-xxl-inline-block{display:inline-block!important}.d-xxl-block{display:block!important}.d-xxl-grid{display:grid!important}.d-xxl-inline-grid{display:inline-grid!important}.d-xxl-table{display:table!important}.d-xxl-table-row{display:table-row!important}.d-xxl-table-cell{display:table-cell!important}.d-xxl-flex{display:flex!important}.d-xxl-inline-flex{display:inline-flex!important}.d-xxl-none{display:none!important}.flex-xxl-fill{flex:1 1 auto!important}.flex-xxl-row{flex-direction:row!important}.flex-xxl-column{flex-direction:column!important}.flex-xxl-row-reverse{flex-direction:row-reverse!important}.flex-xxl-column-reverse{flex-direction:column-reverse!important}.flex-xxl-grow-0{flex-grow:0!important}.flex-xxl-grow-1{flex-grow:1!important}.flex-xxl-shrink-0{flex-shrink:0!important}.flex-xxl-shrink-1{flex-shrink:1!important}.flex-xxl-wrap{flex-wrap:wrap!important}.flex-xxl-nowrap{flex-wrap:nowrap!important}.flex-xxl-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-xxl-start{justify-content:flex-start!important}.justify-content-xxl-end{justify-content:flex-end!important}.justify-content-xxl-center{justify-content:center!important}.justify-content-xxl-between{justify-content:space-between!important}.justify-content-xxl-around{justify-content:space-around!important}.justify-content-xxl-evenly{justify-content:space-evenly!important}.align-items-xxl-start{align-items:flex-start!important}.align-items-xxl-end{align-items:flex-end!important}.align-items-xxl-center{align-items:center!important}.align-items-xxl-baseline{align-items:baseline!important}.align-items-xxl-stretch{align-items:stretch!important}.align-content-xxl-start{align-content:flex-start!important}.align-content-xxl-end{align-content:flex-end!important}.align-content-xxl-center{align-content:center!important}.align-content-xxl-between{align-content:space-between!important}.align-content-xxl-around{align-content:space-around!important}.align-content-xxl-stretch{align-content:stretch!important}.align-self-xxl-auto{align-self:auto!important}.align-self-xxl-start{align-self:flex-start!important}.align-self-xxl-end{align-self:flex-end!important}.align-self-xxl-center{align-self:center!important}.align-self-xxl-baseline{align-self:baseline!important}.align-self-xxl-stretch{align-self:stretch!important}.order-xxl-first{order:-1!important}.order-xxl-0{order:0!important}.order-xxl-1{order:1!important}.order-xxl-2{order:2!important}.order-xxl-3{order:3!important}.order-xxl-4{order:4!important}.order-xxl-5{order:5!important}.order-xxl-last{order:6!important}.m-xxl-0{margin:0!important}.m-xxl-1{margin:.25rem!important}.m-xxl-2{margin:.5rem!important}.m-xxl-3{margin:1rem!important}.m-xxl-4{margin:1.5rem!important}.m-xxl-5{margin:3rem!important}.m-xxl-auto{margin:auto!important}.mx-xxl-0{margin-right:0!important;margin-left:0!important}.mx-xxl-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-xxl-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-xxl-3{margin-right:1rem!important;margin-left:1rem!important}.mx-xxl-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-xxl-5{margin-right:3rem!important;margin-left:3rem!important}.mx-xxl-auto{margin-right:auto!important;margin-left:auto!important}.my-xxl-0{margin-top:0!important;margin-bottom:0!important}.my-xxl-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-xxl-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-xxl-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-xxl-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-xxl-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-xxl-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-xxl-0{margin-top:0!important}.mt-xxl-1{margin-top:.25rem!important}.mt-xxl-2{margin-top:.5rem!important}.mt-xxl-3{margin-top:1rem!important}.mt-xxl-4{margin-top:1.5rem!important}.mt-xxl-5{margin-top:3rem!important}.mt-xxl-auto{margin-top:auto!important}.me-xxl-0{margin-right:0!important}.me-xxl-1{margin-right:.25rem!important}.me-xxl-2{margin-right:.5rem!important}.me-xxl-3{margin-right:1rem!important}.me-xxl-4{margin-right:1.5rem!important}.me-xxl-5{margin-right:3rem!important}.me-xxl-auto{margin-right:auto!important}.mb-xxl-0{margin-bottom:0!important}.mb-xxl-1{margin-bottom:.25rem!important}.mb-xxl-2{margin-bottom:.5rem!important}.mb-xxl-3{margin-bottom:1rem!important}.mb-xxl-4{margin-bottom:1.5rem!important}.mb-xxl-5{margin-bottom:3rem!important}.mb-xxl-auto{margin-bottom:auto!important}.ms-xxl-0{margin-left:0!important}.ms-xxl-1{margin-left:.25rem!important}.ms-xxl-2{margin-left:.5rem!important}.ms-xxl-3{margin-left:1rem!important}.ms-xxl-4{margin-left:1.5rem!important}.ms-xxl-5{margin-left:3rem!important}.ms-xxl-auto{margin-left:auto!important}.p-xxl-0{padding:0!important}.p-xxl-1{padding:.25rem!important}.p-xxl-2{padding:.5rem!important}.p-xxl-3{padding:1rem!important}.p-xxl-4{padding:1.5rem!important}.p-xxl-5{padding:3rem!important}.px-xxl-0{padding-right:0!important;padding-left:0!important}.px-xxl-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-xxl-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-xxl-3{padding-right:1rem!important;padding-left:1rem!important}.px-xxl-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-xxl-5{padding-right:3rem!important;padding-left:3rem!important}.py-xxl-0{padding-top:0!important;padding-bottom:0!important}.py-xxl-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-xxl-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-xxl-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-xxl-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-xxl-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-xxl-0{padding-top:0!important}.pt-xxl-1{padding-top:.25rem!important}.pt-xxl-2{padding-top:.5rem!important}.pt-xxl-3{padding-top:1rem!important}.pt-xxl-4{padding-top:1.5rem!important}.pt-xxl-5{padding-top:3rem!important}.pe-xxl-0{padding-right:0!important}.pe-xxl-1{padding-right:.25rem!important}.pe-xxl-2{padding-right:.5rem!important}.pe-xxl-3{padding-right:1rem!important}.pe-xxl-4{padding-right:1.5rem!important}.pe-xxl-5{padding-right:3rem!important}.pb-xxl-0{padding-bottom:0!important}.pb-xxl-1{padding-bottom:.25rem!important}.pb-xxl-2{padding-bottom:.5rem!important}.pb-xxl-3{padding-bottom:1rem!important}.pb-xxl-4{padding-bottom:1.5rem!important}.pb-xxl-5{padding-bottom:3rem!important}.ps-xxl-0{padding-left:0!important}.ps-xxl-1{padding-left:.25rem!important}.ps-xxl-2{padding-left:.5rem!important}.ps-xxl-3{padding-left:1rem!important}.ps-xxl-4{padding-left:1.5rem!important}.ps-xxl-5{padding-left:3rem!important}.gap-xxl-0{gap:0!important}.gap-xxl-1{gap:.25rem!important}.gap-xxl-2{gap:.5rem!important}.gap-xxl-3{gap:1rem!important}.gap-xxl-4{gap:1.5rem!important}.gap-xxl-5{gap:3rem!important}.row-gap-xxl-0{row-gap:0!important}.row-gap-xxl-1{row-gap:.25rem!important}.row-gap-xxl-2{row-gap:.5rem!important}.row-gap-xxl-3{row-gap:1rem!important}.row-gap-xxl-4{row-gap:1.5rem!important}.row-gap-xxl-5{row-gap:3rem!important}.column-gap-xxl-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-xxl-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-xxl-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-xxl-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-xxl-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-xxl-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.text-xxl-start{text-align:left!important}.text-xxl-end{text-align:right!important}.text-xxl-center{text-align:center!important}}@media (min-width:1200px){.fs-1{font-size:2.5rem!important}.fs-2{font-size:2rem!important}.fs-3{font-size:1.75rem!important}.fs-4{font-size:1.5rem!important}}@media print{.d-print-inline{display:inline!important}.d-print-inline-block{display:inline-block!important}.d-print-block{display:block!important}.d-print-grid{display:grid!important}.d-print-inline-grid{display:inline-grid!important}.d-print-table{display:table!important}.d-print-table-row{display:table-row!important}.d-print-table-cell{display:table-cell!important}.d-print-flex{display:flex!important}.d-print-inline-flex{display:inline-flex!important}.d-print-none{display:none!important}}
/*# sourceMappingURL=bootstrap.min.css.map */

==================================================
FICHIER : static\css\components.css
==================================================
/* =================================================================
   COMPONENTS.CSS
   Composants UI : Tableaux, Modales, Badges, Breadcrumbs, etc.
   ================================================================= */

/* ============================================================
   EMPTY STATES (Quand il n'y a pas de contenu)
   ============================================================ */

/* Le conteneur global de l'√©tat vide */
.empty-state-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 4rem 2rem;
    text-align: center;
    background-color: #f8f9fa; /* Gris tr√®s l√©ger */
    border-radius: 16px;
    border: 2px dashed #dee2e6; /* Bordure en pointill√©s */
    margin: 2rem auto;
    max-width: 600px; /* Pour ne pas que √ßa soit trop large */
}

/* L'ic√¥ne SVG */
.empty-state-icon svg {
    width: 80px;  /* Taille fixe raisonnable */
    height: 80px;
    fill: #adb5bd; /* Gris moyen (plus doux que le noir) */
    margin-bottom: 1.5rem;
    opacity: 0.8;
}

/* Le Titre */
.empty-state-container h3,
.empty-state-container h4 {
    font-size: 1.5rem;
    font-weight: 700;
    color: #343a40;
    margin-bottom: 0.5rem;
}

/* Le Texte descriptif */
.empty-state-container p {
    color: #6c757d;
    font-size: 1rem;
    max-width: 400px;
    margin: 0 auto 1.5rem auto;
}

/* Le Bouton d'action (si pr√©sent) */
.empty-state-container .btn {
    padding: 0.6rem 1.5rem;
    font-weight: 600;
    border-radius: 50px;
}




/* --- FIL D'ARIANE (BREADCRUMB) --- */
.breadcrumb-container {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
    padding: 12px 24px;
    background: linear-gradient(135deg, #f6f8fb 0%, #ffffff 100%);
    border-radius: 16px;
    border: 1px solid rgba(31, 59, 115, 0.1);
    position: relative;
    overflow: hidden;
    margin-bottom: 2rem;
    box-shadow: 0 2px 10px rgba(0,0,0,0.03);
}

.breadcrumb-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(167, 211, 242, 0.1), transparent);
    animation: shimmer 3s infinite;
    pointer-events: none;
}
@keyframes shimmer { to { left: 200%; } }

.breadcrumb-link {
    position: relative;
    color: #6b7280;
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
    padding: 6px 12px;
    border-radius: 10px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.breadcrumb-link::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 10px;
    background: linear-gradient(135deg, #1f3b73, #01257d);
    opacity: 0;
    transition: opacity 0.3s;
    z-index: -1;
}

.breadcrumb-link:hover {
    color: #ffffff;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(31, 59, 115, 0.3);
}

.breadcrumb-link:hover::before { opacity: 1; }
.breadcrumb-link:hover svg { stroke: #ffffff; }

.breadcrumb-separator {
    color: #d1d5db;
    font-size: 18px;
    line-height: 1;
    font-weight: 300;
    user-select: none;
    transition: all 0.3s;
	animation: pulse 2s ease-in-out infinite;
}
@keyframes pulse {
  0% { transform: scale(1); opacity: 0.5; }
  50% { transform: scale(1.2); opacity: 1; }
  100% { transform: scale(1); opacity: 0.5; }
}
.pulse { animation: pulse 2s infinite; }
.pulse-fast { animation: pulse 1s infinite; }

.breadcrumb-current {
    color: #1f3b73;
    font-size: 14px;
    font-weight: 600;
    padding: 6px 16px;
    background: linear-gradient(135deg, rgba(31, 59, 115, 0.08), rgba(167, 211, 242, 0.15));
    border-radius: 10px;
    position: relative;
    overflow: hidden;
}

.breadcrumb-current::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, #1f3b73, #a7d3f2);
    animation: slideIn 0.6s ease-out;
}
@keyframes slideIn { from { width: 0; } to { width: 100%; } }

.breadcrumb-icon {
    width: 16px;
    height: 16px;
    display: inline-block;
    stroke: currentColor;
    transition: stroke 0.3s;
}

@media (max-width: 768px) {
    .breadcrumb-container { padding: 10px 16px; gap: 4px; }
    .breadcrumb-link, .breadcrumb-current { font-size: 12px; padding: 4px 8px; }
}

/* --- TABLEAUX (OBJET TABLE) --- */
.objet-table {
  width: 100%;
  border-collapse: collapse;
  background-color: var(--fond-element);
  border: 1px solid var(--couleur-bordure);
  border-radius: 8px;
  overflow: hidden;
  box-shadow: var(--ombre-legere);
  font-size: 0.9rem;
}

.objet-table th {
  background-color: #f8f9fa;
  font-weight: 600;
  text-align: left;
  padding: 0.75rem 1rem;
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--texte-discret);
  border-bottom: 2px solid var(--couleur-bordure);
  white-space: nowrap;
}

.objet-table td {
  padding: 0.75rem 1rem;
  border-bottom: 1px solid var(--couleur-bordure);
  vertical-align: middle;
}

.objet-table tbody tr:last-child td { border-bottom: none; }
.objet-table tbody tr:hover { background-color: #f1f3f5; }

/* Triables */
.objet-table th.sortable { cursor: pointer; position: relative; }
.objet-table th.sortable a { color: inherit; text-decoration: none; display: block; }
.objet-table th.sortable:hover { background-color: #e9ecef; }
.objet-table th.th-sort-asc a, .objet-table th.th-sort-desc a { color: var(--couleur-principale); }
.objet-table th.sortable::after {
  content: ""; display: inline-block; width: 1em; height: 1em;
  margin-left: 0.5rem; vertical-align: middle; opacity: 0.4;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3Cpath fill='%236c7a89' d='M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z'/%3E%3C/svg%3E");
  background-repeat: no-repeat; background-position: center;
}
.objet-table th.th-sort-asc::after {
  opacity: 1;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3Cpath fill='%231F3B73' d='M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z'/%3E%3C/svg%3E");
}
.objet-table th.th-sort-desc::after {
  opacity: 1;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3Cpath fill='%231F3B73' d='M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z'/%3E%3C/svg%3E");
}

/* Corrections Alignement Tableau V3 */
.objet-table th, .objet-table td {
    vertical-align: middle !important;
    text-align: center !important;
    padding: 12px 8px !important;
}
.objet-table th:first-child, .objet-table td[data-field="nom"] {
    text-align: left !important;
    padding-left: 20px !important;
}
.objet-table .image-cell { width: 80px; min-width: 80px; }
.objet-table td[data-field="date_peremption"],
.objet-table td[data-field="date_peremption"].texte-perime,
.objet-table td[data-field="date_peremption"].texte-perime-bientot {
    text-align: center !important;
    font-family: 'Consolas', 'Monaco', monospace;
    font-weight: 600;
    white-space: nowrap;
    display: table-cell !important;
}
.objet-table th a {
    text-decoration: none; color: inherit; display: block; width: 100%;
}

.objet-table td a {
    color: var(--texte-principal); /* Couleur normale par d√©faut */
    font-weight: 600;
    text-decoration: none; /* On retire le soulignement moche */
    transition: all 0.2s ease;
    border-bottom: 1px solid transparent; /* Pr√©pare un soulignement discret */
}

.objet-table td a:hover {
    color: var(--couleur-principale); /* Devient bleu LabFlow */
    border-bottom-color: var(--couleur-principale); /* Soulignement fin et color√© */
}

.objet-table th:first-child a { text-align: left !important; }

/* Images dans tableau */
.image-cell { width: 60px; text-align: center; padding: 0.5rem !important; overflow: visible !important;}
.image-preview-wrapper {
    position: relative; display: inline-block; width: 40px; height: 40px; vertical-align: middle;
}
.image-objet-thumbnail {
  width: 40px; height: 40px; object-fit: cover; border-radius: 4px; border: 1px solid var(--couleur-bordure); cursor: pointer; display: block;
}
.table-image-placeholder {
  width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;
  background-color: #f0f0f0; border-radius: 4px; border: 1px solid var(--couleur-bordure);
}
.table-image-placeholder svg { fill: #999; }
.image-objet-preview {
  visibility: hidden; opacity: 0; position: absolute !important;
  top: 50%;
  right: 100%;
  transform: translateY(-50%);
  margin-right: 10px;
  width: 250px; height: 250px; object-fit: contain;
  background-color: white;
  border: 1px solid #ccc; border-radius: 8px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  z-index: 10010; transition: opacity 0.2s ease;
  pointer-events: none; padding: 5px;
}
.image-preview-wrapper:hover .image-objet-preview { visibility: visible; opacity: 1; }

/* --- ACTIONS & CHECKBOX (MODERNE) --- */

/* Alignement de la colonne Actions */
.actions-cell {
    text-align: right;
    white-space: nowrap;
    padding-right: 1rem !important;
}

/* Conteneur pour aligner les boutons c√¥te √† c√¥te */
.actions-cell .form-in-cell {
    margin: 0;
    padding: 0;
    display: inline-flex; /* Mieux que inline-block pour l'alignement */
    vertical-align: middle;
    gap: 8px; /* Espace entre les boutons */
}

/* --- NOUVEAU STYLE DES BOUTONS D'ACTION --- */

/* Style de base pour TOUS les boutons d'action (Edit & Delete) */
.actions-cell .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 34px;       /* Carr√© fixe */
    height: 34px;      /* Carr√© fixe */
    padding: 0;        /* Pas de padding interne */
    min-width: auto;   /* On annule le min-width de 90px qui √©tait moche */
    border-radius: 8px; /* Coins arrondis modernes */
    border: 1px solid transparent;
    transition: all 0.2s ease;
    background-color: transparent; /* Fond transparent par d√©faut */
}

/* Ic√¥nes dans les boutons */
.actions-cell .btn svg, 
.actions-cell .btn i {
    width: 16px;
    height: 16px;
    font-size: 16px;
    fill: currentColor;
}

/* --- VARIANTE : BOUTON √âDITER (Bleu) --- */
/* On cible la classe Bootstrap existante pour ne pas toucher au HTML */
.actions-cell .btn-outline-primary {
    color: #64748b; /* Gris par d√©faut */
    background-color: #f1f5f9; /* Fond gris tr√®s l√©ger */
    border-color: transparent;
}

.actions-cell .btn-outline-primary:hover {
    color: var(--couleur-principale); /* Bleu LabFlow */
    background-color: #e0e7ff; /* Fond bleu p√¢le */
    border-color: transparent;
    transform: translateY(-2px);
    box-shadow: 0 2px 5px rgba(31, 59, 115, 0.15);
}

/* --- VARIANTE : BOUTON SUPPRIMER (Rouge) --- */
.actions-cell .btn-outline-danger {
    color: #64748b; /* Gris par d√©faut */
    background-color: #f1f5f9;
    border-color: transparent;
}

.actions-cell .btn-outline-danger:hover {
    color: #dc3545; /* Rouge vif */
    background-color: #fee2e2; /* Fond rouge p√¢le */
    border-color: transparent;
    transform: translateY(-2px);
    box-shadow: 0 2px 5px rgba(220, 53, 69, 0.15);
}

/* --- CHECKBOX --- */
.checkbox-column {
    width: 40px;
    text-align: center;
    padding: 0.5rem !important;
}

/* --- BADGES & STATUS --- */
.texte-perime, .texte-perime-bientot, .texte-alerte, .texte-ok {
    display: inline-flex; align-items: center; gap: 0.5rem; font-weight: 600;
}
.texte-perime { color: #c62828; }
.texte-perime-bientot { color: #f57f17; }
.texte-alerte { color: #b58600; }
.texte-ok { color: #28a745; }
.texte-perime svg, .texte-perime-bientot svg, .texte-alerte svg, .texte-ok svg {
  width: 20px; height: 20px; fill: currentColor;
}

.status-badge {
    display: inline-flex; align-items: center; gap: 6px;
    padding: 6px 12px; border-radius: 20px;
    font-size: 0.8rem; font-weight: 600;
}
.status-ok { background-color: #d1e7dd; color: #0f5132; }
.status-warning { background-color: #fff3cd; color: #856404; }
.status-danger { background-color: #f8d7da; color: #842029; }
.status-done { background-color: #e2e3e5; color: #41464b; text-decoration: line-through; opacity: 0.7; }
tr.row-done td { color: #adb5bd; }
tr.row-done td strong { font-weight: normal; }

/* --- MODALES (BOOTSTRAP OVERRIDES) --- */
.modal-content { border: none; border-radius: 12px; }
.modal-header { background-color: var(--couleur-principale); color: var(--texte-inverse); border-bottom: none; }
.modal-header .btn-close { filter: invert(1) grayscale(100%) brightness(200%); }
.modal-footer { background-color: #f8f9fa; }
.modal-header .modal-title-with-icon, .modal-header .modal-title { font-size: 1.2rem; font-weight: 600; }
.modal-footer .btn, .modal-actions .btn { font-weight: 500; border-radius: 6px; padding: 0.6rem 1.2rem; }

/* Modale XL (Formulaires complexes) */
.modal-dialog.modal-xl .modal-header { background-color: var(--couleur-principale); color: var(--texte-inverse); }
.modal-dialog.modal-xl .modal-form { padding: 2rem; background-color: var(--fond-element); }
.modal-dialog.modal-xl .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0 2rem; align-items: start; }
.modal-dialog.modal-xl .form-column { display: flex; flex-direction: column; gap: 1rem; }
.modal-dialog.modal-xl .form-group { margin-bottom: 0; }
.modal-dialog.modal-xl .form-group label { font-weight: 500; font-size: 0.9rem; margin-bottom: 0.4rem; }
.modal-dialog.modal-xl .form-group input, .modal-dialog.modal-xl .form-group select {
  width: 100%; padding: 0.6rem 0.8rem; font-size: 0.95rem; border-radius: 6px;
}
.modal-dialog.modal-xl .form-help-text { font-size: 0.8rem; color: var(--texte-discret); margin-top: 0.25rem; }

/* Modale Danger */
#dangerModal .modal-header, #danger-modal .modal-header { background-color: var(--couleur-erreur); }

/* Suggestion Modal */
#suggestionModal .modal-header { background: linear-gradient(135deg, var(--couleur-principale) 0%, #163a6e 100%); color: white; border-bottom: none; }
#suggestionModal .modal-footer { border-top: 1px solid var(--couleur-bordure); }
.suggestion-info-card {
    display: flex; gap: 1rem; padding: 1.25rem;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 12px; border-left: 4px solid var(--couleur-principale);
}
.suggestion-icon {
    width: 56px; height: 56px; background: white; border-radius: 12px;
    display: flex; align-items: center; justify-content: center; flex-shrink: 0;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}
.suggestion-icon svg { fill: var(--couleur-principale); }
.suggestion-info-content h6 { font-size: 1.125rem; font-weight: 600; color: var(--texte-principal); }
#suggestionModal .form-label { display: flex; align-items: center; color: var(--texte-principal); margin-bottom: 0.5rem; }
#suggestionModal .form-label svg { fill: var(--couleur-principale); }
#suggestionModal .form-control:focus { border-color: var(--couleur-principale); box-shadow: 0 0 0 0.25rem rgba(31, 59, 115, 0.15); }
#suggestionModal .btn-primary { background: linear-gradient(135deg, var(--couleur-principale) 0%, #163a6e 100%); border: none; }
#suggestionModal .btn-primary.loading::after {
    content: ''; position: absolute; width: 20px; height: 20px; top: 50%; left: 50%;
    margin-left: -10px; margin-top: -10px; border: 3px solid rgba(255, 255, 255, 0.3);
    border-top-color: white; border-radius: 50%; animation: spin 0.8s linear infinite;
}

/* --- TOASTS PREMIUM --- */
.toast-container { z-index: 11000; }
.toast { border: none; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); margin-bottom: 10px; }
.toast.text-bg-success, .toast.text-bg-danger, .toast.text-bg-warning, .toast.text-bg-primary {
    color: #ffffff !important; font-weight: 600 !important;
}
.toast .btn-close { filter: invert(1) grayscale(100%) brightness(200%); opacity: 0.8; }
.toast .btn-close:hover { opacity: 1; }

/* --- BARRE DE FILTRES PREMIUM --- */
.filter-bar-container { display: flex; justify-content: center; width: 100%; }
.filter-bar {
    display: flex; align-items: center; background: #ffffff; padding: 10px 20px;
    border-radius: 16px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05); border: 1px solid rgba(0,0,0,0.04); gap: 0;
}
.filter-group { display: flex; align-items: center; padding: 0 20px; position: relative; transition: all 0.2s ease; }
.filter-icon {
    width: 36px; height: 36px; background: #f8f9fa; color: #6c757d; border-radius: 10px;
    display: flex; align-items: center; justify-content: center; margin-right: 12px;
    font-size: 1.1rem; transition: all 0.2s ease; margin-top: 12px;
}
.filter-group:hover .filter-icon { background: #e7f1ff; color: #0d6efd; }
.filter-content { display: flex; flex-direction: column; justify-content: center; }
.filter-label {
    font-size: 0.6rem; text-transform: uppercase; font-weight: 700; color: #adb5bd;
    margin-bottom: 0; letter-spacing: 0.5px; cursor: pointer;
}
.filter-select {
    border: none; background: transparent; font-weight: 600; color: #212529; font-size: 0.95rem;
    padding: 0; cursor: pointer; outline: none; min-width: 120px;
    -webkit-appearance: none; -moz-appearance: none; appearance: none;
    background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007CB2%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
    background-repeat: no-repeat; background-position: right 0 center; background-size: 10px; padding-right: 15px;
}
.filter-select:focus { color: #0d6efd; }
.filter-separator { width: 1px; height: 40px; background: #e9ecef; margin: 0 5px; }
.filter-actions { padding-left: 20px; border-left: 1px solid #e9ecef; margin-left: 5px; }
.btn-reset-filters {
    width: 40px; height: 40px; border-radius: 50%; background: #fff0f3; color: #dc3545;
    display: flex; align-items: center; justify-content: center; text-decoration: none;
    transition: all 0.2s ease; font-size: 1.2rem;
}
.btn-reset-filters:hover {
    background: #dc3545; color: white; transform: rotate(-180deg); box-shadow: 0 4px 10px rgba(220, 53, 69, 0.3);
}

@media (max-width: 768px) {
    .filter-bar { flex-direction: column; align-items: stretch; gap: 15px; padding: 20px; }
    .filter-separator { display: none; }
    .filter-actions { border-left: none; padding-left: 0; display: flex; justify-content: center; margin-top: 10px; }
    .filter-group { padding: 0; }
    .filter-select { width: 100%; }
}

/* --- BOUTONS GENERIQUES --- */
.btn-icon-only {
    width: 36px; height: 36px; padding: 0; border: 1px solid #dee2e6; background-color: white; border-radius: 50%;
    display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s ease;
    color: #6c757d; box-shadow: 0 2px 4px rgba(0,0,0,0.05); text-decoration: none;
}
.btn-icon-only svg { width: 18px; height: 18px; fill: currentColor; display: block; }
.btn-icon-only:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
.btn-edit:hover { color: #1f3b73; border-color: #1f3b73; background-color: #eef2ff; }
.btn-delete:hover { color: #dc3545; border-color: #dc3545; background-color: #f8d7da; }

.btn-suggest {
    background: linear-gradient(135deg, #ffc107 0%, #ffca2c 100%); border: none;
    color: #212529 !important; font-weight: 700 !important; font-size: 0.95rem;
    text-transform: uppercase; letter-spacing: 0.5px; padding: 12px 20px;
    border-radius: 8px; box-shadow: 0 4px 6px rgba(255, 193, 7, 0.25);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex !important; align-items: center !important; justify-content: center; gap: 12px; line-height: 1;
}
.btn-suggest svg, .btn-suggest i { width: 18px; height: 18px; display: block; margin: 0 !important; fill: currentColor; }
.btn-suggest:hover {
    transform: translateY(-3px); box-shadow: 0 8px 15px rgba(255, 193, 7, 0.4);
    background: linear-gradient(135deg, #ffca2c 0%, #ffc107 100%); color: #000 !important;
}
.btn-suggest:active { transform: translateY(-1px); box-shadow: 0 4px 6px rgba(255, 193, 7, 0.25); }

/* --- FORMS BOOTSTRAP --- */
.form-control, .form-select { font-size: 0.95rem; padding: 0.6rem 1rem; border-radius: 6px; }
.form-control:focus, .form-select:focus { border-color: var(--couleur-principale); box-shadow: 0 0 0 3px rgba(31, 59, 115, 0.15); }
.form-switch-link { text-align: center; margin-top: 1.5rem; font-size: 0.9rem; }
.form-switch-link a { color: var(--couleur-principale); font-weight: 500; }

==================================================
FICHIER : static\css\layout.css
==================================================
/* =================================================================
   LAYOUT.CSS
   Structure globale : Header, Footer, Nav, Main Container
   ================================================================= */

/* --- MISE EN PAGE GLOBALE --- */
.main-content {
    padding: 2rem;
    max-width: 1600px;
    margin: 0 auto;
}

/* --- HEADER & NAVIGATION --- */
.app-header {
    background-color: var(--couleur-principale);
    padding: 0.75rem 2rem;
}

.header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
}

/* Marque / Logo */
.header-brand a {
    display: flex;
    align-items: center;
    gap: 12px;
    text-decoration: none;
    transition: transform 0.2s ease;
}

.header-brand a:hover .brand-logo {
    transform: scale(1.05);
}

.brand-logo {
    width: 70px;
    height: 70px;
    flex-shrink: 0;
    border-radius: 12px;
}

.brand-text {
    display: flex;
    flex-direction: column;
}

.brand-text h1 {
    margin: 0;
    line-height: 1;
    font-size: 1.5rem;
    color: var(--texte-inverse);
}

.brand-subtitle {
    margin-top: 2px;
    font-size: 0.8rem;
    opacity: 0.7;
    color: var(--texte-inverse);
}

/* Partie Droite du Header */
.header-right {
    display: flex;
    align-items: center;
    gap: 1rem; /* Espacement uniforme entre tous les √©l√©ments */
}

/* --- SEARCH DROPDOWN --- */
.search-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    background: rgba(255, 255, 255, 0.08);
    border: 2px solid transparent;
    border-radius: 14px;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: visible !important;
    z-index: 1000;
}

.search-wrapper.focused {
    background: rgba(255, 255, 255, 0.12);
    border-color: rgba(138, 155, 191, 0.5);
    box-shadow: 0 8px 32px rgba(31, 59, 115, 0.3);
}

.search-icon-dropdown {
    position: absolute;
    left: 1.1rem;
    width: 20px;
    height: 20px;
    fill: #8a9bbf;
    transition: all 0.3s ease;
    z-index: 1002;
    pointer-events: none;
}

.search-wrapper.focused .search-icon-dropdown {
    fill: rgba(255, 255, 255, 0.9);
    transform: scale(1.1);
}

.search-input-dropdown {
    padding: 0.75rem 3rem 0.75rem 3.2rem;
    border: none;
    background: transparent;
    color: white;
    font-size: 15px;
    width: 0;
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    outline: none;
}

.search-input-dropdown.expanded {
    width: 320px;
    opacity: 1;
}

.search-input-dropdown::placeholder {
    color: rgba(255, 255, 255, 0.5);
}

.search-clear-btn {
    position: absolute;
    right: 1rem;
    width: 24px;
    height: 24px;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    z-index: 1002;
}

.search-clear-btn.visible { display: flex; }
.search-clear-btn:hover { background: rgba(255, 255, 255, 0.2); }
.search-clear-btn svg { width: 14px; height: 14px; fill: rgba(255, 255, 255, 0.7); }

.dropdown-results {
    position: absolute;
    top: calc(100% + 10px);
    left: 0;
    width: 100%;
    min-width: 300px;
    background-color: #152952;
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    max-height: 400px;
    overflow-y: auto;
    z-index: 9999;
    display: none;
    opacity: 0;
    transform: translateY(-10px);
    transition: opacity 0.3s ease, transform 0.3s ease;
}

.dropdown-results.visible {
    display: block;
    opacity: 1;
    transform: translateY(0);
}

.search-result-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    text-decoration: none;
    color: white;
    transition: background 0.2s;
}

.search-result-item:last-child { border-bottom: none; }
.search-result-item:hover { background-color: rgba(255, 255, 255, 0.15); color: white; text-decoration: none; }

.search-result-img {
    width: 40px;
    height: 40px;
    object-fit: cover;
    border-radius: 6px;
    background-color: rgba(255, 255, 255, 0.1);
    flex-shrink: 0;
}

.search-result-info { flex: 1; min-width: 0; }
.search-result-info h6 { margin: 0; font-size: 0.95rem; font-weight: 600; color: white; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.search-result-info small { color: rgba(255, 255, 255, 0.6); font-size: 0.8rem; display: block; }
.search-status { padding: 20px; text-align: center; color: rgba(255, 255, 255, 0.7); font-size: 0.9rem; }

.dropdown-results::-webkit-scrollbar { width: 6px; }
.dropdown-results::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); }
.dropdown-results::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2); border-radius: 3px; }
.dropdown-results::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.3); }

/* ===================================
   HEADER - IC√îNES ET BADGES
   =================================== */

/* Style de base pour les liens carr√©s (Panier, Alerte, Profil) */
.header-icon-link {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;  /* Largeur fixe par d√©faut */
    height: 40px; /* Hauteur fixe */
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.1);
    transition: all 0.2s ease;
    color: white;
    text-decoration: none;
    flex-shrink: 0; /* Emp√™che l'√©crasement */
}

.header-icon-link:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-1px);
    color: white;
}

.header-icon-link:active { transform: translateY(0); }

/* Style SP√âCIFIQUE pour le bouton Admin (Pilule) */
.header-icon-link.admin-badge {
    width: auto; /* IMPORTANT : Surcharge la largeur fixe de 40px */
    padding: 0 16px; /* Espace pour le texte */
    border-radius: 50px; /* Forme arrondie */
    background: rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.3);
    gap: 8px; /* Espace entre ic√¥ne et texte */
}

.header-icon-link.admin-badge:hover {
    background: rgba(255, 255, 255, 0.3);
    border-color: rgba(255, 255, 255, 0.8);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

/* SVG des ic√¥nes */
.header-icon {
    width: 22px;
    height: 22px;
    transition: all 0.3s ease;
    fill: currentColor;
}

/* √âtats des alertes */
.bell-warning { fill: #fbbf24; animation: gentle-pulse 2s ease-in-out infinite; }
.bell-critical { fill: #ef4444; animation: urgent-shake 0.5s ease-in-out infinite; }

/* Badge de notification (rond rouge) */
.icon-badge {
    position: absolute;
    top: -4px;
    right: -4px;
    min-width: 18px;
    height: 18px;
    padding: 0 5px;
    background: #ef4444;
    color: white;
    font-size: 0.625rem;
    font-weight: 700;
    border-radius: 9px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    border: 2px solid var(--couleur-principale);
    line-height: 1;
    z-index: 10;
}

.icon-badge.pulse-ring { animation: badge-pulse-glow 2s ease-in-out infinite; }
.icon-badge.pulse-ring::after {
    content: '';
    position: absolute;
    top: 50%; left: 50%; transform: translate(-50%, -50%);
    width: 100%; height: 100%;
    border-radius: 50%;
    border: 2px solid #ef4444;
    animation: ring-pulse 2s ease-out infinite;
    pointer-events: none;
}

@keyframes badge-pulse-glow {
    0%, 100% { transform: scale(1); box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), 0 0 0 0 rgba(239, 68, 68, 0.7); }
    50% { transform: scale(1.15); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3), 0 0 0 8px rgba(239, 68, 68, 0); }
}

@keyframes ring-pulse {
    0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
}

/* Responsive Header */
@media (max-width: 992px) {
    /* Sur tablette/mobile, le bouton admin redevient un carr√© */
    .header-icon-link.admin-badge {
        width: 40px;
        padding: 0;
        border-radius: 8px;
        justify-content: center;
    }
    /* On cache le texte "ADMIN" */
    .header-icon-link.admin-badge span {
        display: none !important;
    }
}

@media (max-width: 768px) {
    .header-icon-link, .header-icon-link.admin-badge {
        width: 36px;
        height: 36px;
    }
    .header-icon { width: 20px; height: 20px; }
}

/* --- AUTH SECTION --- */
.auth-section {
    display: flex;
    align-items: center;
    gap: 1rem;
    color: var(--texte-inverse);
}
.auth-section .btn-outline-light {
    border-radius: 20px;
    font-weight: 500;
    font-size: 0.85rem;
}

/* --- SUB NAV --- */
.sub-nav {
    background-color: var(--fond-element);
    padding: 0.75rem 2rem;
    border-bottom: 1px solid var(--couleur-bordure);
    display: flex;
    gap: 1.5rem;
    justify-content: center;
}
.sub-nav-button {
    background-color: #f8f9fa;
    color: var(--texte-principal);
    padding: 0.5rem 1rem;
    border-radius: 6px;
    font-weight: 500;
    border: 1px solid var(--couleur-bordure);
    transition: all 0.2s ease;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}
.sub-nav-button:hover { background-color: #e9ecef; text-decoration: none; }
.sub-nav-button.active {
    background-color: var(--couleur-principale);
    color: var(--texte-inverse);
    border-color: var(--couleur-principale);
}
.sub-nav-icon { width: 20px; height: 20px; fill: currentColor; }

/* =================================================================
   FOOTER MODERNE
   ================================================================= */
.site-footer {
    background: #0f172a;
    color: #94a3b8;
    padding: 4rem 2rem 2rem;
    margin-top: auto;
    border-top: 1px solid #1e293b;
    font-size: 0.9rem;
}

.footer-container { max-width: 1200px; margin: 0 auto; }

.footer-top {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    gap: 3rem;
    margin-bottom: 3rem;
}

.footer-brand { display: flex; align-items: center; gap: 1rem; min-width: 250px; }
.footer-brand-name { font-size: 1.4rem; font-weight: 800; color: #f8fafc; letter-spacing: -0.5px; line-height: 1.2; }
.footer-brand-tagline { font-size: 0.8rem; color: #64748b; }

.footer-nav { display: flex; gap: 5rem; justify-content: flex-end; flex-wrap: wrap; }
.footer-nav-group { display: flex; flex-direction: column; gap: 0.8rem; min-width: 140px; }
.footer-nav-group h5 { font-size: 0.75rem; font-weight: 700; color: #f8fafc; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 0.5rem; }
.footer-nav-group a { color: #94a3b8; text-decoration: none; transition: color 0.2s ease; }
.footer-nav-group a:hover { color: #38bdf8; }

.footer-divider { height: 1px; background: #1e293b; margin: 0 0 1.5rem 0; }

.footer-bottom { display: flex; justify-content: space-between; align-items: center; font-size: 0.8rem; }
.footer-left { display: flex; align-items: center; gap: 0.8rem; }
.footer-license { display: flex; align-items: center; gap: 0.4rem; color: #64748b; }
.separator { color: #334155; }
.footer-version {
    background: #1e293b;
    color: #38bdf8;
    padding: 2px 8px;
    border-radius: 4px;
    font-family: 'Consolas', monospace;
    font-size: 0.75rem;
    border: 1px solid #334155;
}

@media (max-width: 768px) {
    .footer-top { flex-direction: column; gap: 2rem; }
    .footer-nav { justify-content: flex-start; gap: 3rem; }
    .footer-bottom { flex-direction: column; gap: 1rem; text-align: center; }
}

/* --- BOUTON BACK TO TOP --- */
.btn-back-to-top {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, #0d6efd, #0dcaf0);
    color: white;
    border: none;
    box-shadow: 0 4px 15px rgba(13, 110, 253, 0.3);
    z-index: 1040;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    cursor: pointer;
    opacity: 0;
    visibility: hidden;
    transform: translateY(20px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.btn-back-to-top.show { opacity: 1; visibility: visible; transform: translateY(0); }
.btn-back-to-top:hover { background: linear-gradient(135deg, #0b5ed7, #0aa2c0); transform: translateY(-3px); box-shadow: 0 6px 20px rgba(13, 110, 253, 0.4); }

@media (max-width: 768px) {
    .btn-back-to-top { bottom: 20px; right: 20px; width: 45px; height: 45px; }
}

==================================================
FICHIER : static\css\style.css
==================================================
/* =================================================================
   LABFLOW - FEUILLE DE STYLES PRINCIPALE
   Refactorisation SMACSS/BEM
   ================================================================= */

/* 1. Base (Variables, Reset, Typographie) */
@import 'base.css';

/* 2. Layout (Header, Footer, Nav, Grid) */
@import 'layout.css';

/* 3. Components (Tableaux, Boutons, Cartes, Modales) */
@import 'components.css';

/* 4. Modules (Pages sp√©cifiques) */
@import 'modules/dashboard.css';
@import 'modules/calendar.css';
@import 'modules/inventory.css';
@import 'modules/auth.css';
@import 'modules/admin.css';
@import 'modules/cart.css';
@import 'modules/alerts.css';
@import 'modules/reports.css';
@import 'modules/profile.css';
@import 'modules/tour.css';

==================================================
FICHIER : static\css\modules\admin.css
==================================================
/* ========================================================
   ADMINISTRATION
   ===================================================== */
   
.admin-hero {
    background: linear-gradient(135deg, var(--couleur-principale) 0%, #163a6e 100%); color: white;
    padding: 3rem 2rem; border-radius: 16px; margin-bottom: 2rem; box-shadow: 0 8px 32px rgba(31, 59, 115, 0.2);
    display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 2rem;
}
.admin-hero-content { display: flex; align-items: center; gap: 2rem; }
.admin-hero-icon {
    width: 80px; height: 80px; background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(10px);
    border-radius: 20px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;
}
.admin-hero-icon svg { fill: white; }
.admin-hero-title { font-size: 2.5rem; font-weight: 700; margin: 0 0 0.5rem 0; line-height: 1.2; }
.admin-hero-subtitle { font-size: 1.125rem; opacity: 0.9; margin: 0; font-weight: 400; }
.license-status {
    display: flex; align-items: center; gap: 0.75rem; padding: 1rem 1.5rem; border-radius: 12px;
    font-weight: 600; font-size: 1rem; backdrop-filter: blur(10px); border: 2px solid rgba(255, 255, 255, 0.2);
}
.license-status svg { fill: currentColor; }
.license-status.license-pro { background: rgba(255, 215, 0, 0.2); color: #FFD700; }
.license-status.license-free { background: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.9); }
.admin-info-banner {
    background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); border-left: 4px solid #1976d2;
    padding: 1.25rem 1.5rem; border-radius: 8px; display: flex; align-items: center; gap: 1rem; margin-bottom: 3rem;
}
.admin-info-banner svg { fill: #1976d2; flex-shrink: 0; }
.admin-info-banner p { margin: 0; color: #1565c0; font-size: 1rem; line-height: 1.6; }
.admin-category { margin-bottom: 4rem; }
.category-header { margin-bottom: 2rem; padding-bottom: 1.5rem; border-bottom: 3px solid var(--couleur-bordure); }
.category-title {
    display: flex; align-items: center; gap: 1rem; font-size: 2rem; font-weight: 700;
    color: var(--texte-principal); margin: 0 0 0.75rem 0;
}
.category-title svg { fill: var(--couleur-principale); }
.category-description { font-size: 1.0625rem; color: var(--texte-discret); margin: 0; }
.admin-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 2rem; }

.admin-card {
    background: white; border-radius: 16px; padding: 2rem; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    border: 2px solid transparent; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex; flex-direction: column; position: relative; overflow: hidden;
    animation: cardFadeIn 0.5s ease forwards;
}
.admin-card::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px;
    background: linear-gradient(90deg, var(--couleur-principale), #667eea);
    transform: scaleX(0); transform-origin: left; transition: transform 0.4s ease;
}
.admin-card:hover { transform: translateY(-8px); box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15); border-color: var(--couleur-principale); }
.admin-card:hover::before { transform: scaleX(1); }
.admin-card.card-wide { grid-column: span 2; }
.card-icon-wrapper {
    width: 64px; height: 64px; border-radius: 16px; display: flex; align-items: center;
    justify-content: center; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}
.card-icon-wrapper svg { fill: white; }
.card-icon-blue { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
.card-icon-purple { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); }
.card-icon-orange { background: linear-gradient(135deg, #ff9a56 0%, #ff6a88 100%); }
.card-icon-green { background: linear-gradient(135deg, #48c6ef 0%, #6f86d6 100%); }
.card-icon-teal { background: linear-gradient(135deg, #0ba360 0%, #3cba92 100%); }
.card-icon-indigo { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
.card-icon-pink { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
.card-icon-cyan { background: linear-gradient(135deg, #30cfd0 0%, #330867 100%); }
.card-icon-gold { background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); }
.card-icon-gray { background: linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%); }
.card-icon-red { background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%); }
.card-icon-amber { background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); }

.card-title { font-size: 1.375rem; font-weight: 600; color: var(--texte-principal); margin: 0 0 0.75rem 0; line-height: 1.3; }
.card-description { color: var(--texte-discret); font-size: 1rem; line-height: 1.6; margin: 0 0 1.5rem 0; flex: 1; }
.card-footer { margin-top: auto; padding-top: 1.5rem; border-top: 1px solid var(--couleur-bordure); }
.card-footer-multiple { display: flex; gap: 0.75rem; flex-wrap: wrap; }
.btn-card {
    display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem;
    padding: 0.875rem 1.5rem; border-radius: 10px; font-weight: 600; font-size: 0.95rem;
    text-decoration: none; transition: all 0.3s ease; border: none; cursor: pointer; white-space: nowrap;
}
.btn-card svg { fill: currentColor; transition: transform 0.3s ease; }
.btn-card:hover svg { transform: translateX(4px); }
.btn-card.btn-primary {
    background: linear-gradient(135deg, var(--couleur-principale) 0%, #163a6e 100%); color: white;
    box-shadow: 0 4px 12px rgba(31, 59, 115, 0.3);
}
.btn-card.btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(31, 59, 115, 0.4); }
.btn-card.btn-secondary { background: #e9ecef; color: var(--texte-principal); border: 2px solid #dee2e6; }
.btn-card.btn-secondary:hover { background: #dee2e6; border-color: #ced4da; }
.btn-card.btn-success {
    background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
}
.btn-card.btn-success:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4); }
.btn-card.btn-gold {
    background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); color: #000; box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
}
.btn-card.btn-gold:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4); }
.btn-card.btn-disabled { background: #e9ecef; color: #6c757d; cursor: not-allowed; opacity: 0.6; }

.admin-card.card-license { background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%); border: 2px solid #e9ecef; }
.license-header { display: flex; align-items: center; gap: 1.5rem; margin-bottom: 1.5rem; }
.license-badge { display: inline-block; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.75rem; font-weight: 700; letter-spacing: 0.5px; margin-top: 0.5rem; }
.license-badge.badge-pro { background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); color: #000; }
.license-badge.badge-free { background: #e9ecef; color: #6c757d; }
.instance-id-box { background: #f8f9fa; padding: 1rem 1.25rem; border-radius: 8px; margin-bottom: 1.5rem; border: 1px dashed #dee2e6; }
.instance-label { display: block; font-size: 0.875rem; color: var(--texte-discret); margin-bottom: 0.5rem; font-weight: 500; }
#instance-id-code {
    display: block; font-family: 'Courier New', monospace; font-size: 0.95rem; color: var(--couleur-principale);
    background: white; padding: 0.75rem 1rem; border-radius: 6px; cursor: pointer; transition: all 0.2s; border: 1px solid #dee2e6;
}
#instance-id-code:hover { background: #e3f2fd; border-color: var(--couleur-principale); }
.license-form { display: flex; gap: 0.75rem; }
.license-form input { flex: 1; padding: 0.875rem 1rem; border: 2px solid #dee2e6; border-radius: 8px; font-size: 0.95rem; }
.license-form input:focus { outline: none; border-color: var(--couleur-principale); }
.admin-card.card-database { border: 2px solid #fee; }
.alert-warning {
    display: flex; align-items: center; gap: 0.75rem; background: #fff3cd; border-left: 4px solid #ffc107;
    padding: 1rem 1.25rem; border-radius: 8px; margin: 1.5rem 0;
}
.alert-warning svg { fill: #856404; flex-shrink: 0; }
.alert-warning span { color: #856404; font-size: 0.9375rem; font-weight: 500; }
.inline-form { display: inline-block; }
@keyframes cardFadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.admin-card:nth-child(1) { animation-delay: 0.05s; }
.admin-card:nth-child(2) { animation-delay: 0.1s; }
.admin-card:nth-child(3) { animation-delay: 0.15s; }
.admin-card:nth-child(4) { animation-delay: 0.2s; }
.admin-card:nth-child(5) { animation-delay: 0.25s; }
.admin-card:nth-child(6) { animation-delay: 0.3s; }

/* Users Card */
.user-card {
	background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    border: 1px solid #e9ecef; display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;
    margin-bottom: 1rem; transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s;
    position: relative; overflow: hidden;
}
.user-card::before {
    content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%;
    background: linear-gradient(135deg, var(--couleur-principale, #1f3b73), #667eea);
    transform: scaleY(0); transition: transform 0.3s ease;
}
.user-card:hover { transform: translateY(-4px); box-shadow: 0 12px 28px rgba(31, 59, 115, 0.15); border-color: var(--couleur-principale, #1f3b73); }
.user-card:hover::before { transform: scaleY(1); }
.user-avatar {
    width: 50px; height: 50px; background: linear-gradient(135deg, #1f3b73 0%, #667eea 100%);
    border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; flex-shrink: 0;
}
.user-avatar svg { width: 28px; height: 28px; fill: white; }
.user-info { flex-grow: 1; min-width: 200px; }
.user-name { font-size: 1.1rem; font-weight: 600; margin: 0; color: #2c3e50; }
.user-email {
    font-size: 0.9rem; color: #6c757d; margin: 2px 0 5px 0; display: flex; align-items: center; gap: 5px; word-break: break-all;
}
.user-email svg { width: 14px; height: 14px; fill: currentColor; flex-shrink: 0; }
.role-badge {
    display: inline-flex; align-items: center; gap: 4px; padding: 4px 10px; border-radius: 20px;
    font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;
}
.role-admin { background-color: #fff3cd; color: #856404; border: 1px solid #ffeeba; }
.role-utilisateur { background-color: #e9ecef; color: #495057; border: 1px solid #dee2e6; }
.role-badge svg { width: 12px; height: 12px; fill: currentColor; }
.user-actions { display: flex; gap: 8px; margin-left: auto; align-items: center; flex-shrink: 0; }
.btn-icon-only.btn-edit:hover svg { fill: var(--couleur-principale); }
.btn-icon-only.btn-promote:hover svg { fill: #FFA500; }
.btn-icon-only.btn-reset:hover svg { fill: var(--couleur-succes); }
.btn-icon-only.btn-delete-danger:hover svg { fill: var(--couleur-erreur); }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

* Setup & Budget Admin */
.setup-container { display: grid; grid-template-columns: 1fr 1fr; min-height: 100vh; align-items: center; }
.setup-illustration { background-color: #e9ecef; height: 100%; display: flex; align-items: center; justify-content: center; }
.setup-illustration img { max-width: 70%; height: auto; }
.setup-form-wrapper { padding: 2rem 4rem; }
.setup-header { text-align: left; margin-bottom: 2rem; }
.setup-header h1 { font-size: 2.5rem; font-weight: bold; color: var(--texte-principal); margin: 0; }
.setup-form { display: flex; flex-direction: column; gap: 1.5rem; }
.password-group { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }

.budget-summary-card {
    background: white; 
    border-radius: 12px; 
    padding: 1.5rem; 
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    border: 1px solid #e9ecef; 
    height: auto; 
    margin-bottom: 1.5rem;
}
.budget-stat-list { list-style: none; padding: 0; margin: 1.5rem 0; }
.budget-stat-item {
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    padding: 0.75rem 0; 
    border-bottom: 1px dashed #e9ecef;
}
.budget-stat-item:last-child { border-bottom: none; }
.stat-label { color: #6c757d; font-size: 0.95rem; }
.stat-value { font-weight: 700; font-size: 1.1rem; font-family: 'Courier New', monospace; }
.val-positive { color: #198754; }
.val-negative { color: #dc3545; }
.val-neutral { color: #0d6efd; }
.budget-actions { display: grid; gap: 0.5rem; }
.budget-table { width: 100%; border-collapse: separate; border-spacing: 0; }
.budget-table th {
    background-color: #f8f9fa; 
    color: #6c757d; 
    font-weight: 600; 
    text-transform: uppercase;
    font-size: 0.8rem; 
    padding: 1rem; 
    border-bottom: 2px solid #e9ecef;
}
.budget-table td { padding: 1rem; vertical-align: middle; border-bottom: 1px solid #f1f3f5; background-color: white; }
.budget-table tr:hover td { background-color: #f8f9fa; }
.export-zone { background-color: #f8f9fa; border-radius: 8px; padding: 1rem; margin-top: 1rem; border: 1px solid #e9ecef; }

/* --- S√âLECTEUR D'ANN√âE (Page Budget Uniquement) --- */
.budget-year-select {
    /* Fix du texte coup√© par la fl√®che */
    padding-right: 35px !important; 
    
    /* Style sp√©cifique */
    background-color: #fff;
    border: 1px solid #dee2e6;
    border-radius: 6px;
    font-weight: 600;
    color: #1F3B73;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    cursor: pointer;
    
    /* Largeur auto mais avec un minimum pour l'esth√©tique */
    width: auto;
    min-width: 140px;
    
    /* Positionnement pr√©cis de la fl√®che Bootstrap */
    background-position: right 0.75rem center;
}

.budget-year-select:hover {
    border-color: #adb5bd;
    background-color: #f8f9fa;
}

.budget-year-select:focus {
    border-color: #1F3B73;
    box-shadow: 0 0 0 3px rgba(31, 59, 115, 0.15);
}


/* ============================================
   === NOUVEAU CSS : CARTE EXPORT PREMIUM ===
   ============================================ */

/* Override de la carte pour la version premium */
.export-card-premium {
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    border-radius: 16px;
    padding: 0;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    border: 1px solid #e3e6ea;
    overflow: hidden;
    transition: all 0.3s ease;
}

.export-card-premium:hover {
    box-shadow: 0 6px 28px rgba(0, 0, 0, 0.12);
    transform: translateY(-2px);
}

/* En-t√™te de la carte */
.export-card-header {
    background: linear-gradient(135deg, #1F3B73 0%, #2d5aa0 100%);
    padding: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.export-icon-wrapper {
    width: 48px;
    height: 48px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(10px);
}

.export-icon-wrapper i {
    font-size: 1.5rem;
    color: #ffffff;
}

.export-card-title {
    color: #ffffff;
    font-size: 1.25rem;
    font-weight: 700;
    margin: 0;
    letter-spacing: -0.02em;
}

/* Zone d'export premium (garde aussi la classe .export-zone pour compatibilit√©) */
.export-zone-premium {
    background: transparent !important;
    border: none !important;
    padding: 1.75rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    margin-top: 0 !important;
}

/* S√©lecteur de p√©riode */
.period-selector {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.export-label {
    font-size: 0.875rem;
    font-weight: 600;
    color: #495057;
    display: flex;
    align-items: center;
    margin: 0;
}

.date-input-wrapper {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.date-input-group {
    flex: 1;
    display: flex;
    align-items: center;
    background: white;
    border: 2px solid #e9ecef;
    border-radius: 10px;
    padding: 0.5rem 0.75rem;
    transition: all 0.2s ease;
}

.date-input-group:focus-within {
    border-color: #1F3B73;
    box-shadow: 0 0 0 4px rgba(31, 59, 115, 0.1);
}

.date-prefix {
    font-size: 0.813rem;
    font-weight: 600;
    color: #6c757d;
    margin-right: 0.5rem;
    white-space: nowrap;
}

.date-input {
    border: none;
    outline: none;
    font-size: 0.938rem;
    font-weight: 500;
    color: #212529;
    flex: 1;
    background: transparent;
    font-family: inherit;
}

.date-input::-webkit-calendar-picker-indicator {
    cursor: pointer;
    opacity: 0.6;
    transition: opacity 0.2s;
}

.date-input::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
}

.date-separator {
    color: #adb5bd;
    font-size: 1.125rem;
    flex-shrink: 0;
}

/* Boutons d'export */
.export-actions {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

.export-btn {
    display: flex;
    align-items: center;
    gap: 0.875rem;
    padding: 1rem;
    border: 2px solid;
    border-radius: 12px;
    background: white;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.export-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.export-btn:hover::before {
    opacity: 1;
}

/* Bouton PDF */
.export-btn-pdf {
    border-color: #dc3545;
    color: #dc3545;
}

.export-btn-pdf::before {
    background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
}

.export-btn-pdf:hover {
    border-color: #dc3545;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(220, 53, 69, 0.3);
}

/* Bouton Excel */
.export-btn-excel {
    border-color: #198754;
    color: #198754;
}

.export-btn-excel::before {
    background: linear-gradient(135deg, #198754 0%, #157347 100%);
}

.export-btn-excel:hover {
    border-color: #198754;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(25, 135, 84, 0.3);
}

/* Contenu des boutons */
.export-btn-icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 10px;
    font-size: 1.25rem;
    flex-shrink: 0;
    position: relative;
    z-index: 1;
    transition: all 0.3s ease;
}

.export-btn-pdf .export-btn-icon {
    background: rgba(220, 53, 69, 0.1);
}

.export-btn-excel .export-btn-icon {
    background: rgba(25, 135, 84, 0.1);
}

.export-btn:hover .export-btn-icon {
    background: rgba(255, 255, 255, 0.2);
}

.export-btn-content {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    flex: 1;
    position: relative;
    z-index: 1;
}

.export-btn-title {
    font-size: 1rem;
    font-weight: 700;
    line-height: 1.2;
}

.export-btn-subtitle {
    font-size: 0.75rem;
    font-weight: 500;
    opacity: 0.8;
    line-height: 1.2;
}

/* Animation au chargement */
@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.export-card-premium {
    animation: slideInUp 0.4s ease-out;
}

/* Responsive */
@media (max-width: 768px) {
    .date-input-wrapper {
        flex-direction: column;
        align-items: stretch;
    }
    
    .date-separator {
        transform: rotate(90deg);
        align-self: center;
    }
    
    .export-actions {
        grid-template-columns: 1fr;
    }
}

/* Tabs History Recent Admin */
.nav-pills .nav-link { color: #6c757d; font-weight: 600; font-size: 0.8rem; border-radius: 20px; transition: all 0.2s; }
.nav-pills .nav-link:hover { background-color: #f8f9fa; color: #212529; }
.nav-pills .nav-link.active { background-color: #343a40; color: white; }
.nav-pills .nav-link.active i.text-warning { color: #ffc107 !important; }
.nav-pills .nav-link.active i.text-info { color: #0dcaf0 !important; }
.nav-pills .nav-link.active i.text-success { color: #198754 !important; }
.nav-pills .nav-link.active i.text-danger { color: #dc3545 !important; }

@media (max-width: 768px) {
    .admin-hero { flex-direction: column; align-items: flex-start; padding: 2rem 1.5rem; }
    .admin-hero-content { flex-direction: column; align-items: flex-start; gap: 1.5rem; }
    .admin-hero-icon { width: 64px; height: 64px; }
    .admin-hero-title { font-size: 2rem; }
    .license-status { width: 100%; justify-content: center; }
    .admin-grid { grid-template-columns: 1fr; gap: 1.5rem; }
    .admin-card { padding: 1.5rem; }
    .card-footer-multiple { flex-direction: column; }
    .card-footer-multiple .btn-card { width: 100%; }
    .license-form { flex-direction: column; }
    .user-card { flex-direction: column; text-align: center; }
    .user-email { justify-content: center; }
    .user-actions { margin-left: 0; width: 100%; justify-content: center; margin-top: 10px; }
}

==================================================
FICHIER : static\css\modules\alerts.css
==================================================
/* ============================================================
   CENTRE D'ALERTES (alerts.css)
   ========================================================= */
   
.alerts-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 3rem; gap: 2rem; flex-wrap: wrap; }
.alerts-title-section { flex: 1; min-width: 300px; }
.alerts-subtitle { color: var(--texte-discret); font-size: 1rem; margin-top: 0.5rem; }
.alerts-stats { display: flex; gap: 1.5rem; flex-wrap: wrap; }

/* Anciennes Stat Cards (Gard√©es pour compatibilit√© si besoin) */
.stat-card {
    background: white; border-radius: 12px; padding: 1.5rem; display: flex; align-items: center; gap: 1rem;
    min-width: 180px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); border-left: 4px solid; transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.stat-card:hover { transform: translateY(-4px); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12); }
.stat-card.stat-warning { border-left-color: #ed8936; background: linear-gradient(135deg, #fff 0%, #fff5ee 100%); }
.stat-card.stat-danger { border-left-color: #e53e3e; background: linear-gradient(135deg, #fff 0%, #fff5f5 100%); }
.stat-icon { width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
.stat-card.stat-warning .stat-icon { background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%); }
.stat-card.stat-danger .stat-icon { background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%); }
.stat-icon svg { fill: white; }
.stat-content { display: flex; flex-direction: column; }
.stat-label { font-size: 0.875rem; color: var(--texte-discret); margin-top: 0.25rem; font-weight: 500; }

.alert-section { margin-bottom: 4rem; }
.section-header { margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 2px solid var(--couleur-bordure); }
.section-title-wrapper { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.5rem; }
.section-icon { width: 24px; height: 24px; fill: var(--couleur-principale); }
.section-title { font-size: 1.5rem; font-weight: 700; color: var(--texte-principal); margin: 0; }
.section-badge {
    display: inline-flex; align-items: center; justify-content: center; min-width: 32px; height: 32px;
    padding: 0 12px; border-radius: 16px; font-size: 0.875rem; font-weight: 700; color: white;
}
.section-badge.badge-warning { background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%); }
.section-badge.badge-danger { background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%); }
.section-description { color: var(--texte-discret); font-size: 0.95rem; margin: 0; }
.alerts-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 1.5rem; }

/* Cartes d'alerte individuelles */
.alert-card {
    background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    border: 2px solid transparent; transition: all 0.3s ease; display: flex; flex-direction: column;
}
.alert-card:hover { transform: translateY(-4px); box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12); }
.alert-card.alert-card-warning { border-color: #ed8936; }
.alert-card.alert-card-critical { border-color: #e53e3e; }
.alert-card.alert-card-resolved { opacity: 0.7; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); }
.alert-card-image {
    position: relative; width: 100%; height: 180px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); overflow: hidden;
}
.alert-card-image img { width: 100%; height: 100%; object-fit: cover; }
.alert-card-image-placeholder { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; }
.alert-card-image-placeholder svg { fill: #adb5bd; opacity: 0.5; }
.alert-resolved-badge {
    position: absolute; top: 12px; right: 12px; background: #28a745; color: white; padding: 6px 12px;
    border-radius: 20px; font-size: 0.75rem; font-weight: 600; display: flex; align-items: center; gap: 4px; box-shadow: 0 2px 8px rgba(40, 167, 69, 0.4);
}
.alert-resolved-badge svg { fill: white; }
.alert-card-content { padding: 1.25rem; flex: 1; }
.alert-card-title { font-size: 1.125rem; font-weight: 600; margin: 0 0 0.75rem 0; }
.alert-card-title a { color: var(--texte-principal); text-decoration: none; transition: color 0.2s; }
.alert-card-title a:hover { color: var(--couleur-principale); }
.alert-card-meta { display: flex; flex-wrap: wrap; gap: 1rem; margin-bottom: 1rem; }
.meta-item { display: flex; align-items: center; gap: 0.5rem; font-size: 0.875rem; color: var(--texte-discret); }
.meta-item svg { fill: var(--texte-discret); }
.alert-card-metrics { display: flex; gap: 1.5rem; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--couleur-bordure); }
.metric { display: flex; flex-direction: column; }
.metric-label { font-size: 0.75rem; color: var(--texte-discret); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.25rem; }
.metric-value { font-size: 1.5rem; font-weight: 700; color: var(--texte-principal); }
.metric.metric-critical .metric-value { color: #e53e3e; }
.alert-expiry-info { margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; }
.expiry-date { display: flex; align-items: center; gap: 0.5rem; font-size: 0.95rem; font-weight: 600; margin-bottom: 0.5rem; }
.expiry-date.expiry-critical { color: #e53e3e; }
.expiry-date.expiry-warning { color: #ed8936; }
.expiry-date svg { fill: currentColor; }
.expiry-status { font-size: 0.875rem; padding: 6px 12px; border-radius: 6px; display: inline-block; }
.expiry-status.status-critical { background: #fff5f5; color: #c53030; border: 1px solid #feb2b2; }
.expiry-status.status-warning { background: #fffaf0; color: #c05621; border: 1px solid #fbd38d; }
.alert-quantity-badge {
    margin-top: 0.75rem; display: inline-block; background: var(--couleur-principale); color: white;
    padding: 4px 12px; border-radius: 12px; font-size: 0.875rem; font-weight: 600;
}
.alert-card-actions {
    padding: 1rem 1.25rem; background: #f8f9fa; border-top: 1px solid var(--couleur-bordure); display: flex; flex-direction: column; gap: 0.75rem;
}
.checkbox-label { display: flex; align-items: center; gap: 0.5rem; font-size: 0.875rem; color: var(--texte-principal); cursor: pointer; user-select: none; }
.checkbox-label input[type="checkbox"] { width: 18px; height: 18px; cursor: pointer; accent-color: var(--couleur-principale); }
.checkbox-label span { font-weight: 500; }
.empty-alerts { text-align: center; padding: 4rem 2rem; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); }
.empty-alerts svg { fill: var(--couleur-succes); opacity: 0.3; margin-bottom: 1.5rem; }
.empty-alerts h4 { font-size: 1.25rem; font-weight: 600; color: var(--texte-principal); margin: 0 0 0.5rem 0; }
.empty-alerts p { color: var(--texte-discret); margin: 0; }

@media (max-width: 1200px) { .alerts-grid { grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); } }
@media (max-width: 768px) {
    .alerts-header { flex-direction: column; }
    .alerts-stats { width: 100%; justify-content: space-between; }
    .stat-card { flex: 1; min-width: 0; }
    .alerts-grid { grid-template-columns: 1fr; }
    .alert-card-metrics { gap: 1rem; }
}
@media (max-width: 480px) { .alerts-stats { flex-direction: column; } .stat-card { width: 100%; } }


/* ============================================================
   NOUVEAU : NAVIGATION ONGLETS KPI (Pour alertes.html)
   ========================================================= */

/* Utilitaires */
.cursor-pointer { cursor: pointer; }
.x-small { font-size: 0.7rem; }

/* Effet de survol sur les cartes */
.card-hover-effect {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.card-hover-effect:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.08) !important;
}

/* Style des Cartes KPI (Onglets) */
.kpi-card {
    background-color: #f8f9fa; /* Gris clair par d√©faut (inactif) */
    border: 1px solid #dee2e6;
    border-left-width: 4px !important; /* Garde la bordure color√©e √† gauche */
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
}

.kpi-card:hover {
    background-color: #fff;
}

/* Indicateur actif (Barre du bas) */
.active-indicator {
    height: 4px;
    width: 100%;
    background-color: transparent;
    position: absolute;
    bottom: 0;
    left: 0;
    transition: background-color 0.2s;
}

/* √âTAT ACTIF (Quand l'onglet est s√©lectionn√©) */
.nav-link.active .kpi-card {
    background-color: #ffffff;
    border-color: #dee2e6; /* Bordure standard */
    border-bottom: 1px solid white; /* L'astuce : efface la bordure du bas pour fusionner */
    box-shadow: 0 -6px 15px rgba(0,0,0,0.05); /* Ombre l√©g√®re vers le haut */
    margin-bottom: -1px; /* Chevauchement physique avec le contenu */
    z-index: 10; /* Passe au-dessus du contenu */
    border-radius: 0.375rem 0.375rem 0 0; /* Arrondi seulement en haut */
}

/* Couleurs de la barre indicateur selon le contexte */
.nav-link.active .border-danger .active-indicator { background-color: #dc3545; }
.nav-link.active .border-warning .active-indicator { background-color: #ffc107; }
.nav-link.active .border-success .active-indicator { background-color: #198754; }
.nav-link.active .border-primary .active-indicator { background-color: #0d6efd; }

==================================================
FICHIER : static\css\modules\auth.css
==================================================
/* =================================================================
   AUTH.CSS - Version R√©par√©e & Unifi√©e
   G√®re √† la fois le Login (Input Groups) et le Register (Floating)
   ================================================================= */

/* --- STRUCTURE GLOBALE --- */
.login-page-body {
    background: linear-gradient(135deg, #f1f5f9 0%, #cbd5e1 100%);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1.5rem;
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
}

/* --- CARTES (Login & Register) --- */
.login-form-container, .register-card {
    background-color: #ffffff;
    width: 100%;
    max-width: 420px; /* Largeur id√©ale pour le login */
    padding: 2.5rem;
    border-radius: 16px;
    box-shadow: 0 10px 40px rgba(30, 41, 59, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.8);
}

/* Si c'est la carte register, on peut la vouloir un peu plus large */
.register-card {
    max-width: 480px;
}

/* --- EN-T√äTES --- */
.login-header, .register-header {
    text-align: center;
    margin-bottom: 2rem;
}

.login-icon-wrapper, .register-logo {
    width: 64px;
    height: 64px;
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
    border: 1px solid #e2e8f0;
    border-radius: 16px; /* Carr√© arrondi moderne */
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1rem;
    color: var(--couleur-principale, #1F3B73);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.02);
}

.login-icon-wrapper svg, .register-logo svg {
    width: 32px;
    height: 32px;
    fill: currentColor;
}

.login-header h2, .register-header h1 {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 0.5rem;
}

.register-header p {
    color: #64748b;
    font-size: 0.9rem;
    margin: 0;
}

/* =================================================================
   STYLE 1 : INPUT GROUPS (Pour la page LOGIN)
   C'est ici que √ßa cassait. On fusionne l'ic√¥ne et l'input.
   ================================================================= */

/* Le conteneur global de l'input devient la "fausse" bordure */
.login-form .input-group {
    background-color: #f8fafc;
    border: 1px solid #cbd5e1;
    border-radius: 8px;
    padding: 4px; /* Petit padding interne */
    transition: all 0.2s ease;
    margin-bottom: 1rem; /* Espacement entre les champs */
    display: flex;
    align-items: center;
}

/* Quand on clique dedans, tout le bloc s'illumine */
.login-form .input-group:focus-within {
    background-color: #ffffff;
    border-color: var(--couleur-principale, #1F3B73);
    box-shadow: 0 0 0 4px rgba(31, 59, 115, 0.1);
}

/* L'ic√¥ne √† gauche */
.login-form .input-group-text {
    background-color: transparent;
    border: none;
    color: #64748b;
    padding-left: 12px;
    padding-right: 8px;
}

/* L'input lui-m√™me : transparent et sans bordure */
.login-form .form-control {
    border: none !important;
    background-color: transparent !important;
    box-shadow: none !important;
    color: #0f172a;
    font-weight: 500;
    padding: 10px 0;
    height: auto;
}

.login-form .form-control:focus {
    outline: none;
}

/* =================================================================
   STYLE 2 : FLOATING LABELS (Pour la page REGISTER)
   ================================================================= */

.form-floating {
    position: relative;
    margin-bottom: 1rem;
}

/* Ici, l'input a sa propre bordure */
.form-floating > .form-control {
    background-color: #f8fafc !important; /* Force le fond */
    border: 1px solid #cbd5e1 !important; /* Force la bordure */
    border-radius: 8px;
    padding-top: 1.625rem;
    padding-bottom: 0.625rem;
    padding-left: 1rem; /* Remet du padding gauche */
    height: 52px;
}

.form-floating > .form-control:focus {
    background-color: #ffffff !important;
    border-color: var(--couleur-principale, #1F3B73) !important;
    box-shadow: 0 0 0 4px rgba(31, 59, 115, 0.1) !important;
}

.form-floating > label {
    color: #64748b;
    padding-left: 1rem;
}

/* =================================================================
   BOUTONS & LIENS
   ================================================================= */

/* Bouton pleine largeur */
.btn-login, .btn-register {
    width: 100%; /* R√©pare le bouton tout petit */
    display: block;
    background-color: var(--couleur-principale, #1F3B73);
    color: white;
    font-weight: 600;
    padding: 12px;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    margin-top: 1rem;
    transition: all 0.2s ease;
    box-shadow: 0 4px 12px rgba(31, 59, 115, 0.2);
}

.btn-login:hover, .btn-register:hover {
    background-color: #162a52;
    transform: translateY(-1px);
    box-shadow: 0 6px 15px rgba(31, 59, 115, 0.3);
    color: white;
}

/* Liens du bas */
.login-footer, .register-footer {
    text-align: center;
    margin-top: 1.5rem;
    font-size: 0.9rem;
    color: #64748b;
}

.login-footer a, .register-footer a {
    color: var(--couleur-principale, #1F3B73);
    text-decoration: none;
    font-weight: 600;
}

.login-footer a:hover, .register-footer a:hover {
    text-decoration: underline;
}

/* --- BARRE DE FORCE (Register) --- */
.strength-bar {
    height: 4px;
    background-color: #e2e8f0;
    border-radius: 2px;
    overflow: hidden;
    margin-top: 0.5rem;
}
.strength-bar-fill {
    height: 100%;
    width: 0;
    transition: width 0.3s ease, background-color 0.3s ease;
}

/* --- EXIGENCES (Register) --- */
.password-requirements {
    background-color: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 0.75rem;
    margin-top: 0.5rem;
    font-size: 0.8rem;
}
.requirement-item {
    color: #94a3b8;
    display: flex;
    align-items: center;
    gap: 6px;
}
.requirement-item.met { color: #10b981; font-weight: 600; }

/* --- RESPONSIVE --- */
@media (max-width: 576px) {
    .login-form-container, .register-card {
        padding: 1.5rem;
        box-shadow: none;
        border: none;
        background: transparent;
    }
    .login-page-body {
        background: #ffffff;
        align-items: flex-start;
        padding-top: 2rem;
    }
}

==================================================
FICHIER : static\css\modules\calendar.css
==================================================
/* =================================================================
   MODULE CALENDRIER (Mensuel & Journalier)
   ================================================================= */

/* --- 1. CONTENEUR PRINCIPAL --- */
#calendrier-container {
    background: var(--fond-element);
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    padding: 2rem;
    max-width: 1400px;
    margin: 0 auto;
	overflow: visible !important; 
    position: relative;
    z-index: 1;
}

/* --- 2. EN-T√äTE (Mois + Navigation) --- */
.calendrier-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 2px solid var(--couleur-bordure);
}

.calendrier-header h3 {
    margin: 0;
    font-size: 1.75rem !important;
    font-weight: 700;
    color: var(--texte-principal);
    text-transform: capitalize;
}

.calendrier-nav {
    display: flex;
    gap: 1rem;
}

/* --- 3. VUE MENSUELLE (GRILLE) --- */
.calendrier-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 1px;
    background-color: #dee2e6;
    border: 1px solid #dee2e6;
    border-radius: 0;
    overflow: visible !important;
    clear: both;
}

/* Cellules (Jours et Titres) */
.calendrier-grid > * {
    background-color: white;
    padding: 0.5rem;
    min-height: 120px;
    display: flex;
    flex-direction: column;
    position: relative;
    text-decoration: none !important;
    color: var(--texte-principal) !important;
    transition: all 0.2s ease;
    cursor: pointer !important; /* Force la main */
}

/* Titres (Lun, Mar...) */
.calendrier-grid > .day-name {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    font-weight: 700;
    text-align: center;
    text-transform: uppercase;
    font-size: 0.85rem;
    letter-spacing: 1px;
    min-height: auto;
    padding: 1rem 0;
    display: block;
    cursor: default !important;
    pointer-events: none;
}

/* --- 4. INTERACTIONS & √âTATS (Mois) --- */

/* Survol Case */
.calendrier-grid > *:not(.day-name):not(.past-day):not(.other-month):hover {
    background-color: #ffffff !important;
    z-index: 500; 
    position: relative;
    transform: scale(1.02);
    outline: 2px solid var(--couleur-principale);
    outline-offset: -2px;
    box-shadow: 0 15px 30px rgba(31, 59, 115, 0.3) !important;
    border-radius: 4px;
    border: none !important;
}

/* Num√©ro du jour */
.day-number {
    font-size: 1.1rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    align-self: flex-start;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
}

/* Aujourd'hui */
.calendrier-grid > .today {
    background-color: #fff !important;
}
.calendrier-grid > .today .day-number {
    background-color: var(--couleur-principale);
    color: white !important;
    box-shadow: 0 2px 5px rgba(31, 59, 115, 0.3);
}

/* Jours inactifs */
.calendrier-grid > .past-day,
.calendrier-grid > .other-month {
    background-color: #f8f9fa !important;
    color: #adb5bd !important;
    cursor: default !important;
}
.calendrier-grid > .past-day:hover,
.calendrier-grid > .other-month:hover {
    transform: none;
    box-shadow: none;
    border: 1px solid #dee2e6;
    z-index: 1;
}

/* --- 5. BOUTON AJOUT RAPIDE (+) --- */
.btn-add-fast {
    border-radius: 50% !important;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    z-index: 20;
    opacity: 0; 
    transform: scale(0.5);
    display: flex !important; /* Force l'affichage flex */
    align-items: center;
    justify-content: center;
    visibility: hidden;
}

/* Affichage au survol du parent */
.calendrier-grid > *:hover .btn-add-fast {
    opacity: 1;
    transform: scale(1);
    visibility: visible;
}

.btn-add-fast:hover {
    background-color: var(--couleur-principale) !important;
    color: white !important;
    transform: scale(1.1) !important;
}

/* --- 6. VUE JOURNALI√àRE (Daily Schedule) --- */
/* C'est cette partie qui manquait et qui causait le bug d'affichage */

.daily-schedule-wrapper {
    display: flex;
    flex-direction: column;
    background: #ffffff;
    border: 1px solid var(--couleur-bordure);
    border-radius: 8px;
    overflow: hidden;
}

/* Ligne horaire */
.schedule-row {
    display: grid; /* Utilisation de Grid pour aligner Heure | Contenu */
    grid-template-columns: 80px 1fr; /* 80px pour l'heure, le reste pour le contenu */
    border-bottom: 1px solid #e9ecef;
    min-height: 60px; /* Hauteur minimale d'une heure */
}

.schedule-row:last-child {
    border-bottom: none;
}

/* Colonne Heure */
.time-col {
    background-color: #f8f9fa;
    border-right: 1px solid #e9ecef;
    padding: 10px;
    text-align: right;
    font-weight: 600;
    color: var(--texte-discret);
    font-size: 0.85rem;
    display: flex;
    align-items: flex-start;
    justify-content: flex-end;
}

/* Colonne √âv√©nements */
.events-col {
    padding: 4px 10px;
    position: relative;
    background-color: white;
}

/* Bloc √âv√©nement dans la vue jour */
.event-item {
    background-color: #e8f0fe;
    border-left: 4px solid var(--couleur-principale);
    color: var(--couleur-principale);
    padding: 8px 12px;
    border-radius: 4px;
    font-size: 0.9rem;
    margin-bottom: 4px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.event-item:hover {
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    transform: translateX(2px);
}

/* --- 7. BADGES & TOOLTIPS --- */
.reservation-badge {
    background-color: #0d6efd;
    color: white;
    font-size: 0.7rem;
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: block;
    text-align: left;
    margin-top: 2px;
}

/* --- 8. RESPONSIVE --- */
@media (max-width: 768px) {
    #calendrier-container { padding: 1rem; }
    .calendrier-grid > * { min-height: 80px; padding: 0.25rem; }
    .day-number { font-size: 0.9rem; width: 24px; height: 24px; }
    .calendrier-header { flex-direction: column; gap: 1rem; }
    
    /* Responsive Vue Jour */
    .schedule-row { grid-template-columns: 50px 1fr; }
    .time-col { font-size: 0.75rem; padding: 5px; }
}


/* =================================================================
   8. TOOLTIP DE R√âSERVATION (Code restaur√© de l'original)
   ================================================================= */

#reservation-tooltip {
    position: absolute; /* C'est cette ligne qui manquait ! */
    z-index: 1060; /* Au-dessus de tout */
    display: none; /* Cach√© par d√©faut */
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.2s ease, transform 0.2s ease;
    pointer-events: auto; /* Permet de cliquer sur les boutons */
    
    /* Design de la carte */
    background: #ffffff;
    min-width: 260px;
    max-width: 320px;
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15), 0 2px 10px rgba(0,0,0,0.05);
    border: 1px solid rgba(0,0,0,0.05);
    overflow: hidden;
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
}

/* √âtat visible */
#reservation-tooltip.visible {
    display: block;
    opacity: 1;
    transform: translateY(0);
}

/* --- EN-T√äTE (Heure + Actions) --- */
.tooltip-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: #f8f9fa; /* Gris tr√®s l√©ger */
    border-bottom: 1px solid #eee;
}

.tooltip-title {
    font-size: 0.95rem;
    color: #212529;
    font-weight: 700;
    letter-spacing: -0.3px;
}

/* --- BOUTONS D'ACTION (Ic√¥nes seulement) --- */
.tooltip-buttons {
    display: flex;
    gap: 8px;
}

.tooltip-buttons button {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    border: none;
    background: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    color: #adb5bd; /* Gris par d√©faut */
}

/* Bouton √âditer (Bleu au survol) */
.tooltip-buttons .btn-edit-resa:hover {
    background: #e7f1ff;
    color: #0d6efd;
}

/* Bouton Supprimer (Rouge au survol) */
.tooltip-buttons .btn-delete-resa:hover {
    background: #fee2e2;
    color: #dc3545;
}

/* --- LISTE DES ITEMS --- */
.tooltip-list {
    list-style: none;
    padding: 12px 16px;
    margin: 0;
    max-height: 200px;
    overflow-y: auto;
}

.tooltip-list li {
    display: flex;
    align-items: flex-start;
    padding: 4px 0;
    font-size: 0.9rem;
    color: #495057;
    line-height: 1.4;
}

/* Puce personnalis√©e */
.tooltip-list li::before {
    content: "‚Ä¢";
    color: #0d6efd; /* Couleur primaire */
    font-weight: bold;
    margin-right: 8px;
    font-size: 1.2em;
    line-height: 1;
}

/* --- √âTATS DE CHARGEMENT / ERREUR --- */
.tooltip-loading {
    padding: 20px;
    text-align: center;
    color: #6c757d;
    font-size: 0.85rem;
}

.tooltip-error {
    padding: 15px;
    text-align: center;
    color: #dc3545;
    font-weight: 600;
    background: #fff5f5;
}

==================================================
FICHIER : static\css\modules\cart.css
==================================================
/* ==============================================================
   PANIER & FOURNISSEURS 
   =========================================================== */
   
.cart-page-content { background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); overflow: hidden; }
.cart-items-container { padding: 0; min-height: 300px; }
.empty-cart-state {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    padding: 60px 20px; text-align: center; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
}
.empty-cart-icon { width: 80px; height: 80px; fill: #adb5bd; margin-bottom: 24px; opacity: 0.5; }
.empty-cart-state h3 { font-size: 24px; font-weight: 600; color: #495057; margin: 0 0 12px 0; }
.empty-cart-state p { font-size: 16px; color: #6c757d; margin: 0 0 32px 0; max-width: 400px; }
.summary-item {
    display: flex; justify-content: space-between; align-items: flex-start; gap: 20px;
    padding: 24px; background: white; border-bottom: 1px solid #e9ecef; transition: background-color 0.2s ease; animation: slideIn 0.3s ease;
}
.summary-item:hover { background: #f8f9fa; }
.summary-item:last-child { border-bottom: none; }
.summary-item-details { flex: 1; }
.summary-item-details > p { margin: 0 0 16px 0; font-size: 16px; font-weight: 600; color: #2c3e50; }
.summary-item-details > p strong { color: var(--couleur-principale); }
.summary-subtitle {
    font-size: 14px; font-weight: 600; color: #6c757d; text-transform: uppercase; letter-spacing: 0.5px; margin: 16px 0 8px 0;
}
.summary-item-details ul { list-style: none; padding: 0; margin: 0; }
.summary-item-details li { padding: 6px 0; color: #495057; font-size: 15px; }
.summary-item-details li strong { color: #2c3e50; font-weight: 600; }
.summary-actions { display: flex; flex-direction: column; gap: 8px; flex-shrink: 0; }
.btn-action.btn-secondary { background: #6c757d; color: white; }
.btn-action.btn-secondary:hover { background: #5a6268; transform: translateY(-1px); box-shadow: 0 2px 8px rgba(108, 117, 125, 0.3); }
.btn-action.btn-danger { background: #dc3545; color: white; }
.btn-action.btn-danger:hover { background: #c82333; transform: translateY(-1px); box-shadow: 0 2px 8px rgba(220, 53, 69, 0.3); }
.cart-actions-bar {
    display: flex; justify-content: flex-end; align-items: center; gap: 16px; padding: 24px; background: white; border-top: 1px solid #e9ecef;
}
.cart-actions-bar .btn-outline-danger { background: white; color: #dc3545; border: 2px solid #dc3545; }
.cart-actions-bar .btn-outline-danger:hover {
    background: #dc3545; color: white; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);
}
.btn-lg { padding: 14px 28px; font-size: 16px; }
@keyframes slideIn { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }

/* ========================================
   BADGE PANIER
   Support des 2 classes : .cart-count-badge (ancienne) et .icon-badge (nouvelle)
   ======================================== */

/* Alias : .cart-count-badge h√©rite de .icon-badge */
.cart-count-badge {
    /* H√©ritage de la classe unifi√©e du header */
    position: absolute;
    top: -4px;
    right: -4px;
    min-width: 18px;
    height: 18px;
    padding: 0 5px;
    background: #ef4444;
    color: white;
    font-size: 0.625rem;
    font-weight: 700;
    border-radius: 9px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    border: 2px solid var(--couleur-principale);
    line-height: 1;
    z-index: 10;
}

/* Animation d'apparition initiale */
@keyframes badgePop {
    0% { transform: scale(0); opacity: 0; }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); opacity: 1; }
}

/* Badges pour nombres √† 2 chiffres (support des 2 classes) */
.cart-count-badge[data-count="10"], .cart-count-badge[data-count="11"], .cart-count-badge[data-count="12"],
.cart-count-badge[data-count="13"], .cart-count-badge[data-count="14"], .cart-count-badge[data-count="15"],
.cart-count-badge[data-count="16"], .cart-count-badge[data-count="17"], .cart-count-badge[data-count="18"],
.cart-count-badge[data-count="19"],
.icon-badge[data-count="10"], .icon-badge[data-count="11"], .icon-badge[data-count="12"],
.icon-badge[data-count="13"], .icon-badge[data-count="14"], .icon-badge[data-count="15"],
.icon-badge[data-count="16"], .icon-badge[data-count="17"], .icon-badge[data-count="18"],
.icon-badge[data-count="19"] { 
    min-width: 22px; 
    font-size: 10px; 
}

.cart-count-badge.large,
.icon-badge.large { 
    min-width: 24px; 
    font-size: 9px; 
    padding: 0 4px; 
}

/* Indicateur "nouveau" (optionnel - support des 2 classes) */
.cart-count-badge.new::before,
.icon-badge.new::before {
    content: '';
    position: absolute;
    top: -3px;
    right: -3px;
    width: 8px;
    height: 8px;
    background: #10b981;
    border-radius: 50%;
    border: 2px solid var(--couleur-principale);
    animation: blink 1.5s ease-in-out infinite;
}

@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}

.cart-list-wrapper { min-height: 200px; }
.cart-item { border-bottom: 1px solid #f1f3f5; padding: 1.5rem; transition: background-color 0.2s; }
.cart-item:last-child { border-bottom: none; }
.cart-item:hover { background-color: #f8f9fa; }
.empty-cart-container { padding: 4rem 2rem; text-align: center; color: #6c757d; }
.empty-cart-icon { font-size: 4rem; margin-bottom: 1rem; opacity: 0.3; color: var(--couleur-principale); }
.cart-footer { background-color: #f8f9fa; border-top: 1px solid #e9ecef; padding: 1.5rem; border-radius: 0 0 12px 12px; }

/* Fournisseurs */
.fournisseur-table { width: 100%; border-collapse: separate; border-spacing: 0; }
.fournisseur-table th {
    background-color: #f8f9fa; color: #6c757d; font-weight: 600; text-transform: uppercase;
    font-size: 0.8rem; padding: 1rem; border-bottom: 2px solid #e9ecef;
}
.fournisseur-table td { padding: 1rem; vertical-align: middle; border-bottom: 1px solid #f1f3f5; background-color: white; }
.fournisseur-table tr:hover td { background-color: #f8f9fa; }
.fournisseur-logo-wrapper {
    width: 50px; height: 50px; border-radius: 8px; border: 1px solid #e9ecef; background-color: white;
    display: flex; align-items: center; justify-content: center; overflow: hidden; padding: 4px;
}
.fournisseur-logo { max-width: 100%; max-height: 100%; object-fit: contain; }
.fournisseur-logo-placeholder { color: #adb5bd; font-size: 1.5rem; }
.website-link { color: #0d6efd; text-decoration: none; display: inline-flex; align-items: center; gap: 5px; font-size: 0.9rem; }
.website-link:hover { text-decoration: underline; }
.supplier-item { transition: background-color 0.2s ease; border-bottom: 1px solid #f1f5f9; }
.supplier-item:last-child { border-bottom: none; }
.supplier-item:hover { background-color: #f8f9fa; }
.supplier-avatar {
    width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center;
    font-weight: 700; font-size: 1.2rem; color: var(--couleur-principale); background-color: #eef2ff;
    border: 1px solid #e0e7ff; overflow: hidden; flex-shrink: 0;
}
.supplier-logo-img { width: 100%; height: 100%; object-fit: contain; padding: 4px; background: white; }
.supplier-link {
    color: #64748b; text-decoration: none; font-size: 0.85rem; display: inline-flex; align-items: center; gap: 4px; transition: color 0.2s;
}
.supplier-link:hover { color: var(--couleur-principale); }

@media (max-width: 768px) {
    .cart-actions-bar { flex-direction: column; gap: 12px; }
    .summary-item { flex-direction: column; gap: 16px; }
    .summary-actions { flex-direction: row; width: 100%; }
    .summary-actions .btn-action { flex: 1; }
    .empty-cart-state { padding: 40px 20px; }
    .empty-cart-icon { width: 60px; height: 60px; }
    .empty-cart-state h3 { font-size: 20px; }
    .cart-count-badge,
    .icon-badge { 
        top: -4px; 
        right: -4px; 
        min-width: 16px; 
        height: 16px; 
        font-size: 10px; 
        border-width: 1.5px; 
    }
}

==================================================
FICHIER : static\css\modules\dashboard.css
==================================================
/* ==================================================
   DASHBOARD & WIDGETS
   =============================================== */
   
.dashboard-container { padding: 2rem; background: #f8f9fa; min-height: calc(100vh - 120px); }
.dashboard-header { margin-bottom: 2rem; }
.dashboard-title {
    font-size: 2rem; font-weight: 700; color: #1e293b; display: flex; align-items: center; gap: 1rem; margin: 0;
}
.dashboard-title svg { width: 40px; height: 40px; fill: #3b82f6; }

.budget-display { text-align: center; padding: 2rem 0; }
.budget-label { display: block; font-size: 0.875rem; color: #64748b; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em; }
.budget-value { display: block; font-size: 2.5rem; font-weight: 700; font-family: 'Poppins', sans-serif; }
.budget-value.positive { color: #10b981; }
.budget-value.negative { color: #ef4444; }

.widget-placeholder { text-align: center; padding: 2rem 1rem; color: #64748b; }
.widget-placeholder p { margin: 0; font-size: 0.95rem; }

.item-list { list-style: none; padding: 0; margin: 0; }
.item-list-entry {
    padding: 1rem; border-bottom: 1px solid #f1f5f9; display: flex; align-items: center; justify-content: space-between; transition: background 0.2s;
}
.item-list-entry:last-child { border-bottom: none; }
.item-list-entry:hover { background: #f8fafc; }
.item-info { flex: 1; }
.item-title { display: block; font-weight: 600; color: #1e293b; margin-bottom: 0.25rem; }
.item-subtitle { display: block; font-size: 0.875rem; color: #64748b; }

.badge-countdown { font-size: 0.875rem; font-weight: 600; padding: 0.5rem 1rem; border-radius: 0.5rem; background: #dbeafe; color: #1e40af; }
.badge-countdown.urgent { background: #fee2e2; color: #991b1b; }
.badge-countdown.warning { background: #fef3c7; color: #92400e; }
.badge-action { font-size: 0.875rem; font-weight: 500; padding: 0.5rem 0.75rem; border-radius: 0.5rem; background: #f1f5f9; color: #475569; }

.stat-grid { display: grid; gap: 1rem; }
.stat-item {
    display: flex; justify-content: space-between; align-items: center; padding: 1rem;
    background: #f8fafc; border-radius: 0.5rem; border-left: 3px solid #3b82f6;
}
.stat-item span:first-child { color: #64748b; font-size: 0.875rem; }
.stat-value { font-size: 1.5rem; font-weight: 700; color: #1e293b; }

.btn-widget {
    display: block; width: 100%; padding: 0.625rem 1rem; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    color: white; text-align: center; border-radius: 0.5rem; text-decoration: none; font-weight: 500; transition: all 0.2s;
}
.btn-widget:hover {
    background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3); color: white;
}
.btn-widget-secondary { background: white; color: #3b82f6; border: 2px solid #3b82f6; }
.btn-widget-secondary:hover { background: #eff6ff; color: #2563eb; border-color: #2563eb; }
.widget-subtitle { font-size: 0.875rem; font-weight: 600; color: #64748b; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 1rem; }

@media (max-width: 768px) {
    .dashboard-container { padding: 1rem; }
    .dashboard-title { font-size: 1.5rem; }
    .budget-value { font-size: 2rem; }
}

.widget-card {
        background: white; border-radius: 16px; padding: 0;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); border: 2px solid transparent;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); display: flex; flex-direction: column;
        position: relative; overflow: hidden; height: 100%;
    }
.widget-card::before {
        content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px;
        background: linear-gradient(90deg, var(--couleur-principale), #667eea);
        transform: scaleX(0); transform-origin: left; transition: transform 0.4s ease; z-index: 10;
    }
.widget-card:hover { transform: translateY(-8px); box-shadow: 0 12px 32px rgba(31, 59, 115, 0.15); border-color: var(--couleur-principale); }
.widget-card:hover::before { transform: scaleX(1); }
.widget-icon-wrapper {
        width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center;
        justify-content: center; flex-shrink: 0; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
.widget-icon-wrapper svg { width: 24px; height: 24px; fill: white; }

.btn-dashboard {
        background: linear-gradient(135deg, #1f3b73 0%, #163a6e 100%); color: white; border: none;
        padding: 0.75rem 1rem; border-radius: 8px; font-weight: 600; transition: all 0.3s ease;
        text-decoration: none; display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem;
    }
.btn-dashboard:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(31, 59, 115, 0.3); color: white; }

==================================================
FICHIER : static\css\modules\inventory.css
==================================================
/* ========================================================
   INVENTAIRE & GESTION
   ===================================================== */
   
.filtres-section {
  display: flex; flex-wrap: wrap; align-items: center; gap: 1.5rem; padding: 1.5rem; margin-bottom: 2rem;
  background-color: var(--fond-element); border: 1px solid var(--couleur-bordure); border-radius: 8px; box-shadow: var(--ombre-legere);
}
.filter-group { display: flex; align-items: center; gap: 0.75rem; }
.filter-group label { display: flex; align-items: center; gap: 0.5rem; font-weight: 500; color: var(--texte-principal); }
.filter-icon { width: 20px; height: 20px; fill: var(--texte-discret); }
.filter-group input, .filter-group select {
    font-size: 0.9rem; padding: 0.5rem 0.75rem; border-radius: 6px; border: 1px solid #ced4da; min-width: 180px;
}
.btn-reset { color: var(--texte-discret); font-weight: 500; text-decoration: underline; }
.btn-reset:hover { color: var(--couleur-principale); }
.table-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; }
.table-header .page-title { margin: 0; }

.object-image-container {
        height: 250px; background-color: #f8f9fa; display: flex; align-items: center;
        justify-content: center; border-bottom: 1px solid #e9ecef; overflow: hidden;
    }
.object-image { max-height: 100%; max-width: 100%; object-fit: contain; }
.stock-indicator {
        padding: 1.5rem; border-radius: 12px; background-color: white; border: 1px solid #e9ecef;
        box-shadow: 0 2px 4px rgba(0,0,0,0.02); height: 100%; display: flex; flex-direction: column; justify-content: center;
    }
.stock-value { font-size: 2.5rem; font-weight: 700; line-height: 1; margin-bottom: 0.5rem; }
.stock-label { color: #6c757d; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.5px; font-weight: 600; }
.history-table th { background-color: #f8f9fa; font-size: 0.8rem; text-transform: uppercase; color: #6c757d; }
.history-table td { vertical-align: middle; font-size: 0.9rem; }

.management-header {
  display: flex; justify-content: space-between; align-items: center;
  margin-bottom: 2rem; padding-bottom: 1.5rem; border-bottom: 1px solid var(--couleur-bordure);
}
.management-header .page-title { margin: 0; }
.add-inline-form { display: flex; gap: 0.5rem; }
.add-inline-form input { font-size: 0.9rem; padding: 0.5rem 0.75rem; border-radius: 6px; border: 1px solid #ced4da; width: 250px; }
.add-inline-form button {
    background-color: var(--couleur-principale); color: var(--texte-inverse); border: none;
    border-radius: 6px; width: 38px; height: 38px; font-size: 1.5rem; cursor: pointer;
}

.card-container.management-page { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem; }
.item-card {
  background-color: var(--fond-element); border: 1px solid var(--couleur-bordure); border-radius: 8px;
  box-shadow: var(--ombre-legere); padding: 1rem; display: flex; align-items: center; gap: 1rem;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.item-card:hover { transform: translateY(-3px); box-shadow: var(--ombre-moyenne); }
.card-info { flex-grow: 1; }
.card-title { font-weight: 600; font-size: 1.1rem; color: var(--texte-principal); margin-bottom: 0.25rem; display: block; }
.card-count { font-size: 0.85rem; color: var(--texte-discret); display: block; }
.card-actions { display: flex; align-items: center; gap: 0.5rem; }
.card-actions a, .card-actions .edit-btn, .card-actions .delete-btn {
    display: inline-flex; align-items: center; justify-content: center; width: 36px; height: 36px;
    border-radius: 50%; background-color: var(--fond-element); border: 1px solid var(--couleur-bordure);
    color: var(--texte-discret); cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative; overflow: hidden;
}
.card-actions a:hover, .card-actions .edit-btn:hover, .card-actions .delete-btn:hover {
    transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}
.card-actions a[title="Voir le contenu"]:hover {
    background-color: rgba(31, 59, 115, 0.1); border-color: var(--couleur-principale); color: var(--couleur-principale);
}
.card-actions .edit-btn:hover {
    background-color: rgba(40, 167, 69, 0.1); border-color: var(--couleur-succes); color: var(--couleur-succes);
}
.card-actions .delete-btn:hover {
    background-color: rgba(220, 53, 69, 0.1); border-color: var(--couleur-erreur); color: var(--couleur-erreur);
    animation: pulse-danger 0.6s infinite;
}
@keyframes pulse-danger {
    0%, 100% { box-shadow: 0 4px 12px rgba(220, 53, 69, 0.2); }
    50% { box-shadow: 0 4px 16px rgba(220, 53, 69, 0.4); }
}

.edit-mode { display: none; align-items: center; gap: 0.5rem; width: 100%; }
.edit-input { flex-grow: 1; }
.save-btn, .cancel-btn { background: none; border: none; cursor: pointer; padding: 0.5rem; display: flex; align-items: center; justify-content: center; }
.save-btn svg, .cancel-btn svg { width: 20px; height: 20px; fill: var(--texte-discret); transition: all 0.2s ease; }
.save-btn:hover svg { fill: var(--couleur-succes); transform: scale(1.2); }
.cancel-btn:hover svg { fill: var(--couleur-erreur); transform: scale(1.2); }

/* Pexels */
.modal-dialog.modal-xl .input-with-button { display: flex; gap: 0.5rem; }
.modal-dialog.modal-xl .input-with-button input { flex-grow: 1; }
.modal-dialog.modal-xl .pexels-results-grid {
    display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 0.5rem; margin-top: 0.75rem;
    max-height: 180px; overflow-y: auto; padding: 0.5rem; border: 1px solid var(--couleur-bordure); border-radius: 6px;
}
.modal-dialog.modal-xl .pexels-image { width: 100%; height: 60px; object-fit: cover; border-radius: 4px; cursor: pointer; }

/* Correction Modale date */
#addObjectModal .input-group { display: flex !important; flex-wrap: nowrap !important; align-items: stretch !important; width: 100%; }
#addObjectModal .input-group-text { white-space: nowrap; display: flex; align-items: center; border-top-right-radius: 0 !important; border-bottom-right-radius: 0 !important; }
#addObjectModal input[type="date"] {
    flex: 1 1 auto !important; width: 1% !important; min-width: 0 !important; border-top-left-radius: 0 !important; border-bottom-left-radius: 0 !important; margin-left: -1px;
}
#addObjectModal #seuil:focus { border-color: #dc3545 !important; box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.25) !important; border-left: 0 !important; }
#addObjectModal .input-group:focus-within .input-group-text.text-danger { border-color: #dc3545 !important; z-index: 5; }

/* Kits */
.kit-card {
        background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        border: 1px solid #e9ecef; display: flex; align-items: center; gap: 1.5rem; flex-wrap: wrap;
        margin-bottom: 1rem; transition: transform 0.2s, box-shadow 0.2s; position: relative; overflow: visible;
}
.kit-card:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(0,0,0,0.1); border-color: var(--couleur-principale, #1f3b73); }
.kit-icon {
        width: 50px; height: 50px; background: linear-gradient(135deg, #6f42c1 0%, #a8edea 100%);
        border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; flex-shrink: 0;
}
.kit-icon svg { width: 28px; height: 28px; fill: white; }
.kit-info { flex-grow: 1; min-width: 200px; }
.kit-name { font-size: 1.1rem; font-weight: 600; margin: 0; color: #2c3e50; text-decoration: none; display: block; }
.kit-name:hover { color: var(--couleur-principale, #1f3b73); text-decoration: underline; }
.kit-desc {
        font-size: 0.9rem; color: #6c757d; margin: 4px 0 8px 0; display: -webkit-box;
        -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
}
.count-badge {
        display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px; border-radius: 20px;
        font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;
        background-color: #f8f9fa; color: #495057; border: 1px solid #dee2e6;
}
.count-badge svg { width: 14px; height: 14px; fill: currentColor; }
.kit-actions { display: flex; gap: 8px; margin-left: auto; align-items: center; flex-shrink: 0; }
@media (max-width: 768px) { .kit-card { flex-direction: column; text-align: center; gap: 1rem; } .kit-actions { margin-left: 0; width: 100%; justify-content: center; } }

.kit-edit-card {
        background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid #e9ecef;
        height: 100%; display: flex; flex-direction: column; overflow: hidden;
}
.kit-edit-header { padding: 1.25rem; border-bottom: 1px solid #e9ecef; background-color: #f8f9fa; display: flex; justify-content: space-between; align-items: center; }
.kit-edit-title { font-size: 1.1rem; font-weight: 600; margin: 0; color: #2c3e50; display: flex; align-items: center; gap: 0.5rem; }
.kit-edit-body { padding: 0; flex-grow: 1; overflow-y: auto; max-height: 650px; background-color: #fff; }
.kit-edit-toolbar { padding: 1rem; background-color: #fff; border-bottom: 1px solid #f1f3f5; position: sticky; top: 0; z-index: 10; }
.kit-edit-table { width: 100%; margin-bottom: 0; }
.kit-edit-table th {
        font-size: 0.8rem; text-transform: uppercase; color: #6c757d; font-weight: 600;
        background-color: #f8f9fa; padding: 0.75rem 1rem; border-bottom: 1px solid #e9ecef; position: sticky; top: 0;
}
.kit-edit-body:has(.kit-edit-toolbar) .kit-edit-table th { top: 0; }
.kit-edit-table td { vertical-align: middle; padding: 0.75rem 1rem; border-bottom: 1px solid #f1f3f5; }
.kit-edit-table tr:last-child td { border-bottom: none; }
.kit-edit-table tr:hover { background-color: #f8f9fa; }
.kit-qty-input { width: 70px; text-align: center; border: 1px solid #ced4da; border-radius: 6px; padding: 4px; font-weight: 500; }
.kit-qty-input:focus { border-color: var(--couleur-principale); outline: none; box-shadow: 0 0 0 2px rgba(31, 59, 115, 0.1); }
.kit-search-wrapper { position: relative; }
.kit-search-wrapper i { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #adb5bd; }
.kit-search-input { padding-left: 35px; border-radius: 20px; background-color: #f8f9fa; border: 1px solid #e9ecef; }
.kit-search-input:focus { background-color: #fff; border-color: #b1b7c1; box-shadow: none; }

/* Importation en masse */
.import-card { background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid #e9ecef; height: 100%; }
.step-number {
        display: inline-flex; align-items: center; justify-content: center; width: 32px; height: 32px;
        background-color: #eef2ff; color: #4f46e5; border-radius: 50%; font-weight: 700; margin-right: 10px;
}
.file-drop-zone {
        border: 2px dashed #cbd5e1; border-radius: 12px; padding: 3rem 1.5rem; text-align: center;
        background-color: #f8fafc; transition: all 0.3s ease; cursor: pointer; position: relative;
}
.file-drop-zone:hover, .file-drop-zone.dragover { border-color: #4f46e5; background-color: #eef2ff; }
.file-drop-zone.file-selected { border-color: #10b981; background-color: #ecfdf5; }
.file-input { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; }
.drop-icon { font-size: 3rem; color: #94a3b8; margin-bottom: 1rem; transition: color 0.3s; }
.file-drop-zone:hover .drop-icon { color: #4f46e5; }
.file-drop-zone.file-selected .drop-icon { color: #10b981; }
.help-list { list-style: none; padding: 0; margin-top: 1rem; }
.help-list li { position: relative; padding-left: 1.5rem; margin-bottom: 0.5rem; color: #64748b; font-size: 0.9rem; }
.help-list li::before { content: "‚Ä¢"; color: #4f46e5; font-weight: bold; position: absolute; left: 0; }

==================================================
FICHIER : static\css\modules\profile.css
==================================================
/* =========================================================
   PROFIL & A PROPOS
   ====================================================== */
   
.profile-page-container { display: flex; justify-content: center; padding-top: 2rem; }
.profile-form-wrapper {
    width: 100%; max-width: 500px; background-color: var(--fond-element); border-radius: 8px;
    box-shadow: var(--ombre-legere); border: 1px solid var(--couleur-bordure); overflow: hidden;
}
.profile-header { text-align: center; padding: 1.5rem; border-bottom: 1px solid var(--couleur-bordure); }
.profile-header h2 { margin: 0 0 0.5rem 0; font-size: 1.5rem; font-weight: 600; }
.profile-form { padding: 2rem; display: flex; flex-direction: column; gap: 1.5rem; }

/* Page A Propos */
.fade-in-up { animation: fadeInUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1); }
@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.about-hero {
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); border-radius: 20px; padding: 3rem 2rem;
    text-align: center; border: 1px solid #e9ecef; box-shadow: 0 10px 30px rgba(31, 59, 115, 0.05);
    margin-bottom: 2rem; position: relative; overflow: hidden;
}
.about-hero::before {
    content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
    background: radial-gradient(circle, rgba(31, 59, 115, 0.03) 0%, transparent 70%); z-index: 0;
}
.logo-container {
    width: 100px; height: 100px; background: white; border-radius: 24px; display: inline-flex; align-items: center;
    justify-content: center; box-shadow: 0 8px 24px rgba(0,0,0,0.08); margin-bottom: 1.5rem; position: relative; z-index: 1;
}
.dev-card {
    background: white; border-radius: 16px; padding: 1.5rem; border: 1px solid #e9ecef;
    transition: transform 0.3s ease, box-shadow 0.3s ease; height: 100%; text-align: center;
}
.dev-card:hover { transform: translateY(-5px); box-shadow: 0 12px 24px rgba(31, 59, 115, 0.1); border-color: var(--couleur-principale); }
.dev-avatar {
    width: 64px; height: 64px; background: linear-gradient(135deg, var(--couleur-principale) 0%, #667eea 100%);
    color: white; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center;
    font-size: 1.5rem; margin-bottom: 1rem; box-shadow: 0 4px 12px rgba(31, 59, 115, 0.2);
}
.license-box {
    background: #152952; color: white; border-radius: 16px; padding: 2rem; position: relative; overflow: hidden;
}
.license-badge-pro {
    background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); color: #000; font-weight: 800;
    padding: 0.5rem 1rem; border-radius: 30px; display: inline-block; box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
}
.license-badge-free {
    background: rgba(255, 255, 255, 0.2); color: white; font-weight: 600; padding: 0.5rem 1rem;
    border-radius: 30px; display: inline-block; border: 1px solid rgba(255,255,255,0.3);
}
.instance-code {
    font-family: 'Courier New', monospace; background: rgba(0, 0, 0, 0.3); padding: 0.5rem 1rem;
    border-radius: 8px; color: #a7d3f2; letter-spacing: 1px; cursor: pointer; transition: background 0.2s;
}
.instance-code:hover { background: rgba(0, 0, 0, 0.5); color: white; }

==================================================
FICHIER : static\css\modules\reports.css
==================================================
/* ==============================================================
   MODULE RAPPORTS 
   =========================================================== */
   
.form-rapports-grid { display: grid; grid-template-columns: 400px 1fr; gap: 2rem; align-items: start; }
.rapports-config-col { display: flex; flex-direction: column; gap: 1.5rem; }
.rapport-card {
    background: var(--fond-element); border-radius: 16px; padding: 1.5rem;
    box-shadow: var(--ombre-legere); border: 1px solid var(--couleur-bordure); transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.rapport-card:hover { transform: translateY(-2px); box-shadow: var(--ombre-moyenne); }
.card-title-icon {
    display: flex; align-items: center; gap: 0.75rem; font-size: 1.1rem; font-weight: 700;
    color: var(--couleur-principale); margin: 0 0 1.5rem 0; padding-bottom: 1rem; border-bottom: 2px solid #f1f3f5;
}
.card-title-svg {
    width: 24px; height: 24px; fill: var(--couleur-principale); background: rgba(31, 59, 115, 0.1);
    padding: 4px; border-radius: 6px; box-sizing: content-box;
}
.form-subtitle { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--texte-discret); font-weight: 700; margin-bottom: 0.75rem; }
.form-group { margin-bottom: 1.5rem; }
.form-group:last-child { margin-bottom: 0; }
.form-group-inline { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
.input-group label { display: block; font-size: 0.85rem; font-weight: 600; color: var(--texte-principal); margin-bottom: 0.4rem; }
.input-group input[type="date"] {
    width: 100%; padding: 0.6rem 1rem; border: 1px solid var(--couleur-bordure); border-radius: 8px;
    font-family: inherit; color: var(--texte-principal); background: #f8f9fa; transition: all 0.2s;
}
.input-group input[type="date"]:focus { background: white; border-color: var(--couleur-principale); box-shadow: 0 0 0 3px rgba(31, 59, 115, 0.1); outline: none; }
.segmented-control {
    display: flex; flex-direction: column; gap: 0.5rem; background: #f8f9fa;
    padding: 0.5rem; border-radius: 10px; border: 1px solid var(--couleur-bordure);
}
.segmented-control input[type="radio"] { display: none; }
.segmented-control label {
    display: flex; align-items: center; gap: 10px; padding: 10px 15px; border-radius: 8px; cursor: pointer;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); border: 1px solid transparent; color: var(--texte-discret); font-weight: 500; font-size: 0.9rem;
}
.segmented-control label:hover { background: rgba(0,0,0,0.03); color: var(--texte-principal); }
.segmented-control input[type="radio"]:checked + label {
    background: white; color: var(--couleur-principale); border-color: var(--couleur-principale); box-shadow: 0 2px 8px rgba(31, 59, 115, 0.15); font-weight: 600;
}
.segmented-control .btn-icon { width: 20px; height: 20px; stroke: currentColor; stroke-width: 2; fill: none; opacity: 0.7; }
.segmented-control input[type="radio"]:checked + label .btn-icon { opacity: 1; stroke: var(--couleur-principale); }
.export-control { flex-direction: row; gap: 1rem; background: transparent; border: none; padding: 0; }
.segmented-label {
    flex: 1; display: flex; align-items: center; justify-content: center; gap: 10px; padding: 12px;
    background: white; border: 1px solid var(--couleur-bordure); border-radius: 8px; cursor: pointer;
    color: var(--texte-principal); font-weight: 600; font-size: 0.9rem; transition: all 0.2s; box-shadow: 0 2px 4px rgba(0,0,0,0.02);
}
.segmented-label:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); border-color: var(--couleur-principale); color: var(--couleur-principale); }
.segmented-label:active { transform: translateY(0); }
.history-preview-list { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 1rem; }
.history-preview-item {
    display: flex; flex-direction: column; padding: 1rem; background: #f8f9fa;
    border-radius: 10px; border-left: 4px solid var(--couleur-principale); transition: background 0.2s;
}
.history-preview-item:hover { background: white; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
.history-preview-header {
    display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--texte-discret);
    margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.5px;
}
.history-preview-date, .history-preview-time { display: flex; align-items: center; gap: 4px; }
.history-preview-icon { width: 14px; height: 14px; fill: var(--texte-discret); }
.history-preview-body { font-size: 0.95rem; color: var(--texte-principal); margin-bottom: 0.5rem; }
.history-preview-action { font-weight: 700; color: var(--couleur-principale); }
.history-preview-object { font-weight: 500; }
.history-preview-footer { font-size: 0.8rem; color: var(--texte-discret); font-style: italic; display: flex; align-items: center; gap: 6px; }
.history-preview-footer::before { content: ''; display: block; width: 20px; height: 1px; background: #dee2e6; }
@media (max-width: 992px) { .form-rapports-grid { grid-template-columns: 1fr; } .form-group-inline { grid-template-columns: 1fr; } .export-control { flex-direction: column; } }

/* Echeances Table */
.echeance-table { width: 100%; border-collapse: separate; border-spacing: 0; }
.echeance-table th {
    background-color: #f8f9fa; color: #6c757d; font-weight: 600; text-transform: uppercase;
    font-size: 0.8rem; padding: 1rem; border-bottom: 2px solid #e9ecef;
}
.echeance-table td { padding: 1rem; vertical-align: middle; border-bottom: 1px solid #f1f3f5; background-color: white; }
.echeance-table tr:hover td { background-color: #f8f9fa; }
.actions-wrapper { display: flex; justify-content: flex-end; align-items: center; gap: 8px; }

==================================================
FICHIER : static\css\modules\tour.css
==================================================
/* =====================================================================
   MODULE : VISITE GUID√âE (TOUR)
   ================================================================== */

/* L'√©cran noir semi-transparent */
.tour-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.75); /* Plus sombre pour le contraste */
    z-index: 1080; /* Au-dessus de la navbar (1030) */
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    backdrop-filter: blur(2px); /* Petit effet flou moderne */
}

.tour-overlay.active {
    opacity: 1;
    visibility: visible;
}

/* L'√©l√©ment mis en valeur (Spotlight) */
.tour-highlight {
    position: relative;
    z-index: 1090 !important; /* Au-dessus de l'overlay */
    background-color: white; /* Force un fond blanc si l'√©l√©ment est transparent */
    box-shadow: 0 0 0 4px #0d6efd, 0 0 30px rgba(0,0,0,0.5); /* Halo bleu */
    border-radius: 8px;
    pointer-events: none; /* On emp√™che le clic sur l'√©l√©ment pendant le tuto */
    transition: all 0.3s ease;
}

/* La bulle d'explication */
.tour-tooltip {
    position: absolute;
    background-color: #ffffff;
    width: 340px;
    padding: 24px;
    border-radius: 16px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.3);
    z-index: 1100; /* Au-dessus de tout */
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    
    /* Bordure sup√©rieure color√©e */
    border-top: 5px solid #0d6efd;
}

.tour-tooltip.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

/* Typographie */
.tour-title {
    font-size: 1.25rem;
    font-weight: 800;
    color: #1F3B73; /* Bleu LabFlow */
    margin-bottom: 12px;
    letter-spacing: -0.5px;
}

.tour-content {
    font-size: 0.95rem;
    line-height: 1.6;
    color: #495057;
    margin-bottom: 24px;
}

/* Actions (Boutons) */
.tour-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 16px;
    border-top: 1px solid #f1f3f5;
}

.tour-btn-skip {
    background: none;
    border: none;
    color: #adb5bd;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: color 0.2s;
}

.tour-btn-skip:hover {
    color: #6c757d;
    text-decoration: underline;
}

.tour-btn-next {
    background: linear-gradient(135deg, #0d6efd 0%, #0a58ca 100%);
    color: white;
    border: none;
    padding: 10px 24px;
    border-radius: 50px;
    font-weight: 600;
    font-size: 0.9rem;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(13, 110, 253, 0.3);
    transition: all 0.2s ease;
}

.tour-btn-next:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(13, 110, 253, 0.4);
}

a[href*='/panier'].tour-highlight {
    background-color: #1F3B73 !important; /* Bleu LabFlow */
    border-radius: 50% !important; /* Rond */
    box-shadow: 0 0 0 4px #0d6efd, 0 0 30px rgba(0,0,0,0.5) !important;
}

a[href*='/alertes'].tour-highlight {
    background-color: #1F3B73 !important;
    border-radius: 50% !important;
    box-shadow: 0 0 0 4px #0d6efd, 0 0 30px rgba(0,0,0,0.5) !important;
}

==================================================
FICHIER : static\js\bootstrap.bundle.min.js
==================================================
/*!
  * Bootstrap v5.3.0 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).bootstrap=e()}(this,(function(){"use strict";const t=new Map,e={set(e,i,n){t.has(e)||t.set(e,new Map);const s=t.get(e);s.has(i)||0===s.size?s.set(i,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`)},get:(e,i)=>t.has(e)&&t.get(e).get(i)||null,remove(e,i){if(!t.has(e))return;const n=t.get(e);n.delete(i),0===n.size&&t.delete(e)}},i="transitionend",n=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,((t,e)=>`#${CSS.escape(e)}`))),t),s=t=>{t.dispatchEvent(new Event(i))},o=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),r=t=>o(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(n(t)):null,a=t=>{if(!o(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),i=t.closest("details:not([open])");if(!i)return e;if(i!==t){const e=t.closest("summary");if(e&&e.parentNode!==i)return!1;if(null===e)return!1}return e},l=t=>!t||t.nodeType!==Node.ELEMENT_NODE||!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled")),c=t=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?c(t.parentNode):null},h=()=>{},d=t=>{t.offsetHeight},u=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,f=[],p=()=>"rtl"===document.documentElement.dir,m=t=>{var e;e=()=>{const e=u();if(e){const i=t.NAME,n=e.fn[i];e.fn[i]=t.jQueryInterface,e.fn[i].Constructor=t,e.fn[i].noConflict=()=>(e.fn[i]=n,t.jQueryInterface)}},"loading"===document.readyState?(f.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of f)t()})),f.push(e)):e()},g=(t,e=[],i=t)=>"function"==typeof t?t(...e):i,_=(t,e,n=!0)=>{if(!n)return void g(t);const o=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:i}=window.getComputedStyle(t);const n=Number.parseFloat(e),s=Number.parseFloat(i);return n||s?(e=e.split(",")[0],i=i.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(i))):0})(e)+5;let r=!1;const a=({target:n})=>{n===e&&(r=!0,e.removeEventListener(i,a),g(t))};e.addEventListener(i,a),setTimeout((()=>{r||s(e)}),o)},b=(t,e,i,n)=>{const s=t.length;let o=t.indexOf(e);return-1===o?!i&&n?t[s-1]:t[0]:(o+=i?1:-1,n&&(o=(o+s)%s),t[Math.max(0,Math.min(o,s-1))])},v=/[^.]*(?=\..*)\.|.*/,y=/\..*/,w=/::\d+$/,A={};let E=1;const T={mouseenter:"mouseover",mouseleave:"mouseout"},C=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function O(t,e){return e&&`${e}::${E++}`||t.uidEvent||E++}function x(t){const e=O(t);return t.uidEvent=e,A[e]=A[e]||{},A[e]}function k(t,e,i=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===i))}function L(t,e,i){const n="string"==typeof e,s=n?i:e||i;let o=N(t);return C.has(o)||(o=t),[n,s,o]}function S(t,e,i,n,s){if("string"!=typeof e||!t)return;let[o,r,a]=L(e,i,n);if(e in T){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};r=t(r)}const l=x(t),c=l[a]||(l[a]={}),h=k(c,r,o?i:null);if(h)return void(h.oneOff=h.oneOff&&s);const d=O(r,e.replace(v,"")),u=o?function(t,e,i){return function n(s){const o=t.querySelectorAll(e);for(let{target:r}=s;r&&r!==this;r=r.parentNode)for(const a of o)if(a===r)return M(s,{delegateTarget:r}),n.oneOff&&P.off(t,s.type,e,i),i.apply(r,[s])}}(t,i,r):function(t,e){return function i(n){return M(n,{delegateTarget:t}),i.oneOff&&P.off(t,n.type,e),e.apply(t,[n])}}(t,r);u.delegationSelector=o?i:null,u.callable=r,u.oneOff=s,u.uidEvent=d,c[d]=u,t.addEventListener(a,u,o)}function D(t,e,i,n,s){const o=k(e[i],n,s);o&&(t.removeEventListener(i,o,Boolean(s)),delete e[i][o.uidEvent])}function I(t,e,i,n){const s=e[i]||{};for(const[o,r]of Object.entries(s))o.includes(n)&&D(t,e,i,r.callable,r.delegationSelector)}function N(t){return t=t.replace(y,""),T[t]||t}const P={on(t,e,i,n){S(t,e,i,n,!1)},one(t,e,i,n){S(t,e,i,n,!0)},off(t,e,i,n){if("string"!=typeof e||!t)return;const[s,o,r]=L(e,i,n),a=r!==e,l=x(t),c=l[r]||{},h=e.startsWith(".");if(void 0===o){if(h)for(const i of Object.keys(l))I(t,l,i,e.slice(1));for(const[i,n]of Object.entries(c)){const s=i.replace(w,"");a&&!e.includes(s)||D(t,l,r,n.callable,n.delegationSelector)}}else{if(!Object.keys(c).length)return;D(t,l,r,o,s?i:null)}},trigger(t,e,i){if("string"!=typeof e||!t)return null;const n=u();let s=null,o=!0,r=!0,a=!1;e!==N(e)&&n&&(s=n.Event(e,i),n(t).trigger(s),o=!s.isPropagationStopped(),r=!s.isImmediatePropagationStopped(),a=s.isDefaultPrevented());const l=M(new Event(e,{bubbles:o,cancelable:!0}),i);return a&&l.preventDefault(),r&&t.dispatchEvent(l),l.defaultPrevented&&s&&s.preventDefault(),l}};function M(t,e={}){for(const[i,n]of Object.entries(e))try{t[i]=n}catch(e){Object.defineProperty(t,i,{configurable:!0,get:()=>n})}return t}function j(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function F(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const H={setDataAttribute(t,e,i){t.setAttribute(`data-bs-${F(e)}`,i)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${F(e)}`)},getDataAttributes(t){if(!t)return{};const e={},i=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const n of i){let i=n.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),e[i]=j(t.dataset[n])}return e},getDataAttribute:(t,e)=>j(t.getAttribute(`data-bs-${F(e)}`))};class ${static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const i=o(e)?H.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"==typeof i?i:{},...o(e)?H.getDataAttributes(e):{},..."object"==typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[n,s]of Object.entries(e)){const e=t[n],r=o(e)?"element":null==(i=e)?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(s).test(r))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${r}" but expected type "${s}".`)}var i}}class W extends ${constructor(t,i){super(),(t=r(t))&&(this._element=t,this._config=this._getConfig(i),e.set(this._element,this.constructor.DATA_KEY,this))}dispose(){e.remove(this._element,this.constructor.DATA_KEY),P.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,i=!0){_(t,e,i)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return e.get(r(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.3.0"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const B=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let i=t.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),e=i&&"#"!==i?i.trim():null}return n(e)},z={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const i=[];let n=t.parentNode.closest(e);for(;n;)i.push(n),n=n.parentNode.closest(e);return i},prev(t,e){let i=t.previousElementSibling;for(;i;){if(i.matches(e))return[i];i=i.previousElementSibling}return[]},next(t,e){let i=t.nextElementSibling;for(;i;){if(i.matches(e))return[i];i=i.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(e,t).filter((t=>!l(t)&&a(t)))},getSelectorFromElement(t){const e=B(t);return e&&z.findOne(e)?e:null},getElementFromSelector(t){const e=B(t);return e?z.findOne(e):null},getMultipleElementsFromSelector(t){const e=B(t);return e?z.find(e):[]}},R=(t,e="hide")=>{const i=`click.dismiss${t.EVENT_KEY}`,n=t.NAME;P.on(document,i,`[data-bs-dismiss="${n}"]`,(function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),l(this))return;const s=z.getElementFromSelector(this)||this.closest(`.${n}`);t.getOrCreateInstance(s)[e]()}))};class q extends W{static get NAME(){return"alert"}close(){if(P.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),P.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=q.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}R(q,"close"),m(q);const V='[data-bs-toggle="button"]';class K extends W{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each((function(){const e=K.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}P.on(document,"click.bs.button.data-api",V,(t=>{t.preventDefault();const e=t.target.closest(V);K.getOrCreateInstance(e).toggle()})),m(K);const Q={endCallback:null,leftCallback:null,rightCallback:null},X={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Y extends ${constructor(t,e){super(),this._element=t,t&&Y.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Q}static get DefaultType(){return X}static get NAME(){return"swipe"}dispose(){P.off(this._element,".bs.swipe")}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),g(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const e=t/this._deltaX;this._deltaX=0,e&&g(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(P.on(this._element,"pointerdown.bs.swipe",(t=>this._start(t))),P.on(this._element,"pointerup.bs.swipe",(t=>this._end(t))),this._element.classList.add("pointer-event")):(P.on(this._element,"touchstart.bs.swipe",(t=>this._start(t))),P.on(this._element,"touchmove.bs.swipe",(t=>this._move(t))),P.on(this._element,"touchend.bs.swipe",(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const U="next",G="prev",J="left",Z="right",tt="slid.bs.carousel",et="carousel",it="active",nt={ArrowLeft:Z,ArrowRight:J},st={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ot={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class rt extends W{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=z.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===et&&this.cycle()}static get Default(){return st}static get DefaultType(){return ot}static get NAME(){return"carousel"}next(){this._slide(U)}nextWhenVisible(){!document.hidden&&a(this._element)&&this.next()}prev(){this._slide(G)}pause(){this._isSliding&&s(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?P.one(this._element,tt,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void P.one(this._element,tt,(()=>this.to(t)));const i=this._getItemIndex(this._getActive());if(i===t)return;const n=t>i?U:G;this._slide(n,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&P.on(this._element,"keydown.bs.carousel",(t=>this._keydown(t))),"hover"===this._config.pause&&(P.on(this._element,"mouseenter.bs.carousel",(()=>this.pause())),P.on(this._element,"mouseleave.bs.carousel",(()=>this._maybeEnableCycle()))),this._config.touch&&Y.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of z.find(".carousel-item img",this._element))P.on(t,"dragstart.bs.carousel",(t=>t.preventDefault()));const t={leftCallback:()=>this._slide(this._directionToOrder(J)),rightCallback:()=>this._slide(this._directionToOrder(Z)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new Y(this._element,t)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=nt[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=z.findOne(".active",this._indicatorsElement);e.classList.remove(it),e.removeAttribute("aria-current");const i=z.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);i&&(i.classList.add(it),i.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const i=this._getActive(),n=t===U,s=e||b(this._getItems(),i,n,this._config.wrap);if(s===i)return;const o=this._getItemIndex(s),r=e=>P.trigger(this._element,e,{relatedTarget:s,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:o});if(r("slide.bs.carousel").defaultPrevented)return;if(!i||!s)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=s;const l=n?"carousel-item-start":"carousel-item-end",c=n?"carousel-item-next":"carousel-item-prev";s.classList.add(c),d(s),i.classList.add(l),s.classList.add(l),this._queueCallback((()=>{s.classList.remove(l,c),s.classList.add(it),i.classList.remove(it,c,l),this._isSliding=!1,r(tt)}),i,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return z.findOne(".active.carousel-item",this._element)}_getItems(){return z.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return p()?t===J?G:U:t===J?U:G}_orderToDirection(t){return p()?t===G?J:Z:t===G?Z:J}static jQueryInterface(t){return this.each((function(){const e=rt.getOrCreateInstance(this,t);if("number"!=typeof t){if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)}))}}P.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",(function(t){const e=z.getElementFromSelector(this);if(!e||!e.classList.contains(et))return;t.preventDefault();const i=rt.getOrCreateInstance(e),n=this.getAttribute("data-bs-slide-to");return n?(i.to(n),void i._maybeEnableCycle()):"next"===H.getDataAttribute(this,"slide")?(i.next(),void i._maybeEnableCycle()):(i.prev(),void i._maybeEnableCycle())})),P.on(window,"load.bs.carousel.data-api",(()=>{const t=z.find('[data-bs-ride="carousel"]');for(const e of t)rt.getOrCreateInstance(e)})),m(rt);const at="show",lt="collapse",ct="collapsing",ht='[data-bs-toggle="collapse"]',dt={parent:null,toggle:!0},ut={parent:"(null|element)",toggle:"boolean"};class ft extends W{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const i=z.find(ht);for(const t of i){const e=z.getSelectorFromElement(t),i=z.find(e).filter((t=>t===this._element));null!==e&&i.length&&this._triggerArray.push(t)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return dt}static get DefaultType(){return ut}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((t=>t!==this._element)).map((t=>ft.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;if(P.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const e of t)e.hide();const e=this._getDimension();this._element.classList.remove(lt),this._element.classList.add(ct),this._element.style[e]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=`scroll${e[0].toUpperCase()+e.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ct),this._element.classList.add(lt,at),this._element.style[e]="",P.trigger(this._element,"shown.bs.collapse")}),this._element,!0),this._element.style[e]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(P.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,d(this._element),this._element.classList.add(ct),this._element.classList.remove(lt,at);for(const t of this._triggerArray){const e=z.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ct),this._element.classList.add(lt),P.trigger(this._element,"hidden.bs.collapse")}),this._element,!0)}_isShown(t=this._element){return t.classList.contains(at)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=r(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(ht);for(const e of t){const t=z.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=z.find(":scope .collapse .collapse",this._config.parent);return z.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const i of t)i.classList.toggle("collapsed",!e),i.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const i=ft.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===i[t])throw new TypeError(`No method named "${t}"`);i[t]()}}))}}P.on(document,"click.bs.collapse.data-api",ht,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();for(const t of z.getMultipleElementsFromSelector(this))ft.getOrCreateInstance(t,{toggle:!1}).toggle()})),m(ft);var pt="top",mt="bottom",gt="right",_t="left",bt="auto",vt=[pt,mt,gt,_t],yt="start",wt="end",At="clippingParents",Et="viewport",Tt="popper",Ct="reference",Ot=vt.reduce((function(t,e){return t.concat([e+"-"+yt,e+"-"+wt])}),[]),xt=[].concat(vt,[bt]).reduce((function(t,e){return t.concat([e,e+"-"+yt,e+"-"+wt])}),[]),kt="beforeRead",Lt="read",St="afterRead",Dt="beforeMain",It="main",Nt="afterMain",Pt="beforeWrite",Mt="write",jt="afterWrite",Ft=[kt,Lt,St,Dt,It,Nt,Pt,Mt,jt];function Ht(t){return t?(t.nodeName||"").toLowerCase():null}function $t(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Wt(t){return t instanceof $t(t).Element||t instanceof Element}function Bt(t){return t instanceof $t(t).HTMLElement||t instanceof HTMLElement}function zt(t){return"undefined"!=typeof ShadowRoot&&(t instanceof $t(t).ShadowRoot||t instanceof ShadowRoot)}const Rt={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},s=e.elements[t];Bt(s)&&Ht(s)&&(Object.assign(s.style,i),Object.keys(n).forEach((function(t){var e=n[t];!1===e?s.removeAttribute(t):s.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach((function(t){var n=e.elements[t],s=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:i[t]).reduce((function(t,e){return t[e]="",t}),{});Bt(n)&&Ht(n)&&(Object.assign(n.style,o),Object.keys(s).forEach((function(t){n.removeAttribute(t)})))}))}},requires:["computeStyles"]};function qt(t){return t.split("-")[0]}var Vt=Math.max,Kt=Math.min,Qt=Math.round;function Xt(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function Yt(){return!/^((?!chrome|android).)*safari/i.test(Xt())}function Ut(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var n=t.getBoundingClientRect(),s=1,o=1;e&&Bt(t)&&(s=t.offsetWidth>0&&Qt(n.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Qt(n.height)/t.offsetHeight||1);var r=(Wt(t)?$t(t):window).visualViewport,a=!Yt()&&i,l=(n.left+(a&&r?r.offsetLeft:0))/s,c=(n.top+(a&&r?r.offsetTop:0))/o,h=n.width/s,d=n.height/o;return{width:h,height:d,top:c,right:l+h,bottom:c+d,left:l,x:l,y:c}}function Gt(t){var e=Ut(t),i=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:n}}function Jt(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&zt(i)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Zt(t){return $t(t).getComputedStyle(t)}function te(t){return["table","td","th"].indexOf(Ht(t))>=0}function ee(t){return((Wt(t)?t.ownerDocument:t.document)||window.document).documentElement}function ie(t){return"html"===Ht(t)?t:t.assignedSlot||t.parentNode||(zt(t)?t.host:null)||ee(t)}function ne(t){return Bt(t)&&"fixed"!==Zt(t).position?t.offsetParent:null}function se(t){for(var e=$t(t),i=ne(t);i&&te(i)&&"static"===Zt(i).position;)i=ne(i);return i&&("html"===Ht(i)||"body"===Ht(i)&&"static"===Zt(i).position)?e:i||function(t){var e=/firefox/i.test(Xt());if(/Trident/i.test(Xt())&&Bt(t)&&"fixed"===Zt(t).position)return null;var i=ie(t);for(zt(i)&&(i=i.host);Bt(i)&&["html","body"].indexOf(Ht(i))<0;){var n=Zt(i);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||e&&"filter"===n.willChange||e&&n.filter&&"none"!==n.filter)return i;i=i.parentNode}return null}(t)||e}function oe(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function re(t,e,i){return Vt(t,Kt(e,i))}function ae(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function le(t,e){return e.reduce((function(e,i){return e[i]=t,e}),{})}const ce={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,i=t.state,n=t.name,s=t.options,o=i.elements.arrow,r=i.modifiersData.popperOffsets,a=qt(i.placement),l=oe(a),c=[_t,gt].indexOf(a)>=0?"height":"width";if(o&&r){var h=function(t,e){return ae("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:le(t,vt))}(s.padding,i),d=Gt(o),u="y"===l?pt:_t,f="y"===l?mt:gt,p=i.rects.reference[c]+i.rects.reference[l]-r[l]-i.rects.popper[c],m=r[l]-i.rects.reference[l],g=se(o),_=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,b=p/2-m/2,v=h[u],y=_-d[c]-h[f],w=_/2-d[c]/2+b,A=re(v,w,y),E=l;i.modifiersData[n]=((e={})[E]=A,e.centerOffset=A-w,e)}},effect:function(t){var e=t.state,i=t.options.element,n=void 0===i?"[data-popper-arrow]":i;null!=n&&("string"!=typeof n||(n=e.elements.popper.querySelector(n)))&&Jt(e.elements.popper,n)&&(e.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function he(t){return t.split("-")[1]}var de={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ue(t){var e,i=t.popper,n=t.popperRect,s=t.placement,o=t.variation,r=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,h=t.roundOffsets,d=t.isFixed,u=r.x,f=void 0===u?0:u,p=r.y,m=void 0===p?0:p,g="function"==typeof h?h({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var _=r.hasOwnProperty("x"),b=r.hasOwnProperty("y"),v=_t,y=pt,w=window;if(c){var A=se(i),E="clientHeight",T="clientWidth";A===$t(i)&&"static"!==Zt(A=ee(i)).position&&"absolute"===a&&(E="scrollHeight",T="scrollWidth"),(s===pt||(s===_t||s===gt)&&o===wt)&&(y=mt,m-=(d&&A===w&&w.visualViewport?w.visualViewport.height:A[E])-n.height,m*=l?1:-1),s!==_t&&(s!==pt&&s!==mt||o!==wt)||(v=gt,f-=(d&&A===w&&w.visualViewport?w.visualViewport.width:A[T])-n.width,f*=l?1:-1)}var C,O=Object.assign({position:a},c&&de),x=!0===h?function(t,e){var i=t.x,n=t.y,s=e.devicePixelRatio||1;return{x:Qt(i*s)/s||0,y:Qt(n*s)/s||0}}({x:f,y:m},$t(i)):{x:f,y:m};return f=x.x,m=x.y,l?Object.assign({},O,((C={})[y]=b?"0":"",C[v]=_?"0":"",C.transform=(w.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",C)):Object.assign({},O,((e={})[y]=b?m+"px":"",e[v]=_?f+"px":"",e.transform="",e))}const fe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,i=t.options,n=i.gpuAcceleration,s=void 0===n||n,o=i.adaptive,r=void 0===o||o,a=i.roundOffsets,l=void 0===a||a,c={placement:qt(e.placement),variation:he(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,ue(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:r,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,ue(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var pe={passive:!0};const me={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,i=t.instance,n=t.options,s=n.scroll,o=void 0===s||s,r=n.resize,a=void 0===r||r,l=$t(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach((function(t){t.addEventListener("scroll",i.update,pe)})),a&&l.addEventListener("resize",i.update,pe),function(){o&&c.forEach((function(t){t.removeEventListener("scroll",i.update,pe)})),a&&l.removeEventListener("resize",i.update,pe)}},data:{}};var ge={left:"right",right:"left",bottom:"top",top:"bottom"};function _e(t){return t.replace(/left|right|bottom|top/g,(function(t){return ge[t]}))}var be={start:"end",end:"start"};function ve(t){return t.replace(/start|end/g,(function(t){return be[t]}))}function ye(t){var e=$t(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function we(t){return Ut(ee(t)).left+ye(t).scrollLeft}function Ae(t){var e=Zt(t),i=e.overflow,n=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+n)}function Ee(t){return["html","body","#document"].indexOf(Ht(t))>=0?t.ownerDocument.body:Bt(t)&&Ae(t)?t:Ee(ie(t))}function Te(t,e){var i;void 0===e&&(e=[]);var n=Ee(t),s=n===(null==(i=t.ownerDocument)?void 0:i.body),o=$t(n),r=s?[o].concat(o.visualViewport||[],Ae(n)?n:[]):n,a=e.concat(r);return s?a:a.concat(Te(ie(r)))}function Ce(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Oe(t,e,i){return e===Et?Ce(function(t,e){var i=$t(t),n=ee(t),s=i.visualViewport,o=n.clientWidth,r=n.clientHeight,a=0,l=0;if(s){o=s.width,r=s.height;var c=Yt();(c||!c&&"fixed"===e)&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:r,x:a+we(t),y:l}}(t,i)):Wt(e)?function(t,e){var i=Ut(t,!1,"fixed"===e);return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}(e,i):Ce(function(t){var e,i=ee(t),n=ye(t),s=null==(e=t.ownerDocument)?void 0:e.body,o=Vt(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),r=Vt(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-n.scrollLeft+we(t),l=-n.scrollTop;return"rtl"===Zt(s||i).direction&&(a+=Vt(i.clientWidth,s?s.clientWidth:0)-o),{width:o,height:r,x:a,y:l}}(ee(t)))}function xe(t){var e,i=t.reference,n=t.element,s=t.placement,o=s?qt(s):null,r=s?he(s):null,a=i.x+i.width/2-n.width/2,l=i.y+i.height/2-n.height/2;switch(o){case pt:e={x:a,y:i.y-n.height};break;case mt:e={x:a,y:i.y+i.height};break;case gt:e={x:i.x+i.width,y:l};break;case _t:e={x:i.x-n.width,y:l};break;default:e={x:i.x,y:i.y}}var c=o?oe(o):null;if(null!=c){var h="y"===c?"height":"width";switch(r){case yt:e[c]=e[c]-(i[h]/2-n[h]/2);break;case wt:e[c]=e[c]+(i[h]/2-n[h]/2)}}return e}function ke(t,e){void 0===e&&(e={});var i=e,n=i.placement,s=void 0===n?t.placement:n,o=i.strategy,r=void 0===o?t.strategy:o,a=i.boundary,l=void 0===a?At:a,c=i.rootBoundary,h=void 0===c?Et:c,d=i.elementContext,u=void 0===d?Tt:d,f=i.altBoundary,p=void 0!==f&&f,m=i.padding,g=void 0===m?0:m,_=ae("number"!=typeof g?g:le(g,vt)),b=u===Tt?Ct:Tt,v=t.rects.popper,y=t.elements[p?b:u],w=function(t,e,i,n){var s="clippingParents"===e?function(t){var e=Te(ie(t)),i=["absolute","fixed"].indexOf(Zt(t).position)>=0&&Bt(t)?se(t):t;return Wt(i)?e.filter((function(t){return Wt(t)&&Jt(t,i)&&"body"!==Ht(t)})):[]}(t):[].concat(e),o=[].concat(s,[i]),r=o[0],a=o.reduce((function(e,i){var s=Oe(t,i,n);return e.top=Vt(s.top,e.top),e.right=Kt(s.right,e.right),e.bottom=Kt(s.bottom,e.bottom),e.left=Vt(s.left,e.left),e}),Oe(t,r,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(Wt(y)?y:y.contextElement||ee(t.elements.popper),l,h,r),A=Ut(t.elements.reference),E=xe({reference:A,element:v,strategy:"absolute",placement:s}),T=Ce(Object.assign({},v,E)),C=u===Tt?T:A,O={top:w.top-C.top+_.top,bottom:C.bottom-w.bottom+_.bottom,left:w.left-C.left+_.left,right:C.right-w.right+_.right},x=t.modifiersData.offset;if(u===Tt&&x){var k=x[s];Object.keys(O).forEach((function(t){var e=[gt,mt].indexOf(t)>=0?1:-1,i=[pt,mt].indexOf(t)>=0?"y":"x";O[t]+=k[i]*e}))}return O}function Le(t,e){void 0===e&&(e={});var i=e,n=i.placement,s=i.boundary,o=i.rootBoundary,r=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,c=void 0===l?xt:l,h=he(n),d=h?a?Ot:Ot.filter((function(t){return he(t)===h})):vt,u=d.filter((function(t){return c.indexOf(t)>=0}));0===u.length&&(u=d);var f=u.reduce((function(e,i){return e[i]=ke(t,{placement:i,boundary:s,rootBoundary:o,padding:r})[qt(i)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}const Se={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var s=i.mainAxis,o=void 0===s||s,r=i.altAxis,a=void 0===r||r,l=i.fallbackPlacements,c=i.padding,h=i.boundary,d=i.rootBoundary,u=i.altBoundary,f=i.flipVariations,p=void 0===f||f,m=i.allowedAutoPlacements,g=e.options.placement,_=qt(g),b=l||(_!==g&&p?function(t){if(qt(t)===bt)return[];var e=_e(t);return[ve(t),e,ve(e)]}(g):[_e(g)]),v=[g].concat(b).reduce((function(t,i){return t.concat(qt(i)===bt?Le(e,{placement:i,boundary:h,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):i)}),[]),y=e.rects.reference,w=e.rects.popper,A=new Map,E=!0,T=v[0],C=0;C<v.length;C++){var O=v[C],x=qt(O),k=he(O)===yt,L=[pt,mt].indexOf(x)>=0,S=L?"width":"height",D=ke(e,{placement:O,boundary:h,rootBoundary:d,altBoundary:u,padding:c}),I=L?k?gt:_t:k?mt:pt;y[S]>w[S]&&(I=_e(I));var N=_e(I),P=[];if(o&&P.push(D[x]<=0),a&&P.push(D[I]<=0,D[N]<=0),P.every((function(t){return t}))){T=O,E=!1;break}A.set(O,P)}if(E)for(var M=function(t){var e=v.find((function(e){var i=A.get(e);if(i)return i.slice(0,t).every((function(t){return t}))}));if(e)return T=e,"break"},j=p?3:1;j>0&&"break"!==M(j);j--);e.placement!==T&&(e.modifiersData[n]._skip=!0,e.placement=T,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function De(t,e,i){return void 0===i&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function Ie(t){return[pt,gt,mt,_t].some((function(e){return t[e]>=0}))}const Ne={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,i=t.name,n=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,r=ke(e,{elementContext:"reference"}),a=ke(e,{altBoundary:!0}),l=De(r,n),c=De(a,s,o),h=Ie(l),d=Ie(c);e.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":d})}},Pe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,i=t.options,n=t.name,s=i.offset,o=void 0===s?[0,0]:s,r=xt.reduce((function(t,i){return t[i]=function(t,e,i){var n=qt(t),s=[_t,pt].indexOf(n)>=0?-1:1,o="function"==typeof i?i(Object.assign({},e,{placement:t})):i,r=o[0],a=o[1];return r=r||0,a=(a||0)*s,[_t,gt].indexOf(n)>=0?{x:a,y:r}:{x:r,y:a}}(i,e.rects,o),t}),{}),a=r[e.placement],l=a.x,c=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[n]=r}},Me={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,i=t.name;e.modifiersData[i]=xe({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},je={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,n=t.name,s=i.mainAxis,o=void 0===s||s,r=i.altAxis,a=void 0!==r&&r,l=i.boundary,c=i.rootBoundary,h=i.altBoundary,d=i.padding,u=i.tether,f=void 0===u||u,p=i.tetherOffset,m=void 0===p?0:p,g=ke(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:h}),_=qt(e.placement),b=he(e.placement),v=!b,y=oe(_),w="x"===y?"y":"x",A=e.modifiersData.popperOffsets,E=e.rects.reference,T=e.rects.popper,C="function"==typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,O="number"==typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),x=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,k={x:0,y:0};if(A){if(o){var L,S="y"===y?pt:_t,D="y"===y?mt:gt,I="y"===y?"height":"width",N=A[y],P=N+g[S],M=N-g[D],j=f?-T[I]/2:0,F=b===yt?E[I]:T[I],H=b===yt?-T[I]:-E[I],$=e.elements.arrow,W=f&&$?Gt($):{width:0,height:0},B=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},z=B[S],R=B[D],q=re(0,E[I],W[I]),V=v?E[I]/2-j-q-z-O.mainAxis:F-q-z-O.mainAxis,K=v?-E[I]/2+j+q+R+O.mainAxis:H+q+R+O.mainAxis,Q=e.elements.arrow&&se(e.elements.arrow),X=Q?"y"===y?Q.clientTop||0:Q.clientLeft||0:0,Y=null!=(L=null==x?void 0:x[y])?L:0,U=N+K-Y,G=re(f?Kt(P,N+V-Y-X):P,N,f?Vt(M,U):M);A[y]=G,k[y]=G-N}if(a){var J,Z="x"===y?pt:_t,tt="x"===y?mt:gt,et=A[w],it="y"===w?"height":"width",nt=et+g[Z],st=et-g[tt],ot=-1!==[pt,_t].indexOf(_),rt=null!=(J=null==x?void 0:x[w])?J:0,at=ot?nt:et-E[it]-T[it]-rt+O.altAxis,lt=ot?et+E[it]+T[it]-rt-O.altAxis:st,ct=f&&ot?function(t,e,i){var n=re(t,e,i);return n>i?i:n}(at,et,lt):re(f?at:nt,et,f?lt:st);A[w]=ct,k[w]=ct-et}e.modifiersData[n]=k}},requiresIfExists:["offset"]};function Fe(t,e,i){void 0===i&&(i=!1);var n,s,o=Bt(e),r=Bt(e)&&function(t){var e=t.getBoundingClientRect(),i=Qt(e.width)/t.offsetWidth||1,n=Qt(e.height)/t.offsetHeight||1;return 1!==i||1!==n}(e),a=ee(e),l=Ut(t,r,i),c={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(o||!o&&!i)&&(("body"!==Ht(e)||Ae(a))&&(c=(n=e)!==$t(n)&&Bt(n)?{scrollLeft:(s=n).scrollLeft,scrollTop:s.scrollTop}:ye(n)),Bt(e)?((h=Ut(e,!0)).x+=e.clientLeft,h.y+=e.clientTop):a&&(h.x=we(a))),{x:l.left+c.scrollLeft-h.x,y:l.top+c.scrollTop-h.y,width:l.width,height:l.height}}function He(t){var e=new Map,i=new Set,n=[];function s(t){i.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!i.has(t)){var n=e.get(t);n&&s(n)}})),n.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){i.has(t.name)||s(t)})),n}var $e={placement:"bottom",modifiers:[],strategy:"absolute"};function We(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function Be(t){void 0===t&&(t={});var e=t,i=e.defaultModifiers,n=void 0===i?[]:i,s=e.defaultOptions,o=void 0===s?$e:s;return function(t,e,i){void 0===i&&(i=o);var s,r,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},$e,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},l=[],c=!1,h={state:a,setOptions:function(i){var s="function"==typeof i?i(a.options):i;d(),a.options=Object.assign({},o,a.options,s),a.scrollParents={reference:Wt(t)?Te(t):t.contextElement?Te(t.contextElement):[],popper:Te(e)};var r,c,u=function(t){var e=He(t);return Ft.reduce((function(t,i){return t.concat(e.filter((function(t){return t.phase===i})))}),[])}((r=[].concat(n,a.options.modifiers),c=r.reduce((function(t,e){var i=t[e.name];return t[e.name]=i?Object.assign({},i,e,{options:Object.assign({},i.options,e.options),data:Object.assign({},i.data,e.data)}):e,t}),{}),Object.keys(c).map((function(t){return c[t]}))));return a.orderedModifiers=u.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,i=t.options,n=void 0===i?{}:i,s=t.effect;if("function"==typeof s){var o=s({state:a,name:e,instance:h,options:n});l.push(o||function(){})}})),h.update()},forceUpdate:function(){if(!c){var t=a.elements,e=t.reference,i=t.popper;if(We(e,i)){a.rects={reference:Fe(e,se(i),"fixed"===a.options.strategy),popper:Gt(i)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var n=0;n<a.orderedModifiers.length;n++)if(!0!==a.reset){var s=a.orderedModifiers[n],o=s.fn,r=s.options,l=void 0===r?{}:r,d=s.name;"function"==typeof o&&(a=o({state:a,options:l,name:d,instance:h})||a)}else a.reset=!1,n=-1}}},update:(s=function(){return new Promise((function(t){h.forceUpdate(),t(a)}))},function(){return r||(r=new Promise((function(t){Promise.resolve().then((function(){r=void 0,t(s())}))}))),r}),destroy:function(){d(),c=!0}};if(!We(t,e))return h;function d(){l.forEach((function(t){return t()})),l=[]}return h.setOptions(i).then((function(t){!c&&i.onFirstUpdate&&i.onFirstUpdate(t)})),h}}var ze=Be(),Re=Be({defaultModifiers:[me,Me,fe,Rt]}),qe=Be({defaultModifiers:[me,Me,fe,Rt,Pe,Se,je,ce,Ne]});const Ve=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Nt,afterRead:St,afterWrite:jt,applyStyles:Rt,arrow:ce,auto:bt,basePlacements:vt,beforeMain:Dt,beforeRead:kt,beforeWrite:Pt,bottom:mt,clippingParents:At,computeStyles:fe,createPopper:qe,createPopperBase:ze,createPopperLite:Re,detectOverflow:ke,end:wt,eventListeners:me,flip:Se,hide:Ne,left:_t,main:It,modifierPhases:Ft,offset:Pe,placements:xt,popper:Tt,popperGenerator:Be,popperOffsets:Me,preventOverflow:je,read:Lt,reference:Ct,right:gt,start:yt,top:pt,variationPlacements:Ot,viewport:Et,write:Mt},Symbol.toStringTag,{value:"Module"})),Ke="dropdown",Qe="ArrowUp",Xe="ArrowDown",Ye="click.bs.dropdown.data-api",Ue="keydown.bs.dropdown.data-api",Ge="show",Je='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ze=`${Je}.show`,ti=".dropdown-menu",ei=p()?"top-end":"top-start",ii=p()?"top-start":"top-end",ni=p()?"bottom-end":"bottom-start",si=p()?"bottom-start":"bottom-end",oi=p()?"left-start":"right-start",ri=p()?"right-start":"left-start",ai={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},li={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ci extends W{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=z.next(this._element,ti)[0]||z.prev(this._element,ti)[0]||z.findOne(ti,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return ai}static get DefaultType(){return li}static get NAME(){return Ke}toggle(){return this._isShown()?this.hide():this.show()}show(){if(l(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!P.trigger(this._element,"show.bs.dropdown",t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const t of[].concat(...document.body.children))P.on(t,"mouseover",h);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ge),this._element.classList.add(Ge),P.trigger(this._element,"shown.bs.dropdown",t)}}hide(){if(l(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!P.trigger(this._element,"hide.bs.dropdown",t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))P.off(t,"mouseover",h);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ge),this._element.classList.remove(Ge),this._element.setAttribute("aria-expanded","false"),H.removeDataAttribute(this._menu,"popper"),P.trigger(this._element,"hidden.bs.dropdown",t)}}_getConfig(t){if("object"==typeof(t=super._getConfig(t)).reference&&!o(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${Ke.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(void 0===Ve)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=this._parent:o(this._config.reference)?t=r(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=qe(t,this._menu,e)}_isShown(){return this._menu.classList.contains(Ge)}_getPlacement(){const t=this._parent;if(t.classList.contains("dropend"))return oi;if(t.classList.contains("dropstart"))return ri;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?ii:ei:e?si:ni}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(H.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...g(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const i=z.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((t=>a(t)));i.length&&b(i,e,t===Xe,!i.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=ci.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(2===t.button||"keyup"===t.type&&"Tab"!==t.key)return;const e=z.find(Ze);for(const i of e){const e=ci.getInstance(i);if(!e||!1===e._config.autoClose)continue;const n=t.composedPath(),s=n.includes(e._menu);if(n.includes(e._element)||"inside"===e._config.autoClose&&!s||"outside"===e._config.autoClose&&s)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const o={relatedTarget:e._element};"click"===t.type&&(o.clickEvent=t),e._completeHide(o)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),i="Escape"===t.key,n=[Qe,Xe].includes(t.key);if(!n&&!i)return;if(e&&!i)return;t.preventDefault();const s=this.matches(Je)?this:z.prev(this,Je)[0]||z.next(this,Je)[0]||z.findOne(Je,t.delegateTarget.parentNode),o=ci.getOrCreateInstance(s);if(n)return t.stopPropagation(),o.show(),void o._selectMenuItem(t);o._isShown()&&(t.stopPropagation(),o.hide(),s.focus())}}P.on(document,Ue,Je,ci.dataApiKeydownHandler),P.on(document,Ue,ti,ci.dataApiKeydownHandler),P.on(document,Ye,ci.clearMenus),P.on(document,"keyup.bs.dropdown.data-api",ci.clearMenus),P.on(document,Ye,Je,(function(t){t.preventDefault(),ci.getOrCreateInstance(this).toggle()})),m(ci);const hi="show",di="mousedown.bs.backdrop",ui={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},fi={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class pi extends ${constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return ui}static get DefaultType(){return fi}static get NAME(){return"backdrop"}show(t){if(!this._config.isVisible)return void g(t);this._append();const e=this._getElement();this._config.isAnimated&&d(e),e.classList.add(hi),this._emulateAnimation((()=>{g(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(hi),this._emulateAnimation((()=>{this.dispose(),g(t)}))):g(t)}dispose(){this._isAppended&&(P.off(this._element,di),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=r(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),P.on(t,di,(()=>{g(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){_(t,this._getElement(),this._config.isAnimated)}}const mi=".bs.focustrap",gi="backward",_i={autofocus:!0,trapElement:null},bi={autofocus:"boolean",trapElement:"element"};class vi extends ${constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return _i}static get DefaultType(){return bi}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),P.off(document,mi),P.on(document,"focusin.bs.focustrap",(t=>this._handleFocusin(t))),P.on(document,"keydown.tab.bs.focustrap",(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,P.off(document,mi))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const i=z.focusableChildren(e);0===i.length?e.focus():this._lastTabNavDirection===gi?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?gi:"forward")}}const yi=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",wi=".sticky-top",Ai="padding-right",Ei="margin-right";class Ti{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ai,(e=>e+t)),this._setElementAttributes(yi,Ai,(e=>e+t)),this._setElementAttributes(wi,Ei,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ai),this._resetElementAttributes(yi,Ai),this._resetElementAttributes(wi,Ei)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,i){const n=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+n)return;this._saveInitialAttribute(t,e);const s=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${i(Number.parseFloat(s))}px`)}))}_saveInitialAttribute(t,e){const i=t.style.getPropertyValue(e);i&&H.setDataAttribute(t,e,i)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const i=H.getDataAttribute(t,e);null!==i?(H.removeDataAttribute(t,e),t.style.setProperty(e,i)):t.style.removeProperty(e)}))}_applyManipulationCallback(t,e){if(o(t))e(t);else for(const i of z.find(t,this._element))e(i)}}const Ci=".bs.modal",Oi="hidden.bs.modal",xi="show.bs.modal",ki="modal-open",Li="show",Si="modal-static",Di={backdrop:!0,focus:!0,keyboard:!0},Ii={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ni extends W{constructor(t,e){super(t,e),this._dialog=z.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ti,this._addEventListeners()}static get Default(){return Di}static get DefaultType(){return Ii}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||P.trigger(this._element,xi,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ki),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){this._isShown&&!this._isTransitioning&&(P.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Li),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){P.off(window,Ci),P.off(this._dialog,Ci),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new pi({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new vi({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=z.findOne(".modal-body",this._dialog);e&&(e.scrollTop=0),d(this._element),this._element.classList.add(Li),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,P.trigger(this._element,"shown.bs.modal",{relatedTarget:t})}),this._dialog,this._isAnimated())}_addEventListeners(){P.on(this._element,"keydown.dismiss.bs.modal",(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),P.on(window,"resize.bs.modal",(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),P.on(this._element,"mousedown.dismiss.bs.modal",(t=>{P.one(this._element,"click.dismiss.bs.modal",(e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(ki),this._resetAdjustments(),this._scrollBar.reset(),P.trigger(this._element,Oi)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(P.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._element.style.overflowY;"hidden"===e||this._element.classList.contains(Si)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(Si),this._queueCallback((()=>{this._element.classList.remove(Si),this._queueCallback((()=>{this._element.style.overflowY=e}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),i=e>0;if(i&&!t){const t=p()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!i&&t){const t=p()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const i=Ni.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===i[t])throw new TypeError(`No method named "${t}"`);i[t](e)}}))}}P.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',(function(t){const e=z.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),P.one(e,xi,(t=>{t.defaultPrevented||P.one(e,Oi,(()=>{a(this)&&this.focus()}))}));const i=z.findOne(".modal.show");i&&Ni.getInstance(i).hide(),Ni.getOrCreateInstance(e).toggle(this)})),R(Ni),m(Ni);const Pi="show",Mi="showing",ji="hiding",Fi=".offcanvas.show",Hi="hidePrevented.bs.offcanvas",$i="hidden.bs.offcanvas",Wi={backdrop:!0,keyboard:!0,scroll:!1},Bi={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class zi extends W{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Wi}static get DefaultType(){return Bi}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||P.trigger(this._element,"show.bs.offcanvas",{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Ti).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Mi),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Pi),this._element.classList.remove(Mi),P.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:t})}),this._element,!0))}hide(){this._isShown&&(P.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(ji),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(Pi,ji),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Ti).reset(),P.trigger(this._element,$i)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=Boolean(this._config.backdrop);return new pi({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{"static"!==this._config.backdrop?this.hide():P.trigger(this._element,Hi)}:null})}_initializeFocusTrap(){return new vi({trapElement:this._element})}_addEventListeners(){P.on(this._element,"keydown.dismiss.bs.offcanvas",(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():P.trigger(this._element,Hi))}))}static jQueryInterface(t){return this.each((function(){const e=zi.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}P.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',(function(t){const e=z.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),l(this))return;P.one(e,$i,(()=>{a(this)&&this.focus()}));const i=z.findOne(Fi);i&&i!==e&&zi.getInstance(i).hide(),zi.getOrCreateInstance(e).toggle(this)})),P.on(window,"load.bs.offcanvas.data-api",(()=>{for(const t of z.find(Fi))zi.getOrCreateInstance(t).show()})),P.on(window,"resize.bs.offcanvas",(()=>{for(const t of z.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&zi.getOrCreateInstance(t).hide()})),R(zi),m(zi);const Ri={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},qi=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Vi=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Ki=(t,e)=>{const i=t.nodeName.toLowerCase();return e.includes(i)?!qi.has(i)||Boolean(Vi.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(i)))},Qi={allowList:Ri,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Xi={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Yi={entry:"(string|element|function|null)",selector:"(string|element)"};class Ui extends ${constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Qi}static get DefaultType(){return Xi}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[e,i]of Object.entries(this._config.content))this._setContent(t,i,e);const e=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&e.classList.add(...i.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,i]of Object.entries(t))super._typeCheckConfig({selector:e,entry:i},Yi)}_setContent(t,e,i){const n=z.findOne(i,t);n&&((e=this._resolvePossibleFunction(e))?o(e)?this._putElementInTemplate(r(e),n):this._config.html?n.innerHTML=this._maybeSanitize(e):n.textContent=e:n.remove())}_maybeSanitize(t){return this._config.sanitize?function(t,e,i){if(!t.length)return t;if(i&&"function"==typeof i)return i(t);const n=(new window.DOMParser).parseFromString(t,"text/html"),s=[].concat(...n.body.querySelectorAll("*"));for(const t of s){const i=t.nodeName.toLowerCase();if(!Object.keys(e).includes(i)){t.remove();continue}const n=[].concat(...t.attributes),s=[].concat(e["*"]||[],e[i]||[]);for(const e of n)Ki(e,s)||t.removeAttribute(e.nodeName)}return n.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return g(t,[this])}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const Gi=new Set(["sanitize","allowList","sanitizeFn"]),Ji="fade",Zi="show",tn=".modal",en="hide.bs.modal",nn="hover",sn="focus",on={AUTO:"auto",TOP:"top",RIGHT:p()?"left":"right",BOTTOM:"bottom",LEFT:p()?"right":"left"},rn={allowList:Ri,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},an={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ln extends W{constructor(t,e){if(void 0===Ve)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return rn}static get DefaultType(){return an}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),P.off(this._element.closest(tn),en,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=P.trigger(this._element,this.constructor.eventName("show")),e=(c(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!e)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:n}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(n.append(i),P.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(i),i.classList.add(Zi),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))P.on(t,"mouseover",h);this._queueCallback((()=>{P.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!P.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Zi),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))P.off(t,"mouseover",h);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),P.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(Ji,Zi),e.classList.add(`bs-${this.constructor.NAME}-auto`);const i=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME).toString();return e.setAttribute("id",i),this._isAnimated()&&e.classList.add(Ji),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Ui({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Ji)}_isShown(){return this.tip&&this.tip.classList.contains(Zi)}_createPopper(t){const e=g(this._config.placement,[this,t,this._element]),i=on[e.toUpperCase()];return qe(this._element,t,this._getPopperConfig(i))}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return g(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,...g(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)P.on(this._element,this.constructor.eventName("click"),this._config.selector,(t=>{this._initializeOnDelegatedTarget(t).toggle()}));else if("manual"!==e){const t=e===nn?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),i=e===nn?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");P.on(this._element,t,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?sn:nn]=!0,e._enter()})),P.on(this._element,i,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?sn:nn]=e._element.contains(t.relatedTarget),e._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},P.on(this._element.closest(tn),en,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=H.getDataAttributes(this._element);for(const t of Object.keys(e))Gi.has(t)&&delete e[t];return t={...e,..."object"==typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:r(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,i]of Object.entries(this._config))this.constructor.Default[e]!==i&&(t[e]=i);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each((function(){const e=ln.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}m(ln);const cn={...ln.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},hn={...ln.DefaultType,content:"(null|string|element|function)"};class dn extends ln{static get Default(){return cn}static get DefaultType(){return hn}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each((function(){const e=dn.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}m(dn);const un="click.bs.scrollspy",fn="active",pn="[href]",mn={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},gn={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class _n extends W{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return mn}static get DefaultType(){return gn}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=r(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"==typeof t.threshold&&(t.threshold=t.threshold.split(",").map((t=>Number.parseFloat(t)))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(P.off(this._config.target,un),P.on(this._config.target,un,pn,(t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const i=this._rootElement||window,n=e.offsetTop-this._element.offsetTop;if(i.scrollTo)return void i.scrollTo({top:n,behavior:"smooth"});i.scrollTop=n}})))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((t=>this._observerCallback(t)),t)}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),i=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},n=(this._rootElement||document.documentElement).scrollTop,s=n>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=n;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const t=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&t){if(i(o),!n)return}else s||t||i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=z.find(pn,this._config.target);for(const e of t){if(!e.hash||l(e))continue;const t=z.findOne(decodeURI(e.hash),this._element);a(t)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(fn),this._activateParents(t),P.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))z.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(fn);else for(const e of z.parents(t,".nav, .list-group"))for(const t of z.prev(e,".nav-link, .nav-item > .nav-link, .list-group-item"))t.classList.add(fn)}_clearActiveClass(t){t.classList.remove(fn);const e=z.find("[href].active",t);for(const t of e)t.classList.remove(fn)}static jQueryInterface(t){return this.each((function(){const e=_n.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}P.on(window,"load.bs.scrollspy.data-api",(()=>{for(const t of z.find('[data-bs-spy="scroll"]'))_n.getOrCreateInstance(t)})),m(_n);const bn="ArrowLeft",vn="ArrowRight",yn="ArrowUp",wn="ArrowDown",An="active",En="fade",Tn="show",Cn='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',On=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${Cn}`;class xn extends W{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),P.on(this._element,"keydown.bs.tab",(t=>this._keydown(t))))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),i=e?P.trigger(e,"hide.bs.tab",{relatedTarget:t}):null;P.trigger(t,"show.bs.tab",{relatedTarget:e}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){t&&(t.classList.add(An),this._activate(z.getElementFromSelector(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),P.trigger(t,"shown.bs.tab",{relatedTarget:e})):t.classList.add(Tn)}),t,t.classList.contains(En)))}_deactivate(t,e){t&&(t.classList.remove(An),t.blur(),this._deactivate(z.getElementFromSelector(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),P.trigger(t,"hidden.bs.tab",{relatedTarget:e})):t.classList.remove(Tn)}),t,t.classList.contains(En)))}_keydown(t){if(![bn,vn,yn,wn].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=[vn,wn].includes(t.key),i=b(this._getChildren().filter((t=>!l(t))),t.target,e,!0);i&&(i.focus({preventScroll:!0}),xn.getOrCreateInstance(i).show())}_getChildren(){return z.find(On,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const t of e)this._setInitialAttributesOnChild(t)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),i=this._getOuterElement(t);t.setAttribute("aria-selected",e),i!==t&&this._setAttributeIfNotExists(i,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=z.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const i=this._getOuterElement(t);if(!i.classList.contains("dropdown"))return;const n=(t,n)=>{const s=z.findOne(t,i);s&&s.classList.toggle(n,e)};n(".dropdown-toggle",An),n(".dropdown-menu",Tn),i.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}_elemIsActive(t){return t.classList.contains(An)}_getInnerElement(t){return t.matches(On)?t:z.findOne(On,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each((function(){const e=xn.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}P.on(document,"click.bs.tab",Cn,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),l(this)||xn.getOrCreateInstance(this).show()})),P.on(window,"load.bs.tab",(()=>{for(const t of z.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))xn.getOrCreateInstance(t)})),m(xn);const kn="hide",Ln="show",Sn="showing",Dn={animation:"boolean",autohide:"boolean",delay:"number"},In={animation:!0,autohide:!0,delay:5e3};class Nn extends W{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return In}static get DefaultType(){return Dn}static get NAME(){return"toast"}show(){P.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(kn),d(this._element),this._element.classList.add(Ln,Sn),this._queueCallback((()=>{this._element.classList.remove(Sn),P.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this.isShown()&&(P.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(Sn),this._queueCallback((()=>{this._element.classList.add(kn),this._element.classList.remove(Sn,Ln),P.trigger(this._element,"hidden.bs.toast")}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ln),super.dispose()}isShown(){return this._element.classList.contains(Ln)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){P.on(this._element,"mouseover.bs.toast",(t=>this._onInteraction(t,!0))),P.on(this._element,"mouseout.bs.toast",(t=>this._onInteraction(t,!1))),P.on(this._element,"focusin.bs.toast",(t=>this._onInteraction(t,!0))),P.on(this._element,"focusout.bs.toast",(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=Nn.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}return R(Nn),m(Nn),{Alert:q,Button:K,Carousel:rt,Collapse:ft,Dropdown:ci,Modal:Ni,Offcanvas:zi,Popover:dn,ScrollSpy:_n,Tab:xn,Toast:Nn,Tooltip:ln}}));
//# sourceMappingURL=bootstrap.bundle.min.js.map

==================================================
FICHIER : static\js\script.js
==================================================
// =================================================================
// FONCTION GLOBALE POUR AFFICHER LA MODALE D'INFORMATION
// =================================================================
function showInfoModal(title, message) {
    const modal = document.getElementById('info-modal');
    if (modal) {
        const modalTitle = modal.querySelector('#info-modal-title span');
        const modalText = modal.querySelector('#info-modal-text');
        if (modalTitle && modalText) {
            modalTitle.textContent = title;
            modalText.textContent = message;
            modal.style.display = 'flex';
        }
    }
}

// =================================================================
// SYST√àME DE NOTIFICATIONS (TOASTS)
// =================================================================
function showToast(message, type = 'success') {
    const container = document.querySelector('.toast-container');
    if (!container) return;

    let icon = 'bi-check-circle-fill';
    let toastClass = 'text-bg-success'; // Vert par d√©faut

    if (type === 'error' || type === 'danger') {
        icon = 'bi-exclamation-triangle-fill';
        toastClass = 'text-bg-danger'; // Rouge
    } else if (type === 'info') {
        icon = 'bi-info-circle-fill';
        toastClass = 'text-bg-primary'; // Bleu
    } else if (type === 'warning') {
        icon = 'bi-exclamation-circle-fill';
        toastClass = 'text-bg-warning'; // Jaune/Orange
    }

    const html = `
        <div class="toast ${toastClass} align-items-center border-0 fade show" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body d-flex align-items-center gap-3" style="padding: 12px 16px;">
                    <i class="bi ${icon} fs-4"></i>
                    <div style="font-size: 1rem;">
                        ${message}
                    </div>
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    `;

    container.insertAdjacentHTML('beforeend', html);
    
    const toastElement = container.lastElementChild;
    
    // Auto-destruction
    setTimeout(() => {
        if (toastElement && document.body.contains(toastElement)) {
            toastElement.classList.remove('show');
            setTimeout(() => toastElement.remove(), 500);
        }
    }, 4500);
    
    // Clic croix
    const closeBtn = toastElement.querySelector('.btn-close');
    if(closeBtn) closeBtn.addEventListener('click', () => toastElement.remove());
}

// =================================================================
// POINT D'ENTR√âE UNIQUE
// =================================================================
document.addEventListener("DOMContentLoaded", function () {
    // --- SUPPRESSION ICI : updateCartIcon() a √©t√© retir√© ---
    
    const csrfToken = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');

    // =================================================================
	// SECTION 1 : LOGIQUE DE TRI ET PAGINATION DYNAMIQUE (AJAX)
	// =================================================================
	const dynamicContent = document.getElementById('dynamic-content');
	if (dynamicContent) {
		const searchInput = document.getElementById('search-input');
		const armoireFilter = document.getElementById('filtre-armoire');
		const categorieFilter = document.getElementById('filtre-categorie');
		const etatFilter = document.getElementById('filtre-etat');
		let searchTimeout;

		function fetchDynamicContent(page = 1, sortBy = null, direction = null) {
			const currentSortBy = sortBy || dynamicContent.dataset.sortBy || 'nom';
			const currentDirection = direction || dynamicContent.dataset.direction || 'asc';
			const params = new URLSearchParams({
				page: page,
				sort_by: currentSortBy,
				direction: currentDirection
			});

			if (searchInput && searchInput.value) {
				params.set('q', searchInput.value);
			}
			if (armoireFilter && armoireFilter.value) {
				params.set('armoire', armoireFilter.value);
			}
			if (categorieFilter && categorieFilter.value) {
				params.set('categorie', categorieFilter.value);
			}
			if (etatFilter && etatFilter.value) {
				params.set('etat', etatFilter.value);
			}

			const apiUrl = `/api/inventaire?${params.toString()}`;

			fetch(apiUrl)
			.then(response => response.json())
			.then(data => {
				dynamicContent.innerHTML = data.html;
				dynamicContent.dataset.sortBy = currentSortBy;
				dynamicContent.dataset.direction = currentDirection;
			})
			.catch(error => {
				console.error("Erreur lors de la mise √† jour du contenu:", error);
				dynamicContent.innerHTML = "<p>Erreur de chargement des donn√©es. Cette fonctionnalit√© est peut-√™tre en cours de migration.</p>";
			});
		}

		function debounceFetch() {
			clearTimeout(searchTimeout);
			searchTimeout = setTimeout(() => fetchDynamicContent(1), 300);
		}

		if (searchInput) searchInput.addEventListener('input', debounceFetch);
		if (armoireFilter) armoireFilter.addEventListener('change', () => fetchDynamicContent(1));
		if (categorieFilter) categorieFilter.addEventListener('change', () => fetchDynamicContent(1));
		if (etatFilter) etatFilter.addEventListener('change', () => fetchDynamicContent(1));
	}
	
	// =================================================================
    // SECTION 2 : GESTIONNAIRE D'√âV√âNEMENTS GLOBAL POUR TOUS LES CLICS
    // =================================================================
	document.body.addEventListener('click', function(e) {
		
        // --- Logique pour le contenu dynamique (Pagination & Tri) ---
        const dynamicContentContainer = e.target.closest('#dynamic-content');
        if (dynamicContentContainer) {
            const pageLink = e.target.closest('.page-link');
			if (pageLink) {
				e.preventDefault();
				const url = new URL(pageLink.href);
				const page = url.searchParams.get('page');
				if (page) fetchDynamicContent(page);
                return; // On arr√™te le traitement ici
			}
			
			const sortLink = e.target.closest('.sortable a');
			if (sortLink) {
				e.preventDefault();
				const url = new URL(sortLink.href);
				const sortBy = url.searchParams.get('sort_by');
				const direction = url.searchParams.get('direction');
				if (sortBy && direction) fetchDynamicContent(1, sortBy, direction);
                return; // On arr√™te le traitement ici
			}
        }

        // --- MODALE DE DANGER ---
        const openModalButton = e.target.closest('.btn-open-danger-modal, .delete-btn, .btn-delete-objet');
		if (openModalButton) {
			e.preventDefault();

            const dangerModalElement = document.getElementById('dangerModal');
            if (!dangerModalElement) return;
            
            const dangerModal = bootstrap.Modal.getOrCreateInstance(dangerModalElement);
			const modalText = dangerModalElement.querySelector('#dangerModalText');
			const modalForm = dangerModalElement.querySelector('#dangerModalForm');

            let message = "√ätes-vous s√ªr de vouloir effectuer cette action ?";
			let actionUrl = "#";

			if (openModalButton.matches('.btn-delete-objet')) {
				const form = openModalButton.closest('form');
				message = `√ätes-vous s√ªr de vouloir supprimer l'objet <strong>'${openModalButton.dataset.objetNom}'</strong> ?<br>Cette action est irr√©versible.`;
				actionUrl = form ? form.action : '#';
			} else if (openModalButton.matches('.delete-btn')) {
				const form = openModalButton.closest('.delete-form-interactive');
				const itemName = form.dataset.itemName || 'cet √©l√©ment';
				message = `√ätes-vous s√ªr de vouloir supprimer l'√©l√©ment "${itemName}" ? Cette action est d√©finitive.`;
				actionUrl = form ? form.action : '#';
			}
			
			if (modalText) modalText.innerHTML = message;
			if (modalForm) modalForm.action = actionUrl;
			
            dangerModal.show();
            return;
		}

		const editBtn = e.target.closest('.edit-btn');
		if (editBtn) {
			const card = editBtn.closest('.item-card');
			card.querySelector('.card-info').style.display = 'none';
			card.querySelector('.card-actions').style.display = 'none';
			card.querySelector('.edit-mode').style.display = 'flex';
			card.querySelector('.edit-input').focus();
		}

		const saveBtn = e.target.closest('.save-btn');
		if (saveBtn) {
			const card = saveBtn.closest('.item-card');
			const input = card.querySelector('.edit-input');
			const isArmoiresPage = window.location.pathname.includes('gestion_armoires');
			const fetchURL = isArmoiresPage ? '/admin/modifier_armoire' : '/admin/modifier_categorie';

			fetch(fetchURL, {
				method: 'POST',
				headers: { 'Content-Type': 'application/json', 'X-CSRFToken': csrfToken },
				body: JSON.stringify({ id: saveBtn.dataset.id, nom: input.value })
			})
			.then(response => response.json())
			.then(data => {
				if (data.success) {
					card.querySelector('.card-title').textContent = data.nouveau_nom;
					card.querySelector('.cancel-btn').click();
				} else {
					showInfoModal('Erreur', data.error);
				}
			});
		}

		const cancelBtn = e.target.closest('.cancel-btn');
		if (cancelBtn) {
			const card = cancelBtn.closest('.item-card');
			card.querySelector('.edit-mode').style.display = 'none';
			card.querySelector('.card-info').style.display = '';
			card.querySelector('.card-actions').style.display = '';
			card.querySelector('.edit-input').value = card.querySelector('.card-title').textContent.trim();
		}

		const closeBtn = e.target.closest('.modal-overlay .close-btn, .modal-overlay .btn-cancel');
		const overlay = e.target.closest('.modal-overlay');
		if (closeBtn || (overlay && e.target === overlay)) {
			const modalToClose = e.target.closest('.modal-overlay');
			if (modalToClose) modalToClose.style.display = 'none';
			return;
		}

		const trigger = e.target.closest('[data-modal-trigger]');
		if (trigger) {
			const modalId = trigger.dataset.modalTrigger;
			const modal = document.getElementById(modalId);
			if (!modal) return;
			
			if (trigger.dataset.modalTitle) {
				const modalTitle = modal.querySelector('#' + modalId + '-title span');
				if (modalTitle) modalTitle.textContent = trigger.dataset.modalTitle;
			}
			if (trigger.dataset.modalMessage) {
				const modalMessage = modal.querySelector('#' + modalId + '-message');
				if (modalMessage) modalMessage.textContent = trigger.dataset.modalMessage;
			}
			modal.style.display = 'flex';
			
			if (modalId === 'cloture-impossible-modal') {
				const anneeScolaire = trigger.dataset.anneeScolaire;
				const anneeFin = trigger.dataset.anneeFin;
				modal.querySelector('#cloture-impossible-annee').textContent = anneeScolaire;
				modal.querySelector('#cloture-impossible-date').textContent = `le 01/06/${anneeFin}`;
			}

			if (modalId === 'add-object-modal') {
				const addObjectModalElement = document.getElementById('addObjectModal'); // Correction ID
				if (!addObjectModalElement) return;
				
				const addObjectModalInstance = bootstrap.Modal.getOrCreateInstance(addObjectModalElement);
				const form = addObjectModalElement.querySelector('form');
				const modalTitle = addObjectModalElement.querySelector('.modal-title');
				const submitBtn = form.querySelector('button[type="submit"]');
				const imagePreviewContainer = addObjectModalElement.querySelector('#image-preview-container');
				const imagePreview = imagePreviewContainer?.querySelector('img');
				
				const objetId = trigger.dataset.objetId;
				
				if (objetId) {
					// --- MODE MODIFICATION ---
					modalTitle.textContent = "Modifier l'objet";
					form.action = `/modifier_objet/${objetId}`;
					
					// 1. R√©cup√©ration des donn√©es brutes
                    const rawImg = trigger.dataset.imageUrl || '';
                    const rawFds = trigger.dataset.fdsUrl || '';

                    // 2. Pr√©-remplissage des champs standards
                    const fields = {
                        'nom': trigger.dataset.nom,
                        'quantite': trigger.dataset.quantite,
                        'seuil': trigger.dataset.seuil,
                        'date_peremption': trigger.dataset.datePeremption,
                        'armoire_id': trigger.dataset.armoireId,
                        'categorie_id': trigger.dataset.categorieId
                    };
                    
                    for (const [fieldId, rawValue] of Object.entries(fields)) {
                        const input = form.querySelector(`#${fieldId}`);
                        if (input) {
                            let value = rawValue;
                            if (value === 'None' || value === null || value === undefined) value = '';
                            input.value = value;
                        }
                    }

                    // 3. GESTION INTELLIGENTE DES ONGLETS (IMAGE)
                    const tabImgFile = new bootstrap.Tab(document.querySelector('#pills-file-tab'));
                    const tabImgUrl = new bootstrap.Tab(document.querySelector('#pills-url-tab'));
                    const inputImgUrl = form.querySelector('#image_url');
                    const inputImgFile = form.querySelector('#image');

                    if (rawImg.startsWith('http')) {
                        tabImgUrl.show();
                        if (inputImgUrl) inputImgUrl.value = rawImg;
                        if (inputImgFile) inputImgFile.value = '';
                    } else {
                        tabImgFile.show();
                        if (inputImgUrl) inputImgUrl.value = '';
                    }

                    // 4. GESTION INTELLIGENTE DES ONGLETS (FDS)
                    const btnTabFdsFile = document.querySelector('button[data-bs-target="#nav-file-fds"]');
                    const btnTabFdsUrl = document.querySelector('button[data-bs-target="#nav-url-fds"]');
                    const inputFdsUrl = form.querySelector('#fds_url');
                    const inputFdsFile = form.querySelector('input[name="fds_file"]');

                    if (rawFds.startsWith('http')) {
                        if (btnTabFdsUrl) new bootstrap.Tab(btnTabFdsUrl).show();
                        if (inputFdsUrl) inputFdsUrl.value = rawFds;
                        if (inputFdsFile) inputFdsFile.value = '';
                    } else {
                        if (btnTabFdsFile) new bootstrap.Tab(btnTabFdsFile).show();
                        if (inputFdsUrl) inputFdsUrl.value = '';
                    }
					
					// 5. Aper√ßu Image
					if (rawImg && imagePreview && imagePreviewContainer) {
						if (rawImg.startsWith('http')) {
							imagePreview.src = rawImg;
						} else {
							imagePreview.src = `/static/${rawImg}`;
						}
						imagePreviewContainer.style.display = 'block';
					} else if (imagePreviewContainer) {
						imagePreviewContainer.style.display = 'none';
					}
					
					if (submitBtn) {
						submitBtn.textContent = 'Mettre √† jour';
						submitBtn.className = 'btn btn-primary';
					}
					
				} else {
					// --- MODE AJOUT ---
					modalTitle.textContent = "Ajouter un nouvel objet";
					form.action = document.body.dataset.addUrl || '/ajouter_objet';
					form.reset();
					if (imagePreviewContainer) imagePreviewContainer.style.display = 'none';
					if (submitBtn) {
						submitBtn.textContent = 'Enregistrer l\'objet';
						submitBtn.className = 'btn btn-success';
					}
				}
				
				addObjectModalInstance.show();
				setupPexelsSearch();
				return;
			}

			if (trigger.dataset.formUsername) {
				modal.querySelectorAll('#username, #username-placeholder, #username-to-match').forEach(el => {
					el.textContent = trigger.dataset.formUsername;
				});
			}
			if (modalId === 'edit-email-modal' && trigger.dataset.formEmail) {
				form.querySelector('#email').value = trigger.dataset.formEmail;
			}
			if (modalId === 'edit-fournisseur-modal') {
				const form = modal.querySelector('#edit-fournisseur-form');
				const id = trigger.dataset.id;
				
				form.action = `/admin/fournisseurs/modifier/${id}`;
				form.querySelector('#edit_nom').value = trigger.dataset.nom;
				form.querySelector('#edit_site_web').value = trigger.dataset.siteWeb;
				
                // Gestion Logo URL
                const logo = trigger.dataset.logo;
                const urlInput = document.getElementById('edit_logo_url_input');
                if (logo && logo.startsWith('http')) {
                    urlInput.value = logo;
                } else {
                    urlInput.value = '';
                }
			}
			if (modalId === 'delete-user-modal') {
				const username = trigger.dataset.formUsername;
				form.dataset.username = username;
				modal.querySelector('#username-to-match').textContent = username;
				modal.querySelector('#username-placeholder').textContent = username;
				modal.querySelector('#delete-confirm-input').value = '';
				modal.querySelector('#delete-error-message').textContent = '';
			}
			if (modalId === 'budget-modal') {
				form.querySelector('#annee').value = trigger.dataset.formAnnee || new Date().getFullYear();
				form.querySelector('#montant_initial').value = trigger.dataset.formMontantInitial || '0.00';
			}
			if (modalId === 'depense-modal') {
				const form = modal.querySelector('form');
				if (form) form.reset();
				const dateInput = modal.querySelector('#date_depense');
				if (dateInput) dateInput.value = new Date().toISOString().split('T')[0];
				const fournisseurSelect = modal.querySelector('#fournisseur_id');
				if (fournisseurSelect) fournisseurSelect.disabled = false;
			}
			if (modalId === 'edit-depense-modal') {
				const depenseId = trigger.dataset.depenseId;
				form.action = `/admin/budget/modifier_depense/${depenseId}`;
				form.querySelector('#edit_date_depense').value = trigger.dataset.formDateDepense;
				form.querySelector('#edit_fournisseur_id').value = trigger.dataset.formFournisseurId;
				form.querySelector('#edit_contenu').value = trigger.dataset.formContenu;
				form.querySelector('#edit_montant').value = trigger.dataset.formMontant;
				const estBonAchatCheckbox = form.querySelector('#edit_est_bon_achat');
				estBonAchatCheckbox.checked = trigger.dataset.formEstBonAchat == '1';
				estBonAchatCheckbox.dispatchEvent(new Event('change'));
			}
			if (modalId === 'echeance-modal') {
				const modalTitle = modal.querySelector('#echeance-modal-title');
				const submitBtn = modal.querySelector('#echeance-submit-btn');
				const traiteGroup = modal.querySelector('#traite-group');
				const echeanceId = trigger.dataset.echeanceId;
				if (echeanceId) {
					modalTitle.textContent = "Modifier une √©ch√©ance";
					submitBtn.textContent = "Enregistrer les modifications";
					form.action = `/admin/echeances/modifier/${echeanceId}`;
					form.querySelector('#intitule').value = trigger.dataset.formIntitule;
					form.querySelector('#date_echeance').value = trigger.dataset.formDateEcheance;
					form.querySelector('#details').value = trigger.dataset.formDetails;
					traiteGroup.style.display = 'flex';
					form.querySelector('#traite').checked = trigger.dataset.formTraite == '1';
				} else {
					modalTitle.textContent = "Ajouter une √©ch√©ance";
					submitBtn.textContent = "Enregistrer";
					form.action = document.body.dataset.urlAjoutEcheance;
					form.reset();
					traiteGroup.style.display = 'none';
				}
			}
			if (modalId === 'reset-licence-modal') {
				const passwordInput = modal.querySelector('#admin_password_confirm');
				if (passwordInput) passwordInput.value = '';
			}
		}

		const instanceIdCode = e.target.closest('#instance-id-code');
		if (instanceIdCode) {
			navigator.clipboard.writeText(instanceIdCode.textContent)
			.then(() => {
				const originalText = instanceIdCode.textContent;
				instanceIdCode.textContent = 'Copi√© !';
				setTimeout(() => { instanceIdCode.textContent = originalText; }, 1500);
			})
			.catch(err => {
				console.error('Erreur de copie : ', err);
				showInfoModal("Erreur", "Impossible de copier l'identifiant.");
			});
		}

		const clotureBtn = e.target.closest('#cloture-budget-btn');
		if (clotureBtn) {
			const form = document.getElementById('cloture-budget-form');
			const modal = document.getElementById('cloture-budget-modal');
			const anneeSpan = document.getElementById('cloture-budget-annee');
			const confirmBtn = document.getElementById('confirm-cloture-btn');
			if (form && modal && anneeSpan && confirmBtn) {
				anneeSpan.textContent = form.dataset.annee;
				confirmBtn.onclick = () => { form.submit(); };
			}
		}
	});
	// =================================================================
	// SECTION 3 : GESTIONNAIRES D'√âV√âNEMENTS NON-CLIC (input, change, submit)
	// =================================================================
	document.body.addEventListener('change', function(e) {
		if (e.target.matches('.commande-checkbox, .traite-checkbox')) {
			const checkbox = e.target;
			const isCommande = checkbox.matches('.commande-checkbox');
			const url = isCommande 
				? `/maj_commande/${checkbox.dataset.id}` 
				: `/maj_traite/${checkbox.dataset.id}`;
				
			const body = isCommande 
				? { en_commande: checkbox.checked } 
				: { traite: checkbox.checked };

			fetch(url, {
				method: "POST",
				headers: { 
					"Content-Type": "application/json",
					"X-CSRFToken": csrfToken
				},
				body: JSON.stringify(body)
			})
			.then(response => {
				if (!response.ok) {
					throw new Error('La r√©ponse du serveur n\'est pas valide.');
				}
				return response.json();
			})
			.then(data => {
				if (data.success) {
					checkbox.closest('tr').classList.toggle('acquitte', checkbox.checked);
				} else {
					showInfoModal("Erreur", data.error || "Une erreur est survenue.");
					checkbox.checked = !checkbox.checked;
				}
			})
			.catch(error => {
				console.error('Erreur Fetch:', error);
				showInfoModal("Erreur de Communication", "Impossible de contacter le serveur.");
				checkbox.checked = !checkbox.checked;
			});
		}
	});

	// =======================================================================
    // SECTION 4 : RECHERCHE GLOBALE (HEADER) - VERSION FINALE AVEC FLAG
    // =======================================================================
    const globalSearchInput = document.getElementById('globalSearchInput');
    const resultsContainer = document.getElementById('globalSearchResults');
    const searchWrapper = document.getElementById('search-wrapper-dropdown');
    const clearBtn = document.getElementById('clear-btn-dropdown');

    if (globalSearchInput && resultsContainer && searchWrapper) {
        let searchTimeoutHeader;
        let searchController = null;
        let hasValidResults = false; // ‚úÖ Nouveau flag d'√©tat

        // ---------------------------------------------------------
        // 1. GESTION VISUELLE (FOCUS)
        // ---------------------------------------------------------
        globalSearchInput.addEventListener('focus', () => {
            searchWrapper.classList.add('focused');
            globalSearchInput.classList.add('expanded');
            
            // On ne r√©affiche que si on a des r√©sultats valides en m√©moire
            // et que l'input n'a pas chang√© entre temps
            if (globalSearchInput.value.trim().length >= 2 && hasValidResults) {
                resultsContainer.style.display = 'block';
                resultsContainer.classList.add('visible');
            }
        });

        // ---------------------------------------------------------
        // 2. GESTION DE LA FRAPPE (INPUT)
        // ---------------------------------------------------------
        globalSearchInput.addEventListener('input', function(e) {
            const query = e.target.value.trim();
            
            if (searchTimeoutHeader) clearTimeout(searchTimeoutHeader);

            // Gestion bouton croix
            if (clearBtn) {
                if (query.length > 0) clearBtn.classList.add('visible');
                else clearBtn.classList.remove('visible');
            }

            // Nettoyage si trop court
            if (query.length < 2) {
                resultsContainer.classList.remove('visible');
                resultsContainer.style.display = 'none';
                hasValidResults = false; // ‚úÖ Reset du flag
                return;
            }

            searchTimeoutHeader = setTimeout(() => {
                if (searchController) searchController.abort();
                searchController = new AbortController();
                const signal = searchController.signal;

                // UI Chargement
                resultsContainer.style.display = 'block';
                resultsContainer.classList.add('visible');
                resultsContainer.innerHTML = '<div class="search-status"><div class="spinner-border spinner-border-sm text-white me-2"></div>Recherche...</div>';
                // On ne met pas hasValidResults √† true ici, on attend la r√©ponse

                fetch(`/api/search?q=${encodeURIComponent(query)}`, { signal })
                    .then(response => {
                        if (!response.ok) throw new Error('Erreur r√©seau');
                        return response.json();
                    })
                    .then(json => {
                        const data = Array.isArray(json) ? json : (json.data || []);

                        if (data.length === 0) {
                            resultsContainer.innerHTML = '<div class="search-status">Aucun r√©sultat trouv√©.</div>';
                            // On consid√®re "0 r√©sultat" comme un √©tat valide (l'utilisateur peut vouloir revoir √ßa)
                            hasValidResults = true; 
                        } else {
                            let html = '';
                            data.forEach(item => {
                                const rawImage = item.image || item.image_url;
                                let imgUrl = 'https://via.placeholder.com/40?text=IMG';

                                if (rawImage) {
                                    imgUrl = rawImage.startsWith('http') ? rawImage : `/static/${rawImage}`;
                                }

                                const armoire = item.armoire || 'Sans armoire';
                                const quantite = item.quantite !== undefined ? item.quantite : '?';

                                html += `
                                    <a href="/objet/${item.id}" class="search-result-item">
                                        <img src="${imgUrl}" alt="${item.nom}" class="search-result-img">
                                        <div class="search-result-info">
                                            <h6>${item.nom}</h6>
                                            <small>${armoire} ‚Ä¢ Qt√©: ${quantite}</small>
                                        </div>
                                    </a>
                                `;
                            });
                            resultsContainer.innerHTML = html;
                            hasValidResults = true; // ‚úÖ R√©sultats charg√©s avec succ√®s
                        }
                    })
                    .catch(error => {
                        if (error.name === 'AbortError') {
                            console.log('Recherche annul√©e');
                        } else {
                            console.error('Erreur JS recherche:', error);
                            resultsContainer.innerHTML = '<div class="search-status text-danger">Erreur technique.</div>';
                            hasValidResults = false; // ‚úÖ En cas d'erreur, on ne veut pas r√©afficher √ßa au focus
                        }
                    });
            }, 300);
        });

        // ---------------------------------------------------------
        // 3. BOUTON CLEAR
        // ---------------------------------------------------------
        if (clearBtn) {
            clearBtn.addEventListener('click', function() {
                globalSearchInput.value = '';
                clearBtn.classList.remove('visible');
                resultsContainer.classList.remove('visible');
                resultsContainer.style.display = 'none';
                globalSearchInput.focus();
                
                hasValidResults = false; // ‚úÖ Reset du flag
                
                if (searchTimeoutHeader) clearTimeout(searchTimeoutHeader);
                if (searchController) searchController.abort();
            });
        }

        // ---------------------------------------------------------
        // 4. FERMETURE AU CLIC EXT√âRIEUR
        // ---------------------------------------------------------
        document.addEventListener('click', function(e) {
            if (!searchWrapper.contains(e.target)) {
                searchWrapper.classList.remove('focused');
                globalSearchInput.classList.remove('expanded');
                resultsContainer.classList.remove('visible');
                resultsContainer.style.display = 'none';
                // Note : On ne reset PAS hasValidResults ici, 
                // pour permettre de r√©afficher les r√©sultats si on re-clique dans l'input
            }
        });
    }
	
	
    // =====================================================================
	// SECTION 5 : GESTION DEPLACEMENT EN MASSE
	// =====================================================================
    const selectAllCheckbox = document.getElementById('select-all-checkbox');
	if (selectAllCheckbox) {
		const objetCheckboxes = document.querySelectorAll('.objet-checkbox');
		const bulkActionSection = document.getElementById('bulk-action-section');
		const bulkMoveBtn = document.getElementById('bulk-move-btn');
		const moveDestination = document.getElementById('move-destination');
		function toggleBulkActionSection() {
			const anyChecked = document.querySelector('.objet-checkbox:checked');
			if(bulkActionSection) bulkActionSection.style.display = anyChecked ? 'flex' : 'none';
		}
		selectAllCheckbox.addEventListener('change', function () {
			objetCheckboxes.forEach(checkbox => { checkbox.checked = this.checked; });
			toggleBulkActionSection();
		});
		objetCheckboxes.forEach(checkbox => {
			checkbox.addEventListener('change', function () {
				if (!this.checked) selectAllCheckbox.checked = false;
				toggleBulkActionSection();
			});
		});
		if(bulkMoveBtn) {
            bulkMoveBtn.addEventListener('click', function () {
                const selectedObjectIds = Array.from(objetCheckboxes).filter(cb => cb.checked).map(cb => cb.dataset.id);
                if (selectedObjectIds.length === 0) {
                    showInfoModal("Aucune S√©lection", "Veuillez s√©lectionner au moins un objet √† d√©placer.");
                    return;
                }
                const destinationId = moveDestination.value;
                const pathname = window.location.pathname;
                const typeDestination = pathname.includes('/armoire/') ? 'armoire' : (pathname.includes('/categorie/') ? 'categorie' : '');
                if (!typeDestination) {
                    showInfoModal("Action Impossible", "Action de d√©placement non disponible sur cette page.");
                    return;
                }
                fetch('/api/deplacer_objets', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'X-CSRFToken': csrfToken },
                    body: JSON.stringify({
                        objet_ids: selectedObjectIds,
                        destination_id: destinationId,
                        type_destination: typeDestination
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        window.location.reload();
                    } else {
                        showInfoModal("Erreur", "Erreur lors du d√©placement des objets : " + (data.error || 'Erreur inconnue'));
                    }
                })
                .catch(error => {
                    console.error("Erreur lors du d√©placement en masse :", error);
                    showInfoModal("Erreur de Communication", "Une erreur est survenue lors de la communication avec le serveur.");
                });
            });
        }
	}
	
	// =================================================================
	// SECTION 6 : ANIMATION DE LA CLOCHE D'ALERTE
	// =================================================================
	const alertIcon = document.getElementById('alert-icon-link');
	if (alertIcon) {
		const alertCount = parseInt(alertIcon.dataset.alertCount, 10);

		if (alertCount >= 3) {
			alertIcon.classList.add('has-alerts-high');
		} else if (alertCount > 0) {
			alertIcon.classList.add('has-alerts-medium');
		}
	}

    // ==================================================================
	// SECTION 7 : FILTRE DE kit
	// ==================================================================
    const kitObjetSearch = document.getElementById('kit-objet-search');
    if (kitObjetSearch) {
        const availableObjectsTable = document.getElementById('available-objects-table');
        const rows = availableObjectsTable.querySelectorAll('tbody tr');
        kitObjetSearch.addEventListener('input', function () {
            const searchTerm = this.value.toLowerCase();
            rows.forEach(row => {
                const nomObjet = row.querySelector('td:first-child').textContent.toLowerCase();
                row.style.display = nomObjet.includes(searchTerm) ? '' : 'none';
            });
        });
    }

    // ===================================================================
	// SECTION 8 : Rapports
	// ===================================================================
    const formRapportsGrid = document.querySelector('.form-rapports-grid');
    if (formRapportsGrid) {
        const dateDebutInput = formRapportsGrid.querySelector('#date_debut');
        const dateFinInput = formRapportsGrid.querySelector('#date_fin');
        const today = new Date().toISOString().split('T')[0];
        if (!dateFinInput.value) dateFinInput.value = today;
        dateDebutInput.addEventListener('change', () => {
            if (dateDebutInput.value) {
                dateFinInput.min = dateDebutInput.value;
                if (dateFinInput.value < dateDebutInput.value) dateFinInput.value = dateDebutInput.value;
            }
        });
    }


    // ====================================================================
	// SECTION 10 : MODALE DES DEPENSES
	// ====================================================================
    const depenseModal = document.getElementById('depense-modal');
    if (depenseModal) {
        const bonAchatCheckbox = depenseModal.querySelector('#est_bon_achat');
        const fournisseurSelect = depenseModal.querySelector('#fournisseur_id');
        bonAchatCheckbox.addEventListener('change', function () {
            fournisseurSelect.disabled = this.checked;
            if (this.checked) fournisseurSelect.value = '';
        });
    }
    const editDepenseModal = document.getElementById('edit-depense-modal');
    if (editDepenseModal) {
        const bonAchatCheckbox = editDepenseModal.querySelector('#edit_est_bon_achat');
        const fournisseurSelect = editDepenseModal.querySelector('#edit_fournisseur_id');
        bonAchatCheckbox.addEventListener('change', function () {
            fournisseurSelect.disabled = this.checked;
            if (this.checked) fournisseurSelect.value = '';
        });
    }

    // =======================================================================
	// SECTION 11 : FONCTIONS ADMIN DB LICENCE GEST UTILISATEUR
	// =======================================================================
	const importDbInput = document.getElementById('fichier-db');
	if (importDbInput) {
		importDbInput.addEventListener('change', function () {
			if (this.files.length > 0) this.form.submit();
		});
	}
	const resetLicenceForm = document.getElementById('reset-licence-form');
	if (resetLicenceForm) {
		resetLicenceForm.addEventListener('submit', function (event) {
			const confirmation = confirm('√ätes-vous s√ªr de vouloir r√©initialiser la licence ? L\'application repassera en mode GRATUIT limit√© √† 50 objets.');
			if (!confirmation) event.preventDefault();
		});
	}
	const deleteUserModal = document.getElementById('delete-user-modal');
	if (deleteUserModal) {
		const deleteForm = deleteUserModal.querySelector('form');
		const confirmInput = deleteUserModal.querySelector('#delete-confirm-input');
		const errorMessage = deleteUserModal.querySelector('#delete-error-message');
		deleteForm.addEventListener('submit', function(event) {
			if (confirmInput.value.trim() !== this.dataset.username) {
				event.preventDefault(); 
				errorMessage.textContent = 'Le nom de l\'utilisateur ne correspond pas.';
				confirmInput.focus();
			} else {
				errorMessage.textContent = '';
			}
		});
	}

    // =======================================================================
	// SECTION 12 : UPLOAD LOGO
	// =======================================================================
    const editLogoInput = document.getElementById('edit_logo');
    if (editLogoInput) {
        const editLogoFilename = document.getElementById('edit-logo-filename');
        const defaultText = editLogoFilename.textContent;
        editLogoInput.addEventListener('change', function() {
            editLogoFilename.textContent = this.files.length > 0 ? this.files[0].name : defaultText;
        });
    }

	// =================================================================
	// SECTION 13 : LOGIQUE POUR LA RECHERCHE D'IMAGES PEXELS
	// =================================================================
    function setupPexelsSearch() {
        const pexelsSearchButton = document.getElementById('btn-search-pexels');
        const pexelsResultsContainer = document.getElementById('pexels-results');
        const imageUrlInput = document.getElementById('image_url');
        const imageNameInput = document.getElementById('nom');
        const imagePreview = document.getElementById('image-preview');
        const imagePreviewContainer = document.getElementById('image-preview-container');

        if (!pexelsSearchButton || pexelsSearchButton.dataset.listenerAttached) return;
        
        pexelsSearchButton.dataset.listenerAttached = 'true';

        pexelsSearchButton.addEventListener('click', async () => {
            const query = imageNameInput.value.trim();
            if (!query) {
                alert("Veuillez d'abord entrer un nom pour l'objet √† rechercher.");
                return;
            }
            pexelsResultsContainer.innerHTML = '<p>Recherche en cours...</p>';
            pexelsResultsContainer.style.display = 'block';
            try {
                const response = await fetch(`/api/search-images?q=${encodeURIComponent(query)}`);
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || 'La recherche a √©chou√©.');
                }
                const images = await response.json();
                pexelsResultsContainer.innerHTML = '';
                if (images.length === 0) {
                    pexelsResultsContainer.innerHTML = '<p>Aucune image trouv√©e.</p>';
                } else {
                    images.forEach(image => {
                        const imgElement = document.createElement('img');
                        imgElement.src = image.small_url;
                        imgElement.classList.add('pexels-image');
                        imgElement.alt = `Photo par ${image.photographer}`;
                        imgElement.title = `Photo par ${image.photographer}`;
                        imgElement.addEventListener('click', () => {
                            imageUrlInput.value = image.large_url;
                            imagePreview.src = image.large_url;
                            imagePreviewContainer.style.display = 'block';
                            pexelsResultsContainer.style.display = 'none';
                        });
                        pexelsResultsContainer.appendChild(imgElement);
                    });
                }
            } catch (error) {
                pexelsResultsContainer.innerHTML = `<p style="color: red;">Erreur : ${error.message}</p>`;
            }
        });

        imageUrlInput.addEventListener('input', () => {
            const url = imageUrlInput.value.trim();
            if (url) {
                imagePreview.src = url;
                imagePreviewContainer.style.display = 'block';
            } else {
                imagePreviewContainer.style.display = 'none';
            }
        });
    }
	
	// =================================================================
	// GESTION MODALE AJOUT/MODIF (VERSION FINALE & INFAILLIBLE)
	// =================================================================
	const addObjectModalElement = document.getElementById('addObjectModal');
	if (addObjectModalElement) {
		addObjectModalElement.addEventListener('show.bs.modal', function (event) {
			const button = event.relatedTarget; 
			if (!button) return;
			
			const form = addObjectModalElement.querySelector('form');
			const modalTitle = addObjectModalElement.querySelector('.modal-title');
			const submitBtn = form.querySelector('button[type="submit"]');
			
            // --- R√âCUP√âRATION PAR ID (PLUS FIABLE) ---
			const imagePreviewContainer = document.getElementById('image-preview-container');
			const imagePreview = document.getElementById('image-preview');
            const fdsStatusDiv = document.getElementById('fds-current-status');
            const fdsLinkBtn = document.getElementById('fds-current-link');
            const fdsTypeLabel = document.getElementById('fds-current-type');
            const fdsHelpText = document.getElementById('fds-help-text');

            // =========================================================
            // 1. LE GRAND NETTOYAGE (RESET FORC√â)
            // =========================================================
            console.log("üßπ Nettoyage de la modale...");

            // Reset Image
            if (imagePreviewContainer) imagePreviewContainer.style.display = 'none';
            if (imagePreview) imagePreview.src = '';
            
            // Reset FDS (C'est ici que √ßa coin√ßait avant)
            if (fdsStatusDiv) {
                fdsStatusDiv.style.display = 'none'; // On cache la barre verte
                fdsStatusDiv.classList.remove('d-flex'); // On retire la classe flex au cas o√π
            }
            if (fdsLinkBtn) fdsLinkBtn.href = '#';
            if (fdsTypeLabel) fdsTypeLabel.textContent = '';
            if (fdsHelpText) fdsHelpText.innerHTML = 'Ajoutez un fichier ou un lien pour la s√©curit√©.';
            
            // Reset Onglets (Retour sur le 1er onglet par d√©faut)
            const tabImgFile = new bootstrap.Tab(document.querySelector('#pills-file-tab'));
            if (tabImgFile) tabImgFile.show();
            
            const btnTabFdsFile = document.querySelector('button[data-bs-target="#nav-file-fds"]');
            if (btnTabFdsFile) new bootstrap.Tab(btnTabFdsFile).show();

            // Reset Inputs cach√©s et visibles
            form.reset(); 
            const inputImgUrl = form.querySelector('#image_url');
            const inputFdsUrl = form.querySelector('#fds_url');
            if (inputImgUrl) inputImgUrl.value = '';
            if (inputFdsUrl) inputFdsUrl.value = '';
            // =========================================================
			
			const objetId = button.dataset.objetId;
			
			if (objetId) {
				// --- MODE MODIFICATION ---
				modalTitle.textContent = "Modifier l'objet";
				form.action = `/modifier_objet/${objetId}`;
				
				// Donn√©es brutes
				const rawImg = (button.dataset.imageUrl || '').trim();
				const rawFds = (button.dataset.fdsUrl || '').trim();
                
                console.log(`Objet ID: ${objetId}, FDS: ${rawFds}`); // Debug

				// Remplissage Champs Standards
				const fields = {
					'nom': button.dataset.nom,
					'quantite': button.dataset.quantite,
					'seuil': button.dataset.seuil,
					'date_peremption': button.dataset.datePeremption,
					'armoire_id': button.dataset.armoireId,
					'categorie_id': button.dataset.categorieId
				};
				
				for (const [fieldId, rawValue] of Object.entries(fields)) {
					const input = form.querySelector(`#${fieldId}`);
					if (input) {
                        let value = rawValue;
                        if (value === 'None' || value === null || value === undefined) value = '';
						input.value = value;
					}
				}

				// Gestion Image
                const tabImgUrl = new bootstrap.Tab(document.querySelector('#pills-url-tab'));
                if (rawImg.startsWith('http')) {
                    tabImgUrl.show();
                    if (inputImgUrl) inputImgUrl.value = rawImg;
                }
				
				if (rawImg && rawImg !== 'None' && imagePreview) {
					imagePreview.src = rawImg.startsWith('http') ? rawImg : `/static/${rawImg}`;
					imagePreviewContainer.style.display = 'block';
				}
				
                // --- GESTION FDS (LOGIQUE CORRIG√âE) ---
                // On n'affiche la barre verte QUE si une FDS existe vraiment
                if (rawFds && rawFds !== 'None' && fdsStatusDiv) {
                    console.log("‚úÖ FDS d√©tect√©e, affichage de la barre verte.");
                    fdsStatusDiv.style.display = 'flex'; // On r√©affiche
                    
                    if (fdsHelpText) {
                        fdsHelpText.innerHTML = '<i class="bi bi-info-circle me-1"></i>Une FDS est active. Utilisez ces champs uniquement pour la <strong>remplacer</strong>.';
                    }

                    if (rawFds.startsWith('http')) {
                        fdsTypeLabel.textContent = 'Lien Web Externe';
                        fdsLinkBtn.href = rawFds;
                        
                        const btnTabFdsUrl = document.querySelector('button[data-bs-target="#nav-url-fds"]');
                        if (btnTabFdsUrl) new bootstrap.Tab(btnTabFdsUrl).show();
                        if (inputFdsUrl) inputFdsUrl.value = rawFds;
                    } else {
                        fdsTypeLabel.textContent = 'Fichier PDF H√©berg√©';
                        fdsLinkBtn.href = `/static/${rawFds}`;
                    }
                }

				if (submitBtn) {
					submitBtn.textContent = 'Mettre √† jour';
					submitBtn.className = 'btn btn-primary';
				}
				
			} else {
				// --- MODE AJOUT ---
				modalTitle.textContent = "Ajouter un nouvel objet";
				form.action = document.body.dataset.addUrl || '/ajouter_objet';
				
				if (submitBtn) {
					submitBtn.textContent = 'Enregistrer l\'objet';
					submitBtn.className = 'btn btn-success';
				}
			}
			
			if (typeof setupPexelsSearch === 'function') setupPexelsSearch();
		});
	}
	
	// =================================================================
    // SECTION 14 : MODALE DE SUGGESTION DE COMMANDE (BOOTSTRAP 5)
    // =================================================================
    const suggestionModal = document.getElementById('suggestionModal');
    if (suggestionModal) {
        const suggestionModalInstance = new bootstrap.Modal(suggestionModal);
        
        const objetNomElement = document.getElementById('suggestion-objet-nom');
        const objetIdInput = document.getElementById('suggestion-objet-id');
        const quantityInput = document.getElementById('suggestion-quantity-input');
        const commentaireInput = document.getElementById('suggestion-commentaire');
        const confirmBtn = document.getElementById('suggestion-confirm-btn');

        // 1. OUVERTURE ET CALCUL
        document.addEventListener('click', function(e) {
            const btnSuggest = e.target.closest('.btn-suggest');
            if (btnSuggest) {
                e.preventDefault();
                
                // R√©cup√©ration des donn√©es depuis le bouton HTML
                const objetId = btnSuggest.dataset.objetId;
                const objetNom = btnSuggest.dataset.objetNom;
                
                // Conversion en nombre (le || 0 √©vite le NaN si l'attribut est vide)
                const stockActuel = parseInt(btnSuggest.dataset.stock) || 0;
                const seuilAlerte = parseInt(btnSuggest.dataset.seuil) || 0;
                
                console.log(`Calcul suggestion : Stock=${stockActuel}, Seuil=${seuilAlerte}`); // Debug console

                // Remplissage UI
                if (objetNomElement) objetNomElement.textContent = objetNom;
                if (objetIdInput) objetIdInput.value = objetId;
                
                // --- CALCUL INTELLIGENT ---
                let proposition = 1; // Valeur par d√©faut
                
                // Si on est en dessous ou √©gal au seuil (et que le seuil est d√©fini)
                if (stockActuel <= seuilAlerte && seuilAlerte > 0) {
                    // Objectif : Remonter √† 2x le seuil (stock de s√©curit√©)
                    const cible = seuilAlerte * 2;
                    proposition = cible - stockActuel;
                    
                    // S√©curit√© : on commande au moins 1, et id√©alement au moins 5 si c'est du consommable
                    if (proposition < 1) proposition = 1;
                }
                
                if (quantityInput) quantityInput.value = proposition;
                
                // Placeholder contextuel
                if (commentaireInput) {
                    commentaireInput.value = '';
                    if (stockActuel <= seuilAlerte && seuilAlerte > 0) {
                        commentaireInput.placeholder = `Stock critique (${stockActuel}/${seuilAlerte}). R√©assort conseill√©.`;
                    } else {
                        commentaireInput.placeholder = "Pourquoi cette commande ?";
                    }
                }
                
                suggestionModalInstance.show();
                
                // Focus sur le champ quantit√©
                setTimeout(() => {
                    if (quantityInput) { quantityInput.focus(); quantityInput.select(); }
                }, 300);
            }
        });

        // 2. RESET FERMETURE
        suggestionModal.addEventListener('hidden.bs.modal', function() {
            if (quantityInput) quantityInput.value = '';
            if (commentaireInput) commentaireInput.value = '';
            if (confirmBtn) {
                confirmBtn.classList.remove('loading');
                confirmBtn.disabled = false;
            }
        });

        // 3. ENVOI (Utilise showToast pour l'affichage propre)
        if (confirmBtn) {
            confirmBtn.addEventListener('click', async function() {
                const objetId = objetIdInput.value;
                const quantite = parseInt(quantityInput.value);
                const commentaire = commentaireInput.value.trim();
                
                if (!quantite || quantite < 1) {
                    quantityInput.classList.add('is-invalid');
                    return;
                }
                quantityInput.classList.remove('is-invalid');
                
                confirmBtn.classList.add('loading');
                confirmBtn.disabled = true;
                
                try {
                    const response = await fetch('/api/suggerer_commande', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRFToken': csrfToken
                        },
                        body: JSON.stringify({
                            objet_id: objetId,
                            quantite: quantite,
                            commentaire: commentaire
                        })
                    });
                    
                    const result = await response.json();
                    
                    if (response.ok) {
                        // C'EST ICI QUE L'AFFICHAGE SE JOUE
                        // On utilise showToast (la bulle) et non showInfoModal (le truc moche)
                        if (typeof showToast === 'function') {
                            showToast(result.message || 'Suggestion envoy√©e !', 'success');
                        } else {
                            alert(result.message); // Fallback si showToast n'existe pas
                        }
                        
                        suggestionModalInstance.hide();
                        setTimeout(() => window.location.reload(), 1500);
                    } else {
                        if (typeof showToast === 'function') {
                            showToast(result.error || 'Erreur serveur', 'error');
                        } else {
                            alert(result.error);
                        }
                    }
                } catch (error) {
                    console.error('Erreur:', error);
                    if (typeof showToast === 'function') {
                        showToast('Erreur de connexion', 'error');
                    }
                } finally {
                    confirmBtn.classList.remove('loading');
                    confirmBtn.disabled = false;
                }
            });
        }
    }
    setupPexelsSearch();
	
	// =================================================================
    // SECTION 15 : ANIMATION BREADCRUMB (FIL D'ARIANE)
    // =================================================================
    const breadcrumbLinks = document.querySelectorAll('.breadcrumb-link');
    
    if (breadcrumbLinks.length > 0) {
        breadcrumbLinks.forEach(link => {
            link.addEventListener('mouseenter', function() {
                const separator = this.nextElementSibling;
                if (separator && separator.classList.contains('breadcrumb-separator')) {
                    separator.style.transform = 'scale(1.3) rotate(20deg)';
                    separator.style.color = '#667eea';
                    separator.style.fontWeight = 'bold';
                }
            });
            
            link.addEventListener('mouseleave', function() {
                const separator = this.nextElementSibling;
                if (separator && separator.classList.contains('breadcrumb-separator')) {
                    separator.style.transform = 'scale(1) rotate(0deg)';
                    separator.style.color = '#d1d5db';
                    separator.style.fontWeight = '300';
                }
            });
        });
    }
	
	// =================================================================
    // SECTION 16 : BOUTON RETOUR HAUT (Back To Top)
    // =================================================================
    const backToTopBtn = document.getElementById('backToTopBtn');
    
    if (backToTopBtn) {
        // 1. Gestion de l'apparition au scroll
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) { // Appara√Æt apr√®s 300px de descente
                backToTopBtn.classList.add('show');
            } else {
                backToTopBtn.classList.remove('show');
            }
        });

        // 2. Action de remont√©e fluide
        backToTopBtn.addEventListener('click', (e) => {
            e.preventDefault();
            window.scrollTo({
                top: 0,
                behavior: 'smooth' // C'est √ßa qui fait l'effet "Premium"
            });
        });
    }
});

==================================================
FICHIER : static\js\modules\booking-modal.js
==================================================
// static/js/modules/booking-modal.js
import { showToast } from './toast.js';
import { updateCartBadge, escapeHtml } from './cart-utils.js';

// --- CONFIGURATION & CONSTANTES ---
const DEBUG = true; // Mettre √† false en production

const BOOKING_CONFIG = {
    MIN_HOUR: 8,
    MAX_HOUR: 18,
    DEBOUNCE_DELAY: 300
};

const ERROR_MESSAGES = {
    CSRF_MISSING: 'Erreur de configuration de s√©curit√© (CSRF)',
    NETWORK_ERROR: 'Erreur de connexion au serveur',
    LOADING_ERROR: 'Impossible de charger les donn√©es',
    CART_ERROR: 'Erreur lors de la mise √† jour du panier',
    TECHNICAL_ERROR: 'Une erreur technique est survenue',
    AVAILABILITY_ERROR: 'Impossible de v√©rifier les disponibilit√©s',
    INVALID_RESPONSE: 'R√©ponse serveur invalide'
};

// --- VARIABLES GLOBALES ---
const bookingModalElement = document.getElementById('bookingModal');
let bookingModalInstance = null;

// UI Elements
let modalTitle, dateInput, startTimeSelect, endTimeSelect;
let availableItemsContainer, bookingCartContainer, validateBtn, cancelBtn, modalFooter;
let editingGroupId = null;

// State
let originalTimes = { start: null, end: null };
let timeChangeDebounce = null;
let lastItemModalInstance = null;
let pendingDelete = null;
let availabilityController = null;

// --- HELPERS TECHNIQUES ---

/**
 * Logging structur√© pour le d√©bogage
 */
function log(level, message, data = {}) {
    if (!DEBUG && level === 'debug') return;
    
    const timestamp = new Date().toISOString();
    const logData = { timestamp, level, message, ...data };
    
    console[level === 'error' ? 'error' : 'log']('[BookingModal]', logData);
}

/**
 * R√©cup√®re et valide le token CSRF
 */
function getCSRFToken() {
    const token = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');
    if (!token) {
        log('error', ERROR_MESSAGES.CSRF_MISSING);
        showToast(ERROR_MESSAGES.CSRF_MISSING, 'error');
        throw new Error('Missing CSRF token');
    }
    return token;
}

/**
 * Valide la structure de la r√©ponse API
 */
function validateAPIResponse(data, requiredFields = []) {
    if (!data || typeof data !== 'object') {
        throw new Error(ERROR_MESSAGES.INVALID_RESPONSE);
    }
    
    if (data.success === false) {
        throw new Error(data.error || 'Erreur inconnue renvoy√©e par le serveur');
    }
    
    for (const field of requiredFields) {
        if (!(field in data)) {
            throw new Error(`Champ manquant dans la r√©ponse API : ${field}`);
        }
    }
    
    return data;
}

/**
 * G√®re l'√©tat de chargement d'un conteneur (div, ul, etc.)
 */
function setLoadingState(element, isLoading, loadingText = 'Chargement...') {
    if (!element) return;
    
    if (isLoading) {
        // On sauvegarde le contenu actuel seulement s'il n'est pas d√©j√† en chargement
        if (!element.querySelector('.spinner-border')) {
            element.dataset.originalContent = element.innerHTML;
        }
        element.innerHTML = `
            <div class="text-center py-4">
                <div class="spinner-border spinner-border-sm text-primary" role="status"></div>
                <p class="text-muted small mt-2 mb-0">${escapeHtml(loadingText)}</p>
            </div>`;
    } else {
        // Note: On ne restaure pas forc√©ment l'originalContent car souvent on le remplace par le nouveau contenu
        delete element.dataset.originalContent;
    }
}

/**
 * Remplace un bouton pour supprimer les anciens EventListeners et mettre √† jour ses propri√©t√©s
 */
function replaceButtonHandler(button, newHandler, options = {}) {
    if (!button || !button.parentNode) {
        console.warn('replaceButtonHandler: bouton invalide ou absent du DOM');
        return null;
    }
    
    const newBtn = button.cloneNode(true);
    
    // Application des options
    newBtn.style.display = options.display || 'inline-block';
    newBtn.disabled = options.disabled || false;
    
    if (options.html !== undefined) newBtn.innerHTML = options.html;
    if (options.text !== undefined) newBtn.textContent = options.text;
    if (options.className !== undefined) newBtn.className = options.className;
    if (options.ariaLabel) newBtn.setAttribute('aria-label', options.ariaLabel);
    
    // Gestion du dismiss modal
    if (options.dismiss) {
        newBtn.dataset.bsDismiss = 'modal';
    } else {
        delete newBtn.dataset.bsDismiss;
    }
    
    // Handler
    if (newHandler) newBtn.onclick = newHandler;
    else newBtn.onclick = null;
    
    button.parentNode.replaceChild(newBtn, button);
    return newBtn;
}

// --- INITIALISATION ---

export function initBookingModal() {
    if (!bookingModalElement) return;

    modalTitle = bookingModalElement.querySelector('.modal-title');
    dateInput = document.getElementById('bookingDate');
    startTimeSelect = document.getElementById('startTime');
    endTimeSelect = document.getElementById('endTime');
    availableItemsContainer = document.getElementById('availableItems');
    bookingCartContainer = document.getElementById('bookingCart');
    validateBtn = document.getElementById('validateBookingBtn');
    modalFooter = bookingModalElement.querySelector('.modal-footer');
    cancelBtn = modalFooter.querySelector('.btn-secondary');

    // Init Modale Warning (Suppression dernier item)
    const warningEl = document.getElementById('lastItemWarningModal');
    if (warningEl) {
        lastItemModalInstance = new bootstrap.Modal(warningEl);
        const confirmBtn = document.getElementById('btnConfirmLastItemDelete');
        if (confirmBtn) {
            confirmBtn.addEventListener('click', () => {
                if (pendingDelete) {
                    performRemoveItem(pendingDelete.id, pendingDelete.type);
                    lastItemModalInstance.hide();
                    pendingDelete = null;
                }
            });
        }
    }

    bookingModalElement.addEventListener('show.bs.modal', handleModalOpen);
    bookingModalElement.addEventListener('hidden.bs.modal', () => {
        resetModalState();
        forceCleanup();
    });

    if (startTimeSelect) startTimeSelect.addEventListener('change', onTimeChange);
    if (endTimeSelect) endTimeSelect.addEventListener('change', onTimeChange);

    setupDelegatedEvents();
}

export function openReservationModal(date, groupId = null) {
    if (!bookingModalElement) return;
    bookingModalElement.dataset.date = date;
    if (groupId) bookingModalElement.dataset.groupId = groupId;
    else delete bookingModalElement.dataset.groupId;

    if (!bookingModalInstance) bookingModalInstance = new bootstrap.Modal(bookingModalElement);
    bookingModalInstance.show();
    
    log('debug', 'Ouverture modale demand√©e', { date, groupId });
}

async function handleModalOpen(event) {
    const trigger = event.relatedTarget || bookingModalElement;
    const date = trigger.dataset.date;
    editingGroupId = trigger.dataset.groupId || null;

    if (!date) {
        log('error', 'Date manquante √† l\'ouverture de la modale');
        return;
    }

    dateInput.value = date;
    const dateObj = new Date(date);
    const dateFr = dateObj.toLocaleDateString('fr-FR', { weekday: 'long', day: 'numeric', month: 'long' });
    
    if (bookingCartContainer) bookingCartContainer.style.display = 'block';

    // Reset visuel des boutons avant configuration
    if (validateBtn) validateBtn.style.display = 'none';
    if (cancelBtn) cancelBtn.style.display = 'none';

    if (editingGroupId) {
        // --- MODE √âDITION ---
        modalTitle.innerHTML = ''; 
        const icon = document.createElement('i');
        icon.className = 'bi bi-pencil-square me-2';
        modalTitle.appendChild(icon);
        modalTitle.appendChild(document.createTextNode('Modifier la r√©servation'));
        
        cancelBtn = replaceButtonHandler(cancelBtn, null, {
            text: "Fermer",
            className: "btn btn-dark",
            dismiss: true,
            ariaLabel: "Fermer la fen√™tre"
        });
        
        await loadExistingReservation(editingGroupId);

    } else {
        // --- MODE CR√âATION ---
        modalTitle.innerHTML = '';
        const icon = document.createElement('i');
        icon.className = 'bi bi-calendar-check me-2';
        modalTitle.appendChild(icon);
        modalTitle.appendChild(document.createTextNode(`R√©server pour le ${dateFr}`));
        
        validateBtn = replaceButtonHandler(validateBtn, 
            (e) => { e.preventDefault(); window.location.href = '/panier'; },
            { 
                html: '<i class="bi bi-cart-check me-2"></i>Voir mon panier', 
                className: "btn btn-success",
                ariaLabel: "Acc√©der au panier pour valider"
            }
        );

        cancelBtn = replaceButtonHandler(cancelBtn, 
            (e) => {
                e.preventDefault();
                if (bookingModalInstance) bookingModalInstance.hide();
                else bootstrap.Modal.getInstance(bookingModalElement).hide();
                forceCleanup();
                if (!window.location.pathname.includes('/calendrier')) window.location.href = '/calendrier';
            },
            {
                html: '<i class="bi bi-calendar-week me-2"></i>Poursuivre (Calendrier)',
                className: "btn btn-outline-secondary",
                dismiss: false,
                ariaLabel: "Retourner au calendrier"
            }
        );

        updateHourOptions(); 
        setSmartTime();      
        loadAvailabilities();
        refreshMiniCart();
    }
}

function resetModalState() {
    delete bookingModalElement.dataset.date;
    delete bookingModalElement.dataset.groupId;
    editingGroupId = null;
    originalTimes = { start: null, end: null };
    availableItemsContainer.innerHTML = '';
    if (bookingCartContainer) bookingCartContainer.innerHTML = '';
    
    if (availabilityController) availabilityController.abort();
}

function forceCleanup() {
    const instance = bootstrap.Modal.getInstance(bookingModalElement);
    if (instance) instance.dispose();
    
    setTimeout(() => {
        document.querySelectorAll('.modal-backdrop').forEach(el => el.remove());
        document.body.classList.remove('modal-open');
        document.body.style = '';
    }, 150);
}

// --- GESTION DU TEMPS ---

function updateHourOptions() {
    if (!startTimeSelect || !endTimeSelect) return;
    
    const startVal = startTimeSelect.value;
    const endVal = endTimeSelect.value;

    if (startVal >= endVal) {
        const startHour = parseInt(startVal.split(':')[0]);
        const newEndHour = startHour + 1;
        const newEndStr = `${String(newEndHour).padStart(2, '0')}:00`;
        
        const optionExists = [...endTimeSelect.options].some(o => o.value === newEndStr);
        if (optionExists) {
            endTimeSelect.value = newEndStr;
        }
    }
}

function onTimeChange(event) {
    if (event.target === startTimeSelect) {
        updateHourOptions();
    }

    if (editingGroupId && originalTimes.start) {
        if (startTimeSelect.value !== originalTimes.start || endTimeSelect.value !== originalTimes.end) {
            showEditTimeButtons();
        } else {
            const customBtns = modalFooter.querySelectorAll('.btn-custom-time');
            customBtns.forEach(btn => btn.remove());
            if (cancelBtn) cancelBtn.style.display = 'inline-block';
        }
        return;
    }

    clearTimeout(timeChangeDebounce);
    timeChangeDebounce = setTimeout(() => {
        loadAvailabilities();
    }, BOOKING_CONFIG.DEBOUNCE_DELAY);
}

// --- GESTION DES BOUTONS DYNAMIQUES (EDITION) ---

function showEditTimeButtons() {
    if (cancelBtn) cancelBtn.style.display = 'none';
    if (validateBtn) validateBtn.style.display = 'none';

    if (modalFooter.querySelector('.btn-custom-time')) return;

    // Bouton Annuler
    const btnReset = document.createElement('button');
    btnReset.className = 'btn btn-outline-secondary btn-custom-time me-2';
    btnReset.innerHTML = '<i class="bi bi-x-lg me-2"></i>Annuler';
    btnReset.onclick = () => {
        startTimeSelect.value = originalTimes.start;
        endTimeSelect.value = originalTimes.end;
        const customBtns = modalFooter.querySelectorAll('.btn-custom-time');
        customBtns.forEach(btn => btn.remove());
        if (cancelBtn) cancelBtn.style.display = 'inline-block';
    };

    // Bouton Mettre √† jour
    const btnUpdate = document.createElement('button');
    btnUpdate.className = 'btn btn-primary btn-custom-time';
    btnUpdate.innerHTML = '<i class="bi bi-check-lg me-2"></i>Mettre √† jour l\'heure';
    
    btnUpdate.onclick = async () => {
        const originalText = btnUpdate.innerHTML;
        btnUpdate.disabled = true;
        btnUpdate.innerHTML = '<span class="spinner-border spinner-border-sm"></span> V√©rification...';

        try {
            // 1. V√©rification des disponibilit√©s
            const checkRes = await fetch(
                `/api/disponibilites?date=${dateInput.value}&heure_debut=${startTimeSelect.value}&heure_fin=${endTimeSelect.value}`
            );
            
            const checkData = validateAPIResponse(await checkRes.json(), ['data']);
            
            // 2. R√©cup√©ration des items actuels
            const currentItems = getCurrentCartItems();
            const unavailableItems = [];
            
            currentItems.forEach(cartItem => {
                const itemType = cartItem.type === 'kit' ? 'kits' : 'objets';
                const availableItem = checkData.data[itemType]?.find(i => i.id === cartItem.id);
                
                if (!availableItem || availableItem.disponible < cartItem.quantite) {
                    unavailableItems.push({
                        nom: cartItem.nom,
                        needed: cartItem.quantite,
                        available: availableItem?.disponible || 0
                    });
                }
            });

            // 3. Alerte si conflit
            if (unavailableItems.length > 0) {
                const message = unavailableItems.map(item => 
                    `‚Ä¢ ${item.nom} (Besoin: ${item.needed}, Dispo: ${item.available})`
                ).join('\n');
                
                if (!confirm(`‚ö†Ô∏è Attention : Certains items ne seront plus disponibles sur ce nouveau cr√©neau :\n\n${message}\n\nLa mise √† jour risque d'√©chouer. Continuer quand m√™me ?`)) {
                    btnUpdate.disabled = false;
                    btnUpdate.innerHTML = originalText;
                    return;
                }
            }

            // 4. Envoi de la modification
            btnUpdate.innerHTML = '<span class="spinner-border spinner-border-sm"></span> Enregistrement...';
            await performTimeUpdate();

        } catch (err) {
            log('error', 'Erreur mise √† jour heure', err);
            showToast(err.message || ERROR_MESSAGES.TECHNICAL_ERROR, "error");
            btnUpdate.disabled = false;
            btnUpdate.innerHTML = originalText;
        }
    };

    modalFooter.appendChild(btnReset);
    modalFooter.appendChild(btnUpdate);
}

// Helpers
function getCurrentCartItems() {
    const items = [];
    document.querySelectorAll('#bookingCart li').forEach(li => {
        const nomEl = li.querySelector('.fw-bold');
        const badgeEl = li.querySelector('.badge');
        const btnEl = li.querySelector('.btn-remove-item');
        
        if (nomEl && badgeEl && btnEl) {
            items.push({
                nom: nomEl.textContent.trim(),
                quantite: parseInt(badgeEl.textContent.replace('x', ''), 10),
                id: parseInt(btnEl.dataset.id, 10),
                type: btnEl.dataset.type
            });
        }
    });
    return items;
}

async function performTimeUpdate() {
    const payload = {
        date: dateInput.value,
        heure_debut: startTimeSelect.value,
        heure_fin: endTimeSelect.value
    };
    
    const csrfToken = getCSRFToken();

    const res = await fetch(`/api/reservation/${editingGroupId}/modifier_heure`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json', 'X-CSRFToken': csrfToken },
        body: JSON.stringify(payload)
    });
    
    const data = validateAPIResponse(await res.json());
    
    if (data.success) {
        showToast("Horaire modifi√© avec succ√®s", "success");
        setTimeout(() => window.location.reload(), 500);
    }
}

// --- LOGIQUE M√âTIER ---

async function loadExistingReservation(groupId) {
    try {
        setLoadingState(bookingCartContainer, true, 'Chargement r√©servation...');
        
        const response = await fetch(`/api/reservation_details/${groupId}`);
        if (!response.ok) throw new Error(ERROR_MESSAGES.LOADING_ERROR);
        
        const data = await response.json();

        if (data.debut && data.fin) {
            const start = data.debut.substring(11, 16);
            const end = data.fin.substring(11, 16);
            
            startTimeSelect.value = start;
            endTimeSelect.value = end;
            
            originalTimes = { start: start, end: end };
        }

        renderMiniCart(data.items, false); 
        
        const startDt = new Date(data.debut);
        if (startDt < new Date()) {
            availableItemsContainer.innerHTML = `<div class="alert alert-warning"><i class="bi bi-clock-history me-2"></i>R√©servation pass√©e. Lecture seule.</div>`;
            renderMiniCart(data.items, true);
        } else {
            loadAvailabilities();
        }
    } catch (error) {
        log('error', 'Erreur loadExistingReservation', error);
        bookingCartContainer.innerHTML = `<div class="text-danger text-center p-3">${ERROR_MESSAGES.LOADING_ERROR}</div>`;
    }
}

async function loadAvailabilities() {
    const date = dateInput.value;
    const start = startTimeSelect.value;
    const end = endTimeSelect.value;
    if (!date || !start || !end) return;

    if (availabilityController) {
        availabilityController.abort();
    }
    availabilityController = new AbortController();

    setLoadingState(availableItemsContainer, true, 'V√©rification stocks...');

    let url = `/api/disponibilites?date=${date}&heure_debut=${start}&heure_fin=${end}`;
    
    try {
        const res = await fetch(url, { signal: availabilityController.signal });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        
        const response = validateAPIResponse(await res.json(), ['data']);
        renderAvailableItems(response.data);
        
    } catch (err) {
        if (err.name === 'AbortError') return;
        
        log('error', 'Erreur loadAvailabilities', err);
        availableItemsContainer.innerHTML = `<div class="alert alert-danger m-3">${escapeHtml(err.message || ERROR_MESSAGES.AVAILABILITY_ERROR)}</div>`;
    }
}

async function refreshMiniCart() {
    if (!bookingCartContainer) return;
    setLoadingState(bookingCartContainer, true, 'Chargement panier...');
    
    try {
        const res = await fetch('/api/panier');
        const json = validateAPIResponse(await res.json(), ['data']);
        renderMiniCart(json.data.items, false);
    } catch (e) { 
        log('error', 'Erreur refreshMiniCart', e);
        bookingCartContainer.innerHTML = `<div class="text-danger small text-center p-3">${ERROR_MESSAGES.CART_ERROR}</div>`; 
    }
}

// --- ACTIONS ---

async function addItem(item) {
    const payload = { type: item.type, id: item.id, quantite: 1 };
    let csrfToken;
    try {
        csrfToken = getCSRFToken();
    } catch (e) { return; }
    
    let url = '/api/panier/ajouter';
    if (editingGroupId) {
        url = `/api/reservation/${editingGroupId}/ajouter`;
    } else {
        payload.date = dateInput.value;
        payload.heure_debut = startTimeSelect.value;
        payload.heure_fin = endTimeSelect.value;
    }

    try {
        const res = await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'X-CSRFToken': csrfToken },
            body: JSON.stringify(payload)
        });
        
        const data = validateAPIResponse(await res.json());

        if (data.success) {
            showToast(`Ajout√© : ${item.nom}`, "success");
            loadAvailabilities();
            if (editingGroupId) loadExistingReservation(editingGroupId);
            else { refreshMiniCart(); updateCartBadge(); }
        }
    } catch (err) { 
        log('error', 'Erreur addItem', err);
        showToast(err.message || ERROR_MESSAGES.TECHNICAL_ERROR, "error"); 
    }
}

function requestRemoveItem(itemId, itemType, currentQty) {
    if (editingGroupId) {
        const itemsCount = document.querySelectorAll('#bookingCart li').length;
        if (itemsCount === 1 && currentQty <= 1) {
            pendingDelete = { id: itemId, type: itemType };
            if (lastItemModalInstance) {
                lastItemModalInstance.show();
            } else {
                if(confirm("Supprimer la r√©servation ?")) performRemoveItem(itemId, itemType);
            }
            return;
        }
    }
    performRemoveItem(itemId, itemType);
}

async function performRemoveItem(itemId, itemType) {
    let csrfToken;
    try {
        csrfToken = getCSRFToken();
    } catch (e) { return; }
    
    let url = `/api/panier/retirer/${itemId}`;
    if (editingGroupId) {
        url = `/api/reservation/${editingGroupId}/retirer/${itemId}?type=${itemType}`;
    }

    try {
        const res = await fetch(url, {
            method: 'DELETE',
            headers: { 'X-CSRFToken': csrfToken }
        });
        
        const data = await res.json(); 

        if (res.ok && data.success) {
            showToast("Retir√©", "info");
            updateCartBadge();
            
            if (editingGroupId && data.remaining_items === 0) {
                if (bookingModalInstance) bookingModalInstance.hide();
                forceCleanup();
                window.location.reload();
                return;
            }

            loadAvailabilities();
            if (editingGroupId) loadExistingReservation(editingGroupId);
            else refreshMiniCart();
        } else {
            throw new Error(data.error || ERROR_MESSAGES.TECHNICAL_ERROR);
        }
    } catch (e) { 
        log('error', 'Erreur performRemoveItem', e);
        showToast(e.message, "error");
    }
}

// --- RENDU ---

function renderAvailableItems(data) {
    let html = '<div class="list-group list-group-flush">';
    const getImg = (img) => img ? (img.startsWith('http') ? img : `/static/${img}`) : null;
    
    const renderRow = (item, type, style) => {
        const dispo = item.disponible;
        const active = dispo > 0;
        const imgUrl = getImg(item.image);
        const imgHtml = imgUrl ? `<img src="${imgUrl}" class="rounded border" style="width:40px;height:40px;object-fit:cover;" alt="${escapeHtml(item.nom)}">` : `<div class="rounded bg-light d-flex align-items-center justify-content-center" style="width:40px;height:40px;"><i class="bi bi-box text-muted"></i></div>`;

        return `
            <div class="list-group-item d-flex justify-content-between align-items-center py-2 px-0 ${style}">
                <div class="d-flex align-items-center gap-2 overflow-hidden">
                    ${imgHtml}
                    <div class="text-truncate">
                        <div class="fw-bold text-dark text-truncate" title="${escapeHtml(item.nom)}">${escapeHtml(item.nom)}</div>
                        <div class="small text-muted">${escapeHtml(item.armoire || '')}</div>
                    </div>
                </div>
                <div class="d-flex align-items-center gap-2 flex-shrink-0">
                    <span class="badge ${active ? 'bg-light text-dark border' : 'bg-danger-subtle text-danger'} rounded-pill">${dispo}</span>
                    <button type="button" class="btn btn-sm ${active ? 'btn-primary' : 'btn-secondary disabled'} btn-add-item" 
                            aria-label="Ajouter ${escapeHtml(item.nom)} au panier"
                            data-type="${type}" data-id="${item.id}" data-nom="${escapeHtml(item.nom)}" ${!active ? 'disabled' : ''}>
                        <i class="bi bi-plus-lg" aria-hidden="true"></i>
                    </button>
                </div>
            </div>`;
    };

    if (data.objets?.length) {
        html += '<h6 class="mt-3 mb-2 text-muted small fw-bold">OBJETS</h6>';
        data.objets.forEach(o => html += renderRow(o, 'objet', ''));
    }
    if (data.kits?.length) {
        html += '<h6 class="mt-3 mb-2 text-muted small fw-bold">KITS</h6>';
        data.kits.forEach(k => html += renderRow(k, 'kit', 'bg-light border-start border-3 border-info ps-2'));
    }
    
    if (!data.objets?.length && !data.kits?.length) {
        html += '<div class="text-center py-4 text-muted small">Aucun mat√©riel disponible.</div>';
    }
    
    availableItemsContainer.innerHTML = html + '</div>';
}

function renderMiniCart(items, readOnly) {
    if (!Array.isArray(items) || items.length === 0) {
        bookingCartContainer.innerHTML = '<div class="text-muted fst-italic text-center mt-3">Votre panier est vide.</div>';
        return;
    }

    let html = '<ul class="list-group list-group-flush">';
    items.forEach(item => {
        const type = item.type || 'objet'; 
        const deleteBtn = readOnly ? '' : `<button class="btn btn-link text-danger p-0 btn-remove-item" aria-label="Retirer ${escapeHtml(item.nom)}" data-id="${item.id}" data-type="${type}" data-qty="${item.quantite}"><i class="bi bi-dash-circle-fill" aria-hidden="true"></i></button>`;
        
        html += `
            <li class="list-group-item d-flex justify-content-between align-items-center px-0 py-2">
                <div class="small lh-1">
                    <div class="fw-bold text-truncate" style="max-width: 140px;">${escapeHtml(item.nom)}</div>
                    ${item.heure_debut ? `<div class="text-muted" style="font-size:0.75rem;">${item.heure_debut}-${item.heure_fin}</div>` : ''}
                </div>
                <div class="d-flex align-items-center gap-2">
                    <span class="badge bg-primary rounded-pill">x${item.quantite}</span>
                    ${deleteBtn}
                </div>
            </li>`;
    });
    bookingCartContainer.innerHTML = html + '</ul>';
}

function setupDelegatedEvents() {
    availableItemsContainer.addEventListener('click', (e) => {
        const btn = e.target.closest('.btn-add-item');
        if (!btn || btn.disabled) return;
        e.preventDefault();
        
        const original = btn.innerHTML;
        btn.innerHTML = '<span class="spinner-border spinner-border-sm"></span>';
        btn.disabled = true;

        addItem({
            type: btn.dataset.type,
            id: parseInt(btn.dataset.id, 10),
            nom: btn.dataset.nom
        }).then(() => {
            btn.innerHTML = original;
            btn.disabled = false;
        });
    });

    if (bookingCartContainer) {
        bookingCartContainer.addEventListener('click', (e) => {
            const btn = e.target.closest('.btn-remove-item');
            if (!btn) return;
            e.preventDefault();
            const itemId = parseInt(btn.dataset.id, 10);
            const itemType = btn.dataset.type;
            const currentQty = parseInt(btn.dataset.qty, 10);
            
            requestRemoveItem(itemId, itemType, currentQty);
        });
    }
}

function setSmartTime() {
    const now = new Date();
    const todayStr = now.toISOString().split('T')[0];

    if (dateInput.value === todayStr) {
        let currentHour = now.getHours();
        let targetHour = currentHour + 1;
        if (targetHour < BOOKING_CONFIG.MIN_HOUR) targetHour = BOOKING_CONFIG.MIN_HOUR;
        if (targetHour > BOOKING_CONFIG.MAX_HOUR) targetHour = BOOKING_CONFIG.MAX_HOUR;

        const startStr = `${String(targetHour).padStart(2, '0')}:00`;
        const endStr = `${String(targetHour + 1).padStart(2, '0')}:00`;

        const optionExists = [...startTimeSelect.options].some(o => o.value === startStr);
        if (optionExists) {
            startTimeSelect.value = startStr;
            endTimeSelect.value = endStr;
        }
    } else {
        startTimeSelect.value = "08:00";
        endTimeSelect.value = "09:00";
    }
}

document.addEventListener('DOMContentLoaded', initBookingModal);

==================================================
FICHIER : static\js\modules\calendar-daily.js
==================================================
import { openReservationModal } from './booking-modal.js';
import { escapeHtml } from './cart-utils.js';
import { showToast } from './toast.js';

document.addEventListener('DOMContentLoaded', function() {
    const tooltip = document.getElementById('reservation-tooltip');
    let activeTooltip = null;

    // --- GESTION DE LA MODALE DE SUPPRESSION ---
    const deleteModalEl = document.getElementById('deleteConfirmModal');
    let deleteModalInstance = null;
    let confirmDeleteBtn = null;
    let groupIdToDelete = null;

    if (deleteModalEl) {
        deleteModalInstance = new bootstrap.Modal(deleteModalEl);
        confirmDeleteBtn = document.getElementById('btnConfirmDeleteAction');
        
        if (confirmDeleteBtn) {
            confirmDeleteBtn.addEventListener('click', () => {
                if (groupIdToDelete) {
                    performDeletion(groupIdToDelete);
                }
            });
        }
    }

    // 1. GESTION DU TOOLTIP AU SURVOL
    document.querySelectorAll('.event-item').forEach(item => {
        item.addEventListener('mouseenter', async function(e) {
            const groupId = this.dataset.groupeId;
            if (!groupId) return;

            // Positionnement initial
            const rect = this.getBoundingClientRect();
            tooltip.style.left = `${rect.left + window.scrollX}px`;
            tooltip.style.top = `${rect.bottom + window.scrollY + 5}px`;
            tooltip.innerHTML = '<div class="tooltip-loading"><div class="spinner-border spinner-border-sm"></div> Chargement...</div>';
            tooltip.classList.add('visible');
            activeTooltip = groupId;

            try {
                const response = await fetch(`/api/reservation_details/${groupId}`);
                if (!response.ok) throw new Error('Erreur r√©seau');
                const details = await response.json();

                if (activeTooltip !== groupId) return;

                // --- CONSTRUCTION DU HTML ---
                
                // 1. Boutons d'action (Seulement si autoris√©)
                let buttonsHtml = '';
                if (details.can_edit) {
                    buttonsHtml = `
                        <div class="tooltip-buttons">
                            <button class="btn-edit-resa" data-groupe-id="${groupId}" data-date="${details.debut.substring(0, 10)}" title="Modifier">
                                <i class="bi bi-pencil-fill"></i>
                            </button>
                            <button class="btn-delete-resa text-danger" data-groupe-id="${groupId}" title="Supprimer">
                                <i class="bi bi-trash-fill"></i>
                            </button>
                        </div>`;
                }

                // 2. En-t√™te avec Nom et Heure
                let contentHtml = `
                    <div class="tooltip-header">
                        <div>
                            <div class="tooltip-title">
                                ${escapeHtml(details.debut.substring(11, 16))} - ${escapeHtml(details.fin.substring(11, 16))}
                            </div>
                            <div class="small text-muted">
                                <i class="bi bi-person-circle me-1"></i>${escapeHtml(details.user_name)}
                            </div>
                        </div>
                        ${buttonsHtml}
                    </div>
                    <ul class="tooltip-list">
                `;

                // 3. Liste des items
                const itemsList = details.items || details.objets || [];
                if (itemsList.length > 0) {
                    itemsList.forEach(obj => {
                        contentHtml += `<li>‚Ä¢ ${escapeHtml(String(obj.quantite))} x ${escapeHtml(obj.nom)}</li>`;
                    });
                } else {
                    contentHtml += '<li>Aucun mat√©riel</li>';
                }

                contentHtml += '</ul>';
                tooltip.innerHTML = contentHtml;

                // --- ATTACHEMENT √âV√âNEMENTS (Si boutons pr√©sents) ---
                if (details.can_edit) {
                    const editBtn = tooltip.querySelector('.btn-edit-resa');
                    if (editBtn) {
                        editBtn.addEventListener('click', function() {
                            openReservationModal(this.dataset.date, this.dataset.groupeId);
                        });
                    }

                    const deleteBtn = tooltip.querySelector('.btn-delete-resa');
                    if (deleteBtn) {
                        deleteBtn.addEventListener('click', function() {
                            groupIdToDelete = this.dataset.groupeId;
                            if (deleteModalInstance) deleteModalInstance.show();
                            else if(confirm("Supprimer ?")) performDeletion(groupIdToDelete);
                        });
                    }
                }

            } catch (error) {
                console.error(error);
                tooltip.innerHTML = '<div class="tooltip-error">Erreur de chargement</div>';
            }
        });

        item.addEventListener('mouseleave', function() {
            setTimeout(() => {
                if (!tooltip.matches(':hover')) {
                    tooltip.classList.remove('visible');
                    activeTooltip = null;
                }
            }, 100);
        });
    });

    tooltip.addEventListener('mouseleave', function() {
        tooltip.classList.remove('visible');
        activeTooltip = null;
    });

    // 2. BOUTON "NOUVELLE R√âSERVATION"
    const newResaBtn = document.getElementById('new-reservation-btn');
    if (newResaBtn) {
        newResaBtn.addEventListener('click', function() {
            const container = document.querySelector('.main-container');
            const pageDate = container ? container.dataset.date : new Date().toISOString().split('T')[0];
            openReservationModal(pageDate);
        });
    }

    // 3. FONCTION DE SUPPRESSION
    function performDeletion(groupId) {
        const csrfToken = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');
        
        if (confirmDeleteBtn) {
            confirmDeleteBtn.disabled = true;
            confirmDeleteBtn.innerHTML = '<span class="spinner-border spinner-border-sm"></span>';
        }

        fetch('/api/supprimer_reservation', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': csrfToken
            },
            body: JSON.stringify({ groupe_id: groupId })
        })
        .then(res => res.json())
        .then(data => {
            if (data.success) {
                if (deleteModalInstance) deleteModalInstance.hide();
                showToast("R√©servation supprim√©e", "success");
                setTimeout(() => window.location.reload(), 500);
            } else {
                showToast(data.error || "Erreur lors de la suppression", "error");
                resetDeleteBtn();
            }
        })
        .catch(err => {
            console.error(err);
            showToast("Erreur de communication", "error");
            resetDeleteBtn();
        });
    }

    function resetDeleteBtn() {
        if (confirmDeleteBtn) {
            confirmDeleteBtn.disabled = false;
            confirmDeleteBtn.innerHTML = '<i class="bi bi-trash-fill me-2"></i>Supprimer';
        }
    }
});

==================================================
FICHIER : static\js\modules\calendar-monthly.js
==================================================
import { openReservationModal } from './booking-modal.js';

document.addEventListener('DOMContentLoaded', () => {
    const container = document.getElementById('calendrier-container');
    if (!container) return;

    const monthYearElement = container.querySelector('#current-month-year');
    const gridElement = container.querySelector('.calendrier-grid');
    const prevBtn = container.querySelector('#prev-month-btn');
    const nextBtn = container.querySelector('#next-month-btn');

    let currentDate = new Date();
    let dayTooltip = null;

    // --- 1. API : R√©cup√©rer les chiffres du mois ---
    async function fetchReservations(year, month) {
        try {
            // month + 1 car JS est 0-index√©, Python 1-index√©
            const response = await fetch(`/api/reservations_par_mois/${year}/${month + 1}`);
            if (!response.ok) return {};
            return await response.json();
        } catch (error) {
            console.error("Erreur calendrier:", error);
            return {};
        }
    }

    // --- 2. TOOLTIP : Cr√©ation et Affichage ---
    function createDayTooltip() {
        if (!dayTooltip) {
            dayTooltip = document.createElement('div');
            dayTooltip.className = 'day-tooltip';
            dayTooltip.style.display = 'none';
            document.body.appendChild(dayTooltip);
        }
        return dayTooltip;
    }

    async function showDayTooltip(dateKey, cellElement) {
        const tooltip = createDayTooltip();
        
        // Loader
        tooltip.innerHTML = '<div class="p-2 text-center"><div class="spinner-border spinner-border-sm text-light"></div></div>';
        tooltip.style.display = 'block';
        positionTooltip(tooltip, cellElement);

        try {
            // Appel √† la route que tu as d√©j√† : /api/reservations_jour/<date>
            const response = await fetch(`/api/reservations_jour/${dateKey}`);
            if (!response.ok) throw new Error('Erreur');
            
            const data = await response.json();
            const reservations = data.reservations || [];

            if (reservations.length === 0) {
                hideDayTooltip();
                return;
            }

            // Construction du contenu
            let html = `<div class="day-tooltip-header">${reservations.length} r√©servation(s)</div>`;
            html += '<ul class="day-tooltip-list">';
            
            reservations.slice(0, 5).forEach(r => {
                html += `<li><strong>${r.nom_utilisateur}</strong> <span class="opacity-75">${r.heure_debut}-${r.heure_fin}</span></li>`;
            });
            
            if (reservations.length > 5) {
                html += `<li class="text-center fst-italic small">+ ${reservations.length - 5} autres...</li>`;
            }
            html += '</ul>';
            
            tooltip.innerHTML = html;
            positionTooltip(tooltip, cellElement); // Repositionner apr√®s chargement du contenu
        } catch (error) {
            tooltip.innerHTML = '<div class="p-2 text-danger small">Erreur chargement</div>';
        }
    }

    function positionTooltip(tooltip, cellElement) {
        const rect = cellElement.getBoundingClientRect();
        const tooltipRect = tooltip.getBoundingClientRect();
        
        // Centr√© au-dessus de la case
        let top = rect.top - tooltipRect.height - 8;
        let left = rect.left + (rect.width / 2) - (tooltipRect.width / 2);

        tooltip.style.top = `${top + window.scrollY}px`;
        tooltip.style.left = `${left + window.scrollX}px`;
    }

    function hideDayTooltip() {
        if (dayTooltip) dayTooltip.style.display = 'none';
    }

    // --- 3. RENDU DU CALENDRIER ---
    async function renderCalendar(date) {
        const year = date.getFullYear();
        const month = date.getMonth();

        monthYearElement.textContent = date.toLocaleDateString('fr-FR', { month: 'long', year: 'numeric' });
        monthYearElement.style.textTransform = 'capitalize';
        
        gridElement.innerHTML = '<div class="text-center w-100 py-5"><div class="spinner-border text-primary"></div></div>';

        const reservations = await fetchReservations(year, month);
        
        // Date du jour (sans les heures pour comparaison stricte)
        const today = new Date();
        today.setHours(0, 0, 0, 0);

        gridElement.innerHTML = '';

        // En-t√™tes
        ['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'].forEach(d => {
            gridElement.innerHTML += `<div class="cal-header">${d}</div>`;
        });

        // Cases vides
        const firstDay = new Date(year, month, 1).getDay();
        const startDay = (firstDay === 0 ? 6 : firstDay - 1);
        for (let i = 0; i < startDay; i++) {
            gridElement.innerHTML += `<div class="cal-day empty"></div>`;
        }

        // Jours
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        
        for (let day = 1; day <= daysInMonth; day++) {
            // Date de la case en cours de construction
            const currentDayDate = new Date(year, month, day);
            const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            
            const count = reservations[dateStr] || 0;
            const isToday = currentDayDate.getTime() === today.getTime();
            const isPast = currentDayDate < today; // V√©rification jour pass√©

            const cell = document.createElement('div');
            
            // Classes CSS conditionnelles
            let classes = 'cal-day';
            if (isToday) classes += ' today';
            if (isPast) classes += ' past-day'; // CSS √† ajouter pour griser
            cell.className = classes;
            
            // Badge HTML
            let badgeHtml = '';
            if (count > 0) {
                let colorClass = count > 4 ? 'bg-danger' : (count > 2 ? 'bg-warning text-dark' : 'bg-info text-dark');
                badgeHtml = `<div class="reservation-badge ${colorClass}">${count} r√©serv.</div>`;
            }

            // Bouton "+" (Uniquement si jour futur ou aujourd'hui)
            let btnHtml = '';
            if (!isPast) {
                btnHtml = `
                    <button class="btn btn-sm btn-light btn-add-fast position-absolute top-0 end-0 m-1" 
                            style="display:none; width:24px; height:24px; padding:0;"
                            title="R√©server">
                        <i class="bi bi-plus"></i>
                    </button>
                `;
            }

            cell.innerHTML = `
                <div class="day-number">${day}</div>
                <div class="day-content">${badgeHtml}</div>
                ${btnHtml}
            `;

            // √âv√©nements (Clics d√©sactiv√©s pour le pass√©, sauf pour voir le d√©tail si y'a des r√©sas)
            if (!isPast || count > 0) {
                cell.addEventListener('click', () => window.location.href = `/jour/${dateStr}`);
            } else {
                cell.style.cursor = 'default';
            }

            // Gestion du bouton "+" (Seulement si pas pass√©)
            if (!isPast) {
                const btn = cell.querySelector('.btn-add-fast');
                
                cell.addEventListener('mouseenter', () => {
                    if(btn) btn.style.display = 'flex';
                });
                cell.addEventListener('mouseleave', () => {
                    if(btn) btn.style.display = 'none';
                });

                if (btn) {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        openReservationModal(dateStr);
                    });
                }
            }

            // Tooltip au survol (Toujours actif m√™me pour le pass√© pour voir l'historique)
            if (count > 0) {
                let timer;
                cell.addEventListener('mouseenter', () => {
                    clearTimeout(timer);
                    showDayTooltip(dateStr, cell);
                });
                cell.addEventListener('mouseleave', () => {
                    timer = setTimeout(hideDayTooltip, 200);
                });
            }

            gridElement.appendChild(cell);
        }
    }

    // Navigation
    prevBtn.addEventListener('click', () => { currentDate.setMonth(currentDate.getMonth() - 1); renderCalendar(currentDate); });
    nextBtn.addEventListener('click', () => { currentDate.setMonth(currentDate.getMonth() + 1); renderCalendar(currentDate); });

    renderCalendar(currentDate);
});

==================================================
FICHIER : static\js\modules\cart-summary.js
==================================================
// static/js/modules/cart-summary.js
import { showToast } from './toast.js';
import { updateCartBadge, escapeHtml } from './cart-utils.js';

// --- GESTION MODALE ---
let cartModalInstance = null;
let pendingAction = null; // Stocke la fonction √† ex√©cuter apr√®s confirmation
const modalMessageEl = document.getElementById('cartModalMessage');

document.addEventListener('DOMContentLoaded', () => {
    // Init Modale
    const modalEl = document.getElementById('cartActionModal');
    if (modalEl) {
        cartModalInstance = new bootstrap.Modal(modalEl);
        const confirmBtn = document.getElementById('btnConfirmCartAction');
        
        // Clic sur "Confirmer" dans la modale
        if (confirmBtn) {
            confirmBtn.addEventListener('click', () => {
                if (pendingAction) pendingAction(); // Ex√©cute l'action stock√©e
                if (cartModalInstance) cartModalInstance.hide();
            });
        }
    }

    loadServerCart();
    setupGlobalActions();
});

// R√©f√©rences DOM
const container = document.getElementById('cart-items-container');
const emptyState = document.getElementById('empty-cart-message');
const actionsBar = document.getElementById('cart-actions');
const btnConfirm = document.getElementById('confirm-cart-btn');
const btnClear = document.getElementById('clear-cart-btn');

/**
 * Charge le panier depuis l'API
 */
async function loadServerCart() {
    if (!container) return;

    container.innerHTML = `
        <div class="text-center py-5">
            <div class="spinner-border text-primary" role="status"></div>
            <p class="mt-2 text-muted">Chargement de votre panier...</p>
        </div>`;

    try {
        const response = await fetch('/api/panier');
        const json = await response.json();

        if (!json.success || !json.data.items || json.data.items.length === 0) {
            showEmptyState();
            return;
        }

        renderCartItems(json.data.items);
        updateCartBadge();

    } catch (error) {
        console.error(error);
        container.innerHTML = `<div class="alert alert-danger">Impossible de charger le panier.</div>`;
    }
}

function showEmptyState() {
    if (container) container.innerHTML = '';
    if (emptyState) emptyState.style.display = 'block';
    if (actionsBar) actionsBar.style.display = 'none';
    updateCartBadge();
}

function renderCartItems(items) {
    const groups = {};
    
    items.forEach(item => {
        const key = `${item.date}_${item.heure_debut}_${item.heure_fin}`;
        if (!groups[key]) {
            groups[key] = {
                date: item.date,
                start: item.heure_debut,
                end: item.heure_fin,
                items: []
            };
        }
        groups[key].items.push(item);
    });

    let html = '';
    
    Object.values(groups).forEach(group => {
        const dateObj = new Date(group.date);
        const dateFr = dateObj.toLocaleDateString('fr-FR', { weekday: 'long', day: 'numeric', month: 'long' });

        html += `
            <div class="card mb-3 border-0 shadow-sm overflow-hidden">
                <div class="card-header bg-light d-flex justify-content-between align-items-center py-3">
                    <div>
                        <strong class="text-primary text-capitalize"><i class="bi bi-calendar-event me-2"></i>${dateFr}</strong>
                        <span class="mx-2 text-muted">|</span>
                        <span class="fw-bold text-dark">${group.start} - ${group.end}</span>
                    </div>
                </div>
                <div class="card-body p-0">
                    <ul class="list-group list-group-flush">
        `;

        group.items.forEach(item => {
            const badge = item.type === 'kit' 
                ? '<span class="badge bg-info text-dark me-2">KIT</span>' 
                : '<span class="badge bg-secondary me-2">OBJET</span>';

            html += `
                <li class="list-group-item d-flex justify-content-between align-items-center py-3">
                    <div class="d-flex align-items-center">
                        ${badge}
                        <span class="fw-medium">${escapeHtml(item.nom)}</span>
                    </div>
                    <div class="d-flex align-items-center gap-3">
                        <span class="fw-bold fs-5">x${item.quantite}</span>
                        <button class="btn btn-sm btn-outline-danger border-0 btn-delete-item" 
                                data-id="${item.id}" 
                                title="Retirer">
                            <i class="bi bi-trash-fill"></i>
                        </button>
                    </div>
                </li>
            `;
        });

        html += `</ul></div></div>`;
    });

    container.innerHTML = html;
    
    if (emptyState) emptyState.style.display = 'none';
    if (actionsBar) actionsBar.style.display = 'flex';

    // Events Suppression Item
    document.querySelectorAll('.btn-delete-item').forEach(btn => {
        btn.addEventListener('click', (e) => {
            const itemId = e.currentTarget.dataset.id;
            askConfirmation("Retirer cet √©l√©ment du panier ?", () => deleteItem(itemId));
        });
    });
}

/**
 * Ouvre la modale de confirmation
 */
function askConfirmation(message, actionCallback) {
    if (cartModalInstance) {
        if (modalMessageEl) modalMessageEl.textContent = message;
        pendingAction = actionCallback;
        cartModalInstance.show();
    } else {
        // Fallback si modale pas trouv√©e (ne devrait pas arriver)
        if (confirm(message)) actionCallback();
    }
}

async function deleteItem(itemId) {
    const csrfToken = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');

    try {
        const res = await fetch(`/api/panier/retirer/${itemId}`, {
            method: 'DELETE',
            headers: { 'X-CSRFToken': csrfToken }
        });

        if (res.ok) {
            showToast("√âl√©ment retir√©", "info");
            loadServerCart();
        } else {
            showToast("Erreur lors de la suppression", "error");
        }
    } catch (err) {
        console.error(err);
        showToast("Erreur technique", "error");
    }
}

function setupGlobalActions() {
    // 1. Vider le panier
    if (btnClear) {
        btnClear.addEventListener('click', () => {
            askConfirmation("Voulez-vous vraiment vider tout votre panier ?", async () => {
                const csrfToken = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');
                try {
                    const res = await fetch('/api/panier', {
                        method: 'DELETE',
                        headers: { 'X-CSRFToken': csrfToken }
                    });
                    if (res.ok) {
                        showToast("Panier vid√©", "info");
                        showEmptyState();
                    }
                } catch (err) {
                    showToast("Erreur technique", "error");
                }
            });
        });
    }

    // 2. Valider (Checkout)
    if (btnConfirm) {
        btnConfirm.addEventListener('click', async () => {
            const originalText = btnConfirm.innerHTML;
            btnConfirm.disabled = true;
            btnConfirm.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Validation...';

            const csrfToken = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');

            try {
                const res = await fetch('/api/panier/checkout', {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'X-CSRFToken': csrfToken 
                    }
                });

                const json = await res.json();

                if (res.ok && json.success) {
                    const count = json.data.reservations_count;
                    const accord = count > 1 ? "s" : "";
                    
                    showToast(`Succ√®s ! ${count} r√©servation${accord} cr√©√©e${accord}.`, "success");
                    setTimeout(() => {
                        window.location.href = '/calendrier';
                    }, 1500);
                } else {
                    showToast(json.error || "Erreur lors de la validation", "error");
                    btnConfirm.disabled = false;
                    btnConfirm.innerHTML = originalText;
                    loadServerCart();
                }
            } catch (err) {
                console.error(err);
                showToast("Erreur technique critique", "error");
                btnConfirm.disabled = false;
                btnConfirm.innerHTML = originalText;
            }
        });
    }
}

==================================================
FICHIER : static\js\modules\cart-utils.js
==================================================
// static/js/modules/cart-utils.js

// Protection XSS simple
export function escapeHtml(text) {
    if (text === null || text === undefined) return '';
    return String(text)
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
}

/**
 * Met √† jour le badge du panier en interrogeant le serveur.
 * √Ä appeler apr√®s chaque ajout/suppression.
 */
export async function updateCartBadge() {
    const badge = document.getElementById('cart-count-badge');
	badge.classList.add('pulse-ring');
    if (!badge) return;

    try {
        const response = await fetch('/api/panier');
        if (response.ok) {
            const json = await response.json();
            const count = json.data.total || 0;

            // 1. Mise √† jour du texte
            badge.textContent = count > 99 ? '99+' : count;
            
            // 2. Gestion de la visibilit√© (C'est ici que √ßa se joue)
            if (count > 0) {
                // S'il y a des articles, on affiche la pastille
                badge.style.display = 'flex';
                
                // Petite animation "Pulse" pour attirer l'attention lors d'un ajout
                badge.classList.remove('pulse'); // Reset pour rejouer l'anim
                void badge.offsetWidth; // Force le reflow (hack CSS)
                badge.classList.add('pulse');
            } else {
                // Si 0, on cache compl√®tement la pastille
                badge.style.display = 'none';
            }
        }
    } catch (error) {
        console.error("Erreur synchro badge panier:", error);
    }
}

// Auto-update au chargement de la page si le script est import√©
document.addEventListener('DOMContentLoaded', updateCartBadge);

==================================================
FICHIER : static\js\modules\import_feedback.js
==================================================
document.addEventListener('DOMContentLoaded', function() {
    // On s√©lectionne les √©l√©ments HTML dont on a besoin
    const fileInput = document.getElementById('fichier_excel');
    const dropZone = document.getElementById('drop-zone');
    
    // On v√©rifie que les √©l√©ments existent avant de continuer
    if (!fileInput || !dropZone) {
        return; 
    }

    const fileMsg = dropZone.querySelector('.file-msg');
    const originalMsg = fileMsg.innerHTML;

    // On √©coute l'√©v√©nement 'change' sur le champ de fichier
    fileInput.addEventListener('change', function() {
        if (this.files && this.files.length > 0) {
            // Si un fichier est s√©lectionn√©, on met √† jour le message et le style
            fileMsg.innerHTML = `Fichier s√©lectionn√© : <strong>${this.files[0].name}</strong>`;
            dropZone.classList.add('file-selected');
        } else {
            // Si la s√©lection est annul√©e, on revient √† l'√©tat initial
            fileMsg.innerHTML = originalMsg;
            dropZone.classList.remove('file-selected');
        }
    });
});

==================================================
FICHIER : static\js\modules\toast.js
==================================================
/**
 * Affiche une notification (toast) Bootstrap 5.
 * Cr√©e dynamiquement le conteneur de toasts s'il n'existe pas.
 * @param {string} message Le message √† afficher.
 * @param {string} type Le type de toast ('success', 'danger', 'warning', 'info'). Par d√©faut 'info'.
 */
export function showToast(message, type = 'info') {
    // Cr√©e le conteneur de toasts s'il n'est pas d√©j√† dans la page
    let toastContainer = document.getElementById('toast-container');
    if (!toastContainer) {
        toastContainer = document.createElement('div');
        toastContainer.id = 'toast-container';
        // CORRECTION : "end-0" a √©t√© remplac√© par "start-0" pour positionner √† gauche.
        toastContainer.className = 'toast-container position-fixed top-0 start-0 p-3';
        toastContainer.style.zIndex = 1090; // S'assurer qu'il est au-dessus des modales
        document.body.appendChild(toastContainer);
    }

    // D√©termine la couleur du toast en fonction du type
    const toastClassMap = {
        success: 'text-bg-success',
        danger: 'text-bg-danger',
        warning: 'text-bg-warning',
        info: 'text-bg-info',
    };
    // Pour le message de d√©connexion, on utilise le bleu principal
    if (type === 'logout') {
        toastClassMap.logout = 'text-bg-primary';
    }
    const toastClass = toastClassMap[type] || 'text-bg-secondary';

    // Cr√©e l'√©l√©ment toast
    const toastElement = document.createElement('div');
    toastElement.className = `toast align-items-center ${toastClass} border-0`;
    toastElement.setAttribute('role', 'alert');
    toastElement.setAttribute('aria-live', 'assertive');
    toastElement.setAttribute('aria-atomic', 'true');

    toastElement.innerHTML = `
        <div class="d-flex">
            <div class="toast-body">
                ${message}
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    `;

    // Ajoute le toast au conteneur et l'affiche
    toastContainer.appendChild(toastElement);

    const toast = new bootstrap.Toast(toastElement, {
        delay: 2000 // Dispara√Æt apr√®s 3 secondes
    });

    // Supprime l'√©l√©ment du DOM apr√®s sa disparition pour garder la page propre
    toastElement.addEventListener('hidden.bs.toast', () => {
        toastElement.remove();
    });

    toast.show();
}

==================================================
FICHIER : static\js\modules\tour.js
==================================================
// static/js/modules/tour.js

// =================================================================
// CONFIGURATION DES √âTAPES
// =================================================================
const steps = [
    {
        element: null,
        title: "Bienvenue sur LabFlow ! üëã",
        content: "Prenons une minute pour d√©couvrir votre nouvel outil de gestion de laboratoire. C'est parti !"
    },
    {
        element: "#search-wrapper-dropdown",
        title: "Recherche Intelligente üîç",
        content: "Tapez le nom d'un objet ici pour le trouver instantan√©ment, o√π que vous soyez dans l'application."
    },
    {
        element: "a[href*='/panier']",
        title: "Votre Panier üõí",
        content: "C'est ici que vous retrouverez vos r√©servations en cours. La pastille rouge vous indique le nombre d'objets."
    },
    {
        element: "a[href*='/alertes']",
        title: "Centre d'Alertes üîî",
        content: "Produits p√©rim√©s, stock critique ou suggestions de commande : tout ce qui demande votre attention est ici."
    },
    {
        element: ".dashboard-container .row.g-4",
        title: "Tableau de Bord üìä",
        content: "Une vue d'ensemble compl√®te : suggestions, budget, alertes et vos r√©servations √† venir."
    },
    {
        element: ".footer-nav",
        title: "Besoin d'aide ? üÜò",
        content: "Retrouvez la documentation, le support technique et les mentions l√©gales tout en bas de chaque page."
    }
];

// =================================================================
// VARIABLES D'√âTAT
// =================================================================
let currentStep = 0;
const overlay = document.getElementById('tour-overlay');
const tooltip = document.getElementById('tour-tooltip');
const titleEl = document.getElementById('tour-title');
const contentEl = document.getElementById('tour-content');
const nextBtn = document.getElementById('tour-next-btn');
const skipBtn = document.getElementById('tour-skip-btn');

// =================================================================
// FONCTION PRINCIPALE (EXPORT√âE)
// =================================================================
export function startTour(force = false) {
    if (!overlay || !tooltip) {
        console.warn("√âl√©ments du tour introuvables.");
        return;
    }

    if (!force && localStorage.getItem('labflow_tour_seen') === 'true') {
        return;
    }
    
    currentStep = 0;
    
    nextBtn.onclick = nextStep;
    skipBtn.onclick = endTour;
    
    overlay.classList.add('active');
    showStep();
}

// =================================================================
// LOGIQUE INTERNE
// =================================================================
function showStep() {
    const step = steps[currentStep];
    
    // Nettoyage
    document.querySelectorAll('.tour-highlight').forEach(el => el.classList.remove('tour-highlight'));
    
    // Contenu
    titleEl.textContent = step.title;
    contentEl.textContent = step.content;
    nextBtn.textContent = (currentStep === steps.length - 1) ? "C'est fini !" : "Suivant";

    // Positionnement
    if (step.element) {
        const target = document.querySelector(step.element);
        
        if (target) {
            target.classList.add('tour-highlight');
            
            // Scroll doux et centr√©
            target.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            // Calculs de position
            const rect = target.getBoundingClientRect();
            const tooltipRect = tooltip.getBoundingClientRect();
            
            // Position par d√©faut : En dessous, centr√© horizontalement
            let top = rect.bottom + 15;
            let left = rect.left + (rect.width / 2) - (tooltipRect.width / 2);
            
            // --- CORRECTION INTELLIGENTE DES D√âBORDEMENTS ---
            
            // 1. Si √ßa d√©passe en bas de l'√©cran -> On met au-dessus
            if (top + tooltipRect.height > window.innerHeight) {
                top = rect.top - tooltipRect.height - 15;
            }

            // 2. Si √ßa d√©passe en haut de l'√©cran (ex: Tableau de bord trop haut) -> On force en dessous
            // (On ajoute window.scrollY pour avoir la position absolue dans la page)
            const absoluteTop = top + window.scrollY;
            const navbarHeight = 80; // Marge de s√©curit√© pour le header fixe

            if (top < navbarHeight) {
                // Si le calcul "au-dessus" fait sortir la bulle en haut, on la remet en dessous
                // ou on la centre sur l'√©cran si l'√©l√©ment est g√©ant
                if (rect.height > window.innerHeight / 2) {
                    // Cas du grand tableau de bord : On centre la bulle sur l'√©cran
                    top = (window.innerHeight / 2) - (tooltipRect.height / 2);
                    tooltip.style.position = 'fixed'; // On fixe pour ce cas
                } else {
                    top = rect.bottom + 15;
                    tooltip.style.position = 'absolute';
                }
            } else {
                tooltip.style.position = 'absolute';
            }

            // 3. Si √ßa d√©passe √† gauche ou √† droite
            if (left < 10) left = 10;
            if (left + tooltipRect.width > window.innerWidth) {
                left = window.innerWidth - tooltipRect.width - 10;
            }

            // Application
            // Si position est fixed (cas sp√©cial), on n'ajoute pas scrollY
            if (tooltip.style.position === 'fixed') {
                tooltip.style.top = `${top}px`;
            } else {
                tooltip.style.top = `${top + window.scrollY}px`;
            }
            
            tooltip.style.left = `${left + window.scrollX}px`;
            tooltip.style.transform = 'none';
            
        } else {
            nextStep();
            return;
        }
    } else {
        // √âtape centr√©e (Bienvenue)
        tooltip.style.position = 'fixed';
        tooltip.style.top = '50%';
        tooltip.style.left = '50%';
        tooltip.style.transform = 'translate(-50%, -50%)';
    }

    tooltip.classList.add('active');
}

function nextStep() {
    currentStep++;
    if (currentStep >= steps.length) {
        endTour();
    } else {
        showStep();
    }
}

function endTour() {
    overlay.classList.remove('active');
    tooltip.classList.remove('active');
    document.querySelectorAll('.tour-highlight').forEach(el => el.classList.remove('tour-highlight'));
    
    localStorage.setItem('labflow_tour_seen', 'true');

    // --- CORRECTION : REMONTER EN HAUT DE PAGE ---
    window.scrollTo({
        top: 0,
        behavior: 'smooth'
    });
}

==================================================
FICHIER : templates\admin.html
==================================================
{% extends "base.html" %}
{% block title %}Panneau d'Administration - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    {% include '_breadcrumb.html' %}
    
    <!-- En-t√™te principal -->
    <div class="admin-hero">
        <div class="admin-hero-content">
            <div class="admin-hero-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="48px">
                    <path d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Z"/>
                </svg>
            </div>
            <div>
                <h1 class="admin-hero-title">Panneau d'Administration</h1>
                <p class="admin-hero-subtitle">G√©rez et configurez votre application LabFlow</p>
            </div>
        </div>
		
		<!-- Code d'invitation de l'√©tablissement -->
		<div class="alert alert-info shadow-sm">
			<div class="d-flex align-items-center mb-2">
				<i class="bi bi-ticket-perforated-fill fs-4 me-2"></i>
				<h5 class="mb-0">Code d'invitation de votre √©tablissement</h5>
			</div>
			<p class="mb-2">Partagez ce code avec vos coll√®gues pour qu'ils rejoignent <strong>{{ session.nom_etablissement }}</strong> :</p>
			<div class="input-group">
				<input type="text" 
					   class="form-control form-control-lg text-center fw-bold" 
					   id="codeInvitation"
					   value="{{ etablissement.code_invitation }}" 
					   readonly
					   style="font-family: monospace; font-size: 1.75rem; letter-spacing: 0.1em; background: #f8f9fa;">
				<button class="btn btn-primary btn-lg" onclick="copierCode()" type="button">
					<i class="bi bi-clipboard me-1"></i> Copier
				</button>
			</div>
			<small class="text-muted d-block mt-2">
				<i class="bi bi-info-circle me-1"></i>
				Ce code permet √† quiconque le poss√®de de cr√©er un compte dans votre √©tablissement
			</small>
		</div>

		<script>
		function copierCode() {
			const input = document.getElementById('codeInvitation');
			input.select();
			navigator.clipboard.writeText(input.value).then(() => {
				const btn = event.target.closest('button');
				const originalHTML = btn.innerHTML;
				btn.innerHTML = '<i class="bi bi-check-circle-fill me-1"></i> Copi√© !';
				btn.classList.remove('btn-primary');
				btn.classList.add('btn-success');
				setTimeout(() => {
					btn.innerHTML = originalHTML;
					btn.classList.remove('btn-success');
					btn.classList.add('btn-primary');
				}, 2000);
			});
		}
		</script>
        
        <!-- Statut de la licence -->
        <div class="license-status {{ 'license-pro' if licence.is_pro else 'license-free' }}">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="20px">
                <path d="m354-287 126-76 126 77-33-144 111-96-146-13-58-136-58 135-146 13 111 97-33 143ZM233-120l65-281L80-590l288-25 112-265 112 265 288 25-218 189 65 281-247-149-247 149Zm247-350Z"/>
            </svg>
            <span>{{ 'Version Pro' if licence.is_pro else 'Version Gratuite' }}</span>
        </div>
    </div>

    <!-- Info box -->
    <div class="admin-info-banner">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="24px">
            <path d="M480-680q-33 0-56.5-23.5T400-760q0-33 23.5-56.5T480-840q33 0 56.5 23.5T560-760q0 33-23.5 56.5T480-680Zm-60 560v-480h120v480H420Z"/>
        </svg>
        <p>Cette section vous permet d'effectuer des op√©rations de maintenance et de gestion sur l'ensemble de l'application.</p>
    </div>

    <!-- SECTION : Gestion Quotidienne -->
    <div class="admin-category">
        <div class="category-header">
            <h2 class="category-title">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="28px">
                    <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h168q13-36 43.5-58t68.5-22q38 0 68.5 22t43.5 58h168q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm280-670q13 0 21.5-8.5T510-820q0-13-8.5-21.5T480-850q-13 0-21.5 8.5T450-820q0 13 8.5 21.5T480-790Z"/>
                </svg>
                Gestion Quotidienne
            </h2>
            <p class="category-description">Outils essentiels pour la gestion journali√®re de votre laboratoire</p>
        </div>

        <div class="admin-grid">
            <!-- Carte Utilisateurs -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-blue">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M40-160v-112q0-34 17.5-62.5T104-378q62-31 126-46.5T360-440q66 0 130 15.5T616-378q29 15 46.5 43.5T680-272v112H40Zm720 0v-120q0-44-24.5-84.5T666-434q51 6 96 20.5t84 35.5q36 20 55 44.5t19 53.5v120H760ZM360-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm400-160q0 66-47 113t-113 47q-11 0-28-2.5t-28-5.5q27-32 41.5-71t14.5-81q0-42-14.5-81T544-792q14-5 28-6.5t28-1.5q66 0 113 47t47 113Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Gestion des Utilisateurs</h3>
                <p class="card-description">Ajoutez, supprimez ou modifiez les comptes utilisateurs et leurs permissions</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.gestion_utilisateurs') }}" class="btn-card btn-primary">
                        G√©rer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- NOUVEAU : Carte S√©curit√© & Maintenance -->
            <div class="admin-card">
                <div class="card-icon-wrapper" style="background: linear-gradient(135deg, #20c997 0%, #0dcaf0 100%);">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="white" class="bi bi-shield-check" viewBox="0 0 16 16">
                        <path d="M5.338 1.59a61.44 61.44 0 0 0-2.837.856.481.481 0 0 0-.328.39c-.554 4.157.726 7.19 2.253 9.188a10.725 10.725 0 0 0 2.287 2.233c.346.244.652.42.893.533.12.057.218.095.293.118a.55.55 0 0 0 .101.025.615.615 0 0 0 .1-.025c.076-.023.174-.061.294-.118.24-.113.547-.29.893-.533a10.726 10.726 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067c-.53 0-1.552.223-2.662.524zM5.072.56C6.118.265 7.31 0 8 0s1.882.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.775 11.775 0 0 1-2.517 2.453 7.159 7.159 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7.158 7.158 0 0 1-1.048-.625 11.777 11.777 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 62.456 62.456 0 0 1 5.072.56z"/>
                        <path d="M10.854 5.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 7.793l2.646-2.647a.5.5 0 0 1 .708 0z"/>
                    </svg>
                </div>
                <h3 class="card-title">S√©curit√© & Maintenance</h3>
                
                {% if securite_stats %}
                    <!-- Vue R√©sum√© Dynamique -->
                    <div class="mt-3 mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span class="text-muted small">√âquipements suivis</span>
                            <span class="fw-bold">{{ securite_stats.total_equipements }}</span>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span class="text-muted small">Alertes en cours</span>
                            {% if securite_stats.alertes > 0 %}
                                <span class="badge bg-danger rounded-pill">{{ securite_stats.alertes }}</span>
                            {% else %}
                                <span class="badge bg-success rounded-pill">0</span>
                            {% endif %}
                        </div>
                        <div class="progress" style="height: 6px;">
                            <div class="progress-bar bg-success" role="progressbar" style="width: {{ securite_stats.taux_conformite }}%"></div>
                        </div>
                        <div class="text-end small text-muted mt-1">{{ securite_stats.taux_conformite }}% Conforme</div>
                    </div>
                {% else %}
                    <!-- Vue Description Standard -->
                    <p class="card-description">G√©rez vos √©quipements de s√©curit√© (hottes, extincteurs) et leur maintenance r√©glementaire.</p>
                {% endif %}

                <div class="card-footer">
                    <a href="{{ url_for('securite.index') }}" class="btn-card btn-primary">
                        G√©rer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte Kits -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-purple">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M80-160v-400q0-33 23.5-56.5T160-640h120v-80q0-33 23.5-56.5T360-800h240q33 0 56.5 23.5T680-720v80h120q33 0 56.5 23.5T880-560v400H80Zm240-480h320v-80H320v80Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Gestion des Kits</h3>
                <p class="card-description">Cr√©ez et configurez des kits de mat√©riel pr√©d√©finis pour faciliter les r√©servations</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.gestion_kits') }}" class="btn-card btn-primary">
                        G√©rer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte √âch√©ances -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-orange">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="28" height="28" fill="currentColor">
						<path d="M9.05.435c-.58-.58-1.52-.58-2.1 0L.436 6.95c-.58.58-.58 1.519 0 2.098l6.516 6.516c.58.58 1.519.58 2.098 0l6.516-6.516c.58-.58.58-1.519 0-2.098zM8 4c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995A.905.905 0 0 1 8 4m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
					</svg>
                </div>
                <h3 class="card-title">Gestion des √âch√©ances</h3>
                <p class="card-description">D√©finissez et suivez les dates importantes : maintenances, contrats, commandes</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.gestion_echeances') }}" class="btn-card btn-primary">
                        G√©rer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte Budget -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-green">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M600-120q-118 0-210-67T260-360H120v-80h122q-2-11-2-20v-40q0-9 2-20H120v-80h140q38-106 130-173t210-67q69 0 130.5 24T840-748l-70 70q-35-29-78.5-45.5T600-740q-75 0-136.5 38.5T370-600h230v80H344q-2 11-3 20t-1 20q0 11 1 20t3 20h256v80H370q32 63 93.5 101.5T600-220q48 0 92.5-16.5T770-282l70 70q-48 44-109.5 68T600-120Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Gestion Budg√©taire</h3>
                <p class="card-description">Suivez votre budget annuel, enregistrez vos d√©penses et exportez des rapports</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.budget') }}" class="btn-card btn-primary">
                        Acc√©der
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte Fournisseurs -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-teal">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M280-160q-50 0-85-35t-35-85H60l18-80h113q17-19 40-29.5t49-10.5q26 0 49 10.5t40 29.5h167l84-360H182l4-17q6-28 27.5-45.5T264-800h456l-37 160h117l120 160-40 200h-80q0 50-35 85t-85 35q-50 0-85-35t-35-85H400q0 50-35 85t-85 35Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Gestion des Fournisseurs</h3>
                <p class="card-description">Consultez, ajoutez ou supprimez les fiches des fournisseurs r√©f√©renc√©s</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.gestion_fournisseurs') }}" class="btn-card btn-primary">
                        G√©rer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- SECTION : Analyse et Exports -->
    <div class="admin-category">
        <div class="category-header">
            <h2 class="category-title">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="28px">
                    <path d="m105-399-65-47 200-320 120 140 160-260 120 180 135-214 65 47-198 314-119-179-152 247-121-141-145 233Z"/>
                </svg>
                Analyse et Exports
            </h2>
            <p class="category-description">Outils d'analyse et d'export pour vos donn√©es</p>
        </div>

        <div class="admin-grid">
            <!-- Carte Import -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-indigo">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M240-160q-33 0-56.5-23.5T160-240v-480q0-33 23.5-56.5T240-800h360l160 160v400q0 33-23.5 56.5T720-160H240Zm0-80h480v-360H560v-120H240v480Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Importation en Masse</h3>
                <p class="card-description">Ajoutez plusieurs objets √† votre inventaire en une seule fois via Excel</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.importer_page') }}" class="btn-card btn-primary">
                        Importer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte Rapports -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-pink">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="m105-399-65-47 200-320 120 140 160-260 120 180 135-214 65 47-198 314-119-179-152 247-121-141-145 233Zm475 159q42 0 71-29t29-71q0-42-29-71t-71-29q-42 0-71 29t-29 71q0 42 29 71t71 29Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Rapports d'Activit√©</h3>
                <p class="card-description">G√©n√©rez des rapports d√©taill√©s sur l'utilisation du mat√©riel et les r√©servations</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.rapports') }}" class="btn-card btn-primary">
                        G√©n√©rer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte Export Inventaire -->
            <div class="admin-card card-wide">
                <div class="card-icon-wrapper card-icon-cyan">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h160v-40h240v40h160q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Exporter l'Inventaire Complet</h3>
                <p class="card-description">Obtenez une liste compl√®te de tous les objets avec leur stock disponible actuel</p>
                <div class="card-footer card-footer-multiple">
                    <a href="{{ url_for('admin.exporter_inventaire', format='pdf') }}" class="btn-card btn-secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M320-240h320v-80H320v80Zm0-160h320v-80H320v80ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Z"/>
                        </svg>
                        Export PDF
                    </a>
                    <a href="{{ url_for('admin.exporter_inventaire', format='excel') }}" class="btn-card btn-secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M240-160q-33 0-56.5-23.5T160-240v-480q0-33 23.5-56.5T240-800h360l160 160v400q0 33-23.5 56.5T720-160H240Z"/>
                        </svg>
                        Export Excel
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- SECTION : Administration du Syst√®me -->
    <div class="admin-category">
        <div class="category-header">
            <h2 class="category-title">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="28px">
                    <path d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Z"/>
                </svg>
                Administration du Syst√®me
            </h2>
            <p class="category-description">Configuration avanc√©e et maintenance de l'application</p>
        </div>

        <div class="admin-grid">
            <!-- Carte Base de Donn√©es -->
            <div class="admin-card">
                <div class="card-icon-wrapper" style="background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="32" height="32" fill="white">
                        <path d="M8.5 1.5A1.5 1.5 0 0 1 10 0h4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h6c-.314.418-.5.937-.5 1.5v7.793L4.854 6.646a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0l3.5-3.5a.5.5 0 0 0-.708-.708L8.5 9.293z"/>
                    </svg>
                </div>
                <h3 class="card-title">Sauvegardes & Restauration</h3>
                <p class="card-description">G√©rez vos points de restauration, exportez vos donn√©es JSON et restaurez l'√©tat du laboratoire.</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.gestion_sauvegardes') }}" class="btn-card btn-primary">
                        Acc√©der au gestionnaire
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

{% include '_modale_warning.html' %}
{% include '_modals.html' %}
{% endblock %}

==================================================
FICHIER : templates\admin_backup.html
==================================================
{% extends "base.html" %}

{% block title %}Sauvegardes - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    
    <!-- 1. Fil d'ariane Premium -->
    {% include '_breadcrumb.html' %}

    <!-- 2. En-t√™te avec Ic√¥ne Rouge -->
    <div class="d-flex justify-content-between align-items-center mb-5 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <!-- Fond Rouge -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);">
                <i class="bi bi-hdd-network fs-4"></i>
            </div>
            <span class="fw-bold">Gestion des Sauvegardes</span>
        </h2>
    </div>

    <!-- Zone 1 : Cr√©er une sauvegarde -->
    <div class="card border-0 shadow-sm rounded-3 mb-4">
        <div class="card-body p-4">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h4 class="fw-bold text-primary mb-2">
                        <i class="bi bi-cloud-download me-2"></i>Exportation des donn√©es
                    </h4>
                    <p class="text-muted mb-0">
                        G√©n√©rez un fichier de sauvegarde complet (JSON) contenant tout votre inventaire, vos utilisateurs, vos budgets et votre historique.
                        <br>
                        <small class="text-info"><i class="bi bi-info-circle"></i> Ce fichier pourra √™tre utilis√© pour restaurer votre laboratoire en cas de probl√®me.</small>
                    </p>
                </div>
                <div class="col-md-4 text-end">
                    <a href="{{ url_for('admin.telecharger_db') }}" class="btn btn-primary btn-lg shadow-sm">
                        <i class="bi bi-download me-2"></i>T√©l√©charger une sauvegarde
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Zone 2 : Restauration -->
    <div class="card border-0 shadow-sm rounded-3 border-start border-warning border-5">
        <div class="card-body p-4">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h4 class="fw-bold text-dark mb-2">
                        <i class="bi bi-arrow-counterclockwise me-2 text-warning"></i>Restauration
                    </h4>
                    <p class="text-muted mb-0">
                        Restaurez les donn√©es de votre √©tablissement √† partir d'un fichier de sauvegarde pr√©c√©dent.
                        <br>
                        <strong class="text-danger">Attention : Cette action remplacera toutes les donn√©es actuelles.</strong>
                    </p>
                </div>
                <div class="col-md-4 text-end">
                    <button class="btn btn-outline-warning text-dark fw-bold" data-bs-toggle="modal" data-bs-target="#restoreModal">
                        <i class="bi bi-upload me-2"></i>Importer une sauvegarde
                    </button>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- Modale de Restauration S√©curis√©e -->
<div class="modal fade" id="restoreModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-danger">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title"><i class="bi bi-exclamation-triangle-fill me-2"></i>Restauration Critique</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form action="{{ url_for('admin.importer_db') }}" method="post" enctype="multipart/form-data">
                <div class="modal-body p-4">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    
                    <div class="alert alert-warning shadow-sm">
                        <strong><i class="bi bi-cone-striped me-2"></i>Action Irr√©versible</strong>
                        <p class="mb-0 small mt-1">
                            Vous √™tes sur le point d'√©craser la base de donn√©es actuelle avec le contenu du fichier. 
                            Les donn√©es non sauvegard√©es seront perdues.
                        </p>
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">Fichier de sauvegarde (.json)</label>
                        <input type="file" name="fichier" class="form-control" accept=".json" required>
                    </div>

                    <hr>

                    <div class="mb-3">
                        <label class="form-label text-muted small">S√©curit√© : Tapez <strong>RESTAURER</strong> pour confirmer.</label>
                        <input type="text" id="confirm-restore-input" class="form-control border-danger text-danger fw-bold" placeholder="RESTAURER" autocomplete="off">
                    </div>
                </div>
                <div class="modal-footer bg-light">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" id="btn-confirm-restore" class="btn btn-danger" disabled>
                        <i class="bi bi-check-circle me-2"></i>Lancer la restauration
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    // S√©curit√© pour le bouton restaurer
    document.getElementById('confirm-restore-input').addEventListener('input', function() {
        const btn = document.getElementById('btn-confirm-restore');
        if (this.value === 'RESTAURER') {
            btn.disabled = false;
        } else {
            btn.disabled = true;
        }
    });
</script>
{% endblock %}

==================================================
FICHIER : templates\admin_echeances.html
==================================================
{% extends "base.html" %}

{% block title %}Gestion des √âch√©ances - LabFlow{% endblock %}

{% block content %}
*
<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <!-- Ic√¥ne Orange (Harmonis√©e avec Dashboard) -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #ff9a56 0%, #ff6a88 100%);">
                <!-- SVG Losange Alerte -->
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="28" height="28" fill="currentColor">
                    <path d="M9.05.435c-.58-.58-1.52-.58-2.1 0L.436 6.95c-.58.58-.58 1.519 0 2.098l6.516 6.516c.58.58 1.519.58 2.098 0l6.516-6.516c.58-.58.58-1.519 0-2.098zM8 4c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995A.905.905 0 0 1 8 4m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                </svg>
            </div>
            <span class="fw-bold">Gestion des √âch√©ances</span>
        </h2>
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#echeanceModal" onclick="resetModal()">
            <i class="bi bi-plus-lg me-2"></i> Ajouter une √©ch√©ance
        </button>
    </div>

    <!-- Tableau -->
    <div class="card border-0 shadow-sm rounded-3 overflow-hidden">
        <div class="table-responsive">
            <table class="echeance-table mb-0">
                <thead>
                    <tr>
                        <th style="width: 150px;">Date</th>
                        <th>Intitul√©</th>
                        <th>D√©tails</th>
                        <th style="width: 140px;">Statut</th>
                        <th class="text-end" style="width: 100px;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% if echeances %}
                        {% for echeance in echeances %}
                            <!-- Calcul du statut pour le style -->
                            {% set is_late = (not echeance.traite and echeance.date_echeance < date_actuelle) %}
                            {% set is_soon = (not echeance.traite and (echeance.date_echeance - date_actuelle).days < 30 and not is_late) %}
                            
                            <tr class="{{ 'row-done' if echeance.traite else '' }}">
                                <td>
                                    <div class="d-flex align-items-center gap-2">
                                        <i class="bi bi-calendar3 text-muted"></i>
                                        <span class="fw-medium">{{ echeance.date_echeance.strftime('%d/%m/%Y') }}</span>
                                    </div>
                                </td>
                                <td>
                                    <strong class="d-block text-dark">{{ echeance.intitule }}</strong>
                                </td>
                                <td class="text-muted small">
                                    {{ echeance.details or '-' }}
                                </td>
                                <td>
                                    {% if echeance.traite %}
                                        <span class="status-badge status-done"><i class="bi bi-check-circle-fill"></i> Trait√©</span>
                                    {% elif is_late %}
                                        <span class="status-badge status-danger"><i class="bi bi-exclamation-triangle-fill"></i> Retard</span>
                                    {% elif is_soon %}
                                        <span class="status-badge status-warning"><i class="bi bi-clock-history"></i> Bient√¥t</span>
                                    {% else %}
                                        <span class="status-badge status-ok"><i class="bi bi-hourglass-split"></i> En cours</span>
                                    {% endif %}
                                </td>
                                <td>
                                    <!-- Wrapper Flexbox pour aligner les boutons -->
                                    <div class="actions-wrapper">
                                        <!-- Modifier -->
                                        <button class="btn btn-sm btn-outline-primary btn-icon-only" 
                                                title="Modifier"
                                                onclick='openEditModal({{ echeance.id }}, "{{ echeance.intitule|replace('"', '&quot;') }}", "{{ echeance.date_echeance.strftime('%Y-%m-%d') }}", "{{ (echeance.details or "")|replace('"', '&quot;')|replace('\n', ' ')|replace('\r', '') }}", {{ "true" if echeance.traite else "false" }})'>
                                            <i class="bi bi-pencil-fill"></i>
                                        </button>
                                        
                                        <!-- Supprimer -->
                                        <button class="btn btn-sm btn-outline-danger btn-icon-only" 
                                                title="Supprimer"
                                                data-bs-toggle="modal" 
                                                data-bs-target="#deleteModal"
                                                data-url="{{ url_for('admin.supprimer_echeance', id=echeance.id) }}">
                                            <i class="bi bi-trash-fill"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="5" class="text-center py-5 text-muted">
                                <i class="bi bi-calendar-x display-4 d-block mb-3 opacity-25"></i>
                                Aucune √©ch√©ance enregistr√©e.
                            </td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Modale Ajout/Modification -->
<div class="modal fade" id="echeanceModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="modalTitle"><i class="bi bi-calendar-plus me-2"></i>Nouvelle √âch√©ance</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form id="echeanceForm" action="{{ url_for('admin.ajouter_echeance') }}" method="post">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    
                    <div class="mb-3">
                        <label class="form-label">Intitul√© *</label>
                        <input type="text" class="form-control" name="intitule" id="inputIntitule" required placeholder="Ex: Renouvellement contrat maintenance">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Date d'√©ch√©ance *</label>
                        <input type="date" class="form-control" name="date_echeance" id="inputDate" required>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">D√©tails</label>
                        <textarea class="form-control" name="details" id="inputDetails" rows="3"></textarea>
                    </div>

                    <!-- Checkbox visible uniquement en mode √©dition -->
                    <div class="form-check d-none" id="divTraite">
                        <input class="form-check-input" type="checkbox" name="traite" id="checkTraite">
                        <label class="form-check-label" for="checkTraite">
                            Marquer comme trait√©e / termin√©e
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale Suppression -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">Supprimer l'√©ch√©ance</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p>Voulez-vous vraiment supprimer cette √©ch√©ance ?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <form id="deleteForm" method="post" action="">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn btn-danger">Supprimer</button>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    // R√©initialiser la modale pour l'ajout
    function resetModal() {
        document.getElementById('modalTitle').innerHTML = '<i class="bi bi-calendar-plus me-2"></i>Nouvelle √âch√©ance';
        document.getElementById('echeanceForm').action = "{{ url_for('admin.ajouter_echeance') }}";
        document.getElementById('inputIntitule').value = '';
        document.getElementById('inputDate').value = '';
        document.getElementById('inputDetails').value = '';
        document.getElementById('checkTraite').checked = false;
        document.getElementById('divTraite').classList.add('d-none'); // Cacher le statut trait√© √† la cr√©ation
    }

    // Remplir la modale pour l'√©dition
    function openEditModal(id, intitule, date, details, traite) {
        // Ouvrir la modale via Bootstrap
        const modal = new bootstrap.Modal(document.getElementById('echeanceModal'));
        modal.show();

        // Remplir les champs
        document.getElementById('modalTitle').innerHTML = '<i class="bi bi-pencil-square me-2"></i>Modifier l\'√©ch√©ance';
        document.getElementById('echeanceForm').action = "/admin/echeances/modifier/" + id;
        document.getElementById('inputIntitule').value = intitule;
        document.getElementById('inputDate').value = date;
        document.getElementById('inputDetails').value = details;
        
        // G√©rer la case √† cocher
        const checkTraite = document.getElementById('checkTraite');
        checkTraite.checked = traite;
        document.getElementById('divTraite').classList.remove('d-none'); // Afficher le statut trait√©
    }

    // Gestion suppression
    const deleteModal = document.getElementById('deleteModal');
    if (deleteModal) {
        deleteModal.addEventListener('show.bs.modal', function(event) {
            const button = event.relatedTarget;
            const url = button.dataset.url;
            document.getElementById('deleteForm').action = url;
        });
    }
</script>
{% endblock %}

==================================================
FICHIER : templates\admin_fournisseurs.html
==================================================
{% extends "base.html" %}

{% block title %}Gestion des Fournisseurs - LabFlow{% endblock %}

{% block content %}

<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-2">
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 40px; height: 40px; background: linear-gradient(135deg, #0ba360 0%, #3cba92 100%);">
                <!-- D√©but du SVG -->
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="24" height="24" fill="currentColor">
                    <path d="M280-160q-50 0-85-35t-35-85H60l18-80h113q17-19 40-29.5t49-10.5q26 0 49 10.5t40 29.5h167l84-360H182l4-17q6-28 27.5-45.5T264-800h456l-37 160h117l120 160-40 200h-80q0 50-35 85t-85 35q-50 0-85-35t-35-85H400q0 50-35 85t-85 35Z"/>
                </svg>
                <!-- Fin du SVG -->
            </div>
            Gestion des Fournisseurs
        </h2>
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#fournisseurModal" onclick="resetModal()">
            <i class="bi bi-plus-lg me-2"></i> Ajouter un fournisseur
        </button>
    </div>

    <!-- Tableau -->
    <div class="card border-0 shadow-sm rounded-3 overflow-hidden">
        <div class="table-responsive">
            <table class="fournisseur-table mb-0">
                <thead>
                    <tr>
                        <th style="width: 80px;">Logo</th>
                        <th>Nom</th>
                        <th>Site Web</th>
                        <th class="text-end" style="width: 120px;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% if fournisseurs %}
                        {% for item in fournisseurs %}
                            <tr>
                                <td>
                                    <div class="fournisseur-logo-wrapper">
                                        {% if item.Fournisseur.logo %}
                                            <img src="{{ item.Fournisseur.logo }}" alt="{{ item.Fournisseur.nom }}" class="fournisseur-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='block'">
                                            <i class="bi bi-image fournisseur-logo-placeholder" style="display: none;"></i>
                                        {% else %}
                                            <i class="bi bi-image fournisseur-logo-placeholder"></i>
                                        {% endif %}
                                    </div>
                                </td>
                                <td>
                                    <strong class="text-dark">{{ item.Fournisseur.nom }}</strong>
                                </td>
                                <td>
                                    {% if item.Fournisseur.site_web %}
                                        <a href="{{ item.Fournisseur.site_web }}" target="_blank" class="website-link">
                                            <i class="bi bi-link-45deg"></i> Visiter le site
                                        </a>
                                    {% else %}
                                        <span class="text-muted small">-</span>
                                    {% endif %}
                                </td>
                                <td class="text-end">
                                    <!-- Modifier -->
                                    <button class="btn btn-sm btn-outline-primary btn-icon-only me-1" 
                                            title="Modifier"
                                            onclick='openEditModal({{ item.Fournisseur.id }}, "{{ item.Fournisseur.nom|replace('"', '&quot;') }}", "{{ item.Fournisseur.site_web or "" }}", "{{ item.Fournisseur.logo or "" }}")'>
                                        <i class="bi bi-pencil-fill"></i>
                                    </button>
                                    
                                    <!-- Supprimer -->
                                    <button class="btn btn-sm btn-outline-danger btn-icon-only" 
                                            title="Supprimer"
                                            {% if item.depenses_count > 0 %}disabled{% endif %}
                                            data-bs-toggle="modal" 
                                            data-bs-target="#deleteModal"
                                            data-url="{{ url_for('admin.supprimer_fournisseur', id=item.Fournisseur.id) }}">
                                        <i class="bi bi-trash-fill"></i>
                                    </button>
                                </td>
                            </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="4" class="text-center py-5 text-muted">
                                <i class="bi bi-shop display-4 d-block mb-3 opacity-25"></i>
                                Aucun fournisseur enregistr√©.
                            </td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Modale Ajout/Modification -->
<div class="modal fade" id="fournisseurModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="modalTitle"><i class="bi bi-shop me-2"></i>Nouveau Fournisseur</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form id="fournisseurForm" action="{{ url_for('admin.ajouter_fournisseur') }}" method="post">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    
                    <div class="mb-3">
                        <label class="form-label">Nom du fournisseur *</label>
                        <input type="text" class="form-control" name="nom" id="inputNom" required placeholder="Ex: Jeulin, Pierron...">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Site Web</label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="bi bi-globe"></i></span>
                            <input type="url" class="form-control" name="site_web" id="inputSite" placeholder="https://...">
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">URL du Logo</label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="bi bi-image"></i></span>
                            <input type="url" class="form-control" name="logo_url" id="inputLogo" placeholder="https://...">
                        </div>
                        <div class="form-text">Lien direct vers l'image du logo.</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale Suppression -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">Supprimer le fournisseur</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p>Voulez-vous vraiment supprimer ce fournisseur ?</p>
                <div class="alert alert-warning small">
                    <i class="bi bi-exclamation-triangle me-1"></i> Impossible si des d√©penses y sont li√©es.
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <form id="deleteForm" method="post" action="">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn btn-danger">Supprimer</button>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    // R√©initialiser la modale pour l'ajout
    function resetModal() {
        document.getElementById('modalTitle').innerHTML = '<i class="bi bi-shop me-2"></i>Nouveau Fournisseur';
        document.getElementById('fournisseurForm').action = "{{ url_for('admin.ajouter_fournisseur') }}";
        document.getElementById('inputNom').value = '';
        document.getElementById('inputSite').value = '';
        document.getElementById('inputLogo').value = '';
    }

    // Remplir la modale pour l'√©dition
    function openEditModal(id, nom, site, logo) {
        // Ouvrir la modale via Bootstrap
        const modal = new bootstrap.Modal(document.getElementById('fournisseurModal'));
        modal.show();

        // Remplir les champs
        document.getElementById('modalTitle').innerHTML = '<i class="bi bi-pencil-square me-2"></i>Modifier le fournisseur';
        document.getElementById('fournisseurForm').action = "/admin/fournisseurs/modifier/" + id;
        document.getElementById('inputNom').value = nom;
        document.getElementById('inputSite').value = site;
        document.getElementById('inputLogo').value = logo;
    }

    // Gestion suppression
    const deleteModal = document.getElementById('deleteModal');
    if (deleteModal) {
        deleteModal.addEventListener('show.bs.modal', function(event) {
            const button = event.relatedTarget;
            const url = button.dataset.url;
            document.getElementById('deleteForm').action = url;
        });
    }
</script>
{% endblock %}

==================================================
FICHIER : templates\admin_import.html
==================================================
{% extends "base.html" %}

{% block title %}Importation en Masse - LabFlow{% endblock %}

{% block content %}


<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <!-- Ic√¥ne Import (Indigo) -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 -960 960 960">
                    <path d="M240-160q-33 0-56.5-23.5T160-240v-480q0-33 23.5-56.5T240-800h360l160 160v400q0 33-23.5 56.5T720-160H240Zm0-80h480v-360H560v-120H240v480Z"/>
                </svg>
            </div>
            <span class="fw-bold">Importation en Masse</span>
        </h2>
    </div>

    <div class="row g-4">
        
        <!-- COLONNE GAUCHE : Instructions -->
        <div class="col-lg-6">
            <div class="import-card">
                <h4 class="mb-4 d-flex align-items-center">
                    <span class="step-number">1</span>
                    Pr√©parer le fichier
                </h4>
                
                <p class="text-muted mb-4">
                    Pour importer de nouveaux objets, t√©l√©chargez le mod√®le Excel officiel. 
                    Remplissez-le en respectant scrupuleusement les colonnes.
                </p>

                <!-- NOUVEAU BLOC D'AVERTISSEMENT -->
                <div class="alert alert-warning border-0 shadow-sm d-flex align-items-start mb-4" role="alert">
                    <i class="bi bi-exclamation-triangle-fill fs-5 me-3 text-warning-emphasis mt-1"></i>
                    <div>
                        <strong class="text-warning-emphasis">Pr√©alable important :</strong>
                        <p class="mb-0 small text-muted mt-1">
                            Le mod√®le Excel g√©n√®re des <strong>listes d√©roulantes</strong> bas√©es sur vos donn√©es actuelles.
                            <br>
                            Assurez-vous d'avoir cr√©√© toutes vos 
                            <a href="{{ url_for('main.gestion_armoires') }}" class="fw-bold text-dark text-decoration-underline">Armoires</a> 
                            et 
                            <a href="{{ url_for('main.gestion_categories') }}" class="fw-bold text-dark text-decoration-underline">Cat√©gories</a> 
                            dans l'application <strong>avant</strong> de t√©l√©charger ce fichier.
                        </p>
                    </div>
                </div>

                <div class="alert alert-info border-0 bg-light text-dark mb-4">
                    <h6 class="fw-bold mb-2"><i class="bi bi-info-circle me-2"></i>R√®gles de remplissage :</h6>
                    <ul class="help-list mb-0">
                        <li>Les colonnes <strong>Nom</strong>, <strong>Quantit√©</strong> et <strong>Seuil</strong> sont obligatoires.</li>
                        <li>Utilisez les menus d√©roulants pour l'Armoire et la Cat√©gorie.</li>
                        <li>La date doit √™tre au format <strong>AAAA-MM-JJ</strong> (ex: 2025-12-31).</li>
                    </ul>
                </div>

                <div class="text-center">
                    <a href="{{ url_for('admin.telecharger_modele_excel') }}" class="btn btn-outline-primary w-100 py-3 fw-bold">
                        <i class="bi bi-file-earmark-arrow-down me-2"></i>T√©l√©charger le Mod√®le (.xlsx)
                    </a>
                </div>
            </div>
        </div>

        <!-- COLONNE DROITE : Upload -->
        <div class="col-lg-6">
            <div class="import-card">
                <h4 class="mb-4 d-flex align-items-center">
                    <span class="step-number">2</span>
                    Importer les donn√©es
                </h4>

                <form action="{{ url_for('admin.importer_fichier') }}" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

                    <div class="form-group mb-4">
                        <div class="file-drop-zone" id="drop-zone">
                            <i class="bi bi-cloud-upload drop-icon"></i>
                            <h5 class="fw-bold text-dark mb-2">D√©posez votre fichier ici</h5>
                            <p class="text-muted small mb-0 file-msg">ou cliquez pour parcourir vos dossiers</p>
                            
                            <input type="file" name="fichier_excel" id="fichier_excel" class="file-input" accept=".xlsx" required>
                        </div>
                    </div>

                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary py-2 fw-bold">
                            <i class="bi bi-play-circle-fill me-2"></i>Lancer l'Importation
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const fileInput = document.getElementById('fichier_excel');
        const dropZone = document.getElementById('drop-zone');
        const fileMsg = dropZone.querySelector('.file-msg');
        const dropIcon = dropZone.querySelector('.drop-icon');
        const originalMsg = fileMsg.innerHTML;

        // Gestion du changement de fichier
        fileInput.addEventListener('change', function() {
            if (this.files && this.files.length > 0) {
                const fileName = this.files[0].name;
                fileMsg.innerHTML = `Fichier pr√™t : <strong class="text-success">${fileName}</strong>`;
                dropZone.classList.add('file-selected');
                dropIcon.classList.remove('bi-cloud-upload');
                dropIcon.classList.add('bi-file-earmark-excel-fill');
            } else {
                fileMsg.innerHTML = originalMsg;
                dropZone.classList.remove('file-selected');
                dropIcon.classList.add('bi-cloud-upload');
                dropIcon.classList.remove('bi-file-earmark-excel-fill');
            }
        });

        // Effets visuels au Drag & Drop
        ['dragenter', 'dragover'].forEach(eventName => {
            dropZone.addEventListener(eventName, (e) => {
                e.preventDefault();
                dropZone.classList.add('dragover');
            }, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, (e) => {
                e.preventDefault();
                dropZone.classList.remove('dragover');
            }, false);
        });
    });
</script>

{% endblock %}

==================================================
FICHIER : templates\admin_kits.html
==================================================
{% extends "base.html" %}

{% block title %}Gestion des Kits - LabFlow{% endblock %}

{% block content %}

<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te de page -->
    <div class="management-header mb-4 pb-3 border-bottom d-flex justify-content-between align-items-center flex-wrap gap-3">
        <h2 class="page-title h3 mb-0 d-flex align-items-center gap-3">
            <!-- Ic√¥ne Kits (Cyan/Rose - ou le style "Valise") -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="28" height="28" fill="currentColor">
                    <path d="M80-160v-400q0-33 23.5-56.5T160-640h120v-80q0-33 23.5-56.5T360-800h240q33 0 56.5 23.5T680-720v80h120q33 0 56.5 23.5T880-560v400H80Zm240-480h320v-80H320v80Z"/>
                </svg>
            </div>
            <span class="fw-bold text-dark">Gestion des Kits</span>
        </h2>
        
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addKitModal">
            <i class="bi bi-plus-lg me-2"></i> Cr√©er un nouveau kit
        </button>
    </div>

    <!-- Liste des Kits -->
    {% if kits and kits|length > 0 %}
        <div class="card-container management-page">
            {% for item in kits %}
            <div class="kit-card">
                <!-- Ic√¥ne -->
                <div class="kit-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                        <path d="M80-160v-400q0-33 23.5-56.5T160-640h120v-80q0-33 23.5-56.5T360-800h240q33 0 56.5 23.5T680-720v80h120q33 0 56.5 23.5T880-560v400H80Zm240-480h320v-80H320v80Z"/>
                    </svg>
                </div>

                <!-- Infos -->
                <div class="kit-info">
                    <a href="{{ url_for('admin.modifier_kit', kit_id=item.Kit.id) }}" class="kit-name stretched-link-custom">
                        {{ item.Kit.nom }}
                    </a>
                    <p class="kit-desc">{{ item.Kit.description or 'Aucune description' }}</p>
                    
                    <span class="count-badge">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
                        </svg>
                        {% if item.count == 0 %}Vide{% elif item.count == 1 %}1 objet{% else %}{{ item.count }} objets{% endif %}
                    </span>
                </div>

                <!-- Actions -->
                <div class="kit-actions">
                    <!-- Modifier (CRAYON) -->
                    <a href="{{ url_for('admin.modifier_kit', kit_id=item.Kit.id) }}" 
                       class="btn-icon-only btn-edit" 
                       title="Modifier le contenu">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 17l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"/>
                        </svg>
                    </a>

                    <!-- Supprimer (POUBELLE) -->
                    <button type="button" class="btn-icon-only btn-delete"
                            title="Supprimer le kit"
                            data-bs-toggle="modal"
                            data-bs-target="#deleteKitModal"
                            data-kit-id="{{ item.Kit.id }}"
                            data-kit-name="{{ item.Kit.nom }}">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/>
                        </svg>
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>

    {% else %}
        <!-- √âtat vide -->
        <div class="text-center py-5 bg-white rounded shadow-sm border">
            <div class="mb-3 text-muted">
                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 -960 960 960" fill="currentColor" style="opacity: 0.3;">
                    <path d="M80-160v-400q0-33 23.5-56.5T160-640h120v-80q0-33 23.5-56.5T360-800h240q33 0 56.5 23.5T680-720v80h120q33 0 56.5 23.5T880-560v400H80Zm240-480h320v-80H320v80Z"/>
                </svg>
            </div>
            <h3>Aucun kit cr√©√©</h3>
            <p class="text-muted">Cr√©ez des kits pour regrouper le mat√©riel (ex: TP Chimie, Dissection...).</p>
            <button type="button" class="btn btn-primary mt-2" data-bs-toggle="modal" data-bs-target="#addKitModal">
                Cr√©er mon premier kit
            </button>
        </div>
    {% endif %}
</div>

<!-- ================= MODALES ================= -->

<!-- Modale Ajout Kit -->
<div class="modal fade" id="addKitModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title"><i class="bi bi-box-seam me-2"></i>Nouveau Kit</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form action="{{ url_for('admin.ajouter_kit') }}" method="post">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <div class="mb-3">
                        <label class="form-label">Nom du kit *</label>
                        <input type="text" class="form-control" name="nom" required placeholder="Ex: TP Optique 6√®me">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Description</label>
                        <textarea class="form-control" name="description" rows="3" placeholder="D√©tails sur l'usage du kit..."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary">Cr√©er et configurer</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale Suppression Kit -->
<div class="modal fade" id="deleteKitModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-danger">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">Supprimer le kit</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form action="" method="post" id="deleteKitForm">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <div class="alert alert-danger">
                        Cette action est d√©finitive. Les objets contenus dans le kit ne seront pas supprim√©s de l'inventaire, mais le regroupement sera perdu.
                    </div>
                    <p class="mb-0">Voulez-vous vraiment supprimer le kit : <strong id="delete-kit-name"></strong> ?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-danger">Supprimer</button>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Gestion de la modale de suppression
    const deleteModal = document.getElementById('deleteKitModal');
    if (deleteModal) {
        deleteModal.addEventListener('show.bs.modal', function(event) {
            const button = event.relatedTarget;
            const kitId = button.dataset.kitId;
            const kitName = button.dataset.kitName;
            
            document.getElementById('deleteKitForm').action = `/admin/kits/supprimer/${kitId}`;
            document.getElementById('delete-kit-name').textContent = kitName;
        });
    }
});
</script>
{% endblock %}

==================================================
FICHIER : templates\admin_kit_modifier.html
==================================================
{% extends "base.html" %}

{% block title %}Modifier le Kit : {{ kit.nom }} - LabFlow{% endblock %}

{% block content %}

<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-2">
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white" 
                 style="width: 40px; height: 40px; background: linear-gradient(135deg, #6f42c1 0%, #a8edea 100%);">
                <i class="bi bi-box-seam"></i>
            </div>
            Modification du Kit : <span class="text-primary">{{ kit.nom }}</span>
        </h2>
        <a href="{{ url_for('admin.gestion_kits') }}" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left me-2"></i>Retour
        </a>
    </div>

    <!-- 1. NOUVEAU : PARAM√àTRES DU KIT (NOM & DESCRIPTION) -->
    <div class="card border-0 shadow-sm mb-4">
        <div class="card-header bg-white py-3">
            <h5 class="mb-0 fw-bold text-dark"><i class="bi bi-sliders me-2"></i>Param√®tres du Kit</h5>
        </div>
        <div class="card-body">
            <form method="POST" class="row g-3 align-items-end">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                
                <!-- Champ Nom -->
                <div class="col-md-4">
                    <label class="form-label small fw-bold text-muted">Nom du Kit <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" name="nom_kit" value="{{ kit.nom }}" required>
                </div>
                
                <!-- Champ Description -->
                <div class="col-md-6">
                    <label class="form-label small fw-bold text-muted">Description</label>
                    <input type="text" class="form-control" name="description_kit" value="{{ kit.description or '' }}" placeholder="Description optionnelle...">
                </div>
                
                <!-- Bouton Enregistrer -->
                <div class="col-md-2">
                    <button type="submit" class="btn btn-primary w-100 fw-bold">
                        <i class="bi bi-save me-2"></i>Enregistrer
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div class="row g-4">
        
        <!-- COLONNE GAUCHE : Objets DANS le kit -->
        <div class="col-lg-6">
            <div class="kit-edit-card">
                <div class="kit-edit-header">
                    <h3 class="kit-edit-title">
                        <i class="bi bi-check-circle-fill text-success"></i> Contenu du Kit
                    </h3>
                    <span class="badge bg-white text-dark border">{{ objets_in_kit|length }} objets</span>
                </div>
                
                <div class="kit-edit-body">
                    {% if objets_in_kit %}
                    <form method="post" action="{{ url_for('admin.modifier_kit', kit_id=kit.id) }}">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        
                        <table class="kit-edit-table">
                            <thead>
                                <tr>
                                    <th>Objet</th>
                                    <th class="text-center" style="width: 100px;">Qt√©</th>
                                    <th class="text-end" style="width: 60px;"></th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for assoc in objets_in_kit %}
                                <tr>
                                    <td>
                                        <div class="fw-bold text-dark">{{ assoc.objet.nom }}</div>
                                        <small class="text-muted">Stock total : {{ assoc.objet.quantite_physique }}</small>
                                    </td>
                                    <td class="text-center">
                                        <input type="number" name="quantite_{{ assoc.id }}" 
                                               value="{{ assoc.quantite }}" 
                                               class="form-control form-control-sm kit-qty-input mx-auto" 
                                               min="1">
                                    </td>
                                    <td class="text-end">
                                        <button type="button" class="btn btn-sm btn-outline-danger border-0"
                                                title="Retirer du kit"
                                                data-bs-toggle="modal" 
                                                data-bs-target="#removeModal"
                                                data-url="{{ url_for('admin.retirer_objet_kit', kit_objet_id=assoc.id) }}"
                                                data-name="{{ assoc.objet.nom }}">
                                            <i class="bi bi-x-lg"></i>
                                        </button>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>

                        <!-- Bouton flottant en bas de la liste -->
                        <div class="p-3 border-top bg-white text-end sticky-bottom">
                            <button type="submit" class="btn btn-success">
                                <i class="bi bi-save me-2"></i>Mettre √† jour les quantit√©s
                            </button>
                        </div>
                    </form>
                    {% else %}
                        <div class="text-center py-5 text-muted">
                            <i class="bi bi-box-seam display-4 mb-3 d-block opacity-25"></i>
                            <p>Ce kit est vide.</p>
                            <small>Ajoutez des objets depuis la liste de droite.</small>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- COLONNE DROITE : Objets DISPONIBLES -->
        <div class="col-lg-6">
            <div class="kit-edit-card border-primary border-opacity-25">
                <div class="kit-edit-header bg-primary bg-opacity-10">
                    <h3 class="kit-edit-title text-primary">
                        <i class="bi bi-plus-circle-fill"></i> Ajouter des objets
                    </h3>
                </div>
                
                <!-- Barre de recherche fixe en haut de la liste -->
                <div class="kit-edit-toolbar">
                    <div class="kit-search-wrapper">
                        <i class="bi bi-search"></i>
                        <input type="text" id="kit-objet-search" class="form-control kit-search-input" placeholder="Rechercher un objet √† ajouter...">
                    </div>
                </div>

                <div class="kit-edit-body">
                    <table class="kit-edit-table" id="available-objects-table">
                        <thead>
                            <tr>
                                <th>Objet (Stock)</th>
                                <th class="text-center" style="width: 90px;">Qt√©</th>
                                <th class="text-end" style="width: 60px;"></th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for objet in objets_disponibles %}
                            <tr class="objet-row">
                                <td>
                                    <span class="objet-name fw-medium">{{ objet.nom }}</span>
                                    <small class="text-muted ms-1">({{ objet.quantite_physique }})</small>
                                </td>
                                
                                <!-- Formulaire individuel par ligne -->
                                <form method="post" action="{{ url_for('admin.modifier_kit', kit_id=kit.id) }}">
                                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                    <input type="hidden" name="objet_id" value="{{ objet.id }}">
                                    
                                    <td class="text-center">
                                        <input type="number" name="quantite" value="1" 
                                               class="form-control form-control-sm kit-qty-input mx-auto" 
                                               min="1" max="{{ objet.quantite_physique }}">
                                    </td>
                                    <td class="text-end">
                                        <button type="submit" class="btn btn-sm btn-primary" 
                                                title="Ajouter au kit"
                                                {% if objet.quantite_physique == 0 %}disabled{% endif %}>
                                            <i class="bi bi-plus-lg"></i>
                                        </button>
                                    </td>
                                </form>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    
                    <!-- Message si aucun r√©sultat de recherche -->
                    <div id="no-results" class="text-center py-5 text-muted d-none">
                        <i class="bi bi-search mb-2 d-block opacity-50"></i>
                        Aucun objet trouv√©
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modale de confirmation de retrait -->
<div class="modal fade" id="removeModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">Retirer l'objet</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p>Voulez-vous vraiment retirer <strong id="remove-object-name"></strong> du kit ?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <form id="removeForm" method="post" action="">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn btn-danger">Retirer</button>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    
    // 1. Recherche dynamique JS
    const searchInput = document.getElementById('kit-objet-search');
    const tableRows = document.querySelectorAll('#available-objects-table .objet-row');
    const noResults = document.getElementById('no-results');

    if (searchInput) {
        searchInput.addEventListener('keyup', function(e) {
            const term = e.target.value.toLowerCase();
            let visibleCount = 0;

            tableRows.forEach(row => {
                const name = row.querySelector('.objet-name').textContent.toLowerCase();
                if (name.includes(term)) {
                    row.style.display = '';
                    visibleCount++;
                } else {
                    row.style.display = 'none';
                }
            });

            if (visibleCount === 0) {
                noResults.classList.remove('d-none');
            } else {
                noResults.classList.add('d-none');
            }
        });
    }

    // 2. Gestion de la modale de retrait
    const removeModal = document.getElementById('removeModal');
    if (removeModal) {
        removeModal.addEventListener('show.bs.modal', function(event) {
            const button = event.relatedTarget;
            const url = button.dataset.url;
            const name = button.dataset.name;
            
            document.getElementById('removeForm').action = url;
            document.getElementById('remove-object-name').textContent = name;
        });
    }
});
</script>
{% endblock %}

==================================================
FICHIER : templates\admin_utilisateurs.html
==================================================
{% extends "base.html" %}

{% block title %}Gestion des Utilisateurs - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te de page -->
    <div class="management-header">
        <h2 class="page-title h3 mb-0 d-flex align-items-center gap-3">
            <!-- Ic√¥ne Utilisateurs (Violet) -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="28" height="28" fill="currentColor">
                    <path d="M40-160v-112q0-34 17.5-62.5T104-378q62-31 126-46.5T360-440q66 0 130 15.5T616-378q29 15 46.5 43.5T680-272v112H40Zm720 0v-120q0-44-24.5-84.5T666-434q51 6 96 20.5t84 35.5q36 20 55 44.5t19 53.5v120H760ZM360-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm400-160q0 66-47 113t-113 47q-11 0-28-2.5t-28-5.5q27-32 41.5-71t14.5-81q0-42-14.5-81T544-792q14-5 28-6.5t28-1.5q66 0 113 47t47 113Z"/>
                </svg>
            </div>
            <span class="fw-bold text-dark">Gestion des Utilisateurs</span>
        </h2>
        
        {% if session.user_role == 'admin' %}
        <div class="page-actions-container">
            <button type="button" 
                    class="btn btn-primary" 
                    data-bs-toggle="modal" 
                    data-bs-target="#addUserModal">
                <i class="bi bi-person-plus-fill me-2"></i> 
                Ajouter un utilisateur
            </button>
        </div>
        {% endif %}
    </div>

    <!-- Liste des utilisateurs -->
    {% if utilisateurs and utilisateurs|length > 0 %}
        <div class="card-container management-page">
            {% for user in utilisateurs %}
            <div class="user-card">
                <!-- Avatar -->
                <div class="user-avatar">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor">
                        <path d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-160v-112q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q62 0 126 15.5T736-378q29 15.5 46.5 44T800-272v112H160Z"/>
                    </svg>
                </div>

                <!-- Informations -->
                <div class="user-info">
                    <h3 class="user-name">
                        {{ user.nom_utilisateur }}
                        {% if user.id|string == session.user_id|string %} 
                            <span class="badge bg-light text-dark border ms-1" style="font-size: 0.7em;">VOUS</span> 
                        {% endif %}
                    </h3>
                    <p class="user-email">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor">
                            <path d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm320-280L160-640v400h640v-400L480-440Zm0-80 320-200H160l320 200ZM160-640v-80 480-400Z"/>
                        </svg>
                        {{ user.email or 'Non d√©fini' }}
                    </p>
                    <span class="role-badge role-{{ user.role }}">
                        {% if user.role == 'admin' %}
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor">
                                <path d="m344-60-76-128-144-32 14-148-98-112 98-112-14-148 144-32 76-128 136 58 136-58 76 128 144 32-14 148 98 112-98 112 14 148-144 32-76 128-136-58-136 58Zm34-102 102-44 104 44 56-96 110-26-10-112 74-84-74-86 10-112-110-24-58-96-102 44-104-44-56 96-110 24 10 112-74 86 74 84-10 114 110 24 58 96Zm102-318Zm-42 142 226-226-56-58-170 170-86-84-56 56 142 142Z"/>
                            </svg>
                        {% endif %}
                        {{ user.role|capitalize }}
                    </span>
                </div>

                <!-- Actions (Style Restaur√©) -->
                <div class="user-actions">
                    <!-- 1. Modifier Email -->
                    <button class="btn-icon-only btn-edit"
                            title="Modifier l'e-mail"
                            data-bs-toggle="modal"
                            data-bs-target="#editEmailModal"
                            data-user-id="{{ user.id }}"
                            data-username="{{ user.nom_utilisateur }}"
                            data-email="{{ user.email or '' }}">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm280-280L200-640v440h560v-440L480-480Zm0-60 226-140H254l226 140Zm-280-60v560-560Z"/>
                        </svg>
                    </button>

                    <!-- 2. Reset MDP -->
                    <button class="btn-icon-only btn-reset"
                            title="R√©initialiser le mot de passe"
                            data-bs-toggle="modal"
                            data-bs-target="#resetPasswordModal"
                            data-user-id="{{ user.id }}"
                            data-username="{{ user.nom_utilisateur }}">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path d="M280-400q-33 0-56.5-23.5T200-480q0-33 23.5-56.5T280-560q33 0 56.5 23.5T360-480q0 33-23.5 56.5T280-400Zm0 160q-100 0-170-70T40-480q0-100 70-170t170-70q67 0 121.5 33t86.5 87h352l120 120-180 180-80-60-80 60-85-60h-47q-32 54-86.5 87T280-240Zm0-80q56 0 98.5-34t56.5-86h125l58 41 82-61 71 55 75-75-40-40H435q-14-52-56.5-86T280-640q-66 0-113 47t-47 113q0 66 47 113t113 47Z"/>
                        </svg>
                    </button>

                    <!-- 3. Promouvoir (Si pas soi-m√™me et pas admin) -->
                    {% if (user.id|string != session.user_id|string) and (user.role != 'admin') %}
                    <button class="btn-icon-only btn-promote"
                            title="Promouvoir Administrateur"
                            data-bs-toggle="modal"
                            data-bs-target="#promoteModal"
                            data-user-id="{{ user.id }}"
                            data-username="{{ user.nom_utilisateur }}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trophy" viewBox="0 0 16 16">
                          <path d="M2.5.5A.5.5 0 0 1 3 0h10a.5.5 0 0 1 .5.5q0 .807-.034 1.536a3 3 0 1 1-1.133 5.89c-.79 1.865-1.878 2.777-2.833 3.011v2.173l1.425.356c.194.048.377.135.537.255L13.3 15.1a.5.5 0 0 1-.3.9H3a.5.5 0 0 1-.3-.9l1.838-1.379c.16-.12.343-.207.537-.255L6.5 13.11v-2.173c-.955-.234-2.043-1.146-2.833-3.012a3 3 0 1 1-1.132-5.89A33 33 0 0 1 2.5.5m.099 2.54a2 2 0 0 0 .72 3.935c-.333-1.05-.588-2.346-.72-3.935m10.083 3.935a2 2 0 0 0 .72-3.935c-.133 1.59-.388 2.885-.72 3.935M3.504 1q.01.775.056 1.469c.13 2.028.457 3.546.87 4.667C5.294 9.48 6.484 10 7 10a.5.5 0 0 1 .5.5v2.61a1 1 0 0 1-.757.97l-1.426.356a.5.5 0 0 0-.179.085L4.5 15h7l-.638-.479a.5.5 0 0 0-.18-.085l-1.425-.356a1 1 0 0 1-.757-.97V10.5A.5.5 0 0 1 9 10c.516 0 1.706-.52 2.57-2.864.413-1.12.74-2.64.87-4.667q.045-.694.056-1.469z"/>
                        </svg>
                    </button>
                    {% endif %}

                    <!-- 4. Supprimer (Si pas soi-m√™me) -->
                    {% if user.id|string != session.user_id|string %}
                    <button class="btn-icon-only btn-delete-danger"
                            title="Supprimer l'utilisateur"
                            data-bs-toggle="modal"
                            data-bs-target="#deleteUserModal"
                            data-user-id="{{ user.id }}"
                            data-username="{{ user.nom_utilisateur }}">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/>
                        </svg>
                    </button>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>

    {% else %}
        <!-- √âtat vide -->
        <div class="empty-state-container">
            <div class="empty-state-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor">
                    <path d="M40-160v-112q0-34 17.5-62.5T104-378q62-31 126-46.5T360-440q66 0 130 15.5T616-378q29 15 46.5 43.5T680-272v112H40Zm720 0v-120q0-44-24.5-84.5T666-434q51 6 96 20.5t84 35.5q36 20 55 44.5t19 53.5v120H760ZM360-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm400-160q0 66-47 113t-113 47q-11 0-28-2.5t-28-5.5q27-32 41.5-71t14.5-81q0-42-14.5-81T544-792q14-5 28-6.5t28-1.5q66 0 113 47t47 113Z"/>
                </svg>
            </div>
            <h3>Aucun utilisateur enregistr√©</h3>
            <p>Commencez par ajouter votre premier utilisateur.</p>
            {% if session.user_role == 'admin' %}
            <button type="button" class="btn btn-primary mt-3" data-bs-toggle="modal" data-bs-target="#addUserModal">
                Ajouter le premier utilisateur
            </button>
            {% endif %}
        </div>
    {% endif %}
</div>

<!-- ================= MODALES ================= -->

<!-- Modale Ajout -->
<div class="modal fade" id="addUserModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title"><i class="bi bi-person-plus-fill me-2"></i>Nouvel utilisateur</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form action="{{ url_for('admin.ajouter_utilisateur') }}" method="post">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <div class="mb-3">
                        <label class="form-label">Nom d'utilisateur *</label>
                        <input type="text" class="form-control" name="nom_utilisateur" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" name="email">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Mot de passe *</label>
                        <input type="password" class="form-control" name="mot_de_passe" required minlength="6">
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="est_admin" id="checkAdmin">
                        <label class="form-check-label" for="checkAdmin">Acc√®s Administrateur</label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary">Cr√©er</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale Email -->
<div class="modal fade" id="editEmailModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Modifier l'e-mail</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form action="" method="post" id="editEmailForm">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <p>Utilisateur : <strong id="edit-email-username"></strong></p>
                    <div class="mb-3">
                        <label class="form-label">Nouvel e-mail</label>
                        <input type="email" class="form-control" id="edit_email" name="email" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale Reset MDP -->
<div class="modal fade" id="resetPasswordModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title"><i class="bi bi-shield-lock-fill me-2"></i>R√©initialiser le mot de passe</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form action="" method="post" id="resetPasswordForm" novalidate>
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <p class="mb-3">Utilisateur : <strong id="reset-password-username" class="text-primary"></strong></p>
                    
                    <!-- Nouveau Mot de passe -->
                    <div class="mb-3 position-relative">
                        <label class="form-label small fw-bold text-muted">Nouveau mot de passe</label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="reset_new_pass" name="nouveau_mot_de_passe" required>
                            <button class="btn btn-outline-secondary" type="button" onclick="togglePass('reset_new_pass')">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Confirmation -->
                    <div class="mb-3 position-relative">
                        <label class="form-label small fw-bold text-muted">Confirmer le mot de passe</label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="reset_confirm_pass" name="confirmation_mot_de_passe" required>
                            <button class="btn btn-outline-secondary" type="button" onclick="togglePass('reset_confirm_pass')">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Crit√®res de s√©curit√© (Feedback visuel) -->
                    <div class="card bg-light border-0 p-2">
                        <small class="fw-bold text-muted mb-1 d-block">Crit√®res de s√©curit√© :</small>
                        <ul class="list-unstyled mb-0 small" id="password-requirements-list">
                            <li id="rule-length" class="text-danger"><i class="bi bi-x-circle me-1"></i>12 caract√®res min.</li>
                            <li id="rule-upper" class="text-danger"><i class="bi bi-x-circle me-1"></i>1 Majuscule</li>
                            <li id="rule-lower" class="text-danger"><i class="bi bi-x-circle me-1"></i>1 Minuscule</li>
                            <li id="rule-number" class="text-danger"><i class="bi bi-x-circle me-1"></i>1 Chiffre</li>
                            <li id="rule-special" class="text-danger"><i class="bi bi-x-circle me-1"></i>1 Caract√®re sp√©cial</li>
                            <li id="rule-match" class="text-danger fw-bold mt-1"><i class="bi bi-x-circle me-1"></i>Mots de passe identiques</li>
                        </ul>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary" id="btn-submit-reset" disabled>Valider</button>
                </div>
            </form>
        </div>
    </div>
</div>
<script>
    // Petit helper pour l'oeil (afficher/masquer)
    function togglePass(id) {
        const input = document.getElementById(id);
        input.type = input.type === 'password' ? 'text' : 'password';
    }

    document.addEventListener('DOMContentLoaded', function() {
        const passInput = document.getElementById('reset_new_pass');
        const confirmInput = document.getElementById('reset_confirm_pass');
        const submitBtn = document.getElementById('btn-submit-reset');

        function validatePassword() {
            const val = passInput.value;
            const confirmVal = confirmInput.value;

            // Regex
            const hasLength = val.length >= 12;
            const hasUpper = /[A-Z]/.test(val);
            const hasLower = /[a-z]/.test(val);
            const hasNumber = /[0-9]/.test(val);
            const hasSpecial = /[^A-Za-z0-9]/.test(val);
            const isMatch = val === confirmVal && val.length > 0;

            // Mise √† jour UI
            updateRule('rule-length', hasLength);
            updateRule('rule-upper', hasUpper);
            updateRule('rule-lower', hasLower);
            updateRule('rule-number', hasNumber);
            updateRule('rule-special', hasSpecial);
            updateRule('rule-match', isMatch);

            // Activation du bouton seulement si TOUT est bon
            if (hasLength && hasUpper && hasLower && hasNumber && hasSpecial && isMatch) {
                submitBtn.disabled = false;
            } else {
                submitBtn.disabled = true;
            }
        }

        function updateRule(elementId, isValid) {
            const el = document.getElementById(elementId);
            const icon = el.querySelector('i');
            if (isValid) {
                el.classList.remove('text-danger');
                el.classList.add('text-success');
                icon.classList.remove('bi-x-circle');
                icon.classList.add('bi-check-circle-fill');
            } else {
                el.classList.remove('text-success');
                el.classList.add('text-danger');
                icon.classList.remove('bi-check-circle-fill');
                icon.classList.add('bi-x-circle');
            }
        }

        // √âcouteurs d'√©v√©nements
        if(passInput && confirmInput) {
            passInput.addEventListener('input', validatePassword);
            confirmInput.addEventListener('input', validatePassword);
        }
        
        // Reset du formulaire quand on ouvre la modale
        const resetModal = document.getElementById('resetPasswordModal');
        if(resetModal) {
            resetModal.addEventListener('show.bs.modal', function () {
                passInput.value = '';
                confirmInput.value = '';
                validatePassword(); // Pour remettre tout en rouge/d√©sactiv√©
            });
        }
    });
</script>

<!-- Modale Promotion -->
<div class="modal fade" id="promoteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-warning">
            <div class="modal-header bg-warning text-dark">
                <h5 class="modal-title"><i class="bi bi-exclamation-triangle-fill me-2"></i>Passation de Pouvoir</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form action="" method="post" id="promoteForm">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <p>Vous allez nommer <strong id="promote-username"></strong> Administrateur.</p>
                    <div class="alert alert-danger">
                        <strong>Attention :</strong> Vous perdrez vos droits d'administrateur.
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Votre mot de passe pour confirmer :</label>
                        <input type="password" class="form-control" name="password" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-warning">Confirmer</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale Suppression -->
<div class="modal fade" id="deleteUserModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-danger">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">Supprimer l'utilisateur</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form action="" method="post" id="deleteUserForm">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <div class="alert alert-danger">
                        Cette action est d√©finitive.
                    </div>
                    <p>Tapez le nom de l'utilisateur pour confirmer : <strong id="delete-username-to-match"></strong></p>
                    <input type="text" class="form-control" id="delete_confirm_input" required placeholder="Nom d'utilisateur">
                    <div id="delete_error_message" class="text-danger mt-2 small"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-danger">Supprimer</button>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    
    // Helper pour configurer les modales
    function setupModal(modalId, formId, actionBaseUrl, usernameFieldId, extraCallback) {
        const modal = document.getElementById(modalId);
        if (!modal) return;

        modal.addEventListener('show.bs.modal', function(event) {
            const button = event.relatedTarget;
            const userId = button.dataset.userId;
            const username = button.dataset.username;
            
            document.getElementById(formId).action = actionBaseUrl + userId;
            
            const usernameField = document.getElementById(usernameFieldId);
            if (usernameField) usernameField.textContent = username;

            if (extraCallback) extraCallback(button);
        });
    }

    // Configuration des modales
    setupModal('editEmailModal', 'editEmailForm', '/admin/utilisateurs/modifier_email/', 'edit-email-username', (btn) => {
        document.getElementById('edit_email').value = btn.dataset.email || '';
    });

    setupModal('resetPasswordModal', 'resetPasswordForm', '/admin/utilisateurs/reinitialiser_mdp/', 'reset-password-username', () => {
        document.getElementById('nouveau_mot_de_passe').value = '';
    });

    setupModal('promoteModal', 'promoteForm', '/admin/utilisateurs/promouvoir/', 'promote-username');

    // Suppression avec validation
    const deleteModal = document.getElementById('deleteUserModal');
    if (deleteModal) {
        let expectedUsername = '';
        deleteModal.addEventListener('show.bs.modal', function(event) {
            const button = event.relatedTarget;
            expectedUsername = button.dataset.username;
            document.getElementById('deleteUserForm').action = '/admin/utilisateurs/supprimer/' + button.dataset.userId;
            document.getElementById('delete-username-to-match').textContent = expectedUsername;
            document.getElementById('delete_confirm_input').value = '';
            document.getElementById('delete_error_message').textContent = '';
        });

        document.getElementById('deleteUserForm').addEventListener('submit', function(e) {
            const input = document.getElementById('delete_confirm_input');
            if (input.value.trim() !== expectedUsername) {
                e.preventDefault();
                document.getElementById('delete_error_message').textContent = "Le nom ne correspond pas.";
            }
        });
    }
});
</script>
{% endblock %}

==================================================
FICHIER : templates\alertes.html
==================================================
{% extends "base.html" %}

{% block title %}Centre d'Alertes - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #dc3545 0%, #ff6b6b 100%);">
                <i class="bi bi-exclamation-triangle-fill fs-4"></i>
            </div>
            <span class="fw-bold">Centre d'Alertes</span>
        </h2>
        <span class="text-muted small">Derni√®re mise √† jour : {{ now.strftime('%H:%M') }}</span>
    </div>

    <!-- NAVIGATION PRINCIPALE (5 CARTES-ONGLETS) -->
    <div class="row row-cols-1 row-cols-md-5 g-2 mb-0 nav nav-pills" id="alertTabs" role="tablist">
        
        <!-- 1. S√âCURIT√â -->
        <div class="col" role="presentation">
            <button class="nav-link w-100 p-0 border-0 bg-transparent active" id="tab-securite" data-bs-toggle="pill" data-bs-target="#content-securite" type="button" role="tab">
                <div class="kpi-card card h-100 {{ 'border-danger' if signalements_securite else 'border-success' }}">
                    <div class="card-body d-flex align-items-center justify-content-between p-3">
                        <div class="text-start">
                            <div class="text-uppercase x-small fw-bold text-muted mb-1">S√©curit√©</div>
                            <div class="h3 mb-0 fw-bold {{ 'text-danger' if signalements_securite else 'text-success' }}">
                                {{ signalements_securite|length }}
                            </div>
                        </div>
                        <div class="rounded-circle p-2 {{ 'bg-danger-subtle text-danger' if signalements_securite else 'bg-success-subtle text-success' }}">
                            <i class="bi {{ 'bi-shield-exclamation' if signalements_securite else 'bi-shield-check' }} fs-4"></i>
                        </div>
                    </div>
                    <div class="active-indicator"></div>
                </div>
            </button>
        </div>

        <!-- 2. RUPTURES -->
        <div class="col" role="presentation">
            <button class="nav-link w-100 p-0 border-0 bg-transparent" id="tab-stock" data-bs-toggle="pill" data-bs-target="#content-stock" type="button" role="tab">
                <div class="kpi-card card h-100 {{ 'border-danger' if objets_stock else 'border-success' }}">
                    <div class="card-body d-flex align-items-center justify-content-between p-3">
                        <div class="text-start">
                            <div class="text-uppercase x-small fw-bold text-muted mb-1">Ruptures</div>
                            <div class="h3 mb-0 fw-bold {{ 'text-danger' if objets_stock else 'text-success' }}">
                                {{ objets_stock|length }}
                            </div>
                        </div>
                        <div class="rounded-circle p-2 {{ 'bg-danger-subtle text-danger' if objets_stock else 'bg-success-subtle text-success' }}">
                            <i class="bi {{ 'bi-graph-down-arrow' if objets_stock else 'bi-check-lg' }} fs-4"></i>
                        </div>
                    </div>
                    <div class="active-indicator"></div>
                </div>
            </button>
        </div>

        <!-- 3. P√âREMPTIONS -->
        <div class="col" role="presentation">
            <button class="nav-link w-100 p-0 border-0 bg-transparent" id="tab-peremption" data-bs-toggle="pill" data-bs-target="#content-peremption" type="button" role="tab">
                <div class="kpi-card card h-100 {{ 'border-warning' if objets_peremption else 'border-success' }}">
                    <div class="card-body d-flex align-items-center justify-content-between p-3">
                        <div class="text-start">
                            <div class="text-uppercase x-small fw-bold text-muted mb-1">P√©remptions</div>
                            <div class="h3 mb-0 fw-bold {{ 'text-dark' if objets_peremption else 'text-success' }}">
                                {{ objets_peremption|length }}
                            </div>
                        </div>
                        <div class="rounded-circle p-2 {{ 'bg-warning-subtle text-warning-emphasis' if objets_peremption else 'bg-success-subtle text-success' }}">
                            <i class="bi {{ 'bi-calendar-x' if objets_peremption else 'bi-check-lg' }} fs-4"></i>
                        </div>
                    </div>
                    <div class="active-indicator"></div>
                </div>
            </button>
        </div>

        <!-- 4. SUGGESTIONS -->
        <div class="col" role="presentation">
            <button class="nav-link w-100 p-0 border-0 bg-transparent" id="tab-suggestions" data-bs-toggle="pill" data-bs-target="#content-suggestions" type="button" role="tab">
                <div class="kpi-card card h-100 {{ 'border-warning' if suggestions else 'border-success' }}">
                    <div class="card-body d-flex align-items-center justify-content-between p-3">
                        <div class="text-start">
                            <div class="text-uppercase x-small fw-bold text-muted mb-1">Suggestions</div>
                            <div class="h3 mb-0 fw-bold {{ 'text-dark' if suggestions else 'text-success' }}">
                                {{ suggestions|length }}
                            </div>
                        </div>
                        <div class="rounded-circle p-2 {{ 'bg-warning-subtle text-warning-emphasis' if suggestions else 'bg-success-subtle text-success' }}">
                            <i class="bi {{ 'bi-cart-plus' if suggestions else 'bi-check-lg' }} fs-4"></i>
                        </div>
                    </div>
                    <div class="active-indicator"></div>
                </div>
            </button>
        </div>

        <!-- 5. OPTIMISATION -->
        <div class="col" role="presentation">
            <button class="nav-link w-100 p-0 border-0 bg-transparent" id="tab-dormants" data-bs-toggle="pill" data-bs-target="#content-dormants" type="button" role="tab">
                <div class="kpi-card card h-100 border-primary">
                    <div class="card-body d-flex align-items-center justify-content-between p-3">
                        <div class="text-start">
                            <div class="text-uppercase x-small fw-bold text-muted mb-1">Optimisation</div>
                            <div class="h3 mb-0 fw-bold text-primary">
                                <i class="bi bi-arrow-right-circle"></i>
                            </div>
                        </div>
                        <div class="rounded-circle p-2 bg-primary-subtle text-primary">
                            <i class="bi bi-hourglass-split fs-4"></i>
                        </div>
                    </div>
                    <div class="active-indicator"></div>
                </div>
            </button>
        </div>
    </div>

    <!-- CONTENU DES ONGLETS (CADRE UNIFI√â) -->
    <div class="card border-0 shadow-sm mt-0" style="border-top-left-radius: 0; border-top-right-radius: 0; z-index: 1;">
        <div class="card-body p-4">
            <div class="tab-content" id="alertTabsContent">
                
                <!-- 1. S√âCURIT√â -->
                <div class="tab-pane fade show active" id="content-securite" role="tabpanel">
                    {% if signalements_securite %}
                        <h5 class="fw-bold mb-4 text-danger"><i class="bi bi-shield-exclamation me-2"></i>Signalements de S√©curit√©</h5>
                        <div class="list-group">
                            {% for sig in signalements_securite %}
                            <div class="list-group-item p-3 border-start border-4 border-danger">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <div class="fw-bold text-danger mb-1">{{ sig.equipement.nom }}</div>
                                        <p class="mb-1 text-dark">{{ sig.observations }}</p>
                                        <small class="text-muted">
                                            Signal√© le {{ sig.date_intervention.strftime('%d/%m/%Y') }} par <strong>{{ sig.operateur }}</strong>
                                        </small>
                                    </div>
                                    <div class="d-flex gap-2 align-items-center">
                                        {% if session.user_role == 'admin' %}
                                            <button class="btn btn-sm btn-outline-secondary" onclick="window.traiterSignalement({{ sig.id }}, 'refuser')">Ignorer</button>
                                            <button class="btn btn-sm btn-danger" onclick="window.traiterSignalement({{ sig.id }}, 'valider')"><i class="bi bi-check-lg me-1"></i>Prendre en compte</button>
                                        {% else %}
                                            <span class="badge bg-warning text-dark border border-warning-subtle"><i class="bi bi-hourglass-split me-1"></i>En attente</span>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="text-center py-5">
                            <div class="mb-3">
                                <i class="bi bi-shield-check text-success display-1 opacity-25"></i>
                            </div>
                            <h4 class="fw-bold text-success">Aucun probl√®me de s√©curit√©</h4>
                            <p class="text-muted">Tous les √©quipements fonctionnent correctement.</p>
                        </div>
                    {% endif %}
                </div>

                <!-- 2. RUPTURES -->
                <div class="tab-pane fade" id="content-stock" role="tabpanel">
                    {% if objets_stock %}
                        <h5 class="fw-bold mb-4 text-danger"><i class="bi bi-graph-down-arrow me-2"></i>Ruptures de Stock</h5>
                        <div class="list-group">
                            {% for objet in objets_stock %}
                            <div class="list-group-item p-3 border-start border-4 border-danger">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <a href="{{ url_for('inventaire.voir_objet', objet_id=objet.id) }}" class="fw-bold text-dark text-decoration-none fs-5">{{ objet.nom }}</a>
                                        <div class="small text-muted">{{ objet.armoire.nom if objet.armoire else 'Sans armoire' }}</div>
                                    </div>
                                    <div class="text-end">
                                        <span class="badge bg-danger fs-6 mb-1">Stock: {{ objet.quantite_physique }}</span>
                                        <div class="small text-muted">Seuil: {{ objet.seuil }}</div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="text-center py-5">
                            <div class="mb-3">
                                <i class="bi bi-check-circle text-success display-1 opacity-25"></i>
                            </div>
                            <h4 class="fw-bold text-success">Stock Sain</h4>
                            <p class="text-muted">Aucun produit sous le seuil d'alerte.</p>
                        </div>
                    {% endif %}
                </div>

                <!-- 3. P√âREMPTIONS -->
                <div class="tab-pane fade" id="content-peremption" role="tabpanel">
                    {% if objets_peremption %}
                        <h5 class="fw-bold mb-4 text-warning-emphasis"><i class="bi bi-calendar-x me-2"></i>P√©remptions</h5>
                        <div class="table-responsive">
                            <table class="table table-hover align-middle">
                                <thead class="table-light">
                                    <tr><th class="ps-3">Objet</th><th>Date P√©remption</th><th class="text-end pe-3">√âtat</th></tr>
                                </thead>
                                <tbody>
                                    {% for objet in objets_peremption %}
                                    <tr>
                                        <td class="ps-3"><a href="{{ url_for('inventaire.voir_objet', objet_id=objet.id) }}" class="fw-bold text-dark text-decoration-none">{{ objet.nom }}</a></td>
                                        <td>{{ objet.date_peremption.strftime('%d/%m/%Y') }}</td>
                                        <td class="text-end pe-3">
                                            {% if objet.date_peremption < date_actuelle.date() %}
                                                <span class="badge bg-danger-subtle text-danger border border-danger-subtle">P√©rim√©</span>
                                            {% else %}
                                                <span class="badge bg-warning-subtle text-warning-emphasis border border-warning-subtle">Bient√¥t</span>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div class="text-center py-5">
                            <div class="mb-3">
                                <i class="bi bi-calendar-check text-success display-1 opacity-25"></i>
                            </div>
                            <h4 class="fw-bold text-success">Aucun produit p√©rim√©</h4>
                            <p class="text-muted">Votre inventaire est parfaitement √† jour.</p>
                        </div>
                    {% endif %}
                </div>

                <!-- 4. SUGGESTIONS -->
                <div class="tab-pane fade" id="content-suggestions" role="tabpanel">
                    {% if suggestions %}
                        <h5 class="fw-bold mb-4 text-dark"><i class="bi bi-cart-plus me-2"></i>Suggestions de Commande</h5>
                        <div class="table-responsive">
                            <table class="table table-hover align-middle">
                                <thead class="table-light">
                                    <tr>
                                        <th class="ps-4">Objet</th>
                                        <th>Demand√© par</th>
                                        <th class="text-center">Qt√©</th>
                                        <th>Note</th>
                                        {% if session.user_role == 'admin' %}<th class="text-end pe-4">Actions</th>{% endif %}
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for s in suggestions %}
                                    <tr>
                                        <td class="ps-4">
                                            <a href="{{ url_for('inventaire.voir_objet', objet_id=s.objet_id) }}" class="fw-bold text-dark text-decoration-none">{{ s.objet.nom }}</a>
                                            <div class="small text-muted">{{ s.date_demande.strftime('%d/%m') }}</div>
                                        </td>
                                        <td>
                                            <div class="d-flex align-items-center gap-2">
                                                <div class="rounded-circle bg-light border d-flex align-items-center justify-content-center" style="width: 24px; height: 24px; font-size: 0.7rem;">
                                                    {{ s.utilisateur.nom_utilisateur[0]|upper }}
                                                </div>
                                                <span class="small">{{ s.utilisateur.nom_utilisateur }}</span>
                                            </div>
                                        </td>
                                        <td class="text-center"><span class="badge bg-warning text-dark border border-warning-subtle">+{{ s.quantite }}</span></td>
                                        <td class="small text-muted fst-italic">{{ s.commentaire or '-' }}</td>
                                        {% if session.user_role == 'admin' %}
                                        <td class="text-end pe-4">
                                            <button class="btn btn-sm btn-success me-1" onclick="window.traiterSuggestion({{ s.id }}, 'valider')"><i class="bi bi-check-lg"></i></button>
                                            <button class="btn btn-sm btn-outline-danger" onclick="window.traiterSuggestion({{ s.id }}, 'refuser')"><i class="bi bi-x-lg"></i></button>
                                        </td>
                                        {% endif %}
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div class="text-center py-5">
                            <div class="mb-3">
                                <i class="bi bi-cart-check text-success display-1 opacity-25"></i>
                            </div>
                            <h4 class="fw-bold text-success">Aucune suggestion</h4>
                            <p class="text-muted">Il n'y a aucune demande d'achat en attente.</p>
                        </div>
                    {% endif %}
                </div>

                <!-- 5. OPTIMISATION -->
                <div class="tab-pane fade" id="content-dormants" role="tabpanel">
                    <div class="text-center py-5">
                        <div class="mb-3">
                            <div class="d-inline-flex align-items-center justify-content-center bg-light rounded-circle" style="width: 80px; height: 80px;">
                                <i class="bi bi-hourglass-split text-primary display-4 opacity-50"></i>
                            </div>
                        </div>
                        <h4 class="fw-bold text-primary">Optimisation du Stock</h4>
                        <p class="text-muted mb-4">Identifiez les produits qui n'ont pas √©t√© utilis√©s depuis plus d'un an pour lib√©rer de l'espace.</p>
                        <a href="{{ url_for('inventaire.objets_dormants') }}" class="btn btn-primary px-4 fw-bold">
                            <i class="bi bi-search me-2"></i>Analyser les stocks dormants
                        </a>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<!-- Modale de Confirmation Unique -->
<div class="modal fade" id="confirmationModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header text-white" id="modal-header-bg">
                <h5 class="modal-title" id="modal-title">Confirmation</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
                <p class="mb-0 fs-5" id="modal-message">Voulez-vous vraiment effectuer cette action ?</p>
            </div>
            <div class="modal-footer bg-light border-0">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Annuler</button>
                <button type="button" class="btn" id="btn-confirm-action">Confirmer</button>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    let currentId = null;
    let currentAction = null;
    let currentType = null;
    
    const modalElement = document.getElementById('confirmationModal');
    const confirmationModal = new bootstrap.Modal(modalElement);
    const confirmBtn = document.getElementById('btn-confirm-action');
    const modalHeader = document.getElementById('modal-header-bg');
    const modalTitle = document.getElementById('modal-title');
    const modalMessage = document.getElementById('modal-message');

    window.traiterSuggestion = function(id, action) {
        currentId = id;
        currentAction = action;
        currentType = 'suggestion';
        setupModal(action, 'suggestion');
        confirmationModal.show();
    };

    window.traiterSignalement = function(id, action) {
        currentId = id;
        currentAction = action;
        currentType = 'signalement';
        setupModal(action, 'signalement');
        confirmationModal.show();
    };

    function setupModal(action, type) {
        if (action === 'valider') {
            modalHeader.className = 'modal-header text-white bg-success';
            modalTitle.innerHTML = '<i class="bi bi-check-circle-fill me-2"></i>Valider';
            modalMessage.textContent = type === 'suggestion' ? "Valider cette commande ?" : "Marquer ce signalement comme pris en compte ?";
            confirmBtn.className = 'btn btn-success';
            confirmBtn.textContent = "Oui, Valider";
        } else {
            modalHeader.className = 'modal-header text-white bg-danger';
            modalTitle.innerHTML = '<i class="bi bi-trash-fill me-2"></i>Ignorer / Refuser';
            modalMessage.textContent = type === 'suggestion' ? "Supprimer cette suggestion ?" : "Supprimer ce signalement ?";
            confirmBtn.className = 'btn btn-danger';
            confirmBtn.textContent = "Oui, Supprimer";
        }
    }

    confirmBtn.addEventListener('click', function() {
        if (!currentId || !currentAction) return;
        confirmBtn.disabled = true;
        confirmBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Traitement...';

        let url = currentType === 'suggestion' ? 
            `/api/traiter_suggestion/${currentId}/${currentAction}` : 
            `/securite/api/traiter_signalement/${currentId}/${currentAction}`;

        fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'X-CSRFToken': "{{ csrf_token() }}" },
            body: JSON.stringify({})
        }).then(res => {
            if(res.ok) window.location.reload();
            else {
                alert("Erreur lors du traitement.");
                confirmBtn.disabled = false;
                confirmBtn.textContent = "R√©essayer";
            }
        });
    });
});
</script>
{% endblock %}

==================================================
FICHIER : templates\armoire.html
==================================================
{% extends "base.html" %}

{% block title %}Armoire : {{ armoire.nom }}{% endblock %}

{% block content %}

    <div class="main-container">
        <!-- Fil d'ariane Modernis√© -->
        {% include '_breadcrumb.html' %}
        
        <!-- En-t√™te Armoire (Style Admin - Vert) -->
        <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
            <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
                <!-- Ic√¥ne Armoire (Vert Nature) -->
                <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                     style="width: 48px; height: 48px; background: linear-gradient(135deg, #198754 0%, #20c997 100%);">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-box2-fill" viewBox="0 0 16 16">
                        <path d="M3.75 0a1 1 0 0 0-.8.4L.1 4.2a.5.5 0 0 0-.1.3V15a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V4.5a.5.5 0 0 0-.1-.3L13.05.4a1 1 0 0 0-.8-.4zM15 4.667V5H1v-.333L1.5 4h6V1h1v3h6z"/>
                    </svg>
                </div>
                <span>Contenu de l'armoire : <strong class="text-success">{{ armoire.nom }}</strong></span>
            </h2>
        </div>

        <!-- Contenu de l'inventaire -->
        <div id="inventory-content" 
             data-sort-by="{{ sort_by }}" 
             data-direction="{{ direction }}" 
             data-armoire-id="{{ armoire.id }}">
            
            {% include '_inventaire_content.html' %}
        </div>

        <!-- Barre d'action de masse (Modernis√©e) -->
        {% if session.user_role == 'admin' %}
        <div id="bulk-action-section" class="card border-0 shadow-sm mt-4 bg-light" style="display: none;">
            <div class="card-body d-flex align-items-center flex-wrap gap-3">
                <div class="d-flex align-items-center text-primary">
                    <i class="bi bi-check-square-fill fs-4 me-2"></i>
                    <span class="fw-bold">Action group√©e</span>
                </div>
                
                <div class="d-flex align-items-center gap-2 flex-grow-1">
                    <label for="move-destination" class="text-nowrap">D√©placer la s√©lection vers :</label>
                    <select id="move-destination" class="form-select w-auto" style="min-width: 200px;">
                        <option value="" disabled selected>Choisir une autre armoire...</option>
                        {% for autre_armoire in autres_armoires %}
                            <option value="{{ autre_armoire.id }}">{{ autre_armoire.nom }}</option>
                        {% endfor %}
                    </select>
                    <button id="bulk-move-btn" class="btn btn-primary">
                        <i class="bi bi-arrow-right-circle me-2"></i>D√©placer
                    </button>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
{% endblock %}

{% block scripts %}

{% endblock %}

==================================================
FICHIER : templates\a_propos.html
==================================================
{% extends "base.html" %}

{% block title %}√Ä Propos - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- HERO SECTION -->
    <div class="text-center mb-5 fade-in-up">
        <div class="d-inline-flex align-items-center justify-content-center p-3 bg-white rounded-circle shadow-sm mb-4" style="width: 80px; height: 80px;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="48" height="48">
                <defs>
                    <linearGradient id="heroGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#8B3FFF;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#00D4FF;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <rect x="20" y="20" width="472" height="472" rx="110" ry="110" fill="url(#heroGradient)"/>
                <text x="256" y="340" font-family="Arial, sans-serif" font-size="280" font-weight="900" fill="white" text-anchor="middle" letter-spacing="10">LF</text>
            </svg>
        </div>
        <h1 class="display-5 fw-bold text-dark mb-2">LabFlow</h1>
        <p class="lead text-muted mx-auto" style="max-width: 600px;">
            La solution moderne de gestion de mat√©riel pour les laboratoires p√©dagogiques.
            Simple, intuitive et collaborative.
        </p>
        <div class="mt-3">
            <span class="badge bg-light text-dark border px-3 py-2 rounded-pill">v2.0.1 (Stable)</span>
        </div>
    </div>

    <!-- MISSION -->
    <div class="row justify-content-center mb-5 fade-in-up" style="animation-delay: 0.1s;">
        <div class="col-lg-8">
            <div class="card border-0 shadow-sm p-4">
                <div class="card-body">
                    <h3 class="h5 fw-bold text-primary mb-3"><i class="bi bi-rocket-takeoff me-2"></i>Notre Mission</h3>
                    <p class="text-secondary mb-0">
                        LabFlow est n√© d'un constat simple : la gestion du mat√©riel en SVT/Physique-Chimie est souvent un casse-t√™te. 
                        Entre les fichiers Excel perdus, les r√©servations papier et les inventaires obsol√®tes, les enseignants perdent un temps pr√©cieux.
                        <br><br>
                        Notre objectif est de <strong>digitaliser et simplifier</strong> ce processus pour permettre aux √©quipes p√©dagogiques de se concentrer sur l'essentiel : l'enseignement.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- L'√âQUIPE (Ancre pour le lien du footer) -->
    <div id="auteurs" class="mb-5 fade-in-up" style="animation-delay: 0.2s;">
        <div class="text-center mb-4">
            <h2 class="h4 fw-bold text-dark">L'√âquipe</h2>
            <p class="text-muted small">Des enseignants au service des enseignants.</p>
        </div>

        <div class="row g-4 justify-content-center">
            <!-- Xavier -->
            <div class="col-md-5 col-lg-4">
                <div class="card h-100 border-0 shadow-sm text-center p-4 hover-card">
                    <div class="mx-auto mb-3 rounded-circle bg-primary-subtle text-primary d-flex align-items-center justify-content-center" style="width: 80px; height: 80px;">
                        <i class="bi bi-code-slash fs-1"></i>
                    </div>
                    <h4 class="h5 fw-bold mb-1">Xavier De Baudry d'Asson</h4>
                    <span class="badge bg-light text-primary border mb-3">Lead Developer & Backend</span>
                    <p class="text-muted small mb-4">
                        Enseignant SVT. Passionn√© par l'automatisation et l'architecture logicielle. 
                        A con√ßu le c≈ìur robuste de LabFlow (Python/Flask).
                    </p>
                    <a href="mailto:xavier.de-baudry-d-asson@ac-nancy-metz.fr" class="btn btn-sm btn-outline-primary rounded-pill px-4">Contact</a>
                </div>
            </div>

            <!-- Yll -->
            <div class="col-md-5 col-lg-4">
                <div class="card h-100 border-0 shadow-sm text-center p-4 hover-card">
                    <div class="mx-auto mb-3 rounded-circle bg-info-subtle text-info d-flex align-items-center justify-content-center" style="width: 80px; height: 80px;">
                        <i class="bi bi-palette fs-1"></i>
                    </div>
                    <h4 class="h5 fw-bold mb-1">Yll Basha</h4>
                    <span class="badge bg-light text-info border mb-3">UI/UX Designer & Frontend</span>
                    <p class="text-muted small mb-4">
                        Enseignant SVT. Obs√©d√© par l'exp√©rience utilisateur et le design √©pur√©. 
                        A donn√© √† LabFlow son visage moderne et intuitif.
                    </p>
                    <a href="mailto:yll.basha@ac-nancy-metz.fr" class="btn btn-sm btn-outline-info rounded-pill px-4">Contact</a>
                </div>
            </div>
        </div>
    </div>

    <!-- SECTION ADMIN (Licence) -->
{% if session.user_role == 'admin' %}
<div class="row justify-content-center fade-in-up" style="animation-delay: 0.3s;">
    <div class="col-lg-8">
        <div class="card border-0 shadow bg-dark text-white overflow-hidden">
            <div class="card-body p-4 position-relative">
                <!-- D√©co de fond -->
                <i class="bi bi-shield-lock position-absolute top-0 end-0 display-1 opacity-10 me-n3 mt-n3"></i>
                
                <h4 class="fw-bold mb-3"><i class="bi bi-cpu me-2"></i>√âtat du Syst√®me</h4>
                
                <div class="d-flex flex-wrap gap-4 align-items-center">
                    <div>
                        <small class="text-white-50 d-block mb-1">Licence</small>
                        {% if licence.is_pro %}
                            <span class="badge bg-warning text-dark"><i class="bi bi-star-fill me-1"></i>PRO</span>
                        {% else %}
                            <span class="badge bg-secondary">GRATUITE</span>
                        {% endif %}
                    </div>
                    
                    <div class="flex-grow-1">
                        <small class="text-white-50 d-block mb-1">Identifiant Instance</small>
                        <div class="input-group input-group-sm">
                            <!-- Ajout de l'ID 'instanceIdInput' pour le cibler en JS -->
                            <input type="text" 
                                   id="instanceIdInput"
                                   class="form-control bg-white bg-opacity-10 border-0 text-white font-monospace" 
                                   value="{{ licence.instance_id }}" 
                                   readonly>
                            
                            <!-- Modification du bouton pour appeler la fonction visuelle -->
                            <button class="btn btn-outline-light" type="button" onclick="copierAvecFeedback(this)" title="Copier">
                                <i class="bi bi-clipboard"></i>
                            </button>
                        </div>
                    </div>
                </div>

                {% if not licence.is_pro %}
                <div class="mt-4 pt-3 border-top border-white border-opacity-10">
                    <form action="{{ url_for('admin.activer_licence') }}" method="post" class="d-flex gap-2">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <input type="text" name="licence_cle" class="form-control form-control-sm bg-white bg-opacity-10 border-white border-opacity-25 text-white" placeholder="Cl√© d'activation..." required>
                        <button type="submit" class="btn btn-sm btn-warning fw-bold">Activer</button>
                    </form>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Script pour l'animation du bouton copier -->
<script>
function copierAvecFeedback(btn) {
    const input = document.getElementById('instanceIdInput');
    const icon = btn.querySelector('i');
    
    // 1. Copie
    navigator.clipboard.writeText(input.value).then(() => {
        // 2. Feedback Visuel (Succ√®s)
        const originalClass = icon.className;
        const originalBtnClass = btn.className;

        // On change l'ic√¥ne et la couleur du bouton
        icon.className = 'bi bi-check-lg';
        btn.className = 'btn btn-success'; // Devient vert plein

        // 3. Retour √† la normale apr√®s 2 secondes
        setTimeout(() => {
            icon.className = originalClass;
            btn.className = originalBtnClass;
        }, 2000);
    }).catch(err => {
        console.error('Erreur de copie :', err);
        alert("Impossible de copier automatiquement.");
    });
}
</script>
{% endif %}

</div>
{% endblock %}

==================================================
FICHIER : templates\base.html
==================================================
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <title>{% block title %}LabFlow{% endblock %}</title>
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
	<link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='images/favicon.svg') }}">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/apple-touch-icon.png') }}">
    {% block head_styles %}{% endblock %}
</head>
<body>
    <!-- 1. Stockage invisible des messages Flash (pour le JS) -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div id="flash-messages-storage" style="display: none;">
                {% for category, message in messages %}
                    <!-- On normalise les cat√©gories (danger -> error) pour notre fonction showToast -->
                    <div class="flash-data" 
                         data-category="{{ 'error' if category == 'danger' else category }}" 
                         data-message="{{ message }}"></div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <!-- 2. Structure de la page -->
    {% include 'header.html' %}
    {% include 'sub_header.html' %}

    <main class="main-content">
        {% block content %}{% endblock %}
    </main>
	
    {% include 'footer.html' %}
    
    <!-- 3. Modales Globales -->
    {% include '_modals.html' %}

    <!-- 4. √âl√©ments du Tour Guid√© (Cach√©s par d√©faut via CSS) -->
    <div id="tour-overlay" class="tour-overlay"></div>
    <div id="tour-tooltip" class="tour-tooltip">
        <div id="tour-title" class="tour-title"></div>
        <div id="tour-content" class="tour-content"></div>
        <div class="tour-actions">
            <button id="tour-btn-skip" class="tour-btn-skip">Passer</button>
            <button id="tour-btn-next" class="tour-btn-next">Suivant</button>
        </div>
    </div>
	
    <!-- 5. Conteneur des Toasts (Notifications) -->
    <div class="toast-container position-fixed top-0 start-0 p-3" style="z-index: 11000;"></div>

	<!-- Bouton Retour Haut -->
	<button id="backToTopBtn" class="btn-back-to-top" title="Remonter en haut">
		<i class="bi bi-arrow-up"></i>
	</button>

    <!-- 6. Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- script.js contient d√©sormais showToast() et la logique globale -->
    <script src="{{ url_for('static', filename='js/script.js') }}" defer></script>
    
    <!-- Script inline pour d√©clencher les toasts au chargement de la page -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const flashData = document.querySelectorAll('.flash-data');
            flashData.forEach(item => {
                // Appel de la fonction globale d√©finie dans script.js
                if (typeof showToast === 'function') {
                    showToast(item.dataset.message, item.dataset.category);
                }
            });
        });
    </script>
	<script type="module" src="{{ url_for('static', filename='js/modules/booking-modal.js') }}"></script>

    {% block scripts %}{% endblock %}
</body>
</html>

==================================================
FICHIER : templates\budget.html
==================================================
{% extends "base.html" %}

{% block title %}Suivi Budg√©taire - LabFlow{% endblock %}

{% block content %}

<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <!-- Ic√¥ne Euro (Harmonis√©e avec Dashboard) -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #48c6ef 0%, #6f86d6 100%);">
                <!-- SVG Euro -->
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="28" height="28" fill="currentColor">
                    <path d="M600-120q-118 0-210-67T260-360H120v-80h122q-2-11-2-20v-40q0-9 2-20H120v-80h140q38-106 130-173t210-67q69 0 130.5 24T840-748l-70 70q-35-29-78.5-45.5T600-740q-75 0-136.5 38.5T370-600h230v80H344q-2 11-3 20t-1 20q0 11 1 20t3 20h256v80H370q32 63 93.5 101.5T600-220q48 0 92.5-16.5T770-282l70 70q-48 44-109.5 68T600-120Z"/>
                </svg>
            </div>
            <span class="fw-bold">Suivi Budg√©taire</span>
        </h2>
    </div>

    <div class="row g-4">
        <!-- COLONNE GAUCHE : Synth√®se & Actions -->
        <div class="col-lg-4">
            <!-- Carte Synth√®se -->
            <div class="budget-summary-card mb-4">
                <h5 class="d-flex align-items-center gap-2 mb-3 text-dark fw-bold">
                    <i class="bi bi-pie-chart-fill text-primary"></i>
                    Synth√®se {{ annee_selectionnee | annee_scolaire }}
                </h5>
                
                {% if budget_affiche %}
                    <ul class="budget-stat-list">
                        <li class="budget-stat-item">
                            <span class="stat-label">Budget Initial</span>
                            <span class="stat-value val-neutral">{{ "%.2f"|format(budget_affiche.montant_initial) }} ‚Ç¨</span>
                        </li>
                        <li class="budget-stat-item">
                            <span class="stat-label">D√©penses Totales</span>
                            <span class="stat-value val-negative">- {{ "%.2f"|format(total_depenses) }} ‚Ç¨</span>
                        </li>
                        <li class="budget-stat-item pt-3 border-top border-2">
                            <span class="stat-label fw-bold text-dark">Solde Restant</span>
                            <span class="stat-value {% if solde >= 0 %}val-positive{% else %}val-negative{% endif %}">
                                {{ "%.2f"|format(solde) }} ‚Ç¨
                            </span>
                        </li>
                    </ul>
                {% else %}
                    <div class="alert alert-warning text-center small">
                        Aucun budget d√©fini pour cette ann√©e.
                    </div>
                {% endif %}

                <!-- ACTIONS (Visible uniquement pour ADMIN) -->
                {% if session.user_role == 'admin' %}
                <div class="budget-actions mt-4 pt-3 border-top">
                    <button class="btn btn-primary w-100 mb-2" 
                            data-bs-toggle="modal" 
                            data-bs-target="#budgetModal"
                            onclick="setupBudgetModal('{{ budget_actuel_pour_modales.annee if budget_actuel_pour_modales else annee_proposee_pour_creation }}', '{{ '%.2f'|format(budget_actuel_pour_modales.montant_initial) if budget_actuel_pour_modales else '0.00' }}')">
                        <i class="bi bi-pencil-square me-2"></i>
                        {% if budget_actuel_pour_modales %}Modifier le Budget{% else %}D√©finir le Budget{% endif %}
                    </button>
                    
                    <button class="btn btn-success w-100" 
							data-bs-toggle="modal" 
							data-bs-target="#depenseModal"
							onclick="resetDepenseModal()"
							{% if not budget_affiche or budget_affiche.cloture %}disabled{% endif %}>
						<i class="bi bi-plus-circle me-2"></i>Ajouter une D√©pense
					</button>

                    {% if budget_affiche and not budget_affiche.cloture %}
                        {% if cloture_autorisee %}
                            <!-- Formulaire identifi√© par id="formCloture" -->
                            <form action="{{ url_for('admin.cloturer_budget') }}" method="post" id="formCloture">
                                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                <input type="hidden" name="budget_id" value="{{ budget_affiche.id }}">
                                
                                <!-- Le bouton est de type "button" pour ouvrir la modale -->
                                <button type="button" class="btn btn-danger w-100 mt-2 shadow-sm" data-bs-toggle="modal" data-bs-target="#modalCloture">
                                    <i class="bi bi-lock-fill me-2"></i>Cl√¥turer l'ann√©e
                                </button>
                            </form>
                        {% else %}
                            <!-- Cas o√π la date n'est pas encore atteinte -->
                            <button class="btn btn-outline-secondary w-100 mt-2" disabled title="Possible √† partir du 01/06">
                                <i class="bi bi-lock me-2"></i>Cl√¥ture (d√®s juin)
                            </button>
                        {% endif %}
                    {% endif %}
                </div>
                {% endif %}
            </div>

            <!-- Carte Export (Visible pour TOUS) -->
            <div class="budget-summary-card export-card-premium">
				<div class="export-card-header">
					<div class="export-icon-wrapper">
						<i class="bi bi-file-earmark-arrow-down-fill"></i>
					</div>
					<h5 class="export-card-title">Exporter les D√©penses</h5>
				</div>
				
				<div class="export-zone-premium">
					<div class="period-selector">
						<label class="export-label">
							<i class="bi bi-calendar-range me-1"></i>
							P√©riode d'export
						</label>
						
						<div class="date-input-wrapper">
							<div class="date-input-group">
								<span class="date-prefix">Du</span>
								<input type="date" id="date_debut_export" class="date-input" 
									   value="2024-09-01" 
									   aria-label="Date de d√©but">
							</div>
							
							<div class="date-separator">
								<i class="bi bi-arrow-right"></i>
							</div>
							
							<div class="date-input-group">
								<span class="date-prefix">Au</span>
								<input type="date" id="date_fin_export" class="date-input" 
									   value="2026-01-07" 
									   aria-label="Date de fin">
							</div>
						</div>
					</div>
					
					<div class="export-actions">
						<button class="export-btn export-btn-pdf" onclick="exportData('pdf')">
							<span class="export-btn-icon">
								<i class="bi bi-file-pdf-fill"></i>
							</span>
							<span class="export-btn-content">
								<span class="export-btn-title">PDF</span>
								<span class="export-btn-subtitle">Document imprimable</span>
							</span>
						</button>
						
						<button class="export-btn export-btn-excel" onclick="exportData('excel')">
							<span class="export-btn-icon">
								<i class="bi bi-file-excel-fill"></i>
							</span>
							<span class="export-btn-content">
								<span class="export-btn-title">Excel</span>
								<span class="export-btn-subtitle">Tableau de donn√©es</span>
							</span>
						</button>
					</div>
				</div>
			</div>
        </div>

        <!-- COLONNE DROITE : Tableau D√©penses -->
        <div class="col-lg-8">
            <div class="card border-0 shadow-sm rounded-3 overflow-hidden h-100">
                <div class="card-header bg-white py-3 d-flex justify-content-between align-items-center">
                    <h5 class="mb-0 text-dark fw-bold">D√©tail des D√©penses</h5>
                    
                    <!-- S√©lecteur d'ann√©e -->
                    {% if budgets_archives %}
                    <form action="{{ url_for('admin.budget') }}" method="get" class="d-flex align-items-center gap-2">
                        <label for="annee_select" class="small text-muted mb-0 fw-bold text-uppercase">Ann√©e :</label>
                        <!-- Changement ici : classe sp√©cifique 'budget-year-select' -->
                        <select name="annee" id="annee_select" class="form-select form-select-sm budget-year-select" onchange="this.form.submit()">
                            {% for ba in budgets_archives %}
                                <option value="{{ ba.annee }}" {% if ba.annee == annee_selectionnee %}selected{% endif %}>
                                    {{ ba.annee | annee_scolaire }}
                                    {% if ba.cloture %}(Cl√¥tur√©){% else %}(Actif){% endif %}
                                </option>
                            {% endfor %}
                        </select>
                    </form>
                    {% endif %}
                </div>

                <div class="table-responsive">
                    <table class="budget-table mb-0">
                        <thead>
                            <tr>
                                <th style="width: 100px;">Date</th>
                                <th>Fournisseur</th>
                                <th>Libell√©</th>
                                <th class="text-end" style="width: 100px;">Montant</th>
                                {% if session.user_role == 'admin' %}
                                <th class="text-end" style="width: 100px;">Actions</th>
                                {% endif %}
                            </tr>
                        </thead>
                        <tbody>
                            {% if depenses %}
                                {% for depense in depenses %}
                                <tr>
                                    <td>{{ depense.date_depense.strftime('%d/%m/%Y') }}</td>
                                    <td>
                                        {% if depense.est_bon_achat %}
                                            <span class="badge bg-light text-dark border"><i class="bi bi-ticket-perforated me-1"></i>Bon d'achat</span>
                                        {% else %}
                                            <span class="fw-medium text-dark">{{ depense.fournisseur.nom if depense.fournisseur else 'N/A' }}</span>
                                        {% endif %}
                                    </td>
                                    <td class="text-muted small">{{ depense.contenu }}</td>
                                    <td class="text-end fw-bold text-danger">- {{ "%.2f"|format(depense.montant) }} ‚Ç¨</td>
                                    
                                    <!-- ACTIONS (Admin seulement) -->
                                    {% if session.user_role == 'admin' %}
                                    <td class="text-end">
                                        {% if not budget_affiche.cloture %}
                                        <div class="d-flex justify-content-end gap-1">
                                            <button class="btn btn-sm btn-outline-primary btn-icon-only" 
                                                    title="Modifier"
                                                    onclick='openEditDepenseModal({{ depense.id }}, "{{ depense.date_depense }}", "{{ depense.fournisseur_id or "" }}", {{ "true" if depense.est_bon_achat else "false" }}, "{{ depense.contenu|replace('"', '&quot;') }}", "{{ depense.montant }}")'>
                                                <i class="bi bi-pencil-fill"></i>
                                            </button>
                                            
                                            <button class="btn btn-sm btn-outline-danger btn-icon-only" 
                                                    title="Supprimer"
                                                    data-bs-toggle="modal" 
                                                    data-bs-target="#deleteModal"
                                                    data-url="{{ url_for('admin.supprimer_depense', id=depense.id) }}">
                                                <i class="bi bi-trash-fill"></i>
                                            </button>
                                        </div>
                                        {% endif %}
                                    </td>
                                    {% endif %}
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr>
                                    <td colspan="{{ 5 if session.user_role == 'admin' else 4 }}" class="text-center py-5 text-muted">
                                        <i class="bi bi-receipt display-4 d-block mb-3 opacity-25"></i>
                                        Aucune d√©pense enregistr√©e pour cette ann√©e.
                                    </td>
                                </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- MODALES (Uniquement pour ADMIN) -->
{% if session.user_role == 'admin' %}

    <!-- Modale Budget -->
    <div class="modal fade" id="budgetModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title"><i class="bi bi-cash-coin me-2"></i>Budget Annuel</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <form action="{{ url_for('admin.definir_budget') }}" method="post">
                    <div class="modal-body">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <div class="mb-3">
                            <label class="form-label">Ann√©e de d√©but (ex: 2025 pour 2025-2026)</label>
                            <input type="number" class="form-control" name="annee" id="budgetAnnee" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Montant Initial (‚Ç¨)</label>
                            <input type="number" step="0.01" class="form-control" name="montant_initial" id="budgetMontant" required>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                        <button type="submit" class="btn btn-primary">Enregistrer</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modale D√©pense -->
    <div class="modal fade" id="depenseModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="depenseModalTitle"><i class="bi bi-cart-plus me-2"></i>Nouvelle D√©pense</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <form id="depenseForm" action="{{ url_for('admin.ajouter_depense') }}" method="post">
                    <div class="modal-body">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <input type="hidden" name="budget_id" value="{{ budget_actuel_pour_modales.id if budget_actuel_pour_modales }}">
                        
                        <div class="mb-3">
                            <label class="form-label">Date</label>
                            <input type="date" class="form-control" name="date_depense" id="depenseDate" required value="{{ now.strftime('%Y-%m-%d') }}">
                        </div>

                        <div class="mb-3">
                            <div class="form-check form-switch mb-2">
                                <input class="form-check-input" type="checkbox" name="est_bon_achat" id="checkBonAchat" onchange="toggleFournisseur()">
                                <label class="form-check-label" for="checkBonAchat">C'est un Bon d'achat (Petit mat√©riel)</label>
                            </div>
                            
                            <div id="divFournisseur">
                                <label class="form-label">Fournisseur</label>
                                <select class="form-select" name="fournisseur_id" id="selectFournisseur">
                                    <option value="">-- Choisir --</option>
                                    {% for f in fournisseurs %}
                                        <option value="{{ f.id }}">{{ f.nom }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Libell√© / Contenu</label>
                            <textarea class="form-control" name="contenu" id="depenseContenu" rows="2" required></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Montant (‚Ç¨)</label>
                            <input type="number" step="0.01" class="form-control" name="montant" id="depenseMontant" required>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                        <button type="submit" class="btn btn-success">Valider</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modale Suppression -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title">Supprimer la d√©pense</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p>Voulez-vous vraiment supprimer cette d√©pense ? Le montant sera recr√©dit√© au budget.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <form id="deleteForm" method="post" action="">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <button type="submit" class="btn btn-danger">Supprimer</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

{% endif %}

{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // On cible les inputs number
        const numberInputs = document.querySelectorAll('input[type="number"]');

        numberInputs.forEach(input => {
            // 1. ASTUCE : On passe en mode "texte" pour avoir le contr√¥le total
            // tout en gardant le clavier num√©rique sur mobile
            input.type = "text";
            input.inputMode = "decimal";
            
            // 2. Gestion de la touche Point
            input.addEventListener('keydown', function(e) {
                if (e.key === '.' || e.key === 'Decimal') {
                    e.preventDefault();
                    
                    const start = this.selectionStart;
                    const end = this.selectionEnd;
                    const val = this.value;
                    
                    // On n'ajoute la virgule que s'il n'y en a pas d√©j√† une
                    if (!val.includes(',')) {
                        this.value = val.substring(0, start) + ',' + val.substring(end);
                        // On replace le curseur apr√®s la virgule (√ßa marche car on est en type="text")
                        this.setSelectionRange(start + 1, start + 1);
                    }
                }
            });

            // 3. S√©curit√© : On emp√™che d'√©crire des lettres (puisqu'on est pass√© en text)
            input.addEventListener('input', function(e) {
                // On ne garde que les chiffres et la virgule
                let val = this.value.replace(/[^0-9,]/g, '');
                
                // On s'assure qu'il n'y a qu'une seule virgule
                const parts = val.split(',');
                if (parts.length > 2) {
                    val = parts[0] + ',' + parts.slice(1).join('');
                }
                
                if (this.value !== val) {
                    this.value = val;
                }
            });
        });
    });
</script>
<script>	
	// Gestion dynamique du champ Fournisseur
    function toggleFournisseur() {
        const isBonAchat = document.getElementById('checkBonAchat').checked;
        const divFournisseur = document.getElementById('divFournisseur');
        const selectFournisseur = document.getElementById('selectFournisseur');
        
        if (isBonAchat) {
            divFournisseur.style.display = 'none';
            selectFournisseur.required = false;
            selectFournisseur.value = "";
        } else {
            divFournisseur.style.display = 'block';
            selectFournisseur.required = true;
        }
    }

    // Pr√©pa Modale Budget
    function setupBudgetModal(annee, montant) {
        document.getElementById('budgetAnnee').value = annee;
        document.getElementById('budgetMontant').value = montant;
    }

    // Reset Modale D√©pense (Ajout)
    function resetDepenseModal() {
        document.getElementById('depenseModalTitle').innerHTML = '<i class="bi bi-cart-plus me-2"></i>Nouvelle D√©pense';
        document.getElementById('depenseForm').action = "{{ url_for('admin.ajouter_depense') }}";
        document.getElementById('depenseDate').value = new Date().toISOString().split('T')[0];
        document.getElementById('checkBonAchat').checked = false;
        document.getElementById('depenseContenu').value = '';
        document.getElementById('depenseMontant').value = '';
        toggleFournisseur();
        
        // Reset select
        document.getElementById('selectFournisseur').value = "";
    }

    // Pr√©pa Modale D√©pense (Modif)
    function openEditDepenseModal(id, date, fournisseurId, isBonAchat, contenu, montant) {
        const modal = new bootstrap.Modal(document.getElementById('depenseModal'));
        modal.show();

        document.getElementById('depenseModalTitle').innerHTML = '<i class="bi bi-pencil-square me-2"></i>Modifier la D√©pense';
        document.getElementById('depenseForm').action = "/admin/budget/depense/modifier/" + id;
        
        document.getElementById('depenseDate').value = date.split(' ')[0]; // Garde YYYY-MM-DD
        document.getElementById('checkBonAchat').checked = isBonAchat;
        document.getElementById('depenseContenu').value = contenu;
        document.getElementById('depenseMontant').value = montant;
        
        toggleFournisseur(); // Met √† jour l'affichage
        
        if (!isBonAchat) {
            document.getElementById('selectFournisseur').value = fournisseurId;
        }
    }

    // Suppression
    const deleteModal = document.getElementById('deleteModal');
    if (deleteModal) {
        deleteModal.addEventListener('show.bs.modal', function(event) {
            const button = event.relatedTarget;
            const url = button.dataset.url;
            document.getElementById('deleteForm').action = url;
        });
    }

    // Export (Redirection simple)
    function exportData(format) {
        // 1. R√©cup√©ration des valeurs des champs date
        const dateDebut = document.getElementById('date_debut_export').value;
        const dateFin = document.getElementById('date_fin_export').value;
        
        // 2. Validations basiques c√¥t√© client
        if (!dateDebut || !dateFin) {
            alert("Veuillez s√©lectionner une date de d√©but et une date de fin.");
            return;
        }

        if (dateDebut > dateFin) {
            alert("La date de d√©but ne peut pas √™tre post√©rieure √† la date de fin.");
            return;
        }

        // 3. Construction de l'URL vers la route Flask
        // On passe les param√®tres en GET query string
        const url = `/admin/budget/exporter?format=${format}&date_debut=${dateDebut}&date_fin=${dateFin}`;
        
        // 4. D√©clenchement du t√©l√©chargement
        // Le navigateur va suivre le lien, le serveur va renvoyer le fichier (attachment),
        // et l'utilisateur restera sur la page actuelle.
        window.location.href = url;
    }
</script>

<!-- MODALE DE CONFIRMATION CL√îTURE -->
<div class="modal fade" id="modalCloture" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">
            <!-- Header Rouge -->
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title fw-bold">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i>Cl√¥ture du Budget
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            
            <div class="modal-body p-4">
                <p class="fw-bold text-dark mb-2">√ätes-vous s√ªr de vouloir cl√¥turer l'ann√©e {{ budget_affiche.annee }}-{{ budget_affiche.annee + 1 }} ?</p>
                
                <div class="alert alert-warning d-flex align-items-start gap-2 mb-0">
                    <i class="bi bi-info-circle-fill mt-1 flex-shrink-0"></i>
                    <div class="small">
                        Cette action est <strong>irr√©versible</strong>.<br>
                        Vous ne pourrez plus ajouter, modifier ou supprimer de d√©penses pour cette ann√©e budg√©taire une fois cl√¥tur√©e.
                    </div>
                </div>
            </div>
            
            <div class="modal-footer bg-light border-0">
                <button type="button" class="btn btn-light fw-bold" data-bs-dismiss="modal">Annuler</button>
                <!-- Ce bouton d√©clenche la soumission du formulaire d√©fini plus haut -->
                <button type="button" class="btn btn-danger fw-bold" onclick="document.getElementById('formCloture').submit()">
                    <i class="bi bi-lock-fill me-2"></i>Confirmer la cl√¥ture
                </button>
            </div>
        </div>
    </div>
</div>

<!-- ... fin du contenu HTML ... -->
{% endblock %}

==================================================
FICHIER : templates\calendrier.html
==================================================
{% extends "base.html" %}
{% block title %}Calendrier de R√©servation{% endblock %}
{% block content %}
    <div class="main-container">
        {% include '_breadcrumb.html' %}
        <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
			<h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
				<!-- Ic√¥ne Calendrier (Orange) -->
				<div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
					 style="width: 48px; height: 48px; background: linear-gradient(135deg, #fd7e14 0%, #fcc419 100%);">
					<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-calendar2-week-fill" viewBox="0 0 16 16">
						<path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5m9.954 3H2.545c-.3 0-.545.224-.545.5v1c0 .276.244.5.545.5h10.91c.3 0 .545-.224.545-.5v-1c0-.276-.244-.5-.546-.5M8.5 7a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM3 10.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5m3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"/>
					</svg>
				</div>
				<span class="fw-bold">Calendrier de R√©servation</span>
			</h2>
			
			<!-- (Si tu as des boutons d'action pour le calendrier, ils vont ici) -->
		</div>
			<div id="calendrier-container" class="content-card">
				<div class="calendrier-header">
					<button id="prev-month-btn" class="btn btn-primary btn-sm">&lt; Pr√©c√©dent</button>
					<h3 id="current-month-year"></h3>
					<button id="next-month-btn" class="btn btn-primary btn-sm">Suivant &gt;</button>
				</div>
				<div class="calendrier-grid"></div>
			</div>
		</div>
    <div id="reservation-tooltip" class="tooltip"></div>
{% endblock %}
{% block scripts %}
    <script src="{{ url_for('static', filename='js/modules/calendar-monthly.js') }}" type="module"></script>
{% endblock %}

==================================================
FICHIER : templates\categorie.html
==================================================
{% extends "base.html" %}

{% block title %}Cat√©gorie : {{ categorie.nom }} - LabFlow{% endblock %}

{% block content %}
    <div class="main-container">
        <!-- Fil d'ariane -->
         {% include '_breadcrumb.html' %}

        <!-- En-t√™te Cat√©gorie (Style Admin - Rose) -->
        <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
            <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
                <!-- Ic√¥ne Cat√©gorie (Rose Vif) -->
                <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                     style="width: 48px; height: 48px; background: linear-gradient(135deg, #f77062 0%, #fe5196 100%);">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-inboxes-fill" viewBox="0 0 16 16">
                        <path d="M4.98 1a.5.5 0 0 0-.39.188L1.54 5H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0A.5.5 0 0 1 10 5h4.46l-3.05-3.812A.5.5 0 0 0 11.02 1zM3.81.563A1.5 1.5 0 0 1 4.98 0h6.04a1.5 1.5 0 0 1 1.17.563l3.7 4.625a.5.5 0 0 1 .106.374l-.39 3.124A1.5 1.5 0 0 1 14.117 10H1.883A1.5 1.5 0 0 1 .394 8.686l-.39-3.124a.5.5 0 0 1 .106-.374zM.125 11.17A.5.5 0 0 1 .5 11H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0 .5.5 0 0 1 .5-.5h5.5a.5.5 0 0 1 .496.562l-.39 3.124A1.5 1.5 0 0 1 14.117 16H1.883a1.5 1.5 0 0 1-1.489-1.314l-.39-3.124a.5.5 0 0 1 .121-.393z"/>
                    </svg>
                </div>
                <!-- CORRECTION ICI : categorie.nom -->
                <span>Objets dans la cat√©gorie : <strong style="color: #fe5196;">{{ categorie.nom }}</strong></span>
            </h2>
        </div>

        <!-- Contenu de l'inventaire -->
        <div id="inventory-content" 
             data-sort-by="{{ sort_by }}" 
             data-direction="{{ direction }}" 
             data-categorie-id="{{ categorie.id }}">
            
            {% include '_inventaire_content.html' %}
        </div>

        <!-- Barre d'action de masse (Modernis√©e) -->
        {% if session.user_role == 'admin' %}
        <div id="bulk-action-section" class="card border-0 shadow-sm mt-4 bg-light" style="display: none;">
            <div class="card-body d-flex align-items-center flex-wrap gap-3">
                <div class="d-flex align-items-center text-primary">
                    <i class="bi bi-check-square-fill fs-4 me-2"></i>
                    <span class="fw-bold">Action group√©e</span>
                </div>
                
                <div class="d-flex align-items-center gap-2 flex-grow-1">
                    <label for="move-destination" class="text-nowrap">D√©placer la s√©lection vers :</label>
                    <select id="move-destination" class="form-select w-auto" style="min-width: 200px;">
                        <option value="" disabled selected>Choisir une autre cat√©gorie...</option>
                        {% for c in categories_list %}
                            <!-- CORRECTION ICI : c.id != categorie.id -->
                            {% if c.id != categorie.id %}
                                <option value="{{ c.id }}">{{ c.nom }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                    <button id="bulk-move-btn" class="btn btn-primary">
                        <i class="bi bi-arrow-right-circle me-2"></i>D√©placer
                    </button>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
{% endblock %}

{% block scripts %}
    <!-- Cette page n'a pas besoin de script de type "module" sp√©cifique -->
{% endblock %}

==================================================
FICHIER : templates\documentation.html
==================================================
{% extends "base.html" %}

{% block title %}Documentation & Aide - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te -->
    <div class="d-flex justify-content-between align-items-center mb-5 pb-3 border-bottom">
        <div class="d-flex align-items-center gap-3">
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 56px; height: 56px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <i class="bi bi-book-half fs-3"></i>
            </div>
            <div>
                <h1 class="h3 mb-0 fw-bold text-dark">Documentation LabFlow</h1>
                <p class="text-muted mb-0">Guide technique et fonctionnel complet</p>
            </div>
        </div>
        <button onclick="window.print()" class="btn btn-outline-secondary d-none d-md-block">
            <i class="bi bi-printer me-2"></i>Imprimer
        </button>
    </div>

    <div class="row g-5">
        <!-- MENU LAT√âRAL (Sticky) -->
        <div class="col-lg-3 d-none d-lg-block">
            <nav id="doc-navbar" class="h-100 flex-column align-items-stretch pe-4 border-end position-sticky" style="top: 2rem;">
                <nav class="nav nav-pills flex-column">
                    <a class="nav-link active fw-bold mb-2" href="#section-intro">
                        <i class="bi bi-info-circle me-2"></i>Introduction
                    </a>
                    <a class="nav-link fw-bold mb-2" href="#section-tech">
                        <i class="bi bi-code-slash me-2"></i>Architecture
                    </a>
                    <a class="nav-link fw-bold mb-2" href="#section-inventaire">
                        <i class="bi bi-box-seam me-2"></i>Inventaire
                    </a>
                    <a class="nav-link fw-bold mb-2" href="#section-reservation">
                        <i class="bi bi-calendar-check me-2"></i>R√©servations
                    </a>
                    <a class="nav-link fw-bold mb-2" href="#section-securite">
                        <i class="bi bi-shield-check me-2"></i>S√©curit√©
                    </a>
                    <a class="nav-link fw-bold mb-2" href="#section-budget">
                        <i class="bi bi-wallet2 me-2"></i>Budget
                    </a>
                    {% if session.user_role == 'admin' %}
                    <a class="nav-link fw-bold mb-2" href="#section-admin">
                        <i class="bi bi-gear-fill me-2"></i>Administration
                    </a>
                    {% endif %}
                    <a class="nav-link fw-bold mb-2" href="#section-support">
                        <i class="bi bi-life-preserver me-2"></i>Support & D√©pannage
                    </a>
                </nav>
            </nav>
        </div>

        <!-- CONTENU -->
        <div class="col-lg-9">
            <div data-bs-spy="scroll" data-bs-target="#doc-navbar" data-bs-smooth-scroll="true" tabindex="0">
                
                <!-- 1. INTRODUCTION -->
                <section id="section-intro" class="mb-5">
                    <h3 class="fw-bold text-dark mb-4">√Ä propos de LabFlow</h3>
                    <p class="lead text-muted">
                        LabFlow est une solution SaaS de gestion de laboratoire scolaire (SVT/Physique-Chimie) con√ßue pour simplifier le quotidien des enseignants et des gestionnaires.
                    </p>
                    <div class="row g-3 mt-2">
                        <div class="col-md-4">
                            <div class="p-3 border rounded bg-light h-100">
                                <h6 class="fw-bold"><i class="bi bi-check-circle text-success me-2"></i>Centralisation</h6>
                                <p class="small mb-0">Tout votre mat√©riel, vos produits et vos documents au m√™me endroit.</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="p-3 border rounded bg-light h-100">
                                <h6 class="fw-bold"><i class="bi bi-check-circle text-success me-2"></i>Planification</h6>
                                <p class="small mb-0">Un calendrier intuitif pour √©viter les conflits de r√©servation.</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="p-3 border rounded bg-light h-100">
                                <h6 class="fw-bold"><i class="bi bi-check-circle text-success me-2"></i>S√©curit√©</h6>
                                <p class="small mb-0">Suivi rigoureux des maintenances et des produits dangereux.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <hr class="my-5">

                <!-- 2. ARCHITECTURE TECHNIQUE -->
                <section id="section-tech" class="mb-5">
                    <h3 class="fw-bold text-dark mb-4">
                        <i class="bi bi-code-slash text-primary me-2"></i>Architecture Technique
                    </h3>
                    <p>LabFlow est construit sur une stack technologique moderne et robuste, garantissant performance et s√©curit√©.</p>
                    
                    <div class="card border-0 shadow-sm mb-4">
                        <div class="card-body">
                            <h5 class="fw-bold mb-3">Le C≈ìur (Backend)</h5>
                            <ul class="list-unstyled">
                                <li class="mb-2"><i class="bi bi-caret-right-fill text-primary me-2"></i><strong>Python (Flask) :</strong> Le moteur de l'application. L√©ger, rapide et s√©curis√©.</li>
                                <li class="mb-2"><i class="bi bi-caret-right-fill text-primary me-2"></i><strong>SQLAlchemy (ORM) :</strong> Gestion avanc√©e de la base de donn√©es relationnelle.</li>
                                <li class="mb-2"><i class="bi bi-caret-right-fill text-primary me-2"></i><strong>SQLite / PostgreSQL :</strong> Stockage des donn√©es (compatible cloud et local).</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <hr class="my-5">

                <!-- 3. INVENTAIRE -->
                <section id="section-inventaire" class="mb-5">
                    <h3 class="fw-bold text-dark mb-4">
                        <i class="bi bi-box-seam text-primary me-2"></i>Gestion de l'Inventaire
                    </h3>
                    
                    <div class="accordion shadow-sm border-0 rounded-3 overflow-hidden" id="accInventaire">
                        <div class="accordion-item border-0 border-bottom">
                            <h2 class="accordion-header">
                                <button class="accordion-button fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#inv1">
                                    Organisation (Armoires & Cat√©gories)
                                </button>
                            </h2>
                            <div id="inv1" class="accordion-collapse collapse show" data-bs-parent="#accInventaire">
                                <div class="accordion-body text-muted">
                                    L'inventaire est structur√© par <strong>Armoires</strong> (localisation physique) et par <strong>Cat√©gories</strong> (type de mat√©riel). 
                                    Vous pouvez cr√©er autant d'armoires et de cat√©gories que n√©cessaire via le menu "G√©rer".
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item border-0 border-bottom">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#inv2">
                                    Fiches de Donn√©es de S√©curit√© (FDS)
                                </button>
                            </h2>
                            <div id="inv2" class="accordion-collapse collapse" data-bs-parent="#accInventaire">
                                <div class="accordion-body text-muted">
                                    Pour les produits chimiques, vous pouvez associer une FDS (PDF ou lien URL). 
                                    Une ic√¥ne <i class="bi bi-file-earmark-pdf text-danger"></i> appara√Ætra dans la liste pour un acc√®s rapide en cas d'urgence.
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <hr class="my-5">

                <!-- 4. R√âSERVATIONS -->
                <section id="section-reservation" class="mb-5">
                    <h3 class="fw-bold text-dark mb-4">
                        <i class="bi bi-calendar-check text-success me-2"></i>Syst√®me de R√©servation
                    </h3>
                    <p>Le module de r√©servation emp√™che les conflits de stock en temps r√©el.</p>
                    
                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="card h-100 border-0 shadow-sm bg-light">
                                <div class="card-body">
                                    <h6 class="fw-bold">1. Le Panier</h6>
                                    <p class="small text-muted mb-0">
                                        Ajoutez des objets ou des kits √† votre panier. Le syst√®me v√©rifie instantan√©ment la disponibilit√© pour la date choisie.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100 border-0 shadow-sm bg-light">
                                <div class="card-body">
                                    <h6 class="fw-bold">2. Le Calendrier</h6>
                                    <p class="small text-muted mb-0">
                                        Visualisez toutes les r√©servations sur une vue mensuelle ou journali√®re. Cliquez sur une r√©servation pour voir le d√©tail ou la modifier.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <hr class="my-5">

                <!-- 5. S√âCURIT√â -->
                <section id="section-securite" class="mb-5">
                    <h3 class="fw-bold text-dark mb-4">
                        <i class="bi bi-shield-check text-danger me-2"></i>S√©curit√© & Maintenance
                    </h3>
                    <p>Ce module critique permet de suivre la conformit√© des √©quipements (Hottes, Extincteurs, Douches...).</p>

                    <div class="alert alert-light border-start border-4 border-danger shadow-sm">
                        <h6 class="fw-bold text-danger"><i class="bi bi-exclamation-triangle me-2"></i>Signalement d'incident</h6>
                        <p class="small mb-0">
                            Tout utilisateur peut signaler un dysfonctionnement via le bouton <strong>"Signaler"</strong>. 
                            L'administrateur re√ßoit une alerte imm√©diate sur son tableau de bord et peut traiter la demande.
                        </p>
                    </div>
                </section>

                <hr class="my-5">

                <!-- 6. BUDGET -->
                <section id="section-budget" class="mb-5">
                    <h3 class="fw-bold text-dark mb-4">
                        <i class="bi bi-wallet2 text-info me-2"></i>Suivi Budg√©taire
                    </h3>
                    <div class="card border-0 shadow-sm">
                        <div class="card-body">
                            <ul class="list-unstyled mb-0">
                                <li class="mb-3">
                                    <strong><i class="bi bi-check2 text-primary me-2"></i>Ann√©es Fiscales :</strong> 
                                    Le budget est g√©r√© par ann√©e scolaire. Basculez d'une ann√©e √† l'autre via le s√©lecteur.
                                </li>
                                <li class="mb-3">
                                    <strong><i class="bi bi-check2 text-primary me-2"></i>D√©penses :</strong> 
                                    Enregistrez vos commandes. Le solde restant est calcul√© en temps r√©el.
                                </li>
                                <li>
                                    <strong><i class="bi bi-check2 text-primary me-2"></i>Cl√¥ture :</strong> 
                                    En fin d'ann√©e, l'administrateur peut cl√¥turer le budget pour figer les comptes (irr√©versible).
                                </li>
                            </ul>
                        </div>
                    </div>
                </section>

                <hr class="my-5">

                <!-- 7. ADMINISTRATION -->
                {% if session.user_role == 'admin' %}
                <section id="section-admin" class="mb-5">
                    <h3 class="fw-bold text-dark mb-4">
                        <i class="bi bi-gear-fill text-secondary me-2"></i>Administration
                    </h3>
                    
                    <div class="row g-4 mb-4">
                        <div class="col-md-6">
                            <div class="card h-100 border-0 shadow-sm">
                                <div class="card-body">
                                    <h5 class="fw-bold text-primary"><i class="bi bi-cloud-download me-2"></i>Sauvegardes</h5>
                                    <p class="text-muted small">
                                        Exportez toutes vos donn√©es (Inventaire, Historique, Param√®tres) dans un fichier JSON s√©curis√©. 
                                        <strong>C'est votre assurance vie :</strong> faites-le r√©guli√®rement.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100 border-0 shadow-sm">
                                <div class="card-body">
                                    <h5 class="fw-bold text-success"><i class="bi bi-file-earmark-spreadsheet me-2"></i>Import Excel</h5>
                                    <p class="text-muted small">
                                        Ajoutez des centaines d'objets en une fois gr√¢ce au mod√®le Excel fourni. Id√©al pour l'initialisation du laboratoire.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Focus Continuit√© -->
                    <div class="card bg-light border-0 shadow-sm">
                        <div class="card-body">
                            <h5 class="fw-bold mb-3"><i class="bi bi-arrow-repeat me-2"></i>Continuit√© de Service (Changement de PC)</h5>
                            <p class="small text-muted mb-2">
                                Si vous devez changer d'ordinateur ou r√©installer l'application, suivez cette proc√©dure pour ne rien perdre :
                            </p>
                            <ol class="small text-muted mb-0">
                                <li>Sur l'ancien poste, allez dans <strong>Admin > Sauvegardes</strong> et cliquez sur "T√©l√©charger la base".</li>
                                <li>Installez LabFlow sur le nouveau poste (cr√©ez un compte admin temporaire).</li>
                                <li>Allez dans <strong>Admin > Sauvegardes</strong> et importez votre fichier JSON.</li>
                                <li>Tout est restaur√© : vos donn√©es, vos comptes utilisateurs et votre <strong>Licence PRO</strong>.</li>
                            </ol>
                        </div>
                    </div>
                </section>
                {% endif %}

                <hr class="my-5">

                <!-- 8. SUPPORT & D√âPANNAGE -->
                <section id="section-support" class="mb-5">
                    <h3 class="fw-bold text-dark mb-4">
                        <i class="bi bi-life-preserver text-danger me-2"></i>Support & D√©pannage
                    </h3>

                    <div class="accordion shadow-sm border-0 rounded-3 overflow-hidden mb-4" id="accSupport">
                        
                        <!-- Probl√®me de Licence -->
                        <div class="accordion-item border-0 border-bottom">
                            <h2 class="accordion-header">
                                <button class="accordion-button fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#sup1">
                                    Ma licence PRO s'est d√©sactiv√©e, pourquoi ?
                                </button>
                            </h2>
                            <div id="sup1" class="accordion-collapse collapse show" data-bs-parent="#accSupport">
                                <div class="accordion-body text-muted">
                                    La licence est li√©e √† l'<strong>Identifiant unique de votre installation</strong> (Instance ID).
                                    <br>Si vous changez d'ordinateur ou r√©installez l'application, cet identifiant change et la licence se d√©sactive par s√©curit√©.
                                    <br><strong>Solution :</strong> Contactez le support en fournissant votre nouvel "Identifiant Instance" (visible dans la page √Ä Propos) pour obtenir une nouvelle cl√©.
                                </div>
                            </div>
                        </div>

                        <!-- Bug Application -->
                        <div class="accordion-item border-0">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#sup2">
                                    J'ai rencontr√© un bug ou une erreur
                                </button>
                            </h2>
                            <div id="sup2" class="accordion-collapse collapse" data-bs-parent="#accSupport">
                                <div class="accordion-body text-muted">
                                    Si une page affiche une erreur ou ne fonctionne pas comme pr√©vu :
                                    <ol class="mb-0">
                                        <li>Essayez de rafra√Æchir la page (F5).</li>
                                        <li>V√©rifiez que vous √™tes bien connect√©.</li>
                                        <li>Si le probl√®me persiste, contactez le support en d√©crivant l'action qui a provoqu√© l'erreur.</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Carte Contact -->
                    <div class="card border-0 bg-primary text-white shadow">
                        <div class="card-body p-5 text-center">
                            <h4 class="fw-bold mb-2">Besoin d'une assistance personnalis√©e ?</h4>
                            <p class="opacity-75 mb-4">Notre √©quipe est l√† pour vous accompagner.</p>
                            <a href="mailto:contact.gmlcl@gmail.com" class="btn btn-light text-primary fw-bold px-5 rounded-pill shadow-sm">
                                <i class="bi bi-envelope-fill me-2"></i>Contacter le support
                            </a>
                        </div>
                    </div>
                </section>

                <!-- Footer Doc -->
                <div class="text-center mt-5 pt-5 border-top text-muted">
                    <p class="mb-1 fw-bold">LabFlow v1.0</p>
                    <small>D√©velopp√© pour simplifier la gestion des laboratoires scolaires.</small>
                </div>

            </div>
        </div>
    </div>
</div>

<style>
    /* Style sp√©cifique pour la navigation lat√©rale */
    #doc-navbar .nav-link {
        color: #64748b;
        border-radius: 8px;
        padding: 10px 15px;
        transition: all 0.2s;
    }
    #doc-navbar .nav-link:hover {
        background-color: #f1f5f9;
        color: #1e293b;
    }
    #doc-navbar .nav-link.active {
        background-color: #e0e7ff;
        color: #4f46e5;
    }
    
    /* Impression propre */
    @media print {
        .col-lg-3, .btn, header, footer { display: none !important; }
        .col-lg-9 { width: 100% !important; }
        .main-container { padding: 0 !important; }
        .card { border: 1px solid #ddd !important; box-shadow: none !important; }
    }
</style>
{% endblock %}

==================================================
FICHIER : templates\dormants.html
==================================================
{% extends "base.html" %}

{% block title %}Stocks Dormants - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    {% include '_breadcrumb.html' %}

    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #6c757d 0%, #495057 100%);">
                <i class="bi bi-hourglass-bottom fs-4"></i>
            </div>
            <div>
                <span class="fw-bold">Stocks Dormants</span>
                <div class="text-muted small fw-normal">Objets non utilis√©s depuis plus d'un an</div>
            </div>
        </h2>
        <span class="badge bg-secondary rounded-pill">{{ objets|length }} objets d√©tect√©s</span>
    </div>

    {% if objets %}
    <div class="card border-0 shadow-sm rounded-3 overflow-hidden">
        <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
                <thead class="table-light">
                    <tr>
                        <th>Objet</th>
                        <th>Emplacement</th>
                        <th class="text-center">Stock</th>
                        <th>Derni√®re Utilisation</th>
                        <th class="text-end">Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for obj in objets %}
                    <tr>
                        <td>
                            <div class="d-flex align-items-center gap-3">
                                {% if obj['image'] %}
                                    {% if obj['image'].startswith('http') %}
                                        <img src="{{ obj['image'] }}" class="rounded border" style="width: 40px; height: 40px; object-fit: contain;">
                                    {% else %}
                                        <img src="{{ url_for('static', filename=obj['image']) }}" class="rounded border" style="width: 40px; height: 40px; object-fit: contain;">
                                    {% endif %}
                                {% else %}
                                    <div class="rounded bg-light d-flex align-items-center justify-content-center border" style="width: 40px; height: 40px;">
                                        <i class="bi bi-box text-muted"></i>
                                    </div>
                                {% endif %}
                                <div>
                                    <div class="fw-bold text-dark">{{ obj['nom'] }}</div>
                                    <div class="small text-muted">{{ obj['categorie'] }}</div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <span class="badge bg-light text-dark border">
                                <i class="bi bi-archive me-1"></i>{{ obj['armoire'] }}
                            </span>
                        </td>
                        <td class="text-center fw-bold">{{ obj['quantite'] }}</td>
                        <td>
                            {% if obj['derniere_utilisation'] %}
                                <span class="text-warning fw-bold">
                                    {{ obj['derniere_utilisation'].strftime('%d/%m/%Y') }}
                                </span>
                                <div class="x-small text-muted">
                                    il y a {{ ((now - obj['derniere_utilisation']).days / 365)|round(1) }} ans
                                </div>
                            {% else %}
                                <span class="badge bg-secondary-subtle text-secondary border border-secondary-subtle">Jamais utilis√©</span>
                            {% endif %}
                        </td>
                        <td class="text-end">
                            <div class="d-flex justify-content-end gap-2">
                                <a href="{{ url_for('inventaire.voir_objet', objet_id=obj['id']) }}" class="btn btn-sm btn-outline-secondary" title="Voir la fiche">
                                    <i class="bi bi-eye"></i>
                                </a>
                                
                                <!-- BOUTON D'ACTION (Avec data-nom pour la modale) -->
                                <button class="btn btn-sm btn-success btn-open-validate" 
                                        data-id="{{ obj['id'] }}" 
                                        data-nom="{{ obj['nom'] }}"
                                        title="Marquer comme v√©rifi√© (Garder)">
                                    <i class="bi bi-check-lg"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% else %}
    <div class="text-center py-5">
        <div class="mb-3">
            <i class="bi bi-stars display-1 text-warning opacity-50"></i>
        </div>
        <h4 class="fw-bold text-dark">Optimisation parfaite !</h4>
        <p class="text-muted">Tous vos objets ont √©t√© utilis√©s au moins une fois cette ann√©e.</p>
        <a href="{{ url_for('inventaire.index') }}" class="btn btn-primary mt-3">Retour au tableau de bord</a>
    </div>
    {% endif %}
</div>

<!-- MODALE DE VALIDATION (Bootstrap) -->
<div class="modal fade" id="validateDormantModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title"><i class="bi bi-check-circle-fill me-2"></i>Validation de stock</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
                <p class="fs-5 mb-2">Confirmer que cet objet est toujours utile ?</p>
                <p class="fw-bold text-primary mb-3" id="modal-object-name">Nom de l'objet</p>
                <p class="text-muted small mb-0">
                    En validant, une entr√©e "V√©rification" sera ajout√©e √† l'historique et l'objet dispara√Ætra de cette liste pour un an.
                </p>
            </div>
            <div class="modal-footer bg-light border-0">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Annuler</button>
                <button type="button" class="btn btn-success px-4" id="btn-confirm-validate">
                    <i class="bi bi-check-lg me-2"></i>Oui, garder cet objet
                </button>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const csrfToken = "{{ csrf_token() }}";
    
    // √âl√©ments de la modale
    const modalEl = document.getElementById('validateDormantModal');
    const modal = new bootstrap.Modal(modalEl);
    const modalObjectName = document.getElementById('modal-object-name');
    const confirmBtn = document.getElementById('btn-confirm-validate');
    
    let currentId = null;
    let currentRow = null;

    // 1. Ouverture de la modale
    document.querySelectorAll('.btn-open-validate').forEach(btn => {
        btn.addEventListener('click', function() {
            currentId = this.dataset.id;
            currentRow = this.closest('tr');
            
            // Injection du nom dans la modale
            modalObjectName.textContent = this.dataset.nom;
            
            modal.show();
        });
    });

    // 2. Confirmation
    confirmBtn.addEventListener('click', async function() {
        if (!currentId) return;
        
        // UI Loading
        const originalText = this.innerHTML;
        this.disabled = true;
        this.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Traitement...';
        
        try {
            const res = await fetch(`/api/valider_dormant/${currentId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': csrfToken
                },
                body: JSON.stringify({})
            });
            
            const data = await res.json();
            
            if (res.ok && data.success) {
                modal.hide();
                
                // Animation de suppression de la ligne
                if (currentRow) {
                    currentRow.style.transition = "all 0.5s";
                    currentRow.style.opacity = "0";
                    currentRow.style.transform = "translateX(20px)";
                    setTimeout(() => currentRow.remove(), 500);
                }
                
                // Mise √† jour du compteur
                const badge = document.querySelector('.badge.bg-secondary');
                if(badge) {
                    const count = parseInt(badge.textContent) - 1;
                    badge.textContent = count + " objets d√©tect√©s";
                }
            } else {
                alert("Erreur : " + (data.error || "Inconnue"));
            }
        } catch (e) {
            console.error(e);
            alert("Erreur technique");
        } finally {
            this.disabled = false;
            this.innerHTML = originalText;
        }
    });
});
</script>
{% endblock %}

==================================================
FICHIER : templates\footer.html
==================================================
<footer class="site-footer">
  <div class="footer-container">
    
    <!-- Top Section -->
    <div class="footer-top">
      <!-- Brand (Gauche) -->
      <div class="footer-brand">
        <svg class="footer-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="40" height="40">
          <defs>
            <linearGradient id="uniqueFooterGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#8B3FFF;stop-opacity:1" />
              <stop offset="50%" style="stop-color:#5B8FFF;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#00D4FF;stop-opacity:1" />
            </linearGradient>
          </defs>
          <rect x="20" y="20" width="472" height="472" rx="110" ry="110" fill="url(#uniqueFooterGradient)"/>
          <text x="256" y="340" font-family="Arial, sans-serif" font-size="280" font-weight="900" fill="white" text-anchor="middle" letter-spacing="10">LF</text>
        </svg>
        <div class="footer-brand-text">
          <span class="footer-brand-name">LabFlow</span>
          <span class="footer-brand-tagline">Gestion intelligente de mat√©riel</span>
        </div>
      </div>
      
      <!-- Navigation -->
      <nav class="footer-nav">
        
        <!-- Colonne 1 : L'essentiel pour l'utilisateur -->
        <div class="footer-nav-group">
          <h5>Aide & Support</h5>
          <a href="{{ url_for('main.documentation') }}" title="Consulter le guide">
              <i class="bi bi-book me-1"></i>Documentation
          </a>
          <a href="mailto:contact.gmlcl@gmail.com">
              <i class="bi bi-envelope me-1"></i>Support Technique
          </a>
        </div>
        
        <!-- Colonne 2 : L'identit√© et le L√©gal -->
        <div class="footer-nav-group">
          <h5>Informations</h5>
          <!-- √Ä Propos -->
          <a href="{{ url_for('main.a_propos') }}">
              <i class="bi bi-info-circle me-1"></i>√Ä Propos de LabFlow
          </a>
          
          <!-- Mentions l√©gales -->
          <a href="{{ url_for('main.legal') }}#mentions">
              <i class="bi bi-building me-1"></i>Mentions l√©gales
          </a>
          
          <!-- Confidentialit√© -->
          <a href="{{ url_for('main.legal') }}#privacy">
              <i class="bi bi-shield-lock me-1"></i>Confidentialit√©
          </a>
          
          <!-- CGU -->
          <a href="{{ url_for('main.legal') }}#cgu">
              <i class="bi bi-file-text me-1"></i>CGU
          </a>
        </div>

      </nav>
    </div>
    
    <!-- Divider -->
    <div class="footer-divider"></div>
    
    <!-- Bottom Section -->
    <div class="footer-bottom">
      <div class="footer-left">
        <span class="copyright">¬© 2025 LabFlow - Acad√©mie Nancy-Metz</span>
        <span class="separator">‚Ä¢</span>
        <div class="footer-license" title="Licence Creative Commons">
            <i class="bi bi-cc-circle"></i> BY-NC-ND
        </div>
      </div>
      
      <div class="footer-right">
        <span class="footer-version">v2.0.1 (Stable)</span>
      </div>
    </div>
  </div>
</footer>

{# --- TUTORIEL GUID√â --- #}
<div id="tour-overlay" class="tour-overlay"></div>
<div id="tour-tooltip" class="tour-tooltip">
  <div id="tour-title" class="tour-title"></div>
  <div id="tour-content" class="tour-content"></div>
  <div class="tour-actions">
    <button id="tour-skip-btn" class="tour-btn-skip">Passer</button>
    <button id="tour-next-btn" class="tour-btn-next">Suivant</button>
  </div>
</div>

==================================================
FICHIER : templates\fournisseurs.html
==================================================
{% extends "base.html" %}

{% block title %}Nos Fournisseurs - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    
    {% include '_breadcrumb.html' %}

    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #20c997 0%, #0ca678 100%);">
                <i class="bi bi-truck fs-4"></i>
            </div>
            <span class="fw-bold">Annuaire Fournisseurs</span>
        </h2>
        
        {% if session.user_role == 'admin' %}
        <button class="btn btn-success shadow-sm" data-bs-toggle="modal" data-bs-target="#addFournisseurModal">
            <i class="bi bi-plus-lg me-2"></i>Nouveau Fournisseur
        </button>
        {% endif %}
    </div>

    <!-- GRILLE DES FOURNISSEURS -->
    <div class="row g-4">
        {% for f in fournisseurs %}
        <div class="col-md-6 col-lg-4">
            <div class="card h-100 border-0 shadow-sm hover-card">
                <div class="card-body d-flex flex-column">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <!-- Logo ou Initiale -->
                        <div class="rounded-circle bg-light d-flex align-items-center justify-content-center border" 
                             style="width: 64px; height: 64px; overflow: hidden; background-color: #fff;">
                            {% if f.logo %}
                                {% if f.logo.startswith('http') %}
                                    <img src="{{ f.logo }}" alt="{{ f.nom }}" style="width: 100%; height: 100%; object-fit: contain;">
                                {% else %}
                                    <img src="{{ url_for('static', filename='images/fournisseurs/' + f.logo) }}" alt="{{ f.nom }}" style="width: 100%; height: 100%; object-fit: contain;">
                                {% endif %}
                            {% else %}
                                <span class="fs-3 fw-bold text-muted">{{ f.nom[:1].upper() }}</span>
                            {% endif %}
                        </div>
                        
                        <!-- ACTIONS ADMIN -->
                        {% if session.user_role == 'admin' %}
                        <div class="dropdown">
                            <button class="btn btn-link text-muted p-0" data-bs-toggle="dropdown">
                                <i class="bi bi-three-dots-vertical"></i>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end border-0 shadow">
                                <li>
                                    <!-- CORRECTION ICI : Utilisation des attributs Bootstrap natifs -->
                                    <button class="dropdown-item" 
                                            type="button"
                                            data-bs-toggle="modal" 
                                            data-bs-target="#edit-fournisseur-modal"
                                            data-id="{{ f.id }}"
                                            data-nom="{{ f.nom }}"
                                            data-site-web="{{ f.site_web or '' }}"
                                            data-logo="{{ f.logo or '' }}">
                                        <i class="bi bi-pencil me-2 text-primary"></i>Modifier
                                    </button>
                                </li>
                                <li><hr class="dropdown-divider"></li>
                                <li>
                                    <!-- Formulaire de suppression standard -->
                                    <form action="{{ url_for('admin.supprimer_fournisseur', id=f.id) }}" method="POST" class="delete-form-interactive" data-item-name="{{ f.nom }}">
                                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                        <button type="button" class="dropdown-item text-danger delete-btn">
                                            <i class="bi bi-trash me-2"></i>Supprimer
                                        </button>
                                    </form>
                                </li>
                            </ul>
                        </div>
                        {% endif %}
                    </div>

                    <h5 class="card-title fw-bold text-dark mb-1">{{ f.nom }}</h5>
                    
                    <div class="mt-auto pt-3">
                        {% if f.site_web %}
                            <a href="{{ f.site_web }}" target="_blank" class="btn btn-outline-primary btn-sm w-100">
                                <i class="bi bi-box-arrow-up-right me-2"></i>Visiter le site
                            </a>
                        {% else %}
                            <button class="btn btn-light btn-sm w-100 text-muted" disabled>
                                <i class="bi bi-globe me-2"></i>Pas de site web
                            </button>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <div class="col-12">
            <div class="text-center py-5 text-muted">
                <i class="bi bi-building-slash display-4 opacity-25"></i>
                <p class="mt-3">Aucun fournisseur r√©f√©renc√©.</p>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- MODALES D'ADMINISTRATION -->
{% if session.user_role == 'admin' %}
    
    <!-- Inclusion des modales sp√©cifiques -->
    {% include '_modale_fournisseur_add.html' %}
    {% include '_modale_fournisseur_edit.html' %}
    
    <!-- CORRECTION ICI : Inclusion de la modale de danger pour la suppression -->
    {% include '_modale_danger.html' %}

    <!-- Script pour pr√©-remplir la modale d'√©dition -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const editModal = document.getElementById('edit-fournisseur-modal');
            if (editModal) {
                editModal.addEventListener('show.bs.modal', function(event) {
                    const button = event.relatedTarget;
                    if (!button) return;

                    const id = button.dataset.id;
                    const nom = button.dataset.nom;
                    const site = button.dataset.siteWeb;
                    const logo = button.dataset.logo;

                    const form = document.getElementById('edit-fournisseur-form');
                    form.action = `/admin/fournisseurs/modifier/${id}`;
                    
                    document.getElementById('edit_nom').value = nom;
                    document.getElementById('edit_site_web').value = site;
                    
                    const urlInput = document.getElementById('edit_logo_url_input');
                    if (logo && logo.startsWith('http')) {
                        urlInput.value = logo;
                    } else {
                        urlInput.value = '';
                    }
                });
            }
        });
    </script>

{% endif %}

{% endblock %}

==================================================
FICHIER : templates\gestion_armoires.html
==================================================
{% extends "base.html" %}

{% block title %}Gestion des Armoires - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te de page -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <!-- Ic√¥ne Armoires (Vert/Teal) -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #198754 0%, #20c997 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-box2-fill" viewBox="0 0 16 16">
                    <path d="M3.75 0a1 1 0 0 0-.8.4L.1 4.2a.5.5 0 0 0-.1.3V15a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V4.5a.5.5 0 0 0-.1-.3L13.05.4a1 1 0 0 0-.8-.4zM15 4.667V5H1v-.333L1.5 4h6V1h1v3h6z"/>
                </svg>
            </div>
            <span class="fw-bold">Gestion des Armoires</span>
        </h2>
        
        {% if session.user_role == 'admin' %}
        <div>
            <button type="button" 
                    class="btn btn-primary" 
                    data-bs-toggle="modal" 
                    data-bs-target="#addArmoireModal">
                <i class="bi bi-plus-circle-fill me-2"></i> 
                Ajouter une armoire
            </button>
        </div>
        {% endif %}
    </div>

    <!-- Liste des armoires ou √©tat vide -->
    {% if armoires %}
        <div class="card-container management-page" role="list">
            {% for armoire in armoires %}
            <article class="item-card" data-armoire-id="{{ armoire.id }}" role="listitem">
                <!-- Vue normale -->
                <div class="card-info">
                    <a href="{{ url_for('inventaire.voir_armoire', armoire_id=armoire.id) }}" 
                       class="card-title-link"
                       aria-label="Voir le contenu de {{ armoire.nom }}">
                        <span class="card-title">{{ armoire.nom }}</span>
                    </a>
                    <span class="card-count" aria-label="Nombre d'objets">
                        {% if armoire.count == 0 %}
                            Aucun objet
                        {% elif armoire.count == 1 %}
                            1 objet
                        {% else %}
                            {{ armoire.count }} objets
                        {% endif %}
                    </span>
                </div>

                <!-- Mode √©dition (masqu√© par d√©faut) -->
                <div class="edit-mode" style="display: none;">
                    <input type="text" 
                           value="{{ armoire.nom }}" 
                           class="edit-input"
                           aria-label="Modifier le nom de l'armoire"
                           maxlength="100">
                    <button type="button" 
                            class="save-btn" 
                            data-id="{{ armoire.id }}" 
                            title="Enregistrer les modifications"
                            aria-label="Enregistrer">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                            <path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/>
                        </svg>
                    </button>
                    <button type="button" 
                            class="cancel-btn" 
                            title="Annuler les modifications"
                            aria-label="Annuler">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                            <path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/>
                        </svg>
                    </button>
                </div>

                <!-- Actions -->
                <div class="card-actions">
                    <a href="{{ url_for('inventaire.voir_armoire', armoire_id=armoire.id) }}" 
                       class="action-btn" 
                       title="Voir le contenu de {{ armoire.nom }}"
                       aria-label="Voir le contenu">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                            <path d="M260-320q47 0 91.5 10.5T440-278v-394q-41-24-87-36t-93-12q-36 0-71.5 7T120-692v396q35-12 69.5-18t70.5-6Zm260 42q44-21 88.5-31.5T700-320q36 0 70.5 6t69.5 18v-396q-33-14-68.5-21t-71.5-7q-47 0-93 12t-87 36v394Zm-40 118q-48-38-104-59t-116-21q-42 0-82.5 11T100-198q-21 11-40.5-1T40-234v-482q0-11 5.5-21T62-752q46-24 96-36t102-12q58 0 113.5 15T480-740q51-30 106.5-45T700-800q52 0 102 12t96 36q11 5 16.5 15t5.5 21v482q0 23-19.5 35t-40.5 1q-37-20-77.5-31T700-240q-60 0-116 21t-104 59ZM280-494Z"/>
                        </svg>
                    </a>
                    
                    {% if session.user_role == 'admin' %}
                    <button type="button" 
                            class="action-btn edit-btn" 
                            title="Modifier le nom de {{ armoire.nom }}"
                            aria-label="Modifier le nom">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                            <path d="M167-120q-21 5-36.5-10.5T120-167l40-191 198 198-191 40Zm191-40L160-358l458-458q23-23 57-23t57 23l84 84q23 23 23 57t-23 57L358-160Zm317-600L261-346l85 85 414-414-85-85Z"/>
                        </svg>
                    </button>
                    
                    <form action="{{ url_for('admin.supprimer', type_objet='armoire', id=armoire.id) }}" 
                          method="post" 
                          class="delete-form-interactive" 
                          data-item-type="armoire" 
                          data-item-name="{{ armoire.nom }}">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <button type="button" 
                                class="action-btn delete-btn" 
                                title="Supprimer {{ armoire.nom }}"
                                aria-label="Supprimer l'armoire">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                                <path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/>
                            </svg>
                        </button>
                    </form>
                    {% endif %}
                </div>
            </article>
            {% endfor %}
        </div>

    {% else %}
        <!-- √âtat vide -->
        <div class="empty-state-container" role="status">
            <div class="empty-state-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor">
                    <path d="M360-440q-17 0-28.5-11.5T320-480q0-17 11.5-28.5T360-520q17 0 28.5 11.5T400-480q0 17-11.5 28.5T360-440Zm240 0q-17 0-28.5-11.5T560-480q0-17 11.5-28.5T600-520q17 0 28.5 11.5T640-480q0 17-11.5 28.5T600-440ZM120-120v-80h40v-560q0-33 23.5-56.5T240-840h480q33 0 56.5 23.5T800-760v560h40v80H120Zm120-80h200v-560H240v560Zm280 0h200v-560H520v560Zm-40-320Z"/>
                </svg>
            </div>
            <h3>Aucune armoire n'a √©t√© cr√©√©e</h3>
            <p>Commencez par ajouter votre premi√®re armoire pour organiser votre mat√©riel.</p>
            {% if session.user_role == 'admin' %}
            <button type="button" 
                    class="btn btn-primary mt-3" 
                    data-bs-toggle="modal" 
                    data-bs-target="#addArmoireModal"
                    aria-label="Ajouter la premi√®re armoire">
                Ajouter la premi√®re armoire
            </button>
            {% endif %}
        </div>
    {% endif %}
</div>

<!-- Modale d'ajout d'armoire (Bootstrap 5) -->
<div class="modal fade" 
     id="addArmoireModal" 
     tabindex="-1" 
     aria-labelledby="addArmoireModalLabel" 
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addArmoireModalLabel">
                    <i class="bi bi-folder-plus me-2"></i>
                    Ajouter une nouvelle armoire
                </h5>
                <button type="button" 
                        class="btn-close" 
                        data-bs-dismiss="modal" 
                        aria-label="Fermer"></button>
            </div>
            <form action="{{ url_for('admin.ajouter') }}" 
                  method="post" 
                  id="addArmoireForm"
                  novalidate>
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <input type="hidden" name="type" value="armoire">
                    
                    <div class="mb-3">
                        <label for="nomArmoire" class="form-label">
                            Nom de l'armoire <span class="text-danger">*</span>
                        </label>
                        <input type="text" 
                               class="form-control" 
                               id="nomArmoire" 
                               name="nom" 
                               placeholder="Ex: Armoire Chimie A"
                               required 
                               maxlength="100"
                               autocomplete="off"
                               aria-describedby="nomArmoireHelp">
                        <div id="nomArmoireHelp" class="form-text">
                            Choisissez un nom descriptif pour identifier facilement cette armoire.
                        </div>
                        <div class="invalid-feedback">
                            Veuillez entrer un nom pour l'armoire.
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" 
                            class="btn btn-secondary" 
                            data-bs-dismiss="modal">
                        Annuler
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-check-circle me-1"></i>
                        Ajouter l'armoire
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale de danger pour suppression -->
{% include '_modale_danger.html' %}

{% endblock %}

{% block scripts %}
<script>
// Validation du formulaire d'ajout
(function() {
    'use strict';
    const form = document.getElementById('addArmoireForm');
    if (form) {
        form.addEventListener('submit', function(event) {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }
            form.classList.add('was-validated');
        });
        
        // R√©initialiser la validation quand on ferme la modale
        const modal = document.getElementById('addArmoireModal');
        if (modal) {
            modal.addEventListener('hidden.bs.modal', function() {
                form.classList.remove('was-validated');
                form.reset();
            });
        }
    }
})();
</script>
{% endblock %}

==================================================
FICHIER : templates\gestion_categories.html
==================================================
{% extends "base.html" %}

{% block title %}Gestion des Cat√©gories - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te de page -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <!-- Ic√¥ne Cat√©gories (Violet/Rose) -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #654ea3 0%, #eaafc8 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-inboxes-fill" viewBox="0 0 16 16">
                    <path d="M4.98 1a.5.5 0 0 0-.39.188L1.54 5H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0A.5.5 0 0 1 10 5h4.46l-3.05-3.812A.5.5 0 0 0 11.02 1zM3.81.563A1.5 1.5 0 0 1 4.98 0h6.04a1.5 1.5 0 0 1 1.17.563l3.7 4.625a.5.5 0 0 1 .106.374l-.39 3.124A1.5 1.5 0 0 1 14.117 10H1.883A1.5 1.5 0 0 1 .394 8.686l-.39-3.124a.5.5 0 0 1 .106-.374zM.125 11.17A.5.5 0 0 1 .5 11H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0 .5.5 0 0 1 .5-.5h5.5a.5.5 0 0 1 .496.562l-.39 3.124A1.5 1.5 0 0 1 14.117 16H1.883a1.5 1.5 0 0 1-1.489-1.314l-.39-3.124a.5.5 0 0 1 .121-.393z"/>
                </svg>
            </div>
            <span class="fw-bold">Gestion des Cat√©gories</span>
        </h2>
        
        {% if session.user_role == 'admin' %}
        <div>
            <button type="button" 
                    class="btn btn-primary" 
                    data-bs-toggle="modal" 
                    data-bs-target="#addCategorieModal">
                <i class="bi bi-plus-circle-fill me-2"></i> 
                Ajouter une cat√©gorie
            </button>
        </div>
        {% endif %}
    </div>

    <!-- Liste des cat√©gories ou √©tat vide -->
    {% if categories %}
        <div class="card-container management-page" role="list">
            {% for categorie in categories %}
            <div class="item-card" data-categorie-id="{{ categorie.id }}" role="listitem">
                <!-- Vue normale -->
                <div class="card-info">
                    <a href="{{ url_for('inventaire.voir_categorie', categorie_id=categorie.id) }}" 
                       class="card-title-link"
                       aria-label="Voir le contenu de {{ categorie.nom }}">
                        <span class="card-title">{{ categorie.nom }}</span>
                    </a>
                    <span class="card-count" aria-label="Nombre d'objets">
                        {% if categorie.count == 0 %}
                            Aucun objet
                        {% elif categorie.count == 1 %}
                            1 objet
                        {% else %}
                            {{ categorie.count }} objets
                        {% endif %}
                    </span>
                </div>

                <!-- Mode √©dition (masqu√© par d√©faut) -->
                <div class="edit-mode" style="display: none;">
                    <input type="text" 
                           value="{{ categorie.nom }}" 
                           class="edit-input"
                           aria-label="Modifier le nom de la cat√©gorie"
                           maxlength="100">
                    <button type="button" 
                            class="save-btn" 
                            data-id="{{ categorie.id }}" 
                            title="Enregistrer les modifications"
                            aria-label="Enregistrer">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                            <path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/>
                        </svg>
                    </button>
                    <button type="button" 
                            class="cancel-btn" 
                            title="Annuler les modifications"
                            aria-label="Annuler">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                            <path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/>
                        </svg>
                    </button>
                </div>

                <!-- Actions -->
                <div class="card-actions">
                    <a href="{{ url_for('inventaire.voir_categorie', categorie_id=categorie.id) }}" 
                       title="Voir le contenu de {{ categorie.nom }}"
                       aria-label="Voir le contenu">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                            <path d="M260-320q47 0 91.5 10.5T440-278v-394q-41-24-87-36t-93-12q-36 0-71.5 7T120-692v396q35-12 69.5-18t70.5-6Zm260 42q44-21 88.5-31.5T700-320q36 0 70.5 6t69.5 18v-396q-33-14-68.5-21t-71.5-7q-47 0-93 12t-87 36v394Zm-40 118q-48-38-104-59t-116-21q-42 0-82.5 11T100-198q-21 11-40.5-1T40-234v-482q0-11 5.5-21T62-752q46-24 96-36t102-12q58 0 113.5 15T480-740q51-30 106.5-45T700-800q52 0 102 12t96 36q11 5 16.5 15t5.5 21v482q0 23-19.5 35t-40.5 1q-37-20-77.5-31T700-240q-60 0-116 21t-104 59ZM280-494Z"/>
                        </svg>
                    </a>
                    
                    {% if session.user_role == 'admin' %}
                    <span class="edit-btn" 
                          title="Modifier le nom de {{ categorie.nom }}"
                          aria-label="Modifier le nom">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                            <path d="M167-120q-21 5-36.5-10.5T120-167l40-191 198 198-191 40Zm191-40L160-358l458-458q23-23 57-23t57 23l84 84q23 23 23 57t-23 57L358-160Zm317-600L261-346l85 85 414-414-85-85Z"/>
                        </svg>
                    </span>
                    
                    <form action="{{ url_for('admin.supprimer', type_objet='categorie', id=categorie.id) }}" 
                          method="post" 
                          class="delete-form-interactive" 
                          data-item-type="categorie" 
                          data-item-name="{{ categorie.nom }}">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <button type="button" 
                                class="delete-btn" 
                                title="Supprimer {{ categorie.nom }}"
                                aria-label="Supprimer la cat√©gorie">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                                <path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/>
                            </svg>
                        </button>
                    </form>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>

    {% else %}
        <!-- √âtat vide -->
        <div class="empty-state-container" role="status">
            <div class="empty-state-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor">
                    <path d="M160-480v240-480 240Zm400 360q17 0 28.5-11.5T600-160q0-17-11.5-28.5T560-200q-17 0-28.5 11.5T520-160q0 17 11.5 28.5T560-120Zm240-400q17 0 28.5-11.5T840-560q0-17-11.5-28.5T800-600q-17 0-28.5 11.5T760-560q0 17 11.5 28.5T800-520Zm-560 0h200v-80H240v80Zm0 160h200v-80H240v80Zm-80 200q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720H160v480h200v80H160ZM560-40q-50 0-85-35t-35-85q0-39 22.5-70t57.5-43v-127h240v-47q-35-12-57.5-43T680-560q0-50 35-85t85-35q50 0 85 35t35 85q0 39-22.5 70T840-447v127H600v47q35 12 57.5 43t22.5 70q0 50-35 85t-85 35Z"/>
                </svg>
            </div>
            <h3>Aucune cat√©gorie n'a √©t√© cr√©√©e</h3>
            <p>Commencez par ajouter votre premi√®re cat√©gorie pour classer votre mat√©riel.</p>
            {% if session.user_role == 'admin' %}
            <button type="button" 
                    class="btn btn-primary mt-3" 
                    data-bs-toggle="modal" 
                    data-bs-target="#addCategorieModal"
                    aria-label="Ajouter la premi√®re cat√©gorie">
                Ajouter la premi√®re cat√©gorie
            </button>
            {% endif %}
        </div>
    {% endif %}
</div>

<!-- Modale d'ajout de cat√©gorie (Bootstrap 5) -->
<div class="modal fade" 
     id="addCategorieModal" 
     tabindex="-1" 
     aria-labelledby="addCategorieModalLabel" 
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addCategorieModalLabel">
                    <i class="bi bi-tag-fill me-2"></i>
                    Ajouter une nouvelle cat√©gorie
                </h5>
                <button type="button" 
                        class="btn-close" 
                        data-bs-dismiss="modal" 
                        aria-label="Fermer"></button>
            </div>
            <form action="{{ url_for('admin.ajouter') }}" 
                  method="post" 
                  id="addCategorieForm"
                  novalidate>
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <input type="hidden" name="type" value="categorie">
                    
                    <div class="mb-3">
                        <label for="nomCategorie" class="form-label">
                            Nom de la cat√©gorie <span class="text-danger">*</span>
                        </label>
                        <input type="text" 
                               class="form-control" 
                               id="nomCategorie" 
                               name="nom" 
                               placeholder="Ex: Verrerie, Chimie organique, √âlectronique..."
                               required 
                               maxlength="100"
                               autocomplete="off"
                               aria-describedby="nomCategorieHelp">
                        <div id="nomCategorieHelp" class="form-text">
                            Choisissez un nom descriptif pour identifier facilement cette cat√©gorie.
                        </div>
                        <div class="invalid-feedback">
                            Veuillez entrer un nom pour la cat√©gorie.
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" 
                            class="btn btn-secondary" 
                            data-bs-dismiss="modal">
                        Annuler
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-check-circle me-1"></i>
                        Ajouter la cat√©gorie
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale de danger pour suppression -->
{% include '_modale_danger.html' %}

{% endblock %}

{% block scripts %}
<script>
// Validation du formulaire d'ajout
(function() {
    'use strict';
    const form = document.getElementById('addCategorieForm');
    if (form) {
        form.addEventListener('submit', function(event) {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }
            form.classList.add('was-validated');
        });
        
        // R√©initialiser la validation quand on ferme la modale
        const modal = document.getElementById('addCategorieModal');
        if (modal) {
            modal.addEventListener('hidden.bs.modal', function() {
                form.classList.remove('was-validated');
                form.reset();
            });
        }
    }
})();
</script>
{% endblock %}

==================================================
FICHIER : templates\header.html
==================================================
<header class="app-header">
    <div class="header-container">
        <div class="header-brand">
			<a href="{{ url_for('inventaire.index') }}">
				<svg class="brand-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="50" height="50">
					<defs>
						<linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
							<stop offset="0%" style="stop-color:#8B3FFF;stop-opacity:1" />
							<stop offset="50%" style="stop-color:#5B8FFF;stop-opacity:1" />
							<stop offset="100%" style="stop-color:#00D4FF;stop-opacity:1" />
						</linearGradient>
					</defs>
					<rect x="20" y="20" width="472" height="472" rx="110" ry="110" fill="url(#gradient)"/>
					<text x="256" y="370" font-family="Arial, sans-serif" font-size="280" font-weight="900" fill="white" text-anchor="middle" letter-spacing="10">LF</text>
				</svg>
				
				<div class="brand-text">
					<h1>LabFlow</h1>
					<p class="brand-subtitle">{{ nom_etablissement or 'Mon Espace' }}</p>
				</div>
			</a>
		</div>
        
        <div class="header-right">
            <div class="search-wrapper" id="search-wrapper-dropdown">
				<svg class="search-icon-dropdown" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
					<path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/>
				</svg>
				<input type="text" 
					   id="globalSearchInput" 
					   class="search-input-dropdown"
					   placeholder="Rechercher un objet, un code-barre..." 
					   autocomplete="off">
				<button class="search-clear-btn" id="clear-btn-dropdown">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
						<path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
					</svg>
				</button>
				
				<!-- Conteneur des r√©sultats -->
				<div id="globalSearchResults" class="dropdown-results">
					<!-- Les r√©sultats seront inject√©s ici par JS -->
				</div>
			</div>
            
            <!-- PANIER OPTIMIS√â -->
            <a href="{{ url_for('main.panier') }}" 
               class="header-icon-link" 
               title="Panier de r√©servation"
               aria-label="Panier de r√©servation">
				<svg xmlns="http://www.w3.org/2000/svg" 
				     class="header-icon" 
				     viewBox="0 0 16 16" 
				     fill="currentColor"
				     aria-hidden="true">
					<path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
				</svg>
				<span id="cart-count-badge" class="icon-badge" style="display: none;">0</span>
			</a>
            
            <!-- ALERTES OPTIMIS√â -->
            <a href="{{ url_for('main.alertes') }}" 
               class="header-icon-link text-white" 
               title="Alertes produits"
               id="alert-icon-link" 
               data-alert-count="{{ alertes_total }}" 
               aria-label="Alertes produits{% if alertes_total > 0 %} - {{ alertes_total }} alerte(s){% endif %}">
    
                <!-- SVG Bootstrap Icons (bi-bell-fill) -->
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" 
                     class="header-icon {% if alertes_total >= 3 %}bell-critical{% elif alertes_total > 0 %}bell-warning{% endif %}" 
                     viewBox="0 0 16 16">
                    <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2m.995-14.901a1 1 0 1 0-1.99 0A5 5 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901"/>
                </svg>
                
                <!-- Pastille (R√©utilisation du style cart-count-badge pour coh√©rence) -->
                {% if alertes_total and alertes_total > 0 %}
                <span class="cart-count-badge pulse">
                    {{ alertes_total }}
                </span>
                {% endif %}
            </a>

            <!-- PARAM√àTRES -->
            {% if session.user_role == 'admin' %}
            <a href="{{ url_for('admin.admin') }}" 
               class="header-icon-link admin-badge" 
               title="Panneau d'Administration"
               aria-label="Administration">
                <div class="d-flex align-items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-speedometer2" viewBox="0 0 16 16">
                        <path d="M8 4a.5.5 0 0 1 .5.5V6a.5.5 0 0 1-1 0V4.5A.5.5 0 0 1 8 4M3.732 5.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707zM2 10a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 10m9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5m.754-4.246a.389.389 0 0 0-.527-.02L7.547 9.31a.91.91 0 1 0 1.302 1.258l3.434-4.297a.389.389 0 0 0-.029-.518z"/>
                        <path fill-rule="evenodd" d="M0 10a8 8 0 1 1 15.547 2.661c-.442 1.253-1.845 1.602-2.932 1.25C11.309 13.488 9.475 13 8 13c-1.474 0-3.31.488-4.615.911-1.087.352-2.49.003-2.932-1.25A7.988 7.988 0 0 1 0 10m8-7a7 7 0 0 0-6.603 9.329c.203.575.923.876 1.68.63C4.397 12.533 6.358 12 8 12s3.604.532 4.923.96c.757.245 1.477-.056 1.68-.631A7 7 0 0 0 8 3"/>
                    </svg>
                    <span class="d-none d-lg-inline fw-bold small text-uppercase" style="letter-spacing: 1px;">Admin</span>
                </div>
            </a>
            {% endif %}
			
			<div class="auth-section">
                {% if session.user_id %}
                    <a href="{{ url_for('auth.profil') }}" 
                       class="header-icon-link" 
                       title="G√©rer mon profil"
                       aria-label="G√©rer mon profil">
						<svg xmlns="http://www.w3.org/2000/svg" 
						     class="header-icon" 
						     viewBox="0 0 16 16" 
						     fill="currentColor"
						     aria-hidden="true">
							<path d="M7.068.727c.243-.97 1.62-.97 1.864 0l.071.286a.96.96 0 0 0 1.622.434l.205-.211c.695-.719 1.888-.03 1.613.931l-.08.284a.96.96 0 0 0 1.187 1.187l.283-.081c.96-.275 1.65.918.931 1.613l-.211.205a.96.96 0 0 0 .434 1.622l.286.071c.97.243.97 1.62 0 1.864l-.286.071a.96.96 0 0 0-.434 1.622l.211.205c.719.695.03 1.888-.931 1.613l-.284-.08a.96.96 0 0 0-1.187 1.187l.081.283c.275.96-.918 1.65-1.613.931l-.205-.211a.96.96 0 0 0-1.622.434l-.071.286c-.243.97-1.62.97-1.864 0l-.071-.286a.96.96 0 0 0-1.622-.434l-.205.211c-.695.719-1.888.03-1.613-.931l.08-.284a.96.96 0 0 0-1.186-1.187l-.284.081c-.96.275-1.65-.918-.931-1.613l.211-.205a.96.96 0 0 0-.434-1.622l-.286-.071c-.97-.243-.97-1.62 0-1.864l.286-.071a.96.96 0 0 0 .434-1.622l-.211-.205c-.719-.695-.03-1.888.931-1.613l.284.08a.96.96 0 0 0 1.187-1.186l-.081-.284c-.275-.96.918-1.65 1.613-.931l.205.211a.96.96 0 0 0 1.622-.434zM12.973 8.5H8.25l-2.834 3.779A4.998 4.998 0 0 0 12.973 8.5m0-1a4.998 4.998 0 0 0-7.557-3.779l2.834 3.78zM5.048 3.967l-.087.065zm-.431.355A4.98 4.98 0 0 0 3.002 8c0 1.455.622 2.765 1.615 3.678L7.375 8zm.344 7.646.087.065z"/>
						</svg>
					</a>
                    <span class="welcome-message">Bonjour, {{ session.get('user_name') }}</span>
                    <a href="{{ url_for('auth.logout') }}" class="btn btn-sm btn-outline-light">Se d√©connecter</a>
                {% else %}
                    <a href="{{ url_for('auth.login') }}" class="auth-link">Connexion</a>
                {% endif %}
            </div>
        </div>
    </div>
</header>

==================================================
FICHIER : templates\index.html
==================================================
{% extends "base.html" %}

{% block title %}Tableau de Bord - LabFlow{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- En-t√™te Principal -->
    <div class="d-flex justify-content-between align-items-center mb-5 pb-3 border-bottom">
        <h1 class="h2 mb-0 text-dark d-flex align-items-center gap-3">
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 56px; height: 56px; background: linear-gradient(135deg, #1f3b73 0%, #2c3e50 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-motherboard-fill" viewBox="0 0 16 16">
                    <path d="M5 7h3V4H5z"/>
                    <path d="M1 2a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-2H.5a.5.5 0 0 1-.5-.5v-1A.5.5 0 0 1 .5 9H1V8H.5a.5.5 0 0 1-.5-.5v-1A.5.5 0 0 1 .5 6H1V5H.5a.5.5 0 0 1-.5-.5v-2A.5.5 0 0 1 .5 2zm11 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0zm2 0a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0zM3.5 10a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zM4 4h-.5a.5.5 0 0 0 0 1H4v1h-.5a.5.5 0 0 0 0 1H4a1 1 0 0 0 1 1v.5a.5.5 0 0 0 1 0V8h1v.5a.5.5 0 0 0 1 0V8a1 1 0 0 0 1-1h.5a.5.5 0 0 0 0-1H9V5h.5a.5.5 0 0 0 0-1H9a1 1 0 0 0-1-1v-.5a.5.5 0 0 0-1 0V3H6v-.5a.5.5 0 0 0-1 0V3a1 1 0 0 0-1 1m7 7.5v1a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 0-.5.5"/>
                </svg>
            </div>
            <span class="fw-bold">Tableau de Bord</span>
        </h1>
    </div>

    <div class="row g-4">
		<div class="col-12 col-md-6 col-lg-4">
            <div class="widget-card shadow-sm">
                <div class="widget-header bg-white border-bottom p-3 d-flex align-items-center justify-content-between">
                    <!-- GROUPE GAUCHE : IC√îNE + TITRE -->
                    <div class="d-flex align-items-center gap-3">
                        <!-- Ic√¥ne Ambre -->
                        <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                             style="width: 48px; height: 48px; background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); flex-shrink: 0;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-cart-plus-fill" viewBox="0 0 16 16">
                                <path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0M9 5.5V7h1.5a.5.5 0 0 1 0 1H9v1.5a.5.5 0 0 1-1 0V8H6.5a.5.5 0 0 1 0-1H8V5.5a.5.5 0 0 1 1 0"/>
                            </svg>
                        </div>
                        <h3 class="h5 mb-0 fw-bold text-dark">Suggestions</h3>
                    </div>

                    <!-- GROUPE DROITE : BADGE (Align√© √† droite) -->
                    {% if data.suggestions %}
                    <span class="badge bg-warning text-dark border border-warning-subtle rounded-pill">
                        {{ data.suggestions|length }} en attente
                    </span>
                    {% endif %}
                </div>
                
                <div class="widget-body p-0 flex-grow-1">
                    {% if data.suggestions %}
                        <ul class="list-group list-group-flush">
                        {% for s in data.suggestions %}
                            <li class="list-group-item p-3 d-flex justify-content-between align-items-center">
                                <div class="d-flex align-items-center gap-2 overflow-hidden">
                                    <div class="rounded-circle bg-light border d-flex align-items-center justify-content-center text-secondary" 
                                         style="width: 28px; height: 28px; flex-shrink: 0;" 
                                         title="Demand√© par {{ s.utilisateur.nom_utilisateur }}">
                                        <i class="bi bi-person-fill small"></i>
                                    </div>
                                    <div class="text-truncate">
                                        <span class="fw-bold text-dark d-block text-truncate">{{ s.objet.nom }}</span>
                                        <small class="text-muted">{{ s.date_demande|strftime('%d/%m') }}</small>
                                    </div>
                                </div>
                                <span class="badge bg-warning-subtle text-dark border border-warning-subtle rounded-pill fs-6">
                                    +{{ s.quantite }}
                                </span>
                            </li>
                        {% endfor %}
                        </ul>
                    {% else %}
                        <div class="text-center text-muted py-5">
                            <i class="bi bi-check2-circle display-4 opacity-25"></i>
                            <p class="mb-0 mt-2">Aucune demande en attente.</p>
                        </div>
                    {% endif %}
                </div>
                
                <div class="widget-footer p-3 bg-light border-top mt-auto">
                    <!-- LE LIEN MAGIQUE AVEC ANCRE #suggestions -->
                    <a href="{{ url_for('main.alertes') }}#suggestions" class="btn-dashboard w-100">
                        <i class="bi bi-check-circle-fill me-2"></i>Traiter les demandes
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Widget Suivi Budg√©taire -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="widget-card shadow-sm">
                <div class="bg-white border-bottom p-3 d-flex align-items-center gap-3">
                    <div class="widget-icon-wrapper" style="background: linear-gradient(135deg, #48c6ef 0%, #6f86d6 100%);">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path d="M600-120q-118 0-210-67T260-360H120v-80h122q-2-11-2-20v-40q0-9 2-20H120v-80h140q38-106 130-173t210-67q69 0 130.5 24T840-748l-70 70q-35-29-78.5-45.5T600-740q-75 0-136.5 38.5T370-600h230v80H344q-2 11-3 20t-1 20q0 11 1 20t3 20h256v80H370q32 63 93.5 101.5T600-220q48 0 92.5-16.5T770-282l70 70q-48 44-109.5 68T600-120Z"/>
                        </svg>
                    </div>
                    <h3 class="h5 mb-0 fw-bold text-dark">Suivi Budg√©taire</h3>
                </div>
                <div class="p-4 d-flex flex-column justify-content-center flex-grow-1">
                    {% if data.solde_budget is not none %}
                        <div class="text-center">
                            <span class="d-block text-muted small text-uppercase fw-bold mb-2">Solde Actuel</span>
                            <span class="display-6 fw-bold {{ 'text-success' if data.solde_budget >= 0 else 'text-danger' }}">
                                {{ "%.2f"|format(data.solde_budget) }} ‚Ç¨
                            </span>
                        </div>
                    {% else %}
                        <p class="text-center text-muted mb-0">Aucun budget d√©fini.</p>
                    {% endif %}
                </div>
                <div class="p-3 bg-light border-top">
                    <a href="{{ url_for('main.voir_budget') }}" class="btn-dashboard w-100">
						<i class="bi bi-eye me-2"></i>Consulter le budget
					</a>
                </div>
            </div>
        </div>

        <!-- Widget Prochaines √âch√©ances -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="widget-card shadow-sm">
                <div class="bg-white border-bottom p-3 d-flex align-items-center gap-3">
                    <div class="widget-icon-wrapper" style="background: linear-gradient(135deg, #ff9a56 0%, #ff6a88 100%);">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path d="M9.05.435c-.58-.58-1.52-.58-2.1 0L.436 6.95c-.58.58-.58 1.519 0 2.098l6.516 6.516c.58.58 1.519.58 2.098 0l6.516-6.516c.58-.58.58-1.519 0-2.098zM8 4c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995A.905.905 0 0 1 8 4m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                        </svg>
                    </div>
                    <h3 class="h5 mb-0 fw-bold text-dark">Prochaines √âch√©ances</h3>
                </div>
                <div class="p-0 flex-grow-1">
                    {% if data.prochaines_echeances %}
                        <ul class="list-group list-group-flush">
                            {% for echeance in data.prochaines_echeances %}
                            <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                                <div class="text-truncate me-2">
                                    <div class="fw-bold text-dark text-truncate">{{ echeance.intitule }}</div>
                                    <small class="text-muted">Le {{ echeance.date_echeance_obj|strftime('%d/%m/%Y') }}</small>
                                </div>
                                <span class="badge rounded-pill {{ 'bg-danger' if echeance.jours_restants < 7 else 'bg-warning text-dark' }}">
                                    J-{{ echeance.jours_restants }}
                                </span>
                            </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <p class="text-center text-muted py-5 mb-0">Aucune √©ch√©ance.</p>
                    {% endif %}
                </div>
                {% if session.user_role == 'admin' %}
                <div class="p-3 bg-light border-top">
                    <a href="{{ url_for('admin.gestion_echeances') }}" class="btn-dashboard w-100">G√©rer</a>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- NOUVEAU WIDGET : S√âCURIT√â & MAINTENANCE -->
        {% if data.securite %}
        <div class="col-12 col-md-6 col-lg-4">
            <div class="widget-card shadow-sm">
                <div class="bg-white border-bottom p-3 d-flex align-items-center gap-3">
                    <!-- Ic√¥ne Teal/Cyan pour la s√©curit√© -->
                    <div class="widget-icon-wrapper" style="background: linear-gradient(135deg, #20c997 0%, #0dcaf0 100%);">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-shield-check" viewBox="0 0 16 16">
                            <path d="M5.338 1.59a61.44 61.44 0 0 0-2.837.856.481.481 0 0 0-.328.39c-.554 4.157.726 7.19 2.253 9.188a10.725 10.725 0 0 0 2.287 2.233c.346.244.652.42.893.533.12.057.218.095.293.118a.55.55 0 0 0 .101.025.615.615 0 0 0 .1-.025c.076-.023.174-.061.294-.118.24-.113.547-.29.893-.533a10.726 10.726 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067c-.53 0-1.552.223-2.662.524zM5.072.56C6.118.265 7.31 0 8 0s1.882.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.775 11.775 0 0 1-2.517 2.453 7.159 7.159 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7.158 7.158 0 0 1-1.048-.625 11.777 11.777 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 62.456 62.456 0 0 1 5.072.56z"/>
                            <path d="M10.854 5.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 7.793l2.646-2.647a.5.5 0 0 1 .708 0z"/>
                        </svg>
                    </div>
                    <h3 class="h5 mb-0 fw-bold text-dark">S√©curit√©</h3>
                </div>
                <div class="p-4 flex-grow-1">
                    <div class="row g-3">
                        <div class="col-6">
                            <div class="p-2 bg-light rounded text-center border">
                                <div class="h4 fw-bold text-dark mb-0">{{ data.securite.total_equipements }}</div>
                                <small class="text-muted" style="font-size: 0.7rem;">√âQUIPEMENTS</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-2 bg-light rounded text-center border">
                                <div class="h4 fw-bold {{ 'text-danger' if data.securite.alertes > 0 else 'text-success' }} mb-0">
                                    {{ data.securite.alertes }}
                                </div>
                                <small class="text-muted" style="font-size: 0.7rem;">√Ä CONTR√îLER</small>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="progress" style="height: 20px;">
                                <div class="progress-bar {{ 'bg-success' if data.securite.taux_conformite == 100 else 'bg-warning' }}" 
                                     role="progressbar" 
                                     style="width: {{ data.securite.taux_conformite }}%;" 
                                     aria-valuenow="{{ data.securite.taux_conformite }}" 
                                     aria-valuemin="0" 
                                     aria-valuemax="100">
                                    {{ data.securite.taux_conformite }}% Conforme
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-3 bg-light border-top">
                    <a href="{{ url_for('securite.index') }}" class="btn-dashboard w-100">
                        <i class="bi bi-shield-check me-2"></i>G√©rer la s√©curit√©
                    </a>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Widget Mes R√©servations -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="widget-card shadow-sm">
                <div class="bg-white border-bottom p-3 d-flex align-items-center gap-3">
                    <div class="widget-icon-wrapper" style="background: linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%);">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path d="M6 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1H9v1.07a7.001 7.001 0 0 1 3.274 12.474l.601.602a.5.5 0 0 1-.707.708l-.746-.746A6.97 6.97 0 0 1 8 16a6.97 6.97 0 0 1-3.422-.892l-.746.746a.5.5 0 0 1-.707-.708l.602-.602A7.001 7.001 0 0 1 7 2.07V1h-.5A.5.5 0 0 1 6 .5m2.5 5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9zM.86 5.387A2.5 2.5 0 1 1 4.387 1.86 8.04 8.04 0 0 0 .86 5.387M11.613 1.86a2.5 2.5 0 1 1 3.527 3.527 8.04 8.04 0 0 0-3.527-3.527"/>
                        </svg>
                    </div>
                    <h3 class="h5 mb-0 fw-bold text-dark">Mes R√©servations</h3>
                </div>
                <div class="p-0 flex-grow-1">
                    {% if data.reservations %}
                        <div class="list-group list-group-flush">
                        {% for resa in data.reservations %}
                            <!-- CORRECTION : C'est maintenant un lien (a) vers la vue jour -->
                            <a href="{{ url_for('main.vue_jour', date_str=resa.debut.strftime('%Y-%m-%d')) }}" 
                               class="list-group-item list-group-item-action p-3 border-bottom text-decoration-none">
                                
                                <!-- En-t√™te : Date et Heure -->
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <div class="d-flex align-items-center gap-2">
                                        <!-- L'ic√¥ne date devient implicitement cliquable car elle est dans le lien -->
                                        <div class="bg-primary-subtle text-primary rounded px-2 py-1 fw-bold small">
                                            {{ resa.debut|strftime('%d') }}
                                            <span class="text-uppercase" style="font-size: 0.7em;">{{ resa.debut|strftime('%b') }}</span>
                                        </div>
                                        <span class="fw-bold text-dark">{{ resa.debut|strftime_fr('%A') }}</span>
                                    </div>
                                    <span class="badge bg-light text-dark border font-monospace">
                                        {{ resa.debut|strftime('%H:%M') }} - {{ resa.fin|strftime('%H:%M') }}
                                    </span>
                                </div>

                                <!-- Liste des items (Compacte) -->
                                <div class="d-flex flex-column gap-1 mt-2">
                                    {% for item in resa.liste_items %} 
                                        <div class="d-flex align-items-center justify-content-between" style="font-size: 0.8rem;"> <!-- Police r√©duite ici -->
                                            <div class="d-flex align-items-center gap-2 text-truncate">
                                                {% if item.type == 'kit' %}
                                                    <span class="badge bg-info-subtle text-info-emphasis border border-info-subtle p-1" style="font-size: 0.7em;" title="Kit">
                                                        <i class="bi bi-box-seam"></i>
                                                    </span>
                                                {% else %}
                                                    <span class="badge bg-secondary-subtle text-secondary-emphasis border border-secondary-subtle p-1" style="font-size: 0.7em;" title="Objet">
                                                        <i class="bi bi-eyedropper"></i>
                                                    </span>
                                                {% endif %}
                                                
                                                <span class="text-muted text-truncate">{{ item.nom }}</span>
                                            </div>
                                            <span class="fw-bold text-dark">x{{ item.quantite }}</span>
                                        </div>
                                    {% endfor %}
                                </div>
                            </a>
                        {% endfor %}
                        </div>
                    {% else %}
                        <div class="text-center text-muted py-5">
                            <i class="bi bi-calendar-x display-4 opacity-25"></i>
                            <p class="mb-0 mt-2">Aucune r√©servation √† venir.</p>
                        </div>
                    {% endif %}
                </div>
                <div class="p-3 bg-light border-top">
                    <a href="{{ url_for('main.calendrier') }}" class="btn-dashboard w-100">R√©server</a>
                </div>
            </div>
        </div>

        <!-- Widget Fournisseurs -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="widget-card shadow-sm">
                <!-- Header -->
                <div class="bg-white border-bottom p-3 d-flex align-items-center gap-3">
                    <div class="widget-icon-wrapper" style="background: linear-gradient(135deg, #0ba360 0%, #3cba92 100%);">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
							<path d="M280-160q-50 0-85-35t-35-85H60l18-80h113q17-19 40-29.5t49-10.5q26 0 49 10.5t40 29.5h167l84-360H182l4-17q6-28 27.5-45.5T264-800h456l-37 160h117l120 160-40 200h-80q0 50-35 85t-85 35q-50 0-85-35t-35-85H400q0 50-35 85t-85 35Z"/>
						</svg>
                    </div>
                    <h3 class="h5 mb-0 fw-bold text-dark">Fournisseurs</h3>
                </div>
                
                <!-- Liste -->
                <div class="widget-body p-0 flex-grow-1">
                    {% if data.fournisseurs %}
                        <div class="list-group list-group-flush">
                        {% for f in data.fournisseurs %}
                            <div class="supplier-item p-3 d-flex align-items-center gap-3">
                                <!-- Avatar Intelligent -->
                                <div class="supplier-avatar">
                                    {% if f.logo %}
                                        <!-- Image du logo -->
                                        <img src="{{ f.logo }}" alt="{{ f.nom }}" class="supplier-logo-img" 
                                             onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
                                        <!-- Fallback (Initiale) si l'image ne charge pas -->
                                        <span style="display: none;">{{ f.nom[0]|upper }}</span>
                                    {% else %}
                                        <!-- Initiale si pas de logo du tout -->
                                        <span>{{ f.nom[0]|upper }}</span>
                                    {% endif %}
                                </div>

                                <!-- Infos -->
                                <div class="flex-grow-1 overflow-hidden">
                                    <div class="fw-bold text-dark text-truncate">{{ f.nom }}</div>
                                    {% if f.site_web %}
                                        <a href="{{ f.site_web }}" target="_blank" class="supplier-link">
                                            <i class="bi bi-link-45deg"></i> Site web
                                        </a>
                                    {% else %}
                                        <span class="text-muted small" style="font-size: 0.8rem;">Aucun site web</span>
                                    {% endif %}
                                </div>
                                
                                <!-- Petite fl√®che d√©co -->
                                <i class="bi bi-chevron-right text-muted opacity-25"></i>
                            </div>
                        {% endfor %}
                        </div>
                    {% else %}
                        <div class="p-4 d-flex align-items-center justify-content-center h-100">
                            <div class="text-center text-muted opacity-50">
                                <i class="bi bi-shop display-4"></i>
                                <p class="mt-2 small mb-0">Annuaire vide</p>
                            </div>
                        </div>
                    {% endif %}
                </div>
                
                <!-- Footer -->
                <div class="p-3 bg-light border-top">
                    <!-- Tout le monde peut cliquer ici -->
					<a href="{{ url_for('main.voir_fournisseurs') }}" class="btn btn-dashboard w-100">
						<i class="bi bi-eye me-2"></i>Voir l'annuaire
					</a>
                </div>
            </div>
        </div>

        <!-- Widget Mouvements de Stock (ADMIN ONLY) -->
        {% if session.user_role == 'admin' %}
        <div class="col-12 col-md-6 col-lg-4">
            <div class="widget-card shadow-sm h-100">
                <!-- Header avec Onglets int√©gr√©s -->
                <div class="bg-white border-bottom p-3">
                    <div class="d-flex align-items-center gap-3 mb-3">
                        <!-- Fond D√©grad√© Rose/Rouge Vif pour le c√¥t√© "Pulse/Urgence" -->
						<div class="widget-icon-wrapper" style="background: linear-gradient(135deg, #FF416C 0%, #FF4B2B 100%);">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-clipboard-pulse" viewBox="0 0 16 16">
								<path fill-rule="evenodd" d="M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5zm-2 0h1v1H3a1 1 0 0 0-1 1V14a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V3.5a1 1 0 0 0-1-1h-1v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2m6.979 3.856a.5.5 0 0 0-.968.04L7.92 10.49l-.94-3.135a.5.5 0 0 0-.895-.133L4.232 10H3.5a.5.5 0 0 0 0 1h1a.5.5 0 0 0 .416-.223l1.41-2.115 1.195 3.982a.5.5 0 0 0 .968-.04L9.58 7.51l.94 3.135A.5.5 0 0 0 11 11h1.5a.5.5 0 0 0 0-1h-1.128z"/>
							</svg>
						</div>
                        <h3 class="h5 mb-0 fw-bold text-dark">Mouvements</h3>
                    </div>

                    <!-- Navigation des Onglets -->
                    <ul class="nav nav-pills nav-fill small gap-1" id="historyTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active py-1 px-2" id="tab-modif" data-bs-toggle="tab" data-bs-target="#content-modif" type="button">
                                <i class="bi bi-pencil-square text-warning"></i> <span class="d-none d-sm-inline">Modifs</span>
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link py-1 px-2" id="tab-move" data-bs-toggle="tab" data-bs-target="#content-move" type="button">
                                <i class="bi bi-arrow-left-right text-info"></i> <span class="d-none d-sm-inline">D√©plac.</span>
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link py-1 px-2" id="tab-add" data-bs-toggle="tab" data-bs-target="#content-add" type="button">
                                <i class="bi bi-plus-circle-fill text-success"></i> <span class="d-none d-sm-inline">Ajouts</span>
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link py-1 px-2" id="tab-del" data-bs-toggle="tab" data-bs-target="#content-del" type="button">
                                <i class="bi bi-trash-fill text-danger"></i> <span class="d-none d-sm-inline">Suppr.</span>
                            </button>
                        </li>
                    </ul>
                </div>

                <!-- Contenu des Onglets -->
                <div class="tab-content flex-grow-1 p-0" id="historyTabContent" style="max-height: 350px; overflow-y: auto;">
                    
                    <!-- 1. MODIFICATIONS -->
                    <div class="tab-pane fade show active" id="content-modif" role="tabpanel">
                        {% if data.historique_groupe.modifications %}
                            <ul class="list-group list-group-flush">
                            {% for h in data.historique_groupe.modifications %}
                                <li class="list-group-item p-3 border-bottom-0 border-top">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <span class="fw-bold text-dark small">{{ h.objet }}</span>
                                        <small class="text-muted" style="font-size: 0.7rem;">{{ h.date|strftime('%d/%m') }}</small>
                                    </div>
                                    <div class="text-muted small mt-1"><i class="bi bi-person-circle me-1"></i>{{ h.user }}</div>
                                    <div class="mt-1 badge bg-warning-subtle text-dark border border-warning-subtle text-wrap text-start fw-normal w-100">
                                        {{ h.details }}
                                    </div>
                                </li>
                            {% endfor %}
                            </ul>
                        {% else %}
                            <div class="text-center py-5 text-muted small">Aucune modification r√©cente.</div>
                        {% endif %}
                    </div>

                    <!-- 2. D√âPLACEMENTS -->
                    <div class="tab-pane fade" id="content-move" role="tabpanel">
                        {% if data.historique_groupe.deplacements %}
                            <ul class="list-group list-group-flush">
                            {% for h in data.historique_groupe.deplacements %}
                                <li class="list-group-item p-3 border-bottom-0 border-top">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <span class="fw-bold text-dark small">{{ h.objet }}</span>
                                        <small class="text-muted" style="font-size: 0.7rem;">{{ h.date|strftime('%d/%m') }}</small>
                                    </div>
                                    <div class="mt-1 text-info small">
                                        <i class="bi bi-arrow-left-right me-1"></i>{{ h.details }}
                                    </div>
                                </li>
                            {% endfor %}
                            </ul>
                        {% else %}
                            <div class="text-center py-5 text-muted small">Aucun d√©placement r√©cent.</div>
                        {% endif %}
                    </div>

                    <!-- 3. CR√âATIONS -->
                    <div class="tab-pane fade" id="content-add" role="tabpanel">
                        {% if data.historique_groupe.creations %}
                            <ul class="list-group list-group-flush">
                            {% for h in data.historique_groupe.creations %}
                                <li class="list-group-item p-3 border-bottom-0 border-top">
                                    <div class="d-flex align-items-center gap-2">
                                        <div class="rounded-circle bg-success-subtle text-success d-flex align-items-center justify-content-center" style="width: 32px; height: 32px;">
                                            <i class="bi bi-plus-lg"></i>
                                        </div>
                                        <div>
                                            <div class="fw-bold text-dark small">{{ h.objet }}</div>
                                            <div class="text-muted x-small">{{ h.date|strftime('%d/%m %H:%M') }} par {{ h.user }}</div>
                                        </div>
                                    </div>
                                </li>
                            {% endfor %}
                            </ul>
                        {% else %}
                            <div class="text-center py-5 text-muted small">Aucun ajout r√©cent.</div>
                        {% endif %}
                    </div>

                    <!-- 4. SUPPRESSIONS -->
                    <div class="tab-pane fade" id="content-del" role="tabpanel">
                        {% if data.historique_groupe.suppressions %}
                            <ul class="list-group list-group-flush">
                            {% for h in data.historique_groupe.suppressions %}
                                <li class="list-group-item p-3 border-bottom-0 border-top bg-danger-subtle bg-opacity-10">
                                    <div class="d-flex align-items-center gap-2">
                                        <div class="rounded-circle bg-white text-danger border border-danger d-flex align-items-center justify-content-center" style="width: 32px; height: 32px;">
                                            <i class="bi bi-trash"></i>
                                        </div>
                                        <div>
                                            <div class="fw-bold text-danger small text-decoration-line-through">{{ h.objet }}</div>
                                            <div class="text-danger-emphasis x-small">{{ h.date|strftime('%d/%m') }} par {{ h.user }}</div>
                                        </div>
                                    </div>
                                </li>
                            {% endfor %}
                            </ul>
                        {% else %}
                            <div class="text-center py-5 text-muted small">Aucune suppression r√©cente.</div>
                        {% endif %}
                    </div>

                </div>
            </div>
        </div>
        {% endif %}

        <!-- Widget Nouveaut√©s & Contact -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="widget-card shadow-sm">
                <div class="bg-white border-bottom p-3 d-flex align-items-center gap-3">
                    <div class="widget-icon-wrapper" style="background: linear-gradient(135deg, #0d6efd 0%, #0dcaf0 100%);">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0"/>
                            <path d="M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7.256A4.5 4.5 0 0 0 12.5 8a4.5 4.5 0 0 0-3.59 1.787A.5.5 0 0 0 9 9.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .39-.187A4.5 4.5 0 0 0 8.027 12H6.5a.5.5 0 0 0-.5.5V16H3a1 1 0 0 1-1-1zm2 1.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5m3 0v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5m3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM4 5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5M7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5zm2.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5M4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"/>
                        </svg>
                    </div>
                    <h3 class="h5 mb-0 fw-bold text-dark">Nouveaut√©s et contact</h3>
                </div>
                <div class="p-0 flex-grow-1">
                    <div class="p-2 bg-light border-bottom text-center">
                        <small class="text-uppercase fw-bold text-muted" style="font-size: 0.7rem;">Ajouts r√©cents (-24h)</small>
                    </div>
                    {% if data.objets_recents %}
                        <ul class="list-group list-group-flush">
                        {% for objet in data.objets_recents %}
                            <li class="list-group-item d-flex justify-content-between align-items-center p-2 px-3">
                                <span class="small fw-medium text-dark">{{ objet.nom }}</span>
                                <a href="{{ url_for('inventaire.voir_objet', objet_id=objet.id) }}" class="btn btn-sm btn-link p-0 text-decoration-none">Voir</a>
                            </li>
                        {% endfor %}
                        </ul>
                    {% else %}
                        <p class="text-center text-muted py-4 small mb-0">Aucun ajout.</p>
                    {% endif %}
                </div>
                <div class="p-3 bg-light border-top">
                    <a href="mailto:{{ data.admin_contact }}" class="btn-dashboard w-100">Contacter l'admin</a>
                </div>
            </div>
        </div>

        <!-- Widget Statistiques Admin -->
        {% if session.user_role == 'admin' and data.stats %}
        <div class="col-12 col-md-6 col-lg-4">
            <div class="widget-card shadow-sm">
                <div class="bg-white border-bottom p-3 d-flex align-items-center gap-3">
                    <div class="widget-icon-wrapper" style="background: linear-gradient(135deg, #6610f2 0%, #6f42c1 100%);">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path d="M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1z"/>
                        </svg>
                    </div>
                    <h3 class="h5 mb-0 fw-bold text-dark">Statistiques Cl√©s</h3>
                </div>
                <div class="p-4 flex-grow-1">
                    <div class="row g-3">
                        <div class="col-6">
                            <div class="p-2 bg-light rounded text-center border">
                                <div class="h4 fw-bold text-primary mb-0">{{ data.stats.total_objets }}</div>
                                <small class="text-muted" style="font-size: 0.7rem;">OBJETS</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-2 bg-light rounded text-center border">
                                <div class="h4 fw-bold text-success mb-0">{{ data.stats.reservations_actives }}</div>
                                <small class="text-muted" style="font-size: 0.7rem;">R√âSAS</small>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="p-2 bg-light rounded text-center border">
                                <div class="h5 fw-bold text-dark mb-0">{{ data.stats.total_utilisateurs }}</div>
                                <small class="text-muted" style="font-size: 0.7rem;">UTILISATEURS</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-3 bg-light border-top">
                    <a href="{{ url_for('admin.admin') }}" class="btn-dashboard w-100">Panel Admin</a>
                </div>
            </div>
        </div>
        {% endif %}

    </div>
</div>
{% endblock %}

{% block scripts %}
<script type="module">
    import { startTour } from "{{ url_for('static', filename='js/modules/tour.js') }}";
    
    // On lance le tour si le backend le demande (variable start_tour)
    {% if start_tour %}
        // Petit d√©lai pour laisser le temps au CSS/DOM de charger
        setTimeout(() => {
            startTour();
        }, 1000);
    {% endif %}
</script>
{% endblock %}

==================================================
FICHIER : templates\inventaire.html
==================================================
{% extends "base.html" %}

{% block title %}Inventaire Complet - LabFlow{% endblock %}

{% block content %}

    <div class="main-container" data-add-url="{{ url_for('inventaire.ajouter_objet') }}">
        
        <!-- BARRE DE FILTRES PREMIUM -->
		<div class="filter-bar-container mb-4 fade-in-down">
			<div class="filter-bar">
				
				<!-- Filtre Armoire -->
				<div class="filter-group">
					<div class="filter-icon">
						<i class="bi bi-archive"></i>
					</div>
					<div class="filter-content">
						<label for="filtre-armoire" class="filter-label">Armoire</label>
						<select id="filtre-armoire" class="filter-select">
							<option value="">Toutes</option>
							{% for a in armoires %}
								<option value="{{ a.id }}" {% if armoire_id == a.id %}selected{% endif %}>{{ a.nom }}</option>
							{% endfor %}
						</select>
					</div>
				</div>

				<div class="filter-separator"></div>

				<!-- Filtre Cat√©gorie -->
				<div class="filter-group">
					<div class="filter-icon">
						<i class="bi bi-tags"></i>
					</div>
					<div class="filter-content">
						<label for="filtre-categorie" class="filter-label">Cat√©gorie</label>
						<select id="filtre-categorie" class="filter-select">
							<option value="">Toutes</option>
							{% for c in categories %}
								<option value="{{ c.id }}" {% if categorie_id == c.id %}selected{% endif %}>{{ c.nom }}</option>
							{% endfor %}
						</select>
					</div>
				</div>

				<div class="filter-separator"></div>

				<!-- Filtre √âtat -->
				<div class="filter-group">
					<div class="filter-icon">
						<i class="bi bi-heart-pulse"></i>
					</div>
					<div class="filter-content">
						<label for="filtre-etat" class="filter-label">√âtat</label>
						<select id="filtre-etat" class="filter-select">
							<option value="">Tous</option>
							<option value="stock" {% if request.args.get('etat') == 'stock' %}selected{% endif %}>Stock bas</option>
							<option value="bientot" {% if request.args.get('etat') == 'bientot' %}selected{% endif %}>P√©remption proche</option>
							<option value="perime" {% if request.args.get('etat') == 'perime' %}selected{% endif %}>P√©rim√©</option>
						</select>
					</div>
				</div>

				<!-- Bouton Reset -->
				<div class="filter-actions">
					<a href="{{ url_for('inventaire.inventaire') }}" class="btn-reset-filters" title="R√©initialiser les filtres">
						<i class="bi bi-arrow-counterclockwise"></i>
					</a>
				</div>

			</div>
		</div>

        <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
			<h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
				<!-- Ic√¥ne Inventaire (Style Carte Admin : D√©grad√© Bleu) -->
				<div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
					 style="width: 48px; height: 48px; background: linear-gradient(135deg, #0d6efd 0%, #0dcaf0 100%);">
					<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-credit-card-2-front-fill" viewBox="0 0 16 16">
					  <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2.5 1a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm0 3a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm3 0a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm3 0a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm3 0a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1z"/>
					</svg>
				</div>
				<span class="fw-bold">Liste G√©n√©rale des Objets</span>
			</h2>
			
			<!-- Bouton d'action (Conserv√©) -->
			<div class="page-actions-container">
				{% if session.user_id %}
				<button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addObjectModal">
					<i class="bi bi-plus-circle-fill me-2"></i> Ajouter un mat√©riel
				</button>
				{% endif %}
			</div>
		</div>

        {% if objets %}
            <div id="dynamic-content" data-endpoint="inventaire" data-sort-by="{{ sort_by }}" data-direction="{{ direction }}">
                {% include '_inventaire_content.html' %}
            </div>
        {% else %}
            <div class="empty-state-container">
                <div class="empty-state-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="page-title-icon" viewBox="0 -960 960 960"><path d="M200-80q-33 0-56.5-23.5T120-160v-640q0-33 23.5-56.5T200-880h560q33 0 56.5 23.5T840-800v640q0 33-23.5 56.5T760-80H200Zm0-80h560v-640H200v640Zm140-40h280v-280h-80v120l-60-60-60 60v-120h-80v280Zm-60-320h400v-80H280v80Z"/></svg>
                </div>
                <h3>Votre inventaire est vide</h3>
                <p>Commencez par ajouter votre premier objet pour peupler votre inventaire.</p>
                {% if session.user_id %}
                <button class="btn btn-primary mt-3" data-bs-toggle="modal" data-bs-target="#addObjectModal">
                    Ajouter le premier objet
                </button>
                {% endif %}
            </div>
        {% endif %}
    </div>

	{% include '_modale_danger.html' %}
{% endblock %}

{% block scripts %}
    <!-- Pas de script sp√©cifique n√©cessaire pour cette page -->
{% endblock %}

==================================================
FICHIER : templates\legal.html
==================================================
{% extends "base.html" %}

{% block title %}Mentions L√©gales & Confidentialit√© - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    {% include '_breadcrumb.html' %}

    <div class="row justify-content-center fade-in-up">
        <div class="col-lg-10">
            
            <div class="card border-0 shadow-sm rounded-3 overflow-hidden">
                <!-- En-t√™te des Onglets -->
                <div class="card-header bg-white border-bottom pt-4 px-4 pb-0">
                    <ul class="nav nav-tabs card-header-tabs border-bottom-0" id="legalTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active fw-bold py-3 px-4" id="mentions-tab" 
                                    data-bs-toggle="tab" data-bs-target="#mentions" type="button" role="tab">
                                <i class="bi bi-building me-2"></i>Mentions L√©gales
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link fw-bold py-3 px-4" id="privacy-tab" 
                                    data-bs-toggle="tab" data-bs-target="#privacy" type="button" role="tab">
                                <i class="bi bi-shield-lock me-2"></i>Confidentialit√© (RGPD)
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link fw-bold py-3 px-4" id="cgu-tab" 
                                    data-bs-toggle="tab" data-bs-target="#cgu" type="button" role="tab">
                                <i class="bi bi-file-text me-2"></i>CGU
                            </button>
                        </li>
                    </ul>
                </div>
                
                <!-- Contenu -->
                <div class="card-body p-5">
                    <div class="tab-content" id="legalTabContent">
                        
                        <!-- 1. MENTIONS L√âGALES (ID="mentions") -->
                        <div class="tab-pane fade show active" id="mentions" role="tabpanel">
                            <h3 class="h4 fw-bold text-primary mb-4">√âditeur du service</h3>
                            <div class="ps-3 border-start border-4 border-primary mb-4">
                                <p class="mb-1"><strong>Nom du service :</strong> LabFlow</p>
                                <p class="mb-1"><strong>D√©veloppeurs :</strong> Xavier De Baudry d'Asson & Yll Basha</p>
                                <p class="mb-1"><strong>Contact :</strong> <a href="mailto:contact.gmlcl@gmail.com">contact.gmlcl@gmail.com</a></p>
                                <p class="mb-0"><strong>H√©bergement :</strong> Serveurs acad√©miques / Local</p>
                            </div>
                            
                            <h4 class="h5 fw-bold mt-5 mb-3">Propri√©t√© Intellectuelle</h4>
                            <p class="text-muted">
                                L'ensemble de ce site rel√®ve de la l√©gislation fran√ßaise et internationale sur le droit d'auteur et la propri√©t√© intellectuelle. 
                                Tous les droits de reproduction sont r√©serv√©s, y compris pour les documents t√©l√©chargeables et les repr√©sentations iconographiques et photographiques.
                            </p>
                        </div>

                        <!-- 2. CONFIDENTIALIT√â (ID="privacy") -->
                        <div class="tab-pane fade" id="privacy" role="tabpanel">
                            <h3 class="h4 fw-bold text-primary mb-4">Politique de Confidentialit√©</h3>
                            
                            <div class="alert alert-info border-0 shadow-sm d-flex align-items-center mb-4">
                                <i class="bi bi-shield-check fs-3 me-3"></i>
                                <div>
                                    <strong>Respect de la vie priv√©e</strong>
                                    <div class="small">LabFlow est con√ßu selon le principe de "Privacy by Design". Aucune donn√©e n'est revendue.</div>
                                </div>
                            </div>

                            <h5 class="fw-bold mt-4">1. Donn√©es collect√©es</h5>
                            <ul class="text-muted">
                                <li><strong>Identit√© :</strong> Nom, Pr√©nom, Email (pour l'authentification).</li>
                                <li><strong>Activit√©s :</strong> Historique des r√©servations et mouvements de stock (pour la tra√ßabilit√© interne).</li>
                            </ul>

                            <h5 class="fw-bold mt-4">2. Cookies</h5>
                            <p class="text-muted">
                                Nous utilisons un unique cookie de session (<code>session_id</code>) strictement n√©cessaire au fonctionnement de l'application. 
                                Aucun traceur publicitaire ou analytique tiers n'est utilis√©.
                            </p>

                            <h5 class="fw-bold mt-4">3. Vos Droits (RGPD)</h5>
                            <p class="text-muted">
                                Conform√©ment au R√®glement G√©n√©ral sur la Protection des Donn√©es, vous disposez d'un droit d'acc√®s, de rectification et de suppression de vos donn√©es.
                                Pour exercer ce droit, veuillez contacter l'administrateur de votre √©tablissement.
                            </p>
                        </div>

                        <!-- 3. CGU (ID="cgu") -->
                        <div class="tab-pane fade" id="cgu" role="tabpanel">
                            <h3 class="h4 fw-bold text-primary mb-4">Conditions G√©n√©rales d'Utilisation</h3>
                            <p class="text-muted">
                                L'acc√®s et l'utilisation de l'application LabFlow impliquent l'acceptation sans r√©serve des pr√©sentes conditions.
                            </p>
                            
                            <div class="row mt-4 g-4">
                                <div class="col-md-6">
                                    <div class="p-3 bg-light rounded h-100">
                                        <h6 class="fw-bold"><i class="bi bi-person-check me-2"></i>Responsabilit√©</h6>
                                        <p class="small text-muted mb-0">Chaque utilisateur est responsable de la confidentialit√© de ses identifiants et des actions effectu√©es sur son compte.</p>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="p-3 bg-light rounded h-100">
                                        <h6 class="fw-bold"><i class="bi bi-hdd-network me-2"></i>Disponibilit√©</h6>
                                        <p class="small text-muted mb-0">L'application est fournie "telle quelle". L'√©quipe de d√©veloppement ne saurait √™tre tenue responsable en cas d'indisponibilit√© temporaire.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- SCRIPT DE GESTION DES ONGLETS VIA URL -->
<!-- SCRIPT DE GESTION DES ANCRES (V2 - ROBUSTE) -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    
    // Fonction centrale pour activer l'onglet
    function activateTabFromHash() {
        const hash = window.location.hash;
        if (hash) {
            // On cherche le bouton qui cible cet ID (ex: data-bs-target="#privacy")
            const triggerEl = document.querySelector(`button[data-bs-target="${hash}"]`);
            
            if (triggerEl) {
                // On utilise getOrCreateInstance pour √©viter les conflits
                const tab = bootstrap.Tab.getOrCreateInstance(triggerEl);
                tab.show(); // Active l'onglet
                
                // Petit scroll pour bien centrer l'onglet s√©lectionn√©
                setTimeout(() => {
                    triggerEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 150);
            }
        }
    }

    // 1. Ex√©cuter au chargement initial de la page
    activateTabFromHash();

    // 2. Ex√©cuter quand l'URL change (ex: clic footer alors qu'on est d√©j√† sur la page)
    window.addEventListener('hashchange', activateTabFromHash);

    // 3. Mettre √† jour l'URL quand on clique manuellement sur un onglet
    // (Pour que si on rafra√Æchit, on reste sur le bon onglet)
    const tabButtons = document.querySelectorAll('button[data-bs-toggle="tab"]');
    tabButtons.forEach(btn => {
        btn.addEventListener('shown.bs.tab', event => {
            const targetId = event.target.getAttribute('data-bs-target');
            // history.replaceState change l'URL sans recharger et sans d√©clencher hashchange
            history.replaceState(null, null, targetId);
        });
    });
});
</script>
{% endblock %}

==================================================
FICHIER : templates\Licence.txt
==================================================
Copyright (c) 2025 Xavier De Baudry d'Asson & Yll Basha

Tous droits r√©serv√©s.

Il est interdit de reproduire, distribuer, modifier, d√©compiler ou faire de l'ing√©nierie inverse sur ce logiciel sans l'autorisation √©crite pr√©alable des d√©tenteurs des droits d'auteur.

==================================================
FICHIER : templates\login.html
==================================================
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion - LabFlow</title>
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/modules/auth.css') }}">
</head>

<body class="login-page-body">

    <div class="login-form-container">
        <!-- En-t√™te -->
        <div class="login-header">
            <div class="login-icon-wrapper">
                <i class="bi bi-lock-fill fs-3 text-primary"></i>
            </div>
            <h2>Connexion</h2>
        </div>

        <!-- Messages Flash -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category == 'error' else category }} shadow-sm border-0 mb-4 py-2 small">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <!-- Formulaire de Connexion -->
        <form action="{{ url_for('auth.login') }}" method="post" class="login-form">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

            <!-- Champ Utilisateur -->
            <div class="input-group mb-3">
                <span class="input-group-text">
                    <i class="bi bi-person-fill"></i>
                </span>
                <input type="text" class="form-control" id="username" name="username" placeholder="Nom d'utilisateur" required autofocus>
            </div>

            <!-- Champ Mot de passe -->
            <div class="input-group mb-4">
                <span class="input-group-text">
                    <i class="bi bi-lock-fill"></i>
                </span>
                <input type="password" class="form-control" id="password" name="password" placeholder="Mot de passe" required>
            </div>

            <button type="submit" class="btn-login w-100">
                Se connecter
            </button>
        </form>

        <!-- PIED DE PAGE : Choix SaaS -->
        <div class="register-footer mt-4 pt-3 border-top">
            <p class="text-muted small mb-3">Nouveau sur LabFlow ?</p>
            
            <div class="d-grid gap-2">
                <a href="{{ url_for('auth.register') }}" class="btn btn-outline-secondary btn-sm text-start">
                    <i class="bi bi-person-plus-fill me-2"></i>Rejoindre une √©quipe
                </a>
                <a href="{{ url_for('auth.setup') }}" class="btn btn-outline-success btn-sm text-start fw-bold">
                    <i class="bi bi-building-add me-2"></i>Cr√©er mon √©tablissement
                </a>
            </div>
        </div>
    </div>

</body>
</html>

==================================================
FICHIER : templates\modale_objet.html
==================================================
<div id="add-object-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h3 id="modal-objet-title" class="modal-title-with-icon">
                <svg class="modal-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M440-200h80v-160h160v-80H520v-160h-80v160H280v80h160v160ZM200-80q-33 0-56.5-23.5T120-160v-640q0-33 23.5-56.5T200-880h560q33 0 56.5 23.5T840-800v640q0 33-23.5 56.5T760-80H200Z"/></svg>
                <span>Ajouter un Nouvel Objet</span>
            </h3>
            <button type="button" class="close-btn">√ó</button>
        </div>
        <form id="modal-form-objet" action="" method="post" class="modal-form">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <div class="form-grid">
                <!-- Colonne de gauche -->
                <div class="form-column">
                    <div class="form-group">
                        <label for="nom">Nom de l'objet</label>
                        <input type="text" id="nom" name="nom" required>
                    </div>
                    <div class="form-group">
                        <label for="quantite">Quantit√©</label>
                        <input type="number" id="quantite" name="quantite" required>
                    </div>
                    <div class="form-group">
                        <label for="seuil">Seuil d'alerte</label>
                        <input type="number" id="seuil" name="seuil" required>
                    </div>
                    <div class="form-group">
                        <label for="date_peremption">Date de p√©remption</label>
                        <input type="date" id="date_peremption" name="date_peremption">
                    </div>
                    <div class="form-group">
                        <label for="armoire_id">Armoire</label>
                        <select id="armoire_id" name="armoire_id" required>
                            {% for a in all_armoires %}<option value="{{ a.id }}">{{ a.nom }}</option>{% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="categorie_id">Cat√©gorie</label>
                        <select id="categorie_id" name="categorie_id" required>
                            {% for c in all_categories %}<option value="{{ c.id }}">{{ c.nom }}</option>{% endfor %}
                        </select>
                    </div>
                </div>
                <!-- Colonne de droite -->
                <div class="form-column">
                    <div class="form-group">
                        <label for="image_url">Image (Optionnel)</label>
                        <div class="input-with-button">
                            <input type="text" id="image_url" name="image_url" placeholder="Coller une URL ou chercher">
                            <button type="button" id="btn-search-pexels" class="btn-action">Chercher</button>
                        </div>
                        <small class="form-help-text">Utilisez le nom de l'objet et cliquez sur "Chercher".</small>
                    </div>
                    <div id="pexels-results" class="pexels-results-grid" style="display: none;"></div>
                    <div id="image-preview-container" style="display:none; text-align: center;">
                        <img id="image-preview" src="" class="image-preview-modal" alt="Aper√ßu">
                    </div>
                    <div class="form-group">
                        <label for="fds_url">Fiche de S√©curit√© (URL du PDF)</label>
                        <input type="text" id="fds_url" name="fds_url" placeholder="Coller l'URL de la FDS">
                        <small class="form-help-text">Disponible sur le site de votre fournisseur.</small>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
				<!-- On s'assure que les classes sont bien l√† -->
				<button type="button" class="btn btn-secondary btn-cancel">Annuler</button>
				<button type="submit" id="modal-submit-btn" class="btn btn-primary">Enregistrer l'objet</button>
			</div>
        </form>
    </div>
</div>

==================================================
FICHIER : templates\objet_details.html
==================================================
{% extends "base.html" %}

{% block title %}{{ objet.nom }} - D√©tails{% endblock %}

{% block content %}

<div class="main-container">
    
    <!-- Fil d'ariane -->
    {% include '_breadcrumb.html' %}

    <div class="row g-4">
        
        <!-- COLONNE GAUCHE : Identit√© & Actions -->
        <div class="col-lg-4">
            <div class="card border-0 shadow-sm rounded-3 overflow-hidden">
                <!-- Image -->
                <div class="object-image-container">
					{% if objet.image_url %}
						{% if objet.image_url.startswith('http') %}
							<!-- Cas 1 : URL Externe (Copi√©-coll√©) -->
							<img src="{{ objet.image_url }}" alt="{{ objet.nom }}" class="object-image">
						{% else %}
							<!-- Cas 2 : Fichier Upload√© (Local) -->
							<img src="{{ url_for('static', filename=objet.image_url) }}" alt="{{ objet.nom }}" class="object-image">
						{% endif %}
					{% else %}
						<!-- Cas 3 : Pas d'image (Placeholder) -->
						<div class="text-center text-muted opacity-50">
							<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" class="bi bi-image" viewBox="0 0 16 16">
								<path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"/>
								<path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12"/>
							</svg>
							<p class="mt-2 mb-0 small">Aucune image</p>
						</div>
					{% endif %}
				</div>

                <div class="card-body">
                    <h1 class="h4 fw-bold mb-2">{{ objet.nom }}</h1>
                    
                    <div class="mb-4">
                        {% if objet.categorie %}
                            <span class="badge bg-primary-subtle text-primary border border-primary-subtle">
                                <i class="bi bi-tag-fill me-1"></i> {{ objet.categorie.nom }}
                            </span>
                        {% else %}
                            <span class="badge bg-secondary">Sans cat√©gorie</span>
                        {% endif %}
                    </div>

                    <!-- Infos Rapides -->
                    <ul class="list-group list-group-flush mb-4 small">
                        <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                            <span class="text-muted">Emplacement</span>
                            <span class="fw-bold text-dark">
                                <i class="bi bi-archive me-1"></i>
                                {{ objet.armoire.nom if objet.armoire else 'Non rang√©' }}
                            </span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                            <span class="text-muted">P√©remption</span>
                            {% if objet.date_peremption %}
                                <span class="fw-bold {{ 'text-danger' if objet.date_peremption < now.date() else 'text-dark' }}">
                                    {{ objet.date_peremption.strftime('%d/%m/%Y') }}
                                </span>
                            {% else %}
                                <span class="text-muted">-</span>
                            {% endif %}
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                            <span class="text-muted">Fiche S√©curit√© (FDS)</span>
                            
                            {% if objet.fds_url and objet.fds_url != 'None' %}
                                
                                {% set fds_clean = objet.fds_url.strip() %}

                                {% if fds_clean.lower().startswith('http') %}
                                    <!-- Cas URL Externe -->
                                    <a href="{{ fds_clean }}" target="_blank" class="text-decoration-none fw-bold text-danger">
                                        <i class="bi bi-file-earmark-pdf-fill"></i> Voir (Web)
                                    </a>
                                {% else %}
                                    <!-- Cas Fichier Local -->
                                    <a href="{{ url_for('static', filename=fds_clean) }}" target="_blank" class="text-decoration-none fw-bold text-danger">
                                        <i class="bi bi-file-earmark-pdf-fill"></i> Voir (PDF)
                                    </a>
                                {% endif %}

                            {% else %}
                                <span class="text-muted">-</span>
                            {% endif %}
                        </li>
                    </ul>

                    <!-- Actions -->
                    <div class="d-grid gap-2">
                        {% if session.user_role == 'admin' %}
                        <button class="btn btn-outline-primary" 
                                data-bs-toggle="modal" 
                                data-bs-target="#addObjectModal"
                                data-objet-id="{{ objet.id }}"
                                data-nom="{{ objet.nom }}"
                                data-quantite="{{ objet.quantite_physique }}"
                                data-seuil="{{ objet.seuil }}"
                                data-armoire-id="{{ objet.armoire_id }}"
                                data-categorie-id="{{ objet.categorie_id }}"
                                data-image-url="{{ objet.image_url }}"
                                data-date-peremption="{{ objet.date_peremption }}"
                                data-fds-url="{{ objet.fds_url }}">
                            <i class="bi bi-pencil-square me-2"></i>Modifier
                        </button>
                        {% endif %}
                        
                        <!-- Bouton Suggestion pour tous -->
                        <button class="btn btn-outline-warning text-dark btn-suggest"
								data-objet-id="{{ objet.id }}"
								data-objet-nom="{{ objet.nom }}"
								data-stock="{{ objet.quantite_physique }}"
								data-seuil="{{ objet.seuil }}">
							<i class="bi bi-cart-plus me-2"></i>Sugg√©rer une commande
						</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- COLONNE DROITE : Stock & Historique -->
        <div class="col-lg-8">
            
            <!-- Indicateurs de Stock -->
            <div class="row g-3 mb-4">
                <div class="col-md-6">
                    <div class="stock-indicator">
                        <div class="stock-value text-primary">{{ objet.quantite_physique }}</div>
                        <div class="stock-label">Stock Physique Total</div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="stock-indicator">
                        <div class="stock-value {{ 'text-success' if objet.quantite_disponible > objet.seuil else 'text-danger' }}">
                            {{ objet.quantite_disponible }}
                        </div>
                        <div class="stock-label">Disponible √† la r√©servation</div>
                    </div>
                </div>
            </div>

            <!-- Alerte Seuil -->
            {% if objet.quantite_physique <= objet.seuil %}
            <div class="alert alert-danger d-flex align-items-center mb-4 shadow-sm border-0" role="alert">
                <i class="bi bi-exclamation-triangle-fill fs-4 me-3"></i>
                <div>
                    <strong>Stock critique !</strong>
                    <div class="small">La quantit√© est inf√©rieure ou √©gale au seuil d'alerte ({{ objet.seuil }}). Pensez √† recommander.</div>
                </div>
            </div>
            {% endif %}

            <!-- Historique -->
            <div class="card border-0 shadow-sm rounded-3">
                <div class="card-header bg-white py-3 border-bottom">
                    <h5 class="mb-0 fw-bold text-dark">
                        <i class="bi bi-clock-history me-2 text-secondary"></i>Historique des mouvements
                    </h5>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover history-table mb-0">
                        <thead>
                            <tr>
                                <th style="width: 150px;">Date</th>
                                <th>Utilisateur</th>
                                <th>Action</th>
                                <th>D√©tails</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if historique %}
                                {% for h in historique %}
                                <tr>
                                    <td>{{ h.timestamp.strftime('%d/%m/%Y %H:%M') }}</td>
                                    <td>
                                        <div class="d-flex align-items-center gap-2">
                                            <div class="rounded-circle bg-light d-flex align-items-center justify-content-center" style="width: 24px; height: 24px;">
                                                <i class="bi bi-person-fill text-muted" style="font-size: 0.8rem;"></i>
                                            </div>
                                            {{ h.utilisateur.nom_utilisateur if h.utilisateur else 'Utilisateur supprim√©' }}
                                        </div>
                                    </td>
                                    <td>
                                        {% if 'Ajout' in h.action %}
                                            <span class="badge bg-success-subtle text-success border border-success-subtle">Ajout</span>
                                        {% elif 'Retrait' in h.action or 'Suppression' in h.action %}
                                            <span class="badge bg-danger-subtle text-danger border border-danger-subtle">Retrait</span>
                                        {% elif 'Modification' in h.action %}
                                            <span class="badge bg-warning-subtle text-warning border border-warning-subtle">Modif</span>
                                        {% else %}
                                            <span class="badge bg-secondary-subtle text-secondary border border-secondary-subtle">{{ h.action }}</span>
                                        {% endif %}
                                    </td>
                                    <td class="text-muted">{{ h.details }}</td>
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr>
                                    <td colspan="4" class="text-center py-4 text-muted">
                                        Aucun historique disponible pour cet objet.
                                    </td>
                                </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>
</div>

{% endblock %}

==================================================
FICHIER : templates\panier.html
==================================================
{% extends "base.html" %}

{% block title %}Mon Panier - LabFlow{% endblock %}

{% block content %}

<div class="main-container">
    
    <!-- Fil d'ariane -->
     {% include '_breadcrumb.html' %}

    <!-- En-t√™te Panier -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #6610f2 0%, #6f42c1 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-cart-fill" viewBox="0 0 16 16">
                    <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                </svg>
            </div>
            <span class="fw-bold">Mon Panier de R√©servation</span>
        </h2>
    </div>

    <!-- Carte Principale -->
    <div class="card border-0 shadow-sm rounded-3">
        
        <!-- Zone du contenu (Liste charg√©e par JS) -->
        <div id="cart-items-container" class="cart-list-wrapper p-3">
            <!-- Spinner initial -->
            <div class="text-center py-5">
                <div class="spinner-border text-primary" role="status"></div>
            </div>
        </div>

        <!-- Message Panier Vide (Cach√© par d√©faut) -->
        <div id="empty-cart-message" class="empty-cart-container text-center py-5" style="display: none;">
            <div class="mb-3">
                <i class="bi bi-cart-x display-1 text-muted opacity-25"></i>
            </div>
            <h3 class="h5 fw-bold text-dark">Votre panier est vide</h3>
            <p class="mb-4 text-muted">S√©lectionnez des objets dans le calendrier ou l'inventaire pour commencer.</p>
            <a href="{{ url_for('main.calendrier') }}" class="btn btn-primary">
                <i class="bi bi-calendar-week me-2"></i>Aller au calendrier
            </a>
        </div>

        <!-- Actions (Footer) -->
        <div id="cart-actions" class="card-footer bg-white d-flex justify-content-between align-items-center p-3" style="display: none;">
            <button id="clear-cart-btn" class="btn btn-outline-danger">
                <i class="bi bi-trash me-2"></i>Vider le panier
            </button>
            
            <button id="confirm-cart-btn" class="btn btn-success btn-lg px-4 shadow-sm">
                <i class="bi bi-check-circle-fill me-2"></i>Confirmer la r√©servation
            </button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<!-- Import du module JS qui g√®re tout -->
<script src="{{ url_for('static', filename='js/modules/cart-summary.js') }}" type="module"></script>
{% endblock %}

==================================================
FICHIER : templates\profil.html
==================================================
{% extends "base.html" %}

{% block title %}Mon Profil - LabFlow{% endblock %}

{% block content %}
<div class="main-container d-flex align-items-center justify-content-center" style="min-height: 80vh;">
    
    <div class="card border-0 shadow-lg" style="width: 100%; max-width: 500px; border-radius: 16px;">
        <div class="card-body p-5">
            
            <!-- En-t√™te du Profil -->
            <div class="text-center mb-4">
                <div class="d-inline-flex align-items-center justify-content-center bg-primary-subtle text-primary rounded-circle mb-3" style="width: 80px; height: 80px;">
                    <i class="bi bi-person-fill display-4"></i>
                </div>
                <h2 class="h4 fw-bold text-dark mb-1">Mon Profil</h2>
                <p class="text-muted small">
                    Connect√© en tant que <strong>{{ session.username or 'Utilisateur' }}</strong>
                </p>
            </div>

            <!-- Formulaire -->
            <form method="POST" action="{{ url_for('auth.profil') }}" id="profileForm">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

                <!-- Ancien Mot de passe -->
                <div class="form-floating mb-3 position-relative">
                    <!-- CORRECTION NAME -->
                    <input type="password" class="form-control" id="ancien_mot_de_passe" name="ancien_mot_de_passe" placeholder="Mot de passe actuel" required>
                    <label for="ancien_mot_de_passe">Mot de passe actuel</label>
                    <button type="button" class="btn btn-link position-absolute top-50 end-0 translate-middle-y text-muted pe-3 text-decoration-none" onclick="togglePassword('ancien_mot_de_passe', this)">
                        <i class="bi bi-eye"></i>
                    </button>
                </div>

                <hr class="my-4 opacity-10">

                <!-- Nouveau Mot de passe -->
                <div class="form-floating mb-2 position-relative">
                    <!-- CORRECTION NAME -->
                    <input type="password" class="form-control" id="nouveau_mot_de_passe" name="nouveau_mot_de_passe" placeholder="Nouveau mot de passe" required minlength="12">
                    <label for="nouveau_mot_de_passe">Nouveau mot de passe</label>
                    <button type="button" class="btn btn-link position-absolute top-50 end-0 translate-middle-y text-muted pe-3 text-decoration-none" onclick="togglePassword('nouveau_mot_de_passe', this)">
                        <i class="bi bi-eye"></i>
                    </button>
                </div>

                <!-- Barre de force -->
                <div class="progress mb-3" style="height: 4px;">
                    <div class="progress-bar bg-danger" id="strengthBar" role="progressbar" style="width: 0%"></div>
                </div>

                <!-- Confirmation -->
                <div class="form-floating mb-4 position-relative">
                    <!-- CORRECTION NAME -->
                    <input type="password" class="form-control" id="confirmation_mot_de_passe" name="confirmation_mot_de_passe" placeholder="Confirmer le nouveau" required>
                    <label for="confirmation_mot_de_passe">Confirmer le nouveau mot de passe</label>
                    <div class="invalid-feedback">Les mots de passe ne correspondent pas.</div>
                </div>

                <!-- Actions -->
                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-primary py-2 fw-bold" id="btnSave">
                        Mettre √† jour le mot de passe
                    </button>
                    <a href="{{ url_for('inventaire.index') }}" class="btn btn-light text-muted">
                        Annuler
                    </a>
                </div>

            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Fonction pour afficher/masquer le mot de passe
    function togglePassword(inputId, btn) {
        const input = document.getElementById(inputId);
        const icon = btn.querySelector('i');
        
        if (input.type === "password") {
            input.type = "text";
            icon.classList.remove('bi-eye');
            icon.classList.add('bi-eye-slash');
        } else {
            input.type = "password";
            icon.classList.remove('bi-eye-slash');
            icon.classList.add('bi-eye');
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        const newPass = document.getElementById('nouveau_mot_de_passe');
        const confirmPass = document.getElementById('confirmation_mot_de_passe');
        const strengthBar = document.getElementById('strengthBar');
        const form = document.getElementById('profileForm');
        const btnSave = document.getElementById('btnSave');

        // Calcul simple de la force
        newPass.addEventListener('input', function() {
            const val = newPass.value;
            let strength = 0;
            if (val.length >= 8) strength += 25;
            if (val.length >= 12) strength += 25;
            if (/[A-Z]/.test(val)) strength += 25;
            if (/[0-9]/.test(val)) strength += 25;

            strengthBar.style.width = strength + '%';
            
            if (strength < 50) strengthBar.className = 'progress-bar bg-danger';
            else if (strength < 75) strengthBar.className = 'progress-bar bg-warning';
            else strengthBar.className = 'progress-bar bg-success';
        });

        // Validation correspondance
        form.addEventListener('submit', function(e) {
            if (newPass.value !== confirmPass.value) {
                e.preventDefault();
                confirmPass.classList.add('is-invalid');
            } else {
                confirmPass.classList.remove('is-invalid');
                // UI Loading
                btnSave.disabled = true;
                btnSave.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Mise √† jour...';
            }
        });

        confirmPass.addEventListener('input', function() {
            if (confirmPass.value === newPass.value) {
                confirmPass.classList.remove('is-invalid');
                confirmPass.classList.add('is-valid');
            } else {
                confirmPass.classList.remove('is-valid');
                if(confirmPass.value.length > 0) confirmPass.classList.add('is-invalid');
            }
        });
    });
</script>

<!-- Petit style sp√©cifique pour nettoyer les inputs -->
<style>
    .form-floating > .form-control {
        border: 1px solid #dee2e6;
        background-color: #f8f9fa;
    }
    .form-floating > .form-control:focus {
        background-color: #fff;
        border-color: #0d6efd;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.1);
    }
</style>
{% endblock %}

==================================================
FICHIER : templates\rapports.html
==================================================
{% extends "base.html" %}

{% block title %}Rapports & Historique - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px" fill="white">
                        <path d="m105-399-65-47 200-320 120 140 160-260 120 180 135-214 65 47-198 314-119-179-152 247-121-141-145 233Zm475 159q42 0 71-29t29-71q0-42-29-71t-71-29q-42 0-71 29t-29 71q0 42 29 71t71 29Z"/>
                    </svg>
            </div>
            <span class="fw-bold">Rapports d'Activit√©</span>
        </h2>
    </div>

    <div class="row g-4">
        
        <!-- COLONNE GAUCHE : CONFIGURATION EXPORT -->
        <div class="col-lg-4">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-header bg-white py-3">
                    <h5 class="mb-0 fw-bold text-dark"><i class="bi bi-sliders me-2"></i>Configuration Export</h5>
                </div>
                <div class="card-body">
                    <form action="{{ url_for('admin.exporter_rapports') }}" method="GET">
                        
                        <!-- 1. P√©riode -->
                        <div class="mb-4">
                            <label class="form-label fw-bold text-muted small text-uppercase">P√©riode</label>
                            <div class="row g-2">
                                <div class="col-6">
                                    <div class="form-floating">
                                        <input type="date" class="form-control" id="date_debut" name="date_debut" required>
                                        <label for="date_debut">D√©but</label>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-floating">
                                        <input type="date" class="form-control" id="date_fin" name="date_fin" required>
                                        <label for="date_fin">Fin</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 2. Filtres d'Export -->
                        <div class="mb-4">
                            <label class="form-label fw-bold text-muted small text-uppercase mb-2">Contenu du rapport</label>
                            
                            <!-- Mode de regroupement -->
                            <div class="btn-group w-100 mb-3" role="group">
                                <input type="radio" class="btn-check" name="group_by" id="group_date" value="date" checked onchange="toggleActionFilters(false)">
                                <label class="btn btn-outline-secondary" for="group_date">
                                    <i class="bi bi-calendar-event me-2"></i>Chronologique
                                </label>

                                <input type="radio" class="btn-check" name="group_by" id="group_action" value="action" onchange="toggleActionFilters(true)">
                                <label class="btn btn-outline-secondary" for="group_action">
                                    <i class="bi bi-filter-circle me-2"></i>Par Action
                                </label>
                            </div>

                            <!-- Filtres sp√©cifiques (Cach√©s par d√©faut) -->
                            <div id="action-filters" class="p-3 bg-light border rounded" style="display: none;">
                                <label class="form-label fw-bold small text-dark mb-2">Inclure uniquement :</label>
                                <div class="d-flex flex-wrap gap-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="actions" value="Cr√©ation" id="act_creation" checked>
                                        <label class="form-check-label small" for="act_creation">Cr√©ations</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="actions" value="Modification" id="act_modif" checked>
                                        <label class="form-check-label small" for="act_modif">Modifications</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="actions" value="Suppression" id="act_suppr" checked>
                                        <label class="form-check-label small" for="act_suppr">Suppressions</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <hr class="my-4 opacity-10">

                        <!-- 3. Boutons d'action -->
                        <div class="d-grid gap-2">
                            <button type="submit" name="format" value="excel" class="btn btn-success fw-bold py-2">
                                <i class="bi bi-file-earmark-excel me-2"></i>T√©l√©charger Excel
                            </button>
                            <button type="submit" name="format" value="pdf" class="btn btn-danger fw-bold py-2">
                                <i class="bi bi-file-earmark-pdf me-2"></i>T√©l√©charger PDF
                            </button>
                        </div>

                    </form>
                </div>
            </div>
        </div>

        <!-- COLONNE DROITE : LISTE CONSULTABLE -->
        <div class="col-lg-8">
            
            <!-- Barre de recherche & Filtres Rapides (Pour l'affichage √©cran) -->
            <div class="card border-0 shadow-sm mb-3">
                <div class="card-body p-2">
                    <form method="GET" class="d-flex flex-wrap align-items-center justify-content-between gap-2">
                        
                        <!-- Onglets de filtres visuels -->
                        <div class="btn-group" role="group">
                            <a href="{{ url_for('admin.rapports', action='all', q=search_query) }}" 
                               class="btn btn-sm {{ 'btn-primary' if filtre_actif == 'all' else 'btn-outline-secondary' }}">Tout</a>
                            <a href="{{ url_for('admin.rapports', action='creation', q=search_query) }}" 
                               class="btn btn-sm {{ 'btn-success' if filtre_actif == 'creation' else 'btn-outline-secondary' }}">Ajouts</a>
                            <a href="{{ url_for('admin.rapports', action='modification', q=search_query) }}" 
                               class="btn btn-sm {{ 'btn-warning' if filtre_actif == 'modification' else 'btn-outline-secondary' }}">Modifs</a>
                            <a href="{{ url_for('admin.rapports', action='suppression', q=search_query) }}" 
                               class="btn btn-sm {{ 'btn-danger' if filtre_actif == 'suppression' else 'btn-outline-secondary' }}">Suppr.</a>
                        </div>

                        <!-- Recherche -->
                        <div class="input-group input-group-sm" style="max-width: 250px;">
                            <span class="input-group-text bg-light"><i class="bi bi-search"></i></span>
                            <input type="text" name="q" class="form-control bg-light" 
                                   placeholder="Rechercher..." value="{{ search_query }}">
                            <input type="hidden" name="action" value="{{ filtre_actif }}">
                        </div>
                    </form>
                </div>
            </div>

            <!-- Tableau des Logs -->
            <div class="card border-0 shadow-sm">
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle mb-0">
                            <thead class="bg-light">
                                <tr>
                                    <th class="ps-4">Date</th>
                                    <th>Utilisateur</th>
                                    <th>Action</th>
                                    <th>Objet</th>
                                    <th>D√©tails</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for log in logs %}
                                <tr>
                                    <td class="ps-4 text-muted small" style="white-space: nowrap;">
                                        <div class="fw-bold">{{ log.date.strftime('%d/%m/%Y') }}</div>
                                        <div>{{ log.date.strftime('%H:%M') }}</div>
                                    </td>
                                    <td>
                                        <div class="d-flex align-items-center gap-2">
                                            <div class="rounded-circle bg-light border d-flex align-items-center justify-content-center text-secondary" style="width: 24px; height: 24px; font-size: 0.7rem;">
                                                {{ log.user[0]|upper }}
                                            </div>
                                            <span class="small fw-medium">{{ log.user }}</span>
                                        </div>
                                    </td>
                                    <td>
                                        {% if log.action == 'Cr√©ation' %}
                                            <span class="badge bg-success-subtle text-success border border-success-subtle">Ajout</span>
                                        {% elif log.action == 'Suppression' %}
                                            <span class="badge bg-danger-subtle text-danger border border-danger-subtle">Suppr.</span>
                                        {% elif 'D√©plac√©' in (log.details or '') %}
                                            <span class="badge bg-info-subtle text-info-emphasis border border-info-subtle">D√©plac.</span>
                                        {% else %}
                                            <span class="badge bg-warning-subtle text-warning-emphasis border border-warning-subtle">Modif.</span>
                                        {% endif %}
                                    </td>
                                    <td class="fw-bold text-dark small">{{ log.objet }}</td>
                                    <td class="text-muted small text-truncate" style="max-width: 200px;" title="{{ log.details }}">{{ log.details }}</td>
                                </tr>
                                {% else %}
                                <tr>
                                    <td colspan="5" class="text-center py-5 text-muted">
                                        <i class="bi bi-search display-6 mb-3 d-block opacity-25"></i>
                                        Aucun historique trouv√©.
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Pagination -->
                {% if pagination.pages > 1 %}
                <div class="card-footer bg-white border-top-0 py-3">
                    <nav aria-label="Navigation">
                        <ul class="pagination justify-content-center mb-0 pagination-sm">
                            <li class="page-item {{ 'disabled' if not pagination.has_prev }}">
                                <a class="page-link" href="{{ url_for('admin.rapports', page=pagination.prev_num, action=filtre_actif, q=search_query) }}">
                                    <i class="bi bi-chevron-left"></i>
                                </a>
                            </li>
                            {% for page_num in pagination.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=1) %}
                                {% if page_num %}
                                    <li class="page-item {{ 'active' if page_num == pagination.page }}">
                                        <a class="page-link" href="{{ url_for('admin.rapports', page=page_num, action=filtre_actif, q=search_query) }}">
                                            {{ page_num }}
                                        </a>
                                    </li>
                                {% else %}
                                    <li class="page-item disabled"><span class="page-link">...</span></li>
                                {% endif %}
                            {% endfor %}
                            <li class="page-item {{ 'disabled' if not pagination.has_next }}">
                                <a class="page-link" href="{{ url_for('admin.rapports', page=pagination.next_num, action=filtre_actif, q=search_query) }}">
                                    <i class="bi bi-chevron-right"></i>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<script>
    // Script pour pr√©-remplir les dates et g√©rer l'affichage des filtres
    document.addEventListener('DOMContentLoaded', function() {
        const dateDebut = document.getElementById('date_debut');
        const dateFin = document.getElementById('date_fin');
        
        // Pr√©-remplissage dates (Mois en cours) si vide
        if (!dateDebut.value) {
            const now = new Date();
            const firstDay = new Date(now.getFullYear(), now.getMonth(), 1);
            const lastDay = new Date(now.getFullYear(), now.getMonth() + 1, 0);
            
            const formatDate = (date) => {
                const d = new Date(date);
                let month = '' + (d.getMonth() + 1);
                let day = '' + d.getDate();
                const year = d.getFullYear();
                if (month.length < 2) month = '0' + month;
                if (day.length < 2) day = '0' + day;
                return [year, month, day].join('-');
            };

            dateDebut.value = formatDate(firstDay);
            dateFin.value = formatDate(lastDay);
        }
    });

    function toggleActionFilters(show) {
        const filterBox = document.getElementById('action-filters');
        if (show) {
            filterBox.style.display = 'block';
            filterBox.style.opacity = 0;
            setTimeout(() => {
                filterBox.style.transition = 'opacity 0.3s ease';
                filterBox.style.opacity = 1;
            }, 10);
        } else {
            filterBox.style.display = 'none';
        }
    };
</script>
{% endblock %}

==================================================
FICHIER : templates\register.html
==================================================
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rejoindre une √©quipe - LabFlow</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap-icons.css') }}">
    
    <!-- CSS Modules -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/modules/auth.css') }}">

    <style>
        /* OVERRIDE LOCAL POUR √âLARGIR LA CARTE */
        .register-card {
            max-width: 750px !important; /* Plus large */
        }
        
        /* Ajustement responsive : sur mobile, on repasse en colonne */
        @media (max-width: 768px) {
            .register-card { max-width: 100% !important; margin: 10px; }
        }
    </style>
</head>
<body class="login-page-body">

    <div class="register-card">
        <!-- En-t√™te (Plus compact) -->
        <div class="register-header mb-3">
            <div class="register-logo mb-2">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" style="width: 40px; height: 40px;">
                    <path d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-160v-112q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v112H160Z"/>
                </svg>
            </div>
            <h2 class="fs-4 fw-bold">Rejoindre une √©quipe</h2>
        </div>

        <!-- Messages Flash -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="mb-3">
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category == 'error' else category }} shadow-sm py-2 small">
                        <i class="bi bi-info-circle-fill me-2"></i>{{ message }}
                    </div>
                {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <!-- INFO PSEUDO UNIQUE (Compact) -->
        <div class="alert alert-light border small text-muted mb-4 py-2 d-flex align-items-center justify-content-center">
            <i class="bi bi-lightbulb-fill me-2 text-warning"></i>
            <div>
                <strong>Conseil :</strong> Votre identifiant doit √™tre unique. Pr√©f√©rez <em>Prenom_Nom</em>.
            </div>
        </div>

        <form method="post" id="registerForm" novalidate>
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

            <!-- LIGNE 1 : Code Invitation (Pleine largeur) -->
            <div class="form-floating mb-3">
                <input type="text" class="form-control text-uppercase fw-bold" id="code_invitation" name="code_invitation" placeholder="CODE" required maxlength="20" style="letter-spacing: 1px; background-color: #f8f9fa;">
                <label for="code_invitation">Code d'invitation *</label>
            </div>

            <!-- LIGNE 2 : Pseudo & Email (C√¥te √† c√¥te) -->
            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <div class="form-floating">
                        <input type="text" class="form-control" id="username" name="username" placeholder="Identifiant" required minlength="3" maxlength="50" pattern="^[a-zA-Z0-9_-]+$">
                        <label for="username">Nom d'utilisateur</label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-floating">
                        <input type="email" class="form-control" id="email" name="email" placeholder="name@example.com" required>
                        <label for="email">Adresse e-mail</label>
                    </div>
                </div>
            </div>

            <!-- LIGNE 3 : Mots de passe (C√¥te √† c√¥te) -->
            <div class="row g-3 mb-2">
                <div class="col-md-6">
                    <div class="position-relative">
                        <div class="form-floating">
                            <input type="password" class="form-control" id="password" name="password" placeholder="Mot de passe" required minlength="12">
                            <label for="password">Mot de passe</label>
                        </div>
                        <button type="button" class="btn btn-link position-absolute top-50 end-0 translate-middle-y text-muted pe-3" id="togglePassword" style="z-index: 5;">
                            <i class="bi bi-eye" id="togglePasswordIcon"></i>
                        </button>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-floating">
                        <input type="password" class="form-control" id="password_confirm" name="password_confirm" placeholder="Confirmation" required>
                        <label for="password_confirm">Confirmer</label>
                    </div>
                </div>
            </div>

            <!-- Barre de force -->
            <div class="strength-bar mb-2"><div class="strength-bar-fill" id="strengthBar"></div></div>

            <!-- Exigences (Plus compactes : 3 colonnes) -->
            <div class="password-requirements mb-4">
                <div class="row g-1 text-center">
                    <div class="col-4 requirement-item" id="req-length"><i class="bi bi-circle"></i> 12+ car.</div>
                    <div class="col-4 requirement-item" id="req-uppercase"><i class="bi bi-circle"></i> Majuscule</div>
                    <div class="col-4 requirement-item" id="req-lowercase"><i class="bi bi-circle"></i> Minuscule</div>
                    <div class="col-4 requirement-item" id="req-number"><i class="bi bi-circle"></i> Chiffre</div>
                    <div class="col-4 requirement-item" id="req-special"><i class="bi bi-circle"></i> Sp√©cial</div>
                    <div class="col-4 requirement-item" id="req-match"><i class="bi bi-circle"></i> Identiques</div>
                </div>
            </div>

            <!-- Bouton -->
            <button type="submit" class="btn btn-register w-100 mb-3" id="submitBtn">Rejoindre l'√©quipe</button>

            <!-- Footer -->
            <div class="text-center small text-muted">
                D√©j√† un compte ? <a href="{{ url_for('auth.login') }}" class="text-decoration-none fw-bold" style="color: var(--couleur-principale);">Se connecter</a>
            </div>
        </form>
    </div>

    <!-- Bootstrap JS -->
    <script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>

    <!-- Script JS (Inchang√©) -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('registerForm');
            const password = document.getElementById('password');
            const passwordConfirm = document.getElementById('password_confirm');
            const togglePassword = document.getElementById('togglePassword');
            const strengthBar = document.getElementById('strengthBar');
            const codeInput = document.getElementById('code_invitation');

            codeInput.addEventListener('input', function() { this.value = this.value.toUpperCase(); });

            togglePassword.addEventListener('click', function() {
                const type = password.type === 'password' ? 'text' : 'password';
                password.type = type;
                passwordConfirm.type = type;
                document.getElementById('togglePasswordIcon').classList.toggle('bi-eye');
                document.getElementById('togglePasswordIcon').classList.toggle('bi-eye-slash');
            });

            function checkPassword() {
                const val = password.value;
                const valConf = passwordConfirm.value;
                let strength = 0;
                const checks = {
                    'req-length': val.length >= 12,
                    'req-uppercase': /[A-Z]/.test(val),
                    'req-lowercase': /[a-z]/.test(val),
                    'req-number': /[0-9]/.test(val),
                    'req-special': /[^A-Za-z0-9]/.test(val),
                    'req-match': val.length > 0 && val === valConf
                };
                for (const [id, met] of Object.entries(checks)) {
                    const el = document.getElementById(id);
                    const icon = el.querySelector('i');
                    if (met) {
                        el.classList.add('met');
                        icon.className = 'bi bi-check-circle-fill';
                        if(id !== 'req-match') strength += 20;
                    } else {
                        el.classList.remove('met');
                        icon.className = 'bi bi-circle';
                    }
                }
                strengthBar.style.width = strength + '%';
                if (strength <= 40) strengthBar.style.backgroundColor = '#ef4444';
                else if (strength <= 80) strengthBar.style.backgroundColor = '#f59e0b';
                else strengthBar.style.backgroundColor = '#10b981';
            }

            password.addEventListener('input', checkPassword);
            passwordConfirm.addEventListener('input', checkPassword);

            form.addEventListener('submit', function(e) {
                if (!form.checkValidity() || password.value !== passwordConfirm.value) {
                    e.preventDefault();
                    e.stopPropagation();
                    form.classList.add('was-validated');
                } else {
                    const btn = document.getElementById('submitBtn');
                    btn.disabled = true;
                    btn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Inscription...';
                }
            });
        });
    </script>
</body>
</html>

==================================================
FICHIER : templates\setup.html
==================================================
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cr√©er un √âtablissement - LabFlow</title>
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    <style>
        /* --- STYLE SP√âCIFIQUE SETUP --- */
        body.login-page-body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .setup-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 750px; /* √âLARGI POUR LE LAYOUT 2 COLONNES */
            padding: 2rem;
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        @media (max-width: 768px) {
            .setup-card { max-width: 100%; padding: 1.5rem; }
        }

        .setup-header { text-align: center; margin-bottom: 1.5rem; }

        .setup-icon {
            width: 50px; height: 50px; /* Un peu plus petit */
            background: linear-gradient(135deg, #198754 0%, #20c997 100%);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            margin: 0 auto 0.5rem;
            color: white; font-size: 1.2rem;
            box-shadow: 0 4px 10px rgba(25, 135, 84, 0.3);
        }

        .form-label { font-weight: 600; font-size: 0.8rem; color: #495057; margin-bottom: 0.3rem; text-transform: uppercase; letter-spacing: 0.5px; }
        .input-group-text { background-color: #f1f3f5; border: 1px solid #ced4da; border-right: none; color: #6c757d; }
        .form-control { background-color: #f1f3f5; border: 1px solid #ced4da; border-left: none; padding: 0.5rem 1rem; font-size: 0.95rem; color: #212529; font-weight: 500; }
        .form-control:focus { background-color: #ffffff; border-color: #198754; box-shadow: 0 0 0 4px rgba(25, 135, 84, 0.15); }
        .input-group:focus-within .input-group-text { background-color: #ffffff; border-color: #198754; }

        .strength-bar { height: 4px; background: #e9ecef; border-radius: 2px; margin-top: 6px; overflow: hidden; }
        .strength-bar-fill { height: 100%; width: 0; transition: width 0.3s ease, background-color 0.3s ease; }
        
        .password-requirements { font-size: 0.7rem; background: #f8f9fa; padding: 8px; border-radius: 8px; margin-top: 8px; border: 1px solid #e9ecef; }
        .requirement-item { margin-bottom: 1px; color: #adb5bd; transition: color 0.2s; }
        .requirement-item.met { color: #198754; font-weight: 700; }
        .requirement-item i { font-size: 0.8rem; margin-right: 4px; }

        .btn-submit { width: 100%; padding: 10px; font-weight: 700; font-size: 1rem; border-radius: 8px; background: #198754; border: none; color: white; margin-top: 0.5rem; transition: all 0.2s; }
        .btn-submit:hover { background: #157347; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(21, 115, 71, 0.3); }
    </style>
</head>

<body class="login-page-body">

    <div class="setup-card">
        <div class="setup-header">
            <div class="setup-icon"><i class="bi bi-building-add"></i></div>
            <h2 class="fs-4 fw-bold text-dark mb-0">Nouvel √âtablissement</h2>
            <p class="text-muted small mb-0">Cr√©ez votre espace LabFlow</p>
        </div>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="mb-3">
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category == 'error' else category }} shadow-sm border-0 py-2 small mb-2">
                        <i class="bi bi-info-circle-fill me-2"></i>{{ message }}
                    </div>
                {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <!-- INFO PSEUDO UNIQUE (Compact) -->
        <div class="alert alert-light border small text-muted mb-3 py-2 d-flex align-items-center justify-content-center">
            <i class="bi bi-lightbulb-fill me-2 text-success"></i>
            <div>
                <strong>Conseil :</strong> Identifiant unique requis. Pr√©f√©rez <em>Admin_Lycee</em>.
            </div>
        </div>

        <form action="{{ url_for('auth.setup') }}" method="post" id="setupForm" novalidate>
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

            <!-- LIGNE 1 : Nom √âtablissement (Pleine largeur) -->
            <div class="mb-3">
                <label for="nom_etablissement" class="form-label text-success">Nom de l'√©tablissement</label>
                <div class="input-group">
                    <span class="input-group-text"><i class="bi bi-building"></i></span>
                    <input type="text" class="form-control" id="nom_etablissement" name="nom_etablissement" placeholder="Ex: Lyc√©e Victor Hugo" required autocomplete="organization" autofocus>
                </div>
            </div>

            <!-- LIGNE 2 : Admin & Email (C√¥te √† c√¥te) -->
            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <label for="username" class="form-label">Nom d'utilisateur Admin</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-person-badge"></i></span>
                        <input type="text" class="form-control" id="username" name="username" placeholder="Ex: Admin_VH" required autocomplete="username">
                    </div>
                </div>
                <div class="col-md-6">
                    <label for="email" class="form-label">Email Administrateur</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-envelope"></i></span>
                        <input type="email" class="form-control" id="email" name="email" placeholder="admin@ecole.fr" required autocomplete="email">
                    </div>
                </div>
            </div>

            <!-- LIGNE 3 : Mots de passe (C√¥te √† c√¥te) -->
            <div class="row g-3 mb-2">
                <div class="col-md-6">
                    <label for="password" class="form-label">Mot de passe</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-lock"></i></span>
                        <input type="password" class="form-control" id="password" name="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required autocomplete="new-password">
                        <button class="btn btn-outline-secondary border-start-0" type="button" id="togglePassword" style="border-color: #ced4da;">
                            <i class="bi bi-eye" id="togglePasswordIcon"></i>
                        </button>
                    </div>
                    <!-- Barre de force sous le champ -->
                    <div class="strength-bar"><div class="strength-bar-fill" id="strengthBar"></div></div>
                </div>
                <div class="col-md-6">
                    <label for="password_confirm" class="form-label">Confirmer</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-check2-circle"></i></span>
                        <input type="password" class="form-control" id="password_confirm" name="password_confirm" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required autocomplete="new-password">
                    </div>
                    <div class="invalid-feedback d-block small mt-1" id="matchError" style="display: none !important;">Ne correspond pas</div>
                </div>
            </div>

            <!-- Exigences (3 colonnes pour gagner de la place) -->
            <div class="password-requirements mb-3">
                <div class="row g-1 text-center">
                    <div class="col-4 requirement-item" id="req-length"><i class="bi bi-circle"></i> 12+ car.</div>
                    <div class="col-4 requirement-item" id="req-uppercase"><i class="bi bi-circle"></i> Majuscule</div>
                    <div class="col-4 requirement-item" id="req-lowercase"><i class="bi bi-circle"></i> Minuscule</div>
                    <div class="col-4 requirement-item" id="req-number"><i class="bi bi-circle"></i> Chiffre</div>
                    <div class="col-4 requirement-item" id="req-special"><i class="bi bi-circle"></i> Sp√©cial</div>
                    <div class="col-4 requirement-item" id="req-match"><i class="bi bi-circle"></i> Identiques</div>
                </div>
            </div>

            <button type="submit" class="btn-submit">Cr√©er et D√©marrer</button>

            <div class="text-center mt-3">
                <a href="{{ url_for('auth.login') }}" class="text-decoration-none small text-muted">
                    <i class="bi bi-arrow-left me-1"></i>Annuler
                </a>
            </div>
        </form>
    </div>

    <!-- Script JS (Inchang√©) -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('setupForm');
            const password = document.getElementById('password');
            const passwordConfirm = document.getElementById('password_confirm');
            const togglePassword = document.getElementById('togglePassword');
            const togglePasswordIcon = document.getElementById('togglePasswordIcon');
            const strengthBar = document.getElementById('strengthBar');
            const matchError = document.getElementById('matchError');

            togglePassword.addEventListener('click', function() {
                const type = password.type === 'password' ? 'text' : 'password';
                password.type = type;
                passwordConfirm.type = type;
                togglePasswordIcon.classList.toggle('bi-eye');
                togglePasswordIcon.classList.toggle('bi-eye-slash');
            });

            function checkMatch() {
                const valPass = password.value;
                const valConf = passwordConfirm.value;
                const isMatch = valPass.length > 0 && valConf.length > 0 && valPass === valConf;
                updateRequirement('req-match', isMatch);
                if (valConf.length > 0 && valPass !== valConf) {
                    passwordConfirm.classList.add('is-invalid');
                    matchError.style.display = 'block';
                } else {
                    passwordConfirm.classList.remove('is-invalid');
                    matchError.style.display = 'none';
                }
                return isMatch;
            }

            password.addEventListener('input', function() {
                const value = this.value;
                let strength = 0;
                const hasLength = value.length >= 12;
                const hasUpperCase = /[A-Z]/.test(value);
                const hasLowerCase = /[a-z]/.test(value);
                const hasNumber = /[0-9]/.test(value);
                const hasSpecial = /[^A-Za-z0-9]/.test(value);

                updateRequirement('req-length', hasLength);
                updateRequirement('req-uppercase', hasUpperCase);
                updateRequirement('req-lowercase', hasLowerCase);
                updateRequirement('req-number', hasNumber);
                updateRequirement('req-special', hasSpecial);

                if (hasLength) strength += 20;
                if (hasUpperCase) strength += 20;
                if (hasLowerCase) strength += 20;
                if (hasNumber) strength += 20;
                if (hasSpecial) strength += 20;

                strengthBar.style.width = strength + '%';
                if (strength <= 40) strengthBar.style.backgroundColor = '#dc3545'; 
                else if (strength <= 80) strengthBar.style.backgroundColor = '#ffc107'; 
                else strengthBar.style.backgroundColor = '#198754'; 

                checkMatch();
            });

            passwordConfirm.addEventListener('input', checkMatch);

            function updateRequirement(id, isMet) {
                const element = document.getElementById(id);
                const icon = element.querySelector('i');
                if (isMet) {
                    element.classList.add('met');
                    icon.className = 'bi bi-check-circle-fill';
                } else {
                    element.classList.remove('met');
                    icon.className = 'bi bi-circle';
                }
            }

            form.addEventListener('submit', function(event) {
                if (!form.checkValidity() || password.value !== passwordConfirm.value) {
                    event.preventDefault();
                    event.stopPropagation();
                    if (password.value !== passwordConfirm.value) {
                        passwordConfirm.classList.add('is-invalid');
                        matchError.style.display = 'block';
                    }
                }
                form.classList.add('was-validated');
            });
        });
    </script>
</body>
</html>

==================================================
FICHIER : templates\sub_header.html
==================================================
<nav class="sub-nav">
    <!-- Inventaire Complet -->
    <a href="{{ url_for('inventaire.inventaire') }}" 
       class="sub-nav-button {% if request.endpoint and request.endpoint == 'inventaire.inventaire' %}active{% endif %}">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="sub-nav-icon bi bi-credit-card-2-front-fill" viewBox="0 0 16 16">
		  <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2.5 1a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm0 3a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm3 0a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm3 0a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm3 0a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1z"/>
		</svg>
        <span>Inventaire Complet</span>
    </a>

    <!-- G√©rer les Armoires -->
    <a href="{{ url_for('main.gestion_armoires') }}" 
       class="sub-nav-button {% if request.endpoint and request.endpoint == 'main.gestion_armoires' %}active{% endif %}">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="sub-nav-icon bi bi-box2-fill" viewBox="0 0 16 16">
            <path d="M3.75 0a1 1 0 0 0-.8.4L.1 4.2a.5.5 0 0 0-.1.3V15a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V4.5a.5.5 0 0 0-.1-.3L13.05.4a1 1 0 0 0-.8-.4zM15 4.667V5H1v-.333L1.5 4h6V1h1v3h6z"/>
        </svg>
        <span>G√©rer les Armoires</span>
    </a>

    <!-- G√©rer les Cat√©gories -->
    <a href="{{ url_for('main.gestion_categories') }}" 
       class="sub-nav-button {% if request.endpoint and request.endpoint == 'main.gestion_categories' %}active{% endif %}">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="sub-nav-icon bi bi-inboxes-fill" viewBox="0 0 16 16">
            <path d="M4.98 1a.5.5 0 0 0-.39.188L1.54 5H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0A.5.5 0 0 1 10 5h4.46l-3.05-3.812A.5.5 0 0 0 11.02 1zM3.81.563A1.5 1.5 0 0 1 4.98 0h6.04a1.5 1.5 0 0 1 1.17.563l3.7 4.625a.5.5 0 0 1 .106.374l-.39 3.124A1.5 1.5 0 0 1 14.117 10H1.883A1.5 1.5 0 0 1 .394 8.686l-.39-3.124a.5.5 0 0 1 .106-.374zM.125 11.17A.5.5 0 0 1 .5 11H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0 .5.5 0 0 1 .5-.5h5.5a.5.5 0 0 1 .496.562l-.39 3.124A1.5 1.5 0 0 1 14.117 16H1.883a1.5 1.5 0 0 1-1.489-1.314l-.39-3.124a.5.5 0 0 1 .121-.393z"/>
        </svg>
        <span>G√©rer les Cat√©gories</span>
    </a>

    <!-- Calendrier de r√©servation -->
    {% if session.user_id %}
    <a href="{{ url_for('main.calendrier') }}" 
       class="sub-nav-button {% if request.endpoint and (request.endpoint.startswith('main.calendrier') or request.endpoint.startswith('main.vue_jour')) %}active{% endif %}">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="sub-nav-icon bi bi-calendar2-week-fill" viewBox="0 0 16 16">
            <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5m9.954 3H2.545c-.3 0-.545.224-.545.5v1c0 .276.244.5.545.5h10.91c.3 0 .545-.224.545-.5v-1c0-.276-.244-.5-.546-.5M8.5 7a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM3 10.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5m3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"/>
        </svg>
        <span>Calendrier de r√©servation</span>
    </a>
    {% endif %}
</nav>

==================================================
FICHIER : templates\vue_jour.html
==================================================
{% extends "base.html" %}
{% block title %}R√©servations pour le {{ date_concernee | strftime_fr('%A %d %B %Y') }}{% endblock %}

{% block content %}
<!-- AJOUT CRUCIAL : data-date pour le JS -->
<div class="main-container" 
     data-date="{{ date_concernee.strftime('%Y-%m-%d') }}"
     data-is-admin="{{ 'true' if session.user_role == 'admin' else 'false' }}" 
     data-user-id="{{ session.user_id }}">
    
    <!-- En-t√™te -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <!-- Ic√¥ne Calendrier (Orange/Jaune) -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #fd7e14 0%, #fcc419 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-calendar2-week-fill" viewBox="0 0 16 16">
                    <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5m9.954 3H2.545c-.3 0-.545.224-.545.5v1c0 .276.244.5.545.5h10.91c.3 0 .545-.224.545-.5v-1c0-.276-.244-.5-.546-.5M8.5 7a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM3 10.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5m3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"/>
                </svg>
            </div>
            <!-- Date avec majuscule automatique (text-capitalize) -->
            <span class="fw-bold text-capitalize">{{ date_concernee|strftime_fr('%A %d %B %Y') }}</span>
        </h2>
        
        <!-- Bouton Nouvelle R√©servation -->
        <div>
			<button id="new-reservation-btn" 
					class="btn btn-primary"
				<i class="bi bi-plus-lg me-2"></i> Nouvelle R√©servation
			</button>
		</div>
    </div>
    
    <!-- Grille Calendrier Style Google -->
    <div class="card shadow-sm border-0" style="background: white; border-radius: 8px;">
        <div class="daily-schedule-wrapper">
            {% for hour in range(8, 21) %}
                <div class="schedule-row" data-hour="{{ hour }}">
                    <!-- Colonne Heure -->
                    <div class="time-col">
                        <span class="time-text">{{ "%02d:00"|format(hour) }}</span>
                    </div>
                    
                    <!-- Colonne √âv√©nements -->
                    <div class="events-col">
                        {% set events = reservations_par_heure.get(hour, {}) %}
                        
                        <!-- √âv√©nements (Suite) -->
                        {% if events['continues'] %}
                            {% for resa in events['continues'] %}
                            <div class="event-item continuation" data-groupe-id="{{ resa.groupe_id }}">
                                <div class="event-content">
                                    <small>(Suite)</small> {{ resa.nom_utilisateur }}
                                </div>
                            </div>
                            {% endfor %}
                        {% endif %}
                        
                        <!-- √âv√©nements (D√©but) -->
                        {% if events['starts'] %}
                            {% for resa in events['starts'] %}
                            <div class="event-item start" data-groupe-id="{{ resa.groupe_id }}">
                                <div class="event-content">
                                    <strong>{{ resa.debut_reservation|strftime('%H:%M') }} - {{ resa.fin_reservation|strftime('%H:%M') }}</strong>
                                    <span>{{ resa.nom_utilisateur }}</span>
                                </div>
                            </div>
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Tooltip plac√© ici pour √©viter les probl√®mes de z-index -->
<div id="reservation-tooltip" class="calendar-tooltip"></div>

{% include '_modals.html' %} 
{% include '_modale_danger.html' %}
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/modules/calendar-daily.js') }}" type="module"></script>
{% endblock %}

==================================================
FICHIER : templates\_add_object_modal.html
==================================================
<div id="add-object-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h3 class="modal-title-with-icon">
                <svg xmlns="http://www.w3.org/2000/svg" class="modal-icon" viewBox="0 -960 960 960"><path d="M440-280h80v-120h120v-80H520v-120h-80v120H320v80h120v120ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Z"/></svg>
                Ajouter un Nouvel Objet
            </h3>
            <button class="close-btn">√ó</button>
        </div>
        <form action="{{ url_for('inventaire.ajouter_objet') }}" method="post" enctype="multipart/form-data" class="modal-form">
		<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <div class="form-grid">
                <div class="form-column">
                    <label for="nom">Nom de l'objet</label>
                    <input type="text" id="nom" name="nom" required>

                    <label for="armoire_id">Armoire de rangement</label>
                    <select id="armoire_id" name="armoire_id" required>
                        {% for armoire in armoires %}
                            <option value="{{ armoire.id }}">{{ armoire.nom }}</option>
                        {% endfor %}
                    </select>

                    <label for="categorie_id">Cat√©gorie</label>
                    <select id="categorie_id" name="categorie_id" required>
                        {% for categorie in categories %}
                            <option value="{{ categorie.id }}">{{ categorie.nom }}</option>
                        {% endfor %}
                    </select>
                    
                    <label for="fds_id">Fiche de Donn√©es de S√©curit√© (Optionnel)</label>
                    <select id="fds_id" name="fds_id">
                        <option value="">Aucune</option>
                        {% for fds in fds_list %}
                            <option value="{{ fds.id }}">{{ fds.nom_original }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-column">
                    <label for="quantite">Quantit√© initiale</label>
                    <input type="number" id="quantite" name="quantite" value="1" min="0" required>

                    <label for="seuil">Seuil d'alerte stock bas</label>
                    <input type="number" id="seuil" name="seuil" value="0" min="0" required>
                    
                    <label for="date_peremption">Date de p√©remption (Optionnel)</label>
                    <input type="date" id="date_peremption" name="date_peremption">

                    <label for="image">Image (Optionnel)</label>
                    <input type="file" id="image" name="image" class="custom-file-input">
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-action">Annuler</button>
                <button type="submit" class="btn-action">Ajouter l'objet</button>
            </div>
        </form>
    </div>
</div>

==================================================
FICHIER : templates\_breadcrumb.html
==================================================
{% if breadcrumbs %}
<nav class="breadcrumb-container" aria-label="Fil d'Ariane">
    {% for item in breadcrumbs %}
        
        <!-- S√©parateur (sauf avant le premier √©l√©ment) -->
        {% if not loop.first %}
            <span class="breadcrumb-separator">‚Ä∫</span>
        {% endif %}
        
        <!-- √âl√©ment Actif (Dernier ou sans URL) -->
        {% if loop.last or not item.url %}
            <span class="breadcrumb-current">{{ item.text }}</span>
        
        <!-- Lien Cliquable -->
        {% else %}
            <a href="{{ item.url }}" class="breadcrumb-link">
                <!-- Ic√¥ne Maison uniquement pour le premier √©l√©ment (Accueil/Dashboard) -->
                {% if loop.first %}
                <svg class="breadcrumb-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                </svg>
                {% endif %}
                
                {{ item.text }}
            </a>
        {% endif %}
        
    {% endfor %}
</nav>
{% endif %}

==================================================
FICHIER : templates\_inventaire_content.html
==================================================
<table class="objet-table">
    <thead>
		<tr>
			{% if session.user_role == 'admin' and pagination.endpoint != 'inventaire.inventaire' %}<th class="checkbox-column"><input type="checkbox" id="select-all-checkbox" title="Tout s√©lectionner"></th>{% endif %}
			
			{# --- CORRECTION ICI : On utilise directement les variables IDs pass√©es par la vue --- #}
			<th class="sortable {% if sort_by == 'nom' %}th-sort-{{ direction }}{% endif %}">
				<a href="{{ url_for(pagination.endpoint, page=pagination.page, sort_by='nom', direction='desc' if sort_by == 'nom' and direction == 'asc' else 'asc', armoire_id=armoire_id, categorie_id=categorie_id, q=request.args.get('q'), etat=request.args.get('etat')) }}">Nom</a>
			</th>
			<th class="sortable {% if sort_by == 'quantite' %}th-sort-{{ direction }}{% endif %}">
				<a href="{{ url_for(pagination.endpoint, page=pagination.page, sort_by='quantite', direction='desc' if sort_by == 'quantite' and direction == 'asc' else 'asc', armoire_id=armoire_id, categorie_id=categorie_id, q=request.args.get('q'), etat=request.args.get('etat')) }}">Quantit√©</a>
			</th>
			<th class="sortable {% if sort_by == 'seuil' %}th-sort-{{ direction }}{% endif %}">
				<a href="{{ url_for(pagination.endpoint, page=pagination.page, sort_by='seuil', direction='desc' if sort_by == 'seuil' and direction == 'asc' else 'asc', armoire_id=armoire_id, categorie_id=categorie_id, q=request.args.get('q'), etat=request.args.get('etat')) }}">Seuil</a>
			</th>
			<th class="sortable {% if sort_by == 'date_peremption' %}th-sort-{{ direction }}{% endif %}">
				<a href="{{ url_for(pagination.endpoint, page=pagination.page, sort_by='date_peremption', direction='desc' if sort_by == 'date_peremption' and direction == 'asc' else 'asc', armoire_id=armoire_id, categorie_id=categorie_id, q=request.args.get('q'), etat=request.args.get('etat')) }}">P√©remption</a>
			</th>
			<th class="sortable {% if sort_by == 'categorie' %}th-sort-{{ direction }}{% endif %}">
				<a href="{{ url_for(pagination.endpoint, page=pagination.page, sort_by='categorie', direction='desc' if sort_by == 'categorie' and direction == 'asc' else 'asc', armoire_id=armoire_id, categorie_id=categorie_id, q=request.args.get('q'), etat=request.args.get('etat')) }}">Cat√©gorie</a>
			</th>
			<th class="sortable {% if sort_by == 'armoire' %}th-sort-{{ direction }}{% endif %}">
				<a href="{{ url_for(pagination.endpoint, page=pagination.page, sort_by='armoire', direction='desc' if sort_by == 'armoire' and direction == 'asc' else 'asc', armoire_id=armoire_id, categorie_id=categorie_id, q=request.args.get('q'), etat=request.args.get('etat')) }}">Armoire</a>
			</th>

			<th>Image</th>
			<th>√âtat</th>
			{% if session.user_id %}<th>Actions</th>{% endif %}
		</tr>
	</thead>
    <tbody>
        {% for objet in objets %}
        
        {# --- LOGIQUE √âTAT (HIERARCHIE STRICTE) --- #}
        {% set perime, perime_bientot, statut = False, False, 'ok' %}
        
        {# 1. PRIORIT√â ABSOLUE : P√©remption #}
        {% if objet.date_peremption %}
            {% if objet.date_peremption < date_actuelle.date() %}
                {% set perime, statut = True, 'perime' %}
            {% elif (objet.date_peremption - date_actuelle.date()).days <= 30 %}
                {% set perime_bientot, statut = True, 'bientot' %}
            {% endif %}
        {% endif %}
        
        {# 2. SECONDAIRE : Stock (Uniquement si pas d'alerte p√©remption) #}
        {% if statut == 'ok' %}
            {% if objet.quantite_disponible <= objet.seuil %}
                {# Cas ROUGE : Sous le seuil #}
                {% set statut = 'stock_critique' %}
            
            {# Cas ORANGE : Marge adaptative (Seulement si seuil > 2) #}
            {% elif objet.seuil > 2 and objet.quantite_disponible <= (objet.seuil + 2) %}
                {% set statut = 'stock_bas' %}
            {% endif %}
        {% endif %}

        <tr class="{{ 'row-perime' if perime else 'row-perime-bientot' if perime_bientot }}" data-objet-id="{{ objet.id }}">
            {% if session.user_role == 'admin' and pagination.endpoint != 'inventaire.inventaire' %}<td class="checkbox-column"><input type="checkbox" class="objet-checkbox" data-id="{{ objet.id }}"></td>{% endif %}
            
            <td data-field="nom"><a href="{{ url_for('inventaire.voir_objet', objet_id=objet.id) }}">{{ objet.nom }}</a></td>
            <td data-field="quantite">{{ objet.quantite_disponible }}</td>
            <td data-field="seuil">{{ objet.seuil }}</td>
            
            <td data-field="date_peremption" class="{{ 'texte-perime' if perime else 'texte-perime-bientot' if perime_bientot }}">
                {{ objet.date_peremption.strftime('%d/%m/%Y') if objet.date_peremption else '-' }}
            </td>
            
            {# --- MODIFICATION ICI : Acc√®s aux champs plats du DTO --- #}
            <td data-field="categorie">{{ objet.categorie_nom if objet.categorie_nom else '-' }}</td>
            <td data-field="armoire">{{ objet.armoire_nom if objet.armoire_nom else '-' }}</td>
            
            <td class="image-cell">
				<div class="image-preview-wrapper">
					{% if objet.image_url %}
                        {% if objet.image_url.startswith('http') %}
						    <img src="{{ objet.image_url }}" class="image-objet-thumbnail" alt="{{ objet.nom }}" loading="lazy">
						    <img src="{{ objet.image_url }}" class="image-objet-preview" alt="{{ objet.nom }}" loading="lazy">
                        {% else %}
                            <img src="{{ url_for('static', filename=objet.image_url) }}" class="image-objet-thumbnail" alt="{{ objet.nom }}" loading="lazy">
						    <img src="{{ url_for('static', filename=objet.image_url) }}" class="image-objet-preview" alt="{{ objet.nom }}" loading="lazy">
                        {% endif %}
					{% else %}
						<div class="table-image-placeholder">
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor"><path d="m840-234-80-80v-446H314l-80-80h526q33 0 56.5 23.5T840-760v526ZM792-56l-64-64H200q-33 0-56.5-23.5T120-200v-528l-64-64 56-56 736 736-56 56ZM240-280l120-160 90 120 33-44-283-283v447h447l-80-80H240Zm297-257ZM424-424Z"/></svg>
						</div>
					{% endif %}
				</div>
			</td>

            <td data-type="alerte" data-alerte-status="{{ statut }}">
                {% if statut == 'perime' %}
                    <span class="texte-perime" title="Produit p√©rim√©"><i class="bi bi-x-circle-fill"></i></span>
                {% elif statut == 'bientot' %}
                    <span class="texte-perime-bientot" title="Expire bient√¥t"><i class="bi bi-exclamation-circle-fill"></i></span>
                
                {# NOUVEAU : Stock Critique (Rouge) #}
                {% elif statut == 'stock_critique' %}
                    <span class="text-danger" title="Stock critique (Sous le seuil)"><i class="bi bi-exclamation-octagon-fill"></i></span>
                
                {# NOUVEAU : Stock Bas (Orange) #}
                {% elif statut == 'stock_bas' %}
                    <span class="text-warning" title="Stock bas (Proche du seuil)"><i class="bi bi-exclamation-triangle-fill"></i></span>
                
                {% else %}
                    <span class="texte-ok" title="OK"><i class="bi bi-check-circle-fill"></i></span>
                {% endif %}
            </td>

            {% if session.user_id %}
			<td class="actions-cell">
                {# Bouton d'√©dition : Note que les IDs armoire/cat√©gorie ne sont pas dans le DTO liste pour perf #}
                {# Si l'√©dition n√©cessite ces IDs, il faudra soit les ajouter au DTO, soit faire un fetch AJAX au clic #}
				<button class="btn btn-sm btn-outline-primary edit-objet-btn"
						data-objet-id="{{ objet.id }}"
						data-nom="{{ objet.nom }}"
						data-quantite="{{ objet.quantite_physique }}"
						data-seuil="{{ objet.seuil }}"
						
						{# CES DEUX LIGNES DOIVENT √äTRE PR√âSENTES #}
						data-armoire-id="{{ objet.armoire_id }}"
						data-categorie-id="{{ objet.categorie_id }}"
						
						data-date-peremption="{{ objet.date_peremption or '' }}"
						data-image-url="{{ objet.image_url or '' }}"
						data-fds-url="{{ objet.fds_url or '' }}"
						data-bs-toggle="modal" data-bs-target="#addObjectModal">
					<i class="bi bi-pencil-square"></i>
				</button>
				
				{% if session.user_role == 'admin' %}
				<form class="form-in-cell" action="{{ url_for('inventaire.supprimer_objet', id_objet=objet.id) }}" method="post">
					<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
					<button type="button" class="btn btn-sm btn-outline-danger btn-delete-objet" data-objet-nom="{{ objet.nom }}">
						<i class="bi bi-trash"></i>
					</button>
				</form>
				{% endif %}
			</td>
			{% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>
{% include '_pagination.html' %}

==================================================
FICHIER : templates\_modale_danger.html
==================================================
<div class="modal fade" id="dangerModal" tabindex="-1" aria-labelledby="dangerModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="dangerModalLabel">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i>
                    Confirmation Requise
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form id="dangerModalForm" action="" method="post">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <p id="dangerModalText">Le message de confirmation va ici.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-danger" id="confirmDeleteBtn">Confirmer</button>
                </div>
            </form>
        </div>
    </div>
</div>

==================================================
FICHIER : templates\_modale_fournisseur_add.html
==================================================
<!-- Modale Ajout Fournisseur -->
<div class="modal fade" id="addFournisseurModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">
            
            <!-- Header Vert (Style Fournisseur) -->
            <div class="modal-header text-white" style="background: linear-gradient(135deg, #0ba360 0%, #3cba92 100%);">
                <h5 class="modal-title fw-bold">
                    <i class="bi bi-plus-circle-fill me-2"></i>Nouveau Fournisseur
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <form action="{{ url_for('admin.ajouter_fournisseur') }}" method="post" enctype="multipart/form-data">
                <div class="modal-body p-4 bg-light">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    
                    <!-- Nom -->
                    <div class="mb-3">
                        <label class="form-label fw-bold small text-muted">Nom du fournisseur <span class="text-danger">*</span></label>
                        <div class="input-group shadow-sm">
                            <span class="input-group-text bg-white border-end-0"><i class="bi bi-building"></i></span>
                            <input type="text" class="form-control border-start-0 ps-0" name="nom" placeholder="Ex: Jeulin" required>
                        </div>
                    </div>

                    <!-- Site Web -->
                    <div class="mb-3">
                        <label class="form-label fw-bold small text-muted">Site Internet</label>
                        <div class="input-group shadow-sm">
                            <span class="input-group-text bg-white border-end-0"><i class="bi bi-globe"></i></span>
                            <input type="url" class="form-control border-start-0 ps-0" name="site_web" placeholder="https://...">
                        </div>
                    </div>

                    <!-- Logo (Onglets Fichier / URL) -->
                    <div class="mb-3">
                        <label class="form-label fw-bold small text-muted">Logo (Optionnel)</label>
                        
                        <div class="card border-0 shadow-sm">
                            <div class="card-body p-2 bg-white rounded">
                                <!-- Navigation des onglets -->
                                <ul class="nav nav-pills nav-fill small mb-2" id="pills-tab-logo" role="tablist">
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link active py-1" id="pills-file-tab" data-bs-toggle="pill" data-bs-target="#pills-file" type="button">
                                            <i class="bi bi-upload me-1"></i>Fichier
                                        </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link py-1" id="pills-url-tab" data-bs-toggle="pill" data-bs-target="#pills-url" type="button">
                                            <i class="bi bi-link-45deg me-1"></i>URL Web
                                        </button>
                                    </li>
                                </ul>

                                <!-- Contenu des onglets -->
                                <div class="tab-content">
                                    <!-- Onglet Fichier -->
                                    <div class="tab-pane fade show active" id="pills-file" role="tabpanel">
                                        <input type="file" class="form-control form-control-sm" name="logo_file" accept="image/png, image/jpeg, image/gif">
                                        <div class="form-text x-small mt-1">Format JPG ou PNG recommand√©.</div>
                                    </div>
                                    
                                    <!-- Onglet URL -->
                                    <div class="tab-pane fade" id="pills-url" role="tabpanel">
                                        <div class="input-group input-group-sm">
                                            <span class="input-group-text bg-light"><i class="bi bi-link"></i></span>
                                            <input type="text" class="form-control" name="logo_url" placeholder="https://exemple.com/logo.png">
                                        </div>
                                        <div class="form-text x-small mt-1">Copiez l'adresse de l'image depuis le site du fournisseur.</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                
                <div class="modal-footer bg-white border-top-0">
                    <button type="button" class="btn btn-light text-muted fw-bold" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-success px-4 fw-bold shadow-sm">
                        <i class="bi bi-check-lg me-2"></i>Ajouter
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

==================================================
FICHIER : templates\_modale_fournisseur_edit.html
==================================================
<!-- Modale Modification Fournisseur -->
<div class="modal fade" id="edit-fournisseur-modal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title"><i class="bi bi-pencil-square me-2"></i>Modifier le Fournisseur</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            
            <!-- L'action est d√©finie par le JS -->
            <form id="edit-fournisseur-form" method="POST" enctype="multipart/form-data">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    
                    <div class="mb-3">
                        <label for="edit_nom" class="form-label fw-bold">Nom du fournisseur *</label>
                        <input type="text" class="form-control" id="edit_nom" name="nom" required>
                    </div>

                    <div class="mb-3">
                        <label for="edit_site_web" class="form-label">Site Internet</label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="bi bi-globe"></i></span>
                            <input type="url" class="form-control" id="edit_site_web" name="site_web" placeholder="https://...">
                        </div>
                    </div>

                    <!-- GESTION LOGO (URL ou FICHIER) -->
                    <div class="mb-3">
                        <label class="form-label fw-bold">Logo</label>
                        
                        <!-- Onglets -->
                        <div class="nav nav-tabs mb-2" id="nav-tab-edit" role="tablist">
                            <button class="nav-link active py-1 px-3 small" data-bs-toggle="tab" data-bs-target="#nav-url-edit" type="button">URL Image</button>
                            <button class="nav-link py-1 px-3 small" data-bs-toggle="tab" data-bs-target="#nav-file-edit" type="button">Fichier Local</button>
                        </div>
                        
                        <!-- Contenu Onglets -->
                        <div class="tab-content">
                            <!-- Onglet URL -->
                            <div class="tab-pane fade show active" id="nav-url-edit">
                                <input type="url" class="form-control" id="edit_logo_url_input" name="logo_url" placeholder="https://exemple.com/logo.png">
                                <div class="form-text text-muted">Laissez vide pour conserver l'image actuelle.</div>
                            </div>
                            
                            <!-- Onglet Fichier -->
                            <div class="tab-pane fade" id="nav-file-edit">
                                <input type="file" class="form-control" name="logo_file" accept="image/*">
                                <div class="form-text text-muted">Laissez vide pour conserver l'image actuelle.</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer bg-light">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary">Enregistrer les modifications</button>
                </div>
            </form>
        </div>
    </div>
</div>

==================================================
FICHIER : templates\_modale_suggestion.html
==================================================
<!-- Modale Bootstrap de suggestion de commande -->
<div class="modal fade" id="suggestionModal" tabindex="-1" aria-labelledby="suggestionModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="suggestionModalLabel">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="24px" style="vertical-align: middle; margin-right: 8px; fill: currentColor;">
                        <path d="M440-280h80v-160h160v-80H520v-160h-80v160H280v80h160v160Zm40 200q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
                    </svg>
                    Suggestion de Commande
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            
            <div class="modal-body">
                <div class="suggestion-info-card">
                    <div class="suggestion-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                            <path d="M440-183v-274L200-596v274l240 139Zm80 0 240-139v-274L520-457v274Zm-80 92L160-252q-19-11-29.5-29T120-321v-318q0-22 10.5-40t29.5-29l280-161q19-11 40-11t40 11l280 161q19 11 29.5 29t10.5 40v318q0 22-10.5 40T800-252L520-91q-19 11-40 11t-40-11Z"/>
                        </svg>
                    </div>
                    <div class="suggestion-info-content">
                        <h6 id="suggestion-objet-nom" class="mb-1">-</h6>
                        <p class="text-muted mb-0 small">Indiquez la quantit√© √† commander pour r√©approvisionner cet article</p>
                    </div>
                </div>

                <div class="mb-3 mt-4">
                    <label for="suggestion-quantity-input" class="form-label fw-semibold">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px" style="vertical-align: middle; margin-right: 4px;">
                            <path d="M440-280h80v-160h160v-80H520v-160h-80v160H280v80h160v160Z"/>
                        </svg>
                        Quantit√© √† commander *
                    </label>
                    <input type="number" 
                           class="form-control form-control-lg" 
                           id="suggestion-quantity-input" 
                           min="1" 
                           placeholder="Ex: 50"
                           required>
                    <div class="form-text">Entrez le nombre d'unit√©s √† commander</div>
                </div>

                <div class="mb-3">
                    <label for="suggestion-commentaire" class="form-label fw-semibold">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px" style="vertical-align: middle; margin-right: 4px;">
                            <path d="M240-400h480v-80H240v80Zm0-120h480v-80H240v80Zm0-120h480v-80H240v80ZM880-80 720-240H160q-33 0-56.5-23.5T80-320v-480q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v720Z"/>
                        </svg>
                        Commentaire (optionnel)
                    </label>
                    <textarea class="form-control" 
                              id="suggestion-commentaire" 
                              rows="3" 
                              placeholder="Ajoutez des informations compl√©mentaires..."></textarea>
                </div>

                <input type="hidden" id="suggestion-objet-id">
            </div>
            
            <div class="modal-footer bg-light">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px" style="vertical-align: middle; margin-right: 4px;">
                        <path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/>
                    </svg>
                    Annuler
                </button>
                <button type="button" class="btn btn-primary" id="suggestion-confirm-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px" style="vertical-align: middle; margin-right: 4px;">
                        <path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/>
                    </svg>
                    Envoyer la suggestion
                </button>
            </div>
        </div>
    </div>
</div>

==================================================
FICHIER : templates\_modale_warning.html
==================================================
<div class="modal-overlay" id="warning-modal" style="display: none;">
    <div class="modal-content modal-warning"> <!-- On utilise la classe .modal-warning que tu as d√©j√† -->
        <div class="modal-header">
            <h3 id="warning-modal-title" class="modal-title-with-icon">
                <svg class="modal-icon" ...> <!-- Ic√¥ne d'avertissement --> </svg>
                <span>Titre de l'avertissement</span>
            </h3>
            <button type="button" class="close-btn close-modal-btn">&times;</button>
        </div>
        <div class="modal-form">
            <p id="warning-modal-message">Message de l'avertissement.</p>
            <div class="modal-actions">
                <button type="button" class="btn-action btn-secondary close-modal-btn">Fermer</button>
            </div>
        </div>
    </div>
</div>

==================================================
FICHIER : templates\_modals.html
==================================================
<!-- ================================================================= -->
<!-- 1. MODALE DE R√âSERVATION (CALENDRIER) -->
<!-- ================================================================= -->
<div class="modal fade" id="bookingModal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title"><i class="bi bi-calendar-check me-2"></i>R√©server du mat√©riel</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="bookingDate">
                <input type="hidden" id="editingGroupId">
                <div class="row">
                    <div class="col-md-7">
                        <div class="mb-3">
                            <label class="form-label fw-bold">Cr√©neau horaire</label>
                            <div class="d-flex align-items-center gap-2">
                                <select class="form-select" id="startTime">
                                    {% for h in range(8, 18) %}
                                        <option value="{{ '%02d:00'|format(h) }}">{{ '%02d:00'|format(h) }}</option>
                                    {% endfor %}
                                </select>
                                <span>√†</span>
                                <select class="form-select" id="endTime">
                                    {% for h in range(9, 19) %}
                                        <option value="{{ '%02d:00'|format(h) }}">{{ '%02d:00'|format(h) }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        <hr>
                        <div id="availableItems">
                            <div class="text-center py-4">
                                <div class="spinner-border text-primary" role="status"></div>
                                <p class="mt-2 text-muted">Chargement du mat√©riel...</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5 border-start bg-light">
                        <h6 class="fw-bold mb-3">Votre Panier</h6>
                        <div id="bookingCart">
                            <p class="text-muted small fst-italic">Votre panier est vide.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <button type="button" class="btn btn-primary" id="validateBookingBtn" disabled>Valider la r√©servation</button>
            </div>
        </div>
    </div>
</div>

<!-- ================================================================= -->
<!-- 2. MODALE DE CONFIRMATION (R√âSERVATION) -->
<!-- ================================================================= -->
<div class="modal fade" id="confirmationModal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title"><i class="bi bi-check-circle me-2"></i>Confirmer la r√©servation</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body p-4">
                <div id="confirmation-summary-list">
                    <!-- Contenu g√©n√©r√© par JS -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="confirmation-back-btn" class="btn btn-secondary">Modifier</button>
                <button type="button" id="confirmation-confirm-btn" class="btn btn-success">Confirmer d√©finitivement</button>
            </div>
        </div>
    </div>
</div>

<!-- ================================================================= -->
<!-- 3. MODALE DANGER (SUPPRESSION G√âN√âRIQUE) -->
<!-- ================================================================= -->
<div class="modal fade" id="dangerModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-danger">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title"><i class="bi bi-exclamation-triangle-fill me-2"></i>Confirmation Requise</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form id="dangerModalForm" action="" method="post">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <div class="modal-body p-4">
                    <p id="dangerModalText" class="mb-0 fs-5">√ätes-vous s√ªr de vouloir effectuer cette action ?</p>
                    <p class="text-muted small mt-2">Cette action est irr√©versible.</p>
                </div>
                <div class="modal-footer bg-light">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-danger">Confirmer</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- ================================================================= -->
<!-- 4. MODALE D'AJOUT/MODIF OBJET (DESIGN PREMIUM) -->
<!-- ================================================================= -->
<div class="modal fade" id="addObjectModal" tabindex="-1" aria-labelledby="addObjectModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">
            
            <!-- Header Stylis√© -->
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title fw-bold" id="modal-objet-title">
                    <i class="bi bi-box-seam-fill me-2"></i>Ajouter un mat√©riel
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <form action="{{ url_for('inventaire.ajouter_objet') }}" method="post" enctype="multipart/form-data">
                <div class="modal-body p-4 bg-light">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    
                    <div class="row g-4">
                        
                        <!-- COLONNE GAUCHE : IDENTIT√â & STOCK -->
                        <div class="col-md-6">
                            <h6 class="text-uppercase text-muted fw-bold small mb-3 border-bottom pb-2">Informations G√©n√©rales</h6>
                            
                            <!-- Nom -->
                            <div class="mb-3">
                                <label for="nom" class="form-label fw-bold small">Nom de l'objet <span class="text-danger">*</span></label>
                                <div class="input-group shadow-sm">
                                    <span class="input-group-text bg-white"><i class="bi bi-tag"></i></span>
                                    <input type="text" class="form-control border-start-0 ps-0" id="nom" name="nom" placeholder="Ex: B√©cher 50ml" required>
                                </div>
                            </div>

                            <!-- Quantit√© & Seuil -->
                            <div class="row g-2 mb-3">
                                <div class="col-6">
                                    <label for="quantite" class="form-label fw-bold small">Quantit√© <span class="text-danger">*</span></label>
                                    <div class="input-group shadow-sm">
                                        <input type="number" class="form-control text-center fw-bold" id="quantite" name="quantite" value="1" min="0" required>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <label for="seuil" class="form-label fw-bold small text-danger">Seuil Alerte <span class="text-danger">*</span></label>
                                    <div class="input-group shadow-sm">
                                        <span class="input-group-text bg-white text-danger"><i class="bi bi-bell"></i></span>
                                        <input type="number" class="form-control border-start-0 ps-0" id="seuil" name="seuil" value="5" min="0" required>
                                    </div>
                                </div>
                            </div>

                            <!-- Date P√©remption -->
                            <div class="mb-3">
                                <label for="date_peremption" class="form-label fw-bold small">Date de p√©remption</label>
                                <div class="input-group shadow-sm">
                                    <span class="input-group-text bg-white"><i class="bi bi-calendar-event"></i></span>
                                    <input type="date" class="form-control border-start-0 ps-0" id="date_peremption" name="date_peremption">
                                </div>
                            </div>
                        </div>

                        <!-- COLONNE DROITE : CLASSEMENT & M√âDIA -->
                        <div class="col-md-6">
                            <h6 class="text-uppercase text-muted fw-bold small mb-3 border-bottom pb-2">Classement & M√©dia</h6>

                            <!-- Armoire & Cat√©gorie -->
                            <div class="mb-3">
                                <label for="armoire_id" class="form-label fw-bold small">Armoire <span class="text-danger">*</span></label>
                                <div class="input-group shadow-sm">
                                    <span class="input-group-text bg-white"><i class="bi bi-archive"></i></span>
                                    <select class="form-select border-start-0 ps-0" id="armoire_id" name="armoire_id" required>
                                        {% for a in all_armoires %}<option value="{{ a.id }}">{{ a.nom }}</option>{% endfor %}
                                    </select>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="categorie_id" class="form-label fw-bold small">Cat√©gorie <span class="text-danger">*</span></label>
                                <div class="input-group shadow-sm">
                                    <span class="input-group-text bg-white"><i class="bi bi-bookmarks"></i></span>
                                    <select class="form-select border-start-0 ps-0" id="categorie_id" name="categorie_id" required>
                                        {% for c in all_categories %}<option value="{{ c.id }}">{{ c.nom }}</option>{% endfor %}
                                    </select>
                                </div>
                            </div>

                            <!-- SECTION IMAGE (Ton design conserv√©) -->
                            <div class="card border-0 shadow-sm mb-3">
                                <div class="card-body p-2 bg-white rounded">
                                    <label class="form-label fw-bold small mb-2">Image de l'objet</label>
                                    <ul class="nav nav-pills nav-fill small mb-2" id="pills-tab-img" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active py-1" id="pills-file-tab" data-bs-toggle="pill" data-bs-target="#pills-file" type="button">
                                                <i class="bi bi-upload me-1"></i>Fichier
                                            </button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link py-1" id="pills-url-tab" data-bs-toggle="pill" data-bs-target="#pills-url" type="button">
                                                <i class="bi bi-link-45deg me-1"></i>URL / Web
                                            </button>
                                        </li>
                                    </ul>
                                    <div class="tab-content">
                                        <div class="tab-pane fade show active" id="pills-file">
                                            <input type="file" class="form-control form-control-sm" id="image" name="image" accept="image/*">
                                        </div>
                                        <div class="tab-pane fade" id="pills-url">
                                            <div class="input-group input-group-sm">
                                                <input type="text" class="form-control" id="image_url" name="image_url" placeholder="https://...">
                                                <button class="btn btn-outline-secondary" type="button" id="btn-search-pexels"><i class="bi bi-search"></i></button>
                                            </div>
                                            <div id="pexels-results" class="d-flex gap-2 mt-2 overflow-auto" style="display:none;"></div>
                                        </div>
                                    </div>
                                    <!-- Aper√ßu Image -->
                                    <div id="image-preview-container" class="mt-2 text-center" style="display:none;">
                                        <img id="image-preview" src="" style="max-height: 100px; max-width: 100%; object-fit: contain;" class="rounded border">
                                    </div>
                                </div>
                            </div>

                            <!-- SECTION FDS (NOUVEAU : Design int√©gr√©) -->
                            <div class="card border-0 shadow-sm">
                                <div class="card-body p-2 bg-white rounded">
                                     <label class="form-label fw-bold text-muted small mt-3">S√âCURIT√â (FDS)</label>
                            
									<!-- ZONE INFO √âTAT ACTUEL (Cach√©e par d√©faut) -->
									<div id="fds-current-status" class="alert alert-success d-flex align-items-center justify-content-between p-2 mb-2" style="display: none;">
										<div class="d-flex align-items-center gap-2">
											<i class="bi bi-check-circle-fill fs-5"></i>
											<div style="line-height: 1.2;">
												<div class="small fw-bold">FDS Active</div>
												<div class="x-small opacity-75" id="fds-current-type">Fichier local</div>
											</div>
										</div>
										<a href="#" target="_blank" id="fds-current-link" class="btn btn-sm btn-light text-success fw-bold py-0" style="font-size: 0.75rem;">
											Voir
										</a>
									</div>

									<!-- ONGLETS -->
									<div class="nav nav-tabs mb-2" id="nav-tab-fds" role="tablist">
										<button class="nav-link active py-1 px-3 small" data-bs-toggle="tab" data-bs-target="#nav-file-fds" type="button">
											<i class="bi bi-file-earmark-pdf me-1"></i>Fichier PDF
										</button>
										<button class="nav-link py-1 px-3 small" data-bs-toggle="tab" data-bs-target="#nav-url-fds" type="button">
											<i class="bi bi-link-45deg me-1"></i>Lien Web
										</button>
									</div>
									
									<div class="tab-content">
										<div class="tab-pane fade show active" id="nav-file-fds">
											<input type="file" class="form-control form-control-sm" name="fds_file" accept="application/pdf">
										</div>
										<div class="tab-pane fade" id="nav-url-fds">
											<input type="url" class="form-control form-control-sm" id="fds_url" name="fds_url" placeholder="https://...">
										</div>
									</div>
									
									<!-- TEXTE D'AIDE DYNAMIQUE -->
									<div class="form-text x-small text-muted mt-2" id="fds-help-text">
										Ajoutez un fichier ou un lien pour la s√©curit√©.
									</div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                
                <!-- Footer Actions -->
                <div class="modal-footer bg-white border-top-0">
                    <button type="button" class="btn btn-light text-muted fw-bold" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary px-4 fw-bold shadow-sm" id="modal-submit-btn">
                        <i class="bi bi-check-lg me-2"></i>Enregistrer
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- ================================================================= -->
<!-- 5. MODALE DE SUGGESTION (COMMANDE) -->
<!-- ================================================================= -->
<div class="modal fade" id="suggestionModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-warning">
            <div class="modal-header bg-warning text-dark">
                <h5 class="modal-title"><i class="bi bi-lightbulb me-2"></i>Sugg√©rer une commande</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body p-4">
                <p class="mb-3">Objet concern√© : <strong id="suggestion-objet-nom" class="text-primary fs-5">-</strong></p>
                <input type="hidden" id="suggestion-objet-id">
                
                <div class="form-floating mb-3">
                    <input type="number" class="form-control" id="suggestion-quantity-input" min="1" required placeholder="Qt√©">
                    <label for="suggestion-quantity-input">Quantit√© sugg√©r√©e</label>
                </div>
                
                <div class="form-floating">
                    <textarea class="form-control" id="suggestion-commentaire" style="height: 100px" placeholder="Commentaire"></textarea>
                    <label for="suggestion-commentaire">Pourquoi cette commande ? (Optionnel)</label>
                </div>
            </div>
            <div class="modal-footer bg-light">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <button type="button" class="btn btn-warning fw-bold" id="suggestion-confirm-btn">Envoyer la suggestion</button>
            </div>
        </div>
    </div>
</div>


<!-- ================================================================= -->
<!-- 6. MODALE DE SUPPRESSION R√âSERVATION (SP√âCIFIQUE CALENDRIER) -->
<!-- ================================================================= -->
<div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title"><i class="bi bi-exclamation-triangle-fill me-2"></i>Confirmation</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
                <p class="mb-0 fs-5">Voulez-vous vraiment supprimer cette r√©servation ?</p>
                <p class="text-muted small mt-2">Cette action est irr√©versible et remettra le stock en circulation.</p>
            </div>
            <div class="modal-footer bg-light">
                <button type="button" class="btn btn-secondary px-4" data-bs-dismiss="modal">Annuler</button>
                <!-- L'ID ci-dessous est celui cherch√© par calendar-daily.js -->
                <button type="button" class="btn btn-danger px-4" id="btnConfirmDeleteAction">
                    <i class="bi bi-trash-fill me-2"></i>Supprimer
                </button>
            </div>
        </div>
    </div>
</div>



<!-- ================================================================= -->
<!-- 7. MODALE AVERTISSEMENT DERNIER ITEM (Pour booking-modal.js) -->
<!-- ================================================================= -->
<div class="modal fade" id="lastItemWarningModal" tabindex="-1" aria-hidden="true" style="z-index: 1070;">
    <div class="modal-dialog modal-dialog-centered modal-sm"> <!-- modal-sm pour faire compact -->
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header bg-warning text-dark border-0">
                <h5 class="modal-title fs-6 fw-bold">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i>Attention
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4 text-center">
                <p class="mb-2 fw-medium">Retirer ce dernier objet annulera compl√®tement la r√©servation.</p>
                <p class="text-muted small mb-0">Voulez-vous continuer ?</p>
            </div>
            <div class="modal-footer bg-light border-0 justify-content-center">
                <button type="button" class="btn btn-outline-secondary btn-sm px-3" data-bs-dismiss="modal">Non, garder</button>
                <button type="button" class="btn btn-warning btn-sm px-3 fw-bold" id="btnConfirmLastItemDelete">
                    Oui, supprimer
                </button>
            </div>
        </div>
    </div>
</div>


<!-- ================================================================= -->
<!-- 8. MODALE ACTION PANIER (Suppression Item / Vider) -->
<!-- ================================================================= -->
<div class="modal fade" id="cartActionModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title"><i class="bi bi-trash3-fill me-2"></i>Confirmation</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
                <p id="cartModalMessage" class="mb-0 fs-5">Confirmez-vous cette action ?</p>
            </div>
            <div class="modal-footer bg-light">
                <button type="button" class="btn btn-secondary px-4" data-bs-dismiss="modal">Annuler</button>
                <button type="button" class="btn btn-danger px-4" id="btnConfirmCartAction">
                    Confirmer
                </button>
            </div>
        </div>
    </div>
</div>



<!-- ================================================================= -->
<!-- 9. MODALE AJOUT √âQUIPEMENT S√âCURIT√â (NOUVEAU) -->
<!-- ================================================================= -->
<div class="modal fade" id="addSecurityModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">
            
            <!-- Header Vert Sarcelle pour la S√©curit√© -->
            <div class="modal-header text-white" style="background: linear-gradient(135deg, #20c997 0%, #198754 100%);">
                <h5 class="modal-title fw-bold">
                    <i class="bi bi-shield-plus me-2"></i>Nouvel √âquipement
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <form id="formAddSecurity">
                <div class="modal-body p-4 bg-light">
                    <!-- Zone de message d'erreur JS -->
                    <div id="security-error-msg" class="alert alert-danger d-none"></div>

                    <div class="row g-4">
                        <!-- COLONNE GAUCHE : IDENTIT√â -->
                        <div class="col-md-6">
                            <h6 class="text-uppercase text-muted fw-bold small mb-3 border-bottom pb-2">Identification</h6>
                            
                            <!-- Nom -->
                            <div class="mb-3">
                                <label class="form-label fw-bold small">Nom de l'√©quipement <span class="text-danger">*</span></label>
                                <div class="input-group shadow-sm">
                                    <span class="input-group-text bg-white"><i class="bi bi-tag"></i></span>
                                    <input type="text" class="form-control border-start-0 ps-0" name="nom" placeholder="Ex: Sorbonne Salle 204" required>
                                </div>
                            </div>

                            <!-- Type -->
                            <div class="mb-3">
                                <label class="form-label fw-bold small">Type <span class="text-danger">*</span></label>
                                <div class="input-group shadow-sm">
                                    <span class="input-group-text bg-white"><i class="bi bi-grid"></i></span>
                                    <select class="form-select border-start-0 ps-0" name="type_equipement" required>
                                        <option value="" selected disabled>Choisir...</option>
                                        <option value="Hotte">Hotte Aspirante / Sorbonne</option>
                                        <option value="Armoire Ventil√©e">Armoire Ventil√©e</option>
                                        <option value="Extincteur">Extincteur</option>
                                        <option value="Douche">Douche de s√©curit√© / Lave-yeux</option>
                                        <option value="D√©tecteur">D√©tecteur de Gaz</option>
                                        <option value="Autre">Autre</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Localisation -->
                            <div class="mb-3">
                                <label class="form-label fw-bold small">Localisation</label>
                                <div class="input-group shadow-sm">
                                    <span class="input-group-text bg-white"><i class="bi bi-geo-alt"></i></span>
                                    <input type="text" class="form-control border-start-0 ps-0" name="localisation" placeholder="Ex: Salle TP Chimie">
                                </div>
                            </div>
                        </div>

                        <!-- COLONNE DROITE : TECHNIQUE -->
                        <div class="col-md-6">
                            <h6 class="text-uppercase text-muted fw-bold small mb-3 border-bottom pb-2">Donn√©es Techniques</h6>

                            <!-- Num√©ro de S√©rie -->
                            <div class="mb-3">
                                <label class="form-label fw-bold small">Num√©ro de S√©rie / Inventaire</label>
                                <div class="input-group shadow-sm">
                                    <span class="input-group-text bg-white"><i class="bi bi-upc-scan"></i></span>
                                    <input type="text" class="form-control border-start-0 ps-0" name="numero_serie" placeholder="Optionnel">
                                </div>
                            </div>

                            <!-- Date Installation -->
                            <div class="mb-3">
                                <label class="form-label fw-bold small">Date d'installation</label>
                                <div class="input-group shadow-sm">
                                    <span class="input-group-text bg-white"><i class="bi bi-calendar-check"></i></span>
                                    <input type="date" class="form-control border-start-0 ps-0" name="date_installation">
                                </div>
                            </div>
                            
                            <div class="alert alert-info small mt-4 mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                Vous pourrez configurer les plans de maintenance (v√©rifications p√©riodiques) une fois l'√©quipement cr√©√©.
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Footer Actions -->
                <div class="modal-footer bg-white border-top-0">
                    <button type="button" class="btn btn-light text-muted fw-bold" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-success px-4 fw-bold shadow-sm" id="btnSaveSecurity">
                        <i class="bi bi-check-lg me-2"></i>Cr√©er l'√©quipement
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

==================================================
FICHIER : templates\_pagination.html
==================================================
{% if pagination.total_pages > 1 %}
{# --- CORRECTIF : On nettoie les arguments pour √©viter le doublon de 'page' --- #}
{% set args = request.args.copy() %}
{% set _ = args.pop('page', None) %}

<!-- Conteneur d'espacement et de s√©paration -->
<div class="d-flex justify-content-center mt-4 pt-3 border-top border-light-subtle">
    <nav aria-label="Navigation des pages">
        <ul class="pagination mb-0 shadow-sm">
            
            <!-- Bouton Pr√©c√©dent -->
            <li class="page-item {{ 'disabled' if pagination.page == 1 }}">
                <a class="page-link {{ 'bg-light text-muted' if pagination.page == 1 }}" 
                   href="{{ url_for(pagination.endpoint, page=pagination.page - 1, **args) if pagination.page > 1 else '#' }}"
                   aria-label="Pr√©c√©dent">
                    <span aria-hidden="true">&laquo; Pr√©c√©dent</span>
                </a>
            </li>

            <!-- Num√©ros de page (Logique intelligente pour ne pas tout afficher) -->
            {% for p in range(1, pagination.total_pages + 1) %}
                <!-- On affiche la premi√®re, la derni√®re, la courante, et les voisines -->
                {% if p == 1 or p == pagination.total_pages or (p >= pagination.page - 2 and p <= pagination.page + 2) %}
                    <li class="page-item {{ 'active' if p == pagination.page }}">
                        <a class="page-link {{ 'fw-bold' if p == pagination.page }}" 
                           href="{{ url_for(pagination.endpoint, page=p, **args) }}">
                            {{ p }}
                        </a>
                    </li>
                {% elif p == pagination.page - 3 or p == pagination.page + 3 %}
                    <li class="page-item disabled">
                        <span class="page-link border-0 bg-transparent">...</span>
                    </li>
                {% endif %}
            {% endfor %}

            <!-- Bouton Suivant -->
            <li class="page-item {{ 'disabled' if pagination.page == pagination.total_pages }}">
                <a class="page-link {{ 'bg-light text-muted' if pagination.page == pagination.total_pages }}" 
                   href="{{ url_for(pagination.endpoint, page=pagination.page + 1, **args) if pagination.page < pagination.total_pages else '#' }}"
                   aria-label="Suivant">
                    <span aria-hidden="true">Suivant &raquo;</span>
                </a>
            </li>
            
        </ul>
    </nav>
</div>
{% endif %}

==================================================
FICHIER : templates\_table_objets.html
==================================================
<table class="objet-table">
    <thead>
        <tr>
            {% if session.user_role == 'admin' and pagination.endpoint != 'inventaire.inventaire' %}<th class="checkbox-column"><input type="checkbox" id="select-all-checkbox" title="Tout s√©lectionner"></th>{% endif %}
            
            {% set next_direction = 'desc' if sort_by == 'nom' and direction == 'asc' else 'asc' %}
            <th class="sortable {% if sort_by == 'nom' %}th-sort-{{ direction }}{% endif %}">
                <a href="{{ url_for(pagination.endpoint, id=pagination.id, page=pagination.page, sort_by='nom', direction=next_direction, q=request.args.get('q'), armoire=request.args.get('armoire'), categorie=request.args.get('categorie'), etat=request.args.get('etat')) }}">Nom</a>
            </th>

            {% set next_direction = 'desc' if sort_by == 'quantite' and direction == 'asc' else 'asc' %}
            <th class="sortable {% if sort_by == 'quantite' %}th-sort-{{ direction }}{% endif %}">
                <a href="{{ url_for(pagination.endpoint, id=pagination.id, page=pagination.page, sort_by='quantite', direction=next_direction, q=request.args.get('q'), armoire=request.args.get('armoire'), categorie=request.args.get('categorie'), etat=request.args.get('etat')) }}">Quantit√©</a>
            </th>

            {% set next_direction = 'desc' if sort_by == 'seuil' and direction == 'asc' else 'asc' %}
            <th class="sortable {% if sort_by == 'seuil' %}th-sort-{{ direction }}{% endif %}">
                <a href="{{ url_for(pagination.endpoint, id=pagination.id, page=pagination.page, sort_by='seuil', direction=next_direction, q=request.args.get('q'), armoire=request.args.get('armoire'), categorie=request.args.get('categorie'), etat=request.args.get('etat')) }}">Seuil</a>
            </th>

            {% set next_direction = 'desc' if sort_by == 'date_peremption' and direction == 'asc' else 'asc' %}
            <th class="sortable {% if sort_by == 'date_peremption' %}th-sort-{{ direction }}{% endif %}">
                <a href="{{ url_for(pagination.endpoint, id=pagination.id, page=pagination.page, sort_by='date_peremption', direction=next_direction, q=request.args.get('q'), armoire=request.args.get('armoire'), categorie=request.args.get('categorie'), etat=request.args.get('etat')) }}">P√©remption</a>
            </th>

            {% set next_direction = 'desc' if sort_by == 'armoire' and direction == 'asc' else 'asc' %}
            <th class="sortable {% if sort_by == 'armoire' %}th-sort-{{ direction }}{% endif %}">
                <a href="{{ url_for(pagination.endpoint, id=pagination.id, page=pagination.page, sort_by='armoire', direction=next_direction, q=request.args.get('q'), armoire=request.args.get('armoire'), categorie=request.args.get('categorie'), etat=request.args.get('etat')) }}">Armoire</a>
            </th>

            {% set next_direction = 'desc' if sort_by == 'categorie' and direction == 'asc' else 'asc' %}
            <th class="sortable {% if sort_by == 'categorie' %}th-sort-{{ direction }}{% endif %}">
                <a href="{{ url_for(pagination.endpoint, id=pagination.id, page=pagination.page, sort_by='categorie', direction=next_direction, q=request.args.get('q'), armoire=request.args.get('armoire'), categorie=request.args.get('categorie'), etat=request.args.get('etat')) }}">Cat√©gorie</a>
            </th>
            
            <th>Image</th>
            <th>√âtat</th>
            {% if session.user_id %}<th>Actions</th>{% endif %}
        </tr>
    </thead>
    <tbody>
        {% for objet in objets %}
        {% set perime, perime_bientot, statut = False, False, 'ok' %}
        {% if objet.date_peremption %}
            {% set date_peremption_obj = date_actuelle.strptime(objet.date_peremption, '%Y-%m-%d') %}
            {% if date_peremption_obj < date_actuelle %}{% set perime, statut = True, 'perime' %}
            {% elif (date_peremption_obj - date_actuelle).days <= 30 %}{% set perime_bientot, statut = True, 'bientot' %}
            {% endif %}
        {% endif %}
        {% if statut == 'ok' and objet.quantite_disponible <= objet.seuil %}{% set statut = 'stock' %}{% endif %}

        <tr class="{{ 'row-perime' if perime else 'row-perime-bientot' if perime_bientot }}" data-objet-id="{{ objet.id }}">
            {% if session.user_role == 'admin' and pagination.endpoint != 'inventaire.inventaire' %}<td class="checkbox-column"><input type="checkbox" class="objet-checkbox" data-id="{{ objet.id }}"></td>{% endif %}
            <td data-field="nom"><a href="{{ url_for('inventaire.voir_objet', objet_id=objet.id) }}">{{ objet.nom }}</a></td>
            <td data-field="quantite">{{ objet.quantite_disponible }}</td>
            <td data-field="seuil">{{ objet.seuil }}</td>
            <td data-field="date_peremption" class="{{ 'texte-perime' if perime else 'texte-perime-bientot' if perime_bientot }}">{{ date_peremption_obj.strftime('%d/%m/%Y') if objet.date_peremption }}</td>
            <td data-field="armoire">{{ objet.armoire }}</td>
            <td data-field="categorie">{{ objet.categorie }}</td>
            <td class="image-cell">
                {% if objet.image %}
                <div class="image-preview-wrapper">
                    <img src="{{ url_for('serve_image', filename=objet.image) }}" class="image-objet-thumbnail" alt="Image de {{ objet.nom }}">
                    <img src="{{ url_for('serve_image', filename=objet.image) }}" class="image-objet-preview" alt="Aper√ßu de {{ objet.nom }}">
                </div>
                {% endif %}
            </td>
            <td data-type="alerte" data-alerte-status="{{ statut }}">
                {% if statut == 'perime' %}<span class="texte-perime" title="Produit p√©rim√©. A recycler !"><svg xmlns="http://www.w3.org/2000/svg" class="icon-svg" viewBox="0 -960 960 960"><path d="M240-80v-170q-39-17-68.5-45.5t-50-64.5q-20.5-36-31-77T80-520q0-158 112-259t288-101q176 0 288 101t112 259q0 42-10.5 83t-31 77q-20.5 36-50 64.5T720-250v170H240Zm80-80h40v-80h80v80h80v-80h80v80h40v-142q38-9 67.5-30t50-50q20.5-29 31.5-64t11-74q0-125-88.5-202.5T480-800q-143 0-231.5 77.5T160-520q0 39 11 74t31.5 64q20.5 29 50.5 50t67 30v142Zm100-200h120l-60-120-60 120Zm-80-80q33 0 56.5-23.5T420-520q0-33-23.5-56.5T340-600q-33 0-56.5 23.5T260-520q0 33 23.5 56.5T340-440Zm280 0q33 0 56.5-23.5T700-520q0-33-23.5-56.5T620-600q-33 0-56.5 23.5T540-520q0 33 23.5 56.5T620-440ZM480-160Z"/></svg></span>{% elif statut == 'bientot' %}<span class="texte-perime-bientot" title="Expire bient√¥t"><svg xmlns="http://www.w3.org/2000/svg" class="icon-svg" viewBox="0 -960 960 960"><path d="M480-520q66 0 113-47t47-113v-120H320v120q0 66 47 113t113 47ZM160-80v-80h80v-120q0-61 28.5-114.5T348-480q-51-32-79.5-85.5T240-680v-120h-80v-80h640v80h-80v120q0 61-28.5 114.5T612-480q51 32 79.5 85.5T720-280v120h80v80H160Z"/></svg></span>
                {% elif statut == 'stock' %}<span class="texte-alerte" title="Stock bas"><svg xmlns="http://www.w3.org/2000/svg" class="icon-svg" viewBox="0 -960 960 960"><path d="M320-80q-17 0-28.5-11.5T280-120v-640q0-17 11.5-28.5T320-800h80v-80h160v80h80q17 0 28.5 11.5T680-760v308q-22 6-42 15.5T600-414v-306H360v560h148q5 22 14.5 42T545-80H320Zm40-80Zm296 80-56-56 84-84-84-84 56-56 84 84 84-84 56 56-83 84 83 84-56 56-84-83-84 83Z"/></svg></span>
                {% else %}<span class="texte-ok" title="OK"><svg xmlns="http://www.w3.org/2000/svg" class="icon-svg" viewBox="0 -960 960 960"><path d="M320-80q-17 0-28.5-11.5T280-120v-640q0-17 11.5-28.5T320-800h80v-80h160v80h80q17 0 28.5 11.5T680-760v640q0 17-11.5 28.5T640-80H320Z"/></svg></span>
                {% endif %}
            </td>
            {% if session.user_id %}
            <td>
                <button class="btn-action edit-objet-btn"
                        data-objet-id="{{ objet.id }}"
                        data-armoire-id="{{ objet.armoire_id }}"
                        data-categorie-id="{{ objet.categorie_id }}"
                        data-nom="{{ objet.nom }}"
                        data-quantite="{{ objet.quantite_physique }}"
                        data-seuil="{{ objet.seuil }}"
                        data-date-peremption="{{ objet.date_peremption or '' }}"
                        data-image-url="{{ objet.image_url or '' }}"
                        data-modal-trigger="add-object-modal">
                    Modifier
                </button>
				{% if session.user_role == 'admin' %}
				<form class="form-in-cell" action="{{ url_for('inventaire.supprimer_objet', id_objet=objet.id) }}" method="post" onsubmit="return confirm('√ätes-vous s√ªr de vouloir supprimer d√©finitivement l\'objet \'{{ objet.nom }}\' ? Cette action est irr√©versible.');">
					<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
					<button type="submit" class="btn-action btn-danger">Supprimer</button>
				</form>
				{% endif %}
            </td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>

==================================================
FICHIER : templates\errors\404.html
==================================================
{% extends "base.html" %}

{% block title %}Page non trouv√©e - LabFlow{% endblock %}

{% block content %}
<div class="container d-flex flex-column justify-content-center align-items-center" style="min-height: 60vh;">
    <div class="text-center">
        <h1 class="display-1 fw-bold text-primary">404</h1>
        <h2 class="h4 mb-4 text-muted">Oups ! Cette page semble introuvable.</h2>
        <p class="mb-5 text-secondary">Le lien que vous avez suivi est peut-√™tre cass√© ou la page a √©t√© supprim√©e.</p>
        <a href="{{ url_for('inventaire.index') }}" class="btn btn-primary px-4 py-2 rounded-pill shadow-sm">
            <i class="bi bi-house-door-fill me-2"></i>Retour √† l'accueil
        </a>
    </div>
</div>
{% endblock %}

==================================================
FICHIER : templates\errors\429.html
==================================================
{% extends "base.html" %}

{% block title %}Trop de requ√™tes - LabFlow{% endblock %}

{% block content %}
<div class="main-container d-flex align-items-center justify-content-center" style="min-height: 70vh;">
    
    <div class="card border-0 shadow-lg rounded-4 overflow-hidden" style="max-width: 500px; width: 100%;">
        <!-- Bandeau sup√©rieur d√©coratif -->
        <div style="height: 10px; background: linear-gradient(90deg, #ff9a56, #ff6a88);"></div>
        
        <div class="card-body p-5 text-center">
            
            <!-- Ic√¥ne Anim√©e -->
            <div class="mb-4 position-relative d-inline-block">
                <div class="rounded-circle d-flex align-items-center justify-content-center text-white shadow-sm" 
                     style="width: 80px; height: 80px; background: linear-gradient(135deg, #ff9a56 0%, #ff6a88 100%);">
                    <i class="bi bi-hourglass-split fs-1 pulse-icon"></i>
                </div>
            </div>

            <h1 class="h3 fw-bold text-dark mb-3">Oups ! Vous allez un peu trop vite.</h1>
            
            <p class="text-muted mb-4">
                Le serveur a re√ßu trop de demandes de votre part en tr√®s peu de temps. 
                Par mesure de s√©curit√©, nous avons temporairement mis votre acc√®s en pause.
            </p>

            <div class="alert alert-warning border-0 bg-warning-subtle text-warning-emphasis small mb-4">
                <i class="bi bi-clock-history me-2"></i>
                Veuillez patienter quelques instants avant de r√©essayer.
            </div>

            <div class="d-grid gap-2">
                <a href="{{ url_for('inventaire.index') }}" class="btn btn-primary btn-lg shadow-sm">
                    <i class="bi bi-house-door-fill me-2"></i>Retour √† l'accueil
                </a>
                <button onclick="window.history.back()" class="btn btn-link text-decoration-none text-muted">
                    R√©essayer la page pr√©c√©dente
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Style sp√©cifique pour l'animation du sablier -->
<style>
    .pulse-icon {
        animation: spin-slow 3s infinite linear;
    }

    @keyframes spin-slow {
        0% { transform: rotate(0deg); }
        25% { transform: rotate(180deg); }
        50% { transform: rotate(180deg); }
        75% { transform: rotate(360deg); }
        100% { transform: rotate(360deg); }
    }
</style>
{% endblock %}

==================================================
FICHIER : templates\errors\500.html
==================================================
{% extends "base.html" %}

{% block title %}Erreur Serveur - LabFlow{% endblock %}

{% block content %}
<div class="container d-flex flex-column justify-content-center align-items-center" style="min-height: 60vh;">
    <div class="text-center">
        <h1 class="display-1 fw-bold text-danger">500</h1>
        <h2 class="h4 mb-4 text-muted">Erreur interne du serveur.</h2>
        <p class="mb-5 text-secondary">Un probl√®me technique est survenu. Nos √©quipes ont √©t√© notifi√©es.</p>
        <a href="{{ url_for('inventaire.index') }}" class="btn btn-outline-danger px-4 py-2 rounded-pill">
            <i class="bi bi-arrow-clockwise me-2"></i>R√©essayer
        </a>
    </div>
</div>
{% endblock %}

==================================================
FICHIER : templates\securite\details.html
==================================================
{% extends "base.html" %}

{% block title %}{{ equipement.nom }} - S√©curit√©{% endblock %}

{% block content %}
<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te -->
    <div class="d-flex justify-content-between align-items-start mb-4 pb-3 border-bottom">
        <div>
            <div class="d-flex align-items-center gap-3 mb-1">
                <h2 class="h3 mb-0 fw-bold text-dark">{{ equipement.nom }}</h2>
                {% if equipement.en_service %}
                    <span class="badge bg-success-subtle text-success border border-success-subtle rounded-pill">En service</span>
                {% else %}
                    <span class="badge bg-danger-subtle text-danger border border-danger-subtle rounded-pill">Hors service</span>
                {% endif %}
            </div>
            <div class="text-muted small">
                <i class="bi bi-grid me-1"></i>{{ equipement.type_equipement }} 
                <span class="mx-2">‚Ä¢</span> 
                <i class="bi bi-geo-alt me-1"></i>{{ equipement.localisation or 'Non localis√©' }}
            </div>
        </div>
        
        <div class="d-flex gap-2">
            <!-- BOUTON VERT : NOUVELLE INTERVENTION (Toujours visible) -->
            {% if session.user_role == 'admin' %}
            <button class="btn btn-success shadow-sm fw-bold" onclick="openLogModal()">
                <i class="bi bi-clipboard-check me-2"></i>Nouvelle Intervention
            </button>
            
            <button class="btn btn-outline-danger" onclick="confirmDelete()">
                <i class="bi bi-trash"></i>
            </button>
            {% endif %}
        </div>
    </div>

    <div class="row g-4 align-items-stretch">
        
        <!-- COLONNE GAUCHE : FICHE TECHNIQUE -->
        <div class="col-lg-4 d-flex flex-column gap-4">
            
            <div class="card shadow-sm border-0">
                <div class="card-header bg-light fw-bold text-uppercase small py-3">
                    Fiche Technique
                </div>
                <div class="card-body">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item d-flex justify-content-between px-0">
                            <span class="text-muted">Num√©ro de s√©rie</span>
                            <span class="fw-bold font-monospace">{{ equipement.numero_serie or '-' }}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between px-0">
                            <span class="text-muted">Date installation</span>
                            <span class="fw-bold">
                                {% if equipement.date_installation %}
                                    {{ equipement.date_installation.strftime('%d/%m/%Y') }}
                                {% else %}
                                    -
                                {% endif %}
                            </span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between px-0">
                            <span class="text-muted">√âtat g√©n√©ral</span>
                            {% if equipement.etat_general == 'neuf' %}
                                <span class="text-success fw-bold"><i class="bi bi-stars me-1"></i>Neuf</span>
                            {% elif equipement.etat_general == 'bon' %}
                                <span class="text-success fw-bold"><i class="bi bi-check-circle me-1"></i>Bon</span>
                            {% elif equipement.etat_general == 'moyen' %}
                                <span class="text-warning fw-bold"><i class="bi bi-exclamation-circle me-1"></i>Usag√©</span>
                            {% else %}
                                <span class="text-danger fw-bold"><i class="bi bi-x-circle me-1"></i>Critique</span>
                            {% endif %}
                        </li>
                    </ul>
                    
                    {% if session.user_role == 'admin' %}
                    <div class="d-grid mt-3">
                        <button class="btn btn-light border text-muted btn-sm" data-bs-toggle="modal" data-bs-target="#editEquipementModal">
                            <i class="bi bi-pencil me-2"></i>Modifier la fiche
                        </button>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Widget Conformit√© -->
            <div class="card shadow-sm border-0 bg-primary text-white mt-auto">
                <div class="card-body text-center p-4">
                    <div class="mb-2 opacity-75 text-uppercase small fw-bold">Prochaine √©ch√©ance</div>
                    {% set next_plan = equipement.plans_maintenance|sort(attribute='date_prochaine_action')|first %}
                    {% if next_plan %}
                        <h3 class="fw-bold mb-0">{{ next_plan.date_prochaine_action.strftime('%d %b') }}</h3>
                        <div class="small opacity-75">{{ next_plan.titre }}</div>
                    {% else %}
                        <h3 class="fw-bold mb-0">-</h3>
                        <div class="small opacity-75">Aucun plan d√©fini</div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- COLONNE DROITE : GESTION -->
        <div class="col-lg-8">
            <div class="card shadow-sm border-0 h-100">
                <div class="card-header bg-white border-bottom-0 pt-4 px-4 pb-0">
                    <ul class="nav nav-tabs card-header-tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active fw-bold" id="planning-tab" data-bs-toggle="tab" data-bs-target="#planning" type="button">
                                <i class="bi bi-calendar-week me-2"></i>Planification
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link fw-bold" id="history-tab" data-bs-toggle="tab" data-bs-target="#history" type="button">
                                <i class="bi bi-clock-history me-2"></i>Historique
                            </button>
                        </li>
                    </ul>
                </div>
                
                <div class="card-body p-4">
                    <div class="tab-content" id="myTabContent">
                        
                        <!-- ONGLET 1 : PLANIFICATION -->
                        <div class="tab-pane fade show active" id="planning" role="tabpanel">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h5 class="card-title mb-0">R√®gles de maintenance</h5>
                                {% if session.user_role == 'admin' %}
                                <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#addPlanModal">
                                    <i class="bi bi-plus-lg me-1"></i>Ajouter une r√®gle
                                </button>
                                {% endif %}
                            </div>

                            {% if equipement.plans_maintenance %}
                                <div class="list-group">
                                    {% for plan in equipement.plans_maintenance %}
                                    <div class="list-group-item d-flex justify-content-between align-items-center p-3">
                                        <div>
                                            <div class="fw-bold text-dark">{{ plan.titre }}</div>
                                            <div class="text-muted small">
                                                <i class="bi bi-arrow-repeat me-1"></i>Tous les {{ plan.periodicite_jours }} jours
                                                <span class="mx-1">‚Ä¢</span>
                                                {{ plan.type_prestataire|capitalize }}
                                            </div>
                                        </div>
                                        <div class="text-end d-flex align-items-center gap-3">
                                            <div>
                                                {% set days_left = (plan.date_prochaine_action - now.date()).days %}
                                                <div class="badge {% if days_left < 0 %}bg-danger{% elif days_left < 30 %}bg-warning text-dark{% else %}bg-light text-dark border{% endif %} mb-1">
                                                    {{ plan.date_prochaine_action.strftime('%d/%m/%Y') }}
                                                </div>
                                                <div class="small text-muted">
                                                    {% if days_left < 0 %}Retard de {{ days_left|abs }}j{% else %}Dans {{ days_left }}j{% endif %}
                                                </div>
                                            </div>
                                            
                                            <!-- BOUTON VALIDER RAPIDE -->
                                            {% if session.user_role == 'admin' %}
                                            <button class="btn btn-sm btn-outline-success" onclick="openLogModal({{ plan.id }})" title="Valider cette maintenance">
                                                <i class="bi bi-check-lg"></i>
                                            </button>
                                            {% endif %}
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            {% else %}
                                <div class="text-center py-5 bg-light rounded border border-dashed">
                                    <i class="bi bi-calendar-plus text-muted display-6"></i>
                                    <p class="text-muted mt-3 mb-0">Aucune r√®gle de maintenance d√©finie.</p>
                                </div>
                            {% endif %}
                        </div>

                        <!-- ONGLET 2 : HISTORIQUE -->
                        <div class="tab-pane fade" id="history" role="tabpanel">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h5 class="card-title mb-0">Carnet d'interventions</h5>
                            </div>

                            {% if equipement.historique %}
                                <div class="timeline">
                                    {% for log in equipement.historique|sort(attribute='date_intervention', reverse=True) %}
                                    <div class="border-start border-2 ps-3 pb-4 ms-2 position-relative">
                                        <div class="position-absolute top-0 start-0 translate-middle rounded-circle bg-white border border-2 {% if log.resultat == 'conforme' %}border-success{% elif log.resultat == 'signalement' %}border-warning{% else %}border-danger{% endif %}" style="width: 12px; height: 12px;"></div>
                                        <div class="d-flex justify-content-between">
                                            <span class="fw-bold text-dark">{{ log.date_intervention.strftime('%d/%m/%Y') }}</span>
                                            {% if log.resultat == 'conforme' %}
                                                <span class="badge bg-success-subtle text-success">Conforme</span>
                                            {% elif log.resultat == 'signalement' %}
                                                <span class="badge bg-warning-subtle text-warning-emphasis">Signalement</span>
                                            {% else %}
                                                <span class="badge bg-danger-subtle text-danger">Non Conforme</span>
                                            {% endif %}
                                        </div>
                                        <div class="small text-muted mt-1">
                                            <i class="bi bi-person me-1"></i>{{ log.operateur }}
                                        </div>
                                        {% if log.observations %}
                                        <div class="mt-2 p-2 bg-light rounded small text-muted fst-italic">
                                            "{{ log.observations }}"
                                        </div>
                                        {% endif %}
                                    </div>
                                    {% endfor %}
                                </div>
                            {% else %}
                                <div class="text-center py-5 bg-light rounded border border-dashed">
                                    <i class="bi bi-clipboard-data text-muted display-6"></i>
                                    <p class="text-muted mt-3 mb-0">Aucune intervention enregistr√©e.</p>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ================= MODALES (ADMIN ONLY) ================= -->
{% if session.user_role == 'admin' %}

<!-- 1. MODALE √âDITION FICHE -->
<div class="modal fade" id="editEquipementModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-light">
                <h5 class="modal-title fw-bold">Modifier la fiche</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form onsubmit="submitForm(event, '{{ url_for('securite.update_equipement', id=equipement.id) }}')">
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label small fw-bold">Nom</label>
                        <input type="text" class="form-control" name="nom" value="{{ equipement.nom }}" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label small fw-bold">Num√©ro de s√©rie</label>
                        <input type="text" class="form-control" name="numero_serie" value="{{ equipement.numero_serie or '' }}">
                    </div>
                    <div class="mb-3">
                        <label class="form-label small fw-bold">Date d'installation</label>
                        <input type="date" class="form-control" name="date_installation" value="{{ equipement.date_installation }}">
                    </div>
                    <div class="mb-3">
                        <label class="form-label small fw-bold">√âtat g√©n√©ral</label>
                        <select class="form-select" name="etat_general">
                            <option value="neuf" {% if equipement.etat_general == 'neuf' %}selected{% endif %}>Neuf</option>
                            <option value="bon" {% if equipement.etat_general == 'bon' %}selected{% endif %}>Bon √©tat</option>
                            <option value="moyen" {% if equipement.etat_general == 'moyen' %}selected{% endif %}>Usag√© / Moyen</option>
                            <option value="critique" {% if equipement.etat_general == 'critique' %}selected{% endif %}>Critique / √Ä remplacer</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer border-top-0">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- 2. MODALE AJOUT R√àGLE -->
<div class="modal fade" id="addPlanModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title fw-bold"><i class="bi bi-calendar-plus me-2"></i>Nouvelle R√®gle</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form onsubmit="submitForm(event, '{{ url_for('securite.add_plan', id=equipement.id) }}')">
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label small fw-bold">Titre de l'op√©ration</label>
                        <input type="text" class="form-control" name="titre" placeholder="Ex: V√©rification annuelle flux d'air" required>
                    </div>
                    <div class="row g-2">
                        <div class="col-6">
                            <label class="form-label small fw-bold">P√©riodicit√© (Jours)</label>
                            <input type="number" class="form-control" name="periodicite_jours" value="365" required>
                        </div>
                        <div class="col-6">
                            <label class="form-label small fw-bold">Prestataire</label>
                            <select class="form-select" name="type_prestataire">
                                <option value="externe">Organisme Externe</option>
                                <option value="interne">Interne (Labo)</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="modal-footer border-top-0">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary">Cr√©er la r√®gle</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- 3. MODALE AJOUT INTERVENTION (Celle qui manquait !) -->
<div class="modal fade" id="addLogModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title fw-bold"><i class="bi bi-clipboard-check me-2"></i>Saisir Intervention</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form onsubmit="submitForm(event, '{{ url_for('securite.add_log', id=equipement.id) }}')">
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label small fw-bold">Date</label>
                        <input type="date" class="form-control" name="date_intervention" value="{{ now.strftime('%Y-%m-%d') }}" required>
                    </div>
                    
                    <!-- Lien avec un plan existant -->
                    <div class="mb-3">
                        <label class="form-label small fw-bold">Concerne la r√®gle (Optionnel)</label>
                        <select class="form-select" name="plan_id" id="selectPlanId">
                            <option value="">-- Intervention hors planning --</option>
                            {% for plan in equipement.plans_maintenance %}
                            <option value="{{ plan.id }}">{{ plan.titre }}</option>
                            {% endfor %}
                        </select>
                        <div class="form-text x-small">Si s√©lectionn√©, la date de prochaine √©ch√©ance sera mise √† jour.</div>
                    </div>

                    <div class="row g-2 mb-3">
                        <div class="col-6">
                            <label class="form-label small fw-bold">Op√©rateur</label>
                            <input type="text" class="form-control" name="operateur" placeholder="Ex: Bureau Veritas" required>
                        </div>
                        <div class="col-6">
                            <label class="form-label small fw-bold">R√©sultat</label>
                            <select class="form-select" name="resultat">
                                <option value="conforme">Conforme</option>
                                <option value="non_conforme">Non Conforme</option>
                                <option value="repare">R√©par√©</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label small fw-bold">Observations</label>
                        <textarea class="form-control" name="observations" rows="2"></textarea>
                    </div>
                </div>
                <div class="modal-footer border-top-0">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-success">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>
</div>

{% endif %}

<script>
// Fonction pour ouvrir la modale d'intervention (avec pr√©-s√©lection optionnelle)
function openLogModal(planId = null) {
    const modalEl = document.getElementById('addLogModal');
    const selectEl = document.getElementById('selectPlanId');
    
    if(modalEl) {
        if(selectEl) {
            selectEl.value = planId || ""; // Pr√©-s√©lectionne la r√®gle si on a cliqu√© sur "Valider"
        }
        const modal = new bootstrap.Modal(modalEl);
        modal.show();
    }
}

// Fonction g√©n√©rique pour soumettre les formulaires en AJAX
function submitForm(event, url) {
    event.preventDefault();
    const form = event.target;
    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());
    const btn = form.querySelector('button[type="submit"]');
    const originalText = btn.innerHTML;

    btn.disabled = true;
    btn.innerHTML = '<span class="spinner-border spinner-border-sm"></span>';

    fetch(url, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': '{{ csrf_token() }}'
        },
        body: JSON.stringify(data)
    })
    .then(r => r.json())
    .then(res => {
        if(res.success) {
            window.location.reload();
        } else {
            alert("Erreur: " + res.error);
            btn.disabled = false;
            btn.innerHTML = originalText;
        }
    })
    .catch(err => {
        alert("Erreur technique");
        btn.disabled = false;
        btn.innerHTML = originalText;
    });
}

function confirmDelete() {
    if(confirm("Voulez-vous vraiment supprimer cet √©quipement et tout son historique ?")) {
        alert("Fonction de suppression √† venir.");
    }
}
</script>
{% endblock %}

==================================================
FICHIER : templates\securite\index.html
==================================================
{% extends "base.html" %}

{% block title %}S√©curit√© & Maintenance{% endblock %}

{% block content %}
<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te de page -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <!-- Ic√¥ne S√©curit√© -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #20c997 0%, #0dcaf0 100%);">
                <i class="bi bi-shield-check fs-4"></i>
            </div>
            <span class="fw-bold">S√©curit√© & Maintenance</span>
        </h2>
        
        <!-- Bouton d'ajout (Admin uniquement) -->
        {% if session.user_role == 'admin' %}
        <div>
            <button type="button" 
                    class="btn btn-primary" 
                    data-bs-toggle="modal" 
                    data-bs-target="#addSecurityModal">
                <i class="bi bi-plus-circle-fill me-2"></i> 
                Nouvel √âquipement
            </button>
        </div>
        {% endif %}
    </div>

    <!-- Liste des √©quipements -->
    {% if equipements %}
    <div class="card shadow-sm border-0">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover mb-0 align-middle">
                    <thead class="bg-light text-uppercase small fw-bold text-muted">
                        <tr>
                            <th class="ps-4 py-3">√âquipement</th>
                            <th>Type</th>
                            <th>Localisation</th>
                            <th>Installation</th>
                            <th>√âtat</th>
                            <th class="text-end pe-4">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for eq in equipements %}
                        <tr>
                            <td class="ps-4">
                                <div class="fw-bold text-dark">{{ eq.nom }}</div>
                                {% if eq.numero_serie %}
                                <div class="text-muted d-flex align-items-center gap-1" style="font-size: 0.75rem;">
                                    <i class="bi bi-upc-scan" title="Num√©ro de s√©rie"></i>
                                    <span class="font-monospace">{{ eq.numero_serie }}</span>
                                </div>
                                {% endif %}
                            </td>
                            <td><span class="badge bg-light text-dark border">{{ eq.type_equipement }}</span></td>
                            <td>
                                {% if eq.localisation %}
                                    <i class="bi bi-geo-alt text-muted me-1"></i>{{ eq.localisation }}
                                {% else %}
                                    <span class="text-muted">-</span>
                                {% endif %}
                            </td>
                            <td>
                                {% if eq.date_installation %}
                                    {{ eq.date_installation.strftime('%d/%m/%Y') }}
                                {% else %}
                                    <span class="text-muted small fst-italic">Inconnue</span>
                                {% endif %}
                            </td>
                            <td>
                                {% if eq.en_service %}
                                    <span class="badge bg-success-subtle text-success border border-success-subtle rounded-pill">
                                        <i class="bi bi-check-circle-fill me-1"></i>En service
                                    </span>
                                {% else %}
                                    <span class="badge bg-danger-subtle text-danger border border-danger-subtle rounded-pill">
                                        <i class="bi bi-x-circle-fill me-1"></i>Hors service
                                    </span>
                                {% endif %}
                            </td>
                            <td class="text-end pe-4">
                                {% if session.user_role == 'admin' %}
                                    <a href="{{ url_for('securite.voir_equipement', id=eq.id) }}" class="btn btn-sm btn-outline-primary" title="G√©rer la maintenance">
                                        <i class="bi bi-gear-fill me-1"></i> G√©rer
                                    </a>
                                {% else %}
                                    <button class="btn btn-sm btn-outline-warning text-dark" 
                                            onclick="openSignalementModal({{ eq.id }}, '{{ eq.nom|replace("'", "\\'") }}')">
                                        <i class="bi bi-exclamation-triangle-fill me-1"></i> Signaler
                                    </button>
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    {% else %}
    <!-- √âtat Vide (Empty State) -->
    <div class="empty-state-container text-center py-5">
        <div class="mb-3">
            <div class="d-inline-flex align-items-center justify-content-center bg-light rounded-circle" style="width: 80px; height: 80px;">
                <i class="bi bi-shield-exclamation text-muted opacity-50 display-4"></i>
            </div>
        </div>
        <h4 class="fw-bold text-dark">Aucun √©quipement suivi</h4>
        <p class="text-muted mb-4">Commencez par ajouter vos hottes, extincteurs ou douches de s√©curit√©.</p>
        {% if session.user_role == 'admin' %}
        <button class="btn btn-primary px-4 fw-bold" data-bs-toggle="modal" data-bs-target="#addSecurityModal">
            <i class="bi bi-plus-lg me-2"></i>Ajouter mon premier √©quipement
        </button>
        {% endif %}
    </div>
    {% endif %}
</div>

<!-- Inclusion des modales globales -->
{% include "_modals.html" %}

<!-- MODALE SIGNALEMENT (Utilisateur) -->
<div class="modal fade" id="signalementModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-warning text-dark">
                <h5 class="modal-title fw-bold"><i class="bi bi-exclamation-triangle-fill me-2"></i>Signaler un probl√®me</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p>√âquipement : <strong id="signalement-nom"></strong></p>
                <input type="hidden" id="signalement-id">
                <div class="mb-3">
                    <label class="form-label small fw-bold">Description du dysfonctionnement</label>
                    <textarea class="form-control" id="signalement-desc" rows="3" placeholder="Ex: Bruit anormal, vitre fissur√©e..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Annuler</button>
                <button type="button" class="btn btn-warning fw-bold" onclick="submitSignalement()">Envoyer le signalement</button>
            </div>
        </div>
    </div>
</div>

<!-- MODALE SUCC√àS SIGNALEMENT -->
<div class="modal fade" id="successSignalementModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header bg-success text-white border-0 justify-content-center py-4">
                <div class="rounded-circle bg-white d-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                    <i class="bi bi-check-lg text-success display-5"></i>
                </div>
            </div>
            <div class="modal-body text-center px-4 pt-4 pb-0">
                <h5 class="fw-bold mb-2">Envoy√© !</h5>
                <p class="text-muted small">Le signalement a bien √©t√© transmis aux administrateurs.</p>
            </div>
            <div class="modal-footer border-0 justify-content-center pb-4">
                <button type="button" class="btn btn-success px-4 rounded-pill fw-bold" data-bs-dismiss="modal">
                    Compris
                </button>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
// Initialisation des modales
let signalementModal;
let successModal;

document.addEventListener('DOMContentLoaded', function() {
    // On initialise les instances Bootstrap
    const sigEl = document.getElementById('signalementModal');
    if(sigEl) signalementModal = new bootstrap.Modal(sigEl);

    const sucEl = document.getElementById('successSignalementModal');
    if(sucEl) successModal = new bootstrap.Modal(sucEl);

    // Gestion du formulaire d'ajout (Admin)
    const formAdd = document.getElementById('formAddSecurity');
    if(formAdd) {
        formAdd.addEventListener('submit', function(e) {
            e.preventDefault();
            const btnSave = document.getElementById('btnSaveSecurity');
            const errorMsg = document.getElementById('security-error-msg');
            const originalBtnText = btnSave.innerHTML;
            
            btnSave.disabled = true;
            btnSave.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Enregistrement...';
            errorMsg.classList.add('d-none');

            const formData = new FormData(formAdd);
            const data = Object.fromEntries(formData.entries());

            fetch("{{ url_for('securite.ajouter_equipement') }}", {
                method: "POST",
                headers: { "Content-Type": "application/json", "X-CSRFToken": "{{ csrf_token() }}" },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                if (result.success) window.location.reload();
                else throw new Error(result.error || "Erreur inconnue.");
            })
            .catch(error => {
                errorMsg.textContent = error.message;
                errorMsg.classList.remove('d-none');
                btnSave.disabled = false;
                btnSave.innerHTML = originalBtnText;
            });
        });
    }
});

function openSignalementModal(id, nom) {
    document.getElementById('signalement-id').value = id;
    document.getElementById('signalement-nom').textContent = nom;
    document.getElementById('signalement-desc').value = '';
    if(signalementModal) signalementModal.show();
}

function submitSignalement() {
    const id = document.getElementById('signalement-id').value;
    const desc = document.getElementById('signalement-desc').value;
    const btn = document.querySelector('#signalementModal .btn-warning');
    const originalText = btn.innerHTML;
    
    if(!desc.trim()) {
        const textarea = document.getElementById('signalement-desc');
        textarea.classList.add('is-invalid');
        setTimeout(() => textarea.classList.remove('is-invalid'), 2000);
        return;
    }

    btn.disabled = true;
    btn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Envoi...';

    fetch("{{ url_for('securite.signaler_dysfonctionnement') }}", {
        method: "POST",
        headers: { "Content-Type": "application/json", "X-CSRFToken": "{{ csrf_token() }}" },
        body: JSON.stringify({ equipement_id: id, description: desc })
    })
    .then(r => r.json())
    .then(data => {
        if(data.success) {
            signalementModal.hide();
            successModal.show(); // Affiche la belle modale
        } else {
            alert("Erreur : " + data.error);
        }
    })
    .catch(err => {
        console.error(err);
        alert("Erreur de connexion.");
    })
    .finally(() => {
        btn.disabled = false;
        btn.innerHTML = originalText;
    });
}
</script>
{% endblock %}

==================================================
FICHIER : tools\arborescence.txt
==================================================
üìÇ Arborescence de : E:\Xav-Projets\labflow
======================================================================

‚îú‚îÄ‚îÄ üìÅ _trash/
‚îú‚îÄ‚îÄ üìÅ services/
‚îÇ   ‚îú‚îÄ‚îÄ inventory_service.py üêç (7.9KB)
‚îÇ   ‚îú‚îÄ‚îÄ kit_service.py üêç (3.4KB)
‚îÇ   ‚îú‚îÄ‚îÄ panier_service.py üêç (16.0KB)
‚îÇ   ‚îú‚îÄ‚îÄ security_service.py üêç (2.5KB)
‚îÇ   ‚îî‚îÄ‚îÄ stock_service.py üêç (11.7KB)
‚îú‚îÄ‚îÄ üìÅ static/
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ css/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ modules/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.css üé® (21.0KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ alerts.css üé® (9.3KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.css üé® (6.3KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendar.css üé® (9.3KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart.css üé® (8.1KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.css üé® (4.7KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ inventory.css üé® (11.7KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile.css üé® (3.2KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reports.css üé® (5.7KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tour.css üé® (3.3KB)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.css üé® (1.4KB)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bootstrap-icons.css üé® (96.0KB)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bootstrap.min.css üé® (227.5KB)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components.css üé® (21.1KB)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.css üé® (12.7KB)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ style.css üé® (796B)
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ icons/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ajout.png üñºÔ∏è (22.9KB)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ by-nc-nd.eu.svg üìÑ (20.1KB)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart-grey.svg üìÑ (11.1KB)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart-orange.svg üìÑ (333.0KB)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart-red.svg üìÑ (11.1KB)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ favicon.ico üìÑ (81.0KB)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logo.svg üìÑ (738B)
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ images/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ fournisseurs/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ avec56y7b.webp üìÑ (33.5KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ biolab.jpg üñºÔ∏è (7.6KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ images.png üñºÔ∏è (3.0KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logo_sordalab.png üñºÔ∏è (15.5KB)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ objets/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 16006587-lame_couvre_objet_pour_microscope.jpg üñºÔ∏è (21.4KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 395000.webp üìÑ (17.2KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Appareil_de_Berlese.jpg üñºÔ∏è (44.6KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Cuve_cuvette_a_dissection.jpg üñºÔ∏è (69.8KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ baguette-verre.jpg üñºÔ∏è (3.3KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ becher-forme-basse.jpg üñºÔ∏è (12.6KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ coton.jpeg üñºÔ∏è (2.7KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ couelle.jpg üñºÔ∏è (17.6KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ d029acf1-fc4f-4c57-a2c7-cd8970ee2f44.avif üìÑ (4.4KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dd7bc02d-1c1e-4ad9-a211-931169ee470c.avif üìÑ (5.3KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ e469ec17-a6da-4e4d-b488-d034edf2ab04.avif üìÑ (61.3KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entonnoir.jpg üñºÔ∏è (6.2KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fehling.png üñºÔ∏è (102.9KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ imagemagic.jpeg üñºÔ∏è (28.3KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lame.jpg üñºÔ∏è (42.1KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lames-oignon.webp üìÑ (11.6KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mortier.jpeg üñºÔ∏è (2.6KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pilon.webp üìÑ (1.7KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ racine_jacinthe_cl_mitoses_he_small.jpg üñºÔ∏è (128.8KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shopping.webp üìÑ (1.4KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sonde-cannelee.jpg üñºÔ∏è (8.0KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tube-a-essai-en-verre-borosilicate-3-3-type-1-011753150-product_zoom-1-300x300.jpg üñºÔ∏è (3.7KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ verre-montre.jpg üñºÔ∏è (39.5KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ vert-de-methyle-acetique-125-ml.jpg üñºÔ∏è (131.3KB)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Cc_by-nc-nd_icon.svg üìÑ (16.6KB)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ apple-touch-icon.png üñºÔ∏è (35.6KB)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ favicon.png üñºÔ∏è (2.4KB)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ favicon.svg üìÑ (644B)
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ js/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ modules/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ booking-modal.js ‚ö° (28.6KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendar-daily.js ‚ö° (7.5KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendar-monthly.js ‚ö° (8.7KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart-summary.js ‚ö° (8.8KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart-utils.js ‚ö° (1.8KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ import_feedback.js ‚ö° (1.1KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ toast.js ‚ö° (2.4KB)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tour.js ‚ö° (6.8KB)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bootstrap.bundle.min.js ‚ö° (78.5KB)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ script.js ‚ö° (55.9KB)
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ uploads/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ fds/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ maintenance/
‚îÇ   ‚îî‚îÄ‚îÄ logo.png üñºÔ∏è (220.8KB)
‚îú‚îÄ‚îÄ üìÅ templates/
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ errors/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 404.html üåê (758B)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 429.html üåê (2.5KB)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ 500.html üåê (721B)
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ securite/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ details.html üåê (23.2KB)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.html üåê (12.4KB)
‚îÇ   ‚îú‚îÄ‚îÄ Licence.txt üìÑ (276B)
‚îÇ   ‚îú‚îÄ‚îÄ _add_object_modal.html üåê (3.2KB)
‚îÇ   ‚îú‚îÄ‚îÄ _breadcrumb.html üåê (1.3KB)
‚îÇ   ‚îú‚îÄ‚îÄ _inventaire_content.html üåê (8.9KB)
‚îÇ   ‚îú‚îÄ‚îÄ _modale_danger.html üåê (1.2KB)
‚îÇ   ‚îú‚îÄ‚îÄ _modale_fournisseur_add.html üåê (5.5KB)
‚îÇ   ‚îú‚îÄ‚îÄ _modale_fournisseur_edit.html üåê (3.6KB)
‚îÇ   ‚îú‚îÄ‚îÄ _modale_suggestion.html üåê (4.7KB)
‚îÇ   ‚îú‚îÄ‚îÄ _modale_warning.html üåê (858B)
‚îÇ   ‚îú‚îÄ‚îÄ _modals.html üåê (29.6KB)
‚îÇ   ‚îú‚îÄ‚îÄ _pagination.html üåê (2.5KB)
‚îÇ   ‚îú‚îÄ‚îÄ _table_objets.html üåê (8.9KB)
‚îÇ   ‚îú‚îÄ‚îÄ a_propos.html üåê (9.0KB)
‚îÇ   ‚îú‚îÄ‚îÄ admin.html üåê (21.3KB)
‚îÇ   ‚îú‚îÄ‚îÄ admin_backup.html üåê (6.0KB)
‚îÇ   ‚îú‚îÄ‚îÄ admin_echeances.html üåê (11.8KB)
‚îÇ   ‚îú‚îÄ‚îÄ admin_fournisseurs.html üåê (10.6KB)
‚îÇ   ‚îú‚îÄ‚îÄ admin_import.html üåê (7.0KB)
‚îÇ   ‚îú‚îÄ‚îÄ admin_kit_modifier.html üåê (12.7KB)
‚îÇ   ‚îú‚îÄ‚îÄ admin_kits.html üåê (9.1KB)
‚îÇ   ‚îú‚îÄ‚îÄ admin_utilisateurs.html üåê (25.2KB)
‚îÇ   ‚îú‚îÄ‚îÄ alertes.html üåê (23.6KB)
‚îÇ   ‚îú‚îÄ‚îÄ armoire.html üåê (3.0KB)
‚îÇ   ‚îú‚îÄ‚îÄ base.html üåê (3.7KB)
‚îÇ   ‚îú‚îÄ‚îÄ budget.html üåê (25.5KB)
‚îÇ   ‚îú‚îÄ‚îÄ calendrier.html üåê (2.1KB)
‚îÇ   ‚îú‚îÄ‚îÄ categorie.html üåê (3.7KB)
‚îÇ   ‚îú‚îÄ‚îÄ documentation.html üåê (21.3KB)
‚îÇ   ‚îú‚îÄ‚îÄ dormants.html üåê (9.8KB)
‚îÇ   ‚îú‚îÄ‚îÄ footer.html üåê (3.6KB)
‚îÇ   ‚îú‚îÄ‚îÄ fournisseurs.html üåê (7.5KB)
‚îÇ   ‚îú‚îÄ‚îÄ gestion_armoires.html üåê (12.0KB)
‚îÇ   ‚îú‚îÄ‚îÄ gestion_categories.html üåê (12.6KB)
‚îÇ   ‚îú‚îÄ‚îÄ header.html üåê (7.7KB)
‚îÇ   ‚îú‚îÄ‚îÄ index.html üåê (38.7KB)
‚îÇ   ‚îú‚îÄ‚îÄ inventaire.html üåê (5.2KB)
‚îÇ   ‚îú‚îÄ‚îÄ legal.html üåê (9.3KB)
‚îÇ   ‚îú‚îÄ‚îÄ login.html üåê (2.6KB)
‚îÇ   ‚îú‚îÄ‚îÄ modale_objet.html üåê (4.3KB)
‚îÇ   ‚îú‚îÄ‚îÄ objet_details.html üåê (11.5KB)
‚îÇ   ‚îú‚îÄ‚îÄ panier.html üåê (3.1KB)
‚îÇ   ‚îú‚îÄ‚îÄ profil.html üåê (6.9KB)
‚îÇ   ‚îú‚îÄ‚îÄ rapports.html üåê (15.6KB)
‚îÇ   ‚îú‚îÄ‚îÄ register.html üåê (9.1KB)
‚îÇ   ‚îú‚îÄ‚îÄ setup.html üåê (14.0KB)
‚îÇ   ‚îú‚îÄ‚îÄ sub_header.html üåê (3.5KB)
‚îÇ   ‚îî‚îÄ‚îÄ vue_jour.html üåê (4.5KB)
‚îú‚îÄ‚îÄ üìÅ tools/
‚îÇ   ‚îú‚îÄ‚îÄ Keys.txt üìÑ (113B)
‚îÇ   ‚îú‚îÄ‚îÄ Secret_Key-GMLCL_Key.txt üìÑ (231B)
‚îÇ   ‚îú‚îÄ‚îÄ generer_cle.py üêç (969B)
‚îÇ   ‚îú‚îÄ‚îÄ keygen.py üêç (3.5KB)
‚îÇ   ‚îî‚îÄ‚îÄ keygen_ui.py üêç (2.5KB)
‚îú‚îÄ‚îÄ üìÅ views/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py üêç (0B)
‚îÇ   ‚îú‚îÄ‚îÄ admin.py üêç (121.8KB)
‚îÇ   ‚îú‚îÄ‚îÄ api.py üêç (31.5KB)
‚îÇ   ‚îú‚îÄ‚îÄ auth.py üêç (8.4KB)
‚îÇ   ‚îú‚îÄ‚îÄ inventaire.py üêç (36.9KB)
‚îÇ   ‚îú‚îÄ‚îÄ main.py üêç (16.3KB)
‚îÇ   ‚îî‚îÄ‚îÄ securite.py üêç (7.4KB)
‚îú‚îÄ‚îÄ A-IMPLEMENTER.txt üìÑ (24.2KB)
‚îú‚îÄ‚îÄ Mode-Emploi.pdf üìï (1.1MB)
‚îú‚îÄ‚îÄ README.md üìù (3.9KB)
‚îú‚îÄ‚îÄ api_pexels.txt üìÑ (56B)
‚îú‚îÄ‚îÄ app.py üêç (9.7KB)
‚îú‚îÄ‚îÄ audit_files.py üêç (3.8KB)
‚îú‚îÄ‚îÄ backup.sql üóÑÔ∏è (29.0KB)
‚îú‚îÄ‚îÄ code_bundle_complet.txt üìÑ (1.3MB)
‚îú‚îÄ‚îÄ config.py üêç (19B)
‚îú‚îÄ‚îÄ db.py üêç (16.3KB)
‚îú‚îÄ‚îÄ docker-compose.yml üìÑ (324B)
‚îú‚îÄ‚îÄ extensions.py üêç (504B)
‚îú‚îÄ‚îÄ forms.py üêç (1.5KB)
‚îú‚îÄ‚îÄ generate_structure.py üêç (1.9KB)
‚îú‚îÄ‚îÄ main.exe üìÑ (7.0MB)
‚îú‚îÄ‚îÄ requirements.txt üìÑ (392B)
‚îú‚îÄ‚îÄ reset_db.py üêç (1.3KB)
‚îú‚îÄ‚îÄ run.py üêç (1.5KB)
‚îú‚îÄ‚îÄ run.spec üìÑ (885B)
‚îú‚îÄ‚îÄ structure_projet.txt üìÑ (6.9KB)
‚îú‚îÄ‚îÄ tree.py üêç (7.0KB)
‚îú‚îÄ‚îÄ update_db_security.py üêç (364B)
‚îî‚îÄ‚îÄ utils.py üêç (10.6KB)

======================================================================
üìä Statistiques :
   ‚Ä¢ Fichiers : 158
   ‚Ä¢ Dossiers : 19
   ‚Ä¢ Taille totale : 12.40 MB


==================================================
FICHIER : tools\code_bundle_complet.txt
==================================================

--- START OF FILE LaboCore_Model_Conceptuel_Donnees.txt ---

+-------------------------+
| ETABLISSEMENT           |
|-------------------------|
| **id** (PK)             |
| nom                     |
| ville                   |
| ...                     |
+-------------------------+
      |
      | (1,n)
      |
+---- G√àRE ----+
| (1,1)        |
      |
+-------------------------+
| UTILISATEUR             |
|-------------------------|
| **id** (PK)             |
| #etablissement_id (FK)  |
| nom_utilisateur         |
| mot_de_passe            |
| role (admin/utilisateur)|
| email                   |
+-------------------------+

+-------------------------+       +-------------------------+       +-------------------------+
| ETABLISSEMENT           |-------| ARMOIRE                 |-------| OBJET                   |
+-------------------------+ (1,n) |-------------------------| (1,n) |-------------------------|
                            (1,1) | **id** (PK)             | (1,1) | **id** (PK)             |
                                  | #etablissement_id (FK)  |       | #etablissement_id (FK)  |
                                  | nom                     |       | #armoire_id (FK)        |
                                  +-------------------------+       | #categorie_id (FK)      |
                                                                    | nom                     |
                                                                    | quantite_physique       |
                                  +-------------------------+       | seuil                   |
                                  | CATEGORIE               |-------| en_commande             |
                                  |-------------------------| (1,n) | date_peremption         |
                                  | **id** (PK)             | (1,1) | traite                  |
                                  | #etablissement_id (FK)  |       | image_url               |
                                  | nom                     |       | fds_url                 |
                                  +-------------------------+       +-------------------------+

+-------------------------+       +-------------------------+       +-------------------------+
| UTILISATEUR             |-------| HISTORIQUE              |-------| OBJET                   |
+-------------------------+ (1,n) |-------------------------| (1,n) +-------------------------+
                            (1,1) | **id** (PK)             | (1,1)
                                  | #utilisateur_id (FK)    |
                                  | #objet_id (FK)          |
                                  | action                  |
                                  | details                 |
                                  | timestamp               |
                                  +-------------------------+

+-------------------------+       +-------------------------+       +-------------------------+
| UTILISATEUR             |-------| RESERVATION             |-------| OBJET                   |
+-------------------------+ (1,n) |-------------------------| (1,n) +-------------------------+
                            (1,1) | **id** (PK)             | (1,1)
                                  | #utilisateur_id (FK)    |
                                  | #objet_id (FK)          |
                                  | #kit_id (FK, nullable)  |
                                  | quantite_reservee       |
                                  | debut_reservation       |
                                  | fin_reservation         |
                                  | groupe_id               |
                                  +-------------------------+

+-------------------------+       +-------------------------+       +-------------------------+
| KIT                     |-------| KIT_OBJET (Association) |-------| OBJET                   |
|-------------------------| (1,n) |-------------------------| (1,n) |-------------------------|
| **id** (PK)             | (1,1) | **id** (PK)             | (1,1) |                         |
| #etablissement_id (FK)  |       | #kit_id (FK)            |       |                         |
| nom                     |       | #objet_id (FK)          |       |                         |
| description             |       | quantite                |       |                         |
+-------------------------+       +-------------------------+       +-------------------------+

+-------------------------+       +-------------------------+       +-------------------------+
| ETABLISSEMENT           |-------| BUDGET                  |-------| DEPENSE                 |
+-------------------------+ (1,n) |-------------------------| (1,n) |-------------------------|
                            (1,1) | **id** (PK)             | (1,1) | **id** (PK)             |
                                  | #etablissement_id (FK)  |       | #budget_id (FK)         |
                                  | annee                   |       | #fournisseur_id (FK, nullable)|
                                  | montant_initial         |       | contenu                 |
                                  | cloture                 |       | montant                 |
                                  +-------------------------+       | date_depense            |
                                                                    +-------------------------+

+-------------------------+
| FOURNISSEUR             |
|-------------------------|
| **id** (PK)             |
| #etablissement_id (FK)  |
| nom                     |
| ...                     |
+-------------------------+
--- END OF FILE LaboCore_Model_Conceptuel_Donnees.txt ---

--- START OF FILE README.md ---

# Gestion Mat√©riel Labo Coll√®ge et Lyc√©e (GMLCL)

**Version 1.0**

![Logo de l'application](https://raw.githubusercontent.com/crazypopperz/GestionLabo/main/static/logo.png)

## Description

GMLCL est une application web de gestion d'inventaire con√ßue sp√©cifiquement pour les laboratoires de sciences. Elle permet de suivre le stock de mat√©riel, de g√©rer les r√©servations, de suivre un budget et de recevoir des alertes automatiques.

Construite avec Flask, elle fonctionne comme un serveur local accessible sur le r√©seau de l'√©tablissement, sans n√©cessiter de connexion internet. Sa base de donn√©es SQLite la rend enti√®rement autonome et facile √† d√©ployer via un simple ex√©cutable.

### Mod√®le Freemium
- **Version Gratuite :** Acc√®s √† toutes les fonctionnalit√©s, mais l'inventaire est limit√© √† 50 objets uniques.
- **Version Pro :** D√©bloque un nombre illimit√© d'objets et la fonctionnalit√© de sauvegarde de la base de donn√©es.

## Technologies Utilis√©es

- **Backend :** Python 3, Flask, Waitress (serveur de production)
- **Base de Donn√©es :** SQLite 3
- **Frontend :** HTML5, CSS3, JavaScript
- **Packaging :** PyInstaller

## Installation (pour les d√©veloppeurs)

Ce guide est destin√© √† la mise en place d'un environnement de d√©veloppement. Pour une utilisation finale, veuillez utiliser l'ex√©cutable fourni (`GestionLabo.exe`).

1.  **Cloner le projet :**
    ```bash
    git clone https://github.com/crazypopperz/GestionLabo.git
    cd GestionLabo
    ```

2.  **Cr√©er et activer un environnement virtuel :**
    ```bash
    # Cr√©er l'environnement
    python -m venv venv
    # Activer sur Windows
    venv\Scripts\activate
    # Activer sur macOS/Linux
    source venv/bin/activate
    ```

3.  **Installer les d√©pendances :**
    ```bash
    pip install -r requirements.txt
    ```

## Lancement de l'application

### En Mode D√©veloppement
Ce mode active le d√©bogage et le rechargement automatique. Lancez l'application avec la commande suivante. Elle sera accessible √† `http://127.0.0.1:5000`.
```bash
python run.py
```

### En Mode Production (via l'ex√©cutable)
Double-cliquez sur le fichier `GestionLabo.exe`. Une console s'ouvrira, affichant les adresses de connexion pour l'administrateur et pour les autres utilisateurs du r√©seau.

## Cr√©ation de l'Ex√©cutable (Packaging)

L'application est configur√©e pour √™tre compil√©e avec PyInstaller en utilisant un fichier de sp√©cification (`.spec`) pour plus de fiabilit√©.

1.  **Installer les outils n√©cessaires :**
    ```bash
    pip install pyinstaller waitress
    ```

2.  **Lancer la compilation :**
    La configuration est enti√®rement g√©r√©e par le fichier `run.spec`. Ex√©cutez simplement :
    ```bash
    pyinstaller run.spec
    ```

3.  L'ex√©cutable final et ses d√©pendances se trouveront dans le dossier `dist/GestionLabo`.

## Structure du Projet

```
.
‚îú‚îÄ‚îÄ instance/
‚îÇ   ‚îî‚îÄ‚îÄ gestionlabo.db  # Base de donn√©es (cr√©√©e au premier lancement)
‚îú‚îÄ‚îÄ static/             # Fichiers CSS, JS, images
‚îú‚îÄ‚îÄ templates/          # Templates HTML Jinja2
‚îú‚îÄ‚îÄ views/              # Blueprints Flask (logique des routes)
‚îÇ   ‚îú‚îÄ‚îÄ admin.py
‚îÇ   ‚îú‚îÄ‚îÄ auth.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ app.py              # Factory de l'application Flask
‚îú‚îÄ‚îÄ config.py           # Configuration statique
‚îú‚îÄ‚îÄ db.py               # Initialisation de la base de donn√©es
‚îú‚îÄ‚îÄ run.py              # Lanceur pour le D√âVELOPPEMENT
‚îú‚îÄ‚îÄ run_production.py   # Lanceur pour la PRODUCTION (utilis√© par PyInstaller)
‚îú‚îÄ‚îÄ run.spec            # Fichier de configuration pour PyInstaller
‚îú‚îÄ‚îÄ requirements.txt    # D√©pendances Python
‚îî‚îÄ‚îÄ README.md           # Ce fichier
```

## Auteurs et Licence

- **Auteurs :** Yll Basha & Xavier De Baudry d'Asson
- **Licence :** [CC BY-NC-ND 4.0](https://creativecommons.org/licenses/by-nc-nd/4.0/)
--- END OF FILE README.md ---

--- START OF FILE api_pexels.txt ---

eXyUFwq2u2j0PdTD06ctisTuF577uGWasC6Wxz3cmzeffMAa6wCTK6gb
--- END OF FILE api_pexels.txt ---

--- START OF FILE app.py ---

# ============================================================
# FICHIER : app.py (Version Finale Valid√©e & S√©curis√©e)
# ============================================================
import os
import secrets
import logging
from logging.handlers import RotatingFileHandler
from datetime import date, datetime, timedelta
from flask import Flask, redirect, request, session, url_for, current_app, render_template
from flask_wtf.csrf import CSRFProtect
from flask_talisman import Talisman
from sqlalchemy.exc import SQLAlchemyError
from dotenv import load_dotenv

# Extensions (Cache & Rate Limit)
from extensions import limiter, cache

# Imports locaux
from db import db, Parametre, Armoire, Categorie, init_app as init_db_app
from utils import get_alerte_info, is_setup_needed, annee_scolaire_format, get_etablissement_params

# Imports des Blueprints
from views.auth import auth_bp
from views.inventaire import inventaire_bp
from views.admin import admin_bp
from views.main import main_bp
from views.api import api_bp

# Chargement .env
load_dotenv()

def configure_logging(app):
    """Configure les logs pour la production et le d√©veloppement."""
    if not app.debug and not app.testing:
        if not os.path.exists('logs'):
            os.mkdir('logs')
        file_handler = RotatingFileHandler('logs/app.log', maxBytes=10240, backupCount=10)
        file_handler.setFormatter(logging.Formatter(
            '%(asctime)s %(levelname)s: %(message)s [in %(pathname)s:%(lineno)d]'
        ))
        file_handler.setLevel(logging.INFO)
        app.logger.addHandler(file_handler)
        app.logger.setLevel(logging.INFO)
        app.logger.info('LabFlow startup')

def create_app():
    app = Flask(__name__)

    # ============================================================
    # 0. V√âRIFICATION ENVIRONNEMENT (FAIL FAST)
    # ============================================================
    is_production = os.environ.get('FLASK_ENV') == 'production'
    REQUIRED_VARS = ['DATABASE_URL', 'GMLCL_PRO_KEY']
    
    # En PROD, SECRET_KEY est obligatoire. En DEV, on peut s'en passer (voir plus bas).
    if is_production:
        REQUIRED_VARS.append('SECRET_KEY')

    missing_vars = [var for var in REQUIRED_VARS if not os.environ.get(var)]
    if missing_vars:
        raise RuntimeError(f"ERREUR CRITIQUE : Variables d'environnement manquantes : {', '.join(missing_vars)}")

    # ============================================================
    # 1. CONFIGURATION
    # ============================================================
    app.config.from_object('config') 

    # Secret Key (Fixe en DEV pour √©viter la d√©connexion au reload)
    secret_key = os.environ.get('SECRET_KEY')
    if not secret_key:
        # Cl√© fixe pour le d√©veloppement local uniquement
        secret_key = 'dev-key-stable-pour-eviter-deconnexion'
        if not is_production:
            print("‚ö†Ô∏è  MODE DEV : Utilisation d'une SECRET_KEY fixe par d√©faut.")
    app.config['SECRET_KEY'] = secret_key
    
    # Session
    app.config['PERMANENT_SESSION_LIFETIME'] = timedelta(days=30)

    # Database
    db_url = os.environ.get('DATABASE_URL')
    if db_url and db_url.startswith("postgres://"):
        db_url = db_url.replace("postgres://", "postgresql://", 1)
    app.config['SQLALCHEMY_DATABASE_URI'] = db_url
    app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False
    
    # S√©curit√© Upload (10 MB)
    app.config['MAX_CONTENT_LENGTH'] = 10 * 1024 * 1024 

    # Cache (SimpleCache par d√©faut, √©volutif vers Redis si besoin)
    app.config['CACHE_TYPE'] = 'SimpleCache'
    app.config['CACHE_DEFAULT_TIMEOUT'] = 300

    # S√©curit√© Cookies (Prod uniquement)
    if is_production:
        app.config['SESSION_COOKIE_HTTPONLY'] = True
        app.config['SESSION_COOKIE_SECURE'] = True
        app.config['SESSION_COOKIE_SAMESITE'] = 'Lax'
    
    if os.environ.get('FLASK_ENV') == 'testing':
        app.config['TESTING'] = True
        app.config['WTF_CSRF_ENABLED'] = False # D√©sactive CSRF pour faciliter les tests API
        app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///:memory:'
        logging.warning("‚ö†Ô∏è  MODE TESTING ACTIV√â : Base de donn√©es en m√©moire.")

    # ============================================================
    # 2. INITIALISATION DES EXTENSIONS
    # ============================================================
    init_db_app(app)
    CSRFProtect(app)
    limiter.init_app(app)
    cache.init_app(app)
    configure_logging(app)

    # ============================================================
    # 3. S√âCURIT√â HTTP (TALISMAN)
    # ============================================================
    if is_production:
        csp = {
            'default-src': "'self'",
            'script-src': [
                "'self'", 
                "'unsafe-inline'", # N√©cessaire tant qu'on n'a pas de syst√®me de Nonce
                "cdn.jsdelivr.net"
            ],
            'style-src': [
                "'self'", 
                "'unsafe-inline'",
                "cdn.jsdelivr.net",
                "fonts.googleapis.com",
                "fonts.gstatic.com"
            ],
            'font-src': [
                "'self'", 
                "data:", 
                "cdn.jsdelivr.net", 
                "fonts.gstatic.com"
            ],
            'img-src': [
                "'self'", 
                "data:",
                "blob:",
                "https:",
                "images.pexels.com",
                "*.pexels.com"
            ],
            'connect-src': [
                "'self'",
                "cdn.jsdelivr.net"
            ]
        }

        Talisman(app, 
            force_https=True,
            content_security_policy=csp,
            strict_transport_security=True,
            session_cookie_secure=True,
            frame_options='DENY' 
        )

    # ============================================================
    # 4. BLUEPRINTS
    # ============================================================
    app.register_blueprint(auth_bp)
    app.register_blueprint(inventaire_bp)
    app.register_blueprint(admin_bp)
    app.register_blueprint(main_bp)
    app.register_blueprint(api_bp)

    # ============================================================
    # 5. GESTION ERREURS
    # ============================================================
    @app.errorhandler(404)
    def not_found_error(error):
        return render_template('errors/404.html'), 404

    @app.errorhandler(500)
    def internal_error(error):
        db.session.rollback() # CRITIQUE : Lib√®re la transaction bloqu√©e
        app.logger.error(f"Server Error: {error}")
        return render_template('errors/500.html'), 500

    @app.errorhandler(429)
    def ratelimit_handler(e):
        if request.is_json or request.path.startswith('/api/'):
            return {"error": "Trop de requ√™tes. Veuillez patienter."}, 429
        return render_template("errors/429.html"), 429

    # ============================================================
    # 6. FILTRES JINJA
    # ============================================================
    @app.template_filter('strftime')
    def format_datetime_filter(value, fmt='%d/%m/%Y %H:%M'):
        if isinstance(value, str):
            try: value = datetime.fromisoformat(value)
            except (ValueError, TypeError): return value
        if isinstance(value, (datetime, date)): return value.strftime(fmt)
        return value

    @app.template_filter('strftime_fr')
    def format_datetime_fr_filter(value, fmt):
        if isinstance(value, str):
            try: value = datetime.fromisoformat(value)
            except (ValueError, TypeError): return value
        if not isinstance(value, (datetime, date)): return value
        
        jours = ["lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi", "dimanche"]
        mois = ["janvier", "f√©vrier", "mars", "avril", "mai", "juin", "juillet", "ao√ªt", "septembre", "octobre", "novembre", "d√©cembre"]
        
        # Note: weekday() renvoie 0 pour lundi, 6 pour dimanche
        format_fr = fmt.replace('%A', jours[value.weekday()].capitalize())
        format_fr = format_fr.replace('%B', mois[value.month - 1])
        return value.strftime(format_fr)

    app.jinja_env.filters['annee_scolaire'] = annee_scolaire_format

    # ============================================================
    # 7. CONTEXT PROCESSORS (GLOBAL DATA)
    # ============================================================
    @app.before_request
    def check_setup():
        # Redirection vers le setup si aucun √©tablissement n'existe
        if is_setup_needed(current_app) and request.endpoint not in ['auth.setup', 'static']:
            return redirect(url_for('auth.setup'))

    @app.context_processor
    def inject_global_data():
        context = {
            'all_armoires': [], 'all_categories': [], 'alertes_total': 0,
            'licence': {'statut': 'FREE', 'is_pro': False, 'instance_id': 'N/A'},
            'nom_etablissement': None
        }
        
        etablissement_id = session.get('etablissement_id')
        if not etablissement_id: return context
            
        try:
            # 1. Donn√©es dynamiques (Menu)
            context['all_armoires'] = db.session.execute(
                db.select(Armoire).filter_by(etablissement_id=etablissement_id).order_by(Armoire.nom)
            ).scalars().all()
            
            context['all_categories'] = db.session.execute(
                db.select(Categorie).filter_by(etablissement_id=etablissement_id).order_by(Categorie.nom)
            ).scalars().all()
            
            # 2. Alertes
            alert_info = get_alerte_info()
            context['alertes_total'] = alert_info.get('alertes_total', 0)
            
            # 3. Param√®tres & Licence
            params_dict = get_etablissement_params(etablissement_id)
            
            if params_dict.get('licence_statut') == 'PRO':
                context['licence']['statut'] = 'PRO'
                context['licence']['is_pro'] = True
            
            if params_dict.get('instance_id'):
                context['licence']['instance_id'] = params_dict.get('instance_id')

            context['nom_etablissement'] = session.get('nom_etablissement')
            
            return context
            
        except SQLAlchemyError as e:
            # Log l'erreur mais ne plante pas l'application
            current_app.logger.error(f"Erreur context_processor (DB potentiellement inaccessible) : {e}")
            return context
        except Exception as e:
            current_app.logger.error(f"Erreur inattendue context_processor : {e}")
            return context
            
    return app

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000, debug=True)
--- END OF FILE app.py ---

--- START OF FILE backup.sql ---

--
-- PostgreSQL database dump
--

\restrict JmYhn2ScGNik79RnDLMzbUmzMuzvxfIo0sywinRcHxJehVfssduKAPe9wiGnqgm

-- Dumped from database version 18.0 (Debian 18.0-1.pgdg13+3)
-- Dumped by pg_dump version 18.0 (Debian 18.0-1.pgdg13+3)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: armoires; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.armoires (
    id integer NOT NULL,
    nom character varying NOT NULL,
    etablissement_id integer NOT NULL
);


ALTER TABLE public.armoires OWNER TO postgres;

--
-- Name: armoires_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.armoires_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.armoires_id_seq OWNER TO postgres;

--
-- Name: armoires_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.armoires_id_seq OWNED BY public.armoires.id;


--
-- Name: budgets; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.budgets (
    id integer NOT NULL,
    annee integer NOT NULL,
    montant_initial double precision NOT NULL,
    cloture boolean NOT NULL,
    etablissement_id integer NOT NULL
);


ALTER TABLE public.budgets OWNER TO postgres;

--
-- Name: budgets_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.budgets_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.budgets_id_seq OWNER TO postgres;

--
-- Name: budgets_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.budgets_id_seq OWNED BY public.budgets.id;


--
-- Name: categories; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.categories (
    id integer NOT NULL,
    nom character varying NOT NULL,
    etablissement_id integer NOT NULL
);


ALTER TABLE public.categories OWNER TO postgres;

--
-- Name: categories_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.categories_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.categories_id_seq OWNER TO postgres;

--
-- Name: categories_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.categories_id_seq OWNED BY public.categories.id;


--
-- Name: depenses; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.depenses (
    id integer NOT NULL,
    budget_id integer NOT NULL,
    fournisseur_id integer,
    contenu text NOT NULL,
    montant double precision NOT NULL,
    date_depense date NOT NULL,
    est_bon_achat boolean NOT NULL,
    etablissement_id integer NOT NULL
);


ALTER TABLE public.depenses OWNER TO postgres;

--
-- Name: depenses_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.depenses_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.depenses_id_seq OWNER TO postgres;

--
-- Name: depenses_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.depenses_id_seq OWNED BY public.depenses.id;


--
-- Name: echeances; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.echeances (
    id integer NOT NULL,
    intitule text NOT NULL,
    date_echeance date NOT NULL,
    details text,
    traite integer NOT NULL,
    etablissement_id integer NOT NULL
);


ALTER TABLE public.echeances OWNER TO postgres;

--
-- Name: echeances_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.echeances_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.echeances_id_seq OWNER TO postgres;

--
-- Name: echeances_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.echeances_id_seq OWNED BY public.echeances.id;


--
-- Name: etablissements; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.etablissements (
    id integer NOT NULL,
    nom character varying NOT NULL,
    ville character varying
);


ALTER TABLE public.etablissements OWNER TO postgres;

--
-- Name: etablissements_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.etablissements_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.etablissements_id_seq OWNER TO postgres;

--
-- Name: etablissements_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.etablissements_id_seq OWNED BY public.etablissements.id;


--
-- Name: fournisseurs; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.fournisseurs (
    id integer NOT NULL,
    nom character varying NOT NULL,
    site_web character varying,
    logo character varying,
    etablissement_id integer NOT NULL
);


ALTER TABLE public.fournisseurs OWNER TO postgres;

--
-- Name: fournisseurs_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.fournisseurs_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.fournisseurs_id_seq OWNER TO postgres;

--
-- Name: fournisseurs_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.fournisseurs_id_seq OWNED BY public.fournisseurs.id;


--
-- Name: historique; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.historique (
    id integer NOT NULL,
    objet_id integer NOT NULL,
    utilisateur_id integer NOT NULL,
    action character varying NOT NULL,
    details text,
    "timestamp" timestamp without time zone NOT NULL,
    etablissement_id integer NOT NULL
);


ALTER TABLE public.historique OWNER TO postgres;

--
-- Name: historique_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.historique_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.historique_id_seq OWNER TO postgres;

--
-- Name: historique_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.historique_id_seq OWNED BY public.historique.id;


--
-- Name: kit_objets; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.kit_objets (
    id integer NOT NULL,
    kit_id integer NOT NULL,
    objet_id integer NOT NULL,
    quantite integer NOT NULL,
    etablissement_id integer NOT NULL
);


ALTER TABLE public.kit_objets OWNER TO postgres;

--
-- Name: kit_objets_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.kit_objets_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.kit_objets_id_seq OWNER TO postgres;

--
-- Name: kit_objets_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.kit_objets_id_seq OWNED BY public.kit_objets.id;


--
-- Name: kits; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.kits (
    id integer NOT NULL,
    nom character varying NOT NULL,
    description text,
    etablissement_id integer NOT NULL
);


ALTER TABLE public.kits OWNER TO postgres;

--
-- Name: kits_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.kits_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.kits_id_seq OWNER TO postgres;

--
-- Name: kits_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.kits_id_seq OWNED BY public.kits.id;


--
-- Name: objets; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.objets (
    id integer NOT NULL,
    nom character varying NOT NULL,
    quantite_physique integer NOT NULL,
    seuil integer NOT NULL,
    armoire_id integer NOT NULL,
    categorie_id integer NOT NULL,
    en_commande integer NOT NULL,
    date_peremption character varying,
    traite integer NOT NULL,
    image_url character varying,
    fds_url character varying,
    etablissement_id integer NOT NULL
);


ALTER TABLE public.objets OWNER TO postgres;

--
-- Name: objets_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.objets_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.objets_id_seq OWNER TO postgres;

--
-- Name: objets_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.objets_id_seq OWNED BY public.objets.id;


--
-- Name: parametres; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.parametres (
    id integer NOT NULL,
    cle character varying NOT NULL,
    valeur character varying,
    etablissement_id integer NOT NULL
);


ALTER TABLE public.parametres OWNER TO postgres;

--
-- Name: parametres_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.parametres_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.parametres_id_seq OWNER TO postgres;

--
-- Name: parametres_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.parametres_id_seq OWNED BY public.parametres.id;


--
-- Name: reservations; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.reservations (
    id integer NOT NULL,
    objet_id integer NOT NULL,
    utilisateur_id integer NOT NULL,
    quantite_reservee integer NOT NULL,
    debut_reservation timestamp without time zone NOT NULL,
    fin_reservation timestamp without time zone NOT NULL,
    groupe_id character varying,
    kit_id integer,
    etablissement_id integer NOT NULL
);


ALTER TABLE public.reservations OWNER TO postgres;

--
-- Name: reservations_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.reservations_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.reservations_id_seq OWNER TO postgres;

--
-- Name: reservations_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.reservations_id_seq OWNED BY public.reservations.id;


--
-- Name: utilisateurs; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.utilisateurs (
    id integer NOT NULL,
    nom_utilisateur character varying NOT NULL,
    mot_de_passe character varying NOT NULL,
    role character varying NOT NULL,
    email character varying,
    etablissement_id integer NOT NULL
);


ALTER TABLE public.utilisateurs OWNER TO postgres;

--
-- Name: utilisateurs_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.utilisateurs_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.utilisateurs_id_seq OWNER TO postgres;

--
-- Name: utilisateurs_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.utilisateurs_id_seq OWNED BY public.utilisateurs.id;


--
-- Name: armoires id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.armoires ALTER COLUMN id SET DEFAULT nextval('public.armoires_id_seq'::regclass);


--
-- Name: budgets id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.budgets ALTER COLUMN id SET DEFAULT nextval('public.budgets_id_seq'::regclass);


--
-- Name: categories id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.categories ALTER COLUMN id SET DEFAULT nextval('public.categories_id_seq'::regclass);


--
-- Name: depenses id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.depenses ALTER COLUMN id SET DEFAULT nextval('public.depenses_id_seq'::regclass);


--
-- Name: echeances id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.echeances ALTER COLUMN id SET DEFAULT nextval('public.echeances_id_seq'::regclass);


--
-- Name: etablissements id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.etablissements ALTER COLUMN id SET DEFAULT nextval('public.etablissements_id_seq'::regclass);


--
-- Name: fournisseurs id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.fournisseurs ALTER COLUMN id SET DEFAULT nextval('public.fournisseurs_id_seq'::regclass);


--
-- Name: historique id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.historique ALTER COLUMN id SET DEFAULT nextval('public.historique_id_seq'::regclass);


--
-- Name: kit_objets id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kit_objets ALTER COLUMN id SET DEFAULT nextval('public.kit_objets_id_seq'::regclass);


--
-- Name: kits id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kits ALTER COLUMN id SET DEFAULT nextval('public.kits_id_seq'::regclass);


--
-- Name: objets id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.objets ALTER COLUMN id SET DEFAULT nextval('public.objets_id_seq'::regclass);


--
-- Name: parametres id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.parametres ALTER COLUMN id SET DEFAULT nextval('public.parametres_id_seq'::regclass);


--
-- Name: reservations id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reservations ALTER COLUMN id SET DEFAULT nextval('public.reservations_id_seq'::regclass);


--
-- Name: utilisateurs id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.utilisateurs ALTER COLUMN id SET DEFAULT nextval('public.utilisateurs_id_seq'::regclass);


--
-- Data for Name: armoires; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.armoires (id, nom, etablissement_id) FROM stdin;
1	Armoire 01	1
2	Armoire 02	1
\.


--
-- Data for Name: budgets; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.budgets (id, annee, montant_initial, cloture, etablissement_id) FROM stdin;
1	2025	650	f	1
\.


--
-- Data for Name: categories; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.categories (id, nom, etablissement_id) FROM stdin;
1	Verrerie	1
2	Dissection	1
\.


--
-- Data for Name: depenses; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.depenses (id, budget_id, fournisseur_id, contenu, montant, date_depense, est_bon_achat, etablissement_id) FROM stdin;
1	1	\N	kiwis	3.99	2025-10-30	t	1
\.


--
-- Data for Name: echeances; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.echeances (id, intitule, date_echeance, details, traite, etablissement_id) FROM stdin;
1	Pr√©voire budget 2026-2027	2025-11-03	None	0	1
\.


--
-- Data for Name: etablissements; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.etablissements (id, nom, ville) FROM stdin;
1	Coll√®ge Gabriel Piern√©	\N
\.


--
-- Data for Name: fournisseurs; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.fournisseurs (id, nom, site_web, logo, etablissement_id) FROM stdin;
1	JEULIN	https://www.jeulin.fr	https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRsAMTnIYkUUgVL6b9ZFfzxvvgP0SqcSf70Wg&s	1
\.


--
-- Data for Name: historique; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.historique (id, objet_id, utilisateur_id, action, details, "timestamp", etablissement_id) FROM stdin;
\.


--
-- Data for Name: kit_objets; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.kit_objets (id, kit_id, objet_id, quantite, etablissement_id) FROM stdin;
1	1	1	2	1
\.


--
-- Data for Name: kits; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.kits (id, nom, description, etablissement_id) FROM stdin;
1	Essai		1
\.


--
-- Data for Name: objets; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.objets (id, nom, quantite_physique, seuil, armoire_id, categorie_id, en_commande, date_peremption, traite, image_url, fds_url, etablissement_id) FROM stdin;
1	B√©cher 110 mL	10	5	1	1	0	\N	0	https://www.chemscience.com/assets/product-images/1659989328259_229_203_07_(1).jpg	\N	1
2	Scalpel	20	10	2	2	0	\N	0	https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcRNmQnz3ZorDKBRIi3teE7rdRY39c3dZ2ilmRQDWq7g35TLjGUWHFUgTUdfn0KLZivekJoyKUQajz4UwOc5ti_QfkbtWx5ErXBAiS-bS0v5clyPvN9GgS6fEvO3UorjasJV7EjHFg&usqp=CAc	\N	1
\.


--
-- Data for Name: parametres; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.parametres (id, cle, valeur, etablissement_id) FROM stdin;
1	instance_id	cb035860-8238-4641-bf08-d3bae6537dd7	1
2	licence_statut	FREE	1
3	items_per_page	10	1
\.


--
-- Data for Name: reservations; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.reservations (id, objet_id, utilisateur_id, quantite_reservee, debut_reservation, fin_reservation, groupe_id, kit_id, etablissement_id) FROM stdin;
\.


--
-- Data for Name: utilisateurs; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.utilisateurs (id, nom_utilisateur, mot_de_passe, role, email, etablissement_id) FROM stdin;
1	Admin	scrypt:32768:8:1$k98JNWyEoOxKt20l$9912b2091d6f8cf318be4c90370e093d79d0f761181924fd436fcdd35758a1b455a5918b5852f5d5361b7a853be2090992213203d6499be57e01eb318f68c951	admin	xdebaudry@gmail.com	1
\.


--
-- Name: armoires_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.armoires_id_seq', 2, true);


--
-- Name: budgets_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.budgets_id_seq', 1, true);


--
-- Name: categories_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.categories_id_seq', 2, true);


--
-- Name: depenses_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.depenses_id_seq', 1, true);


--
-- Name: echeances_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.echeances_id_seq', 1, true);


--
-- Name: etablissements_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.etablissements_id_seq', 1, true);


--
-- Name: fournisseurs_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.fournisseurs_id_seq', 1, true);


--
-- Name: historique_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.historique_id_seq', 1, false);


--
-- Name: kit_objets_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.kit_objets_id_seq', 2, true);


--
-- Name: kits_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.kits_id_seq', 1, true);


--
-- Name: objets_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.objets_id_seq', 2, true);


--
-- Name: parametres_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.parametres_id_seq', 3, true);


--
-- Name: reservations_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.reservations_id_seq', 4, true);


--
-- Name: utilisateurs_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.utilisateurs_id_seq', 1, true);


--
-- Name: budgets _annee_etablissement_uc; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.budgets
    ADD CONSTRAINT _annee_etablissement_uc UNIQUE (annee, etablissement_id);


--
-- Name: armoires armoires_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.armoires
    ADD CONSTRAINT armoires_pkey PRIMARY KEY (id);


--
-- Name: budgets budgets_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.budgets
    ADD CONSTRAINT budgets_pkey PRIMARY KEY (id);


--
-- Name: categories categories_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.categories
    ADD CONSTRAINT categories_pkey PRIMARY KEY (id);


--
-- Name: depenses depenses_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.depenses
    ADD CONSTRAINT depenses_pkey PRIMARY KEY (id);


--
-- Name: echeances echeances_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.echeances
    ADD CONSTRAINT echeances_pkey PRIMARY KEY (id);


--
-- Name: etablissements etablissements_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.etablissements
    ADD CONSTRAINT etablissements_pkey PRIMARY KEY (id);


--
-- Name: fournisseurs fournisseurs_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.fournisseurs
    ADD CONSTRAINT fournisseurs_pkey PRIMARY KEY (id);


--
-- Name: historique historique_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.historique
    ADD CONSTRAINT historique_pkey PRIMARY KEY (id);


--
-- Name: kit_objets kit_objets_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kit_objets
    ADD CONSTRAINT kit_objets_pkey PRIMARY KEY (id);


--
-- Name: kits kits_nom_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kits
    ADD CONSTRAINT kits_nom_key UNIQUE (nom);


--
-- Name: kits kits_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kits
    ADD CONSTRAINT kits_pkey PRIMARY KEY (id);


--
-- Name: objets objets_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.objets
    ADD CONSTRAINT objets_pkey PRIMARY KEY (id);


--
-- Name: parametres parametres_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.parametres
    ADD CONSTRAINT parametres_pkey PRIMARY KEY (id);


--
-- Name: reservations reservations_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reservations
    ADD CONSTRAINT reservations_pkey PRIMARY KEY (id);


--
-- Name: utilisateurs utilisateurs_nom_utilisateur_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.utilisateurs
    ADD CONSTRAINT utilisateurs_nom_utilisateur_key UNIQUE (nom_utilisateur);


--
-- Name: utilisateurs utilisateurs_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.utilisateurs
    ADD CONSTRAINT utilisateurs_pkey PRIMARY KEY (id);


--
-- Name: armoires armoires_etablissement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.armoires
    ADD CONSTRAINT armoires_etablissement_id_fkey FOREIGN KEY (etablissement_id) REFERENCES public.etablissements(id);


--
-- Name: budgets budgets_etablissement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.budgets
    ADD CONSTRAINT budgets_etablissement_id_fkey FOREIGN KEY (etablissement_id) REFERENCES public.etablissements(id);


--
-- Name: categories categories_etablissement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.categories
    ADD CONSTRAINT categories_etablissement_id_fkey FOREIGN KEY (etablissement_id) REFERENCES public.etablissements(id);


--
-- Name: depenses depenses_budget_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.depenses
    ADD CONSTRAINT depenses_budget_id_fkey FOREIGN KEY (budget_id) REFERENCES public.budgets(id);


--
-- Name: depenses depenses_etablissement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.depenses
    ADD CONSTRAINT depenses_etablissement_id_fkey FOREIGN KEY (etablissement_id) REFERENCES public.etablissements(id);


--
-- Name: depenses depenses_fournisseur_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.depenses
    ADD CONSTRAINT depenses_fournisseur_id_fkey FOREIGN KEY (fournisseur_id) REFERENCES public.fournisseurs(id);


--
-- Name: echeances echeances_etablissement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.echeances
    ADD CONSTRAINT echeances_etablissement_id_fkey FOREIGN KEY (etablissement_id) REFERENCES public.etablissements(id);


--
-- Name: fournisseurs fournisseurs_etablissement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.fournisseurs
    ADD CONSTRAINT fournisseurs_etablissement_id_fkey FOREIGN KEY (etablissement_id) REFERENCES public.etablissements(id);


--
-- Name: historique historique_etablissement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.historique
    ADD CONSTRAINT historique_etablissement_id_fkey FOREIGN KEY (etablissement_id) REFERENCES public.etablissements(id);


--
-- Name: historique historique_objet_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.historique
    ADD CONSTRAINT historique_objet_id_fkey FOREIGN KEY (objet_id) REFERENCES public.objets(id) ON DELETE CASCADE;


--
-- Name: historique historique_utilisateur_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.historique
    ADD CONSTRAINT historique_utilisateur_id_fkey FOREIGN KEY (utilisateur_id) REFERENCES public.utilisateurs(id) ON DELETE CASCADE;


--
-- Name: kit_objets kit_objets_etablissement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kit_objets
    ADD CONSTRAINT kit_objets_etablissement_id_fkey FOREIGN KEY (etablissement_id) REFERENCES public.etablissements(id);


--
-- Name: kit_objets kit_objets_kit_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kit_objets
    ADD CONSTRAINT kit_objets_kit_id_fkey FOREIGN KEY (kit_id) REFERENCES public.kits(id) ON DELETE CASCADE;


--
-- Name: kit_objets kit_objets_objet_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kit_objets
    ADD CONSTRAINT kit_objets_objet_id_fkey FOREIGN KEY (objet_id) REFERENCES public.objets(id) ON DELETE CASCADE;


--
-- Name: kits kits_etablissement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kits
    ADD CONSTRAINT kits_etablissement_id_fkey FOREIGN KEY (etablissement_id) REFERENCES public.etablissements(id);


--
-- Name: objets objets_armoire_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.objets
    ADD CONSTRAINT objets_armoire_id_fkey FOREIGN KEY (armoire_id) REFERENCES public.armoires(id);


--
-- Name: objets objets_categorie_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.objets
    ADD CONSTRAINT objets_categorie_id_fkey FOREIGN KEY (categorie_id) REFERENCES public.categories(id);


--
-- Name: objets objets_etablissement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.objets
    ADD CONSTRAINT objets_etablissement_id_fkey FOREIGN KEY (etablissement_id) REFERENCES public.etablissements(id);


--
-- Name: parametres parametres_etablissement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.parametres
    ADD CONSTRAINT parametres_etablissement_id_fkey FOREIGN KEY (etablissement_id) REFERENCES public.etablissements(id);


--
-- Name: reservations reservations_etablissement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reservations
    ADD CONSTRAINT reservations_etablissement_id_fkey FOREIGN KEY (etablissement_id) REFERENCES public.etablissements(id);


--
-- Name: reservations reservations_kit_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reservations
    ADD CONSTRAINT reservations_kit_id_fkey FOREIGN KEY (kit_id) REFERENCES public.kits(id);


--
-- Name: reservations reservations_objet_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reservations
    ADD CONSTRAINT reservations_objet_id_fkey FOREIGN KEY (objet_id) REFERENCES public.objets(id);


--
-- Name: reservations reservations_utilisateur_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reservations
    ADD CONSTRAINT reservations_utilisateur_id_fkey FOREIGN KEY (utilisateur_id) REFERENCES public.utilisateurs(id);


--
-- Name: utilisateurs utilisateurs_etablissement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.utilisateurs
    ADD CONSTRAINT utilisateurs_etablissement_id_fkey FOREIGN KEY (etablissement_id) REFERENCES public.etablissements(id);


--
-- PostgreSQL database dump complete
--

\unrestrict JmYhn2ScGNik79RnDLMzbUmzMuzvxfIo0sywinRcHxJehVfssduKAPe9wiGnqgm


--- END OF FILE backup.sql ---

--- START OF FILE config.py ---

ITEMS_PER_PAGE = 10
--- END OF FILE config.py ---

--- START OF FILE db.py ---

import uuid
from datetime import datetime
from flask_sqlalchemy import SQLAlchemy
from sqlalchemy.sql import func
from flask_login import UserMixin

db = SQLAlchemy()

def init_app(app):
    db.init_app(app)
    # La cr√©ation des tables se fait via reset_db.py

# ============================================================
# 1. MOD√àLES DE BASE (Etablissement & Utilisateur)
# ============================================================

class Etablissement(db.Model):
    __tablename__ = 'etablissements'
    id = db.Column(db.Integer, primary_key=True)
    nom = db.Column(db.String(100), nullable=False)
    code_invitation = db.Column(db.String(20), unique=True)
    
    # Relations compl√®tes (Bidirectionnelles)
    utilisateurs = db.relationship('Utilisateur', backref='etablissement', lazy=True)
    objets = db.relationship('Objet', backref='etablissement', lazy=True)
    kits = db.relationship('Kit', backref='etablissement', lazy=True)
    armoires = db.relationship('Armoire', backref='etablissement', lazy=True)
    categories = db.relationship('Categorie', backref='etablissement', lazy=True)

class Utilisateur(UserMixin, db.Model):
    __tablename__ = 'utilisateurs'
    id = db.Column(db.Integer, primary_key=True)
    nom_utilisateur = db.Column(db.String(150), nullable=False)
    email = db.Column(db.String(150))
    mot_de_passe = db.Column(db.String(255), nullable=False) # Hash bcrypt/scrypt
    role = db.Column(db.String(50), default='utilisateur')
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)

# ============================================================
# 2. GESTION DU MAT√âRIEL (Objets & Kits)
# ============================================================

class Armoire(db.Model):
    __tablename__ = 'armoires'
    id = db.Column(db.Integer, primary_key=True)
    nom = db.Column(db.String(100), nullable=False)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    objets = db.relationship('Objet', back_populates='armoire')

class Categorie(db.Model):
    __tablename__ = 'categories'
    id = db.Column(db.Integer, primary_key=True)
    nom = db.Column(db.String(100), nullable=False)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    objets = db.relationship('Objet', back_populates='categorie')

class Objet(db.Model):
    __tablename__ = 'objets'
    id = db.Column(db.Integer, primary_key=True)
    nom = db.Column(db.String(100), nullable=False)
    quantite_physique = db.Column(db.Integer, default=0)
    seuil = db.Column(db.Integer, default=0)
    date_peremption = db.Column(db.Date, nullable=True)
    image_url = db.Column(db.String(255), nullable=True)
    fds_url = db.Column(db.String(255), nullable=True)
    
    # FK
    armoire_id = db.Column(db.Integer, db.ForeignKey('armoires.id'))
    categorie_id = db.Column(db.Integer, db.ForeignKey('categories.id'))
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    
    # Relations
    armoire = db.relationship('Armoire', back_populates='objets')
    categorie = db.relationship('Categorie', back_populates='objets')
    
    # Champs de gestion
    en_commande = db.Column(db.Integer, default=0) 
    traite = db.Column(db.Integer, default=0)

    __table_args__ = (
        db.Index('idx_objets_etablissement_categorie', 'etablissement_id', 'categorie_id'),
    )

class Kit(db.Model):
    __tablename__ = 'kits'
    id = db.Column(db.Integer, primary_key=True)
    nom = db.Column(db.String(100), nullable=False)
    description = db.Column(db.Text)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    
    # Relation vers la table de liaison
    objets_assoc = db.relationship("KitObjet", back_populates="kit", cascade="all, delete-orphan")

class KitObjet(db.Model):
    """Table de liaison Kit <-> Objet (kit_composants)"""
    __tablename__ = 'kit_composants'

    id = db.Column(db.Integer, primary_key=True, autoincrement=True)
    
    # Cl√©s √©trang√®res
    kit_id = db.Column(db.Integer, db.ForeignKey('kits.id', ondelete='CASCADE'), nullable=False)
    objet_id = db.Column(db.Integer, db.ForeignKey('objets.id', ondelete='RESTRICT'), nullable=False)
    
    # Donn√©es
    quantite = db.Column(db.Integer, nullable=False)
    date_creation = db.Column(db.DateTime(timezone=True), server_default=func.current_timestamp())
    
    # SaaS
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)

    # Relations
    kit = db.relationship("Kit", back_populates="objets_assoc")
    objet = db.relationship("Objet")

    __table_args__ = (
        db.UniqueConstraint('kit_id', 'objet_id', name='_kit_objet_uc'),
        db.CheckConstraint('quantite > 0', name='check_quantite_positive'),
        db.Index('idx_kit_composants_kit', 'kit_id'),
        db.Index('idx_kit_composants_objet', 'objet_id'),
    )

# ============================================================
# 3. SYST√àME DE R√âSERVATION & PANIER (NOUVEAU)
# ============================================================

class Panier(db.Model):
    __tablename__ = 'paniers'
    
    # UUID stock√© en String(36) pour compatibilit√© maximale (SQLite/Postgres)
    id = db.Column(db.String(36), primary_key=True, default=lambda: str(uuid.uuid4()))
    id_utilisateur = db.Column(db.Integer, db.ForeignKey('utilisateurs.id', ondelete='CASCADE'), nullable=False)
    date_creation = db.Column(db.DateTime(timezone=True), server_default=func.current_timestamp())
    date_expiration = db.Column(db.DateTime(timezone=True), nullable=False)
    statut = db.Column(db.String(20), default='actif') # actif, valid√©, expir√©
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)

    items = db.relationship("PanierItem", back_populates="panier", cascade="all, delete-orphan")
    
    __table_args__ = (
        db.Index('idx_paniers_utilisateur', 'id_utilisateur'),
        db.Index('idx_paniers_expiration', 'date_expiration'),
    )

class PanierItem(db.Model):
    __tablename__ = 'panier_items'
    
    id = db.Column(db.Integer, primary_key=True, autoincrement=True)
    id_panier = db.Column(db.String(36), db.ForeignKey('paniers.id', ondelete='CASCADE'), nullable=False)
    
    type = db.Column(db.String(10), nullable=False) # 'objet' ou 'kit'
    id_item = db.Column(db.Integer, nullable=False) # ID de l'objet ou du kit
    quantite = db.Column(db.Integer, nullable=False)
    
    # Cr√©neau
    date_reservation = db.Column(db.Date, nullable=False)
    heure_debut = db.Column(db.String(5), nullable=False)
    heure_fin = db.Column(db.String(5), nullable=False)
    
    date_ajout = db.Column(db.DateTime(timezone=True), server_default=func.current_timestamp())

    panier = db.relationship("Panier", back_populates="items")
    
    __table_args__ = (
        db.CheckConstraint('quantite > 0', name='check_panier_qte_positive'),
        db.Index('idx_panier_items_panier', 'id_panier'),
    )

class Reservation(db.Model):
    __tablename__ = 'reservations'
    id = db.Column(db.Integer, primary_key=True)
    
    utilisateur_id = db.Column(db.Integer, db.ForeignKey('utilisateurs.id'), nullable=False)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    
    # Quoi (Objet OU Kit) - XOR Logic
    objet_id = db.Column(db.Integer, db.ForeignKey('objets.id'), nullable=True)
    kit_id = db.Column(db.Integer, db.ForeignKey('kits.id'), nullable=True)
    
    # D√©tails
    quantite_reservee = db.Column(db.Integer, nullable=False)
    debut_reservation = db.Column(db.DateTime, nullable=False)
    fin_reservation = db.Column(db.DateTime, nullable=False)
    
    # Groupement et Statut
    groupe_id = db.Column(db.String(36), nullable=False, index=True)
    statut = db.Column(db.String(20), default='confirm√©e') # en_attente, confirm√©e, annul√©e
    
    # Tra√ßabilit√©
    date_creation = db.Column(db.DateTime(timezone=True), server_default=func.current_timestamp())
    date_modification = db.Column(db.DateTime(timezone=True), onupdate=func.current_timestamp())

    # Relations
    objet = db.relationship('Objet')
    kit = db.relationship('Kit')
    utilisateur = db.relationship('Utilisateur')

    __table_args__ = (
        # Contrainte XOR : Soit objet_id, soit kit_id, mais pas les deux (ni aucun)
        db.CheckConstraint(
            '(objet_id IS NOT NULL AND kit_id IS NULL) OR (objet_id IS NULL AND kit_id IS NOT NULL)',
            name='check_objet_ou_kit'
        ),
        db.Index('idx_reservations_groupe', 'groupe_id'),
        db.Index('idx_reservations_statut', 'statut'),
        db.Index('idx_reservations_dates', 'debut_reservation', 'fin_reservation'),
        db.Index('idx_reservations_etablissement_statut', 'etablissement_id', 'statut'),
    )

# ============================================================
# 4. AUDIT & LOGS
# ============================================================

class AuditLog(db.Model):
    __tablename__ = 'audit_log'
    
    id = db.Column(db.Integer, primary_key=True, autoincrement=True)
    timestamp = db.Column(db.DateTime(timezone=True), server_default=func.current_timestamp())
    id_utilisateur = db.Column(db.Integer, db.ForeignKey('utilisateurs.id', ondelete='SET NULL'), nullable=True)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    
    action = db.Column(db.String(50), nullable=False)
    table_cible = db.Column(db.String(50), nullable=False)
    id_enregistrement = db.Column(db.String(50), nullable=True)
    
    details = db.Column(db.Text, nullable=True)
    ip_address = db.Column(db.String(45), nullable=True)
    
    utilisateur = db.relationship("Utilisateur")

    __table_args__ = (
        db.Index('idx_audit_timestamp', 'timestamp'),
        db.Index('idx_audit_utilisateur', 'id_utilisateur'),
    )

class Historique(db.Model):
    """
    DEPRECATED: Utilisez AuditLog pour les nouveaux enregistrements.
    Cette table est conserv√©e pour les donn√©es historiques existantes.
    """
    __tablename__ = 'historique'
    id = db.Column(db.Integer, primary_key=True)
    objet_id = db.Column(db.Integer, nullable=True)
    utilisateur_id = db.Column(db.Integer, db.ForeignKey('utilisateurs.id'))
    action = db.Column(db.String(50), nullable=False)
    details = db.Column(db.String(255))
    timestamp = db.Column(db.DateTime, default=datetime.now)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    utilisateur = db.relationship('Utilisateur')

# ============================================================
# 5. AUTRES (Budget, Param√®tres...)
# ============================================================

class Parametre(db.Model):
    __tablename__ = 'parametres'
    id = db.Column(db.Integer, primary_key=True)
    cle = db.Column(db.String(50), nullable=False)
    valeur = db.Column(db.Text, nullable=False)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)

class Budget(db.Model):
    __tablename__ = 'budgets'
    id = db.Column(db.Integer, primary_key=True)
    annee = db.Column(db.Integer, nullable=False)
    montant_initial = db.Column(db.Float, default=0.0)
    cloture = db.Column(db.Boolean, default=False)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    depenses = db.relationship('Depense', backref='budget', lazy=True, cascade="all, delete-orphan")

class Depense(db.Model):
    __tablename__ = 'depenses'
    id = db.Column(db.Integer, primary_key=True)
    date_depense = db.Column(db.Date, nullable=False)
    contenu = db.Column(db.String(200))
    montant = db.Column(db.Float, nullable=False)
    est_bon_achat = db.Column(db.Boolean, default=False)
    fournisseur_id = db.Column(db.Integer, db.ForeignKey('fournisseurs.id'), nullable=True)
    budget_id = db.Column(db.Integer, db.ForeignKey('budgets.id'), nullable=False)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    fournisseur = db.relationship('Fournisseur', back_populates='depenses')

class Fournisseur(db.Model):
    __tablename__ = 'fournisseurs'
    id = db.Column(db.Integer, primary_key=True)
    nom = db.Column(db.String(100), nullable=False)
    site_web = db.Column(db.String(255))
    logo = db.Column(db.String(255))
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    depenses = db.relationship('Depense', back_populates='fournisseur')

class Echeance(db.Model):
    __tablename__ = 'echeances'
    id = db.Column(db.Integer, primary_key=True)
    intitule = db.Column(db.String(100), nullable=False)
    date_echeance = db.Column(db.Date, nullable=False)
    details = db.Column(db.Text)
    traite = db.Column(db.Integer, default=0)
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)

class Suggestion(db.Model):
    __tablename__ = 'suggestions'
    id = db.Column(db.Integer, primary_key=True)
    objet_id = db.Column(db.Integer, db.ForeignKey('objets.id'), nullable=False)
    utilisateur_id = db.Column(db.Integer, db.ForeignKey('utilisateurs.id'), nullable=False)
    quantite = db.Column(db.Integer, default=1)
    commentaire = db.Column(db.Text)
    date_demande = db.Column(db.DateTime, default=datetime.now)
    statut = db.Column(db.String(20), default='En attente')
    etablissement_id = db.Column(db.Integer, db.ForeignKey('etablissements.id'), nullable=False)
    objet = db.relationship('Objet')
    utilisateur = db.relationship('Utilisateur')
--- END OF FILE db.py ---

--- START OF FILE extensions.py ---

# Fichier : extensions.py
from flask_limiter import Limiter
from flask_limiter.util import get_remote_address
from flask_caching import Cache
import os

# Rate Limiter
# On initialise sans 'app', on le fera dans app.py avec init_app
limiter = Limiter(
    key_func=get_remote_address,
    storage_uri=os.environ.get("REDIS_URL", "memory://"),
    default_limits=["2000 per day", "500 per hour"]
)

# Cache
# CORRECTION : On ne met pas la config ici, on initialise juste l'objet
cache = Cache()
--- END OF FILE extensions.py ---

--- START OF FILE forms.py ---

from flask_wtf import FlaskForm
from wtforms import IntegerField, FloatField, DateField, TextAreaField, SelectField, BooleanField, SubmitField
from wtforms.validators import DataRequired, NumberRange, Optional

class BudgetForm(FlaskForm):
    """Formulaire pour cr√©er ou modifier un budget annuel."""
    annee = IntegerField(
        "Ann√©e de d√©but de l'ann√©e scolaire", 
        validators=[DataRequired(message="L'ann√©e est requise."), NumberRange(min=2020, max=2100)]
    )
    montant_initial = FloatField(
        'Montant initial (‚Ç¨)', 
        validators=[DataRequired(message="Le montant est requis."), NumberRange(min=0)]
    )
    submit = SubmitField('Enregistrer')

class DepenseForm(FlaskForm):
    """Formulaire pour ajouter ou modifier une d√©pense."""
    date_depense = DateField(
        'Date de la d√©pense', 
        validators=[DataRequired(message="La date est requise.")], 
        format='%Y-%m-%d'
    )
    fournisseur_id = SelectField(
        'Fournisseur', 
        coerce=int, 
        validators=[Optional()]
    )
    est_bon_achat = BooleanField("Bon d'achat petit mat√©riel (sans fournisseur)")
    contenu = TextAreaField(
        'Contenu / Libell√©', 
        validators=[DataRequired(message="Le contenu est requis.")]
    )
    montant = FloatField(
        'Montant (‚Ç¨)', 
        validators=[DataRequired(message="Le montant est requis."), NumberRange(min=0.01)]
    )
    submit = SubmitField('Ajouter')
--- END OF FILE forms.py ---

--- START OF FILE generer_cle.py ---

import hashlib
import sys

# C'est TA cl√© secr√®te (copi√©e depuis ton .env)
# Elle doit √™tre IDENTIQUE √† celle du fichier .env sinon √ßa ne marchera pas
SECRET_KEY = "LABO-PRO-2025-X@v14211825!S@cha14211825!Quentin14211825!"

def generate(instance_id):
    # On colle l'ID et le Secret
    raw = f"{instance_id}-{SECRET_KEY}"
    # On m√©lange le tout (Hash) et on prend les 16 premiers caract√®res
    return hashlib.sha256(raw.encode()).hexdigest()[:16].upper()

if __name__ == "__main__":
    print("\n--- G√âN√âRATEUR DE LICENCE LABFLOW ---")
    
    # Si l'ID est pass√© en argument ou demand√©
    if len(sys.argv) > 1:
        iid = sys.argv[1]
    else:
        iid = input("Collez l'Identifiant d'Instance ici : ").strip()
    
    if iid:
        cle = generate(iid)
        print(f"\nPOUR L'INSTANCE : {iid}")
        print(f"LA CL√â EST      : {cle}")
        print("-" * 40)
    else:
        print("Erreur : ID manquant.")
--- END OF FILE generer_cle.py ---

--- START OF FILE keygen.py ---

import tkinter as tk
from tkinter import messagebox
import hashlib

# =============================================================================
# CONFIGURATION
# =============================================================================
# C'est la cl√© qui est dans ton fichier .env (GMLCL_PRO_KEY)
# Elle doit √™tre STRICTEMENT IDENTIQUE.
SECRET_KEY = "LABO-PRO-2025-X@v14211825!S@cha14211825!Quentin14211825!"

# =============================================================================
# LOGIQUE
# =============================================================================
def generer_cle():
    instance_id = entry_id.get().strip()
    
    if not instance_id:
        messagebox.showwarning("Attention", "Veuillez entrer un Identifiant d'Instance.")
        return

    try:
        # La formule magique (identique √† celle de ton site)
        raw = f"{instance_id}-{SECRET_KEY}"
        cle = hashlib.sha256(raw.encode()).hexdigest()[:16].upper()
        
        # Affichage
        entry_result.config(state='normal') # On d√©verrouille pour √©crire
        entry_result.delete(0, tk.END)
        entry_result.insert(0, cle)
        entry_result.config(state='readonly') # On reverrouille
        
        # Copie automatique dans le presse-papier
        root.clipboard_clear()
        root.clipboard_append(cle)
        lbl_info.config(text="Cl√© g√©n√©r√©e et copi√©e !", fg="green")
        
    except Exception as e:
        messagebox.showerror("Erreur", f"Une erreur est survenue : {e}")

def effacer():
    entry_id.delete(0, tk.END)
    entry_result.config(state='normal')
    entry_result.delete(0, tk.END)
    entry_result.config(state='readonly')
    lbl_info.config(text="Pr√™t", fg="grey")
    entry_id.focus()

# =============================================================================
# INTERFACE GRAPHIQUE
# =============================================================================
root = tk.Tk()
root.title("G√©n√©rateur Licence LabFlow")
root.geometry("400x280")
root.resizable(False, False)
root.configure(bg="#f0f2f5")

# Style
font_label = ("Helvetica", 10, "bold")
font_entry = ("Courier New", 11)

# Titre
tk.Label(root, text="G√©n√©rateur de Licence PRO", bg="#1f3b73", fg="white", font=("Helvetica", 14, "bold"), pady=10).pack(fill="x")

# Zone ID
frame_content = tk.Frame(root, bg="#f0f2f5", padx=20, pady=20)
frame_content.pack(fill="both", expand=True)

tk.Label(frame_content, text="Identifiant Instance (Client) :", bg="#f0f2f5", font=font_label).pack(anchor="w")
entry_id = tk.Entry(frame_content, font=font_entry, width=40, bd=2, relief="flat")
entry_id.pack(pady=(5, 15), ipady=5, fill="x")

# Bouton
btn_generate = tk.Button(frame_content, text="G√âN√âRER LA CL√â", command=generer_cle, bg="#198754", fg="white", font=("Helvetica", 10, "bold"), cursor="hand2", relief="flat", pady=5)
btn_generate.pack(fill="x", pady=5)

# Zone R√©sultat
tk.Label(frame_content, text="Cl√© de Licence :", bg="#f0f2f5", font=font_label).pack(anchor="w", pady=(15, 0))
entry_result = tk.Entry(frame_content, font=("Courier New", 14, "bold"), width=40, bd=2, relief="solid", justify="center", state="readonly", fg="#1f3b73")
entry_result.pack(pady=5, ipady=5, fill="x")

# Info bas
lbl_info = tk.Label(frame_content, text="Entrez l'ID et cliquez sur G√©n√©rer", bg="#f0f2f5", fg="grey")
lbl_info.pack(pady=5)

# Lancement
entry_id.focus()
root.bind('<Return>', lambda event: generer_cle()) # Touche Entr√©e pour valider
root.mainloop()
--- END OF FILE keygen.py ---

--- START OF FILE requirements.txt ---

altgraph
autopep8
blinker
click
colorama
defusedxml
et_xmlfile
flake8
Flask
Flask-WTF
Flask-SQLAlchemy
fonttools
fpdf2
itsdangerous
Jinja2
MarkupSafe
mccabe
openpyxl
packaging
pefile
pillow
pycodestyle
pyflakes
pyinstaller
pyinstaller-hooks-contrib
pyperclip
pywin32-ctypes
setuptools
waitress
Werkzeug
WTForms
psycopg2-binary
gunicorn
requests
python-dotenv
--- END OF FILE requirements.txt ---

--- START OF FILE reset_db.py ---

from app import create_app
from db import db
from sqlalchemy import text

app = create_app()

with app.app_context():
    print("‚ò¢Ô∏è  REMISE √Ä Z√âRO (Mode Production)...")
    
    # 1. Suppression radicale (Sp√©cifique PostgreSQL)
    # On supprime le sch√©ma public entier pour √™tre s√ªr qu'il ne reste rien (types enum, s√©quences...)
    try:
        db.session.execute(text('DROP SCHEMA public CASCADE;'))
        db.session.execute(text('CREATE SCHEMA public;'))
        db.session.commit()
        print("‚úÖ Base de donn√©es enti√®rement vid√©e (Drop Schema).")
    except Exception as e:
        # Fallback pour SQLite ou si l'utilisateur n'a pas les droits superuser
        print(f"‚ö†Ô∏è Note : {e}")
        print("üîÑ Passage √† la m√©thode standard drop_all()...")
        db.drop_all()
    
    # 2. Cr√©ation de la structure (Tables vides)
    # Cela va cr√©er les tables Paniers, Audit, et Reservation avec la nouvelle colonne groupe_id
    print("üèóÔ∏è  Cr√©ation de la structure des tables...")
    db.create_all()
    
    print("üöÄ Base de donn√©es pr√™te et 100% VIERGE.")
    print("------------------------------------------------")
    print("üëâ Lance le serveur : python app.py")
    print("üëâ Va sur : http://127.0.0.1:5000/")
    print("üëâ Tu devrais √™tre redirig√© automatiquement vers /auth/setup")
    print("------------------------------------------------")
--- END OF FILE reset_db.py ---

--- START OF FILE run.py ---

import socket
from app import app
# from waitress import serve

def get_local_ip():
    """
    Tente de trouver l'adresse IP locale de la machine sur le r√©seau.
    """
    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    try:
        # Cette IP n'a pas besoin d'√™tre joignable, c'est une astuce
        # pour que le syst√®me d'exploitation choisisse la bonne interface r√©seau.
        s.connect(('10.255.255.255', 1))
        IP = s.getsockname()[0]
    except Exception:
        # Si la machine n'est connect√©e √† aucun r√©seau, on retourne l'adresse
        # de boucle locale par d√©faut.
        IP = '127.0.0.1'
    finally:
        s.close()
    return IP

if __name__ == "__main__":
    # Configuration du serveur
    host = '0.0.0.0'  # √âcoute sur toutes les interfaces r√©seau disponibles
    port = 5000
    local_ip = get_local_ip()
    
    # Affichage des informations pour l'administrateur
    print("="*60)
    print("          Serveur GMLCL D√©marr√©")
    print("="*60)
    print("\nL'application est maintenant accessible aux adresses suivantes :")
    print(f"  - Depuis cet ordinateur : http://127.0.0.1:{port}")
    print(f"  - Depuis un autre PC du r√©seau : http://{local_ip}:{port}")
    print("\nIMPORTANT :")
    print("  - NE FERMEZ PAS CETTE FEN√äTRE !")
    print("  - Pour arr√™ter le serveur, fermez cette fen√™tre ou faites Ctrl+C.")
    print("="*60)
    
    # Lancement du serveur de production waitress
    # serve(app, host=host, port=port)
    app.run(host=host, port=port, debug=True)

--- END OF FILE run.py ---

--- START OF FILE update_db.py ---

# update_db.py
from app import create_app, db  # <--- On importe la factory, pas 'app'
from sqlalchemy import text

# 1. On cr√©e l'application manuellement
app = create_app()

with app.app_context():
    print("üîå Connexion √† la base de donn√©es...")
    
    # 2. Cr√©ation des nouvelles tables (Paniers, Audit, etc.)
    print("üõ†Ô∏è  Cr√©ation des tables manquantes...")
    db.create_all()
    
    # 3. Patch manuel pour la table Reservation
    try:
        print("üîÑ V√©rification de la table 'reservations'...")
        with db.engine.connect() as conn:
            # On v√©rifie si la colonne groupe_id existe
            result = conn.execute(text("SELECT column_name FROM information_schema.columns WHERE table_name='reservations' AND column_name='groupe_id'"))
            
            if not result.scalar():
                print("‚ö†Ô∏è  Colonne 'groupe_id' manquante. Ajout en cours...")
                
                # A. Ajout de la colonne (nullable au d√©but)
                conn.execute(text("ALTER TABLE reservations ADD COLUMN groupe_id VARCHAR(36)"))
                
                # B. Migration des anciennes donn√©es (UUID bidon pour ne pas casser)
                conn.execute(text("UPDATE reservations SET groupe_id = 'legacy_' || id WHERE groupe_id IS NULL"))
                
                # C. Application de la contrainte NOT NULL
                conn.execute(text("ALTER TABLE reservations ALTER COLUMN groupe_id SET NOT NULL"))
                
                conn.commit()
                print("‚úÖ Colonne 'groupe_id' ajout√©e avec succ√®s.")
            else:
                print("‚úÖ La table 'reservations' est d√©j√† √† jour.")
                
    except Exception as e:
        print(f"‚ùå Erreur lors du patch SQL : {e}")

    print("üöÄ Base de donn√©es pr√™te pour le nouveau syst√®me !")
--- END OF FILE update_db.py ---

--- START OF FILE utils.py ---

# ============================================================
# FICHIER : utils.py (Version Finale Corrig√©e)
# ============================================================
import hashlib
import os
from functools import wraps
from datetime import datetime, timedelta

# Imports Flask
from flask import session, flash, redirect, url_for, request, current_app

# Imports SQLAlchemy
from sqlalchemy.exc import SQLAlchemyError
from sqlalchemy import func

# Imports Locaux
from db import db, Utilisateur, Parametre, Objet, Reservation, AuditLog
from extensions import cache

# -----------------------------------------------------------------------------
# FONCTIONS DE V√âRIFICATION
# -----------------------------------------------------------------------------
def is_setup_needed(app):
    """V√©rifie si l'application a besoin d'√™tre configur√©e (aucun admin)."""
    with app.app_context():
        try:
            admin_count = db.session.query(Utilisateur).filter_by(role='admin').count()
            return admin_count == 0
        except Exception:
            return True

# -----------------------------------------------------------------------------
# FONCTION HELPER (LOGGING)
# -----------------------------------------------------------------------------
def log_action(action, details=None):
    """Enregistre une action dans l'Audit Log avec anonymisation."""
    try:
        user_id = session.get('user_id')
        etablissement_id = session.get('etablissement_id')
        
        if not user_id or not etablissement_id:
            return # Pas de log si hors session

        # Hachage (Anonymisation GDPR)
        user_hash = hashlib.sha256(str(user_id).encode()).hexdigest()
        
        # On r√©cup√®re l'IP r√©elle
        ip = request.headers.get('X-Forwarded-For', request.remote_addr)
        ip_hash = hashlib.sha256(str(ip).encode()).hexdigest()

        log = AuditLog(
            user_id_hash=user_hash,
            ip_address_hash=ip_hash,
            action=action,
            details=str(details) if details else None,
            etablissement_id=etablissement_id
        )
        
        db.session.add(log)
        db.session.commit()
        
    except Exception as e:
        current_app.logger.error(f"‚ö†Ô∏è ERREUR AUDIT LOG: {e}")
        db.session.rollback()

# -----------------------------------------------------------------------------
# GESTION DU CACHE (Plac√© avant les d√©corateurs pour √™tre utilis√© dedans)
# -----------------------------------------------------------------------------
@cache.memoize(timeout=300)  # Cache pendant 5 minutes
def get_etablissement_params(etablissement_id):
    """R√©cup√®re les param√®tres critiques (Licence) avec mise en cache."""
    if not etablissement_id:
        return {}

    try:
        params = db.session.execute(
            db.select(Parametre)
            .filter_by(etablissement_id=etablissement_id)
            .where(Parametre.cle.in_(['licence_statut', 'instance_id']))
        ).scalars().all()
        
        return {p.cle: p.valeur for p in params}
    except SQLAlchemyError:
        return {}

# -----------------------------------------------------------------------------
# D√âCORATEURS DE S√âCURIT√â
# -----------------------------------------------------------------------------
def login_required(f):
    @wraps(f)
    def decorated_function(*args, **kwargs):
        if 'user_id' not in session:
            flash("Veuillez vous connecter pour acc√©der √† cette page.", "error")
            return redirect(url_for('auth.login'))
        return f(*args, **kwargs)
    return decorated_function

def admin_required(f):
    @wraps(f)
    def decorated_function(*args, **kwargs):
        if session.get('user_role') != 'admin':
            flash("Acc√®s r√©serv√© aux administrateurs.", "error")
            return redirect(url_for('inventaire.index'))
        return f(*args, **kwargs)
    return decorated_function

def limit_objets_required(f):
    @wraps(f)
    def decorated_function(*args, **kwargs):
        etablissement_id = session.get('etablissement_id')
        if not etablissement_id:
            flash("Session invalide. Veuillez vous reconnecter.", "error")
            return redirect(url_for('auth.login'))

        # OPTIMISATION : Utilisation du cache au lieu d'une requ√™te DB brute
        params = get_etablissement_params(etablissement_id)
        is_pro = params.get('licence_statut') == 'PRO'
        
        if not is_pro:
            # On compte les objets seulement si pas PRO
            count = db.session.query(Objet).filter_by(etablissement_id=etablissement_id).count()
            if count >= 50:
                flash("La version gratuite est limit√©e √† 50 objets. Passez √† la version Pro.", "warning")
                return redirect(request.referrer or url_for('inventaire.index'))
        
        return f(*args, **kwargs)
    return decorated_function

# -----------------------------------------------------------------------------
# LOGIQUE M√âTIER
# -----------------------------------------------------------------------------
def get_alerte_info():
    """Calcule les alertes de stock et de p√©remption."""
    etablissement_id = session.get('etablissement_id')
    if not etablissement_id:
        return {'alertes_total': 0, 'alertes_stock': 0, 'alertes_peremption': 0}

    try:
        now = datetime.now()
        
        all_objets = db.session.execute(
            db.select(Objet).filter_by(etablissement_id=etablissement_id)
        ).scalars().all()

        count_stock = 0
        count_peremption = 0
        date_limite_peremption = (now + timedelta(days=30)).date()

        for objet in all_objets:
            try:
                # Calcul quantit√© dispo
                total_reserve = db.session.query(func.sum(Reservation.quantite_reservee)).filter(
                    Reservation.objet_id == objet.id,
                    Reservation.fin_reservation > now
                ).scalar() or 0
                
                quantite_disponible = objet.quantite_physique - total_reserve
                
                # Conversion s√©curis√©e
                seuil_numeric = int(objet.seuil) if objet.seuil is not None else 0
                disponible_numeric = int(quantite_disponible)

                # Alerte de stock
                if objet.en_commande == 0 and disponible_numeric <= seuil_numeric:
                    count_stock += 1
                
                # Alerte de p√©remption
                if objet.date_peremption and objet.traite == 0:
                    # Gestion robuste du format de date
                    if isinstance(objet.date_peremption, str):
                        d_peremption = datetime.strptime(objet.date_peremption, '%Y-%m-%d').date()
                    else:
                        d_peremption = objet.date_peremption # Si d√©j√† date object

                    if d_peremption < date_limite_peremption:
                        count_peremption += 1

            except (ValueError, TypeError) as e:
                # Log warning sans crasher (current_app est maintenant import√©)
                current_app.logger.warning(f"Skip objet {objet.id} alert check: {e}")
                pass

        return {
            "alertes_stock": count_stock,
            "alertes_peremption": count_peremption,
            "alertes_total": count_stock + count_peremption
        }

    except SQLAlchemyError as e:
        current_app.logger.error(f"ERREUR DB dans get_alerte_info: {e}")
        return {'alertes_total': 0, 'alertes_stock': 0, 'alertes_peremption': 0}

def annee_scolaire_format(year):
    if isinstance(year, int):
        return f"{year}-{year + 1}"
    return year

# ===============================================
#  ACTIVATION CLE LICENCE
# ===============================================
def calculate_license_key(instance_id):
    secret = os.environ.get('GMLCL_PRO_KEY')
    if not secret: return None
    raw_string = f"{instance_id}-{secret}"
    return hashlib.sha256(raw_string.encode()).hexdigest()[:16].upper()

# ===============================================
#  VERIFICATION DES UPLOADS
# ===============================================
ALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'pdf', 'json', 'csv'}

def allowed_file(filename):
    """V√©rifie si l'extension du fichier est autoris√©e."""
    return '.' in filename and \
           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS
--- END OF FILE utils.py ---

--- START OF FILE services/inventory_service.py ---

# -*- coding: utf-8 -*-
import logging
from dataclasses import dataclass
from typing import List, Optional, Dict, Any
from datetime import datetime, timedelta
from sqlalchemy import select, or_
from sqlalchemy.exc import SQLAlchemyError
from db import db, Objet, Categorie, Armoire

logger = logging.getLogger(__name__)

class InventoryServiceError(Exception):
    """Exception m√©tier pour l'inventaire."""
    pass

# --- DTOs (Data Transfer Objects) ---
@dataclass
class InventoryContext:
    armoire_nom: Optional[str]
    categorie_nom: Optional[str]

@dataclass
class InventoryDTO:
    items: List[Dict[str, Any]] # Liste de dicts s√©rialis√©s (Performance & S√©curit√©)
    total_pages: int
    current_page: int
    context: InventoryContext

class InventoryService:
    def __init__(self, etablissement_id: int):
        self.etablissement_id = etablissement_id

    def search_objets(self, query_text: str, limit: int = 10) -> List[Dict[str, Any]]:
        """Recherche rapide pour l'autocompl√©tion."""
        if not query_text or len(query_text) < 2:
            return []
        
        safe_limit = min(limit, 50)
            
        try:
            stmt = (
                select(Objet)
                .filter(
                    Objet.etablissement_id == self.etablissement_id,
                    Objet.nom.ilike(f"%{query_text}%")
                )
                .limit(safe_limit)
            )
            results = db.session.execute(stmt).scalars().all()
            
            return [{
                'id': obj.id, 
                'nom': obj.nom, 
                'image': obj.image_url,
                'armoire': obj.armoire.nom if obj.armoire else None, 
                'quantite': obj.quantite_physique
            } for obj in results]
        except SQLAlchemyError as e:
            logger.error(f"Search error: {e}")
            raise InventoryServiceError("Erreur lors de la recherche.")

    def get_paginated_inventory(self, page: int, sort_by: str, direction: str, filters: dict) -> InventoryDTO:
        """
        R√©cup√®re l'inventaire filtr√© et pagin√© sous forme de DTO s√©rialis√©.
        """
        ITEMS_PER_PAGE = 20
        try:
            page = max(1, min(int(page), 1000))
        except (ValueError, TypeError):
            page = 1

        try:
            # 1. Construction de la requ√™te
            query = select(Objet).filter_by(etablissement_id=self.etablissement_id)
            query = query.outerjoin(Categorie).outerjoin(Armoire)

            # 2. Filtres
            if filters.get('q'):
                term = f"%{filters['q']}%"
                query = query.filter(or_(
                    Objet.nom.ilike(term), 
                    Categorie.nom.ilike(term), 
                    Armoire.nom.ilike(term)
                ))
            
            if filters.get('armoire_id'):
                query = query.filter(Objet.armoire_id == filters['armoire_id'])
            if filters.get('categorie_id'):
                query = query.filter(Objet.categorie_id == filters['categorie_id'])

            if filters.get('etat'):
                today = datetime.now().date()
                if filters['etat'] == 'perime':
                    query = query.filter(Objet.date_peremption < today)
                elif filters['etat'] == 'bientot':
                    query = query.filter(
                        Objet.date_peremption >= today, 
                        Objet.date_peremption <= today + timedelta(days=30)
                    )
                elif filters['etat'] == 'stock':
                    query = query.filter(Objet.quantite_physique <= Objet.seuil)

            # 3. Tri
            ALLOWED_SORT = {
                'nom': Objet.nom, 'quantite': Objet.quantite_physique,
                'seuil': Objet.seuil, 'date_peremption': Objet.date_peremption,
                'categorie': Categorie.nom, 'armoire': Armoire.nom
            }
            sort_expr = ALLOWED_SORT.get(sort_by, Objet.nom)
            query = query.order_by(sort_expr.desc() if direction == 'desc' else sort_expr.asc())

            # 4. Pagination
            pagination = db.paginate(query, page=page, per_page=ITEMS_PER_PAGE, error_out=False)
            
            # 5. S√©rialisation (Flat DTOs)
            serialized_items = [{
                'id': obj.id,
                'nom': obj.nom,
                'quantite_physique': obj.quantite_physique,
                'seuil': obj.seuil,
                'date_peremption': obj.date_peremption,
                'image_url': obj.image_url,
                'fds_url': obj.fds_url, # Ajout√© aussi au cas o√π
                
                # Noms pour l'affichage
                'armoire_nom': obj.armoire.nom if obj.armoire else None,
                'categorie_nom': obj.categorie.nom if obj.categorie else None,
                
                # IDs pour l'√©dition (C'EST CE QUI MANQUAIT)
                'armoire_id': obj.armoire_id,
                'categorie_id': obj.categorie_id,
                
                'quantite_disponible': obj.quantite_physique 
            } for obj in pagination.items]

            # 6. Contexte
            armoire_nom = None
            categorie_nom = None
            
            if filters.get('armoire_id'):
                a = db.session.get(Armoire, filters['armoire_id'])
                if a: armoire_nom = a.nom
            
            if filters.get('categorie_id'):
                c = db.session.get(Categorie, filters['categorie_id'])
                if c: categorie_nom = c.nom

            return InventoryDTO(
                items=serialized_items,
                total_pages=pagination.pages,
                current_page=page,
                context=InventoryContext(armoire_nom=armoire_nom, categorie_nom=categorie_nom)
            )

        except SQLAlchemyError as e:
            logger.error(f"Inventory error: {e}")
            raise InventoryServiceError("Impossible de charger l'inventaire.")
--- END OF FILE services/inventory_service.py ---

--- START OF FILE services/kit_service.py ---

import logging
from typing import List, Dict, Any, Set, Tuple
from sqlalchemy import select
from sqlalchemy.exc import SQLAlchemyError
from db import db, Kit, KitObjet

logger = logging.getLogger(__name__)

class KitServiceError(Exception):
    """Exception lev√©e lors d'une erreur m√©tier dans le service Kit."""
    pass

class KitService:
    TYPE_KIT = 'kit'
    TYPE_OBJET = 'objet'
    MAX_ITEMS_BATCH = 100
    MAX_QTY_PER_ITEM = 100

    @staticmethod
    def decomposer_items(items_list: List[Dict[str, Any]], etablissement_id: int) -> Dict[int, int]:
        """
        D√©compose une liste d'items en besoins unitaires.
        """
        if not items_list:
            return {}

        if len(items_list) > KitService.MAX_ITEMS_BATCH:
            raise KitServiceError(f"Trop d'items ({len(items_list)}). Max autoris√©: {KitService.MAX_ITEMS_BATCH}")

        consommation: Dict[int, int] = {}
        kit_ids_to_fetch: Set[int] = set()
        valid_items: List[Tuple[str, int, int]] = []

        try:
            for idx, item in enumerate(items_list):
                qty = item.get('quantite') if 'quantite' in item else item.get('quantity')
                
                if qty is None:
                    logger.warning(f"Item index {idx} ignor√© : quantit√© manquante. Payload: {item}")
                    continue

                try:
                    i_type = str(item.get('type'))
                    i_id = int(item.get('id'))
                    i_qty = int(qty)
                except (ValueError, TypeError):
                    continue

                if i_qty <= 0: continue
                
                if i_qty > KitService.MAX_QTY_PER_ITEM:
                    raise KitServiceError(f"Quantit√© excessive pour l'item {i_type} #{i_id} ({i_qty}). Max: {KitService.MAX_QTY_PER_ITEM}")

                valid_items.append((i_type, i_id, i_qty))
                
                if i_type == KitService.TYPE_KIT:
                    kit_ids_to_fetch.add(i_id)

            kits_map = {}
            if kit_ids_to_fetch:
                stmt = select(Kit).filter(
                    Kit.id.in_(kit_ids_to_fetch),
                    Kit.etablissement_id == etablissement_id
                )
                kits = db.session.execute(stmt).scalars().all()
                kits_map = {k.id: k for k in kits}

            for i_type, i_id, i_qty in valid_items:
                if i_type == KitService.TYPE_OBJET:
                    consommation[i_id] = consommation.get(i_id, 0) + i_qty
                
                elif i_type == KitService.TYPE_KIT:
                    kit = kits_map.get(i_id)
                    if not kit:
                        logger.warning(f"Kit introuvable ou interdit : ID {i_id} (Etab: {etablissement_id})")
                        raise KitServiceError(f"Le kit demand√© (ID {i_id}) est introuvable ou indisponible.")
                    
                    for comp in kit.objets_assoc:
                        total = i_qty * comp.quantite
                        consommation[comp.objet_id] = consommation.get(comp.objet_id, 0) + total
            
            return consommation

        except SQLAlchemyError as e:
            logger.error(f"DB Error in decomposer_items: {e}")
            raise KitServiceError("Erreur base de donn√©es lors de la d√©composition") from e
--- END OF FILE services/kit_service.py ---

--- START OF FILE services/panier_service.py ---

# -*- coding: utf-8 -*-
import logging
import uuid
import re
import json
# AJOUT DE 'timezone' DANS LES IMPORTS
from datetime import datetime, timedelta, date, time, timezone
from typing import List, Dict, Any, Optional, Tuple
from sqlalchemy import select, delete
from sqlalchemy.exc import SQLAlchemyError
from sqlalchemy.orm import joinedload

from db import db, Panier, PanierItem, Reservation, AuditLog, Objet, Kit
from services.stock_service import StockService, StockServiceError
from services.kit_service import KitService

logger = logging.getLogger(__name__)

class PanierServiceError(Exception):
    """Exception m√©tier pour la gestion du panier."""
    pass

class PanierService:
    PANIER_TTL_HOURS = 24
    MAX_ITEMS_PANIER = 50
    MAX_QTY_PER_ITEM = KitService.MAX_QTY_PER_ITEM

    def __init__(self, etablissement_id: int):
        self.etablissement_id = etablissement_id
        self.stock_service = StockService(etablissement_id)

    def _get_active_panier(self, user_id: int, create_if_missing: bool = True, with_lock: bool = False) -> Optional[Panier]:
        """
        R√©cup√®re le panier actif.
        """
        # CORRECTION CRITIQUE : On utilise une date "Aware" (UTC) pour matcher la DB
        now = datetime.now(timezone.utc)
        
        stmt = select(Panier).filter_by(
            id_utilisateur=user_id,
            etablissement_id=self.etablissement_id,
            statut='actif'
        )
        
        if with_lock:
            stmt = stmt.with_for_update()

        panier = db.session.execute(stmt).scalar_one_or_none()

        # Rotation si expir√©
        if panier and panier.date_expiration < now:
            panier.statut = 'expir√©'
            # On ne commit pas ici pour laisser la transaction appelante g√©rer
            panier = None

        if not panier and create_if_missing:
            panier = Panier(
                id=str(uuid.uuid4()),
                id_utilisateur=user_id,
                etablissement_id=self.etablissement_id,
                date_expiration=now + timedelta(hours=self.PANIER_TTL_HOURS),
                statut='actif'
            )
            db.session.add(panier)
            db.session.flush()
            
        return panier

    def _verify_item_ownership(self, item_type: str, item_id: int):
        """S√âCURIT√â IDOR : V√©rifie l'appartenance √† l'√©tablissement."""
        exists = False
        if item_type == 'objet':
            exists = db.session.execute(
                select(Objet.id).filter_by(id=item_id, etablissement_id=self.etablissement_id)
            ).scalar()
        elif item_type == 'kit':
            exists = db.session.execute(
                select(Kit.id).filter_by(id=item_id, etablissement_id=self.etablissement_id)
            ).scalar()
        
        if not exists:
            logger.warning(f"SECURITY: IDOR Attempt. Etab {self.etablissement_id} tried accessing {item_type} {item_id}")
            raise PanierServiceError("√âl√©ment introuvable ou acc√®s refus√©.")

    def _parse_and_validate_dates(self, date_str: str, h_debut: str, h_fin: str) -> Tuple[datetime, datetime]:
        """Valide format et r√®gles m√©tier (Pass√©, Futur, Dur√©e)."""
        if not re.match(r'^\d{4}-\d{2}-\d{2}$', date_str):
            raise PanierServiceError("Format date invalide.")
        if not re.match(r'^\d{2}:\d{2}$', h_debut) or not re.match(r'^\d{2}:\d{2}$', h_fin):
            raise PanierServiceError("Format heure invalide.")

        try:
            d = datetime.strptime(date_str, "%Y-%m-%d").date()
            t_start = datetime.strptime(h_debut, "%H:%M").time()
            t_end = datetime.strptime(h_fin, "%H:%M").time()
            
            start_dt = datetime.combine(d, t_start)
            end_dt = datetime.combine(d, t_end)
        except ValueError:
            raise PanierServiceError("Date/Heure incoh√©rente.")

        if start_dt >= end_dt:
            raise PanierServiceError("D√©but doit √™tre avant Fin.")

        # R√®gles m√©tier StockService
        # Ici on utilise datetime.now() simple car StockService attend du Naive (par d√©faut)
        # ou g√®re lui-m√™me la conversion. Pour √™tre s√ªr, on reste en Naive pour la logique m√©tier locale.
        now = datetime.now() 
        
        if start_dt < now - timedelta(minutes=StockService.PAST_BUFFER_MINUTES):
            raise PanierServiceError("Impossible de r√©server dans le pass√©.")
        if start_dt > now + timedelta(days=StockService.MAX_FUTURE_DAYS):
            raise PanierServiceError(f"Limite de r√©servation : {StockService.MAX_FUTURE_DAYS} jours.")
        
        duration = (end_dt - start_dt).total_seconds() / 3600
        if duration > StockService.MAX_RESERVATION_DURATION_HOURS:
            raise PanierServiceError(f"Dur√©e max d√©pass√©e ({StockService.MAX_RESERVATION_DURATION_HOURS}h).")

        return start_dt, end_dt

    def get_contenu(self, user_id: int) -> Dict[str, Any]:
        """R√©cup√®re le contenu (Lecture Seule)."""
        panier = self._get_active_panier(user_id, create_if_missing=False)
        
        if not panier or not panier.items:
            return {
                'panier_id': None,
                'expiration': None,
                'items': [],
                'total': 0
            }

        objet_ids = [i.id_item for i in panier.items if i.type == 'objet']
        kit_ids = [i.id_item for i in panier.items if i.type == 'kit']

        objets_map = {}
        kits_map = {}

        if objet_ids:
            objs = db.session.execute(select(Objet).filter(Objet.id.in_(objet_ids))).scalars().all()
            objets_map = {o.id: o for o in objs}
        
        if kit_ids:
            kits = db.session.execute(select(Kit).filter(Kit.id.in_(kit_ids))).scalars().all()
            kits_map = {k.id: k for k in kits}

        items_data = []
        total_items = 0

        for item in panier.items:
            nom = "√âl√©ment supprim√©"
            image = None
            
            if item.type == 'objet':
                obj = objets_map.get(item.id_item)
                if obj:
                    nom = obj.nom
                    image = obj.image_url
            elif item.type == 'kit':
                kit = kits_map.get(item.id_item)
                if kit:
                    nom = kit.nom

            items_data.append({
                'id': item.id,
                'type': item.type,
                'id_item': item.id_item,
                'nom': nom,
                'image': image,
                'quantite': item.quantite,
                'date': item.date_reservation.isoformat(),
                'heure_debut': item.heure_debut,
                'heure_fin': item.heure_fin
            })
            total_items += item.quantite

        return {
            'panier_id': panier.id,
            'expiration': panier.date_expiration.isoformat(),
            'items': items_data,
            'total': total_items
        }

    def ajouter_item(self, user_id: int, item_data: Dict[str, Any]) -> Dict[str, Any]:
        """Ajoute un item au panier (S√©curis√©)."""
        try:
            required = ['type', 'id', 'quantite', 'date', 'heure_debut', 'heure_fin']
            if not all(k in item_data for k in required):
                raise PanierServiceError("Donn√©es manquantes.")

            if not isinstance(item_data['type'], str):
                raise PanierServiceError("Format type invalide.")

            try:
                qte = int(item_data['quantite'])
                item_id = int(item_data['id'])
                item_type = item_data['type']
            except (ValueError, TypeError):
                raise PanierServiceError("Types invalides.")

            if item_type not in ['objet', 'kit']:
                raise PanierServiceError("Type inconnu.")

            if qte <= 0 or qte > self.MAX_QTY_PER_ITEM:
                raise PanierServiceError(f"Quantit√© invalide (Max {self.MAX_QTY_PER_ITEM}).")

            start_dt, end_dt = self._parse_and_validate_dates(
                item_data['date'], item_data['heure_debut'], item_data['heure_fin']
            )

            self._verify_item_ownership(item_type, item_id)

            panier = self._get_active_panier(user_id, create_if_missing=True)
            
            if len(panier.items) >= self.MAX_ITEMS_PANIER:
                raise PanierServiceError(f"Panier plein (Max {self.MAX_ITEMS_PANIER}).")

            check_item = [{'type': item_type, 'id': item_id, 'quantite': qte}]
            try:
                self.stock_service.get_disponibilites(start_dt, end_dt, panier_items=check_item)
            except StockServiceError as e:
                raise PanierServiceError(f"Indisponible : {str(e)}")

            existing_item = None
            for it in panier.items:
                if (it.type == item_type and 
                    it.id_item == item_id and
                    it.date_reservation.isoformat() == item_data['date'] and
                    it.heure_debut == item_data['heure_debut'] and
                    it.heure_fin == item_data['heure_fin']):
                    existing_item = it
                    break
            
            if existing_item:
                new_total = existing_item.quantite + qte
                if new_total > self.MAX_QTY_PER_ITEM:
                    raise PanierServiceError("Quantit√© totale excessive.")
                existing_item.quantite = new_total
            else:
                new_item = PanierItem(
                    id_panier=panier.id,
                    type=item_type,
                    id_item=item_id,
                    quantite=qte,
                    date_reservation=start_dt.date(),
                    heure_debut=item_data['heure_debut'],
                    heure_fin=item_data['heure_fin']
                )
                db.session.add(new_item)

            # Refresh TTL (UTC)
            panier.date_expiration = datetime.now(timezone.utc) + timedelta(hours=self.PANIER_TTL_HOURS)
            db.session.flush()
            
            db.session.commit()
            return {"success": True, "message": "Ajout√©"}

        except PanierServiceError:
            db.session.rollback()
            raise
        except Exception as e:
            db.session.rollback()
            logger.exception(f"Erreur interne ajouter_item User {user_id}")
            raise PanierServiceError("Erreur interne.")

    def retirer_item(self, user_id: int, item_id: int) -> Dict[str, Any]:
        """Retire un item (S√©curis√©)."""
        try:
            panier = self._get_active_panier(user_id, create_if_missing=False)
            if not panier:
                raise PanierServiceError("Panier introuvable.")

            item = db.session.get(PanierItem, item_id)
            if not item:
                raise PanierServiceError("Item introuvable.")
            
            if item.id_panier != panier.id:
                logger.warning(f"SECURITY: IDOR Delete Attempt User {user_id} Item {item_id}")
                raise PanierServiceError("Action interdite.")

            db.session.delete(item)
            db.session.commit()
            return {"success": True}
        except SQLAlchemyError:
            db.session.rollback()
            raise PanierServiceError("Erreur suppression.")

    def vider_panier(self, user_id: int) -> Dict[str, Any]:
        """Vide le panier."""
        try:
            panier = self._get_active_panier(user_id, create_if_missing=False)
            if panier:
                db.session.execute(delete(PanierItem).where(PanierItem.id_panier == panier.id))
                db.session.commit()
            return {"success": True}
        except SQLAlchemyError:
            db.session.rollback()
            raise PanierServiceError("Erreur vidage panier.")

    def valider_panier(self, user_id: int) -> Dict[str, Any]:
        """CHECKOUT ATOMIQUE & S√âCURIS√â."""
        try:
            panier = self._get_active_panier(user_id, create_if_missing=False, with_lock=True)
            
            if not panier or not panier.items:
                raise PanierServiceError("Panier vide ou expir√©.")

            creneaux: Dict[Tuple[date, str, str], List[Dict[str, Any]]] = {}
            for item in panier.items:
                key = (item.date_reservation, item.heure_debut, item.heure_fin)
                if key not in creneaux:
                    creneaux[key] = []
                creneaux[key].append({
                    'type': item.type,
                    'id': item.id_item,
                    'quantite': item.quantite
                })

            groupe_id = str(uuid.uuid4())
            reservations_created = []
            audit_details = []

            for (d_res, h_deb, h_fin), items_list in creneaux.items():
                start_dt, end_dt = self._parse_and_validate_dates(
                    d_res.isoformat(), h_deb, h_fin
                )

                for it in items_list:
                    self._verify_item_ownership(it['type'], it['id'])

                self.stock_service.verify_stock_atomic(
                    items=items_list,
                    start_dt=start_dt,
                    end_dt=end_dt,
                    user_id=user_id
                )

                for it in items_list:
                    resa = Reservation(
                        utilisateur_id=user_id,
                        etablissement_id=self.etablissement_id,
                        quantite_reservee=it['quantite'],
                        debut_reservation=start_dt,
                        fin_reservation=end_dt,
                        groupe_id=groupe_id,
                        statut='confirm√©e'
                    )
                    if it['type'] == 'kit':
                        resa.kit_id = it['id']
                    else:
                        resa.objet_id = it['id']
                    
                    db.session.add(resa)
                    reservations_created.append(resa)
                    audit_details.append(f"{it['type']}#{it['id']} (x{it['quantite']}) [{h_deb}-{h_fin}]")

            db.session.execute(delete(PanierItem).where(PanierItem.id_panier == panier.id))
            
            audit_json = json.dumps(audit_details)
            audit = AuditLog(
                id_utilisateur=user_id,
                etablissement_id=self.etablissement_id,
                action="CHECKOUT",
                table_cible="reservations",
                id_enregistrement=groupe_id,
                details=f"Items: {len(reservations_created)}. D√©tails: {audit_json}"
            )
            db.session.add(audit)

            db.session.commit()
            
            logger.info(f"Checkout SUCCESS | User {user_id} | Group {groupe_id}")
            return {
                "success": True, 
                "reservations_count": len(reservations_created),
                "groupe_id": groupe_id
            }

        except (PanierServiceError, StockServiceError) as e:
            db.session.rollback()
            logger.warning(f"Checkout FAILED | User {user_id} | {e}")
            raise PanierServiceError(str(e))
            
        except SQLAlchemyError as e:
            db.session.rollback()
            logger.error(f"Checkout CRITICAL DB ERROR | User {user_id} | {e}")
            raise PanierServiceError("Erreur technique validation.")
--- END OF FILE services/panier_service.py ---

--- START OF FILE services/stock_service.py ---

import logging
from datetime import datetime, timedelta
from typing import List, Dict, Any, Optional
from sqlalchemy import select
from sqlalchemy.orm import joinedload
from sqlalchemy.exc import SQLAlchemyError, OperationalError

from db import db, Objet, Kit, Reservation
from services.kit_service import KitService, KitServiceError

logger = logging.getLogger(__name__)

class StockServiceError(Exception):
    """Exception m√©tier pour le stock."""
    pass

class StockService:
    MAX_KIT_QUANTITY = 9999
    
    # R√®gles de validation temporelle
    MAX_RESERVATION_DURATION_HOURS = 12
    MAX_FUTURE_DAYS = 365
    PAST_BUFFER_MINUTES = 15  # Tol√©rance pour le d√©calage d'horloge

    def __init__(self, etablissement_id: int):
        self.etablissement_id = etablissement_id

    def _normalize_items(self, items: List[Dict[str, Any]]) -> List[Dict[str, Any]]:
        """Normalise les items pour KitService (quantite vs quantity)."""
        clean_items = []
        for item in items:
            qty = item.get('quantite') if 'quantite' in item else item.get('quantity')
            if qty is not None and 'type' in item and 'id' in item:
                clean_items.append({
                    'type': item['type'],
                    'id': item['id'],
                    'quantite': qty
                })
        return clean_items

    def _validate_dates(self, start_dt: datetime, end_dt: datetime):
        """Validation centralis√©e des r√®gles de dates."""
        now = datetime.now()
        
        # 1. Coh√©rence de base
        if start_dt >= end_dt:
            raise StockServiceError("La date de d√©but doit √™tre ant√©rieure √† la date de fin.")
        
        # 2. Pas dans le pass√© (avec tol√©rance)
        if start_dt < now - timedelta(minutes=self.PAST_BUFFER_MINUTES):
            raise StockServiceError("Impossible de r√©server dans le pass√©.")
            
        # 3. Pas trop loin dans le futur
        if start_dt > now + timedelta(days=self.MAX_FUTURE_DAYS):
            raise StockServiceError(f"Les r√©servations sont limit√©es √† {self.MAX_FUTURE_DAYS} jours √† l'avance.")
            
        # 4. Dur√©e maximale
        duration = (end_dt - start_dt).total_seconds() / 3600
        if duration > self.MAX_RESERVATION_DURATION_HOURS:
            raise StockServiceError(f"La dur√©e maximale d'une r√©servation est de {self.MAX_RESERVATION_DURATION_HOURS} heures.")

    def _get_reservations_actives(self, start_dt: datetime, end_dt: datetime) -> List[Reservation]:
        """R√©cup√®re les r√©servations actives (chevauchement de dates)."""
        try:
            # ‚ö†Ô∏è IMPORTANT : V√©rifiez que Reservation.statut existe dans db.py
            stmt = (
                select(Reservation)
                .options(
                    joinedload(Reservation.kit).joinedload(Kit.objets_assoc),
                    joinedload(Reservation.objet)
                )
                .filter(
                    Reservation.etablissement_id == self.etablissement_id,
                    Reservation.statut == 'confirm√©e', 
                    Reservation.debut_reservation < end_dt,
                    Reservation.fin_reservation > start_dt
                )
            )
            return db.session.execute(stmt).unique().scalars().all()
        except SQLAlchemyError as e:
            logger.error(f"DB Error fetching reservations: {e}")
            raise StockServiceError("Impossible de lire les r√©servations.") from e

    def verify_stock_atomic(
        self, 
        items: List[Dict[str, Any]], 
        start_dt: datetime, 
        end_dt: datetime, 
        user_id: Optional[int] = None
    ) -> Dict[str, Any]:
        """
        V√©rifie le stock ET verrouille les lignes (SELECT FOR UPDATE NOWAIT).
        """
        # 1. Validations
        self._validate_dates(start_dt, end_dt)
        
        items_propres = self._normalize_items(items)
        if not items_propres:
            return {'objets_map': {}, 'besoins': {}}

        try:
            # 2. Calcul des besoins
            besoins_demandes = KitService.decomposer_items(items_propres, self.etablissement_id)
            if not besoins_demandes:
                return {'objets_map': {}, 'besoins': {}}

            # 3. Lecture de l'existant
            reservations_existantes = self._get_reservations_actives(start_dt, end_dt)
            
            items_reserves_existants = []
            for r in reservations_existantes:
                if r.kit_id:
                    items_reserves_existants.append({'type': 'kit', 'id': r.kit_id, 'quantite': r.quantite_reservee})
                elif r.objet_id:
                    items_reserves_existants.append({'type': 'objet', 'id': r.objet_id, 'quantite': r.quantite_reservee})

            conso_existante = KitService.decomposer_items(items_reserves_existants, self.etablissement_id)

            # 4. Verrouillage Pessimiste (Tri√© + NoWait)
            objet_ids_to_lock = sorted(list(besoins_demandes.keys()))
            
            stmt = (
                select(Objet)
                .filter(
                    Objet.id.in_(objet_ids_to_lock),
                    Objet.etablissement_id == self.etablissement_id
                )
                .with_for_update(nowait=True)
            )
            
            objets_db = db.session.execute(stmt).scalars().all()
            objets_map = {obj.id: obj for obj in objets_db}

            # 5. S√©curit√© IDOR
            if len(objets_db) != len(objet_ids_to_lock):
                missing = set(objet_ids_to_lock) - set(objets_map.keys())
                logger.warning(f"SECURITY: IDOR Attempt? User {user_id} Etab {self.etablissement_id} requested missing objects: {missing}")
                raise StockServiceError("Certains objets demand√©s sont introuvables ou non autoris√©s.")

            # 6. V√©rification Quantit√©s
            for obj_id, qte_demandee in besoins_demandes.items():
                obj = objets_map[obj_id]
                stock_total = obj.quantite_physique
                stock_pris = conso_existante.get(obj_id, 0)
                disponible = stock_total - stock_pris

                if disponible < qte_demandee:
                    logger.info(f"STOCK REFUS√â | User: {user_id} | Objet: {obj.id} | Demand√©: {qte_demandee} | Dispo: {disponible}")
                    raise StockServiceError(f"Stock insuffisant pour '{obj.nom}'. Disponible: {disponible}")

            return {
                'objets_map': objets_map,
                'besoins': besoins_demandes
            }

        except OperationalError as e:
            logger.warning(f"Concurrency conflict for User {user_id}: {e}")
            raise StockServiceError("Le stock est actuellement modifi√© par une autre personne. Veuillez r√©essayer dans un instant.")
            
        except KitServiceError as e:
            logger.error(f"KitService Error for User {user_id}: {e}")
            raise StockServiceError(str(e))
            
        except SQLAlchemyError as e:
            logger.error(f"DB Critical Error for User {user_id}: {e}")
            raise StockServiceError("Erreur technique lors de la v√©rification du stock.")

    def get_disponibilites(self, start_dt: datetime, end_dt: datetime, panier_items: Optional[List[Dict[str, Any]]] = None) -> Dict[str, Any]:
        """
        Calcule les stocks disponibles (Lecture seule).
        """
        # Validation des dates identique √† la r√©servation
        self._validate_dates(start_dt, end_dt)

        try:
            reservations = self._get_reservations_actives(start_dt, end_dt)
            
            items_reserves = []
            for r in reservations:
                if r.kit_id:
                    items_reserves.append({'type': 'kit', 'id': r.kit_id, 'quantite': r.quantite_reservee})
                elif r.objet_id:
                    items_reserves.append({'type': 'objet', 'id': r.objet_id, 'quantite': r.quantite_reservee})

            if panier_items:
                panier_propre = self._normalize_items(panier_items)
                items_reserves.extend(panier_propre)

            conso_totale = KitService.decomposer_items(items_reserves, self.etablissement_id)

            all_objets = db.session.execute(
                select(Objet)
                .options(joinedload(Objet.armoire))
                .filter_by(etablissement_id=self.etablissement_id)
            ).scalars().all()

            objets_data = []
            stock_map = {}

            for obj in all_objets:
                conso = conso_totale.get(obj.id, 0)
                dispo = max(0, obj.quantite_physique - conso)
                stock_map[obj.id] = dispo
                
                objets_data.append({
                    'id': obj.id,
                    'nom': obj.nom,
                    'stock': obj.quantite_physique,
                    'disponible': dispo,
                    'image': obj.image_url,
                    'armoire': obj.armoire.nom if obj.armoire else "Non rang√©"
                })

            all_kits = db.session.execute(
                select(Kit)
                .options(joinedload(Kit.objets_assoc))
                .filter_by(etablissement_id=self.etablissement_id)
            ).unique().scalars().all()

            kits_data = []
            for kit in all_kits:
                max_possible = self.MAX_KIT_QUANTITY
                if not kit.objets_assoc:
                    max_possible = 0
                else:
                    for comp in kit.objets_assoc:
                        if comp.quantite > 0:
                            stock_obj = stock_map.get(comp.objet_id, 0)
                            possible = stock_obj // comp.quantite
                            if possible < max_possible:
                                max_possible = possible
                
                kits_data.append({
                    'id': kit.id,
                    'nom': kit.nom,
                    'description': kit.description,
                    'disponible': int(max_possible)
                })

            return {'objets': objets_data, 'kits': kits_data}

        except KitServiceError as e:
            # Erreur m√©tier connue
            raise StockServiceError(str(e))
            
        except SQLAlchemyError as e:
            # Erreur DB
            logger.error(f"DB Error in get_disponibilites: {e}")
            raise StockServiceError("Erreur d'acc√®s aux donn√©es de stock.")
            
        except Exception as e:
            # Erreur inconnue (Code, Logique, etc.)
            logger.exception("Erreur inattendue dans get_disponibilites")
            raise StockServiceError("Une erreur interne est survenue.") from e
--- END OF FILE services/stock_service.py ---

--- START OF FILE static/css/bootstrap-icons.css ---

/*!
 * Bootstrap Icons v1.10.5 (https://icons.getbootstrap.com/)
 * Copyright 2019-2023 The Bootstrap Authors
 * Licensed under MIT (https://github.com/twbs/icons/blob/main/LICENSE)
 */

@font-face {
  font-display: block;
  font-family: "bootstrap-icons";
  src: url("./fonts/bootstrap-icons.woff2?1bb88866b4085542c8ed5fb61b9393dd") format("woff2"),
url("./fonts/bootstrap-icons.woff?1bb88866b4085542c8ed5fb61b9393dd") format("woff");
}

.bi::before,
[class^="bi-"]::before,
[class*=" bi-"]::before {
  display: inline-block;
  font-family: bootstrap-icons !important;
  font-style: normal;
  font-weight: normal !important;
  font-variant: normal;
  text-transform: none;
  line-height: 1;
  vertical-align: -.125em;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.bi-123::before { content: "\f67f"; }
.bi-alarm-fill::before { content: "\f101"; }
.bi-alarm::before { content: "\f102"; }
.bi-align-bottom::before { content: "\f103"; }
.bi-align-center::before { content: "\f104"; }
.bi-align-end::before { content: "\f105"; }
.bi-align-middle::before { content: "\f106"; }
.bi-align-start::before { content: "\f107"; }
.bi-align-top::before { content: "\f108"; }
.bi-alt::before { content: "\f109"; }
.bi-app-indicator::before { content: "\f10a"; }
.bi-app::before { content: "\f10b"; }
.bi-archive-fill::before { content: "\f10c"; }
.bi-archive::before { content: "\f10d"; }
.bi-arrow-90deg-down::before { content: "\f10e"; }
.bi-arrow-90deg-left::before { content: "\f10f"; }
.bi-arrow-90deg-right::before { content: "\f110"; }
.bi-arrow-90deg-up::before { content: "\f111"; }
.bi-arrow-bar-down::before { content: "\f112"; }
.bi-arrow-bar-left::before { content: "\f113"; }
.bi-arrow-bar-right::before { content: "\f114"; }
.bi-arrow-bar-up::before { content: "\f115"; }
.bi-arrow-clockwise::before { content: "\f116"; }
.bi-arrow-counterclockwise::before { content: "\f117"; }
.bi-arrow-down-circle-fill::before { content: "\f118"; }
.bi-arrow-down-circle::before { content: "\f119"; }
.bi-arrow-down-left-circle-fill::before { content: "\f11a"; }
.bi-arrow-down-left-circle::before { content: "\f11b"; }
.bi-arrow-down-left-square-fill::before { content: "\f11c"; }
.bi-arrow-down-left-square::before { content: "\f11d"; }
.bi-arrow-down-left::before { content: "\f11e"; }
.bi-arrow-down-right-circle-fill::before { content: "\f11f"; }
.bi-arrow-down-right-circle::before { content: "\f120"; }
.bi-arrow-down-right-square-fill::before { content: "\f121"; }
.bi-arrow-down-right-square::before { content: "\f122"; }
.bi-arrow-down-right::before { content: "\f123"; }
.bi-arrow-down-short::before { content: "\f124"; }
.bi-arrow-down-square-fill::before { content: "\f125"; }
.bi-arrow-down-square::before { content: "\f126"; }
.bi-arrow-down-up::before { content: "\f127"; }
.bi-arrow-down::before { content: "\f128"; }
.bi-arrow-left-circle-fill::before { content: "\f129"; }
.bi-arrow-left-circle::before { content: "\f12a"; }
.bi-arrow-left-right::before { content: "\f12b"; }
.bi-arrow-left-short::before { content: "\f12c"; }
.bi-arrow-left-square-fill::before { content: "\f12d"; }
.bi-arrow-left-square::before { content: "\f12e"; }
.bi-arrow-left::before { content: "\f12f"; }
.bi-arrow-repeat::before { content: "\f130"; }
.bi-arrow-return-left::before { content: "\f131"; }
.bi-arrow-return-right::before { content: "\f132"; }
.bi-arrow-right-circle-fill::before { content: "\f133"; }
.bi-arrow-right-circle::before { content: "\f134"; }
.bi-arrow-right-short::before { content: "\f135"; }
.bi-arrow-right-square-fill::before { content: "\f136"; }
.bi-arrow-right-square::before { content: "\f137"; }
.bi-arrow-right::before { content: "\f138"; }
.bi-arrow-up-circle-fill::before { content: "\f139"; }
.bi-arrow-up-circle::before { content: "\f13a"; }
.bi-arrow-up-left-circle-fill::before { content: "\f13b"; }
.bi-arrow-up-left-circle::before { content: "\f13c"; }
.bi-arrow-up-left-square-fill::before { content: "\f13d"; }
.bi-arrow-up-left-square::before { content: "\f13e"; }
.bi-arrow-up-left::before { content: "\f13f"; }
.bi-arrow-up-right-circle-fill::before { content: "\f140"; }
.bi-arrow-up-right-circle::before { content: "\f141"; }
.bi-arrow-up-right-square-fill::before { content: "\f142"; }
.bi-arrow-up-right-square::before { content: "\f143"; }
.bi-arrow-up-right::before { content: "\f144"; }
.bi-arrow-up-short::before { content: "\f145"; }
.bi-arrow-up-square-fill::before { content: "\f146"; }
.bi-arrow-up-square::before { content: "\f147"; }
.bi-arrow-up::before { content: "\f148"; }
.bi-arrows-angle-contract::before { content: "\f149"; }
.bi-arrows-angle-expand::before { content: "\f14a"; }
.bi-arrows-collapse::before { content: "\f14b"; }
.bi-arrows-expand::before { content: "\f14c"; }
.bi-arrows-fullscreen::before { content: "\f14d"; }
.bi-arrows-move::before { content: "\f14e"; }
.bi-aspect-ratio-fill::before { content: "\f14f"; }
.bi-aspect-ratio::before { content: "\f150"; }
.bi-asterisk::before { content: "\f151"; }
.bi-at::before { content: "\f152"; }
.bi-award-fill::before { content: "\f153"; }
.bi-award::before { content: "\f154"; }
.bi-back::before { content: "\f155"; }
.bi-backspace-fill::before { content: "\f156"; }
.bi-backspace-reverse-fill::before { content: "\f157"; }
.bi-backspace-reverse::before { content: "\f158"; }
.bi-backspace::before { content: "\f159"; }
.bi-badge-3d-fill::before { content: "\f15a"; }
.bi-badge-3d::before { content: "\f15b"; }
.bi-badge-4k-fill::before { content: "\f15c"; }
.bi-badge-4k::before { content: "\f15d"; }
.bi-badge-8k-fill::before { content: "\f15e"; }
.bi-badge-8k::before { content: "\f15f"; }
.bi-badge-ad-fill::before { content: "\f160"; }
.bi-badge-ad::before { content: "\f161"; }
.bi-badge-ar-fill::before { content: "\f162"; }
.bi-badge-ar::before { content: "\f163"; }
.bi-badge-cc-fill::before { content: "\f164"; }
.bi-badge-cc::before { content: "\f165"; }
.bi-badge-hd-fill::before { content: "\f166"; }
.bi-badge-hd::before { content: "\f167"; }
.bi-badge-tm-fill::before { content: "\f168"; }
.bi-badge-tm::before { content: "\f169"; }
.bi-badge-vo-fill::before { content: "\f16a"; }
.bi-badge-vo::before { content: "\f16b"; }
.bi-badge-vr-fill::before { content: "\f16c"; }
.bi-badge-vr::before { content: "\f16d"; }
.bi-badge-wc-fill::before { content: "\f16e"; }
.bi-badge-wc::before { content: "\f16f"; }
.bi-bag-check-fill::before { content: "\f170"; }
.bi-bag-check::before { content: "\f171"; }
.bi-bag-dash-fill::before { content: "\f172"; }
.bi-bag-dash::before { content: "\f173"; }
.bi-bag-fill::before { content: "\f174"; }
.bi-bag-plus-fill::before { content: "\f175"; }
.bi-bag-plus::before { content: "\f176"; }
.bi-bag-x-fill::before { content: "\f177"; }
.bi-bag-x::before { content: "\f178"; }
.bi-bag::before { content: "\f179"; }
.bi-bar-chart-fill::before { content: "\f17a"; }
.bi-bar-chart-line-fill::before { content: "\f17b"; }
.bi-bar-chart-line::before { content: "\f17c"; }
.bi-bar-chart-steps::before { content: "\f17d"; }
.bi-bar-chart::before { content: "\f17e"; }
.bi-basket-fill::before { content: "\f17f"; }
.bi-basket::before { content: "\f180"; }
.bi-basket2-fill::before { content: "\f181"; }
.bi-basket2::before { content: "\f182"; }
.bi-basket3-fill::before { content: "\f183"; }
.bi-basket3::before { content: "\f184"; }
.bi-battery-charging::before { content: "\f185"; }
.bi-battery-full::before { content: "\f186"; }
.bi-battery-half::before { content: "\f187"; }
.bi-battery::before { content: "\f188"; }
.bi-bell-fill::before { content: "\f189"; }
.bi-bell::before { content: "\f18a"; }
.bi-bezier::before { content: "\f18b"; }
.bi-bezier2::before { content: "\f18c"; }
.bi-bicycle::before { content: "\f18d"; }
.bi-binoculars-fill::before { content: "\f18e"; }
.bi-binoculars::before { content: "\f18f"; }
.bi-blockquote-left::before { content: "\f190"; }
.bi-blockquote-right::before { content: "\f191"; }
.bi-book-fill::before { content: "\f192"; }
.bi-book-half::before { content: "\f193"; }
.bi-book::before { content: "\f194"; }
.bi-bookmark-check-fill::before { content: "\f195"; }
.bi-bookmark-check::before { content: "\f196"; }
.bi-bookmark-dash-fill::before { content: "\f197"; }
.bi-bookmark-dash::before { content: "\f198"; }
.bi-bookmark-fill::before { content: "\f199"; }
.bi-bookmark-heart-fill::before { content: "\f19a"; }
.bi-bookmark-heart::before { content: "\f19b"; }
.bi-bookmark-plus-fill::before { content: "\f19c"; }
.bi-bookmark-plus::before { content: "\f19d"; }
.bi-bookmark-star-fill::before { content: "\f19e"; }
.bi-bookmark-star::before { content: "\f19f"; }
.bi-bookmark-x-fill::before { content: "\f1a0"; }
.bi-bookmark-x::before { content: "\f1a1"; }
.bi-bookmark::before { content: "\f1a2"; }
.bi-bookmarks-fill::before { content: "\f1a3"; }
.bi-bookmarks::before { content: "\f1a4"; }
.bi-bookshelf::before { content: "\f1a5"; }
.bi-bootstrap-fill::before { content: "\f1a6"; }
.bi-bootstrap-reboot::before { content: "\f1a7"; }
.bi-bootstrap::before { content: "\f1a8"; }
.bi-border-all::before { content: "\f1a9"; }
.bi-border-bottom::before { content: "\f1aa"; }
.bi-border-center::before { content: "\f1ab"; }
.bi-border-inner::before { content: "\f1ac"; }
.bi-border-left::before { content: "\f1ad"; }
.bi-border-middle::before { content: "\f1ae"; }
.bi-border-outer::before { content: "\f1af"; }
.bi-border-right::before { content: "\f1b0"; }
.bi-border-style::before { content: "\f1b1"; }
.bi-border-top::before { content: "\f1b2"; }
.bi-border-width::before { content: "\f1b3"; }
.bi-border::before { content: "\f1b4"; }
.bi-bounding-box-circles::before { content: "\f1b5"; }
.bi-bounding-box::before { content: "\f1b6"; }
.bi-box-arrow-down-left::before { content: "\f1b7"; }
.bi-box-arrow-down-right::before { content: "\f1b8"; }
.bi-box-arrow-down::before { content: "\f1b9"; }
.bi-box-arrow-in-down-left::before { content: "\f1ba"; }
.bi-box-arrow-in-down-right::before { content: "\f1bb"; }
.bi-box-arrow-in-down::before { content: "\f1bc"; }
.bi-box-arrow-in-left::before { content: "\f1bd"; }
.bi-box-arrow-in-right::before { content: "\f1be"; }
.bi-box-arrow-in-up-left::before { content: "\f1bf"; }
.bi-box-arrow-in-up-right::before { content: "\f1c0"; }
.bi-box-arrow-in-up::before { content: "\f1c1"; }
.bi-box-arrow-left::before { content: "\f1c2"; }
.bi-box-arrow-right::before { content: "\f1c3"; }
.bi-box-arrow-up-left::before { content: "\f1c4"; }
.bi-box-arrow-up-right::before { content: "\f1c5"; }
.bi-box-arrow-up::before { content: "\f1c6"; }
.bi-box-seam::before { content: "\f1c7"; }
.bi-box::before { content: "\f1c8"; }
.bi-braces::before { content: "\f1c9"; }
.bi-bricks::before { content: "\f1ca"; }
.bi-briefcase-fill::before { content: "\f1cb"; }
.bi-briefcase::before { content: "\f1cc"; }
.bi-brightness-alt-high-fill::before { content: "\f1cd"; }
.bi-brightness-alt-high::before { content: "\f1ce"; }
.bi-brightness-alt-low-fill::before { content: "\f1cf"; }
.bi-brightness-alt-low::before { content: "\f1d0"; }
.bi-brightness-high-fill::before { content: "\f1d1"; }
.bi-brightness-high::before { content: "\f1d2"; }
.bi-brightness-low-fill::before { content: "\f1d3"; }
.bi-brightness-low::before { content: "\f1d4"; }
.bi-broadcast-pin::before { content: "\f1d5"; }
.bi-broadcast::before { content: "\f1d6"; }
.bi-brush-fill::before { content: "\f1d7"; }
.bi-brush::before { content: "\f1d8"; }
.bi-bucket-fill::before { content: "\f1d9"; }
.bi-bucket::before { content: "\f1da"; }
.bi-bug-fill::before { content: "\f1db"; }
.bi-bug::before { content: "\f1dc"; }
.bi-building::before { content: "\f1dd"; }
.bi-bullseye::before { content: "\f1de"; }
.bi-calculator-fill::before { content: "\f1df"; }
.bi-calculator::before { content: "\f1e0"; }
.bi-calendar-check-fill::before { content: "\f1e1"; }
.bi-calendar-check::before { content: "\f1e2"; }
.bi-calendar-date-fill::before { content: "\f1e3"; }
.bi-calendar-date::before { content: "\f1e4"; }
.bi-calendar-day-fill::before { content: "\f1e5"; }
.bi-calendar-day::before { content: "\f1e6"; }
.bi-calendar-event-fill::before { content: "\f1e7"; }
.bi-calendar-event::before { content: "\f1e8"; }
.bi-calendar-fill::before { content: "\f1e9"; }
.bi-calendar-minus-fill::before { content: "\f1ea"; }
.bi-calendar-minus::before { content: "\f1eb"; }
.bi-calendar-month-fill::before { content: "\f1ec"; }
.bi-calendar-month::before { content: "\f1ed"; }
.bi-calendar-plus-fill::before { content: "\f1ee"; }
.bi-calendar-plus::before { content: "\f1ef"; }
.bi-calendar-range-fill::before { content: "\f1f0"; }
.bi-calendar-range::before { content: "\f1f1"; }
.bi-calendar-week-fill::before { content: "\f1f2"; }
.bi-calendar-week::before { content: "\f1f3"; }
.bi-calendar-x-fill::before { content: "\f1f4"; }
.bi-calendar-x::before { content: "\f1f5"; }
.bi-calendar::before { content: "\f1f6"; }
.bi-calendar2-check-fill::before { content: "\f1f7"; }
.bi-calendar2-check::before { content: "\f1f8"; }
.bi-calendar2-date-fill::before { content: "\f1f9"; }
.bi-calendar2-date::before { content: "\f1fa"; }
.bi-calendar2-day-fill::before { content: "\f1fb"; }
.bi-calendar2-day::before { content: "\f1fc"; }
.bi-calendar2-event-fill::before { content: "\f1fd"; }
.bi-calendar2-event::before { content: "\f1fe"; }
.bi-calendar2-fill::before { content: "\f1ff"; }
.bi-calendar2-minus-fill::before { content: "\f200"; }
.bi-calendar2-minus::before { content: "\f201"; }
.bi-calendar2-month-fill::before { content: "\f202"; }
.bi-calendar2-month::before { content: "\f203"; }
.bi-calendar2-plus-fill::before { content: "\f204"; }
.bi-calendar2-plus::before { content: "\f205"; }
.bi-calendar2-range-fill::before { content: "\f206"; }
.bi-calendar2-range::before { content: "\f207"; }
.bi-calendar2-week-fill::before { content: "\f208"; }
.bi-calendar2-week::before { content: "\f209"; }
.bi-calendar2-x-fill::before { content: "\f20a"; }
.bi-calendar2-x::before { content: "\f20b"; }
.bi-calendar2::before { content: "\f20c"; }
.bi-calendar3-event-fill::before { content: "\f20d"; }
.bi-calendar3-event::before { content: "\f20e"; }
.bi-calendar3-fill::before { content: "\f20f"; }
.bi-calendar3-range-fill::before { content: "\f210"; }
.bi-calendar3-range::before { content: "\f211"; }
.bi-calendar3-week-fill::before { content: "\f212"; }
.bi-calendar3-week::before { content: "\f213"; }
.bi-calendar3::before { content: "\f214"; }
.bi-calendar4-event::before { content: "\f215"; }
.bi-calendar4-range::before { content: "\f216"; }
.bi-calendar4-week::before { content: "\f217"; }
.bi-calendar4::before { content: "\f218"; }
.bi-camera-fill::before { content: "\f219"; }
.bi-camera-reels-fill::before { content: "\f21a"; }
.bi-camera-reels::before { content: "\f21b"; }
.bi-camera-video-fill::before { content: "\f21c"; }
.bi-camera-video-off-fill::before { content: "\f21d"; }
.bi-camera-video-off::before { content: "\f21e"; }
.bi-camera-video::before { content: "\f21f"; }
.bi-camera::before { content: "\f220"; }
.bi-camera2::before { content: "\f221"; }
.bi-capslock-fill::before { content: "\f222"; }
.bi-capslock::before { content: "\f223"; }
.bi-card-checklist::before { content: "\f224"; }
.bi-card-heading::before { content: "\f225"; }
.bi-card-image::before { content: "\f226"; }
.bi-card-list::before { content: "\f227"; }
.bi-card-text::before { content: "\f228"; }
.bi-caret-down-fill::before { content: "\f229"; }
.bi-caret-down-square-fill::before { content: "\f22a"; }
.bi-caret-down-square::before { content: "\f22b"; }
.bi-caret-down::before { content: "\f22c"; }
.bi-caret-left-fill::before { content: "\f22d"; }
.bi-caret-left-square-fill::before { content: "\f22e"; }
.bi-caret-left-square::before { content: "\f22f"; }
.bi-caret-left::before { content: "\f230"; }
.bi-caret-right-fill::before { content: "\f231"; }
.bi-caret-right-square-fill::before { content: "\f232"; }
.bi-caret-right-square::before { content: "\f233"; }
.bi-caret-right::before { content: "\f234"; }
.bi-caret-up-fill::before { content: "\f235"; }
.bi-caret-up-square-fill::before { content: "\f236"; }
.bi-caret-up-square::before { content: "\f237"; }
.bi-caret-up::before { content: "\f238"; }
.bi-cart-check-fill::before { content: "\f239"; }
.bi-cart-check::before { content: "\f23a"; }
.bi-cart-dash-fill::before { content: "\f23b"; }
.bi-cart-dash::before { content: "\f23c"; }
.bi-cart-fill::before { content: "\f23d"; }
.bi-cart-plus-fill::before { content: "\f23e"; }
.bi-cart-plus::before { content: "\f23f"; }
.bi-cart-x-fill::before { content: "\f240"; }
.bi-cart-x::before { content: "\f241"; }
.bi-cart::before { content: "\f242"; }
.bi-cart2::before { content: "\f243"; }
.bi-cart3::before { content: "\f244"; }
.bi-cart4::before { content: "\f245"; }
.bi-cash-stack::before { content: "\f246"; }
.bi-cash::before { content: "\f247"; }
.bi-cast::before { content: "\f248"; }
.bi-chat-dots-fill::before { content: "\f249"; }
.bi-chat-dots::before { content: "\f24a"; }
.bi-chat-fill::before { content: "\f24b"; }
.bi-chat-left-dots-fill::before { content: "\f24c"; }
.bi-chat-left-dots::before { content: "\f24d"; }
.bi-chat-left-fill::before { content: "\f24e"; }
.bi-chat-left-quote-fill::before { content: "\f24f"; }
.bi-chat-left-quote::before { content: "\f250"; }
.bi-chat-left-text-fill::before { content: "\f251"; }
.bi-chat-left-text::before { content: "\f252"; }
.bi-chat-left::before { content: "\f253"; }
.bi-chat-quote-fill::before { content: "\f254"; }
.bi-chat-quote::before { content: "\f255"; }
.bi-chat-right-dots-fill::before { content: "\f256"; }
.bi-chat-right-dots::before { content: "\f257"; }
.bi-chat-right-fill::before { content: "\f258"; }
.bi-chat-right-quote-fill::before { content: "\f259"; }
.bi-chat-right-quote::before { content: "\f25a"; }
.bi-chat-right-text-fill::before { content: "\f25b"; }
.bi-chat-right-text::before { content: "\f25c"; }
.bi-chat-right::before { content: "\f25d"; }
.bi-chat-square-dots-fill::before { content: "\f25e"; }
.bi-chat-square-dots::before { content: "\f25f"; }
.bi-chat-square-fill::before { content: "\f260"; }
.bi-chat-square-quote-fill::before { content: "\f261"; }
.bi-chat-square-quote::before { content: "\f262"; }
.bi-chat-square-text-fill::before { content: "\f263"; }
.bi-chat-square-text::before { content: "\f264"; }
.bi-chat-square::before { content: "\f265"; }
.bi-chat-text-fill::before { content: "\f266"; }
.bi-chat-text::before { content: "\f267"; }
.bi-chat::before { content: "\f268"; }
.bi-check-all::before { content: "\f269"; }
.bi-check-circle-fill::before { content: "\f26a"; }
.bi-check-circle::before { content: "\f26b"; }
.bi-check-square-fill::before { content: "\f26c"; }
.bi-check-square::before { content: "\f26d"; }
.bi-check::before { content: "\f26e"; }
.bi-check2-all::before { content: "\f26f"; }
.bi-check2-circle::before { content: "\f270"; }
.bi-check2-square::before { content: "\f271"; }
.bi-check2::before { content: "\f272"; }
.bi-chevron-bar-contract::before { content: "\f273"; }
.bi-chevron-bar-down::before { content: "\f274"; }
.bi-chevron-bar-expand::before { content: "\f275"; }
.bi-chevron-bar-left::before { content: "\f276"; }
.bi-chevron-bar-right::before { content: "\f277"; }
.bi-chevron-bar-up::before { content: "\f278"; }
.bi-chevron-compact-down::before { content: "\f279"; }
.bi-chevron-compact-left::before { content: "\f27a"; }
.bi-chevron-compact-right::before { content: "\f27b"; }
.bi-chevron-compact-up::before { content: "\f27c"; }
.bi-chevron-contract::before { content: "\f27d"; }
.bi-chevron-double-down::before { content: "\f27e"; }
.bi-chevron-double-left::before { content: "\f27f"; }
.bi-chevron-double-right::before { content: "\f280"; }
.bi-chevron-double-up::before { content: "\f281"; }
.bi-chevron-down::before { content: "\f282"; }
.bi-chevron-expand::before { content: "\f283"; }
.bi-chevron-left::before { content: "\f284"; }
.bi-chevron-right::before { content: "\f285"; }
.bi-chevron-up::before { content: "\f286"; }
.bi-circle-fill::before { content: "\f287"; }
.bi-circle-half::before { content: "\f288"; }
.bi-circle-square::before { content: "\f289"; }
.bi-circle::before { content: "\f28a"; }
.bi-clipboard-check::before { content: "\f28b"; }
.bi-clipboard-data::before { content: "\f28c"; }
.bi-clipboard-minus::before { content: "\f28d"; }
.bi-clipboard-plus::before { content: "\f28e"; }
.bi-clipboard-x::before { content: "\f28f"; }
.bi-clipboard::before { content: "\f290"; }
.bi-clock-fill::before { content: "\f291"; }
.bi-clock-history::before { content: "\f292"; }
.bi-clock::before { content: "\f293"; }
.bi-cloud-arrow-down-fill::before { content: "\f294"; }
.bi-cloud-arrow-down::before { content: "\f295"; }
.bi-cloud-arrow-up-fill::before { content: "\f296"; }
.bi-cloud-arrow-up::before { content: "\f297"; }
.bi-cloud-check-fill::before { content: "\f298"; }
.bi-cloud-check::before { content: "\f299"; }
.bi-cloud-download-fill::before { content: "\f29a"; }
.bi-cloud-download::before { content: "\f29b"; }
.bi-cloud-drizzle-fill::before { content: "\f29c"; }
.bi-cloud-drizzle::before { content: "\f29d"; }
.bi-cloud-fill::before { content: "\f29e"; }
.bi-cloud-fog-fill::before { content: "\f29f"; }
.bi-cloud-fog::before { content: "\f2a0"; }
.bi-cloud-fog2-fill::before { content: "\f2a1"; }
.bi-cloud-fog2::before { content: "\f2a2"; }
.bi-cloud-hail-fill::before { content: "\f2a3"; }
.bi-cloud-hail::before { content: "\f2a4"; }
.bi-cloud-haze-fill::before { content: "\f2a6"; }
.bi-cloud-haze::before { content: "\f2a7"; }
.bi-cloud-haze2-fill::before { content: "\f2a8"; }
.bi-cloud-lightning-fill::before { content: "\f2a9"; }
.bi-cloud-lightning-rain-fill::before { content: "\f2aa"; }
.bi-cloud-lightning-rain::before { content: "\f2ab"; }
.bi-cloud-lightning::before { content: "\f2ac"; }
.bi-cloud-minus-fill::before { content: "\f2ad"; }
.bi-cloud-minus::before { content: "\f2ae"; }
.bi-cloud-moon-fill::before { content: "\f2af"; }
.bi-cloud-moon::before { content: "\f2b0"; }
.bi-cloud-plus-fill::before { content: "\f2b1"; }
.bi-cloud-plus::before { content: "\f2b2"; }
.bi-cloud-rain-fill::before { content: "\f2b3"; }
.bi-cloud-rain-heavy-fill::before { content: "\f2b4"; }
.bi-cloud-rain-heavy::before { content: "\f2b5"; }
.bi-cloud-rain::before { content: "\f2b6"; }
.bi-cloud-slash-fill::before { content: "\f2b7"; }
.bi-cloud-slash::before { content: "\f2b8"; }
.bi-cloud-sleet-fill::before { content: "\f2b9"; }
.bi-cloud-sleet::before { content: "\f2ba"; }
.bi-cloud-snow-fill::before { content: "\f2bb"; }
.bi-cloud-snow::before { content: "\f2bc"; }
.bi-cloud-sun-fill::before { content: "\f2bd"; }
.bi-cloud-sun::before { content: "\f2be"; }
.bi-cloud-upload-fill::before { content: "\f2bf"; }
.bi-cloud-upload::before { content: "\f2c0"; }
.bi-cloud::before { content: "\f2c1"; }
.bi-clouds-fill::before { content: "\f2c2"; }
.bi-clouds::before { content: "\f2c3"; }
.bi-cloudy-fill::before { content: "\f2c4"; }
.bi-cloudy::before { content: "\f2c5"; }
.bi-code-slash::before { content: "\f2c6"; }
.bi-code-square::before { content: "\f2c7"; }
.bi-code::before { content: "\f2c8"; }
.bi-collection-fill::before { content: "\f2c9"; }
.bi-collection-play-fill::before { content: "\f2ca"; }
.bi-collection-play::before { content: "\f2cb"; }
.bi-collection::before { content: "\f2cc"; }
.bi-columns-gap::before { content: "\f2cd"; }
.bi-columns::before { content: "\f2ce"; }
.bi-command::before { content: "\f2cf"; }
.bi-compass-fill::before { content: "\f2d0"; }
.bi-compass::before { content: "\f2d1"; }
.bi-cone-striped::before { content: "\f2d2"; }
.bi-cone::before { content: "\f2d3"; }
.bi-controller::before { content: "\f2d4"; }
.bi-cpu-fill::before { content: "\f2d5"; }
.bi-cpu::before { content: "\f2d6"; }
.bi-credit-card-2-back-fill::before { content: "\f2d7"; }
.bi-credit-card-2-back::before { content: "\f2d8"; }
.bi-credit-card-2-front-fill::before { content: "\f2d9"; }
.bi-credit-card-2-front::before { content: "\f2da"; }
.bi-credit-card-fill::before { content: "\f2db"; }
.bi-credit-card::before { content: "\f2dc"; }
.bi-crop::before { content: "\f2dd"; }
.bi-cup-fill::before { content: "\f2de"; }
.bi-cup-straw::before { content: "\f2df"; }
.bi-cup::before { content: "\f2e0"; }
.bi-cursor-fill::before { content: "\f2e1"; }
.bi-cursor-text::before { content: "\f2e2"; }
.bi-cursor::before { content: "\f2e3"; }
.bi-dash-circle-dotted::before { content: "\f2e4"; }
.bi-dash-circle-fill::before { content: "\f2e5"; }
.bi-dash-circle::before { content: "\f2e6"; }
.bi-dash-square-dotted::before { content: "\f2e7"; }
.bi-dash-square-fill::before { content: "\f2e8"; }
.bi-dash-square::before { content: "\f2e9"; }
.bi-dash::before { content: "\f2ea"; }
.bi-diagram-2-fill::before { content: "\f2eb"; }
.bi-diagram-2::before { content: "\f2ec"; }
.bi-diagram-3-fill::before { content: "\f2ed"; }
.bi-diagram-3::before { content: "\f2ee"; }
.bi-diamond-fill::before { content: "\f2ef"; }
.bi-diamond-half::before { content: "\f2f0"; }
.bi-diamond::before { content: "\f2f1"; }
.bi-dice-1-fill::before { content: "\f2f2"; }
.bi-dice-1::before { content: "\f2f3"; }
.bi-dice-2-fill::before { content: "\f2f4"; }
.bi-dice-2::before { content: "\f2f5"; }
.bi-dice-3-fill::before { content: "\f2f6"; }
.bi-dice-3::before { content: "\f2f7"; }
.bi-dice-4-fill::before { content: "\f2f8"; }
.bi-dice-4::before { content: "\f2f9"; }
.bi-dice-5-fill::before { content: "\f2fa"; }
.bi-dice-5::before { content: "\f2fb"; }
.bi-dice-6-fill::before { content: "\f2fc"; }
.bi-dice-6::before { content: "\f2fd"; }
.bi-disc-fill::before { content: "\f2fe"; }
.bi-disc::before { content: "\f2ff"; }
.bi-discord::before { content: "\f300"; }
.bi-display-fill::before { content: "\f301"; }
.bi-display::before { content: "\f302"; }
.bi-distribute-horizontal::before { content: "\f303"; }
.bi-distribute-vertical::before { content: "\f304"; }
.bi-door-closed-fill::before { content: "\f305"; }
.bi-door-closed::before { content: "\f306"; }
.bi-door-open-fill::before { content: "\f307"; }
.bi-door-open::before { content: "\f308"; }
.bi-dot::before { content: "\f309"; }
.bi-download::before { content: "\f30a"; }
.bi-droplet-fill::before { content: "\f30b"; }
.bi-droplet-half::before { content: "\f30c"; }
.bi-droplet::before { content: "\f30d"; }
.bi-earbuds::before { content: "\f30e"; }
.bi-easel-fill::before { content: "\f30f"; }
.bi-easel::before { content: "\f310"; }
.bi-egg-fill::before { content: "\f311"; }
.bi-egg-fried::before { content: "\f312"; }
.bi-egg::before { content: "\f313"; }
.bi-eject-fill::before { content: "\f314"; }
.bi-eject::before { content: "\f315"; }
.bi-emoji-angry-fill::before { content: "\f316"; }
.bi-emoji-angry::before { content: "\f317"; }
.bi-emoji-dizzy-fill::before { content: "\f318"; }
.bi-emoji-dizzy::before { content: "\f319"; }
.bi-emoji-expressionless-fill::before { content: "\f31a"; }
.bi-emoji-expressionless::before { content: "\f31b"; }
.bi-emoji-frown-fill::before { content: "\f31c"; }
.bi-emoji-frown::before { content: "\f31d"; }
.bi-emoji-heart-eyes-fill::before { content: "\f31e"; }
.bi-emoji-heart-eyes::before { content: "\f31f"; }
.bi-emoji-laughing-fill::before { content: "\f320"; }
.bi-emoji-laughing::before { content: "\f321"; }
.bi-emoji-neutral-fill::before { content: "\f322"; }
.bi-emoji-neutral::before { content: "\f323"; }
.bi-emoji-smile-fill::before { content: "\f324"; }
.bi-emoji-smile-upside-down-fill::before { content: "\f325"; }
.bi-emoji-smile-upside-down::before { content: "\f326"; }
.bi-emoji-smile::before { content: "\f327"; }
.bi-emoji-sunglasses-fill::before { content: "\f328"; }
.bi-emoji-sunglasses::before { content: "\f329"; }
.bi-emoji-wink-fill::before { content: "\f32a"; }
.bi-emoji-wink::before { content: "\f32b"; }
.bi-envelope-fill::before { content: "\f32c"; }
.bi-envelope-open-fill::before { content: "\f32d"; }
.bi-envelope-open::before { content: "\f32e"; }
.bi-envelope::before { content: "\f32f"; }
.bi-eraser-fill::before { content: "\f330"; }
.bi-eraser::before { content: "\f331"; }
.bi-exclamation-circle-fill::before { content: "\f332"; }
.bi-exclamation-circle::before { content: "\f333"; }
.bi-exclamation-diamond-fill::before { content: "\f334"; }
.bi-exclamation-diamond::before { content: "\f335"; }
.bi-exclamation-octagon-fill::before { content: "\f336"; }
.bi-exclamation-octagon::before { content: "\f337"; }
.bi-exclamation-square-fill::before { content: "\f338"; }
.bi-exclamation-square::before { content: "\f339"; }
.bi-exclamation-triangle-fill::before { content: "\f33a"; }
.bi-exclamation-triangle::before { content: "\f33b"; }
.bi-exclamation::before { content: "\f33c"; }
.bi-exclude::before { content: "\f33d"; }
.bi-eye-fill::before { content: "\f33e"; }
.bi-eye-slash-fill::before { content: "\f33f"; }
.bi-eye-slash::before { content: "\f340"; }
.bi-eye::before { content: "\f341"; }
.bi-eyedropper::before { content: "\f342"; }
.bi-eyeglasses::before { content: "\f343"; }
.bi-facebook::before { content: "\f344"; }
.bi-file-arrow-down-fill::before { content: "\f345"; }
.bi-file-arrow-down::before { content: "\f346"; }
.bi-file-arrow-up-fill::before { content: "\f347"; }
.bi-file-arrow-up::before { content: "\f348"; }
.bi-file-bar-graph-fill::before { content: "\f349"; }
.bi-file-bar-graph::before { content: "\f34a"; }
.bi-file-binary-fill::before { content: "\f34b"; }
.bi-file-binary::before { content: "\f34c"; }
.bi-file-break-fill::before { content: "\f34d"; }
.bi-file-break::before { content: "\f34e"; }
.bi-file-check-fill::before { content: "\f34f"; }
.bi-file-check::before { content: "\f350"; }
.bi-file-code-fill::before { content: "\f351"; }
.bi-file-code::before { content: "\f352"; }
.bi-file-diff-fill::before { content: "\f353"; }
.bi-file-diff::before { content: "\f354"; }
.bi-file-earmark-arrow-down-fill::before { content: "\f355"; }
.bi-file-earmark-arrow-down::before { content: "\f356"; }
.bi-file-earmark-arrow-up-fill::before { content: "\f357"; }
.bi-file-earmark-arrow-up::before { content: "\f358"; }
.bi-file-earmark-bar-graph-fill::before { content: "\f359"; }
.bi-file-earmark-bar-graph::before { content: "\f35a"; }
.bi-file-earmark-binary-fill::before { content: "\f35b"; }
.bi-file-earmark-binary::before { content: "\f35c"; }
.bi-file-earmark-break-fill::before { content: "\f35d"; }
.bi-file-earmark-break::before { content: "\f35e"; }
.bi-file-earmark-check-fill::before { content: "\f35f"; }
.bi-file-earmark-check::before { content: "\f360"; }
.bi-file-earmark-code-fill::before { content: "\f361"; }
.bi-file-earmark-code::before { content: "\f362"; }
.bi-file-earmark-diff-fill::before { content: "\f363"; }
.bi-file-earmark-diff::before { content: "\f364"; }
.bi-file-earmark-easel-fill::before { content: "\f365"; }
.bi-file-earmark-easel::before { content: "\f366"; }
.bi-file-earmark-excel-fill::before { content: "\f367"; }
.bi-file-earmark-excel::before { content: "\f368"; }
.bi-file-earmark-fill::before { content: "\f369"; }
.bi-file-earmark-font-fill::before { content: "\f36a"; }
.bi-file-earmark-font::before { content: "\f36b"; }
.bi-file-earmark-image-fill::before { content: "\f36c"; }
.bi-file-earmark-image::before { content: "\f36d"; }
.bi-file-earmark-lock-fill::before { content: "\f36e"; }
.bi-file-earmark-lock::before { content: "\f36f"; }
.bi-file-earmark-lock2-fill::before { content: "\f370"; }
.bi-file-earmark-lock2::before { content: "\f371"; }
.bi-file-earmark-medical-fill::before { content: "\f372"; }
.bi-file-earmark-medical::before { content: "\f373"; }
.bi-file-earmark-minus-fill::before { content: "\f374"; }
.bi-file-earmark-minus::before { content: "\f375"; }
.bi-file-earmark-music-fill::before { content: "\f376"; }
.bi-file-earmark-music::before { content: "\f377"; }
.bi-file-earmark-person-fill::before { content: "\f378"; }
.bi-file-earmark-person::before { content: "\f379"; }
.bi-file-earmark-play-fill::before { content: "\f37a"; }
.bi-file-earmark-play::before { content: "\f37b"; }
.bi-file-earmark-plus-fill::before { content: "\f37c"; }
.bi-file-earmark-plus::before { content: "\f37d"; }
.bi-file-earmark-post-fill::before { content: "\f37e"; }
.bi-file-earmark-post::before { content: "\f37f"; }
.bi-file-earmark-ppt-fill::before { content: "\f380"; }
.bi-file-earmark-ppt::before { content: "\f381"; }
.bi-file-earmark-richtext-fill::before { content: "\f382"; }
.bi-file-earmark-richtext::before { content: "\f383"; }
.bi-file-earmark-ruled-fill::before { content: "\f384"; }
.bi-file-earmark-ruled::before { content: "\f385"; }
.bi-file-earmark-slides-fill::before { content: "\f386"; }
.bi-file-earmark-slides::before { content: "\f387"; }
.bi-file-earmark-spreadsheet-fill::before { content: "\f388"; }
.bi-file-earmark-spreadsheet::before { content: "\f389"; }
.bi-file-earmark-text-fill::before { content: "\f38a"; }
.bi-file-earmark-text::before { content: "\f38b"; }
.bi-file-earmark-word-fill::before { content: "\f38c"; }
.bi-file-earmark-word::before { content: "\f38d"; }
.bi-file-earmark-x-fill::before { content: "\f38e"; }
.bi-file-earmark-x::before { content: "\f38f"; }
.bi-file-earmark-zip-fill::before { content: "\f390"; }
.bi-file-earmark-zip::before { content: "\f391"; }
.bi-file-earmark::before { content: "\f392"; }
.bi-file-easel-fill::before { content: "\f393"; }
.bi-file-easel::before { content: "\f394"; }
.bi-file-excel-fill::before { content: "\f395"; }
.bi-file-excel::before { content: "\f396"; }
.bi-file-fill::before { content: "\f397"; }
.bi-file-font-fill::before { content: "\f398"; }
.bi-file-font::before { content: "\f399"; }
.bi-file-image-fill::before { content: "\f39a"; }
.bi-file-image::before { content: "\f39b"; }
.bi-file-lock-fill::before { content: "\f39c"; }
.bi-file-lock::before { content: "\f39d"; }
.bi-file-lock2-fill::before { content: "\f39e"; }
.bi-file-lock2::before { content: "\f39f"; }
.bi-file-medical-fill::before { content: "\f3a0"; }
.bi-file-medical::before { content: "\f3a1"; }
.bi-file-minus-fill::before { content: "\f3a2"; }
.bi-file-minus::before { content: "\f3a3"; }
.bi-file-music-fill::before { content: "\f3a4"; }
.bi-file-music::before { content: "\f3a5"; }
.bi-file-person-fill::before { content: "\f3a6"; }
.bi-file-person::before { content: "\f3a7"; }
.bi-file-play-fill::before { content: "\f3a8"; }
.bi-file-play::before { content: "\f3a9"; }
.bi-file-plus-fill::before { content: "\f3aa"; }
.bi-file-plus::before { content: "\f3ab"; }
.bi-file-post-fill::before { content: "\f3ac"; }
.bi-file-post::before { content: "\f3ad"; }
.bi-file-ppt-fill::before { content: "\f3ae"; }
.bi-file-ppt::before { content: "\f3af"; }
.bi-file-richtext-fill::before { content: "\f3b0"; }
.bi-file-richtext::before { content: "\f3b1"; }
.bi-file-ruled-fill::before { content: "\f3b2"; }
.bi-file-ruled::before { content: "\f3b3"; }
.bi-file-slides-fill::before { content: "\f3b4"; }
.bi-file-slides::before { content: "\f3b5"; }
.bi-file-spreadsheet-fill::before { content: "\f3b6"; }
.bi-file-spreadsheet::before { content: "\f3b7"; }
.bi-file-text-fill::before { content: "\f3b8"; }
.bi-file-text::before { content: "\f3b9"; }
.bi-file-word-fill::before { content: "\f3ba"; }
.bi-file-word::before { content: "\f3bb"; }
.bi-file-x-fill::before { content: "\f3bc"; }
.bi-file-x::before { content: "\f3bd"; }
.bi-file-zip-fill::before { content: "\f3be"; }
.bi-file-zip::before { content: "\f3bf"; }
.bi-file::before { content: "\f3c0"; }
.bi-files-alt::before { content: "\f3c1"; }
.bi-files::before { content: "\f3c2"; }
.bi-film::before { content: "\f3c3"; }
.bi-filter-circle-fill::before { content: "\f3c4"; }
.bi-filter-circle::before { content: "\f3c5"; }
.bi-filter-left::before { content: "\f3c6"; }
.bi-filter-right::before { content: "\f3c7"; }
.bi-filter-square-fill::before { content: "\f3c8"; }
.bi-filter-square::before { content: "\f3c9"; }
.bi-filter::before { content: "\f3ca"; }
.bi-flag-fill::before { content: "\f3cb"; }
.bi-flag::before { content: "\f3cc"; }
.bi-flower1::before { content: "\f3cd"; }
.bi-flower2::before { content: "\f3ce"; }
.bi-flower3::before { content: "\f3cf"; }
.bi-folder-check::before { content: "\f3d0"; }
.bi-folder-fill::before { content: "\f3d1"; }
.bi-folder-minus::before { content: "\f3d2"; }
.bi-folder-plus::before { content: "\f3d3"; }
.bi-folder-symlink-fill::before { content: "\f3d4"; }
.bi-folder-symlink::before { content: "\f3d5"; }
.bi-folder-x::before { content: "\f3d6"; }
.bi-folder::before { content: "\f3d7"; }
.bi-folder2-open::before { content: "\f3d8"; }
.bi-folder2::before { content: "\f3d9"; }
.bi-fonts::before { content: "\f3da"; }
.bi-forward-fill::before { content: "\f3db"; }
.bi-forward::before { content: "\f3dc"; }
.bi-front::before { content: "\f3dd"; }
.bi-fullscreen-exit::before { content: "\f3de"; }
.bi-fullscreen::before { content: "\f3df"; }
.bi-funnel-fill::before { content: "\f3e0"; }
.bi-funnel::before { content: "\f3e1"; }
.bi-gear-fill::before { content: "\f3e2"; }
.bi-gear-wide-connected::before { content: "\f3e3"; }
.bi-gear-wide::before { content: "\f3e4"; }
.bi-gear::before { content: "\f3e5"; }
.bi-gem::before { content: "\f3e6"; }
.bi-geo-alt-fill::before { content: "\f3e7"; }
.bi-geo-alt::before { content: "\f3e8"; }
.bi-geo-fill::before { content: "\f3e9"; }
.bi-geo::before { content: "\f3ea"; }
.bi-gift-fill::before { content: "\f3eb"; }
.bi-gift::before { content: "\f3ec"; }
.bi-github::before { content: "\f3ed"; }
.bi-globe::before { content: "\f3ee"; }
.bi-globe2::before { content: "\f3ef"; }
.bi-google::before { content: "\f3f0"; }
.bi-graph-down::before { content: "\f3f1"; }
.bi-graph-up::before { content: "\f3f2"; }
.bi-grid-1x2-fill::before { content: "\f3f3"; }
.bi-grid-1x2::before { content: "\f3f4"; }
.bi-grid-3x2-gap-fill::before { content: "\f3f5"; }
.bi-grid-3x2-gap::before { content: "\f3f6"; }
.bi-grid-3x2::before { content: "\f3f7"; }
.bi-grid-3x3-gap-fill::before { content: "\f3f8"; }
.bi-grid-3x3-gap::before { content: "\f3f9"; }
.bi-grid-3x3::before { content: "\f3fa"; }
.bi-grid-fill::before { content: "\f3fb"; }
.bi-grid::before { content: "\f3fc"; }
.bi-grip-horizontal::before { content: "\f3fd"; }
.bi-grip-vertical::before { content: "\f3fe"; }
.bi-hammer::before { content: "\f3ff"; }
.bi-hand-index-fill::before { content: "\f400"; }
.bi-hand-index-thumb-fill::before { content: "\f401"; }
.bi-hand-index-thumb::before { content: "\f402"; }
.bi-hand-index::before { content: "\f403"; }
.bi-hand-thumbs-down-fill::before { content: "\f404"; }
.bi-hand-thumbs-down::before { content: "\f405"; }
.bi-hand-thumbs-up-fill::before { content: "\f406"; }
.bi-hand-thumbs-up::before { content: "\f407"; }
.bi-handbag-fill::before { content: "\f408"; }
.bi-handbag::before { content: "\f409"; }
.bi-hash::before { content: "\f40a"; }
.bi-hdd-fill::before { content: "\f40b"; }
.bi-hdd-network-fill::before { content: "\f40c"; }
.bi-hdd-network::before { content: "\f40d"; }
.bi-hdd-rack-fill::before { content: "\f40e"; }
.bi-hdd-rack::before { content: "\f40f"; }
.bi-hdd-stack-fill::before { content: "\f410"; }
.bi-hdd-stack::before { content: "\f411"; }
.bi-hdd::before { content: "\f412"; }
.bi-headphones::before { content: "\f413"; }
.bi-headset::before { content: "\f414"; }
.bi-heart-fill::before { content: "\f415"; }
.bi-heart-half::before { content: "\f416"; }
.bi-heart::before { content: "\f417"; }
.bi-heptagon-fill::before { content: "\f418"; }
.bi-heptagon-half::before { content: "\f419"; }
.bi-heptagon::before { content: "\f41a"; }
.bi-hexagon-fill::before { content: "\f41b"; }
.bi-hexagon-half::before { content: "\f41c"; }
.bi-hexagon::before { content: "\f41d"; }
.bi-hourglass-bottom::before { content: "\f41e"; }
.bi-hourglass-split::before { content: "\f41f"; }
.bi-hourglass-top::before { content: "\f420"; }
.bi-hourglass::before { content: "\f421"; }
.bi-house-door-fill::before { content: "\f422"; }
.bi-house-door::before { content: "\f423"; }
.bi-house-fill::before { content: "\f424"; }
.bi-house::before { content: "\f425"; }
.bi-hr::before { content: "\f426"; }
.bi-hurricane::before { content: "\f427"; }
.bi-image-alt::before { content: "\f428"; }
.bi-image-fill::before { content: "\f429"; }
.bi-image::before { content: "\f42a"; }
.bi-images::before { content: "\f42b"; }
.bi-inbox-fill::before { content: "\f42c"; }
.bi-inbox::before { content: "\f42d"; }
.bi-inboxes-fill::before { content: "\f42e"; }
.bi-inboxes::before { content: "\f42f"; }
.bi-info-circle-fill::before { content: "\f430"; }
.bi-info-circle::before { content: "\f431"; }
.bi-info-square-fill::before { content: "\f432"; }
.bi-info-square::before { content: "\f433"; }
.bi-info::before { content: "\f434"; }
.bi-input-cursor-text::before { content: "\f435"; }
.bi-input-cursor::before { content: "\f436"; }
.bi-instagram::before { content: "\f437"; }
.bi-intersect::before { content: "\f438"; }
.bi-journal-album::before { content: "\f439"; }
.bi-journal-arrow-down::before { content: "\f43a"; }
.bi-journal-arrow-up::before { content: "\f43b"; }
.bi-journal-bookmark-fill::before { content: "\f43c"; }
.bi-journal-bookmark::before { content: "\f43d"; }
.bi-journal-check::before { content: "\f43e"; }
.bi-journal-code::before { content: "\f43f"; }
.bi-journal-medical::before { content: "\f440"; }
.bi-journal-minus::before { content: "\f441"; }
.bi-journal-plus::before { content: "\f442"; }
.bi-journal-richtext::before { content: "\f443"; }
.bi-journal-text::before { content: "\f444"; }
.bi-journal-x::before { content: "\f445"; }
.bi-journal::before { content: "\f446"; }
.bi-journals::before { content: "\f447"; }
.bi-joystick::before { content: "\f448"; }
.bi-justify-left::before { content: "\f449"; }
.bi-justify-right::before { content: "\f44a"; }
.bi-justify::before { content: "\f44b"; }
.bi-kanban-fill::before { content: "\f44c"; }
.bi-kanban::before { content: "\f44d"; }
.bi-key-fill::before { content: "\f44e"; }
.bi-key::before { content: "\f44f"; }
.bi-keyboard-fill::before { content: "\f450"; }
.bi-keyboard::before { content: "\f451"; }
.bi-ladder::before { content: "\f452"; }
.bi-lamp-fill::before { content: "\f453"; }
.bi-lamp::before { content: "\f454"; }
.bi-laptop-fill::before { content: "\f455"; }
.bi-laptop::before { content: "\f456"; }
.bi-layer-backward::before { content: "\f457"; }
.bi-layer-forward::before { content: "\f458"; }
.bi-layers-fill::before { content: "\f459"; }
.bi-layers-half::before { content: "\f45a"; }
.bi-layers::before { content: "\f45b"; }
.bi-layout-sidebar-inset-reverse::before { content: "\f45c"; }
.bi-layout-sidebar-inset::before { content: "\f45d"; }
.bi-layout-sidebar-reverse::before { content: "\f45e"; }
.bi-layout-sidebar::before { content: "\f45f"; }
.bi-layout-split::before { content: "\f460"; }
.bi-layout-text-sidebar-reverse::before { content: "\f461"; }
.bi-layout-text-sidebar::before { content: "\f462"; }
.bi-layout-text-window-reverse::before { content: "\f463"; }
.bi-layout-text-window::before { content: "\f464"; }
.bi-layout-three-columns::before { content: "\f465"; }
.bi-layout-wtf::before { content: "\f466"; }
.bi-life-preserver::before { content: "\f467"; }
.bi-lightbulb-fill::before { content: "\f468"; }
.bi-lightbulb-off-fill::before { content: "\f469"; }
.bi-lightbulb-off::before { content: "\f46a"; }
.bi-lightbulb::before { content: "\f46b"; }
.bi-lightning-charge-fill::before { content: "\f46c"; }
.bi-lightning-charge::before { content: "\f46d"; }
.bi-lightning-fill::before { content: "\f46e"; }
.bi-lightning::before { content: "\f46f"; }
.bi-link-45deg::before { content: "\f470"; }
.bi-link::before { content: "\f471"; }
.bi-linkedin::before { content: "\f472"; }
.bi-list-check::before { content: "\f473"; }
.bi-list-nested::before { content: "\f474"; }
.bi-list-ol::before { content: "\f475"; }
.bi-list-stars::before { content: "\f476"; }
.bi-list-task::before { content: "\f477"; }
.bi-list-ul::before { content: "\f478"; }
.bi-list::before { content: "\f479"; }
.bi-lock-fill::before { content: "\f47a"; }
.bi-lock::before { content: "\f47b"; }
.bi-mailbox::before { content: "\f47c"; }
.bi-mailbox2::before { content: "\f47d"; }
.bi-map-fill::before { content: "\f47e"; }
.bi-map::before { content: "\f47f"; }
.bi-markdown-fill::before { content: "\f480"; }
.bi-markdown::before { content: "\f481"; }
.bi-mask::before { content: "\f482"; }
.bi-megaphone-fill::before { content: "\f483"; }
.bi-megaphone::before { content: "\f484"; }
.bi-menu-app-fill::before { content: "\f485"; }
.bi-menu-app::before { content: "\f486"; }
.bi-menu-button-fill::before { content: "\f487"; }
.bi-menu-button-wide-fill::before { content: "\f488"; }
.bi-menu-button-wide::before { content: "\f489"; }
.bi-menu-button::before { content: "\f48a"; }
.bi-menu-down::before { content: "\f48b"; }
.bi-menu-up::before { content: "\f48c"; }
.bi-mic-fill::before { content: "\f48d"; }
.bi-mic-mute-fill::before { content: "\f48e"; }
.bi-mic-mute::before { content: "\f48f"; }
.bi-mic::before { content: "\f490"; }
.bi-minecart-loaded::before { content: "\f491"; }
.bi-minecart::before { content: "\f492"; }
.bi-moisture::before { content: "\f493"; }
.bi-moon-fill::before { content: "\f494"; }
.bi-moon-stars-fill::before { content: "\f495"; }
.bi-moon-stars::before { content: "\f496"; }
.bi-moon::before { content: "\f497"; }
.bi-mouse-fill::before { content: "\f498"; }
.bi-mouse::before { content: "\f499"; }
.bi-mouse2-fill::before { content: "\f49a"; }
.bi-mouse2::before { content: "\f49b"; }
.bi-mouse3-fill::before { content: "\f49c"; }
.bi-mouse3::before { content: "\f49d"; }
.bi-music-note-beamed::before { content: "\f49e"; }
.bi-music-note-list::before { content: "\f49f"; }
.bi-music-note::before { content: "\f4a0"; }
.bi-music-player-fill::before { content: "\f4a1"; }
.bi-music-player::before { content: "\f4a2"; }
.bi-newspaper::before { content: "\f4a3"; }
.bi-node-minus-fill::before { content: "\f4a4"; }
.bi-node-minus::before { content: "\f4a5"; }
.bi-node-plus-fill::before { content: "\f4a6"; }
.bi-node-plus::before { content: "\f4a7"; }
.bi-nut-fill::before { content: "\f4a8"; }
.bi-nut::before { content: "\f4a9"; }
.bi-octagon-fill::before { content: "\f4aa"; }
.bi-octagon-half::before { content: "\f4ab"; }
.bi-octagon::before { content: "\f4ac"; }
.bi-option::before { content: "\f4ad"; }
.bi-outlet::before { content: "\f4ae"; }
.bi-paint-bucket::before { content: "\f4af"; }
.bi-palette-fill::before { content: "\f4b0"; }
.bi-palette::before { content: "\f4b1"; }
.bi-palette2::before { content: "\f4b2"; }
.bi-paperclip::before { content: "\f4b3"; }
.bi-paragraph::before { content: "\f4b4"; }
.bi-patch-check-fill::before { content: "\f4b5"; }
.bi-patch-check::before { content: "\f4b6"; }
.bi-patch-exclamation-fill::before { content: "\f4b7"; }
.bi-patch-exclamation::before { content: "\f4b8"; }
.bi-patch-minus-fill::before { content: "\f4b9"; }
.bi-patch-minus::before { content: "\f4ba"; }
.bi-patch-plus-fill::before { content: "\f4bb"; }
.bi-patch-plus::before { content: "\f4bc"; }
.bi-patch-question-fill::before { content: "\f4bd"; }
.bi-patch-question::before { content: "\f4be"; }
.bi-pause-btn-fill::before { content: "\f4bf"; }
.bi-pause-btn::before { content: "\f4c0"; }
.bi-pause-circle-fill::before { content: "\f4c1"; }
.bi-pause-circle::before { content: "\f4c2"; }
.bi-pause-fill::before { content: "\f4c3"; }
.bi-pause::before { content: "\f4c4"; }
.bi-peace-fill::before { content: "\f4c5"; }
.bi-peace::before { content: "\f4c6"; }
.bi-pen-fill::before { content: "\f4c7"; }
.bi-pen::before { content: "\f4c8"; }
.bi-pencil-fill::before { content: "\f4c9"; }
.bi-pencil-square::before { content: "\f4ca"; }
.bi-pencil::before { content: "\f4cb"; }
.bi-pentagon-fill::before { content: "\f4cc"; }
.bi-pentagon-half::before { content: "\f4cd"; }
.bi-pentagon::before { content: "\f4ce"; }
.bi-people-fill::before { content: "\f4cf"; }
.bi-people::before { content: "\f4d0"; }
.bi-percent::before { content: "\f4d1"; }
.bi-person-badge-fill::before { content: "\f4d2"; }
.bi-person-badge::before { content: "\f4d3"; }
.bi-person-bounding-box::before { content: "\f4d4"; }
.bi-person-check-fill::before { content: "\f4d5"; }
.bi-person-check::before { content: "\f4d6"; }
.bi-person-circle::before { content: "\f4d7"; }
.bi-person-dash-fill::before { content: "\f4d8"; }
.bi-person-dash::before { content: "\f4d9"; }
.bi-person-fill::before { content: "\f4da"; }
.bi-person-lines-fill::before { content: "\f4db"; }
.bi-person-plus-fill::before { content: "\f4dc"; }
.bi-person-plus::before { content: "\f4dd"; }
.bi-person-square::before { content: "\f4de"; }
.bi-person-x-fill::before { content: "\f4df"; }
.bi-person-x::before { content: "\f4e0"; }
.bi-person::before { content: "\f4e1"; }
.bi-phone-fill::before { content: "\f4e2"; }
.bi-phone-landscape-fill::before { content: "\f4e3"; }
.bi-phone-landscape::before { content: "\f4e4"; }
.bi-phone-vibrate-fill::before { content: "\f4e5"; }
.bi-phone-vibrate::before { content: "\f4e6"; }
.bi-phone::before { content: "\f4e7"; }
.bi-pie-chart-fill::before { content: "\f4e8"; }
.bi-pie-chart::before { content: "\f4e9"; }
.bi-pin-angle-fill::before { content: "\f4ea"; }
.bi-pin-angle::before { content: "\f4eb"; }
.bi-pin-fill::before { content: "\f4ec"; }
.bi-pin::before { content: "\f4ed"; }
.bi-pip-fill::before { content: "\f4ee"; }
.bi-pip::before { content: "\f4ef"; }
.bi-play-btn-fill::before { content: "\f4f0"; }
.bi-play-btn::before { content: "\f4f1"; }
.bi-play-circle-fill::before { content: "\f4f2"; }
.bi-play-circle::before { content: "\f4f3"; }
.bi-play-fill::before { content: "\f4f4"; }
.bi-play::before { content: "\f4f5"; }
.bi-plug-fill::before { content: "\f4f6"; }
.bi-plug::before { content: "\f4f7"; }
.bi-plus-circle-dotted::before { content: "\f4f8"; }
.bi-plus-circle-fill::before { content: "\f4f9"; }
.bi-plus-circle::before { content: "\f4fa"; }
.bi-plus-square-dotted::before { content: "\f4fb"; }
.bi-plus-square-fill::before { content: "\f4fc"; }
.bi-plus-square::before { content: "\f4fd"; }
.bi-plus::before { content: "\f4fe"; }
.bi-power::before { content: "\f4ff"; }
.bi-printer-fill::before { content: "\f500"; }
.bi-printer::before { content: "\f501"; }
.bi-puzzle-fill::before { content: "\f502"; }
.bi-puzzle::before { content: "\f503"; }
.bi-question-circle-fill::before { content: "\f504"; }
.bi-question-circle::before { content: "\f505"; }
.bi-question-diamond-fill::before { content: "\f506"; }
.bi-question-diamond::before { content: "\f507"; }
.bi-question-octagon-fill::before { content: "\f508"; }
.bi-question-octagon::before { content: "\f509"; }
.bi-question-square-fill::before { content: "\f50a"; }
.bi-question-square::before { content: "\f50b"; }
.bi-question::before { content: "\f50c"; }
.bi-rainbow::before { content: "\f50d"; }
.bi-receipt-cutoff::before { content: "\f50e"; }
.bi-receipt::before { content: "\f50f"; }
.bi-reception-0::before { content: "\f510"; }
.bi-reception-1::before { content: "\f511"; }
.bi-reception-2::before { content: "\f512"; }
.bi-reception-3::before { content: "\f513"; }
.bi-reception-4::before { content: "\f514"; }
.bi-record-btn-fill::before { content: "\f515"; }
.bi-record-btn::before { content: "\f516"; }
.bi-record-circle-fill::before { content: "\f517"; }
.bi-record-circle::before { content: "\f518"; }
.bi-record-fill::before { content: "\f519"; }
.bi-record::before { content: "\f51a"; }
.bi-record2-fill::before { content: "\f51b"; }
.bi-record2::before { content: "\f51c"; }
.bi-reply-all-fill::before { content: "\f51d"; }
.bi-reply-all::before { content: "\f51e"; }
.bi-reply-fill::before { content: "\f51f"; }
.bi-reply::before { content: "\f520"; }
.bi-rss-fill::before { content: "\f521"; }
.bi-rss::before { content: "\f522"; }
.bi-rulers::before { content: "\f523"; }
.bi-save-fill::before { content: "\f524"; }
.bi-save::before { content: "\f525"; }
.bi-save2-fill::before { content: "\f526"; }
.bi-save2::before { content: "\f527"; }
.bi-scissors::before { content: "\f528"; }
.bi-screwdriver::before { content: "\f529"; }
.bi-search::before { content: "\f52a"; }
.bi-segmented-nav::before { content: "\f52b"; }
.bi-server::before { content: "\f52c"; }
.bi-share-fill::before { content: "\f52d"; }
.bi-share::before { content: "\f52e"; }
.bi-shield-check::before { content: "\f52f"; }
.bi-shield-exclamation::before { content: "\f530"; }
.bi-shield-fill-check::before { content: "\f531"; }
.bi-shield-fill-exclamation::before { content: "\f532"; }
.bi-shield-fill-minus::before { content: "\f533"; }
.bi-shield-fill-plus::before { content: "\f534"; }
.bi-shield-fill-x::before { content: "\f535"; }
.bi-shield-fill::before { content: "\f536"; }
.bi-shield-lock-fill::before { content: "\f537"; }
.bi-shield-lock::before { content: "\f538"; }
.bi-shield-minus::before { content: "\f539"; }
.bi-shield-plus::before { content: "\f53a"; }
.bi-shield-shaded::before { content: "\f53b"; }
.bi-shield-slash-fill::before { content: "\f53c"; }
.bi-shield-slash::before { content: "\f53d"; }
.bi-shield-x::before { content: "\f53e"; }
.bi-shield::before { content: "\f53f"; }
.bi-shift-fill::before { content: "\f540"; }
.bi-shift::before { content: "\f541"; }
.bi-shop-window::before { content: "\f542"; }
.bi-shop::before { content: "\f543"; }
.bi-shuffle::before { content: "\f544"; }
.bi-signpost-2-fill::before { content: "\f545"; }
.bi-signpost-2::before { content: "\f546"; }
.bi-signpost-fill::before { content: "\f547"; }
.bi-signpost-split-fill::before { content: "\f548"; }
.bi-signpost-split::before { content: "\f549"; }
.bi-signpost::before { content: "\f54a"; }
.bi-sim-fill::before { content: "\f54b"; }
.bi-sim::before { content: "\f54c"; }
.bi-skip-backward-btn-fill::before { content: "\f54d"; }
.bi-skip-backward-btn::before { content: "\f54e"; }
.bi-skip-backward-circle-fill::before { content: "\f54f"; }
.bi-skip-backward-circle::before { content: "\f550"; }
.bi-skip-backward-fill::before { content: "\f551"; }
.bi-skip-backward::before { content: "\f552"; }
.bi-skip-end-btn-fill::before { content: "\f553"; }
.bi-skip-end-btn::before { content: "\f554"; }
.bi-skip-end-circle-fill::before { content: "\f555"; }
.bi-skip-end-circle::before { content: "\f556"; }
.bi-skip-end-fill::before { content: "\f557"; }
.bi-skip-end::before { content: "\f558"; }
.bi-skip-forward-btn-fill::before { content: "\f559"; }
.bi-skip-forward-btn::before { content: "\f55a"; }
.bi-skip-forward-circle-fill::before { content: "\f55b"; }
.bi-skip-forward-circle::before { content: "\f55c"; }
.bi-skip-forward-fill::before { content: "\f55d"; }
.bi-skip-forward::before { content: "\f55e"; }
.bi-skip-start-btn-fill::before { content: "\f55f"; }
.bi-skip-start-btn::before { content: "\f560"; }
.bi-skip-start-circle-fill::before { content: "\f561"; }
.bi-skip-start-circle::before { content: "\f562"; }
.bi-skip-start-fill::before { content: "\f563"; }
.bi-skip-start::before { content: "\f564"; }
.bi-slack::before { content: "\f565"; }
.bi-slash-circle-fill::before { content: "\f566"; }
.bi-slash-circle::before { content: "\f567"; }
.bi-slash-square-fill::before { content: "\f568"; }
.bi-slash-square::before { content: "\f569"; }
.bi-slash::before { content: "\f56a"; }
.bi-sliders::before { content: "\f56b"; }
.bi-smartwatch::before { content: "\f56c"; }
.bi-snow::before { content: "\f56d"; }
.bi-snow2::before { content: "\f56e"; }
.bi-snow3::before { content: "\f56f"; }
.bi-sort-alpha-down-alt::before { content: "\f570"; }
.bi-sort-alpha-down::before { content: "\f571"; }
.bi-sort-alpha-up-alt::before { content: "\f572"; }
.bi-sort-alpha-up::before { content: "\f573"; }
.bi-sort-down-alt::before { content: "\f574"; }
.bi-sort-down::before { content: "\f575"; }
.bi-sort-numeric-down-alt::before { content: "\f576"; }
.bi-sort-numeric-down::before { content: "\f577"; }
.bi-sort-numeric-up-alt::before { content: "\f578"; }
.bi-sort-numeric-up::before { content: "\f579"; }
.bi-sort-up-alt::before { content: "\f57a"; }
.bi-sort-up::before { content: "\f57b"; }
.bi-soundwave::before { content: "\f57c"; }
.bi-speaker-fill::before { content: "\f57d"; }
.bi-speaker::before { content: "\f57e"; }
.bi-speedometer::before { content: "\f57f"; }
.bi-speedometer2::before { content: "\f580"; }
.bi-spellcheck::before { content: "\f581"; }
.bi-square-fill::before { content: "\f582"; }
.bi-square-half::before { content: "\f583"; }
.bi-square::before { content: "\f584"; }
.bi-stack::before { content: "\f585"; }
.bi-star-fill::before { content: "\f586"; }
.bi-star-half::before { content: "\f587"; }
.bi-star::before { content: "\f588"; }
.bi-stars::before { content: "\f589"; }
.bi-stickies-fill::before { content: "\f58a"; }
.bi-stickies::before { content: "\f58b"; }
.bi-sticky-fill::before { content: "\f58c"; }
.bi-sticky::before { content: "\f58d"; }
.bi-stop-btn-fill::before { content: "\f58e"; }
.bi-stop-btn::before { content: "\f58f"; }
.bi-stop-circle-fill::before { content: "\f590"; }
.bi-stop-circle::before { content: "\f591"; }
.bi-stop-fill::before { content: "\f592"; }
.bi-stop::before { content: "\f593"; }
.bi-stoplights-fill::before { content: "\f594"; }
.bi-stoplights::before { content: "\f595"; }
.bi-stopwatch-fill::before { content: "\f596"; }
.bi-stopwatch::before { content: "\f597"; }
.bi-subtract::before { content: "\f598"; }
.bi-suit-club-fill::before { content: "\f599"; }
.bi-suit-club::before { content: "\f59a"; }
.bi-suit-diamond-fill::before { content: "\f59b"; }
.bi-suit-diamond::before { content: "\f59c"; }
.bi-suit-heart-fill::before { content: "\f59d"; }
.bi-suit-heart::before { content: "\f59e"; }
.bi-suit-spade-fill::before { content: "\f59f"; }
.bi-suit-spade::before { content: "\f5a0"; }
.bi-sun-fill::before { content: "\f5a1"; }
.bi-sun::before { content: "\f5a2"; }
.bi-sunglasses::before { content: "\f5a3"; }
.bi-sunrise-fill::before { content: "\f5a4"; }
.bi-sunrise::before { content: "\f5a5"; }
.bi-sunset-fill::before { content: "\f5a6"; }
.bi-sunset::before { content: "\f5a7"; }
.bi-symmetry-horizontal::before { content: "\f5a8"; }
.bi-symmetry-vertical::before { content: "\f5a9"; }
.bi-table::before { content: "\f5aa"; }
.bi-tablet-fill::before { content: "\f5ab"; }
.bi-tablet-landscape-fill::before { content: "\f5ac"; }
.bi-tablet-landscape::before { content: "\f5ad"; }
.bi-tablet::before { content: "\f5ae"; }
.bi-tag-fill::before { content: "\f5af"; }
.bi-tag::before { content: "\f5b0"; }
.bi-tags-fill::before { content: "\f5b1"; }
.bi-tags::before { content: "\f5b2"; }
.bi-telegram::before { content: "\f5b3"; }
.bi-telephone-fill::before { content: "\f5b4"; }
.bi-telephone-forward-fill::before { content: "\f5b5"; }
.bi-telephone-forward::before { content: "\f5b6"; }
.bi-telephone-inbound-fill::before { content: "\f5b7"; }
.bi-telephone-inbound::before { content: "\f5b8"; }
.bi-telephone-minus-fill::before { content: "\f5b9"; }
.bi-telephone-minus::before { content: "\f5ba"; }
.bi-telephone-outbound-fill::before { content: "\f5bb"; }
.bi-telephone-outbound::before { content: "\f5bc"; }
.bi-telephone-plus-fill::before { content: "\f5bd"; }
.bi-telephone-plus::before { content: "\f5be"; }
.bi-telephone-x-fill::before { content: "\f5bf"; }
.bi-telephone-x::before { content: "\f5c0"; }
.bi-telephone::before { content: "\f5c1"; }
.bi-terminal-fill::before { content: "\f5c2"; }
.bi-terminal::before { content: "\f5c3"; }
.bi-text-center::before { content: "\f5c4"; }
.bi-text-indent-left::before { content: "\f5c5"; }
.bi-text-indent-right::before { content: "\f5c6"; }
.bi-text-left::before { content: "\f5c7"; }
.bi-text-paragraph::before { content: "\f5c8"; }
.bi-text-right::before { content: "\f5c9"; }
.bi-textarea-resize::before { content: "\f5ca"; }
.bi-textarea-t::before { content: "\f5cb"; }
.bi-textarea::before { content: "\f5cc"; }
.bi-thermometer-half::before { content: "\f5cd"; }
.bi-thermometer-high::before { content: "\f5ce"; }
.bi-thermometer-low::before { content: "\f5cf"; }
.bi-thermometer-snow::before { content: "\f5d0"; }
.bi-thermometer-sun::before { content: "\f5d1"; }
.bi-thermometer::before { content: "\f5d2"; }
.bi-three-dots-vertical::before { content: "\f5d3"; }
.bi-three-dots::before { content: "\f5d4"; }
.bi-toggle-off::before { content: "\f5d5"; }
.bi-toggle-on::before { content: "\f5d6"; }
.bi-toggle2-off::before { content: "\f5d7"; }
.bi-toggle2-on::before { content: "\f5d8"; }
.bi-toggles::before { content: "\f5d9"; }
.bi-toggles2::before { content: "\f5da"; }
.bi-tools::before { content: "\f5db"; }
.bi-tornado::before { content: "\f5dc"; }
.bi-trash-fill::before { content: "\f5dd"; }
.bi-trash::before { content: "\f5de"; }
.bi-trash2-fill::before { content: "\f5df"; }
.bi-trash2::before { content: "\f5e0"; }
.bi-tree-fill::before { content: "\f5e1"; }
.bi-tree::before { content: "\f5e2"; }
.bi-triangle-fill::before { content: "\f5e3"; }
.bi-triangle-half::before { content: "\f5e4"; }
.bi-triangle::before { content: "\f5e5"; }
.bi-trophy-fill::before { content: "\f5e6"; }
.bi-trophy::before { content: "\f5e7"; }
.bi-tropical-storm::before { content: "\f5e8"; }
.bi-truck-flatbed::before { content: "\f5e9"; }
.bi-truck::before { content: "\f5ea"; }
.bi-tsunami::before { content: "\f5eb"; }
.bi-tv-fill::before { content: "\f5ec"; }
.bi-tv::before { content: "\f5ed"; }
.bi-twitch::before { content: "\f5ee"; }
.bi-twitter::before { content: "\f5ef"; }
.bi-type-bold::before { content: "\f5f0"; }
.bi-type-h1::before { content: "\f5f1"; }
.bi-type-h2::before { content: "\f5f2"; }
.bi-type-h3::before { content: "\f5f3"; }
.bi-type-italic::before { content: "\f5f4"; }
.bi-type-strikethrough::before { content: "\f5f5"; }
.bi-type-underline::before { content: "\f5f6"; }
.bi-type::before { content: "\f5f7"; }
.bi-ui-checks-grid::before { content: "\f5f8"; }
.bi-ui-checks::before { content: "\f5f9"; }
.bi-ui-radios-grid::before { content: "\f5fa"; }
.bi-ui-radios::before { content: "\f5fb"; }
.bi-umbrella-fill::before { content: "\f5fc"; }
.bi-umbrella::before { content: "\f5fd"; }
.bi-union::before { content: "\f5fe"; }
.bi-unlock-fill::before { content: "\f5ff"; }
.bi-unlock::before { content: "\f600"; }
.bi-upc-scan::before { content: "\f601"; }
.bi-upc::before { content: "\f602"; }
.bi-upload::before { content: "\f603"; }
.bi-vector-pen::before { content: "\f604"; }
.bi-view-list::before { content: "\f605"; }
.bi-view-stacked::before { content: "\f606"; }
.bi-vinyl-fill::before { content: "\f607"; }
.bi-vinyl::before { content: "\f608"; }
.bi-voicemail::before { content: "\f609"; }
.bi-volume-down-fill::before { content: "\f60a"; }
.bi-volume-down::before { content: "\f60b"; }
.bi-volume-mute-fill::before { content: "\f60c"; }
.bi-volume-mute::before { content: "\f60d"; }
.bi-volume-off-fill::before { content: "\f60e"; }
.bi-volume-off::before { content: "\f60f"; }
.bi-volume-up-fill::before { content: "\f610"; }
.bi-volume-up::before { content: "\f611"; }
.bi-vr::before { content: "\f612"; }
.bi-wallet-fill::before { content: "\f613"; }
.bi-wallet::before { content: "\f614"; }
.bi-wallet2::before { content: "\f615"; }
.bi-watch::before { content: "\f616"; }
.bi-water::before { content: "\f617"; }
.bi-whatsapp::before { content: "\f618"; }
.bi-wifi-1::before { content: "\f619"; }
.bi-wifi-2::before { content: "\f61a"; }
.bi-wifi-off::before { content: "\f61b"; }
.bi-wifi::before { content: "\f61c"; }
.bi-wind::before { content: "\f61d"; }
.bi-window-dock::before { content: "\f61e"; }
.bi-window-sidebar::before { content: "\f61f"; }
.bi-window::before { content: "\f620"; }
.bi-wrench::before { content: "\f621"; }
.bi-x-circle-fill::before { content: "\f622"; }
.bi-x-circle::before { content: "\f623"; }
.bi-x-diamond-fill::before { content: "\f624"; }
.bi-x-diamond::before { content: "\f625"; }
.bi-x-octagon-fill::before { content: "\f626"; }
.bi-x-octagon::before { content: "\f627"; }
.bi-x-square-fill::before { content: "\f628"; }
.bi-x-square::before { content: "\f629"; }
.bi-x::before { content: "\f62a"; }
.bi-youtube::before { content: "\f62b"; }
.bi-zoom-in::before { content: "\f62c"; }
.bi-zoom-out::before { content: "\f62d"; }
.bi-bank::before { content: "\f62e"; }
.bi-bank2::before { content: "\f62f"; }
.bi-bell-slash-fill::before { content: "\f630"; }
.bi-bell-slash::before { content: "\f631"; }
.bi-cash-coin::before { content: "\f632"; }
.bi-check-lg::before { content: "\f633"; }
.bi-coin::before { content: "\f634"; }
.bi-currency-bitcoin::before { content: "\f635"; }
.bi-currency-dollar::before { content: "\f636"; }
.bi-currency-euro::before { content: "\f637"; }
.bi-currency-exchange::before { content: "\f638"; }
.bi-currency-pound::before { content: "\f639"; }
.bi-currency-yen::before { content: "\f63a"; }
.bi-dash-lg::before { content: "\f63b"; }
.bi-exclamation-lg::before { content: "\f63c"; }
.bi-file-earmark-pdf-fill::before { content: "\f63d"; }
.bi-file-earmark-pdf::before { content: "\f63e"; }
.bi-file-pdf-fill::before { content: "\f63f"; }
.bi-file-pdf::before { content: "\f640"; }
.bi-gender-ambiguous::before { content: "\f641"; }
.bi-gender-female::before { content: "\f642"; }
.bi-gender-male::before { content: "\f643"; }
.bi-gender-trans::before { content: "\f644"; }
.bi-headset-vr::before { content: "\f645"; }
.bi-info-lg::before { content: "\f646"; }
.bi-mastodon::before { content: "\f647"; }
.bi-messenger::before { content: "\f648"; }
.bi-piggy-bank-fill::before { content: "\f649"; }
.bi-piggy-bank::before { content: "\f64a"; }
.bi-pin-map-fill::before { content: "\f64b"; }
.bi-pin-map::before { content: "\f64c"; }
.bi-plus-lg::before { content: "\f64d"; }
.bi-question-lg::before { content: "\f64e"; }
.bi-recycle::before { content: "\f64f"; }
.bi-reddit::before { content: "\f650"; }
.bi-safe-fill::before { content: "\f651"; }
.bi-safe2-fill::before { content: "\f652"; }
.bi-safe2::before { content: "\f653"; }
.bi-sd-card-fill::before { content: "\f654"; }
.bi-sd-card::before { content: "\f655"; }
.bi-skype::before { content: "\f656"; }
.bi-slash-lg::before { content: "\f657"; }
.bi-translate::before { content: "\f658"; }
.bi-x-lg::before { content: "\f659"; }
.bi-safe::before { content: "\f65a"; }
.bi-apple::before { content: "\f65b"; }
.bi-microsoft::before { content: "\f65d"; }
.bi-windows::before { content: "\f65e"; }
.bi-behance::before { content: "\f65c"; }
.bi-dribbble::before { content: "\f65f"; }
.bi-line::before { content: "\f660"; }
.bi-medium::before { content: "\f661"; }
.bi-paypal::before { content: "\f662"; }
.bi-pinterest::before { content: "\f663"; }
.bi-signal::before { content: "\f664"; }
.bi-snapchat::before { content: "\f665"; }
.bi-spotify::before { content: "\f666"; }
.bi-stack-overflow::before { content: "\f667"; }
.bi-strava::before { content: "\f668"; }
.bi-wordpress::before { content: "\f669"; }
.bi-vimeo::before { content: "\f66a"; }
.bi-activity::before { content: "\f66b"; }
.bi-easel2-fill::before { content: "\f66c"; }
.bi-easel2::before { content: "\f66d"; }
.bi-easel3-fill::before { content: "\f66e"; }
.bi-easel3::before { content: "\f66f"; }
.bi-fan::before { content: "\f670"; }
.bi-fingerprint::before { content: "\f671"; }
.bi-graph-down-arrow::before { content: "\f672"; }
.bi-graph-up-arrow::before { content: "\f673"; }
.bi-hypnotize::before { content: "\f674"; }
.bi-magic::before { content: "\f675"; }
.bi-person-rolodex::before { content: "\f676"; }
.bi-person-video::before { content: "\f677"; }
.bi-person-video2::before { content: "\f678"; }
.bi-person-video3::before { content: "\f679"; }
.bi-person-workspace::before { content: "\f67a"; }
.bi-radioactive::before { content: "\f67b"; }
.bi-webcam-fill::before { content: "\f67c"; }
.bi-webcam::before { content: "\f67d"; }
.bi-yin-yang::before { content: "\f67e"; }
.bi-bandaid-fill::before { content: "\f680"; }
.bi-bandaid::before { content: "\f681"; }
.bi-bluetooth::before { content: "\f682"; }
.bi-body-text::before { content: "\f683"; }
.bi-boombox::before { content: "\f684"; }
.bi-boxes::before { content: "\f685"; }
.bi-dpad-fill::before { content: "\f686"; }
.bi-dpad::before { content: "\f687"; }
.bi-ear-fill::before { content: "\f688"; }
.bi-ear::before { content: "\f689"; }
.bi-envelope-check-fill::before { content: "\f68b"; }
.bi-envelope-check::before { content: "\f68c"; }
.bi-envelope-dash-fill::before { content: "\f68e"; }
.bi-envelope-dash::before { content: "\f68f"; }
.bi-envelope-exclamation-fill::before { content: "\f691"; }
.bi-envelope-exclamation::before { content: "\f692"; }
.bi-envelope-plus-fill::before { content: "\f693"; }
.bi-envelope-plus::before { content: "\f694"; }
.bi-envelope-slash-fill::before { content: "\f696"; }
.bi-envelope-slash::before { content: "\f697"; }
.bi-envelope-x-fill::before { content: "\f699"; }
.bi-envelope-x::before { content: "\f69a"; }
.bi-explicit-fill::before { content: "\f69b"; }
.bi-explicit::before { content: "\f69c"; }
.bi-git::before { content: "\f69d"; }
.bi-infinity::before { content: "\f69e"; }
.bi-list-columns-reverse::before { content: "\f69f"; }
.bi-list-columns::before { content: "\f6a0"; }
.bi-meta::before { content: "\f6a1"; }
.bi-nintendo-switch::before { content: "\f6a4"; }
.bi-pc-display-horizontal::before { content: "\f6a5"; }
.bi-pc-display::before { content: "\f6a6"; }
.bi-pc-horizontal::before { content: "\f6a7"; }
.bi-pc::before { content: "\f6a8"; }
.bi-playstation::before { content: "\f6a9"; }
.bi-plus-slash-minus::before { content: "\f6aa"; }
.bi-projector-fill::before { content: "\f6ab"; }
.bi-projector::before { content: "\f6ac"; }
.bi-qr-code-scan::before { content: "\f6ad"; }
.bi-qr-code::before { content: "\f6ae"; }
.bi-quora::before { content: "\f6af"; }
.bi-quote::before { content: "\f6b0"; }
.bi-robot::before { content: "\f6b1"; }
.bi-send-check-fill::before { content: "\f6b2"; }
.bi-send-check::before { content: "\f6b3"; }
.bi-send-dash-fill::before { content: "\f6b4"; }
.bi-send-dash::before { content: "\f6b5"; }
.bi-send-exclamation-fill::before { content: "\f6b7"; }
.bi-send-exclamation::before { content: "\f6b8"; }
.bi-send-fill::before { content: "\f6b9"; }
.bi-send-plus-fill::before { content: "\f6ba"; }
.bi-send-plus::before { content: "\f6bb"; }
.bi-send-slash-fill::before { content: "\f6bc"; }
.bi-send-slash::before { content: "\f6bd"; }
.bi-send-x-fill::before { content: "\f6be"; }
.bi-send-x::before { content: "\f6bf"; }
.bi-send::before { content: "\f6c0"; }
.bi-steam::before { content: "\f6c1"; }
.bi-terminal-dash::before { content: "\f6c3"; }
.bi-terminal-plus::before { content: "\f6c4"; }
.bi-terminal-split::before { content: "\f6c5"; }
.bi-ticket-detailed-fill::before { content: "\f6c6"; }
.bi-ticket-detailed::before { content: "\f6c7"; }
.bi-ticket-fill::before { content: "\f6c8"; }
.bi-ticket-perforated-fill::before { content: "\f6c9"; }
.bi-ticket-perforated::before { content: "\f6ca"; }
.bi-ticket::before { content: "\f6cb"; }
.bi-tiktok::before { content: "\f6cc"; }
.bi-window-dash::before { content: "\f6cd"; }
.bi-window-desktop::before { content: "\f6ce"; }
.bi-window-fullscreen::before { content: "\f6cf"; }
.bi-window-plus::before { content: "\f6d0"; }
.bi-window-split::before { content: "\f6d1"; }
.bi-window-stack::before { content: "\f6d2"; }
.bi-window-x::before { content: "\f6d3"; }
.bi-xbox::before { content: "\f6d4"; }
.bi-ethernet::before { content: "\f6d5"; }
.bi-hdmi-fill::before { content: "\f6d6"; }
.bi-hdmi::before { content: "\f6d7"; }
.bi-usb-c-fill::before { content: "\f6d8"; }
.bi-usb-c::before { content: "\f6d9"; }
.bi-usb-fill::before { content: "\f6da"; }
.bi-usb-plug-fill::before { content: "\f6db"; }
.bi-usb-plug::before { content: "\f6dc"; }
.bi-usb-symbol::before { content: "\f6dd"; }
.bi-usb::before { content: "\f6de"; }
.bi-boombox-fill::before { content: "\f6df"; }
.bi-displayport::before { content: "\f6e1"; }
.bi-gpu-card::before { content: "\f6e2"; }
.bi-memory::before { content: "\f6e3"; }
.bi-modem-fill::before { content: "\f6e4"; }
.bi-modem::before { content: "\f6e5"; }
.bi-motherboard-fill::before { content: "\f6e6"; }
.bi-motherboard::before { content: "\f6e7"; }
.bi-optical-audio-fill::before { content: "\f6e8"; }
.bi-optical-audio::before { content: "\f6e9"; }
.bi-pci-card::before { content: "\f6ea"; }
.bi-router-fill::before { content: "\f6eb"; }
.bi-router::before { content: "\f6ec"; }
.bi-thunderbolt-fill::before { content: "\f6ef"; }
.bi-thunderbolt::before { content: "\f6f0"; }
.bi-usb-drive-fill::before { content: "\f6f1"; }
.bi-usb-drive::before { content: "\f6f2"; }
.bi-usb-micro-fill::before { content: "\f6f3"; }
.bi-usb-micro::before { content: "\f6f4"; }
.bi-usb-mini-fill::before { content: "\f6f5"; }
.bi-usb-mini::before { content: "\f6f6"; }
.bi-cloud-haze2::before { content: "\f6f7"; }
.bi-device-hdd-fill::before { content: "\f6f8"; }
.bi-device-hdd::before { content: "\f6f9"; }
.bi-device-ssd-fill::before { content: "\f6fa"; }
.bi-device-ssd::before { content: "\f6fb"; }
.bi-displayport-fill::before { content: "\f6fc"; }
.bi-mortarboard-fill::before { content: "\f6fd"; }
.bi-mortarboard::before { content: "\f6fe"; }
.bi-terminal-x::before { content: "\f6ff"; }
.bi-arrow-through-heart-fill::before { content: "\f700"; }
.bi-arrow-through-heart::before { content: "\f701"; }
.bi-badge-sd-fill::before { content: "\f702"; }
.bi-badge-sd::before { content: "\f703"; }
.bi-bag-heart-fill::before { content: "\f704"; }
.bi-bag-heart::before { content: "\f705"; }
.bi-balloon-fill::before { content: "\f706"; }
.bi-balloon-heart-fill::before { content: "\f707"; }
.bi-balloon-heart::before { content: "\f708"; }
.bi-balloon::before { content: "\f709"; }
.bi-box2-fill::before { content: "\f70a"; }
.bi-box2-heart-fill::before { content: "\f70b"; }
.bi-box2-heart::before { content: "\f70c"; }
.bi-box2::before { content: "\f70d"; }
.bi-braces-asterisk::before { content: "\f70e"; }
.bi-calendar-heart-fill::before { content: "\f70f"; }
.bi-calendar-heart::before { content: "\f710"; }
.bi-calendar2-heart-fill::before { content: "\f711"; }
.bi-calendar2-heart::before { content: "\f712"; }
.bi-chat-heart-fill::before { content: "\f713"; }
.bi-chat-heart::before { content: "\f714"; }
.bi-chat-left-heart-fill::before { content: "\f715"; }
.bi-chat-left-heart::before { content: "\f716"; }
.bi-chat-right-heart-fill::before { content: "\f717"; }
.bi-chat-right-heart::before { content: "\f718"; }
.bi-chat-square-heart-fill::before { content: "\f719"; }
.bi-chat-square-heart::before { content: "\f71a"; }
.bi-clipboard-check-fill::before { content: "\f71b"; }
.bi-clipboard-data-fill::before { content: "\f71c"; }
.bi-clipboard-fill::before { content: "\f71d"; }
.bi-clipboard-heart-fill::before { content: "\f71e"; }
.bi-clipboard-heart::before { content: "\f71f"; }
.bi-clipboard-minus-fill::before { content: "\f720"; }
.bi-clipboard-plus-fill::before { content: "\f721"; }
.bi-clipboard-pulse::before { content: "\f722"; }
.bi-clipboard-x-fill::before { content: "\f723"; }
.bi-clipboard2-check-fill::before { content: "\f724"; }
.bi-clipboard2-check::before { content: "\f725"; }
.bi-clipboard2-data-fill::before { content: "\f726"; }
.bi-clipboard2-data::before { content: "\f727"; }
.bi-clipboard2-fill::before { content: "\f728"; }
.bi-clipboard2-heart-fill::before { content: "\f729"; }
.bi-clipboard2-heart::before { content: "\f72a"; }
.bi-clipboard2-minus-fill::before { content: "\f72b"; }
.bi-clipboard2-minus::before { content: "\f72c"; }
.bi-clipboard2-plus-fill::before { content: "\f72d"; }
.bi-clipboard2-plus::before { content: "\f72e"; }
.bi-clipboard2-pulse-fill::before { content: "\f72f"; }
.bi-clipboard2-pulse::before { content: "\f730"; }
.bi-clipboard2-x-fill::before { content: "\f731"; }
.bi-clipboard2-x::before { content: "\f732"; }
.bi-clipboard2::before { content: "\f733"; }
.bi-emoji-kiss-fill::before { content: "\f734"; }
.bi-emoji-kiss::before { content: "\f735"; }
.bi-envelope-heart-fill::before { content: "\f736"; }
.bi-envelope-heart::before { content: "\f737"; }
.bi-envelope-open-heart-fill::before { content: "\f738"; }
.bi-envelope-open-heart::before { content: "\f739"; }
.bi-envelope-paper-fill::before { content: "\f73a"; }
.bi-envelope-paper-heart-fill::before { content: "\f73b"; }
.bi-envelope-paper-heart::before { content: "\f73c"; }
.bi-envelope-paper::before { content: "\f73d"; }
.bi-filetype-aac::before { content: "\f73e"; }
.bi-filetype-ai::before { content: "\f73f"; }
.bi-filetype-bmp::before { content: "\f740"; }
.bi-filetype-cs::before { content: "\f741"; }
.bi-filetype-css::before { content: "\f742"; }
.bi-filetype-csv::before { content: "\f743"; }
.bi-filetype-doc::before { content: "\f744"; }
.bi-filetype-docx::before { content: "\f745"; }
.bi-filetype-exe::before { content: "\f746"; }
.bi-filetype-gif::before { content: "\f747"; }
.bi-filetype-heic::before { content: "\f748"; }
.bi-filetype-html::before { content: "\f749"; }
.bi-filetype-java::before { content: "\f74a"; }
.bi-filetype-jpg::before { content: "\f74b"; }
.bi-filetype-js::before { content: "\f74c"; }
.bi-filetype-jsx::before { content: "\f74d"; }
.bi-filetype-key::before { content: "\f74e"; }
.bi-filetype-m4p::before { content: "\f74f"; }
.bi-filetype-md::before { content: "\f750"; }
.bi-filetype-mdx::before { content: "\f751"; }
.bi-filetype-mov::before { content: "\f752"; }
.bi-filetype-mp3::before { content: "\f753"; }
.bi-filetype-mp4::before { content: "\f754"; }
.bi-filetype-otf::before { content: "\f755"; }
.bi-filetype-pdf::before { content: "\f756"; }
.bi-filetype-php::before { content: "\f757"; }
.bi-filetype-png::before { content: "\f758"; }
.bi-filetype-ppt::before { content: "\f75a"; }
.bi-filetype-psd::before { content: "\f75b"; }
.bi-filetype-py::before { content: "\f75c"; }
.bi-filetype-raw::before { content: "\f75d"; }
.bi-filetype-rb::before { content: "\f75e"; }
.bi-filetype-sass::before { content: "\f75f"; }
.bi-filetype-scss::before { content: "\f760"; }
.bi-filetype-sh::before { content: "\f761"; }
.bi-filetype-svg::before { content: "\f762"; }
.bi-filetype-tiff::before { content: "\f763"; }
.bi-filetype-tsx::before { content: "\f764"; }
.bi-filetype-ttf::before { content: "\f765"; }
.bi-filetype-txt::before { content: "\f766"; }
.bi-filetype-wav::before { content: "\f767"; }
.bi-filetype-woff::before { content: "\f768"; }
.bi-filetype-xls::before { content: "\f76a"; }
.bi-filetype-xml::before { content: "\f76b"; }
.bi-filetype-yml::before { content: "\f76c"; }
.bi-heart-arrow::before { content: "\f76d"; }
.bi-heart-pulse-fill::before { content: "\f76e"; }
.bi-heart-pulse::before { content: "\f76f"; }
.bi-heartbreak-fill::before { content: "\f770"; }
.bi-heartbreak::before { content: "\f771"; }
.bi-hearts::before { content: "\f772"; }
.bi-hospital-fill::before { content: "\f773"; }
.bi-hospital::before { content: "\f774"; }
.bi-house-heart-fill::before { content: "\f775"; }
.bi-house-heart::before { content: "\f776"; }
.bi-incognito::before { content: "\f777"; }
.bi-magnet-fill::before { content: "\f778"; }
.bi-magnet::before { content: "\f779"; }
.bi-person-heart::before { content: "\f77a"; }
.bi-person-hearts::before { content: "\f77b"; }
.bi-phone-flip::before { content: "\f77c"; }
.bi-plugin::before { content: "\f77d"; }
.bi-postage-fill::before { content: "\f77e"; }
.bi-postage-heart-fill::before { content: "\f77f"; }
.bi-postage-heart::before { content: "\f780"; }
.bi-postage::before { content: "\f781"; }
.bi-postcard-fill::before { content: "\f782"; }
.bi-postcard-heart-fill::before { content: "\f783"; }
.bi-postcard-heart::before { content: "\f784"; }
.bi-postcard::before { content: "\f785"; }
.bi-search-heart-fill::before { content: "\f786"; }
.bi-search-heart::before { content: "\f787"; }
.bi-sliders2-vertical::before { content: "\f788"; }
.bi-sliders2::before { content: "\f789"; }
.bi-trash3-fill::before { content: "\f78a"; }
.bi-trash3::before { content: "\f78b"; }
.bi-valentine::before { content: "\f78c"; }
.bi-valentine2::before { content: "\f78d"; }
.bi-wrench-adjustable-circle-fill::before { content: "\f78e"; }
.bi-wrench-adjustable-circle::before { content: "\f78f"; }
.bi-wrench-adjustable::before { content: "\f790"; }
.bi-filetype-json::before { content: "\f791"; }
.bi-filetype-pptx::before { content: "\f792"; }
.bi-filetype-xlsx::before { content: "\f793"; }
.bi-1-circle-fill::before { content: "\f796"; }
.bi-1-circle::before { content: "\f797"; }
.bi-1-square-fill::before { content: "\f798"; }
.bi-1-square::before { content: "\f799"; }
.bi-2-circle-fill::before { content: "\f79c"; }
.bi-2-circle::before { content: "\f79d"; }
.bi-2-square-fill::before { content: "\f79e"; }
.bi-2-square::before { content: "\f79f"; }
.bi-3-circle-fill::before { content: "\f7a2"; }
.bi-3-circle::before { content: "\f7a3"; }
.bi-3-square-fill::before { content: "\f7a4"; }
.bi-3-square::before { content: "\f7a5"; }
.bi-4-circle-fill::before { content: "\f7a8"; }
.bi-4-circle::before { content: "\f7a9"; }
.bi-4-square-fill::before { content: "\f7aa"; }
.bi-4-square::before { content: "\f7ab"; }
.bi-5-circle-fill::before { content: "\f7ae"; }
.bi-5-circle::before { content: "\f7af"; }
.bi-5-square-fill::before { content: "\f7b0"; }
.bi-5-square::before { content: "\f7b1"; }
.bi-6-circle-fill::before { content: "\f7b4"; }
.bi-6-circle::before { content: "\f7b5"; }
.bi-6-square-fill::before { content: "\f7b6"; }
.bi-6-square::before { content: "\f7b7"; }
.bi-7-circle-fill::before { content: "\f7ba"; }
.bi-7-circle::before { content: "\f7bb"; }
.bi-7-square-fill::before { content: "\f7bc"; }
.bi-7-square::before { content: "\f7bd"; }
.bi-8-circle-fill::before { content: "\f7c0"; }
.bi-8-circle::before { content: "\f7c1"; }
.bi-8-square-fill::before { content: "\f7c2"; }
.bi-8-square::before { content: "\f7c3"; }
.bi-9-circle-fill::before { content: "\f7c6"; }
.bi-9-circle::before { content: "\f7c7"; }
.bi-9-square-fill::before { content: "\f7c8"; }
.bi-9-square::before { content: "\f7c9"; }
.bi-airplane-engines-fill::before { content: "\f7ca"; }
.bi-airplane-engines::before { content: "\f7cb"; }
.bi-airplane-fill::before { content: "\f7cc"; }
.bi-airplane::before { content: "\f7cd"; }
.bi-alexa::before { content: "\f7ce"; }
.bi-alipay::before { content: "\f7cf"; }
.bi-android::before { content: "\f7d0"; }
.bi-android2::before { content: "\f7d1"; }
.bi-box-fill::before { content: "\f7d2"; }
.bi-box-seam-fill::before { content: "\f7d3"; }
.bi-browser-chrome::before { content: "\f7d4"; }
.bi-browser-edge::before { content: "\f7d5"; }
.bi-browser-firefox::before { content: "\f7d6"; }
.bi-browser-safari::before { content: "\f7d7"; }
.bi-c-circle-fill::before { content: "\f7da"; }
.bi-c-circle::before { content: "\f7db"; }
.bi-c-square-fill::before { content: "\f7dc"; }
.bi-c-square::before { content: "\f7dd"; }
.bi-capsule-pill::before { content: "\f7de"; }
.bi-capsule::before { content: "\f7df"; }
.bi-car-front-fill::before { content: "\f7e0"; }
.bi-car-front::before { content: "\f7e1"; }
.bi-cassette-fill::before { content: "\f7e2"; }
.bi-cassette::before { content: "\f7e3"; }
.bi-cc-circle-fill::before { content: "\f7e6"; }
.bi-cc-circle::before { content: "\f7e7"; }
.bi-cc-square-fill::before { content: "\f7e8"; }
.bi-cc-square::before { content: "\f7e9"; }
.bi-cup-hot-fill::before { content: "\f7ea"; }
.bi-cup-hot::before { content: "\f7eb"; }
.bi-currency-rupee::before { content: "\f7ec"; }
.bi-dropbox::before { content: "\f7ed"; }
.bi-escape::before { content: "\f7ee"; }
.bi-fast-forward-btn-fill::before { content: "\f7ef"; }
.bi-fast-forward-btn::before { content: "\f7f0"; }
.bi-fast-forward-circle-fill::before { content: "\f7f1"; }
.bi-fast-forward-circle::before { content: "\f7f2"; }
.bi-fast-forward-fill::before { content: "\f7f3"; }
.bi-fast-forward::before { content: "\f7f4"; }
.bi-filetype-sql::before { content: "\f7f5"; }
.bi-fire::before { content: "\f7f6"; }
.bi-google-play::before { content: "\f7f7"; }
.bi-h-circle-fill::before { content: "\f7fa"; }
.bi-h-circle::before { content: "\f7fb"; }
.bi-h-square-fill::before { content: "\f7fc"; }
.bi-h-square::before { content: "\f7fd"; }
.bi-indent::before { content: "\f7fe"; }
.bi-lungs-fill::before { content: "\f7ff"; }
.bi-lungs::before { content: "\f800"; }
.bi-microsoft-teams::before { content: "\f801"; }
.bi-p-circle-fill::before { content: "\f804"; }
.bi-p-circle::before { content: "\f805"; }
.bi-p-square-fill::before { content: "\f806"; }
.bi-p-square::before { content: "\f807"; }
.bi-pass-fill::before { content: "\f808"; }
.bi-pass::before { content: "\f809"; }
.bi-prescription::before { content: "\f80a"; }
.bi-prescription2::before { content: "\f80b"; }
.bi-r-circle-fill::before { content: "\f80e"; }
.bi-r-circle::before { content: "\f80f"; }
.bi-r-square-fill::before { content: "\f810"; }
.bi-r-square::before { content: "\f811"; }
.bi-repeat-1::before { content: "\f812"; }
.bi-repeat::before { content: "\f813"; }
.bi-rewind-btn-fill::before { content: "\f814"; }
.bi-rewind-btn::before { content: "\f815"; }
.bi-rewind-circle-fill::before { content: "\f816"; }
.bi-rewind-circle::before { content: "\f817"; }
.bi-rewind-fill::before { content: "\f818"; }
.bi-rewind::before { content: "\f819"; }
.bi-train-freight-front-fill::before { content: "\f81a"; }
.bi-train-freight-front::before { content: "\f81b"; }
.bi-train-front-fill::before { content: "\f81c"; }
.bi-train-front::before { content: "\f81d"; }
.bi-train-lightrail-front-fill::before { content: "\f81e"; }
.bi-train-lightrail-front::before { content: "\f81f"; }
.bi-truck-front-fill::before { content: "\f820"; }
.bi-truck-front::before { content: "\f821"; }
.bi-ubuntu::before { content: "\f822"; }
.bi-unindent::before { content: "\f823"; }
.bi-unity::before { content: "\f824"; }
.bi-universal-access-circle::before { content: "\f825"; }
.bi-universal-access::before { content: "\f826"; }
.bi-virus::before { content: "\f827"; }
.bi-virus2::before { content: "\f828"; }
.bi-wechat::before { content: "\f829"; }
.bi-yelp::before { content: "\f82a"; }
.bi-sign-stop-fill::before { content: "\f82b"; }
.bi-sign-stop-lights-fill::before { content: "\f82c"; }
.bi-sign-stop-lights::before { content: "\f82d"; }
.bi-sign-stop::before { content: "\f82e"; }
.bi-sign-turn-left-fill::before { content: "\f82f"; }
.bi-sign-turn-left::before { content: "\f830"; }
.bi-sign-turn-right-fill::before { content: "\f831"; }
.bi-sign-turn-right::before { content: "\f832"; }
.bi-sign-turn-slight-left-fill::before { content: "\f833"; }
.bi-sign-turn-slight-left::before { content: "\f834"; }
.bi-sign-turn-slight-right-fill::before { content: "\f835"; }
.bi-sign-turn-slight-right::before { content: "\f836"; }
.bi-sign-yield-fill::before { content: "\f837"; }
.bi-sign-yield::before { content: "\f838"; }
.bi-ev-station-fill::before { content: "\f839"; }
.bi-ev-station::before { content: "\f83a"; }
.bi-fuel-pump-diesel-fill::before { content: "\f83b"; }
.bi-fuel-pump-diesel::before { content: "\f83c"; }
.bi-fuel-pump-fill::before { content: "\f83d"; }
.bi-fuel-pump::before { content: "\f83e"; }
.bi-0-circle-fill::before { content: "\f83f"; }
.bi-0-circle::before { content: "\f840"; }
.bi-0-square-fill::before { content: "\f841"; }
.bi-0-square::before { content: "\f842"; }
.bi-rocket-fill::before { content: "\f843"; }
.bi-rocket-takeoff-fill::before { content: "\f844"; }
.bi-rocket-takeoff::before { content: "\f845"; }
.bi-rocket::before { content: "\f846"; }
.bi-stripe::before { content: "\f847"; }
.bi-subscript::before { content: "\f848"; }
.bi-superscript::before { content: "\f849"; }
.bi-trello::before { content: "\f84a"; }
.bi-envelope-at-fill::before { content: "\f84b"; }
.bi-envelope-at::before { content: "\f84c"; }
.bi-regex::before { content: "\f84d"; }
.bi-text-wrap::before { content: "\f84e"; }
.bi-sign-dead-end-fill::before { content: "\f84f"; }
.bi-sign-dead-end::before { content: "\f850"; }
.bi-sign-do-not-enter-fill::before { content: "\f851"; }
.bi-sign-do-not-enter::before { content: "\f852"; }
.bi-sign-intersection-fill::before { content: "\f853"; }
.bi-sign-intersection-side-fill::before { content: "\f854"; }
.bi-sign-intersection-side::before { content: "\f855"; }
.bi-sign-intersection-t-fill::before { content: "\f856"; }
.bi-sign-intersection-t::before { content: "\f857"; }
.bi-sign-intersection-y-fill::before { content: "\f858"; }
.bi-sign-intersection-y::before { content: "\f859"; }
.bi-sign-intersection::before { content: "\f85a"; }
.bi-sign-merge-left-fill::before { content: "\f85b"; }
.bi-sign-merge-left::before { content: "\f85c"; }
.bi-sign-merge-right-fill::before { content: "\f85d"; }
.bi-sign-merge-right::before { content: "\f85e"; }
.bi-sign-no-left-turn-fill::before { content: "\f85f"; }
.bi-sign-no-left-turn::before { content: "\f860"; }
.bi-sign-no-parking-fill::before { content: "\f861"; }
.bi-sign-no-parking::before { content: "\f862"; }
.bi-sign-no-right-turn-fill::before { content: "\f863"; }
.bi-sign-no-right-turn::before { content: "\f864"; }
.bi-sign-railroad-fill::before { content: "\f865"; }
.bi-sign-railroad::before { content: "\f866"; }
.bi-building-add::before { content: "\f867"; }
.bi-building-check::before { content: "\f868"; }
.bi-building-dash::before { content: "\f869"; }
.bi-building-down::before { content: "\f86a"; }
.bi-building-exclamation::before { content: "\f86b"; }
.bi-building-fill-add::before { content: "\f86c"; }
.bi-building-fill-check::before { content: "\f86d"; }
.bi-building-fill-dash::before { content: "\f86e"; }
.bi-building-fill-down::before { content: "\f86f"; }
.bi-building-fill-exclamation::before { content: "\f870"; }
.bi-building-fill-gear::before { content: "\f871"; }
.bi-building-fill-lock::before { content: "\f872"; }
.bi-building-fill-slash::before { content: "\f873"; }
.bi-building-fill-up::before { content: "\f874"; }
.bi-building-fill-x::before { content: "\f875"; }
.bi-building-fill::before { content: "\f876"; }
.bi-building-gear::before { content: "\f877"; }
.bi-building-lock::before { content: "\f878"; }
.bi-building-slash::before { content: "\f879"; }
.bi-building-up::before { content: "\f87a"; }
.bi-building-x::before { content: "\f87b"; }
.bi-buildings-fill::before { content: "\f87c"; }
.bi-buildings::before { content: "\f87d"; }
.bi-bus-front-fill::before { content: "\f87e"; }
.bi-bus-front::before { content: "\f87f"; }
.bi-ev-front-fill::before { content: "\f880"; }
.bi-ev-front::before { content: "\f881"; }
.bi-globe-americas::before { content: "\f882"; }
.bi-globe-asia-australia::before { content: "\f883"; }
.bi-globe-central-south-asia::before { content: "\f884"; }
.bi-globe-europe-africa::before { content: "\f885"; }
.bi-house-add-fill::before { content: "\f886"; }
.bi-house-add::before { content: "\f887"; }
.bi-house-check-fill::before { content: "\f888"; }
.bi-house-check::before { content: "\f889"; }
.bi-house-dash-fill::before { content: "\f88a"; }
.bi-house-dash::before { content: "\f88b"; }
.bi-house-down-fill::before { content: "\f88c"; }
.bi-house-down::before { content: "\f88d"; }
.bi-house-exclamation-fill::before { content: "\f88e"; }
.bi-house-exclamation::before { content: "\f88f"; }
.bi-house-gear-fill::before { content: "\f890"; }
.bi-house-gear::before { content: "\f891"; }
.bi-house-lock-fill::before { content: "\f892"; }
.bi-house-lock::before { content: "\f893"; }
.bi-house-slash-fill::before { content: "\f894"; }
.bi-house-slash::before { content: "\f895"; }
.bi-house-up-fill::before { content: "\f896"; }
.bi-house-up::before { content: "\f897"; }
.bi-house-x-fill::before { content: "\f898"; }
.bi-house-x::before { content: "\f899"; }
.bi-person-add::before { content: "\f89a"; }
.bi-person-down::before { content: "\f89b"; }
.bi-person-exclamation::before { content: "\f89c"; }
.bi-person-fill-add::before { content: "\f89d"; }
.bi-person-fill-check::before { content: "\f89e"; }
.bi-person-fill-dash::before { content: "\f89f"; }
.bi-person-fill-down::before { content: "\f8a0"; }
.bi-person-fill-exclamation::before { content: "\f8a1"; }
.bi-person-fill-gear::before { content: "\f8a2"; }
.bi-person-fill-lock::before { content: "\f8a3"; }
.bi-person-fill-slash::before { content: "\f8a4"; }
.bi-person-fill-up::before { content: "\f8a5"; }
.bi-person-fill-x::before { content: "\f8a6"; }
.bi-person-gear::before { content: "\f8a7"; }
.bi-person-lock::before { content: "\f8a8"; }
.bi-person-slash::before { content: "\f8a9"; }
.bi-person-up::before { content: "\f8aa"; }
.bi-scooter::before { content: "\f8ab"; }
.bi-taxi-front-fill::before { content: "\f8ac"; }
.bi-taxi-front::before { content: "\f8ad"; }
.bi-amd::before { content: "\f8ae"; }
.bi-database-add::before { content: "\f8af"; }
.bi-database-check::before { content: "\f8b0"; }
.bi-database-dash::before { content: "\f8b1"; }
.bi-database-down::before { content: "\f8b2"; }
.bi-database-exclamation::before { content: "\f8b3"; }
.bi-database-fill-add::before { content: "\f8b4"; }
.bi-database-fill-check::before { content: "\f8b5"; }
.bi-database-fill-dash::before { content: "\f8b6"; }
.bi-database-fill-down::before { content: "\f8b7"; }
.bi-database-fill-exclamation::before { content: "\f8b8"; }
.bi-database-fill-gear::before { content: "\f8b9"; }
.bi-database-fill-lock::before { content: "\f8ba"; }
.bi-database-fill-slash::before { content: "\f8bb"; }
.bi-database-fill-up::before { content: "\f8bc"; }
.bi-database-fill-x::before { content: "\f8bd"; }
.bi-database-fill::before { content: "\f8be"; }
.bi-database-gear::before { content: "\f8bf"; }
.bi-database-lock::before { content: "\f8c0"; }
.bi-database-slash::before { content: "\f8c1"; }
.bi-database-up::before { content: "\f8c2"; }
.bi-database-x::before { content: "\f8c3"; }
.bi-database::before { content: "\f8c4"; }
.bi-houses-fill::before { content: "\f8c5"; }
.bi-houses::before { content: "\f8c6"; }
.bi-nvidia::before { content: "\f8c7"; }
.bi-person-vcard-fill::before { content: "\f8c8"; }
.bi-person-vcard::before { content: "\f8c9"; }
.bi-sina-weibo::before { content: "\f8ca"; }
.bi-tencent-qq::before { content: "\f8cb"; }
.bi-wikipedia::before { content: "\f8cc"; }
.bi-alphabet-uppercase::before { content: "\f2a5"; }
.bi-alphabet::before { content: "\f68a"; }
.bi-amazon::before { content: "\f68d"; }
.bi-arrows-collapse-vertical::before { content: "\f690"; }
.bi-arrows-expand-vertical::before { content: "\f695"; }
.bi-arrows-vertical::before { content: "\f698"; }
.bi-arrows::before { content: "\f6a2"; }
.bi-ban-fill::before { content: "\f6a3"; }
.bi-ban::before { content: "\f6b6"; }
.bi-bing::before { content: "\f6c2"; }
.bi-cake::before { content: "\f6e0"; }
.bi-cake2::before { content: "\f6ed"; }
.bi-cookie::before { content: "\f6ee"; }
.bi-copy::before { content: "\f759"; }
.bi-crosshair::before { content: "\f769"; }
.bi-crosshair2::before { content: "\f794"; }
.bi-emoji-astonished-fill::before { content: "\f795"; }
.bi-emoji-astonished::before { content: "\f79a"; }
.bi-emoji-grimace-fill::before { content: "\f79b"; }
.bi-emoji-grimace::before { content: "\f7a0"; }
.bi-emoji-grin-fill::before { content: "\f7a1"; }
.bi-emoji-grin::before { content: "\f7a6"; }
.bi-emoji-surprise-fill::before { content: "\f7a7"; }
.bi-emoji-surprise::before { content: "\f7ac"; }
.bi-emoji-tear-fill::before { content: "\f7ad"; }
.bi-emoji-tear::before { content: "\f7b2"; }
.bi-envelope-arrow-down-fill::before { content: "\f7b3"; }
.bi-envelope-arrow-down::before { content: "\f7b8"; }
.bi-envelope-arrow-up-fill::before { content: "\f7b9"; }
.bi-envelope-arrow-up::before { content: "\f7be"; }
.bi-feather::before { content: "\f7bf"; }
.bi-feather2::before { content: "\f7c4"; }
.bi-floppy-fill::before { content: "\f7c5"; }
.bi-floppy::before { content: "\f7d8"; }
.bi-floppy2-fill::before { content: "\f7d9"; }
.bi-floppy2::before { content: "\f7e4"; }
.bi-gitlab::before { content: "\f7e5"; }
.bi-highlighter::before { content: "\f7f8"; }
.bi-marker-tip::before { content: "\f802"; }
.bi-nvme-fill::before { content: "\f803"; }
.bi-nvme::before { content: "\f80c"; }
.bi-opencollective::before { content: "\f80d"; }
.bi-pci-card-network::before { content: "\f8cd"; }
.bi-pci-card-sound::before { content: "\f8ce"; }
.bi-radar::before { content: "\f8cf"; }
.bi-send-arrow-down-fill::before { content: "\f8d0"; }
.bi-send-arrow-down::before { content: "\f8d1"; }
.bi-send-arrow-up-fill::before { content: "\f8d2"; }
.bi-send-arrow-up::before { content: "\f8d3"; }
.bi-sim-slash-fill::before { content: "\f8d4"; }
.bi-sim-slash::before { content: "\f8d5"; }
.bi-sourceforge::before { content: "\f8d6"; }
.bi-substack::before { content: "\f8d7"; }
.bi-threads-fill::before { content: "\f8d8"; }
.bi-threads::before { content: "\f8d9"; }
.bi-transparency::before { content: "\f8da"; }
.bi-twitter-x::before { content: "\f8db"; }
.bi-type-h4::before { content: "\f8dc"; }
.bi-type-h5::before { content: "\f8dd"; }
.bi-type-h6::before { content: "\f8de"; }
.bi-backpack-fill::before { content: "\f8df"; }
.bi-backpack::before { content: "\f8e0"; }
.bi-backpack2-fill::before { content: "\f8e1"; }
.bi-backpack2::before { content: "\f8e2"; }
.bi-backpack3-fill::before { content: "\f8e3"; }
.bi-backpack3::before { content: "\f8e4"; }
.bi-backpack4-fill::before { content: "\f8e5"; }
.bi-backpack4::before { content: "\f8e6"; }
.bi-brilliance::before { content: "\f8e7"; }
.bi-cake-fill::before { content: "\f8e8"; }
.bi-cake2-fill::before { content: "\f8e9"; }
.bi-duffle-fill::before { content: "\f8ea"; }
.bi-duffle::before { content: "\f8eb"; }
.bi-exposure::before { content: "\f8ec"; }
.bi-gender-neuter::before { content: "\f8ed"; }
.bi-highlights::before { content: "\f8ee"; }
.bi-luggage-fill::before { content: "\f8ef"; }
.bi-luggage::before { content: "\f8f0"; }
.bi-mailbox-flag::before { content: "\f8f1"; }
.bi-mailbox2-flag::before { content: "\f8f2"; }
.bi-noise-reduction::before { content: "\f8f3"; }
.bi-passport-fill::before { content: "\f8f4"; }
.bi-passport::before { content: "\f8f5"; }
.bi-person-arms-up::before { content: "\f8f6"; }
.bi-person-raised-hand::before { content: "\f8f7"; }
.bi-person-standing-dress::before { content: "\f8f8"; }
.bi-person-standing::before { content: "\f8f9"; }
.bi-person-walking::before { content: "\f8fa"; }
.bi-person-wheelchair::before { content: "\f8fb"; }
.bi-shadows::before { content: "\f8fc"; }
.bi-suitcase-fill::before { content: "\f8fd"; }
.bi-suitcase-lg-fill::before { content: "\f8fe"; }
.bi-suitcase-lg::before { content: "\f8ff"; }
.bi-suitcase::before { content: "\f900"; }
.bi-suitcase2-fill::before { content: "\f901"; }
.bi-suitcase2::before { content: "\f902"; }
.bi-vignette::before { content: "\f903"; }

--- END OF FILE static/css/bootstrap-icons.css ---

--- START OF FILE static/css/bootstrap.min.css ---

@charset "UTF-8";/*!
 * Bootstrap  v5.3.0 (https://getbootstrap.com/)
 * Copyright 2011-2023 The Bootstrap Authors
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
 */:root,[data-bs-theme=light]{--bs-blue:#0d6efd;--bs-indigo:#6610f2;--bs-purple:#6f42c1;--bs-pink:#d63384;--bs-red:#dc3545;--bs-orange:#fd7e14;--bs-yellow:#ffc107;--bs-green:#198754;--bs-teal:#20c997;--bs-cyan:#0dcaf0;--bs-black:#000;--bs-white:#fff;--bs-gray:#6c757d;--bs-gray-dark:#343a40;--bs-gray-100:#f8f9fa;--bs-gray-200:#e9ecef;--bs-gray-300:#dee2e6;--bs-gray-400:#ced4da;--bs-gray-500:#adb5bd;--bs-gray-600:#6c757d;--bs-gray-700:#495057;--bs-gray-800:#343a40;--bs-gray-900:#212529;--bs-primary:#0d6efd;--bs-secondary:#6c757d;--bs-success:#198754;--bs-info:#0dcaf0;--bs-warning:#ffc107;--bs-danger:#dc3545;--bs-light:#f8f9fa;--bs-dark:#212529;--bs-primary-rgb:13,110,253;--bs-secondary-rgb:108,117,125;--bs-success-rgb:25,135,84;--bs-info-rgb:13,202,240;--bs-warning-rgb:255,193,7;--bs-danger-rgb:220,53,69;--bs-light-rgb:248,249,250;--bs-dark-rgb:33,37,41;--bs-primary-text-emphasis:#052c65;--bs-secondary-text-emphasis:#2b2f32;--bs-success-text-emphasis:#0a3622;--bs-info-text-emphasis:#055160;--bs-warning-text-emphasis:#664d03;--bs-danger-text-emphasis:#58151c;--bs-light-text-emphasis:#495057;--bs-dark-text-emphasis:#495057;--bs-primary-bg-subtle:#cfe2ff;--bs-secondary-bg-subtle:#e2e3e5;--bs-success-bg-subtle:#d1e7dd;--bs-info-bg-subtle:#cff4fc;--bs-warning-bg-subtle:#fff3cd;--bs-danger-bg-subtle:#f8d7da;--bs-light-bg-subtle:#fcfcfd;--bs-dark-bg-subtle:#ced4da;--bs-primary-border-subtle:#9ec5fe;--bs-secondary-border-subtle:#c4c8cb;--bs-success-border-subtle:#a3cfbb;--bs-info-border-subtle:#9eeaf9;--bs-warning-border-subtle:#ffe69c;--bs-danger-border-subtle:#f1aeb5;--bs-light-border-subtle:#e9ecef;--bs-dark-border-subtle:#adb5bd;--bs-white-rgb:255,255,255;--bs-black-rgb:0,0,0;--bs-font-sans-serif:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue","Noto Sans","Liberation Sans",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--bs-font-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--bs-gradient:linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0));--bs-body-font-family:var(--bs-font-sans-serif);--bs-body-font-size:1rem;--bs-body-font-weight:400;--bs-body-line-height:1.5;--bs-body-color:#212529;--bs-body-color-rgb:33,37,41;--bs-body-bg:#fff;--bs-body-bg-rgb:255,255,255;--bs-emphasis-color:#000;--bs-emphasis-color-rgb:0,0,0;--bs-secondary-color:rgba(33, 37, 41, 0.75);--bs-secondary-color-rgb:33,37,41;--bs-secondary-bg:#e9ecef;--bs-secondary-bg-rgb:233,236,239;--bs-tertiary-color:rgba(33, 37, 41, 0.5);--bs-tertiary-color-rgb:33,37,41;--bs-tertiary-bg:#f8f9fa;--bs-tertiary-bg-rgb:248,249,250;--bs-heading-color:inherit;--bs-link-color:#0d6efd;--bs-link-color-rgb:13,110,253;--bs-link-decoration:underline;--bs-link-hover-color:#0a58ca;--bs-link-hover-color-rgb:10,88,202;--bs-code-color:#d63384;--bs-highlight-bg:#fff3cd;--bs-border-width:1px;--bs-border-style:solid;--bs-border-color:#dee2e6;--bs-border-color-translucent:rgba(0, 0, 0, 0.175);--bs-border-radius:0.375rem;--bs-border-radius-sm:0.25rem;--bs-border-radius-lg:0.5rem;--bs-border-radius-xl:1rem;--bs-border-radius-xxl:2rem;--bs-border-radius-2xl:var(--bs-border-radius-xxl);--bs-border-radius-pill:50rem;--bs-box-shadow:0 0.5rem 1rem rgba(0, 0, 0, 0.15);--bs-box-shadow-sm:0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);--bs-box-shadow-lg:0 1rem 3rem rgba(0, 0, 0, 0.175);--bs-box-shadow-inset:inset 0 1px 2px rgba(0, 0, 0, 0.075);--bs-focus-ring-width:0.25rem;--bs-focus-ring-opacity:0.25;--bs-focus-ring-color:rgba(13, 110, 253, 0.25);--bs-form-valid-color:#198754;--bs-form-valid-border-color:#198754;--bs-form-invalid-color:#dc3545;--bs-form-invalid-border-color:#dc3545}[data-bs-theme=dark]{color-scheme:dark;--bs-body-color:#adb5bd;--bs-body-color-rgb:173,181,189;--bs-body-bg:#212529;--bs-body-bg-rgb:33,37,41;--bs-emphasis-color:#fff;--bs-emphasis-color-rgb:255,255,255;--bs-secondary-color:rgba(173, 181, 189, 0.75);--bs-secondary-color-rgb:173,181,189;--bs-secondary-bg:#343a40;--bs-secondary-bg-rgb:52,58,64;--bs-tertiary-color:rgba(173, 181, 189, 0.5);--bs-tertiary-color-rgb:173,181,189;--bs-tertiary-bg:#2b3035;--bs-tertiary-bg-rgb:43,48,53;--bs-primary-text-emphasis:#6ea8fe;--bs-secondary-text-emphasis:#a7acb1;--bs-success-text-emphasis:#75b798;--bs-info-text-emphasis:#6edff6;--bs-warning-text-emphasis:#ffda6a;--bs-danger-text-emphasis:#ea868f;--bs-light-text-emphasis:#f8f9fa;--bs-dark-text-emphasis:#dee2e6;--bs-primary-bg-subtle:#031633;--bs-secondary-bg-subtle:#161719;--bs-success-bg-subtle:#051b11;--bs-info-bg-subtle:#032830;--bs-warning-bg-subtle:#332701;--bs-danger-bg-subtle:#2c0b0e;--bs-light-bg-subtle:#343a40;--bs-dark-bg-subtle:#1a1d20;--bs-primary-border-subtle:#084298;--bs-secondary-border-subtle:#41464b;--bs-success-border-subtle:#0f5132;--bs-info-border-subtle:#087990;--bs-warning-border-subtle:#997404;--bs-danger-border-subtle:#842029;--bs-light-border-subtle:#495057;--bs-dark-border-subtle:#343a40;--bs-heading-color:inherit;--bs-link-color:#6ea8fe;--bs-link-hover-color:#8bb9fe;--bs-link-color-rgb:110,168,254;--bs-link-hover-color-rgb:139,185,254;--bs-code-color:#e685b5;--bs-border-color:#495057;--bs-border-color-translucent:rgba(255, 255, 255, 0.15);--bs-form-valid-color:#75b798;--bs-form-valid-border-color:#75b798;--bs-form-invalid-color:#ea868f;--bs-form-invalid-border-color:#ea868f}*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:var(--bs-body-font-family);font-size:var(--bs-body-font-size);font-weight:var(--bs-body-font-weight);line-height:var(--bs-body-line-height);color:var(--bs-body-color);text-align:var(--bs-body-text-align);background-color:var(--bs-body-bg);-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;border:0;border-top:var(--bs-border-width) solid;opacity:.25}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2;color:var(--bs-heading-color)}.h1,h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){.h1,h1{font-size:2.5rem}}.h2,h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){.h2,h2{font-size:2rem}}.h3,h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){.h3,h3{font-size:1.75rem}}.h4,h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){.h4,h4{font-size:1.5rem}}.h5,h5{font-size:1.25rem}.h6,h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}.small,small{font-size:.875em}.mark,mark{padding:.1875em;background-color:var(--bs-highlight-bg)}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:rgba(var(--bs-link-color-rgb),var(--bs-link-opacity,1));text-decoration:underline}a:hover{--bs-link-color-rgb:var(--bs-link-hover-color-rgb)}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:var(--bs-font-monospace);font-size:1em}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:var(--bs-code-color);word-wrap:break-word}a>code{color:inherit}kbd{padding:.1875rem .375rem;font-size:.875em;color:var(--bs-body-bg);background-color:var(--bs-body-color);border-radius:.25rem}kbd kbd{padding:0;font-size:1em}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:var(--bs-secondary-color);text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]:not([type=date]):not([type=datetime-local]):not([type=month]):not([type=week]):not([type=time])::-webkit-calendar-picker-indicator{display:none!important}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}::file-selector-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:calc(1.625rem + 4.5vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-1{font-size:5rem}}.display-2{font-size:calc(1.575rem + 3.9vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-2{font-size:4.5rem}}.display-3{font-size:calc(1.525rem + 3.3vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-3{font-size:4rem}}.display-4{font-size:calc(1.475rem + 2.7vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-4{font-size:3.5rem}}.display-5{font-size:calc(1.425rem + 2.1vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-5{font-size:3rem}}.display-6{font-size:calc(1.375rem + 1.5vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-6{font-size:2.5rem}}.list-unstyled{padding-left:0;list-style:none}.list-inline{padding-left:0;list-style:none}.list-inline-item{display:inline-block}.list-inline-item:not(:last-child){margin-right:.5rem}.initialism{font-size:.875em;text-transform:uppercase}.blockquote{margin-bottom:1rem;font-size:1.25rem}.blockquote>:last-child{margin-bottom:0}.blockquote-footer{margin-top:-1rem;margin-bottom:1rem;font-size:.875em;color:#6c757d}.blockquote-footer::before{content:"‚Äî¬†"}.img-fluid{max-width:100%;height:auto}.img-thumbnail{padding:.25rem;background-color:var(--bs-body-bg);border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius);max-width:100%;height:auto}.figure{display:inline-block}.figure-img{margin-bottom:.5rem;line-height:1}.figure-caption{font-size:.875em;color:var(--bs-secondary-color)}.container,.container-fluid,.container-lg,.container-md,.container-sm,.container-xl,.container-xxl{--bs-gutter-x:1.5rem;--bs-gutter-y:0;width:100%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-right:auto;margin-left:auto}@media (min-width:576px){.container,.container-sm{max-width:540px}}@media (min-width:768px){.container,.container-md,.container-sm{max-width:720px}}@media (min-width:992px){.container,.container-lg,.container-md,.container-sm{max-width:960px}}@media (min-width:1200px){.container,.container-lg,.container-md,.container-sm,.container-xl{max-width:1140px}}@media (min-width:1400px){.container,.container-lg,.container-md,.container-sm,.container-xl,.container-xxl{max-width:1320px}}:root{--bs-breakpoint-xs:0;--bs-breakpoint-sm:576px;--bs-breakpoint-md:768px;--bs-breakpoint-lg:992px;--bs-breakpoint-xl:1200px;--bs-breakpoint-xxl:1400px}.row{--bs-gutter-x:1.5rem;--bs-gutter-y:0;display:flex;flex-wrap:wrap;margin-top:calc(-1 * var(--bs-gutter-y));margin-right:calc(-.5 * var(--bs-gutter-x));margin-left:calc(-.5 * var(--bs-gutter-x))}.row>*{flex-shrink:0;width:100%;max-width:100%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-top:var(--bs-gutter-y)}.col{flex:1 0 0%}.row-cols-auto>*{flex:0 0 auto;width:auto}.row-cols-1>*{flex:0 0 auto;width:100%}.row-cols-2>*{flex:0 0 auto;width:50%}.row-cols-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-4>*{flex:0 0 auto;width:25%}.row-cols-5>*{flex:0 0 auto;width:20%}.row-cols-6>*{flex:0 0 auto;width:16.6666666667%}.col-auto{flex:0 0 auto;width:auto}.col-1{flex:0 0 auto;width:8.33333333%}.col-2{flex:0 0 auto;width:16.66666667%}.col-3{flex:0 0 auto;width:25%}.col-4{flex:0 0 auto;width:33.33333333%}.col-5{flex:0 0 auto;width:41.66666667%}.col-6{flex:0 0 auto;width:50%}.col-7{flex:0 0 auto;width:58.33333333%}.col-8{flex:0 0 auto;width:66.66666667%}.col-9{flex:0 0 auto;width:75%}.col-10{flex:0 0 auto;width:83.33333333%}.col-11{flex:0 0 auto;width:91.66666667%}.col-12{flex:0 0 auto;width:100%}.offset-1{margin-left:8.33333333%}.offset-2{margin-left:16.66666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.33333333%}.offset-5{margin-left:41.66666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.33333333%}.offset-8{margin-left:66.66666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.33333333%}.offset-11{margin-left:91.66666667%}.g-0,.gx-0{--bs-gutter-x:0}.g-0,.gy-0{--bs-gutter-y:0}.g-1,.gx-1{--bs-gutter-x:0.25rem}.g-1,.gy-1{--bs-gutter-y:0.25rem}.g-2,.gx-2{--bs-gutter-x:0.5rem}.g-2,.gy-2{--bs-gutter-y:0.5rem}.g-3,.gx-3{--bs-gutter-x:1rem}.g-3,.gy-3{--bs-gutter-y:1rem}.g-4,.gx-4{--bs-gutter-x:1.5rem}.g-4,.gy-4{--bs-gutter-y:1.5rem}.g-5,.gx-5{--bs-gutter-x:3rem}.g-5,.gy-5{--bs-gutter-y:3rem}@media (min-width:576px){.col-sm{flex:1 0 0%}.row-cols-sm-auto>*{flex:0 0 auto;width:auto}.row-cols-sm-1>*{flex:0 0 auto;width:100%}.row-cols-sm-2>*{flex:0 0 auto;width:50%}.row-cols-sm-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-sm-4>*{flex:0 0 auto;width:25%}.row-cols-sm-5>*{flex:0 0 auto;width:20%}.row-cols-sm-6>*{flex:0 0 auto;width:16.6666666667%}.col-sm-auto{flex:0 0 auto;width:auto}.col-sm-1{flex:0 0 auto;width:8.33333333%}.col-sm-2{flex:0 0 auto;width:16.66666667%}.col-sm-3{flex:0 0 auto;width:25%}.col-sm-4{flex:0 0 auto;width:33.33333333%}.col-sm-5{flex:0 0 auto;width:41.66666667%}.col-sm-6{flex:0 0 auto;width:50%}.col-sm-7{flex:0 0 auto;width:58.33333333%}.col-sm-8{flex:0 0 auto;width:66.66666667%}.col-sm-9{flex:0 0 auto;width:75%}.col-sm-10{flex:0 0 auto;width:83.33333333%}.col-sm-11{flex:0 0 auto;width:91.66666667%}.col-sm-12{flex:0 0 auto;width:100%}.offset-sm-0{margin-left:0}.offset-sm-1{margin-left:8.33333333%}.offset-sm-2{margin-left:16.66666667%}.offset-sm-3{margin-left:25%}.offset-sm-4{margin-left:33.33333333%}.offset-sm-5{margin-left:41.66666667%}.offset-sm-6{margin-left:50%}.offset-sm-7{margin-left:58.33333333%}.offset-sm-8{margin-left:66.66666667%}.offset-sm-9{margin-left:75%}.offset-sm-10{margin-left:83.33333333%}.offset-sm-11{margin-left:91.66666667%}.g-sm-0,.gx-sm-0{--bs-gutter-x:0}.g-sm-0,.gy-sm-0{--bs-gutter-y:0}.g-sm-1,.gx-sm-1{--bs-gutter-x:0.25rem}.g-sm-1,.gy-sm-1{--bs-gutter-y:0.25rem}.g-sm-2,.gx-sm-2{--bs-gutter-x:0.5rem}.g-sm-2,.gy-sm-2{--bs-gutter-y:0.5rem}.g-sm-3,.gx-sm-3{--bs-gutter-x:1rem}.g-sm-3,.gy-sm-3{--bs-gutter-y:1rem}.g-sm-4,.gx-sm-4{--bs-gutter-x:1.5rem}.g-sm-4,.gy-sm-4{--bs-gutter-y:1.5rem}.g-sm-5,.gx-sm-5{--bs-gutter-x:3rem}.g-sm-5,.gy-sm-5{--bs-gutter-y:3rem}}@media (min-width:768px){.col-md{flex:1 0 0%}.row-cols-md-auto>*{flex:0 0 auto;width:auto}.row-cols-md-1>*{flex:0 0 auto;width:100%}.row-cols-md-2>*{flex:0 0 auto;width:50%}.row-cols-md-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-md-4>*{flex:0 0 auto;width:25%}.row-cols-md-5>*{flex:0 0 auto;width:20%}.row-cols-md-6>*{flex:0 0 auto;width:16.6666666667%}.col-md-auto{flex:0 0 auto;width:auto}.col-md-1{flex:0 0 auto;width:8.33333333%}.col-md-2{flex:0 0 auto;width:16.66666667%}.col-md-3{flex:0 0 auto;width:25%}.col-md-4{flex:0 0 auto;width:33.33333333%}.col-md-5{flex:0 0 auto;width:41.66666667%}.col-md-6{flex:0 0 auto;width:50%}.col-md-7{flex:0 0 auto;width:58.33333333%}.col-md-8{flex:0 0 auto;width:66.66666667%}.col-md-9{flex:0 0 auto;width:75%}.col-md-10{flex:0 0 auto;width:83.33333333%}.col-md-11{flex:0 0 auto;width:91.66666667%}.col-md-12{flex:0 0 auto;width:100%}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.33333333%}.offset-md-2{margin-left:16.66666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.33333333%}.offset-md-5{margin-left:41.66666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.33333333%}.offset-md-8{margin-left:66.66666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.33333333%}.offset-md-11{margin-left:91.66666667%}.g-md-0,.gx-md-0{--bs-gutter-x:0}.g-md-0,.gy-md-0{--bs-gutter-y:0}.g-md-1,.gx-md-1{--bs-gutter-x:0.25rem}.g-md-1,.gy-md-1{--bs-gutter-y:0.25rem}.g-md-2,.gx-md-2{--bs-gutter-x:0.5rem}.g-md-2,.gy-md-2{--bs-gutter-y:0.5rem}.g-md-3,.gx-md-3{--bs-gutter-x:1rem}.g-md-3,.gy-md-3{--bs-gutter-y:1rem}.g-md-4,.gx-md-4{--bs-gutter-x:1.5rem}.g-md-4,.gy-md-4{--bs-gutter-y:1.5rem}.g-md-5,.gx-md-5{--bs-gutter-x:3rem}.g-md-5,.gy-md-5{--bs-gutter-y:3rem}}@media (min-width:992px){.col-lg{flex:1 0 0%}.row-cols-lg-auto>*{flex:0 0 auto;width:auto}.row-cols-lg-1>*{flex:0 0 auto;width:100%}.row-cols-lg-2>*{flex:0 0 auto;width:50%}.row-cols-lg-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-lg-4>*{flex:0 0 auto;width:25%}.row-cols-lg-5>*{flex:0 0 auto;width:20%}.row-cols-lg-6>*{flex:0 0 auto;width:16.6666666667%}.col-lg-auto{flex:0 0 auto;width:auto}.col-lg-1{flex:0 0 auto;width:8.33333333%}.col-lg-2{flex:0 0 auto;width:16.66666667%}.col-lg-3{flex:0 0 auto;width:25%}.col-lg-4{flex:0 0 auto;width:33.33333333%}.col-lg-5{flex:0 0 auto;width:41.66666667%}.col-lg-6{flex:0 0 auto;width:50%}.col-lg-7{flex:0 0 auto;width:58.33333333%}.col-lg-8{flex:0 0 auto;width:66.66666667%}.col-lg-9{flex:0 0 auto;width:75%}.col-lg-10{flex:0 0 auto;width:83.33333333%}.col-lg-11{flex:0 0 auto;width:91.66666667%}.col-lg-12{flex:0 0 auto;width:100%}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.33333333%}.offset-lg-2{margin-left:16.66666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.33333333%}.offset-lg-5{margin-left:41.66666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.33333333%}.offset-lg-8{margin-left:66.66666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.33333333%}.offset-lg-11{margin-left:91.66666667%}.g-lg-0,.gx-lg-0{--bs-gutter-x:0}.g-lg-0,.gy-lg-0{--bs-gutter-y:0}.g-lg-1,.gx-lg-1{--bs-gutter-x:0.25rem}.g-lg-1,.gy-lg-1{--bs-gutter-y:0.25rem}.g-lg-2,.gx-lg-2{--bs-gutter-x:0.5rem}.g-lg-2,.gy-lg-2{--bs-gutter-y:0.5rem}.g-lg-3,.gx-lg-3{--bs-gutter-x:1rem}.g-lg-3,.gy-lg-3{--bs-gutter-y:1rem}.g-lg-4,.gx-lg-4{--bs-gutter-x:1.5rem}.g-lg-4,.gy-lg-4{--bs-gutter-y:1.5rem}.g-lg-5,.gx-lg-5{--bs-gutter-x:3rem}.g-lg-5,.gy-lg-5{--bs-gutter-y:3rem}}@media (min-width:1200px){.col-xl{flex:1 0 0%}.row-cols-xl-auto>*{flex:0 0 auto;width:auto}.row-cols-xl-1>*{flex:0 0 auto;width:100%}.row-cols-xl-2>*{flex:0 0 auto;width:50%}.row-cols-xl-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-xl-4>*{flex:0 0 auto;width:25%}.row-cols-xl-5>*{flex:0 0 auto;width:20%}.row-cols-xl-6>*{flex:0 0 auto;width:16.6666666667%}.col-xl-auto{flex:0 0 auto;width:auto}.col-xl-1{flex:0 0 auto;width:8.33333333%}.col-xl-2{flex:0 0 auto;width:16.66666667%}.col-xl-3{flex:0 0 auto;width:25%}.col-xl-4{flex:0 0 auto;width:33.33333333%}.col-xl-5{flex:0 0 auto;width:41.66666667%}.col-xl-6{flex:0 0 auto;width:50%}.col-xl-7{flex:0 0 auto;width:58.33333333%}.col-xl-8{flex:0 0 auto;width:66.66666667%}.col-xl-9{flex:0 0 auto;width:75%}.col-xl-10{flex:0 0 auto;width:83.33333333%}.col-xl-11{flex:0 0 auto;width:91.66666667%}.col-xl-12{flex:0 0 auto;width:100%}.offset-xl-0{margin-left:0}.offset-xl-1{margin-left:8.33333333%}.offset-xl-2{margin-left:16.66666667%}.offset-xl-3{margin-left:25%}.offset-xl-4{margin-left:33.33333333%}.offset-xl-5{margin-left:41.66666667%}.offset-xl-6{margin-left:50%}.offset-xl-7{margin-left:58.33333333%}.offset-xl-8{margin-left:66.66666667%}.offset-xl-9{margin-left:75%}.offset-xl-10{margin-left:83.33333333%}.offset-xl-11{margin-left:91.66666667%}.g-xl-0,.gx-xl-0{--bs-gutter-x:0}.g-xl-0,.gy-xl-0{--bs-gutter-y:0}.g-xl-1,.gx-xl-1{--bs-gutter-x:0.25rem}.g-xl-1,.gy-xl-1{--bs-gutter-y:0.25rem}.g-xl-2,.gx-xl-2{--bs-gutter-x:0.5rem}.g-xl-2,.gy-xl-2{--bs-gutter-y:0.5rem}.g-xl-3,.gx-xl-3{--bs-gutter-x:1rem}.g-xl-3,.gy-xl-3{--bs-gutter-y:1rem}.g-xl-4,.gx-xl-4{--bs-gutter-x:1.5rem}.g-xl-4,.gy-xl-4{--bs-gutter-y:1.5rem}.g-xl-5,.gx-xl-5{--bs-gutter-x:3rem}.g-xl-5,.gy-xl-5{--bs-gutter-y:3rem}}@media (min-width:1400px){.col-xxl{flex:1 0 0%}.row-cols-xxl-auto>*{flex:0 0 auto;width:auto}.row-cols-xxl-1>*{flex:0 0 auto;width:100%}.row-cols-xxl-2>*{flex:0 0 auto;width:50%}.row-cols-xxl-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-xxl-4>*{flex:0 0 auto;width:25%}.row-cols-xxl-5>*{flex:0 0 auto;width:20%}.row-cols-xxl-6>*{flex:0 0 auto;width:16.6666666667%}.col-xxl-auto{flex:0 0 auto;width:auto}.col-xxl-1{flex:0 0 auto;width:8.33333333%}.col-xxl-2{flex:0 0 auto;width:16.66666667%}.col-xxl-3{flex:0 0 auto;width:25%}.col-xxl-4{flex:0 0 auto;width:33.33333333%}.col-xxl-5{flex:0 0 auto;width:41.66666667%}.col-xxl-6{flex:0 0 auto;width:50%}.col-xxl-7{flex:0 0 auto;width:58.33333333%}.col-xxl-8{flex:0 0 auto;width:66.66666667%}.col-xxl-9{flex:0 0 auto;width:75%}.col-xxl-10{flex:0 0 auto;width:83.33333333%}.col-xxl-11{flex:0 0 auto;width:91.66666667%}.col-xxl-12{flex:0 0 auto;width:100%}.offset-xxl-0{margin-left:0}.offset-xxl-1{margin-left:8.33333333%}.offset-xxl-2{margin-left:16.66666667%}.offset-xxl-3{margin-left:25%}.offset-xxl-4{margin-left:33.33333333%}.offset-xxl-5{margin-left:41.66666667%}.offset-xxl-6{margin-left:50%}.offset-xxl-7{margin-left:58.33333333%}.offset-xxl-8{margin-left:66.66666667%}.offset-xxl-9{margin-left:75%}.offset-xxl-10{margin-left:83.33333333%}.offset-xxl-11{margin-left:91.66666667%}.g-xxl-0,.gx-xxl-0{--bs-gutter-x:0}.g-xxl-0,.gy-xxl-0{--bs-gutter-y:0}.g-xxl-1,.gx-xxl-1{--bs-gutter-x:0.25rem}.g-xxl-1,.gy-xxl-1{--bs-gutter-y:0.25rem}.g-xxl-2,.gx-xxl-2{--bs-gutter-x:0.5rem}.g-xxl-2,.gy-xxl-2{--bs-gutter-y:0.5rem}.g-xxl-3,.gx-xxl-3{--bs-gutter-x:1rem}.g-xxl-3,.gy-xxl-3{--bs-gutter-y:1rem}.g-xxl-4,.gx-xxl-4{--bs-gutter-x:1.5rem}.g-xxl-4,.gy-xxl-4{--bs-gutter-y:1.5rem}.g-xxl-5,.gx-xxl-5{--bs-gutter-x:3rem}.g-xxl-5,.gy-xxl-5{--bs-gutter-y:3rem}}.table{--bs-table-color-type:initial;--bs-table-bg-type:initial;--bs-table-color-state:initial;--bs-table-bg-state:initial;--bs-table-color:var(--bs-body-color);--bs-table-bg:var(--bs-body-bg);--bs-table-border-color:var(--bs-border-color);--bs-table-accent-bg:transparent;--bs-table-striped-color:var(--bs-body-color);--bs-table-striped-bg:rgba(0, 0, 0, 0.05);--bs-table-active-color:var(--bs-body-color);--bs-table-active-bg:rgba(0, 0, 0, 0.1);--bs-table-hover-color:var(--bs-body-color);--bs-table-hover-bg:rgba(0, 0, 0, 0.075);width:100%;margin-bottom:1rem;vertical-align:top;border-color:var(--bs-table-border-color)}.table>:not(caption)>*>*{padding:.5rem .5rem;color:var(--bs-table-color-state,var(--bs-table-color-type,var(--bs-table-color)));background-color:var(--bs-table-bg);border-bottom-width:var(--bs-border-width);box-shadow:inset 0 0 0 9999px var(--bs-table-bg-state,var(--bs-table-bg-type,var(--bs-table-accent-bg)))}.table>tbody{vertical-align:inherit}.table>thead{vertical-align:bottom}.table-group-divider{border-top:calc(var(--bs-border-width) * 2) solid currentcolor}.caption-top{caption-side:top}.table-sm>:not(caption)>*>*{padding:.25rem .25rem}.table-bordered>:not(caption)>*{border-width:var(--bs-border-width) 0}.table-bordered>:not(caption)>*>*{border-width:0 var(--bs-border-width)}.table-borderless>:not(caption)>*>*{border-bottom-width:0}.table-borderless>:not(:first-child){border-top-width:0}.table-striped>tbody>tr:nth-of-type(odd)>*{--bs-table-color-type:var(--bs-table-striped-color);--bs-table-bg-type:var(--bs-table-striped-bg)}.table-striped-columns>:not(caption)>tr>:nth-child(2n){--bs-table-color-type:var(--bs-table-striped-color);--bs-table-bg-type:var(--bs-table-striped-bg)}.table-active{--bs-table-color-state:var(--bs-table-active-color);--bs-table-bg-state:var(--bs-table-active-bg)}.table-hover>tbody>tr:hover>*{--bs-table-color-state:var(--bs-table-hover-color);--bs-table-bg-state:var(--bs-table-hover-bg)}.table-primary{--bs-table-color:#000;--bs-table-bg:#cfe2ff;--bs-table-border-color:#bacbe6;--bs-table-striped-bg:#c5d7f2;--bs-table-striped-color:#000;--bs-table-active-bg:#bacbe6;--bs-table-active-color:#000;--bs-table-hover-bg:#bfd1ec;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-secondary{--bs-table-color:#000;--bs-table-bg:#e2e3e5;--bs-table-border-color:#cbccce;--bs-table-striped-bg:#d7d8da;--bs-table-striped-color:#000;--bs-table-active-bg:#cbccce;--bs-table-active-color:#000;--bs-table-hover-bg:#d1d2d4;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-success{--bs-table-color:#000;--bs-table-bg:#d1e7dd;--bs-table-border-color:#bcd0c7;--bs-table-striped-bg:#c7dbd2;--bs-table-striped-color:#000;--bs-table-active-bg:#bcd0c7;--bs-table-active-color:#000;--bs-table-hover-bg:#c1d6cc;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-info{--bs-table-color:#000;--bs-table-bg:#cff4fc;--bs-table-border-color:#badce3;--bs-table-striped-bg:#c5e8ef;--bs-table-striped-color:#000;--bs-table-active-bg:#badce3;--bs-table-active-color:#000;--bs-table-hover-bg:#bfe2e9;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-warning{--bs-table-color:#000;--bs-table-bg:#fff3cd;--bs-table-border-color:#e6dbb9;--bs-table-striped-bg:#f2e7c3;--bs-table-striped-color:#000;--bs-table-active-bg:#e6dbb9;--bs-table-active-color:#000;--bs-table-hover-bg:#ece1be;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-danger{--bs-table-color:#000;--bs-table-bg:#f8d7da;--bs-table-border-color:#dfc2c4;--bs-table-striped-bg:#eccccf;--bs-table-striped-color:#000;--bs-table-active-bg:#dfc2c4;--bs-table-active-color:#000;--bs-table-hover-bg:#e5c7ca;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-light{--bs-table-color:#000;--bs-table-bg:#f8f9fa;--bs-table-border-color:#dfe0e1;--bs-table-striped-bg:#ecedee;--bs-table-striped-color:#000;--bs-table-active-bg:#dfe0e1;--bs-table-active-color:#000;--bs-table-hover-bg:#e5e6e7;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-dark{--bs-table-color:#fff;--bs-table-bg:#212529;--bs-table-border-color:#373b3e;--bs-table-striped-bg:#2c3034;--bs-table-striped-color:#fff;--bs-table-active-bg:#373b3e;--bs-table-active-color:#fff;--bs-table-hover-bg:#323539;--bs-table-hover-color:#fff;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-responsive{overflow-x:auto;-webkit-overflow-scrolling:touch}@media (max-width:575.98px){.table-responsive-sm{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:767.98px){.table-responsive-md{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:991.98px){.table-responsive-lg{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:1199.98px){.table-responsive-xl{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:1399.98px){.table-responsive-xxl{overflow-x:auto;-webkit-overflow-scrolling:touch}}.form-label{margin-bottom:.5rem}.col-form-label{padding-top:calc(.375rem + var(--bs-border-width));padding-bottom:calc(.375rem + var(--bs-border-width));margin-bottom:0;font-size:inherit;line-height:1.5}.col-form-label-lg{padding-top:calc(.5rem + var(--bs-border-width));padding-bottom:calc(.5rem + var(--bs-border-width));font-size:1.25rem}.col-form-label-sm{padding-top:calc(.25rem + var(--bs-border-width));padding-bottom:calc(.25rem + var(--bs-border-width));font-size:.875rem}.form-text{margin-top:.25rem;font-size:.875em;color:var(--bs-secondary-color)}.form-control{display:block;width:100%;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);background-color:var(--bs-body-bg);background-clip:padding-box;border:var(--bs-border-width) solid var(--bs-border-color);-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--bs-border-radius);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-control{transition:none}}.form-control[type=file]{overflow:hidden}.form-control[type=file]:not(:disabled):not([readonly]){cursor:pointer}.form-control:focus{color:var(--bs-body-color);background-color:var(--bs-body-bg);border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-control::-webkit-date-and-time-value{min-width:85px;height:1.5em;margin:0}.form-control::-webkit-datetime-edit{display:block;padding:0}.form-control::-moz-placeholder{color:var(--bs-secondary-color);opacity:1}.form-control::placeholder{color:var(--bs-secondary-color);opacity:1}.form-control:disabled{background-color:var(--bs-secondary-bg);opacity:1}.form-control::-webkit-file-upload-button{padding:.375rem .75rem;margin:-.375rem -.75rem;-webkit-margin-end:.75rem;margin-inline-end:.75rem;color:var(--bs-body-color);background-color:var(--bs-tertiary-bg);pointer-events:none;border-color:inherit;border-style:solid;border-width:0;border-inline-end-width:var(--bs-border-width);border-radius:0;-webkit-transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control::file-selector-button{padding:.375rem .75rem;margin:-.375rem -.75rem;-webkit-margin-end:.75rem;margin-inline-end:.75rem;color:var(--bs-body-color);background-color:var(--bs-tertiary-bg);pointer-events:none;border-color:inherit;border-style:solid;border-width:0;border-inline-end-width:var(--bs-border-width);border-radius:0;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-control::-webkit-file-upload-button{-webkit-transition:none;transition:none}.form-control::file-selector-button{transition:none}}.form-control:hover:not(:disabled):not([readonly])::-webkit-file-upload-button{background-color:var(--bs-secondary-bg)}.form-control:hover:not(:disabled):not([readonly])::file-selector-button{background-color:var(--bs-secondary-bg)}.form-control-plaintext{display:block;width:100%;padding:.375rem 0;margin-bottom:0;line-height:1.5;color:var(--bs-body-color);background-color:transparent;border:solid transparent;border-width:var(--bs-border-width) 0}.form-control-plaintext:focus{outline:0}.form-control-plaintext.form-control-lg,.form-control-plaintext.form-control-sm{padding-right:0;padding-left:0}.form-control-sm{min-height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2));padding:.25rem .5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.form-control-sm::-webkit-file-upload-button{padding:.25rem .5rem;margin:-.25rem -.5rem;-webkit-margin-end:.5rem;margin-inline-end:.5rem}.form-control-sm::file-selector-button{padding:.25rem .5rem;margin:-.25rem -.5rem;-webkit-margin-end:.5rem;margin-inline-end:.5rem}.form-control-lg{min-height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2));padding:.5rem 1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}.form-control-lg::-webkit-file-upload-button{padding:.5rem 1rem;margin:-.5rem -1rem;-webkit-margin-end:1rem;margin-inline-end:1rem}.form-control-lg::file-selector-button{padding:.5rem 1rem;margin:-.5rem -1rem;-webkit-margin-end:1rem;margin-inline-end:1rem}textarea.form-control{min-height:calc(1.5em + .75rem + calc(var(--bs-border-width) * 2))}textarea.form-control-sm{min-height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2))}textarea.form-control-lg{min-height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2))}.form-control-color{width:3rem;height:calc(1.5em + .75rem + calc(var(--bs-border-width) * 2));padding:.375rem}.form-control-color:not(:disabled):not([readonly]){cursor:pointer}.form-control-color::-moz-color-swatch{border:0!important;border-radius:var(--bs-border-radius)}.form-control-color::-webkit-color-swatch{border:0!important;border-radius:var(--bs-border-radius)}.form-control-color.form-control-sm{height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2))}.form-control-color.form-control-lg{height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2))}.form-select{--bs-form-select-bg-img:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e");display:block;width:100%;padding:.375rem 2.25rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);background-color:var(--bs-body-bg);background-image:var(--bs-form-select-bg-img),var(--bs-form-select-bg-icon,none);background-repeat:no-repeat;background-position:right .75rem center;background-size:16px 12px;border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;-moz-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.form-select{transition:none}}.form-select:focus{border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-select[multiple],.form-select[size]:not([size="1"]){padding-right:.75rem;background-image:none}.form-select:disabled{background-color:var(--bs-secondary-bg)}.form-select:-moz-focusring{color:transparent;text-shadow:0 0 0 var(--bs-body-color)}.form-select-sm{padding-top:.25rem;padding-bottom:.25rem;padding-left:.5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.form-select-lg{padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}[data-bs-theme=dark] .form-select{--bs-form-select-bg-img:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23adb5bd' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e")}.form-check{display:block;min-height:1.5rem;padding-left:1.5em;margin-bottom:.125rem}.form-check .form-check-input{float:left;margin-left:-1.5em}.form-check-reverse{padding-right:1.5em;padding-left:0;text-align:right}.form-check-reverse .form-check-input{float:right;margin-right:-1.5em;margin-left:0}.form-check-input{--bs-form-check-bg:var(--bs-body-bg);width:1em;height:1em;margin-top:.25em;vertical-align:top;background-color:var(--bs-form-check-bg);background-image:var(--bs-form-check-bg-image);background-repeat:no-repeat;background-position:center;background-size:contain;border:var(--bs-border-width) solid var(--bs-border-color);-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-print-color-adjust:exact;color-adjust:exact;print-color-adjust:exact}.form-check-input[type=checkbox]{border-radius:.25em}.form-check-input[type=radio]{border-radius:50%}.form-check-input:active{filter:brightness(90%)}.form-check-input:focus{border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-check-input:checked{background-color:#0d6efd;border-color:#0d6efd}.form-check-input:checked[type=checkbox]{--bs-form-check-bg-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='m6 10 3 3 6-6'/%3e%3c/svg%3e")}.form-check-input:checked[type=radio]{--bs-form-check-bg-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='2' fill='%23fff'/%3e%3c/svg%3e")}.form-check-input[type=checkbox]:indeterminate{background-color:#0d6efd;border-color:#0d6efd;--bs-form-check-bg-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 10h8'/%3e%3c/svg%3e")}.form-check-input:disabled{pointer-events:none;filter:none;opacity:.5}.form-check-input:disabled~.form-check-label,.form-check-input[disabled]~.form-check-label{cursor:default;opacity:.5}.form-switch{padding-left:2.5em}.form-switch .form-check-input{--bs-form-switch-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba%280, 0, 0, 0.25%29'/%3e%3c/svg%3e");width:2em;margin-left:-2.5em;background-image:var(--bs-form-switch-bg);background-position:left center;border-radius:2em;transition:background-position .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-switch .form-check-input{transition:none}}.form-switch .form-check-input:focus{--bs-form-switch-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%2386b7fe'/%3e%3c/svg%3e")}.form-switch .form-check-input:checked{background-position:right center;--bs-form-switch-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%23fff'/%3e%3c/svg%3e")}.form-switch.form-check-reverse{padding-right:2.5em;padding-left:0}.form-switch.form-check-reverse .form-check-input{margin-right:-2.5em;margin-left:0}.form-check-inline{display:inline-block;margin-right:1rem}.btn-check{position:absolute;clip:rect(0,0,0,0);pointer-events:none}.btn-check:disabled+.btn,.btn-check[disabled]+.btn{pointer-events:none;filter:none;opacity:.65}[data-bs-theme=dark] .form-switch .form-check-input:not(:checked):not(:focus){--bs-form-switch-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba%28255, 255, 255, 0.25%29'/%3e%3c/svg%3e")}.form-range{width:100%;height:1.5rem;padding:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none}.form-range:focus{outline:0}.form-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .25rem rgba(13,110,253,.25)}.form-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .25rem rgba(13,110,253,.25)}.form-range::-moz-focus-outer{border:0}.form-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-.25rem;background-color:#0d6efd;border:0;border-radius:1rem;-webkit-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.form-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.form-range::-webkit-slider-thumb:active{background-color:#b6d4fe}.form-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:var(--bs-tertiary-bg);border-color:transparent;border-radius:1rem}.form-range::-moz-range-thumb{width:1rem;height:1rem;background-color:#0d6efd;border:0;border-radius:1rem;-moz-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-moz-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.form-range::-moz-range-thumb{-moz-transition:none;transition:none}}.form-range::-moz-range-thumb:active{background-color:#b6d4fe}.form-range::-moz-range-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:var(--bs-tertiary-bg);border-color:transparent;border-radius:1rem}.form-range:disabled{pointer-events:none}.form-range:disabled::-webkit-slider-thumb{background-color:var(--bs-secondary-color)}.form-range:disabled::-moz-range-thumb{background-color:var(--bs-secondary-color)}.form-floating{position:relative}.form-floating>.form-control,.form-floating>.form-control-plaintext,.form-floating>.form-select{height:calc(3.5rem + calc(var(--bs-border-width) * 2));min-height:calc(3.5rem + calc(var(--bs-border-width) * 2));line-height:1.25}.form-floating>label{position:absolute;top:0;left:0;z-index:2;height:100%;padding:1rem .75rem;overflow:hidden;text-align:start;text-overflow:ellipsis;white-space:nowrap;pointer-events:none;border:var(--bs-border-width) solid transparent;transform-origin:0 0;transition:opacity .1s ease-in-out,transform .1s ease-in-out}@media (prefers-reduced-motion:reduce){.form-floating>label{transition:none}}.form-floating>.form-control,.form-floating>.form-control-plaintext{padding:1rem .75rem}.form-floating>.form-control-plaintext::-moz-placeholder,.form-floating>.form-control::-moz-placeholder{color:transparent}.form-floating>.form-control-plaintext::placeholder,.form-floating>.form-control::placeholder{color:transparent}.form-floating>.form-control-plaintext:not(:-moz-placeholder-shown),.form-floating>.form-control:not(:-moz-placeholder-shown){padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control-plaintext:focus,.form-floating>.form-control-plaintext:not(:placeholder-shown),.form-floating>.form-control:focus,.form-floating>.form-control:not(:placeholder-shown){padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control-plaintext:-webkit-autofill,.form-floating>.form-control:-webkit-autofill{padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-select{padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control:not(:-moz-placeholder-shown)~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control-plaintext~label,.form-floating>.form-control:focus~label,.form-floating>.form-control:not(:placeholder-shown)~label,.form-floating>.form-select~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control:not(:-moz-placeholder-shown)~label::after{position:absolute;inset:1rem 0.375rem;z-index:-1;height:1.5em;content:"";background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius)}.form-floating>.form-control-plaintext~label::after,.form-floating>.form-control:focus~label::after,.form-floating>.form-control:not(:placeholder-shown)~label::after,.form-floating>.form-select~label::after{position:absolute;inset:1rem 0.375rem;z-index:-1;height:1.5em;content:"";background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius)}.form-floating>.form-control:-webkit-autofill~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control-plaintext~label{border-width:var(--bs-border-width) 0}.form-floating>:disabled~label{color:#6c757d}.form-floating>:disabled~label::after{background-color:var(--bs-secondary-bg)}.input-group{position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.input-group>.form-control,.input-group>.form-floating,.input-group>.form-select{position:relative;flex:1 1 auto;width:1%;min-width:0}.input-group>.form-control:focus,.input-group>.form-floating:focus-within,.input-group>.form-select:focus{z-index:5}.input-group .btn{position:relative;z-index:2}.input-group .btn:focus{z-index:5}.input-group-text{display:flex;align-items:center;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);text-align:center;white-space:nowrap;background-color:var(--bs-tertiary-bg);border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius)}.input-group-lg>.btn,.input-group-lg>.form-control,.input-group-lg>.form-select,.input-group-lg>.input-group-text{padding:.5rem 1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}.input-group-sm>.btn,.input-group-sm>.form-control,.input-group-sm>.form-select,.input-group-sm>.input-group-text{padding:.25rem .5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.input-group-lg>.form-select,.input-group-sm>.form-select{padding-right:3rem}.input-group:not(.has-validation)>.dropdown-toggle:nth-last-child(n+3),.input-group:not(.has-validation)>.form-floating:not(:last-child)>.form-control,.input-group:not(.has-validation)>.form-floating:not(:last-child)>.form-select,.input-group:not(.has-validation)>:not(:last-child):not(.dropdown-toggle):not(.dropdown-menu):not(.form-floating){border-top-right-radius:0;border-bottom-right-radius:0}.input-group.has-validation>.dropdown-toggle:nth-last-child(n+4),.input-group.has-validation>.form-floating:nth-last-child(n+3)>.form-control,.input-group.has-validation>.form-floating:nth-last-child(n+3)>.form-select,.input-group.has-validation>:nth-last-child(n+3):not(.dropdown-toggle):not(.dropdown-menu):not(.form-floating){border-top-right-radius:0;border-bottom-right-radius:0}.input-group>:not(:first-child):not(.dropdown-menu):not(.valid-tooltip):not(.valid-feedback):not(.invalid-tooltip):not(.invalid-feedback){margin-left:calc(var(--bs-border-width) * -1);border-top-left-radius:0;border-bottom-left-radius:0}.input-group>.form-floating:not(:first-child)>.form-control,.input-group>.form-floating:not(:first-child)>.form-select{border-top-left-radius:0;border-bottom-left-radius:0}.valid-feedback{display:none;width:100%;margin-top:.25rem;font-size:.875em;color:var(--bs-form-valid-color)}.valid-tooltip{position:absolute;top:100%;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:.875rem;color:#fff;background-color:var(--bs-success);border-radius:var(--bs-border-radius)}.is-valid~.valid-feedback,.is-valid~.valid-tooltip,.was-validated :valid~.valid-feedback,.was-validated :valid~.valid-tooltip{display:block}.form-control.is-valid,.was-validated .form-control:valid{border-color:var(--bs-form-valid-border-color);padding-right:calc(1.5em + .75rem);background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-valid:focus,.was-validated .form-control:valid:focus{border-color:var(--bs-form-valid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.was-validated textarea.form-control:valid,textarea.form-control.is-valid{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.form-select.is-valid,.was-validated .form-select:valid{border-color:var(--bs-form-valid-border-color)}.form-select.is-valid:not([multiple]):not([size]),.form-select.is-valid:not([multiple])[size="1"],.was-validated .form-select:valid:not([multiple]):not([size]),.was-validated .form-select:valid:not([multiple])[size="1"]{--bs-form-select-bg-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");padding-right:4.125rem;background-position:right .75rem center,center right 2.25rem;background-size:16px 12px,calc(.75em + .375rem) calc(.75em + .375rem)}.form-select.is-valid:focus,.was-validated .form-select:valid:focus{border-color:var(--bs-form-valid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.form-control-color.is-valid,.was-validated .form-control-color:valid{width:calc(3rem + calc(1.5em + .75rem))}.form-check-input.is-valid,.was-validated .form-check-input:valid{border-color:var(--bs-form-valid-border-color)}.form-check-input.is-valid:checked,.was-validated .form-check-input:valid:checked{background-color:var(--bs-form-valid-color)}.form-check-input.is-valid:focus,.was-validated .form-check-input:valid:focus{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.form-check-input.is-valid~.form-check-label,.was-validated .form-check-input:valid~.form-check-label{color:var(--bs-form-valid-color)}.form-check-inline .form-check-input~.valid-feedback{margin-left:.5em}.input-group>.form-control:not(:focus).is-valid,.input-group>.form-floating:not(:focus-within).is-valid,.input-group>.form-select:not(:focus).is-valid,.was-validated .input-group>.form-control:not(:focus):valid,.was-validated .input-group>.form-floating:not(:focus-within):valid,.was-validated .input-group>.form-select:not(:focus):valid{z-index:3}.invalid-feedback{display:none;width:100%;margin-top:.25rem;font-size:.875em;color:var(--bs-form-invalid-color)}.invalid-tooltip{position:absolute;top:100%;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:.875rem;color:#fff;background-color:var(--bs-danger);border-radius:var(--bs-border-radius)}.is-invalid~.invalid-feedback,.is-invalid~.invalid-tooltip,.was-validated :invalid~.invalid-feedback,.was-validated :invalid~.invalid-tooltip{display:block}.form-control.is-invalid,.was-validated .form-control:invalid{border-color:var(--bs-form-invalid-border-color);padding-right:calc(1.5em + .75rem);background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-invalid:focus,.was-validated .form-control:invalid:focus{border-color:var(--bs-form-invalid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.was-validated textarea.form-control:invalid,textarea.form-control.is-invalid{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.form-select.is-invalid,.was-validated .form-select:invalid{border-color:var(--bs-form-invalid-border-color)}.form-select.is-invalid:not([multiple]):not([size]),.form-select.is-invalid:not([multiple])[size="1"],.was-validated .form-select:invalid:not([multiple]):not([size]),.was-validated .form-select:invalid:not([multiple])[size="1"]{--bs-form-select-bg-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");padding-right:4.125rem;background-position:right .75rem center,center right 2.25rem;background-size:16px 12px,calc(.75em + .375rem) calc(.75em + .375rem)}.form-select.is-invalid:focus,.was-validated .form-select:invalid:focus{border-color:var(--bs-form-invalid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.form-control-color.is-invalid,.was-validated .form-control-color:invalid{width:calc(3rem + calc(1.5em + .75rem))}.form-check-input.is-invalid,.was-validated .form-check-input:invalid{border-color:var(--bs-form-invalid-border-color)}.form-check-input.is-invalid:checked,.was-validated .form-check-input:invalid:checked{background-color:var(--bs-form-invalid-color)}.form-check-input.is-invalid:focus,.was-validated .form-check-input:invalid:focus{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.form-check-input.is-invalid~.form-check-label,.was-validated .form-check-input:invalid~.form-check-label{color:var(--bs-form-invalid-color)}.form-check-inline .form-check-input~.invalid-feedback{margin-left:.5em}.input-group>.form-control:not(:focus).is-invalid,.input-group>.form-floating:not(:focus-within).is-invalid,.input-group>.form-select:not(:focus).is-invalid,.was-validated .input-group>.form-control:not(:focus):invalid,.was-validated .input-group>.form-floating:not(:focus-within):invalid,.was-validated .input-group>.form-select:not(:focus):invalid{z-index:4}.btn{--bs-btn-padding-x:0.75rem;--bs-btn-padding-y:0.375rem;--bs-btn-font-family: ;--bs-btn-font-size:1rem;--bs-btn-font-weight:400;--bs-btn-line-height:1.5;--bs-btn-color:var(--bs-body-color);--bs-btn-bg:transparent;--bs-btn-border-width:var(--bs-border-width);--bs-btn-border-color:transparent;--bs-btn-border-radius:var(--bs-border-radius);--bs-btn-hover-border-color:transparent;--bs-btn-box-shadow:inset 0 1px 0 rgba(255, 255, 255, 0.15),0 1px 1px rgba(0, 0, 0, 0.075);--bs-btn-disabled-opacity:0.65;--bs-btn-focus-box-shadow:0 0 0 0.25rem rgba(var(--bs-btn-focus-shadow-rgb), .5);display:inline-block;padding:var(--bs-btn-padding-y) var(--bs-btn-padding-x);font-family:var(--bs-btn-font-family);font-size:var(--bs-btn-font-size);font-weight:var(--bs-btn-font-weight);line-height:var(--bs-btn-line-height);color:var(--bs-btn-color);text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;border:var(--bs-btn-border-width) solid var(--bs-btn-border-color);border-radius:var(--bs-btn-border-radius);background-color:var(--bs-btn-bg);transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:var(--bs-btn-hover-color);background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color)}.btn-check+.btn:hover{color:var(--bs-btn-color);background-color:var(--bs-btn-bg);border-color:var(--bs-btn-border-color)}.btn:focus-visible{color:var(--bs-btn-hover-color);background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color);outline:0;box-shadow:var(--bs-btn-focus-box-shadow)}.btn-check:focus-visible+.btn{border-color:var(--bs-btn-hover-border-color);outline:0;box-shadow:var(--bs-btn-focus-box-shadow)}.btn-check:checked+.btn,.btn.active,.btn.show,.btn:first-child:active,:not(.btn-check)+.btn:active{color:var(--bs-btn-active-color);background-color:var(--bs-btn-active-bg);border-color:var(--bs-btn-active-border-color)}.btn-check:checked+.btn:focus-visible,.btn.active:focus-visible,.btn.show:focus-visible,.btn:first-child:active:focus-visible,:not(.btn-check)+.btn:active:focus-visible{box-shadow:var(--bs-btn-focus-box-shadow)}.btn.disabled,.btn:disabled,fieldset:disabled .btn{color:var(--bs-btn-disabled-color);pointer-events:none;background-color:var(--bs-btn-disabled-bg);border-color:var(--bs-btn-disabled-border-color);opacity:var(--bs-btn-disabled-opacity)}.btn-primary{--bs-btn-color:#fff;--bs-btn-bg:#0d6efd;--bs-btn-border-color:#0d6efd;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#0b5ed7;--bs-btn-hover-border-color:#0a58ca;--bs-btn-focus-shadow-rgb:49,132,253;--bs-btn-active-color:#fff;--bs-btn-active-bg:#0a58ca;--bs-btn-active-border-color:#0a53be;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#0d6efd;--bs-btn-disabled-border-color:#0d6efd}.btn-secondary{--bs-btn-color:#fff;--bs-btn-bg:#6c757d;--bs-btn-border-color:#6c757d;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#5c636a;--bs-btn-hover-border-color:#565e64;--bs-btn-focus-shadow-rgb:130,138,145;--bs-btn-active-color:#fff;--bs-btn-active-bg:#565e64;--bs-btn-active-border-color:#51585e;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#6c757d;--bs-btn-disabled-border-color:#6c757d}.btn-success{--bs-btn-color:#fff;--bs-btn-bg:#198754;--bs-btn-border-color:#198754;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#157347;--bs-btn-hover-border-color:#146c43;--bs-btn-focus-shadow-rgb:60,153,110;--bs-btn-active-color:#fff;--bs-btn-active-bg:#146c43;--bs-btn-active-border-color:#13653f;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#198754;--bs-btn-disabled-border-color:#198754}.btn-info{--bs-btn-color:#000;--bs-btn-bg:#0dcaf0;--bs-btn-border-color:#0dcaf0;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#31d2f2;--bs-btn-hover-border-color:#25cff2;--bs-btn-focus-shadow-rgb:11,172,204;--bs-btn-active-color:#000;--bs-btn-active-bg:#3dd5f3;--bs-btn-active-border-color:#25cff2;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#0dcaf0;--bs-btn-disabled-border-color:#0dcaf0}.btn-warning{--bs-btn-color:#000;--bs-btn-bg:#ffc107;--bs-btn-border-color:#ffc107;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#ffca2c;--bs-btn-hover-border-color:#ffc720;--bs-btn-focus-shadow-rgb:217,164,6;--bs-btn-active-color:#000;--bs-btn-active-bg:#ffcd39;--bs-btn-active-border-color:#ffc720;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#ffc107;--bs-btn-disabled-border-color:#ffc107}.btn-danger{--bs-btn-color:#fff;--bs-btn-bg:#dc3545;--bs-btn-border-color:#dc3545;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#bb2d3b;--bs-btn-hover-border-color:#b02a37;--bs-btn-focus-shadow-rgb:225,83,97;--bs-btn-active-color:#fff;--bs-btn-active-bg:#b02a37;--bs-btn-active-border-color:#a52834;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#dc3545;--bs-btn-disabled-border-color:#dc3545}.btn-light{--bs-btn-color:#000;--bs-btn-bg:#f8f9fa;--bs-btn-border-color:#f8f9fa;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#d3d4d5;--bs-btn-hover-border-color:#c6c7c8;--bs-btn-focus-shadow-rgb:211,212,213;--bs-btn-active-color:#000;--bs-btn-active-bg:#c6c7c8;--bs-btn-active-border-color:#babbbc;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#f8f9fa;--bs-btn-disabled-border-color:#f8f9fa}.btn-dark{--bs-btn-color:#fff;--bs-btn-bg:#212529;--bs-btn-border-color:#212529;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#424649;--bs-btn-hover-border-color:#373b3e;--bs-btn-focus-shadow-rgb:66,70,73;--bs-btn-active-color:#fff;--bs-btn-active-bg:#4d5154;--bs-btn-active-border-color:#373b3e;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#212529;--bs-btn-disabled-border-color:#212529}.btn-outline-primary{--bs-btn-color:#0d6efd;--bs-btn-border-color:#0d6efd;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#0d6efd;--bs-btn-hover-border-color:#0d6efd;--bs-btn-focus-shadow-rgb:13,110,253;--bs-btn-active-color:#fff;--bs-btn-active-bg:#0d6efd;--bs-btn-active-border-color:#0d6efd;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#0d6efd;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#0d6efd;--bs-gradient:none}.btn-outline-secondary{--bs-btn-color:#6c757d;--bs-btn-border-color:#6c757d;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#6c757d;--bs-btn-hover-border-color:#6c757d;--bs-btn-focus-shadow-rgb:108,117,125;--bs-btn-active-color:#fff;--bs-btn-active-bg:#6c757d;--bs-btn-active-border-color:#6c757d;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#6c757d;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#6c757d;--bs-gradient:none}.btn-outline-success{--bs-btn-color:#198754;--bs-btn-border-color:#198754;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#198754;--bs-btn-hover-border-color:#198754;--bs-btn-focus-shadow-rgb:25,135,84;--bs-btn-active-color:#fff;--bs-btn-active-bg:#198754;--bs-btn-active-border-color:#198754;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#198754;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#198754;--bs-gradient:none}.btn-outline-info{--bs-btn-color:#0dcaf0;--bs-btn-border-color:#0dcaf0;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#0dcaf0;--bs-btn-hover-border-color:#0dcaf0;--bs-btn-focus-shadow-rgb:13,202,240;--bs-btn-active-color:#000;--bs-btn-active-bg:#0dcaf0;--bs-btn-active-border-color:#0dcaf0;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#0dcaf0;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#0dcaf0;--bs-gradient:none}.btn-outline-warning{--bs-btn-color:#ffc107;--bs-btn-border-color:#ffc107;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#ffc107;--bs-btn-hover-border-color:#ffc107;--bs-btn-focus-shadow-rgb:255,193,7;--bs-btn-active-color:#000;--bs-btn-active-bg:#ffc107;--bs-btn-active-border-color:#ffc107;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#ffc107;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#ffc107;--bs-gradient:none}.btn-outline-danger{--bs-btn-color:#dc3545;--bs-btn-border-color:#dc3545;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#dc3545;--bs-btn-hover-border-color:#dc3545;--bs-btn-focus-shadow-rgb:220,53,69;--bs-btn-active-color:#fff;--bs-btn-active-bg:#dc3545;--bs-btn-active-border-color:#dc3545;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#dc3545;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#dc3545;--bs-gradient:none}.btn-outline-light{--bs-btn-color:#f8f9fa;--bs-btn-border-color:#f8f9fa;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#f8f9fa;--bs-btn-hover-border-color:#f8f9fa;--bs-btn-focus-shadow-rgb:248,249,250;--bs-btn-active-color:#000;--bs-btn-active-bg:#f8f9fa;--bs-btn-active-border-color:#f8f9fa;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#f8f9fa;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#f8f9fa;--bs-gradient:none}.btn-outline-dark{--bs-btn-color:#212529;--bs-btn-border-color:#212529;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#212529;--bs-btn-hover-border-color:#212529;--bs-btn-focus-shadow-rgb:33,37,41;--bs-btn-active-color:#fff;--bs-btn-active-bg:#212529;--bs-btn-active-border-color:#212529;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#212529;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#212529;--bs-gradient:none}.btn-link{--bs-btn-font-weight:400;--bs-btn-color:var(--bs-link-color);--bs-btn-bg:transparent;--bs-btn-border-color:transparent;--bs-btn-hover-color:var(--bs-link-hover-color);--bs-btn-hover-border-color:transparent;--bs-btn-active-color:var(--bs-link-hover-color);--bs-btn-active-border-color:transparent;--bs-btn-disabled-color:#6c757d;--bs-btn-disabled-border-color:transparent;--bs-btn-box-shadow:0 0 0 #000;--bs-btn-focus-shadow-rgb:49,132,253;text-decoration:underline}.btn-link:focus-visible{color:var(--bs-btn-color)}.btn-link:hover{color:var(--bs-btn-hover-color)}.btn-group-lg>.btn,.btn-lg{--bs-btn-padding-y:0.5rem;--bs-btn-padding-x:1rem;--bs-btn-font-size:1.25rem;--bs-btn-border-radius:var(--bs-border-radius-lg)}.btn-group-sm>.btn,.btn-sm{--bs-btn-padding-y:0.25rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.875rem;--bs-btn-border-radius:var(--bs-border-radius-sm)}.fade{transition:opacity .15s linear}@media (prefers-reduced-motion:reduce){.fade{transition:none}}.fade:not(.show){opacity:0}.collapse:not(.show){display:none}.collapsing{height:0;overflow:hidden;transition:height .35s ease}@media (prefers-reduced-motion:reduce){.collapsing{transition:none}}.collapsing.collapse-horizontal{width:0;height:auto;transition:width .35s ease}@media (prefers-reduced-motion:reduce){.collapsing.collapse-horizontal{transition:none}}.dropdown,.dropdown-center,.dropend,.dropstart,.dropup,.dropup-center{position:relative}.dropdown-toggle{white-space:nowrap}.dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:"";border-top:.3em solid;border-right:.3em solid transparent;border-bottom:0;border-left:.3em solid transparent}.dropdown-toggle:empty::after{margin-left:0}.dropdown-menu{--bs-dropdown-zindex:1000;--bs-dropdown-min-width:10rem;--bs-dropdown-padding-x:0;--bs-dropdown-padding-y:0.5rem;--bs-dropdown-spacer:0.125rem;--bs-dropdown-font-size:1rem;--bs-dropdown-color:var(--bs-body-color);--bs-dropdown-bg:var(--bs-body-bg);--bs-dropdown-border-color:var(--bs-border-color-translucent);--bs-dropdown-border-radius:var(--bs-border-radius);--bs-dropdown-border-width:var(--bs-border-width);--bs-dropdown-inner-border-radius:calc(var(--bs-border-radius) - var(--bs-border-width));--bs-dropdown-divider-bg:var(--bs-border-color-translucent);--bs-dropdown-divider-margin-y:0.5rem;--bs-dropdown-box-shadow:0 0.5rem 1rem rgba(0, 0, 0, 0.15);--bs-dropdown-link-color:var(--bs-body-color);--bs-dropdown-link-hover-color:var(--bs-body-color);--bs-dropdown-link-hover-bg:var(--bs-tertiary-bg);--bs-dropdown-link-active-color:#fff;--bs-dropdown-link-active-bg:#0d6efd;--bs-dropdown-link-disabled-color:var(--bs-tertiary-color);--bs-dropdown-item-padding-x:1rem;--bs-dropdown-item-padding-y:0.25rem;--bs-dropdown-header-color:#6c757d;--bs-dropdown-header-padding-x:1rem;--bs-dropdown-header-padding-y:0.5rem;position:absolute;z-index:var(--bs-dropdown-zindex);display:none;min-width:var(--bs-dropdown-min-width);padding:var(--bs-dropdown-padding-y) var(--bs-dropdown-padding-x);margin:0;font-size:var(--bs-dropdown-font-size);color:var(--bs-dropdown-color);text-align:left;list-style:none;background-color:var(--bs-dropdown-bg);background-clip:padding-box;border:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color);border-radius:var(--bs-dropdown-border-radius)}.dropdown-menu[data-bs-popper]{top:100%;left:0;margin-top:var(--bs-dropdown-spacer)}.dropdown-menu-start{--bs-position:start}.dropdown-menu-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-end{--bs-position:end}.dropdown-menu-end[data-bs-popper]{right:0;left:auto}@media (min-width:576px){.dropdown-menu-sm-start{--bs-position:start}.dropdown-menu-sm-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-sm-end{--bs-position:end}.dropdown-menu-sm-end[data-bs-popper]{right:0;left:auto}}@media (min-width:768px){.dropdown-menu-md-start{--bs-position:start}.dropdown-menu-md-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-md-end{--bs-position:end}.dropdown-menu-md-end[data-bs-popper]{right:0;left:auto}}@media (min-width:992px){.dropdown-menu-lg-start{--bs-position:start}.dropdown-menu-lg-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-lg-end{--bs-position:end}.dropdown-menu-lg-end[data-bs-popper]{right:0;left:auto}}@media (min-width:1200px){.dropdown-menu-xl-start{--bs-position:start}.dropdown-menu-xl-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-xl-end{--bs-position:end}.dropdown-menu-xl-end[data-bs-popper]{right:0;left:auto}}@media (min-width:1400px){.dropdown-menu-xxl-start{--bs-position:start}.dropdown-menu-xxl-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-xxl-end{--bs-position:end}.dropdown-menu-xxl-end[data-bs-popper]{right:0;left:auto}}.dropup .dropdown-menu[data-bs-popper]{top:auto;bottom:100%;margin-top:0;margin-bottom:var(--bs-dropdown-spacer)}.dropup .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:"";border-top:0;border-right:.3em solid transparent;border-bottom:.3em solid;border-left:.3em solid transparent}.dropup .dropdown-toggle:empty::after{margin-left:0}.dropend .dropdown-menu[data-bs-popper]{top:0;right:auto;left:100%;margin-top:0;margin-left:var(--bs-dropdown-spacer)}.dropend .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:"";border-top:.3em solid transparent;border-right:0;border-bottom:.3em solid transparent;border-left:.3em solid}.dropend .dropdown-toggle:empty::after{margin-left:0}.dropend .dropdown-toggle::after{vertical-align:0}.dropstart .dropdown-menu[data-bs-popper]{top:0;right:100%;left:auto;margin-top:0;margin-right:var(--bs-dropdown-spacer)}.dropstart .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:""}.dropstart .dropdown-toggle::after{display:none}.dropstart .dropdown-toggle::before{display:inline-block;margin-right:.255em;vertical-align:.255em;content:"";border-top:.3em solid transparent;border-right:.3em solid;border-bottom:.3em solid transparent}.dropstart .dropdown-toggle:empty::after{margin-left:0}.dropstart .dropdown-toggle::before{vertical-align:0}.dropdown-divider{height:0;margin:var(--bs-dropdown-divider-margin-y) 0;overflow:hidden;border-top:1px solid var(--bs-dropdown-divider-bg);opacity:1}.dropdown-item{display:block;width:100%;padding:var(--bs-dropdown-item-padding-y) var(--bs-dropdown-item-padding-x);clear:both;font-weight:400;color:var(--bs-dropdown-link-color);text-align:inherit;text-decoration:none;white-space:nowrap;background-color:transparent;border:0;border-radius:var(--bs-dropdown-item-border-radius,0)}.dropdown-item:focus,.dropdown-item:hover{color:var(--bs-dropdown-link-hover-color);background-color:var(--bs-dropdown-link-hover-bg)}.dropdown-item.active,.dropdown-item:active{color:var(--bs-dropdown-link-active-color);text-decoration:none;background-color:var(--bs-dropdown-link-active-bg)}.dropdown-item.disabled,.dropdown-item:disabled{color:var(--bs-dropdown-link-disabled-color);pointer-events:none;background-color:transparent}.dropdown-menu.show{display:block}.dropdown-header{display:block;padding:var(--bs-dropdown-header-padding-y) var(--bs-dropdown-header-padding-x);margin-bottom:0;font-size:.875rem;color:var(--bs-dropdown-header-color);white-space:nowrap}.dropdown-item-text{display:block;padding:var(--bs-dropdown-item-padding-y) var(--bs-dropdown-item-padding-x);color:var(--bs-dropdown-link-color)}.dropdown-menu-dark{--bs-dropdown-color:#dee2e6;--bs-dropdown-bg:#343a40;--bs-dropdown-border-color:var(--bs-border-color-translucent);--bs-dropdown-box-shadow: ;--bs-dropdown-link-color:#dee2e6;--bs-dropdown-link-hover-color:#fff;--bs-dropdown-divider-bg:var(--bs-border-color-translucent);--bs-dropdown-link-hover-bg:rgba(255, 255, 255, 0.15);--bs-dropdown-link-active-color:#fff;--bs-dropdown-link-active-bg:#0d6efd;--bs-dropdown-link-disabled-color:#adb5bd;--bs-dropdown-header-color:#adb5bd}.btn-group,.btn-group-vertical{position:relative;display:inline-flex;vertical-align:middle}.btn-group-vertical>.btn,.btn-group>.btn{position:relative;flex:1 1 auto}.btn-group-vertical>.btn-check:checked+.btn,.btn-group-vertical>.btn-check:focus+.btn,.btn-group-vertical>.btn.active,.btn-group-vertical>.btn:active,.btn-group-vertical>.btn:focus,.btn-group-vertical>.btn:hover,.btn-group>.btn-check:checked+.btn,.btn-group>.btn-check:focus+.btn,.btn-group>.btn.active,.btn-group>.btn:active,.btn-group>.btn:focus,.btn-group>.btn:hover{z-index:1}.btn-toolbar{display:flex;flex-wrap:wrap;justify-content:flex-start}.btn-toolbar .input-group{width:auto}.btn-group{border-radius:var(--bs-border-radius)}.btn-group>.btn-group:not(:first-child),.btn-group>:not(.btn-check:first-child)+.btn{margin-left:calc(var(--bs-border-width) * -1)}.btn-group>.btn-group:not(:last-child)>.btn,.btn-group>.btn.dropdown-toggle-split:first-child,.btn-group>.btn:not(:last-child):not(.dropdown-toggle){border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:nth-child(n+3),.btn-group>:not(.btn-check)+.btn{border-top-left-radius:0;border-bottom-left-radius:0}.dropdown-toggle-split{padding-right:.5625rem;padding-left:.5625rem}.dropdown-toggle-split::after,.dropend .dropdown-toggle-split::after,.dropup .dropdown-toggle-split::after{margin-left:0}.dropstart .dropdown-toggle-split::before{margin-right:0}.btn-group-sm>.btn+.dropdown-toggle-split,.btn-sm+.dropdown-toggle-split{padding-right:.375rem;padding-left:.375rem}.btn-group-lg>.btn+.dropdown-toggle-split,.btn-lg+.dropdown-toggle-split{padding-right:.75rem;padding-left:.75rem}.btn-group-vertical{flex-direction:column;align-items:flex-start;justify-content:center}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group{width:100%}.btn-group-vertical>.btn-group:not(:first-child),.btn-group-vertical>.btn:not(:first-child){margin-top:calc(var(--bs-border-width) * -1)}.btn-group-vertical>.btn-group:not(:last-child)>.btn,.btn-group-vertical>.btn:not(:last-child):not(.dropdown-toggle){border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn-group:not(:first-child)>.btn,.btn-group-vertical>.btn~.btn{border-top-left-radius:0;border-top-right-radius:0}.nav{--bs-nav-link-padding-x:1rem;--bs-nav-link-padding-y:0.5rem;--bs-nav-link-font-weight: ;--bs-nav-link-color:var(--bs-link-color);--bs-nav-link-hover-color:var(--bs-link-hover-color);--bs-nav-link-disabled-color:var(--bs-secondary-color);display:flex;flex-wrap:wrap;padding-left:0;margin-bottom:0;list-style:none}.nav-link{display:block;padding:var(--bs-nav-link-padding-y) var(--bs-nav-link-padding-x);font-size:var(--bs-nav-link-font-size);font-weight:var(--bs-nav-link-font-weight);color:var(--bs-nav-link-color);text-decoration:none;background:0 0;border:0;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out}@media (prefers-reduced-motion:reduce){.nav-link{transition:none}}.nav-link:focus,.nav-link:hover{color:var(--bs-nav-link-hover-color)}.nav-link:focus-visible{outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.nav-link.disabled{color:var(--bs-nav-link-disabled-color);pointer-events:none;cursor:default}.nav-tabs{--bs-nav-tabs-border-width:var(--bs-border-width);--bs-nav-tabs-border-color:var(--bs-border-color);--bs-nav-tabs-border-radius:var(--bs-border-radius);--bs-nav-tabs-link-hover-border-color:var(--bs-secondary-bg) var(--bs-secondary-bg) var(--bs-border-color);--bs-nav-tabs-link-active-color:var(--bs-emphasis-color);--bs-nav-tabs-link-active-bg:var(--bs-body-bg);--bs-nav-tabs-link-active-border-color:var(--bs-border-color) var(--bs-border-color) var(--bs-body-bg);border-bottom:var(--bs-nav-tabs-border-width) solid var(--bs-nav-tabs-border-color)}.nav-tabs .nav-link{margin-bottom:calc(-1 * var(--bs-nav-tabs-border-width));border:var(--bs-nav-tabs-border-width) solid transparent;border-top-left-radius:var(--bs-nav-tabs-border-radius);border-top-right-radius:var(--bs-nav-tabs-border-radius)}.nav-tabs .nav-link:focus,.nav-tabs .nav-link:hover{isolation:isolate;border-color:var(--bs-nav-tabs-link-hover-border-color)}.nav-tabs .nav-link.disabled,.nav-tabs .nav-link:disabled{color:var(--bs-nav-link-disabled-color);background-color:transparent;border-color:transparent}.nav-tabs .nav-item.show .nav-link,.nav-tabs .nav-link.active{color:var(--bs-nav-tabs-link-active-color);background-color:var(--bs-nav-tabs-link-active-bg);border-color:var(--bs-nav-tabs-link-active-border-color)}.nav-tabs .dropdown-menu{margin-top:calc(-1 * var(--bs-nav-tabs-border-width));border-top-left-radius:0;border-top-right-radius:0}.nav-pills{--bs-nav-pills-border-radius:var(--bs-border-radius);--bs-nav-pills-link-active-color:#fff;--bs-nav-pills-link-active-bg:#0d6efd}.nav-pills .nav-link{border-radius:var(--bs-nav-pills-border-radius)}.nav-pills .nav-link:disabled{color:var(--bs-nav-link-disabled-color);background-color:transparent;border-color:transparent}.nav-pills .nav-link.active,.nav-pills .show>.nav-link{color:var(--bs-nav-pills-link-active-color);background-color:var(--bs-nav-pills-link-active-bg)}.nav-underline{--bs-nav-underline-gap:1rem;--bs-nav-underline-border-width:0.125rem;--bs-nav-underline-link-active-color:var(--bs-emphasis-color);gap:var(--bs-nav-underline-gap)}.nav-underline .nav-link{padding-right:0;padding-left:0;border-bottom:var(--bs-nav-underline-border-width) solid transparent}.nav-underline .nav-link:focus,.nav-underline .nav-link:hover{border-bottom-color:currentcolor}.nav-underline .nav-link.active,.nav-underline .show>.nav-link{font-weight:700;color:var(--bs-nav-underline-link-active-color);border-bottom-color:currentcolor}.nav-fill .nav-item,.nav-fill>.nav-link{flex:1 1 auto;text-align:center}.nav-justified .nav-item,.nav-justified>.nav-link{flex-basis:0;flex-grow:1;text-align:center}.nav-fill .nav-item .nav-link,.nav-justified .nav-item .nav-link{width:100%}.tab-content>.tab-pane{display:none}.tab-content>.active{display:block}.navbar{--bs-navbar-padding-x:0;--bs-navbar-padding-y:0.5rem;--bs-navbar-color:rgba(var(--bs-emphasis-color-rgb), 0.65);--bs-navbar-hover-color:rgba(var(--bs-emphasis-color-rgb), 0.8);--bs-navbar-disabled-color:rgba(var(--bs-emphasis-color-rgb), 0.3);--bs-navbar-active-color:rgba(var(--bs-emphasis-color-rgb), 1);--bs-navbar-brand-padding-y:0.3125rem;--bs-navbar-brand-margin-end:1rem;--bs-navbar-brand-font-size:1.25rem;--bs-navbar-brand-color:rgba(var(--bs-emphasis-color-rgb), 1);--bs-navbar-brand-hover-color:rgba(var(--bs-emphasis-color-rgb), 1);--bs-navbar-nav-link-padding-x:0.5rem;--bs-navbar-toggler-padding-y:0.25rem;--bs-navbar-toggler-padding-x:0.75rem;--bs-navbar-toggler-font-size:1.25rem;--bs-navbar-toggler-icon-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%2833, 37, 41, 0.75%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");--bs-navbar-toggler-border-color:rgba(var(--bs-emphasis-color-rgb), 0.15);--bs-navbar-toggler-border-radius:var(--bs-border-radius);--bs-navbar-toggler-focus-width:0.25rem;--bs-navbar-toggler-transition:box-shadow 0.15s ease-in-out;position:relative;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;padding:var(--bs-navbar-padding-y) var(--bs-navbar-padding-x)}.navbar>.container,.navbar>.container-fluid,.navbar>.container-lg,.navbar>.container-md,.navbar>.container-sm,.navbar>.container-xl,.navbar>.container-xxl{display:flex;flex-wrap:inherit;align-items:center;justify-content:space-between}.navbar-brand{padding-top:var(--bs-navbar-brand-padding-y);padding-bottom:var(--bs-navbar-brand-padding-y);margin-right:var(--bs-navbar-brand-margin-end);font-size:var(--bs-navbar-brand-font-size);color:var(--bs-navbar-brand-color);text-decoration:none;white-space:nowrap}.navbar-brand:focus,.navbar-brand:hover{color:var(--bs-navbar-brand-hover-color)}.navbar-nav{--bs-nav-link-padding-x:0;--bs-nav-link-padding-y:0.5rem;--bs-nav-link-font-weight: ;--bs-nav-link-color:var(--bs-navbar-color);--bs-nav-link-hover-color:var(--bs-navbar-hover-color);--bs-nav-link-disabled-color:var(--bs-navbar-disabled-color);display:flex;flex-direction:column;padding-left:0;margin-bottom:0;list-style:none}.navbar-nav .nav-link.active,.navbar-nav .nav-link.show{color:var(--bs-navbar-active-color)}.navbar-nav .dropdown-menu{position:static}.navbar-text{padding-top:.5rem;padding-bottom:.5rem;color:var(--bs-navbar-color)}.navbar-text a,.navbar-text a:focus,.navbar-text a:hover{color:var(--bs-navbar-active-color)}.navbar-collapse{flex-basis:100%;flex-grow:1;align-items:center}.navbar-toggler{padding:var(--bs-navbar-toggler-padding-y) var(--bs-navbar-toggler-padding-x);font-size:var(--bs-navbar-toggler-font-size);line-height:1;color:var(--bs-navbar-color);background-color:transparent;border:var(--bs-border-width) solid var(--bs-navbar-toggler-border-color);border-radius:var(--bs-navbar-toggler-border-radius);transition:var(--bs-navbar-toggler-transition)}@media (prefers-reduced-motion:reduce){.navbar-toggler{transition:none}}.navbar-toggler:hover{text-decoration:none}.navbar-toggler:focus{text-decoration:none;outline:0;box-shadow:0 0 0 var(--bs-navbar-toggler-focus-width)}.navbar-toggler-icon{display:inline-block;width:1.5em;height:1.5em;vertical-align:middle;background-image:var(--bs-navbar-toggler-icon-bg);background-repeat:no-repeat;background-position:center;background-size:100%}.navbar-nav-scroll{max-height:var(--bs-scroll-height,75vh);overflow-y:auto}@media (min-width:576px){.navbar-expand-sm{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-sm .navbar-nav{flex-direction:row}.navbar-expand-sm .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-sm .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-sm .navbar-nav-scroll{overflow:visible}.navbar-expand-sm .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand-sm .navbar-toggler{display:none}.navbar-expand-sm .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand-sm .offcanvas .offcanvas-header{display:none}.navbar-expand-sm .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}@media (min-width:768px){.navbar-expand-md{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-md .navbar-nav{flex-direction:row}.navbar-expand-md .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-md .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-md .navbar-nav-scroll{overflow:visible}.navbar-expand-md .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand-md .navbar-toggler{display:none}.navbar-expand-md .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand-md .offcanvas .offcanvas-header{display:none}.navbar-expand-md .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}@media (min-width:992px){.navbar-expand-lg{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-lg .navbar-nav{flex-direction:row}.navbar-expand-lg .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-lg .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-lg .navbar-nav-scroll{overflow:visible}.navbar-expand-lg .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand-lg .navbar-toggler{display:none}.navbar-expand-lg .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand-lg .offcanvas .offcanvas-header{display:none}.navbar-expand-lg .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}@media (min-width:1200px){.navbar-expand-xl{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-xl .navbar-nav{flex-direction:row}.navbar-expand-xl .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-xl .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-xl .navbar-nav-scroll{overflow:visible}.navbar-expand-xl .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand-xl .navbar-toggler{display:none}.navbar-expand-xl .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand-xl .offcanvas .offcanvas-header{display:none}.navbar-expand-xl .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}@media (min-width:1400px){.navbar-expand-xxl{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-xxl .navbar-nav{flex-direction:row}.navbar-expand-xxl .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-xxl .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-xxl .navbar-nav-scroll{overflow:visible}.navbar-expand-xxl .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand-xxl .navbar-toggler{display:none}.navbar-expand-xxl .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand-xxl .offcanvas .offcanvas-header{display:none}.navbar-expand-xxl .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}.navbar-expand{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand .navbar-nav{flex-direction:row}.navbar-expand .navbar-nav .dropdown-menu{position:absolute}.navbar-expand .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand .navbar-nav-scroll{overflow:visible}.navbar-expand .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand .navbar-toggler{display:none}.navbar-expand .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand .offcanvas .offcanvas-header{display:none}.navbar-expand .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}.navbar-dark,.navbar[data-bs-theme=dark]{--bs-navbar-color:rgba(255, 255, 255, 0.55);--bs-navbar-hover-color:rgba(255, 255, 255, 0.75);--bs-navbar-disabled-color:rgba(255, 255, 255, 0.25);--bs-navbar-active-color:#fff;--bs-navbar-brand-color:#fff;--bs-navbar-brand-hover-color:#fff;--bs-navbar-toggler-border-color:rgba(255, 255, 255, 0.1);--bs-navbar-toggler-icon-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.55%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e")}[data-bs-theme=dark] .navbar-toggler-icon{--bs-navbar-toggler-icon-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.55%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e")}.card{--bs-card-spacer-y:1rem;--bs-card-spacer-x:1rem;--bs-card-title-spacer-y:0.5rem;--bs-card-title-color: ;--bs-card-subtitle-color: ;--bs-card-border-width:var(--bs-border-width);--bs-card-border-color:var(--bs-border-color-translucent);--bs-card-border-radius:var(--bs-border-radius);--bs-card-box-shadow: ;--bs-card-inner-border-radius:calc(var(--bs-border-radius) - (var(--bs-border-width)));--bs-card-cap-padding-y:0.5rem;--bs-card-cap-padding-x:1rem;--bs-card-cap-bg:rgba(var(--bs-body-color-rgb), 0.03);--bs-card-cap-color: ;--bs-card-height: ;--bs-card-color: ;--bs-card-bg:var(--bs-body-bg);--bs-card-img-overlay-padding:1rem;--bs-card-group-margin:0.75rem;position:relative;display:flex;flex-direction:column;min-width:0;height:var(--bs-card-height);color:var(--bs-body-color);word-wrap:break-word;background-color:var(--bs-card-bg);background-clip:border-box;border:var(--bs-card-border-width) solid var(--bs-card-border-color);border-radius:var(--bs-card-border-radius)}.card>hr{margin-right:0;margin-left:0}.card>.list-group{border-top:inherit;border-bottom:inherit}.card>.list-group:first-child{border-top-width:0;border-top-left-radius:var(--bs-card-inner-border-radius);border-top-right-radius:var(--bs-card-inner-border-radius)}.card>.list-group:last-child{border-bottom-width:0;border-bottom-right-radius:var(--bs-card-inner-border-radius);border-bottom-left-radius:var(--bs-card-inner-border-radius)}.card>.card-header+.list-group,.card>.list-group+.card-footer{border-top:0}.card-body{flex:1 1 auto;padding:var(--bs-card-spacer-y) var(--bs-card-spacer-x);color:var(--bs-card-color)}.card-title{margin-bottom:var(--bs-card-title-spacer-y);color:var(--bs-card-title-color)}.card-subtitle{margin-top:calc(-.5 * var(--bs-card-title-spacer-y));margin-bottom:0;color:var(--bs-card-subtitle-color)}.card-text:last-child{margin-bottom:0}.card-link+.card-link{margin-left:var(--bs-card-spacer-x)}.card-header{padding:var(--bs-card-cap-padding-y) var(--bs-card-cap-padding-x);margin-bottom:0;color:var(--bs-card-cap-color);background-color:var(--bs-card-cap-bg);border-bottom:var(--bs-card-border-width) solid var(--bs-card-border-color)}.card-header:first-child{border-radius:var(--bs-card-inner-border-radius) var(--bs-card-inner-border-radius) 0 0}.card-footer{padding:var(--bs-card-cap-padding-y) var(--bs-card-cap-padding-x);color:var(--bs-card-cap-color);background-color:var(--bs-card-cap-bg);border-top:var(--bs-card-border-width) solid var(--bs-card-border-color)}.card-footer:last-child{border-radius:0 0 var(--bs-card-inner-border-radius) var(--bs-card-inner-border-radius)}.card-header-tabs{margin-right:calc(-.5 * var(--bs-card-cap-padding-x));margin-bottom:calc(-1 * var(--bs-card-cap-padding-y));margin-left:calc(-.5 * var(--bs-card-cap-padding-x));border-bottom:0}.card-header-tabs .nav-link.active{background-color:var(--bs-card-bg);border-bottom-color:var(--bs-card-bg)}.card-header-pills{margin-right:calc(-.5 * var(--bs-card-cap-padding-x));margin-left:calc(-.5 * var(--bs-card-cap-padding-x))}.card-img-overlay{position:absolute;top:0;right:0;bottom:0;left:0;padding:var(--bs-card-img-overlay-padding);border-radius:var(--bs-card-inner-border-radius)}.card-img,.card-img-bottom,.card-img-top{width:100%}.card-img,.card-img-top{border-top-left-radius:var(--bs-card-inner-border-radius);border-top-right-radius:var(--bs-card-inner-border-radius)}.card-img,.card-img-bottom{border-bottom-right-radius:var(--bs-card-inner-border-radius);border-bottom-left-radius:var(--bs-card-inner-border-radius)}.card-group>.card{margin-bottom:var(--bs-card-group-margin)}@media (min-width:576px){.card-group{display:flex;flex-flow:row wrap}.card-group>.card{flex:1 0 0%;margin-bottom:0}.card-group>.card+.card{margin-left:0;border-left:0}.card-group>.card:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.card-group>.card:not(:last-child) .card-header,.card-group>.card:not(:last-child) .card-img-top{border-top-right-radius:0}.card-group>.card:not(:last-child) .card-footer,.card-group>.card:not(:last-child) .card-img-bottom{border-bottom-right-radius:0}.card-group>.card:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.card-group>.card:not(:first-child) .card-header,.card-group>.card:not(:first-child) .card-img-top{border-top-left-radius:0}.card-group>.card:not(:first-child) .card-footer,.card-group>.card:not(:first-child) .card-img-bottom{border-bottom-left-radius:0}}.accordion{--bs-accordion-color:var(--bs-body-color);--bs-accordion-bg:var(--bs-body-bg);--bs-accordion-transition:color 0.15s ease-in-out,background-color 0.15s ease-in-out,border-color 0.15s ease-in-out,box-shadow 0.15s ease-in-out,border-radius 0.15s ease;--bs-accordion-border-color:var(--bs-border-color);--bs-accordion-border-width:var(--bs-border-width);--bs-accordion-border-radius:var(--bs-border-radius);--bs-accordion-inner-border-radius:calc(var(--bs-border-radius) - (var(--bs-border-width)));--bs-accordion-btn-padding-x:1.25rem;--bs-accordion-btn-padding-y:1rem;--bs-accordion-btn-color:var(--bs-body-color);--bs-accordion-btn-bg:var(--bs-accordion-bg);--bs-accordion-btn-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23212529'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");--bs-accordion-btn-icon-width:1.25rem;--bs-accordion-btn-icon-transform:rotate(-180deg);--bs-accordion-btn-icon-transition:transform 0.2s ease-in-out;--bs-accordion-btn-active-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23052c65'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");--bs-accordion-btn-focus-border-color:#86b7fe;--bs-accordion-btn-focus-box-shadow:0 0 0 0.25rem rgba(13, 110, 253, 0.25);--bs-accordion-body-padding-x:1.25rem;--bs-accordion-body-padding-y:1rem;--bs-accordion-active-color:var(--bs-primary-text-emphasis);--bs-accordion-active-bg:var(--bs-primary-bg-subtle)}.accordion-button{position:relative;display:flex;align-items:center;width:100%;padding:var(--bs-accordion-btn-padding-y) var(--bs-accordion-btn-padding-x);font-size:1rem;color:var(--bs-accordion-btn-color);text-align:left;background-color:var(--bs-accordion-btn-bg);border:0;border-radius:0;overflow-anchor:none;transition:var(--bs-accordion-transition)}@media (prefers-reduced-motion:reduce){.accordion-button{transition:none}}.accordion-button:not(.collapsed){color:var(--bs-accordion-active-color);background-color:var(--bs-accordion-active-bg);box-shadow:inset 0 calc(-1 * var(--bs-accordion-border-width)) 0 var(--bs-accordion-border-color)}.accordion-button:not(.collapsed)::after{background-image:var(--bs-accordion-btn-active-icon);transform:var(--bs-accordion-btn-icon-transform)}.accordion-button::after{flex-shrink:0;width:var(--bs-accordion-btn-icon-width);height:var(--bs-accordion-btn-icon-width);margin-left:auto;content:"";background-image:var(--bs-accordion-btn-icon);background-repeat:no-repeat;background-size:var(--bs-accordion-btn-icon-width);transition:var(--bs-accordion-btn-icon-transition)}@media (prefers-reduced-motion:reduce){.accordion-button::after{transition:none}}.accordion-button:hover{z-index:2}.accordion-button:focus{z-index:3;border-color:var(--bs-accordion-btn-focus-border-color);outline:0;box-shadow:var(--bs-accordion-btn-focus-box-shadow)}.accordion-header{margin-bottom:0}.accordion-item{color:var(--bs-accordion-color);background-color:var(--bs-accordion-bg);border:var(--bs-accordion-border-width) solid var(--bs-accordion-border-color)}.accordion-item:first-of-type{border-top-left-radius:var(--bs-accordion-border-radius);border-top-right-radius:var(--bs-accordion-border-radius)}.accordion-item:first-of-type .accordion-button{border-top-left-radius:var(--bs-accordion-inner-border-radius);border-top-right-radius:var(--bs-accordion-inner-border-radius)}.accordion-item:not(:first-of-type){border-top:0}.accordion-item:last-of-type{border-bottom-right-radius:var(--bs-accordion-border-radius);border-bottom-left-radius:var(--bs-accordion-border-radius)}.accordion-item:last-of-type .accordion-button.collapsed{border-bottom-right-radius:var(--bs-accordion-inner-border-radius);border-bottom-left-radius:var(--bs-accordion-inner-border-radius)}.accordion-item:last-of-type .accordion-collapse{border-bottom-right-radius:var(--bs-accordion-border-radius);border-bottom-left-radius:var(--bs-accordion-border-radius)}.accordion-body{padding:var(--bs-accordion-body-padding-y) var(--bs-accordion-body-padding-x)}.accordion-flush .accordion-collapse{border-width:0}.accordion-flush .accordion-item{border-right:0;border-left:0;border-radius:0}.accordion-flush .accordion-item:first-child{border-top:0}.accordion-flush .accordion-item:last-child{border-bottom:0}.accordion-flush .accordion-item .accordion-button,.accordion-flush .accordion-item .accordion-button.collapsed{border-radius:0}[data-bs-theme=dark] .accordion-button::after{--bs-accordion-btn-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%236ea8fe'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");--bs-accordion-btn-active-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%236ea8fe'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e")}.breadcrumb{--bs-breadcrumb-padding-x:0;--bs-breadcrumb-padding-y:0;--bs-breadcrumb-margin-bottom:1rem;--bs-breadcrumb-bg: ;--bs-breadcrumb-border-radius: ;--bs-breadcrumb-divider-color:var(--bs-secondary-color);--bs-breadcrumb-item-padding-x:0.5rem;--bs-breadcrumb-item-active-color:var(--bs-secondary-color);display:flex;flex-wrap:wrap;padding:var(--bs-breadcrumb-padding-y) var(--bs-breadcrumb-padding-x);margin-bottom:var(--bs-breadcrumb-margin-bottom);font-size:var(--bs-breadcrumb-font-size);list-style:none;background-color:var(--bs-breadcrumb-bg);border-radius:var(--bs-breadcrumb-border-radius)}.breadcrumb-item+.breadcrumb-item{padding-left:var(--bs-breadcrumb-item-padding-x)}.breadcrumb-item+.breadcrumb-item::before{float:left;padding-right:var(--bs-breadcrumb-item-padding-x);color:var(--bs-breadcrumb-divider-color);content:var(--bs-breadcrumb-divider, "/")}.breadcrumb-item.active{color:var(--bs-breadcrumb-item-active-color)}.pagination{--bs-pagination-padding-x:0.75rem;--bs-pagination-padding-y:0.375rem;--bs-pagination-font-size:1rem;--bs-pagination-color:var(--bs-link-color);--bs-pagination-bg:var(--bs-body-bg);--bs-pagination-border-width:var(--bs-border-width);--bs-pagination-border-color:var(--bs-border-color);--bs-pagination-border-radius:var(--bs-border-radius);--bs-pagination-hover-color:var(--bs-link-hover-color);--bs-pagination-hover-bg:var(--bs-tertiary-bg);--bs-pagination-hover-border-color:var(--bs-border-color);--bs-pagination-focus-color:var(--bs-link-hover-color);--bs-pagination-focus-bg:var(--bs-secondary-bg);--bs-pagination-focus-box-shadow:0 0 0 0.25rem rgba(13, 110, 253, 0.25);--bs-pagination-active-color:#fff;--bs-pagination-active-bg:#0d6efd;--bs-pagination-active-border-color:#0d6efd;--bs-pagination-disabled-color:var(--bs-secondary-color);--bs-pagination-disabled-bg:var(--bs-secondary-bg);--bs-pagination-disabled-border-color:var(--bs-border-color);display:flex;padding-left:0;list-style:none}.page-link{position:relative;display:block;padding:var(--bs-pagination-padding-y) var(--bs-pagination-padding-x);font-size:var(--bs-pagination-font-size);color:var(--bs-pagination-color);text-decoration:none;background-color:var(--bs-pagination-bg);border:var(--bs-pagination-border-width) solid var(--bs-pagination-border-color);transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.page-link{transition:none}}.page-link:hover{z-index:2;color:var(--bs-pagination-hover-color);background-color:var(--bs-pagination-hover-bg);border-color:var(--bs-pagination-hover-border-color)}.page-link:focus{z-index:3;color:var(--bs-pagination-focus-color);background-color:var(--bs-pagination-focus-bg);outline:0;box-shadow:var(--bs-pagination-focus-box-shadow)}.active>.page-link,.page-link.active{z-index:3;color:var(--bs-pagination-active-color);background-color:var(--bs-pagination-active-bg);border-color:var(--bs-pagination-active-border-color)}.disabled>.page-link,.page-link.disabled{color:var(--bs-pagination-disabled-color);pointer-events:none;background-color:var(--bs-pagination-disabled-bg);border-color:var(--bs-pagination-disabled-border-color)}.page-item:not(:first-child) .page-link{margin-left:calc(var(--bs-border-width) * -1)}.page-item:first-child .page-link{border-top-left-radius:var(--bs-pagination-border-radius);border-bottom-left-radius:var(--bs-pagination-border-radius)}.page-item:last-child .page-link{border-top-right-radius:var(--bs-pagination-border-radius);border-bottom-right-radius:var(--bs-pagination-border-radius)}.pagination-lg{--bs-pagination-padding-x:1.5rem;--bs-pagination-padding-y:0.75rem;--bs-pagination-font-size:1.25rem;--bs-pagination-border-radius:var(--bs-border-radius-lg)}.pagination-sm{--bs-pagination-padding-x:0.5rem;--bs-pagination-padding-y:0.25rem;--bs-pagination-font-size:0.875rem;--bs-pagination-border-radius:var(--bs-border-radius-sm)}.badge{--bs-badge-padding-x:0.65em;--bs-badge-padding-y:0.35em;--bs-badge-font-size:0.75em;--bs-badge-font-weight:700;--bs-badge-color:#fff;--bs-badge-border-radius:var(--bs-border-radius);display:inline-block;padding:var(--bs-badge-padding-y) var(--bs-badge-padding-x);font-size:var(--bs-badge-font-size);font-weight:var(--bs-badge-font-weight);line-height:1;color:var(--bs-badge-color);text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:var(--bs-badge-border-radius)}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.alert{--bs-alert-bg:transparent;--bs-alert-padding-x:1rem;--bs-alert-padding-y:1rem;--bs-alert-margin-bottom:1rem;--bs-alert-color:inherit;--bs-alert-border-color:transparent;--bs-alert-border:var(--bs-border-width) solid var(--bs-alert-border-color);--bs-alert-border-radius:var(--bs-border-radius);--bs-alert-link-color:inherit;position:relative;padding:var(--bs-alert-padding-y) var(--bs-alert-padding-x);margin-bottom:var(--bs-alert-margin-bottom);color:var(--bs-alert-color);background-color:var(--bs-alert-bg);border:var(--bs-alert-border);border-radius:var(--bs-alert-border-radius)}.alert-heading{color:inherit}.alert-link{font-weight:700;color:var(--bs-alert-link-color)}.alert-dismissible{padding-right:3rem}.alert-dismissible .btn-close{position:absolute;top:0;right:0;z-index:2;padding:1.25rem 1rem}.alert-primary{--bs-alert-color:var(--bs-primary-text-emphasis);--bs-alert-bg:var(--bs-primary-bg-subtle);--bs-alert-border-color:var(--bs-primary-border-subtle);--bs-alert-link-color:var(--bs-primary-text-emphasis)}.alert-secondary{--bs-alert-color:var(--bs-secondary-text-emphasis);--bs-alert-bg:var(--bs-secondary-bg-subtle);--bs-alert-border-color:var(--bs-secondary-border-subtle);--bs-alert-link-color:var(--bs-secondary-text-emphasis)}.alert-success{--bs-alert-color:var(--bs-success-text-emphasis);--bs-alert-bg:var(--bs-success-bg-subtle);--bs-alert-border-color:var(--bs-success-border-subtle);--bs-alert-link-color:var(--bs-success-text-emphasis)}.alert-info{--bs-alert-color:var(--bs-info-text-emphasis);--bs-alert-bg:var(--bs-info-bg-subtle);--bs-alert-border-color:var(--bs-info-border-subtle);--bs-alert-link-color:var(--bs-info-text-emphasis)}.alert-warning{--bs-alert-color:var(--bs-warning-text-emphasis);--bs-alert-bg:var(--bs-warning-bg-subtle);--bs-alert-border-color:var(--bs-warning-border-subtle);--bs-alert-link-color:var(--bs-warning-text-emphasis)}.alert-danger{--bs-alert-color:var(--bs-danger-text-emphasis);--bs-alert-bg:var(--bs-danger-bg-subtle);--bs-alert-border-color:var(--bs-danger-border-subtle);--bs-alert-link-color:var(--bs-danger-text-emphasis)}.alert-light{--bs-alert-color:var(--bs-light-text-emphasis);--bs-alert-bg:var(--bs-light-bg-subtle);--bs-alert-border-color:var(--bs-light-border-subtle);--bs-alert-link-color:var(--bs-light-text-emphasis)}.alert-dark{--bs-alert-color:var(--bs-dark-text-emphasis);--bs-alert-bg:var(--bs-dark-bg-subtle);--bs-alert-border-color:var(--bs-dark-border-subtle);--bs-alert-link-color:var(--bs-dark-text-emphasis)}@keyframes progress-bar-stripes{0%{background-position-x:1rem}}.progress,.progress-stacked{--bs-progress-height:1rem;--bs-progress-font-size:0.75rem;--bs-progress-bg:var(--bs-secondary-bg);--bs-progress-border-radius:var(--bs-border-radius);--bs-progress-box-shadow:var(--bs-box-shadow-inset);--bs-progress-bar-color:#fff;--bs-progress-bar-bg:#0d6efd;--bs-progress-bar-transition:width 0.6s ease;display:flex;height:var(--bs-progress-height);overflow:hidden;font-size:var(--bs-progress-font-size);background-color:var(--bs-progress-bg);border-radius:var(--bs-progress-border-radius)}.progress-bar{display:flex;flex-direction:column;justify-content:center;overflow:hidden;color:var(--bs-progress-bar-color);text-align:center;white-space:nowrap;background-color:var(--bs-progress-bar-bg);transition:var(--bs-progress-bar-transition)}@media (prefers-reduced-motion:reduce){.progress-bar{transition:none}}.progress-bar-striped{background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-size:var(--bs-progress-height) var(--bs-progress-height)}.progress-stacked>.progress{overflow:visible}.progress-stacked>.progress>.progress-bar{width:100%}.progress-bar-animated{animation:1s linear infinite progress-bar-stripes}@media (prefers-reduced-motion:reduce){.progress-bar-animated{animation:none}}.list-group{--bs-list-group-color:var(--bs-body-color);--bs-list-group-bg:var(--bs-body-bg);--bs-list-group-border-color:var(--bs-border-color);--bs-list-group-border-width:var(--bs-border-width);--bs-list-group-border-radius:var(--bs-border-radius);--bs-list-group-item-padding-x:1rem;--bs-list-group-item-padding-y:0.5rem;--bs-list-group-action-color:var(--bs-secondary-color);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-tertiary-bg);--bs-list-group-action-active-color:var(--bs-body-color);--bs-list-group-action-active-bg:var(--bs-secondary-bg);--bs-list-group-disabled-color:var(--bs-secondary-color);--bs-list-group-disabled-bg:var(--bs-body-bg);--bs-list-group-active-color:#fff;--bs-list-group-active-bg:#0d6efd;--bs-list-group-active-border-color:#0d6efd;display:flex;flex-direction:column;padding-left:0;margin-bottom:0;border-radius:var(--bs-list-group-border-radius)}.list-group-numbered{list-style-type:none;counter-reset:section}.list-group-numbered>.list-group-item::before{content:counters(section, ".") ". ";counter-increment:section}.list-group-item-action{width:100%;color:var(--bs-list-group-action-color);text-align:inherit}.list-group-item-action:focus,.list-group-item-action:hover{z-index:1;color:var(--bs-list-group-action-hover-color);text-decoration:none;background-color:var(--bs-list-group-action-hover-bg)}.list-group-item-action:active{color:var(--bs-list-group-action-active-color);background-color:var(--bs-list-group-action-active-bg)}.list-group-item{position:relative;display:block;padding:var(--bs-list-group-item-padding-y) var(--bs-list-group-item-padding-x);color:var(--bs-list-group-color);text-decoration:none;background-color:var(--bs-list-group-bg);border:var(--bs-list-group-border-width) solid var(--bs-list-group-border-color)}.list-group-item:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.list-group-item:last-child{border-bottom-right-radius:inherit;border-bottom-left-radius:inherit}.list-group-item.disabled,.list-group-item:disabled{color:var(--bs-list-group-disabled-color);pointer-events:none;background-color:var(--bs-list-group-disabled-bg)}.list-group-item.active{z-index:2;color:var(--bs-list-group-active-color);background-color:var(--bs-list-group-active-bg);border-color:var(--bs-list-group-active-border-color)}.list-group-item+.list-group-item{border-top-width:0}.list-group-item+.list-group-item.active{margin-top:calc(-1 * var(--bs-list-group-border-width));border-top-width:var(--bs-list-group-border-width)}.list-group-horizontal{flex-direction:row}.list-group-horizontal>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal>.list-group-item.active{margin-top:0}.list-group-horizontal>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}@media (min-width:576px){.list-group-horizontal-sm{flex-direction:row}.list-group-horizontal-sm>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-sm>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-sm>.list-group-item.active{margin-top:0}.list-group-horizontal-sm>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-sm>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}}@media (min-width:768px){.list-group-horizontal-md{flex-direction:row}.list-group-horizontal-md>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-md>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-md>.list-group-item.active{margin-top:0}.list-group-horizontal-md>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-md>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}}@media (min-width:992px){.list-group-horizontal-lg{flex-direction:row}.list-group-horizontal-lg>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-lg>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-lg>.list-group-item.active{margin-top:0}.list-group-horizontal-lg>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-lg>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}}@media (min-width:1200px){.list-group-horizontal-xl{flex-direction:row}.list-group-horizontal-xl>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-xl>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-xl>.list-group-item.active{margin-top:0}.list-group-horizontal-xl>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-xl>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}}@media (min-width:1400px){.list-group-horizontal-xxl{flex-direction:row}.list-group-horizontal-xxl>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-xxl>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-xxl>.list-group-item.active{margin-top:0}.list-group-horizontal-xxl>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-xxl>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}}.list-group-flush{border-radius:0}.list-group-flush>.list-group-item{border-width:0 0 var(--bs-list-group-border-width)}.list-group-flush>.list-group-item:last-child{border-bottom-width:0}.list-group-item-primary{--bs-list-group-color:var(--bs-primary-text-emphasis);--bs-list-group-bg:var(--bs-primary-bg-subtle);--bs-list-group-border-color:var(--bs-primary-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-primary-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-primary-border-subtle);--bs-list-group-active-color:var(--bs-primary-bg-subtle);--bs-list-group-active-bg:var(--bs-primary-text-emphasis);--bs-list-group-active-border-color:var(--bs-primary-text-emphasis)}.list-group-item-secondary{--bs-list-group-color:var(--bs-secondary-text-emphasis);--bs-list-group-bg:var(--bs-secondary-bg-subtle);--bs-list-group-border-color:var(--bs-secondary-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-secondary-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-secondary-border-subtle);--bs-list-group-active-color:var(--bs-secondary-bg-subtle);--bs-list-group-active-bg:var(--bs-secondary-text-emphasis);--bs-list-group-active-border-color:var(--bs-secondary-text-emphasis)}.list-group-item-success{--bs-list-group-color:var(--bs-success-text-emphasis);--bs-list-group-bg:var(--bs-success-bg-subtle);--bs-list-group-border-color:var(--bs-success-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-success-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-success-border-subtle);--bs-list-group-active-color:var(--bs-success-bg-subtle);--bs-list-group-active-bg:var(--bs-success-text-emphasis);--bs-list-group-active-border-color:var(--bs-success-text-emphasis)}.list-group-item-info{--bs-list-group-color:var(--bs-info-text-emphasis);--bs-list-group-bg:var(--bs-info-bg-subtle);--bs-list-group-border-color:var(--bs-info-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-info-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-info-border-subtle);--bs-list-group-active-color:var(--bs-info-bg-subtle);--bs-list-group-active-bg:var(--bs-info-text-emphasis);--bs-list-group-active-border-color:var(--bs-info-text-emphasis)}.list-group-item-warning{--bs-list-group-color:var(--bs-warning-text-emphasis);--bs-list-group-bg:var(--bs-warning-bg-subtle);--bs-list-group-border-color:var(--bs-warning-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-warning-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-warning-border-subtle);--bs-list-group-active-color:var(--bs-warning-bg-subtle);--bs-list-group-active-bg:var(--bs-warning-text-emphasis);--bs-list-group-active-border-color:var(--bs-warning-text-emphasis)}.list-group-item-danger{--bs-list-group-color:var(--bs-danger-text-emphasis);--bs-list-group-bg:var(--bs-danger-bg-subtle);--bs-list-group-border-color:var(--bs-danger-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-danger-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-danger-border-subtle);--bs-list-group-active-color:var(--bs-danger-bg-subtle);--bs-list-group-active-bg:var(--bs-danger-text-emphasis);--bs-list-group-active-border-color:var(--bs-danger-text-emphasis)}.list-group-item-light{--bs-list-group-color:var(--bs-light-text-emphasis);--bs-list-group-bg:var(--bs-light-bg-subtle);--bs-list-group-border-color:var(--bs-light-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-light-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-light-border-subtle);--bs-list-group-active-color:var(--bs-light-bg-subtle);--bs-list-group-active-bg:var(--bs-light-text-emphasis);--bs-list-group-active-border-color:var(--bs-light-text-emphasis)}.list-group-item-dark{--bs-list-group-color:var(--bs-dark-text-emphasis);--bs-list-group-bg:var(--bs-dark-bg-subtle);--bs-list-group-border-color:var(--bs-dark-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-dark-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-dark-border-subtle);--bs-list-group-active-color:var(--bs-dark-bg-subtle);--bs-list-group-active-bg:var(--bs-dark-text-emphasis);--bs-list-group-active-border-color:var(--bs-dark-text-emphasis)}.btn-close{--bs-btn-close-color:#000;--bs-btn-close-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23000'%3e%3cpath d='M.293.293a1 1 0 0 1 1.414 0L8 6.586 14.293.293a1 1 0 1 1 1.414 1.414L9.414 8l6.293 6.293a1 1 0 0 1-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 0 1-1.414-1.414L6.586 8 .293 1.707a1 1 0 0 1 0-1.414z'/%3e%3c/svg%3e");--bs-btn-close-opacity:0.5;--bs-btn-close-hover-opacity:0.75;--bs-btn-close-focus-shadow:0 0 0 0.25rem rgba(13, 110, 253, 0.25);--bs-btn-close-focus-opacity:1;--bs-btn-close-disabled-opacity:0.25;--bs-btn-close-white-filter:invert(1) grayscale(100%) brightness(200%);box-sizing:content-box;width:1em;height:1em;padding:.25em .25em;color:var(--bs-btn-close-color);background:transparent var(--bs-btn-close-bg) center/1em auto no-repeat;border:0;border-radius:.375rem;opacity:var(--bs-btn-close-opacity)}.btn-close:hover{color:var(--bs-btn-close-color);text-decoration:none;opacity:var(--bs-btn-close-hover-opacity)}.btn-close:focus{outline:0;box-shadow:var(--bs-btn-close-focus-shadow);opacity:var(--bs-btn-close-focus-opacity)}.btn-close.disabled,.btn-close:disabled{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:var(--bs-btn-close-disabled-opacity)}.btn-close-white{filter:var(--bs-btn-close-white-filter)}[data-bs-theme=dark] .btn-close{filter:var(--bs-btn-close-white-filter)}.toast{--bs-toast-zindex:1090;--bs-toast-padding-x:0.75rem;--bs-toast-padding-y:0.5rem;--bs-toast-spacing:1.5rem;--bs-toast-max-width:350px;--bs-toast-font-size:0.875rem;--bs-toast-color: ;--bs-toast-bg:rgba(var(--bs-body-bg-rgb), 0.85);--bs-toast-border-width:var(--bs-border-width);--bs-toast-border-color:var(--bs-border-color-translucent);--bs-toast-border-radius:var(--bs-border-radius);--bs-toast-box-shadow:var(--bs-box-shadow);--bs-toast-header-color:var(--bs-secondary-color);--bs-toast-header-bg:rgba(var(--bs-body-bg-rgb), 0.85);--bs-toast-header-border-color:var(--bs-border-color-translucent);width:var(--bs-toast-max-width);max-width:100%;font-size:var(--bs-toast-font-size);color:var(--bs-toast-color);pointer-events:auto;background-color:var(--bs-toast-bg);background-clip:padding-box;border:var(--bs-toast-border-width) solid var(--bs-toast-border-color);box-shadow:var(--bs-toast-box-shadow);border-radius:var(--bs-toast-border-radius)}.toast.showing{opacity:0}.toast:not(.show){display:none}.toast-container{--bs-toast-zindex:1090;position:absolute;z-index:var(--bs-toast-zindex);width:-webkit-max-content;width:-moz-max-content;width:max-content;max-width:100%;pointer-events:none}.toast-container>:not(:last-child){margin-bottom:var(--bs-toast-spacing)}.toast-header{display:flex;align-items:center;padding:var(--bs-toast-padding-y) var(--bs-toast-padding-x);color:var(--bs-toast-header-color);background-color:var(--bs-toast-header-bg);background-clip:padding-box;border-bottom:var(--bs-toast-border-width) solid var(--bs-toast-header-border-color);border-top-left-radius:calc(var(--bs-toast-border-radius) - var(--bs-toast-border-width));border-top-right-radius:calc(var(--bs-toast-border-radius) - var(--bs-toast-border-width))}.toast-header .btn-close{margin-right:calc(-.5 * var(--bs-toast-padding-x));margin-left:var(--bs-toast-padding-x)}.toast-body{padding:var(--bs-toast-padding-x);word-wrap:break-word}.modal{--bs-modal-zindex:1055;--bs-modal-width:500px;--bs-modal-padding:1rem;--bs-modal-margin:0.5rem;--bs-modal-color: ;--bs-modal-bg:var(--bs-body-bg);--bs-modal-border-color:var(--bs-border-color-translucent);--bs-modal-border-width:var(--bs-border-width);--bs-modal-border-radius:var(--bs-border-radius-lg);--bs-modal-box-shadow:0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);--bs-modal-inner-border-radius:calc(var(--bs-border-radius-lg) - (var(--bs-border-width)));--bs-modal-header-padding-x:1rem;--bs-modal-header-padding-y:1rem;--bs-modal-header-padding:1rem 1rem;--bs-modal-header-border-color:var(--bs-border-color);--bs-modal-header-border-width:var(--bs-border-width);--bs-modal-title-line-height:1.5;--bs-modal-footer-gap:0.5rem;--bs-modal-footer-bg: ;--bs-modal-footer-border-color:var(--bs-border-color);--bs-modal-footer-border-width:var(--bs-border-width);position:fixed;top:0;left:0;z-index:var(--bs-modal-zindex);display:none;width:100%;height:100%;overflow-x:hidden;overflow-y:auto;outline:0}.modal-dialog{position:relative;width:auto;margin:var(--bs-modal-margin);pointer-events:none}.modal.fade .modal-dialog{transition:transform .3s ease-out;transform:translate(0,-50px)}@media (prefers-reduced-motion:reduce){.modal.fade .modal-dialog{transition:none}}.modal.show .modal-dialog{transform:none}.modal.modal-static .modal-dialog{transform:scale(1.02)}.modal-dialog-scrollable{height:calc(100% - var(--bs-modal-margin) * 2)}.modal-dialog-scrollable .modal-content{max-height:100%;overflow:hidden}.modal-dialog-scrollable .modal-body{overflow-y:auto}.modal-dialog-centered{display:flex;align-items:center;min-height:calc(100% - var(--bs-modal-margin) * 2)}.modal-content{position:relative;display:flex;flex-direction:column;width:100%;color:var(--bs-modal-color);pointer-events:auto;background-color:var(--bs-modal-bg);background-clip:padding-box;border:var(--bs-modal-border-width) solid var(--bs-modal-border-color);border-radius:var(--bs-modal-border-radius);outline:0}.modal-backdrop{--bs-backdrop-zindex:1050;--bs-backdrop-bg:#000;--bs-backdrop-opacity:0.5;position:fixed;top:0;left:0;z-index:var(--bs-backdrop-zindex);width:100vw;height:100vh;background-color:var(--bs-backdrop-bg)}.modal-backdrop.fade{opacity:0}.modal-backdrop.show{opacity:var(--bs-backdrop-opacity)}.modal-header{display:flex;flex-shrink:0;align-items:center;justify-content:space-between;padding:var(--bs-modal-header-padding);border-bottom:var(--bs-modal-header-border-width) solid var(--bs-modal-header-border-color);border-top-left-radius:var(--bs-modal-inner-border-radius);border-top-right-radius:var(--bs-modal-inner-border-radius)}.modal-header .btn-close{padding:calc(var(--bs-modal-header-padding-y) * .5) calc(var(--bs-modal-header-padding-x) * .5);margin:calc(-.5 * var(--bs-modal-header-padding-y)) calc(-.5 * var(--bs-modal-header-padding-x)) calc(-.5 * var(--bs-modal-header-padding-y)) auto}.modal-title{margin-bottom:0;line-height:var(--bs-modal-title-line-height)}.modal-body{position:relative;flex:1 1 auto;padding:var(--bs-modal-padding)}.modal-footer{display:flex;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;padding:calc(var(--bs-modal-padding) - var(--bs-modal-footer-gap) * .5);background-color:var(--bs-modal-footer-bg);border-top:var(--bs-modal-footer-border-width) solid var(--bs-modal-footer-border-color);border-bottom-right-radius:var(--bs-modal-inner-border-radius);border-bottom-left-radius:var(--bs-modal-inner-border-radius)}.modal-footer>*{margin:calc(var(--bs-modal-footer-gap) * .5)}@media (min-width:576px){.modal{--bs-modal-margin:1.75rem;--bs-modal-box-shadow:0 0.5rem 1rem rgba(0, 0, 0, 0.15)}.modal-dialog{max-width:var(--bs-modal-width);margin-right:auto;margin-left:auto}.modal-sm{--bs-modal-width:300px}}@media (min-width:992px){.modal-lg,.modal-xl{--bs-modal-width:800px}}@media (min-width:1200px){.modal-xl{--bs-modal-width:1140px}}.modal-fullscreen{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen .modal-footer,.modal-fullscreen .modal-header{border-radius:0}.modal-fullscreen .modal-body{overflow-y:auto}@media (max-width:575.98px){.modal-fullscreen-sm-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-sm-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-sm-down .modal-footer,.modal-fullscreen-sm-down .modal-header{border-radius:0}.modal-fullscreen-sm-down .modal-body{overflow-y:auto}}@media (max-width:767.98px){.modal-fullscreen-md-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-md-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-md-down .modal-footer,.modal-fullscreen-md-down .modal-header{border-radius:0}.modal-fullscreen-md-down .modal-body{overflow-y:auto}}@media (max-width:991.98px){.modal-fullscreen-lg-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-lg-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-lg-down .modal-footer,.modal-fullscreen-lg-down .modal-header{border-radius:0}.modal-fullscreen-lg-down .modal-body{overflow-y:auto}}@media (max-width:1199.98px){.modal-fullscreen-xl-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-xl-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-xl-down .modal-footer,.modal-fullscreen-xl-down .modal-header{border-radius:0}.modal-fullscreen-xl-down .modal-body{overflow-y:auto}}@media (max-width:1399.98px){.modal-fullscreen-xxl-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-xxl-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-xxl-down .modal-footer,.modal-fullscreen-xxl-down .modal-header{border-radius:0}.modal-fullscreen-xxl-down .modal-body{overflow-y:auto}}.tooltip{--bs-tooltip-zindex:1080;--bs-tooltip-max-width:200px;--bs-tooltip-padding-x:0.5rem;--bs-tooltip-padding-y:0.25rem;--bs-tooltip-margin: ;--bs-tooltip-font-size:0.875rem;--bs-tooltip-color:var(--bs-body-bg);--bs-tooltip-bg:var(--bs-emphasis-color);--bs-tooltip-border-radius:var(--bs-border-radius);--bs-tooltip-opacity:0.9;--bs-tooltip-arrow-width:0.8rem;--bs-tooltip-arrow-height:0.4rem;z-index:var(--bs-tooltip-zindex);display:block;margin:var(--bs-tooltip-margin);font-family:var(--bs-font-sans-serif);font-style:normal;font-weight:400;line-height:1.5;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;white-space:normal;word-spacing:normal;line-break:auto;font-size:var(--bs-tooltip-font-size);word-wrap:break-word;opacity:0}.tooltip.show{opacity:var(--bs-tooltip-opacity)}.tooltip .tooltip-arrow{display:block;width:var(--bs-tooltip-arrow-width);height:var(--bs-tooltip-arrow-height)}.tooltip .tooltip-arrow::before{position:absolute;content:"";border-color:transparent;border-style:solid}.bs-tooltip-auto[data-popper-placement^=top] .tooltip-arrow,.bs-tooltip-top .tooltip-arrow{bottom:calc(-1 * var(--bs-tooltip-arrow-height))}.bs-tooltip-auto[data-popper-placement^=top] .tooltip-arrow::before,.bs-tooltip-top .tooltip-arrow::before{top:-1px;border-width:var(--bs-tooltip-arrow-height) calc(var(--bs-tooltip-arrow-width) * .5) 0;border-top-color:var(--bs-tooltip-bg)}.bs-tooltip-auto[data-popper-placement^=right] .tooltip-arrow,.bs-tooltip-end .tooltip-arrow{left:calc(-1 * var(--bs-tooltip-arrow-height));width:var(--bs-tooltip-arrow-height);height:var(--bs-tooltip-arrow-width)}.bs-tooltip-auto[data-popper-placement^=right] .tooltip-arrow::before,.bs-tooltip-end .tooltip-arrow::before{right:-1px;border-width:calc(var(--bs-tooltip-arrow-width) * .5) var(--bs-tooltip-arrow-height) calc(var(--bs-tooltip-arrow-width) * .5) 0;border-right-color:var(--bs-tooltip-bg)}.bs-tooltip-auto[data-popper-placement^=bottom] .tooltip-arrow,.bs-tooltip-bottom .tooltip-arrow{top:calc(-1 * var(--bs-tooltip-arrow-height))}.bs-tooltip-auto[data-popper-placement^=bottom] .tooltip-arrow::before,.bs-tooltip-bottom .tooltip-arrow::before{bottom:-1px;border-width:0 calc(var(--bs-tooltip-arrow-width) * .5) var(--bs-tooltip-arrow-height);border-bottom-color:var(--bs-tooltip-bg)}.bs-tooltip-auto[data-popper-placement^=left] .tooltip-arrow,.bs-tooltip-start .tooltip-arrow{right:calc(-1 * var(--bs-tooltip-arrow-height));width:var(--bs-tooltip-arrow-height);height:var(--bs-tooltip-arrow-width)}.bs-tooltip-auto[data-popper-placement^=left] .tooltip-arrow::before,.bs-tooltip-start .tooltip-arrow::before{left:-1px;border-width:calc(var(--bs-tooltip-arrow-width) * .5) 0 calc(var(--bs-tooltip-arrow-width) * .5) var(--bs-tooltip-arrow-height);border-left-color:var(--bs-tooltip-bg)}.tooltip-inner{max-width:var(--bs-tooltip-max-width);padding:var(--bs-tooltip-padding-y) var(--bs-tooltip-padding-x);color:var(--bs-tooltip-color);text-align:center;background-color:var(--bs-tooltip-bg);border-radius:var(--bs-tooltip-border-radius)}.popover{--bs-popover-zindex:1070;--bs-popover-max-width:276px;--bs-popover-font-size:0.875rem;--bs-popover-bg:var(--bs-body-bg);--bs-popover-border-width:var(--bs-border-width);--bs-popover-border-color:var(--bs-border-color-translucent);--bs-popover-border-radius:var(--bs-border-radius-lg);--bs-popover-inner-border-radius:calc(var(--bs-border-radius-lg) - var(--bs-border-width));--bs-popover-box-shadow:0 0.5rem 1rem rgba(0, 0, 0, 0.15);--bs-popover-header-padding-x:1rem;--bs-popover-header-padding-y:0.5rem;--bs-popover-header-font-size:1rem;--bs-popover-header-color:inherit;--bs-popover-header-bg:var(--bs-secondary-bg);--bs-popover-body-padding-x:1rem;--bs-popover-body-padding-y:1rem;--bs-popover-body-color:var(--bs-body-color);--bs-popover-arrow-width:1rem;--bs-popover-arrow-height:0.5rem;--bs-popover-arrow-border:var(--bs-popover-border-color);z-index:var(--bs-popover-zindex);display:block;max-width:var(--bs-popover-max-width);font-family:var(--bs-font-sans-serif);font-style:normal;font-weight:400;line-height:1.5;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;white-space:normal;word-spacing:normal;line-break:auto;font-size:var(--bs-popover-font-size);word-wrap:break-word;background-color:var(--bs-popover-bg);background-clip:padding-box;border:var(--bs-popover-border-width) solid var(--bs-popover-border-color);border-radius:var(--bs-popover-border-radius)}.popover .popover-arrow{display:block;width:var(--bs-popover-arrow-width);height:var(--bs-popover-arrow-height)}.popover .popover-arrow::after,.popover .popover-arrow::before{position:absolute;display:block;content:"";border-color:transparent;border-style:solid;border-width:0}.bs-popover-auto[data-popper-placement^=top]>.popover-arrow,.bs-popover-top>.popover-arrow{bottom:calc(-1 * (var(--bs-popover-arrow-height)) - var(--bs-popover-border-width))}.bs-popover-auto[data-popper-placement^=top]>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=top]>.popover-arrow::before,.bs-popover-top>.popover-arrow::after,.bs-popover-top>.popover-arrow::before{border-width:var(--bs-popover-arrow-height) calc(var(--bs-popover-arrow-width) * .5) 0}.bs-popover-auto[data-popper-placement^=top]>.popover-arrow::before,.bs-popover-top>.popover-arrow::before{bottom:0;border-top-color:var(--bs-popover-arrow-border)}.bs-popover-auto[data-popper-placement^=top]>.popover-arrow::after,.bs-popover-top>.popover-arrow::after{bottom:var(--bs-popover-border-width);border-top-color:var(--bs-popover-bg)}.bs-popover-auto[data-popper-placement^=right]>.popover-arrow,.bs-popover-end>.popover-arrow{left:calc(-1 * (var(--bs-popover-arrow-height)) - var(--bs-popover-border-width));width:var(--bs-popover-arrow-height);height:var(--bs-popover-arrow-width)}.bs-popover-auto[data-popper-placement^=right]>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=right]>.popover-arrow::before,.bs-popover-end>.popover-arrow::after,.bs-popover-end>.popover-arrow::before{border-width:calc(var(--bs-popover-arrow-width) * .5) var(--bs-popover-arrow-height) calc(var(--bs-popover-arrow-width) * .5) 0}.bs-popover-auto[data-popper-placement^=right]>.popover-arrow::before,.bs-popover-end>.popover-arrow::before{left:0;border-right-color:var(--bs-popover-arrow-border)}.bs-popover-auto[data-popper-placement^=right]>.popover-arrow::after,.bs-popover-end>.popover-arrow::after{left:var(--bs-popover-border-width);border-right-color:var(--bs-popover-bg)}.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow,.bs-popover-bottom>.popover-arrow{top:calc(-1 * (var(--bs-popover-arrow-height)) - var(--bs-popover-border-width))}.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow::before,.bs-popover-bottom>.popover-arrow::after,.bs-popover-bottom>.popover-arrow::before{border-width:0 calc(var(--bs-popover-arrow-width) * .5) var(--bs-popover-arrow-height)}.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow::before,.bs-popover-bottom>.popover-arrow::before{top:0;border-bottom-color:var(--bs-popover-arrow-border)}.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow::after,.bs-popover-bottom>.popover-arrow::after{top:var(--bs-popover-border-width);border-bottom-color:var(--bs-popover-bg)}.bs-popover-auto[data-popper-placement^=bottom] .popover-header::before,.bs-popover-bottom .popover-header::before{position:absolute;top:0;left:50%;display:block;width:var(--bs-popover-arrow-width);margin-left:calc(-.5 * var(--bs-popover-arrow-width));content:"";border-bottom:var(--bs-popover-border-width) solid var(--bs-popover-header-bg)}.bs-popover-auto[data-popper-placement^=left]>.popover-arrow,.bs-popover-start>.popover-arrow{right:calc(-1 * (var(--bs-popover-arrow-height)) - var(--bs-popover-border-width));width:var(--bs-popover-arrow-height);height:var(--bs-popover-arrow-width)}.bs-popover-auto[data-popper-placement^=left]>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=left]>.popover-arrow::before,.bs-popover-start>.popover-arrow::after,.bs-popover-start>.popover-arrow::before{border-width:calc(var(--bs-popover-arrow-width) * .5) 0 calc(var(--bs-popover-arrow-width) * .5) var(--bs-popover-arrow-height)}.bs-popover-auto[data-popper-placement^=left]>.popover-arrow::before,.bs-popover-start>.popover-arrow::before{right:0;border-left-color:var(--bs-popover-arrow-border)}.bs-popover-auto[data-popper-placement^=left]>.popover-arrow::after,.bs-popover-start>.popover-arrow::after{right:var(--bs-popover-border-width);border-left-color:var(--bs-popover-bg)}.popover-header{padding:var(--bs-popover-header-padding-y) var(--bs-popover-header-padding-x);margin-bottom:0;font-size:var(--bs-popover-header-font-size);color:var(--bs-popover-header-color);background-color:var(--bs-popover-header-bg);border-bottom:var(--bs-popover-border-width) solid var(--bs-popover-border-color);border-top-left-radius:var(--bs-popover-inner-border-radius);border-top-right-radius:var(--bs-popover-inner-border-radius)}.popover-header:empty{display:none}.popover-body{padding:var(--bs-popover-body-padding-y) var(--bs-popover-body-padding-x);color:var(--bs-popover-body-color)}.carousel{position:relative}.carousel.pointer-event{touch-action:pan-y}.carousel-inner{position:relative;width:100%;overflow:hidden}.carousel-inner::after{display:block;clear:both;content:""}.carousel-item{position:relative;display:none;float:left;width:100%;margin-right:-100%;-webkit-backface-visibility:hidden;backface-visibility:hidden;transition:transform .6s ease-in-out}@media (prefers-reduced-motion:reduce){.carousel-item{transition:none}}.carousel-item-next,.carousel-item-prev,.carousel-item.active{display:block}.active.carousel-item-end,.carousel-item-next:not(.carousel-item-start){transform:translateX(100%)}.active.carousel-item-start,.carousel-item-prev:not(.carousel-item-end){transform:translateX(-100%)}.carousel-fade .carousel-item{opacity:0;transition-property:opacity;transform:none}.carousel-fade .carousel-item-next.carousel-item-start,.carousel-fade .carousel-item-prev.carousel-item-end,.carousel-fade .carousel-item.active{z-index:1;opacity:1}.carousel-fade .active.carousel-item-end,.carousel-fade .active.carousel-item-start{z-index:0;opacity:0;transition:opacity 0s .6s}@media (prefers-reduced-motion:reduce){.carousel-fade .active.carousel-item-end,.carousel-fade .active.carousel-item-start{transition:none}}.carousel-control-next,.carousel-control-prev{position:absolute;top:0;bottom:0;z-index:1;display:flex;align-items:center;justify-content:center;width:15%;padding:0;color:#fff;text-align:center;background:0 0;border:0;opacity:.5;transition:opacity .15s ease}@media (prefers-reduced-motion:reduce){.carousel-control-next,.carousel-control-prev{transition:none}}.carousel-control-next:focus,.carousel-control-next:hover,.carousel-control-prev:focus,.carousel-control-prev:hover{color:#fff;text-decoration:none;outline:0;opacity:.9}.carousel-control-prev{left:0}.carousel-control-next{right:0}.carousel-control-next-icon,.carousel-control-prev-icon{display:inline-block;width:2rem;height:2rem;background-repeat:no-repeat;background-position:50%;background-size:100% 100%}.carousel-control-prev-icon{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23fff'%3e%3cpath d='M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z'/%3e%3c/svg%3e")}.carousel-control-next-icon{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23fff'%3e%3cpath d='M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e")}.carousel-indicators{position:absolute;right:0;bottom:0;left:0;z-index:2;display:flex;justify-content:center;padding:0;margin-right:15%;margin-bottom:1rem;margin-left:15%}.carousel-indicators [data-bs-target]{box-sizing:content-box;flex:0 1 auto;width:30px;height:3px;padding:0;margin-right:3px;margin-left:3px;text-indent:-999px;cursor:pointer;background-color:#fff;background-clip:padding-box;border:0;border-top:10px solid transparent;border-bottom:10px solid transparent;opacity:.5;transition:opacity .6s ease}@media (prefers-reduced-motion:reduce){.carousel-indicators [data-bs-target]{transition:none}}.carousel-indicators .active{opacity:1}.carousel-caption{position:absolute;right:15%;bottom:1.25rem;left:15%;padding-top:1.25rem;padding-bottom:1.25rem;color:#fff;text-align:center}.carousel-dark .carousel-control-next-icon,.carousel-dark .carousel-control-prev-icon{filter:invert(1) grayscale(100)}.carousel-dark .carousel-indicators [data-bs-target]{background-color:#000}.carousel-dark .carousel-caption{color:#000}[data-bs-theme=dark] .carousel .carousel-control-next-icon,[data-bs-theme=dark] .carousel .carousel-control-prev-icon,[data-bs-theme=dark].carousel .carousel-control-next-icon,[data-bs-theme=dark].carousel .carousel-control-prev-icon{filter:invert(1) grayscale(100)}[data-bs-theme=dark] .carousel .carousel-indicators [data-bs-target],[data-bs-theme=dark].carousel .carousel-indicators [data-bs-target]{background-color:#000}[data-bs-theme=dark] .carousel .carousel-caption,[data-bs-theme=dark].carousel .carousel-caption{color:#000}.spinner-border,.spinner-grow{display:inline-block;width:var(--bs-spinner-width);height:var(--bs-spinner-height);vertical-align:var(--bs-spinner-vertical-align);border-radius:50%;animation:var(--bs-spinner-animation-speed) linear infinite var(--bs-spinner-animation-name)}@keyframes spinner-border{to{transform:rotate(360deg)}}.spinner-border{--bs-spinner-width:2rem;--bs-spinner-height:2rem;--bs-spinner-vertical-align:-0.125em;--bs-spinner-border-width:0.25em;--bs-spinner-animation-speed:0.75s;--bs-spinner-animation-name:spinner-border;border:var(--bs-spinner-border-width) solid currentcolor;border-right-color:transparent}.spinner-border-sm{--bs-spinner-width:1rem;--bs-spinner-height:1rem;--bs-spinner-border-width:0.2em}@keyframes spinner-grow{0%{transform:scale(0)}50%{opacity:1;transform:none}}.spinner-grow{--bs-spinner-width:2rem;--bs-spinner-height:2rem;--bs-spinner-vertical-align:-0.125em;--bs-spinner-animation-speed:0.75s;--bs-spinner-animation-name:spinner-grow;background-color:currentcolor;opacity:0}.spinner-grow-sm{--bs-spinner-width:1rem;--bs-spinner-height:1rem}@media (prefers-reduced-motion:reduce){.spinner-border,.spinner-grow{--bs-spinner-animation-speed:1.5s}}.offcanvas,.offcanvas-lg,.offcanvas-md,.offcanvas-sm,.offcanvas-xl,.offcanvas-xxl{--bs-offcanvas-zindex:1045;--bs-offcanvas-width:400px;--bs-offcanvas-height:30vh;--bs-offcanvas-padding-x:1rem;--bs-offcanvas-padding-y:1rem;--bs-offcanvas-color:var(--bs-body-color);--bs-offcanvas-bg:var(--bs-body-bg);--bs-offcanvas-border-width:var(--bs-border-width);--bs-offcanvas-border-color:var(--bs-border-color-translucent);--bs-offcanvas-box-shadow:0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);--bs-offcanvas-transition:transform 0.3s ease-in-out;--bs-offcanvas-title-line-height:1.5}@media (max-width:575.98px){.offcanvas-sm{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}}@media (max-width:575.98px) and (prefers-reduced-motion:reduce){.offcanvas-sm{transition:none}}@media (max-width:575.98px){.offcanvas-sm.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas-sm.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas-sm.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas-sm.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas-sm.show:not(.hiding),.offcanvas-sm.showing{transform:none}.offcanvas-sm.hiding,.offcanvas-sm.show,.offcanvas-sm.showing{visibility:visible}}@media (min-width:576px){.offcanvas-sm{--bs-offcanvas-height:auto;--bs-offcanvas-border-width:0;background-color:transparent!important}.offcanvas-sm .offcanvas-header{display:none}.offcanvas-sm .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:transparent!important}}@media (max-width:767.98px){.offcanvas-md{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}}@media (max-width:767.98px) and (prefers-reduced-motion:reduce){.offcanvas-md{transition:none}}@media (max-width:767.98px){.offcanvas-md.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas-md.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas-md.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas-md.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas-md.show:not(.hiding),.offcanvas-md.showing{transform:none}.offcanvas-md.hiding,.offcanvas-md.show,.offcanvas-md.showing{visibility:visible}}@media (min-width:768px){.offcanvas-md{--bs-offcanvas-height:auto;--bs-offcanvas-border-width:0;background-color:transparent!important}.offcanvas-md .offcanvas-header{display:none}.offcanvas-md .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:transparent!important}}@media (max-width:991.98px){.offcanvas-lg{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}}@media (max-width:991.98px) and (prefers-reduced-motion:reduce){.offcanvas-lg{transition:none}}@media (max-width:991.98px){.offcanvas-lg.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas-lg.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas-lg.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas-lg.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas-lg.show:not(.hiding),.offcanvas-lg.showing{transform:none}.offcanvas-lg.hiding,.offcanvas-lg.show,.offcanvas-lg.showing{visibility:visible}}@media (min-width:992px){.offcanvas-lg{--bs-offcanvas-height:auto;--bs-offcanvas-border-width:0;background-color:transparent!important}.offcanvas-lg .offcanvas-header{display:none}.offcanvas-lg .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:transparent!important}}@media (max-width:1199.98px){.offcanvas-xl{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}}@media (max-width:1199.98px) and (prefers-reduced-motion:reduce){.offcanvas-xl{transition:none}}@media (max-width:1199.98px){.offcanvas-xl.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas-xl.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas-xl.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas-xl.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas-xl.show:not(.hiding),.offcanvas-xl.showing{transform:none}.offcanvas-xl.hiding,.offcanvas-xl.show,.offcanvas-xl.showing{visibility:visible}}@media (min-width:1200px){.offcanvas-xl{--bs-offcanvas-height:auto;--bs-offcanvas-border-width:0;background-color:transparent!important}.offcanvas-xl .offcanvas-header{display:none}.offcanvas-xl .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:transparent!important}}@media (max-width:1399.98px){.offcanvas-xxl{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}}@media (max-width:1399.98px) and (prefers-reduced-motion:reduce){.offcanvas-xxl{transition:none}}@media (max-width:1399.98px){.offcanvas-xxl.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas-xxl.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas-xxl.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas-xxl.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas-xxl.show:not(.hiding),.offcanvas-xxl.showing{transform:none}.offcanvas-xxl.hiding,.offcanvas-xxl.show,.offcanvas-xxl.showing{visibility:visible}}@media (min-width:1400px){.offcanvas-xxl{--bs-offcanvas-height:auto;--bs-offcanvas-border-width:0;background-color:transparent!important}.offcanvas-xxl .offcanvas-header{display:none}.offcanvas-xxl .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:transparent!important}}.offcanvas{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}@media (prefers-reduced-motion:reduce){.offcanvas{transition:none}}.offcanvas.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas.show:not(.hiding),.offcanvas.showing{transform:none}.offcanvas.hiding,.offcanvas.show,.offcanvas.showing{visibility:visible}.offcanvas-backdrop{position:fixed;top:0;left:0;z-index:1040;width:100vw;height:100vh;background-color:#000}.offcanvas-backdrop.fade{opacity:0}.offcanvas-backdrop.show{opacity:.5}.offcanvas-header{display:flex;align-items:center;justify-content:space-between;padding:var(--bs-offcanvas-padding-y) var(--bs-offcanvas-padding-x)}.offcanvas-header .btn-close{padding:calc(var(--bs-offcanvas-padding-y) * .5) calc(var(--bs-offcanvas-padding-x) * .5);margin-top:calc(-.5 * var(--bs-offcanvas-padding-y));margin-right:calc(-.5 * var(--bs-offcanvas-padding-x));margin-bottom:calc(-.5 * var(--bs-offcanvas-padding-y))}.offcanvas-title{margin-bottom:0;line-height:var(--bs-offcanvas-title-line-height)}.offcanvas-body{flex-grow:1;padding:var(--bs-offcanvas-padding-y) var(--bs-offcanvas-padding-x);overflow-y:auto}.placeholder{display:inline-block;min-height:1em;vertical-align:middle;cursor:wait;background-color:currentcolor;opacity:.5}.placeholder.btn::before{display:inline-block;content:""}.placeholder-xs{min-height:.6em}.placeholder-sm{min-height:.8em}.placeholder-lg{min-height:1.2em}.placeholder-glow .placeholder{animation:placeholder-glow 2s ease-in-out infinite}@keyframes placeholder-glow{50%{opacity:.2}}.placeholder-wave{-webkit-mask-image:linear-gradient(130deg,#000 55%,rgba(0,0,0,0.8) 75%,#000 95%);mask-image:linear-gradient(130deg,#000 55%,rgba(0,0,0,0.8) 75%,#000 95%);-webkit-mask-size:200% 100%;mask-size:200% 100%;animation:placeholder-wave 2s linear infinite}@keyframes placeholder-wave{100%{-webkit-mask-position:-200% 0%;mask-position:-200% 0%}}.clearfix::after{display:block;clear:both;content:""}.text-bg-primary{color:#fff!important;background-color:RGBA(13,110,253,var(--bs-bg-opacity,1))!important}.text-bg-secondary{color:#fff!important;background-color:RGBA(108,117,125,var(--bs-bg-opacity,1))!important}.text-bg-success{color:#fff!important;background-color:RGBA(25,135,84,var(--bs-bg-opacity,1))!important}.text-bg-info{color:#000!important;background-color:RGBA(13,202,240,var(--bs-bg-opacity,1))!important}.text-bg-warning{color:#000!important;background-color:RGBA(255,193,7,var(--bs-bg-opacity,1))!important}.text-bg-danger{color:#fff!important;background-color:RGBA(220,53,69,var(--bs-bg-opacity,1))!important}.text-bg-light{color:#000!important;background-color:RGBA(248,249,250,var(--bs-bg-opacity,1))!important}.text-bg-dark{color:#fff!important;background-color:RGBA(33,37,41,var(--bs-bg-opacity,1))!important}.link-primary{color:RGBA(var(--bs-primary-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-primary-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-primary-rgb),var(--bs-link-underline-opacity,1))!important}.link-primary:focus,.link-primary:hover{color:RGBA(10,88,202,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(10,88,202,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(10,88,202,var(--bs-link-underline-opacity,1))!important}.link-secondary{color:RGBA(var(--bs-secondary-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-secondary-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-secondary-rgb),var(--bs-link-underline-opacity,1))!important}.link-secondary:focus,.link-secondary:hover{color:RGBA(86,94,100,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(86,94,100,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(86,94,100,var(--bs-link-underline-opacity,1))!important}.link-success{color:RGBA(var(--bs-success-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-success-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-success-rgb),var(--bs-link-underline-opacity,1))!important}.link-success:focus,.link-success:hover{color:RGBA(20,108,67,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(20,108,67,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(20,108,67,var(--bs-link-underline-opacity,1))!important}.link-info{color:RGBA(var(--bs-info-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-info-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-info-rgb),var(--bs-link-underline-opacity,1))!important}.link-info:focus,.link-info:hover{color:RGBA(61,213,243,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(61,213,243,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(61,213,243,var(--bs-link-underline-opacity,1))!important}.link-warning{color:RGBA(var(--bs-warning-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-warning-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-warning-rgb),var(--bs-link-underline-opacity,1))!important}.link-warning:focus,.link-warning:hover{color:RGBA(255,205,57,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(255,205,57,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(255,205,57,var(--bs-link-underline-opacity,1))!important}.link-danger{color:RGBA(var(--bs-danger-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-danger-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-danger-rgb),var(--bs-link-underline-opacity,1))!important}.link-danger:focus,.link-danger:hover{color:RGBA(176,42,55,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(176,42,55,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(176,42,55,var(--bs-link-underline-opacity,1))!important}.link-light{color:RGBA(var(--bs-light-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-light-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-light-rgb),var(--bs-link-underline-opacity,1))!important}.link-light:focus,.link-light:hover{color:RGBA(249,250,251,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(249,250,251,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(249,250,251,var(--bs-link-underline-opacity,1))!important}.link-dark{color:RGBA(var(--bs-dark-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-dark-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-dark-rgb),var(--bs-link-underline-opacity,1))!important}.link-dark:focus,.link-dark:hover{color:RGBA(26,30,33,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(26,30,33,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(26,30,33,var(--bs-link-underline-opacity,1))!important}.link-body-emphasis{color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-underline-opacity,1))!important}.link-body-emphasis:focus,.link-body-emphasis:hover{color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-opacity,.75))!important;-webkit-text-decoration-color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-underline-opacity,0.75))!important;text-decoration-color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-underline-opacity,0.75))!important}.focus-ring:focus{outline:0;box-shadow:var(--bs-focus-ring-x,0) var(--bs-focus-ring-y,0) var(--bs-focus-ring-blur,0) var(--bs-focus-ring-width) var(--bs-focus-ring-color)}.icon-link{display:inline-flex;gap:.375rem;align-items:center;-webkit-text-decoration-color:rgba(var(--bs-link-color-rgb),var(--bs-link-opacity,0.5));text-decoration-color:rgba(var(--bs-link-color-rgb),var(--bs-link-opacity,0.5));text-underline-offset:0.25em;-webkit-backface-visibility:hidden;backface-visibility:hidden}.icon-link>.bi{flex-shrink:0;width:1em;height:1em;fill:currentcolor;transition:.2s ease-in-out transform}@media (prefers-reduced-motion:reduce){.icon-link>.bi{transition:none}}.icon-link-hover:focus-visible>.bi,.icon-link-hover:hover>.bi{transform:var(--bs-icon-link-transform,translate3d(.25em,0,0))}.ratio{position:relative;width:100%}.ratio::before{display:block;padding-top:var(--bs-aspect-ratio);content:""}.ratio>*{position:absolute;top:0;left:0;width:100%;height:100%}.ratio-1x1{--bs-aspect-ratio:100%}.ratio-4x3{--bs-aspect-ratio:75%}.ratio-16x9{--bs-aspect-ratio:56.25%}.ratio-21x9{--bs-aspect-ratio:42.8571428571%}.fixed-top{position:fixed;top:0;right:0;left:0;z-index:1030}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.sticky-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}@media (min-width:576px){.sticky-sm-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-sm-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}@media (min-width:768px){.sticky-md-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-md-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}@media (min-width:992px){.sticky-lg-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-lg-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}@media (min-width:1200px){.sticky-xl-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-xl-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}@media (min-width:1400px){.sticky-xxl-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-xxl-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}.hstack{display:flex;flex-direction:row;align-items:center;align-self:stretch}.vstack{display:flex;flex:1 1 auto;flex-direction:column;align-self:stretch}.visually-hidden,.visually-hidden-focusable:not(:focus):not(:focus-within){width:1px!important;height:1px!important;padding:0!important;margin:-1px!important;overflow:hidden!important;clip:rect(0,0,0,0)!important;white-space:nowrap!important;border:0!important}.visually-hidden-focusable:not(:focus):not(:focus-within):not(caption),.visually-hidden:not(caption){position:absolute!important}.stretched-link::after{position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;content:""}.text-truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.vr{display:inline-block;align-self:stretch;width:1px;min-height:1em;background-color:currentcolor;opacity:.25}.align-baseline{vertical-align:baseline!important}.align-top{vertical-align:top!important}.align-middle{vertical-align:middle!important}.align-bottom{vertical-align:bottom!important}.align-text-bottom{vertical-align:text-bottom!important}.align-text-top{vertical-align:text-top!important}.float-start{float:left!important}.float-end{float:right!important}.float-none{float:none!important}.object-fit-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-none{-o-object-fit:none!important;object-fit:none!important}.opacity-0{opacity:0!important}.opacity-25{opacity:.25!important}.opacity-50{opacity:.5!important}.opacity-75{opacity:.75!important}.opacity-100{opacity:1!important}.overflow-auto{overflow:auto!important}.overflow-hidden{overflow:hidden!important}.overflow-visible{overflow:visible!important}.overflow-scroll{overflow:scroll!important}.overflow-x-auto{overflow-x:auto!important}.overflow-x-hidden{overflow-x:hidden!important}.overflow-x-visible{overflow-x:visible!important}.overflow-x-scroll{overflow-x:scroll!important}.overflow-y-auto{overflow-y:auto!important}.overflow-y-hidden{overflow-y:hidden!important}.overflow-y-visible{overflow-y:visible!important}.overflow-y-scroll{overflow-y:scroll!important}.d-inline{display:inline!important}.d-inline-block{display:inline-block!important}.d-block{display:block!important}.d-grid{display:grid!important}.d-inline-grid{display:inline-grid!important}.d-table{display:table!important}.d-table-row{display:table-row!important}.d-table-cell{display:table-cell!important}.d-flex{display:flex!important}.d-inline-flex{display:inline-flex!important}.d-none{display:none!important}.shadow{box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important}.shadow-sm{box-shadow:0 .125rem .25rem rgba(0,0,0,.075)!important}.shadow-lg{box-shadow:0 1rem 3rem rgba(0,0,0,.175)!important}.shadow-none{box-shadow:none!important}.focus-ring-primary{--bs-focus-ring-color:rgba(var(--bs-primary-rgb), var(--bs-focus-ring-opacity))}.focus-ring-secondary{--bs-focus-ring-color:rgba(var(--bs-secondary-rgb), var(--bs-focus-ring-opacity))}.focus-ring-success{--bs-focus-ring-color:rgba(var(--bs-success-rgb), var(--bs-focus-ring-opacity))}.focus-ring-info{--bs-focus-ring-color:rgba(var(--bs-info-rgb), var(--bs-focus-ring-opacity))}.focus-ring-warning{--bs-focus-ring-color:rgba(var(--bs-warning-rgb), var(--bs-focus-ring-opacity))}.focus-ring-danger{--bs-focus-ring-color:rgba(var(--bs-danger-rgb), var(--bs-focus-ring-opacity))}.focus-ring-light{--bs-focus-ring-color:rgba(var(--bs-light-rgb), var(--bs-focus-ring-opacity))}.focus-ring-dark{--bs-focus-ring-color:rgba(var(--bs-dark-rgb), var(--bs-focus-ring-opacity))}.position-static{position:static!important}.position-relative{position:relative!important}.position-absolute{position:absolute!important}.position-fixed{position:fixed!important}.position-sticky{position:-webkit-sticky!important;position:sticky!important}.top-0{top:0!important}.top-50{top:50%!important}.top-100{top:100%!important}.bottom-0{bottom:0!important}.bottom-50{bottom:50%!important}.bottom-100{bottom:100%!important}.start-0{left:0!important}.start-50{left:50%!important}.start-100{left:100%!important}.end-0{right:0!important}.end-50{right:50%!important}.end-100{right:100%!important}.translate-middle{transform:translate(-50%,-50%)!important}.translate-middle-x{transform:translateX(-50%)!important}.translate-middle-y{transform:translateY(-50%)!important}.border{border:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color)!important}.border-0{border:0!important}.border-top{border-top:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color)!important}.border-top-0{border-top:0!important}.border-end{border-right:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color)!important}.border-end-0{border-right:0!important}.border-bottom{border-bottom:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color)!important}.border-bottom-0{border-bottom:0!important}.border-start{border-left:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color)!important}.border-start-0{border-left:0!important}.border-primary{--bs-border-opacity:1;border-color:rgba(var(--bs-primary-rgb),var(--bs-border-opacity))!important}.border-secondary{--bs-border-opacity:1;border-color:rgba(var(--bs-secondary-rgb),var(--bs-border-opacity))!important}.border-success{--bs-border-opacity:1;border-color:rgba(var(--bs-success-rgb),var(--bs-border-opacity))!important}.border-info{--bs-border-opacity:1;border-color:rgba(var(--bs-info-rgb),var(--bs-border-opacity))!important}.border-warning{--bs-border-opacity:1;border-color:rgba(var(--bs-warning-rgb),var(--bs-border-opacity))!important}.border-danger{--bs-border-opacity:1;border-color:rgba(var(--bs-danger-rgb),var(--bs-border-opacity))!important}.border-light{--bs-border-opacity:1;border-color:rgba(var(--bs-light-rgb),var(--bs-border-opacity))!important}.border-dark{--bs-border-opacity:1;border-color:rgba(var(--bs-dark-rgb),var(--bs-border-opacity))!important}.border-black{--bs-border-opacity:1;border-color:rgba(var(--bs-black-rgb),var(--bs-border-opacity))!important}.border-white{--bs-border-opacity:1;border-color:rgba(var(--bs-white-rgb),var(--bs-border-opacity))!important}.border-primary-subtle{border-color:var(--bs-primary-border-subtle)!important}.border-secondary-subtle{border-color:var(--bs-secondary-border-subtle)!important}.border-success-subtle{border-color:var(--bs-success-border-subtle)!important}.border-info-subtle{border-color:var(--bs-info-border-subtle)!important}.border-warning-subtle{border-color:var(--bs-warning-border-subtle)!important}.border-danger-subtle{border-color:var(--bs-danger-border-subtle)!important}.border-light-subtle{border-color:var(--bs-light-border-subtle)!important}.border-dark-subtle{border-color:var(--bs-dark-border-subtle)!important}.border-1{border-width:1px!important}.border-2{border-width:2px!important}.border-3{border-width:3px!important}.border-4{border-width:4px!important}.border-5{border-width:5px!important}.border-opacity-10{--bs-border-opacity:0.1}.border-opacity-25{--bs-border-opacity:0.25}.border-opacity-50{--bs-border-opacity:0.5}.border-opacity-75{--bs-border-opacity:0.75}.border-opacity-100{--bs-border-opacity:1}.w-25{width:25%!important}.w-50{width:50%!important}.w-75{width:75%!important}.w-100{width:100%!important}.w-auto{width:auto!important}.mw-100{max-width:100%!important}.vw-100{width:100vw!important}.min-vw-100{min-width:100vw!important}.h-25{height:25%!important}.h-50{height:50%!important}.h-75{height:75%!important}.h-100{height:100%!important}.h-auto{height:auto!important}.mh-100{max-height:100%!important}.vh-100{height:100vh!important}.min-vh-100{min-height:100vh!important}.flex-fill{flex:1 1 auto!important}.flex-row{flex-direction:row!important}.flex-column{flex-direction:column!important}.flex-row-reverse{flex-direction:row-reverse!important}.flex-column-reverse{flex-direction:column-reverse!important}.flex-grow-0{flex-grow:0!important}.flex-grow-1{flex-grow:1!important}.flex-shrink-0{flex-shrink:0!important}.flex-shrink-1{flex-shrink:1!important}.flex-wrap{flex-wrap:wrap!important}.flex-nowrap{flex-wrap:nowrap!important}.flex-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-start{justify-content:flex-start!important}.justify-content-end{justify-content:flex-end!important}.justify-content-center{justify-content:center!important}.justify-content-between{justify-content:space-between!important}.justify-content-around{justify-content:space-around!important}.justify-content-evenly{justify-content:space-evenly!important}.align-items-start{align-items:flex-start!important}.align-items-end{align-items:flex-end!important}.align-items-center{align-items:center!important}.align-items-baseline{align-items:baseline!important}.align-items-stretch{align-items:stretch!important}.align-content-start{align-content:flex-start!important}.align-content-end{align-content:flex-end!important}.align-content-center{align-content:center!important}.align-content-between{align-content:space-between!important}.align-content-around{align-content:space-around!important}.align-content-stretch{align-content:stretch!important}.align-self-auto{align-self:auto!important}.align-self-start{align-self:flex-start!important}.align-self-end{align-self:flex-end!important}.align-self-center{align-self:center!important}.align-self-baseline{align-self:baseline!important}.align-self-stretch{align-self:stretch!important}.order-first{order:-1!important}.order-0{order:0!important}.order-1{order:1!important}.order-2{order:2!important}.order-3{order:3!important}.order-4{order:4!important}.order-5{order:5!important}.order-last{order:6!important}.m-0{margin:0!important}.m-1{margin:.25rem!important}.m-2{margin:.5rem!important}.m-3{margin:1rem!important}.m-4{margin:1.5rem!important}.m-5{margin:3rem!important}.m-auto{margin:auto!important}.mx-0{margin-right:0!important;margin-left:0!important}.mx-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-3{margin-right:1rem!important;margin-left:1rem!important}.mx-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-5{margin-right:3rem!important;margin-left:3rem!important}.mx-auto{margin-right:auto!important;margin-left:auto!important}.my-0{margin-top:0!important;margin-bottom:0!important}.my-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-0{margin-top:0!important}.mt-1{margin-top:.25rem!important}.mt-2{margin-top:.5rem!important}.mt-3{margin-top:1rem!important}.mt-4{margin-top:1.5rem!important}.mt-5{margin-top:3rem!important}.mt-auto{margin-top:auto!important}.me-0{margin-right:0!important}.me-1{margin-right:.25rem!important}.me-2{margin-right:.5rem!important}.me-3{margin-right:1rem!important}.me-4{margin-right:1.5rem!important}.me-5{margin-right:3rem!important}.me-auto{margin-right:auto!important}.mb-0{margin-bottom:0!important}.mb-1{margin-bottom:.25rem!important}.mb-2{margin-bottom:.5rem!important}.mb-3{margin-bottom:1rem!important}.mb-4{margin-bottom:1.5rem!important}.mb-5{margin-bottom:3rem!important}.mb-auto{margin-bottom:auto!important}.ms-0{margin-left:0!important}.ms-1{margin-left:.25rem!important}.ms-2{margin-left:.5rem!important}.ms-3{margin-left:1rem!important}.ms-4{margin-left:1.5rem!important}.ms-5{margin-left:3rem!important}.ms-auto{margin-left:auto!important}.p-0{padding:0!important}.p-1{padding:.25rem!important}.p-2{padding:.5rem!important}.p-3{padding:1rem!important}.p-4{padding:1.5rem!important}.p-5{padding:3rem!important}.px-0{padding-right:0!important;padding-left:0!important}.px-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-3{padding-right:1rem!important;padding-left:1rem!important}.px-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-5{padding-right:3rem!important;padding-left:3rem!important}.py-0{padding-top:0!important;padding-bottom:0!important}.py-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-0{padding-top:0!important}.pt-1{padding-top:.25rem!important}.pt-2{padding-top:.5rem!important}.pt-3{padding-top:1rem!important}.pt-4{padding-top:1.5rem!important}.pt-5{padding-top:3rem!important}.pe-0{padding-right:0!important}.pe-1{padding-right:.25rem!important}.pe-2{padding-right:.5rem!important}.pe-3{padding-right:1rem!important}.pe-4{padding-right:1.5rem!important}.pe-5{padding-right:3rem!important}.pb-0{padding-bottom:0!important}.pb-1{padding-bottom:.25rem!important}.pb-2{padding-bottom:.5rem!important}.pb-3{padding-bottom:1rem!important}.pb-4{padding-bottom:1.5rem!important}.pb-5{padding-bottom:3rem!important}.ps-0{padding-left:0!important}.ps-1{padding-left:.25rem!important}.ps-2{padding-left:.5rem!important}.ps-3{padding-left:1rem!important}.ps-4{padding-left:1.5rem!important}.ps-5{padding-left:3rem!important}.gap-0{gap:0!important}.gap-1{gap:.25rem!important}.gap-2{gap:.5rem!important}.gap-3{gap:1rem!important}.gap-4{gap:1.5rem!important}.gap-5{gap:3rem!important}.row-gap-0{row-gap:0!important}.row-gap-1{row-gap:.25rem!important}.row-gap-2{row-gap:.5rem!important}.row-gap-3{row-gap:1rem!important}.row-gap-4{row-gap:1.5rem!important}.row-gap-5{row-gap:3rem!important}.column-gap-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.font-monospace{font-family:var(--bs-font-monospace)!important}.fs-1{font-size:calc(1.375rem + 1.5vw)!important}.fs-2{font-size:calc(1.325rem + .9vw)!important}.fs-3{font-size:calc(1.3rem + .6vw)!important}.fs-4{font-size:calc(1.275rem + .3vw)!important}.fs-5{font-size:1.25rem!important}.fs-6{font-size:1rem!important}.fst-italic{font-style:italic!important}.fst-normal{font-style:normal!important}.fw-lighter{font-weight:lighter!important}.fw-light{font-weight:300!important}.fw-normal{font-weight:400!important}.fw-medium{font-weight:500!important}.fw-semibold{font-weight:600!important}.fw-bold{font-weight:700!important}.fw-bolder{font-weight:bolder!important}.lh-1{line-height:1!important}.lh-sm{line-height:1.25!important}.lh-base{line-height:1.5!important}.lh-lg{line-height:2!important}.text-start{text-align:left!important}.text-end{text-align:right!important}.text-center{text-align:center!important}.text-decoration-none{text-decoration:none!important}.text-decoration-underline{text-decoration:underline!important}.text-decoration-line-through{text-decoration:line-through!important}.text-lowercase{text-transform:lowercase!important}.text-uppercase{text-transform:uppercase!important}.text-capitalize{text-transform:capitalize!important}.text-wrap{white-space:normal!important}.text-nowrap{white-space:nowrap!important}.text-break{word-wrap:break-word!important;word-break:break-word!important}.text-primary{--bs-text-opacity:1;color:rgba(var(--bs-primary-rgb),var(--bs-text-opacity))!important}.text-secondary{--bs-text-opacity:1;color:rgba(var(--bs-secondary-rgb),var(--bs-text-opacity))!important}.text-success{--bs-text-opacity:1;color:rgba(var(--bs-success-rgb),var(--bs-text-opacity))!important}.text-info{--bs-text-opacity:1;color:rgba(var(--bs-info-rgb),var(--bs-text-opacity))!important}.text-warning{--bs-text-opacity:1;color:rgba(var(--bs-warning-rgb),var(--bs-text-opacity))!important}.text-danger{--bs-text-opacity:1;color:rgba(var(--bs-danger-rgb),var(--bs-text-opacity))!important}.text-light{--bs-text-opacity:1;color:rgba(var(--bs-light-rgb),var(--bs-text-opacity))!important}.text-dark{--bs-text-opacity:1;color:rgba(var(--bs-dark-rgb),var(--bs-text-opacity))!important}.text-black{--bs-text-opacity:1;color:rgba(var(--bs-black-rgb),var(--bs-text-opacity))!important}.text-white{--bs-text-opacity:1;color:rgba(var(--bs-white-rgb),var(--bs-text-opacity))!important}.text-body{--bs-text-opacity:1;color:rgba(var(--bs-body-color-rgb),var(--bs-text-opacity))!important}.text-muted{--bs-text-opacity:1;color:var(--bs-secondary-color)!important}.text-black-50{--bs-text-opacity:1;color:rgba(0,0,0,.5)!important}.text-white-50{--bs-text-opacity:1;color:rgba(255,255,255,.5)!important}.text-body-secondary{--bs-text-opacity:1;color:var(--bs-secondary-color)!important}.text-body-tertiary{--bs-text-opacity:1;color:var(--bs-tertiary-color)!important}.text-body-emphasis{--bs-text-opacity:1;color:var(--bs-emphasis-color)!important}.text-reset{--bs-text-opacity:1;color:inherit!important}.text-opacity-25{--bs-text-opacity:0.25}.text-opacity-50{--bs-text-opacity:0.5}.text-opacity-75{--bs-text-opacity:0.75}.text-opacity-100{--bs-text-opacity:1}.text-primary-emphasis{color:var(--bs-primary-text-emphasis)!important}.text-secondary-emphasis{color:var(--bs-secondary-text-emphasis)!important}.text-success-emphasis{color:var(--bs-success-text-emphasis)!important}.text-info-emphasis{color:var(--bs-info-text-emphasis)!important}.text-warning-emphasis{color:var(--bs-warning-text-emphasis)!important}.text-danger-emphasis{color:var(--bs-danger-text-emphasis)!important}.text-light-emphasis{color:var(--bs-light-text-emphasis)!important}.text-dark-emphasis{color:var(--bs-dark-text-emphasis)!important}.link-opacity-10{--bs-link-opacity:0.1}.link-opacity-10-hover:hover{--bs-link-opacity:0.1}.link-opacity-25{--bs-link-opacity:0.25}.link-opacity-25-hover:hover{--bs-link-opacity:0.25}.link-opacity-50{--bs-link-opacity:0.5}.link-opacity-50-hover:hover{--bs-link-opacity:0.5}.link-opacity-75{--bs-link-opacity:0.75}.link-opacity-75-hover:hover{--bs-link-opacity:0.75}.link-opacity-100{--bs-link-opacity:1}.link-opacity-100-hover:hover{--bs-link-opacity:1}.link-offset-1{text-underline-offset:0.125em!important}.link-offset-1-hover:hover{text-underline-offset:0.125em!important}.link-offset-2{text-underline-offset:0.25em!important}.link-offset-2-hover:hover{text-underline-offset:0.25em!important}.link-offset-3{text-underline-offset:0.375em!important}.link-offset-3-hover:hover{text-underline-offset:0.375em!important}.link-underline-primary{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-primary-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-primary-rgb),var(--bs-link-underline-opacity))!important}.link-underline-secondary{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-secondary-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-secondary-rgb),var(--bs-link-underline-opacity))!important}.link-underline-success{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-success-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-success-rgb),var(--bs-link-underline-opacity))!important}.link-underline-info{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-info-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-info-rgb),var(--bs-link-underline-opacity))!important}.link-underline-warning{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-warning-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-warning-rgb),var(--bs-link-underline-opacity))!important}.link-underline-danger{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-danger-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-danger-rgb),var(--bs-link-underline-opacity))!important}.link-underline-light{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-light-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-light-rgb),var(--bs-link-underline-opacity))!important}.link-underline-dark{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-dark-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-dark-rgb),var(--bs-link-underline-opacity))!important}.link-underline{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-link-color-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:rgba(var(--bs-link-color-rgb),var(--bs-link-underline-opacity,1))!important}.link-underline-opacity-0{--bs-link-underline-opacity:0}.link-underline-opacity-0-hover:hover{--bs-link-underline-opacity:0}.link-underline-opacity-10{--bs-link-underline-opacity:0.1}.link-underline-opacity-10-hover:hover{--bs-link-underline-opacity:0.1}.link-underline-opacity-25{--bs-link-underline-opacity:0.25}.link-underline-opacity-25-hover:hover{--bs-link-underline-opacity:0.25}.link-underline-opacity-50{--bs-link-underline-opacity:0.5}.link-underline-opacity-50-hover:hover{--bs-link-underline-opacity:0.5}.link-underline-opacity-75{--bs-link-underline-opacity:0.75}.link-underline-opacity-75-hover:hover{--bs-link-underline-opacity:0.75}.link-underline-opacity-100{--bs-link-underline-opacity:1}.link-underline-opacity-100-hover:hover{--bs-link-underline-opacity:1}.bg-primary{--bs-bg-opacity:1;background-color:rgba(var(--bs-primary-rgb),var(--bs-bg-opacity))!important}.bg-secondary{--bs-bg-opacity:1;background-color:rgba(var(--bs-secondary-rgb),var(--bs-bg-opacity))!important}.bg-success{--bs-bg-opacity:1;background-color:rgba(var(--bs-success-rgb),var(--bs-bg-opacity))!important}.bg-info{--bs-bg-opacity:1;background-color:rgba(var(--bs-info-rgb),var(--bs-bg-opacity))!important}.bg-warning{--bs-bg-opacity:1;background-color:rgba(var(--bs-warning-rgb),var(--bs-bg-opacity))!important}.bg-danger{--bs-bg-opacity:1;background-color:rgba(var(--bs-danger-rgb),var(--bs-bg-opacity))!important}.bg-light{--bs-bg-opacity:1;background-color:rgba(var(--bs-light-rgb),var(--bs-bg-opacity))!important}.bg-dark{--bs-bg-opacity:1;background-color:rgba(var(--bs-dark-rgb),var(--bs-bg-opacity))!important}.bg-black{--bs-bg-opacity:1;background-color:rgba(var(--bs-black-rgb),var(--bs-bg-opacity))!important}.bg-white{--bs-bg-opacity:1;background-color:rgba(var(--bs-white-rgb),var(--bs-bg-opacity))!important}.bg-body{--bs-bg-opacity:1;background-color:rgba(var(--bs-body-bg-rgb),var(--bs-bg-opacity))!important}.bg-transparent{--bs-bg-opacity:1;background-color:transparent!important}.bg-body-secondary{--bs-bg-opacity:1;background-color:rgba(var(--bs-secondary-bg-rgb),var(--bs-bg-opacity))!important}.bg-body-tertiary{--bs-bg-opacity:1;background-color:rgba(var(--bs-tertiary-bg-rgb),var(--bs-bg-opacity))!important}.bg-opacity-10{--bs-bg-opacity:0.1}.bg-opacity-25{--bs-bg-opacity:0.25}.bg-opacity-50{--bs-bg-opacity:0.5}.bg-opacity-75{--bs-bg-opacity:0.75}.bg-opacity-100{--bs-bg-opacity:1}.bg-primary-subtle{background-color:var(--bs-primary-bg-subtle)!important}.bg-secondary-subtle{background-color:var(--bs-secondary-bg-subtle)!important}.bg-success-subtle{background-color:var(--bs-success-bg-subtle)!important}.bg-info-subtle{background-color:var(--bs-info-bg-subtle)!important}.bg-warning-subtle{background-color:var(--bs-warning-bg-subtle)!important}.bg-danger-subtle{background-color:var(--bs-danger-bg-subtle)!important}.bg-light-subtle{background-color:var(--bs-light-bg-subtle)!important}.bg-dark-subtle{background-color:var(--bs-dark-bg-subtle)!important}.bg-gradient{background-image:var(--bs-gradient)!important}.user-select-all{-webkit-user-select:all!important;-moz-user-select:all!important;user-select:all!important}.user-select-auto{-webkit-user-select:auto!important;-moz-user-select:auto!important;user-select:auto!important}.user-select-none{-webkit-user-select:none!important;-moz-user-select:none!important;user-select:none!important}.pe-none{pointer-events:none!important}.pe-auto{pointer-events:auto!important}.rounded{border-radius:var(--bs-border-radius)!important}.rounded-0{border-radius:0!important}.rounded-1{border-radius:var(--bs-border-radius-sm)!important}.rounded-2{border-radius:var(--bs-border-radius)!important}.rounded-3{border-radius:var(--bs-border-radius-lg)!important}.rounded-4{border-radius:var(--bs-border-radius-xl)!important}.rounded-5{border-radius:var(--bs-border-radius-xxl)!important}.rounded-circle{border-radius:50%!important}.rounded-pill{border-radius:var(--bs-border-radius-pill)!important}.rounded-top{border-top-left-radius:var(--bs-border-radius)!important;border-top-right-radius:var(--bs-border-radius)!important}.rounded-top-0{border-top-left-radius:0!important;border-top-right-radius:0!important}.rounded-top-1{border-top-left-radius:var(--bs-border-radius-sm)!important;border-top-right-radius:var(--bs-border-radius-sm)!important}.rounded-top-2{border-top-left-radius:var(--bs-border-radius)!important;border-top-right-radius:var(--bs-border-radius)!important}.rounded-top-3{border-top-left-radius:var(--bs-border-radius-lg)!important;border-top-right-radius:var(--bs-border-radius-lg)!important}.rounded-top-4{border-top-left-radius:var(--bs-border-radius-xl)!important;border-top-right-radius:var(--bs-border-radius-xl)!important}.rounded-top-5{border-top-left-radius:var(--bs-border-radius-xxl)!important;border-top-right-radius:var(--bs-border-radius-xxl)!important}.rounded-top-circle{border-top-left-radius:50%!important;border-top-right-radius:50%!important}.rounded-top-pill{border-top-left-radius:var(--bs-border-radius-pill)!important;border-top-right-radius:var(--bs-border-radius-pill)!important}.rounded-end{border-top-right-radius:var(--bs-border-radius)!important;border-bottom-right-radius:var(--bs-border-radius)!important}.rounded-end-0{border-top-right-radius:0!important;border-bottom-right-radius:0!important}.rounded-end-1{border-top-right-radius:var(--bs-border-radius-sm)!important;border-bottom-right-radius:var(--bs-border-radius-sm)!important}.rounded-end-2{border-top-right-radius:var(--bs-border-radius)!important;border-bottom-right-radius:var(--bs-border-radius)!important}.rounded-end-3{border-top-right-radius:var(--bs-border-radius-lg)!important;border-bottom-right-radius:var(--bs-border-radius-lg)!important}.rounded-end-4{border-top-right-radius:var(--bs-border-radius-xl)!important;border-bottom-right-radius:var(--bs-border-radius-xl)!important}.rounded-end-5{border-top-right-radius:var(--bs-border-radius-xxl)!important;border-bottom-right-radius:var(--bs-border-radius-xxl)!important}.rounded-end-circle{border-top-right-radius:50%!important;border-bottom-right-radius:50%!important}.rounded-end-pill{border-top-right-radius:var(--bs-border-radius-pill)!important;border-bottom-right-radius:var(--bs-border-radius-pill)!important}.rounded-bottom{border-bottom-right-radius:var(--bs-border-radius)!important;border-bottom-left-radius:var(--bs-border-radius)!important}.rounded-bottom-0{border-bottom-right-radius:0!important;border-bottom-left-radius:0!important}.rounded-bottom-1{border-bottom-right-radius:var(--bs-border-radius-sm)!important;border-bottom-left-radius:var(--bs-border-radius-sm)!important}.rounded-bottom-2{border-bottom-right-radius:var(--bs-border-radius)!important;border-bottom-left-radius:var(--bs-border-radius)!important}.rounded-bottom-3{border-bottom-right-radius:var(--bs-border-radius-lg)!important;border-bottom-left-radius:var(--bs-border-radius-lg)!important}.rounded-bottom-4{border-bottom-right-radius:var(--bs-border-radius-xl)!important;border-bottom-left-radius:var(--bs-border-radius-xl)!important}.rounded-bottom-5{border-bottom-right-radius:var(--bs-border-radius-xxl)!important;border-bottom-left-radius:var(--bs-border-radius-xxl)!important}.rounded-bottom-circle{border-bottom-right-radius:50%!important;border-bottom-left-radius:50%!important}.rounded-bottom-pill{border-bottom-right-radius:var(--bs-border-radius-pill)!important;border-bottom-left-radius:var(--bs-border-radius-pill)!important}.rounded-start{border-bottom-left-radius:var(--bs-border-radius)!important;border-top-left-radius:var(--bs-border-radius)!important}.rounded-start-0{border-bottom-left-radius:0!important;border-top-left-radius:0!important}.rounded-start-1{border-bottom-left-radius:var(--bs-border-radius-sm)!important;border-top-left-radius:var(--bs-border-radius-sm)!important}.rounded-start-2{border-bottom-left-radius:var(--bs-border-radius)!important;border-top-left-radius:var(--bs-border-radius)!important}.rounded-start-3{border-bottom-left-radius:var(--bs-border-radius-lg)!important;border-top-left-radius:var(--bs-border-radius-lg)!important}.rounded-start-4{border-bottom-left-radius:var(--bs-border-radius-xl)!important;border-top-left-radius:var(--bs-border-radius-xl)!important}.rounded-start-5{border-bottom-left-radius:var(--bs-border-radius-xxl)!important;border-top-left-radius:var(--bs-border-radius-xxl)!important}.rounded-start-circle{border-bottom-left-radius:50%!important;border-top-left-radius:50%!important}.rounded-start-pill{border-bottom-left-radius:var(--bs-border-radius-pill)!important;border-top-left-radius:var(--bs-border-radius-pill)!important}.visible{visibility:visible!important}.invisible{visibility:hidden!important}.z-n1{z-index:-1!important}.z-0{z-index:0!important}.z-1{z-index:1!important}.z-2{z-index:2!important}.z-3{z-index:3!important}@media (min-width:576px){.float-sm-start{float:left!important}.float-sm-end{float:right!important}.float-sm-none{float:none!important}.object-fit-sm-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-sm-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-sm-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-sm-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-sm-none{-o-object-fit:none!important;object-fit:none!important}.d-sm-inline{display:inline!important}.d-sm-inline-block{display:inline-block!important}.d-sm-block{display:block!important}.d-sm-grid{display:grid!important}.d-sm-inline-grid{display:inline-grid!important}.d-sm-table{display:table!important}.d-sm-table-row{display:table-row!important}.d-sm-table-cell{display:table-cell!important}.d-sm-flex{display:flex!important}.d-sm-inline-flex{display:inline-flex!important}.d-sm-none{display:none!important}.flex-sm-fill{flex:1 1 auto!important}.flex-sm-row{flex-direction:row!important}.flex-sm-column{flex-direction:column!important}.flex-sm-row-reverse{flex-direction:row-reverse!important}.flex-sm-column-reverse{flex-direction:column-reverse!important}.flex-sm-grow-0{flex-grow:0!important}.flex-sm-grow-1{flex-grow:1!important}.flex-sm-shrink-0{flex-shrink:0!important}.flex-sm-shrink-1{flex-shrink:1!important}.flex-sm-wrap{flex-wrap:wrap!important}.flex-sm-nowrap{flex-wrap:nowrap!important}.flex-sm-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-sm-start{justify-content:flex-start!important}.justify-content-sm-end{justify-content:flex-end!important}.justify-content-sm-center{justify-content:center!important}.justify-content-sm-between{justify-content:space-between!important}.justify-content-sm-around{justify-content:space-around!important}.justify-content-sm-evenly{justify-content:space-evenly!important}.align-items-sm-start{align-items:flex-start!important}.align-items-sm-end{align-items:flex-end!important}.align-items-sm-center{align-items:center!important}.align-items-sm-baseline{align-items:baseline!important}.align-items-sm-stretch{align-items:stretch!important}.align-content-sm-start{align-content:flex-start!important}.align-content-sm-end{align-content:flex-end!important}.align-content-sm-center{align-content:center!important}.align-content-sm-between{align-content:space-between!important}.align-content-sm-around{align-content:space-around!important}.align-content-sm-stretch{align-content:stretch!important}.align-self-sm-auto{align-self:auto!important}.align-self-sm-start{align-self:flex-start!important}.align-self-sm-end{align-self:flex-end!important}.align-self-sm-center{align-self:center!important}.align-self-sm-baseline{align-self:baseline!important}.align-self-sm-stretch{align-self:stretch!important}.order-sm-first{order:-1!important}.order-sm-0{order:0!important}.order-sm-1{order:1!important}.order-sm-2{order:2!important}.order-sm-3{order:3!important}.order-sm-4{order:4!important}.order-sm-5{order:5!important}.order-sm-last{order:6!important}.m-sm-0{margin:0!important}.m-sm-1{margin:.25rem!important}.m-sm-2{margin:.5rem!important}.m-sm-3{margin:1rem!important}.m-sm-4{margin:1.5rem!important}.m-sm-5{margin:3rem!important}.m-sm-auto{margin:auto!important}.mx-sm-0{margin-right:0!important;margin-left:0!important}.mx-sm-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-sm-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-sm-3{margin-right:1rem!important;margin-left:1rem!important}.mx-sm-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-sm-5{margin-right:3rem!important;margin-left:3rem!important}.mx-sm-auto{margin-right:auto!important;margin-left:auto!important}.my-sm-0{margin-top:0!important;margin-bottom:0!important}.my-sm-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-sm-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-sm-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-sm-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-sm-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-sm-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-sm-0{margin-top:0!important}.mt-sm-1{margin-top:.25rem!important}.mt-sm-2{margin-top:.5rem!important}.mt-sm-3{margin-top:1rem!important}.mt-sm-4{margin-top:1.5rem!important}.mt-sm-5{margin-top:3rem!important}.mt-sm-auto{margin-top:auto!important}.me-sm-0{margin-right:0!important}.me-sm-1{margin-right:.25rem!important}.me-sm-2{margin-right:.5rem!important}.me-sm-3{margin-right:1rem!important}.me-sm-4{margin-right:1.5rem!important}.me-sm-5{margin-right:3rem!important}.me-sm-auto{margin-right:auto!important}.mb-sm-0{margin-bottom:0!important}.mb-sm-1{margin-bottom:.25rem!important}.mb-sm-2{margin-bottom:.5rem!important}.mb-sm-3{margin-bottom:1rem!important}.mb-sm-4{margin-bottom:1.5rem!important}.mb-sm-5{margin-bottom:3rem!important}.mb-sm-auto{margin-bottom:auto!important}.ms-sm-0{margin-left:0!important}.ms-sm-1{margin-left:.25rem!important}.ms-sm-2{margin-left:.5rem!important}.ms-sm-3{margin-left:1rem!important}.ms-sm-4{margin-left:1.5rem!important}.ms-sm-5{margin-left:3rem!important}.ms-sm-auto{margin-left:auto!important}.p-sm-0{padding:0!important}.p-sm-1{padding:.25rem!important}.p-sm-2{padding:.5rem!important}.p-sm-3{padding:1rem!important}.p-sm-4{padding:1.5rem!important}.p-sm-5{padding:3rem!important}.px-sm-0{padding-right:0!important;padding-left:0!important}.px-sm-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-sm-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-sm-3{padding-right:1rem!important;padding-left:1rem!important}.px-sm-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-sm-5{padding-right:3rem!important;padding-left:3rem!important}.py-sm-0{padding-top:0!important;padding-bottom:0!important}.py-sm-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-sm-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-sm-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-sm-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-sm-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-sm-0{padding-top:0!important}.pt-sm-1{padding-top:.25rem!important}.pt-sm-2{padding-top:.5rem!important}.pt-sm-3{padding-top:1rem!important}.pt-sm-4{padding-top:1.5rem!important}.pt-sm-5{padding-top:3rem!important}.pe-sm-0{padding-right:0!important}.pe-sm-1{padding-right:.25rem!important}.pe-sm-2{padding-right:.5rem!important}.pe-sm-3{padding-right:1rem!important}.pe-sm-4{padding-right:1.5rem!important}.pe-sm-5{padding-right:3rem!important}.pb-sm-0{padding-bottom:0!important}.pb-sm-1{padding-bottom:.25rem!important}.pb-sm-2{padding-bottom:.5rem!important}.pb-sm-3{padding-bottom:1rem!important}.pb-sm-4{padding-bottom:1.5rem!important}.pb-sm-5{padding-bottom:3rem!important}.ps-sm-0{padding-left:0!important}.ps-sm-1{padding-left:.25rem!important}.ps-sm-2{padding-left:.5rem!important}.ps-sm-3{padding-left:1rem!important}.ps-sm-4{padding-left:1.5rem!important}.ps-sm-5{padding-left:3rem!important}.gap-sm-0{gap:0!important}.gap-sm-1{gap:.25rem!important}.gap-sm-2{gap:.5rem!important}.gap-sm-3{gap:1rem!important}.gap-sm-4{gap:1.5rem!important}.gap-sm-5{gap:3rem!important}.row-gap-sm-0{row-gap:0!important}.row-gap-sm-1{row-gap:.25rem!important}.row-gap-sm-2{row-gap:.5rem!important}.row-gap-sm-3{row-gap:1rem!important}.row-gap-sm-4{row-gap:1.5rem!important}.row-gap-sm-5{row-gap:3rem!important}.column-gap-sm-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-sm-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-sm-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-sm-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-sm-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-sm-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.text-sm-start{text-align:left!important}.text-sm-end{text-align:right!important}.text-sm-center{text-align:center!important}}@media (min-width:768px){.float-md-start{float:left!important}.float-md-end{float:right!important}.float-md-none{float:none!important}.object-fit-md-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-md-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-md-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-md-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-md-none{-o-object-fit:none!important;object-fit:none!important}.d-md-inline{display:inline!important}.d-md-inline-block{display:inline-block!important}.d-md-block{display:block!important}.d-md-grid{display:grid!important}.d-md-inline-grid{display:inline-grid!important}.d-md-table{display:table!important}.d-md-table-row{display:table-row!important}.d-md-table-cell{display:table-cell!important}.d-md-flex{display:flex!important}.d-md-inline-flex{display:inline-flex!important}.d-md-none{display:none!important}.flex-md-fill{flex:1 1 auto!important}.flex-md-row{flex-direction:row!important}.flex-md-column{flex-direction:column!important}.flex-md-row-reverse{flex-direction:row-reverse!important}.flex-md-column-reverse{flex-direction:column-reverse!important}.flex-md-grow-0{flex-grow:0!important}.flex-md-grow-1{flex-grow:1!important}.flex-md-shrink-0{flex-shrink:0!important}.flex-md-shrink-1{flex-shrink:1!important}.flex-md-wrap{flex-wrap:wrap!important}.flex-md-nowrap{flex-wrap:nowrap!important}.flex-md-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-md-start{justify-content:flex-start!important}.justify-content-md-end{justify-content:flex-end!important}.justify-content-md-center{justify-content:center!important}.justify-content-md-between{justify-content:space-between!important}.justify-content-md-around{justify-content:space-around!important}.justify-content-md-evenly{justify-content:space-evenly!important}.align-items-md-start{align-items:flex-start!important}.align-items-md-end{align-items:flex-end!important}.align-items-md-center{align-items:center!important}.align-items-md-baseline{align-items:baseline!important}.align-items-md-stretch{align-items:stretch!important}.align-content-md-start{align-content:flex-start!important}.align-content-md-end{align-content:flex-end!important}.align-content-md-center{align-content:center!important}.align-content-md-between{align-content:space-between!important}.align-content-md-around{align-content:space-around!important}.align-content-md-stretch{align-content:stretch!important}.align-self-md-auto{align-self:auto!important}.align-self-md-start{align-self:flex-start!important}.align-self-md-end{align-self:flex-end!important}.align-self-md-center{align-self:center!important}.align-self-md-baseline{align-self:baseline!important}.align-self-md-stretch{align-self:stretch!important}.order-md-first{order:-1!important}.order-md-0{order:0!important}.order-md-1{order:1!important}.order-md-2{order:2!important}.order-md-3{order:3!important}.order-md-4{order:4!important}.order-md-5{order:5!important}.order-md-last{order:6!important}.m-md-0{margin:0!important}.m-md-1{margin:.25rem!important}.m-md-2{margin:.5rem!important}.m-md-3{margin:1rem!important}.m-md-4{margin:1.5rem!important}.m-md-5{margin:3rem!important}.m-md-auto{margin:auto!important}.mx-md-0{margin-right:0!important;margin-left:0!important}.mx-md-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-md-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-md-3{margin-right:1rem!important;margin-left:1rem!important}.mx-md-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-md-5{margin-right:3rem!important;margin-left:3rem!important}.mx-md-auto{margin-right:auto!important;margin-left:auto!important}.my-md-0{margin-top:0!important;margin-bottom:0!important}.my-md-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-md-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-md-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-md-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-md-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-md-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-md-0{margin-top:0!important}.mt-md-1{margin-top:.25rem!important}.mt-md-2{margin-top:.5rem!important}.mt-md-3{margin-top:1rem!important}.mt-md-4{margin-top:1.5rem!important}.mt-md-5{margin-top:3rem!important}.mt-md-auto{margin-top:auto!important}.me-md-0{margin-right:0!important}.me-md-1{margin-right:.25rem!important}.me-md-2{margin-right:.5rem!important}.me-md-3{margin-right:1rem!important}.me-md-4{margin-right:1.5rem!important}.me-md-5{margin-right:3rem!important}.me-md-auto{margin-right:auto!important}.mb-md-0{margin-bottom:0!important}.mb-md-1{margin-bottom:.25rem!important}.mb-md-2{margin-bottom:.5rem!important}.mb-md-3{margin-bottom:1rem!important}.mb-md-4{margin-bottom:1.5rem!important}.mb-md-5{margin-bottom:3rem!important}.mb-md-auto{margin-bottom:auto!important}.ms-md-0{margin-left:0!important}.ms-md-1{margin-left:.25rem!important}.ms-md-2{margin-left:.5rem!important}.ms-md-3{margin-left:1rem!important}.ms-md-4{margin-left:1.5rem!important}.ms-md-5{margin-left:3rem!important}.ms-md-auto{margin-left:auto!important}.p-md-0{padding:0!important}.p-md-1{padding:.25rem!important}.p-md-2{padding:.5rem!important}.p-md-3{padding:1rem!important}.p-md-4{padding:1.5rem!important}.p-md-5{padding:3rem!important}.px-md-0{padding-right:0!important;padding-left:0!important}.px-md-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-md-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-md-3{padding-right:1rem!important;padding-left:1rem!important}.px-md-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-md-5{padding-right:3rem!important;padding-left:3rem!important}.py-md-0{padding-top:0!important;padding-bottom:0!important}.py-md-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-md-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-md-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-md-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-md-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-md-0{padding-top:0!important}.pt-md-1{padding-top:.25rem!important}.pt-md-2{padding-top:.5rem!important}.pt-md-3{padding-top:1rem!important}.pt-md-4{padding-top:1.5rem!important}.pt-md-5{padding-top:3rem!important}.pe-md-0{padding-right:0!important}.pe-md-1{padding-right:.25rem!important}.pe-md-2{padding-right:.5rem!important}.pe-md-3{padding-right:1rem!important}.pe-md-4{padding-right:1.5rem!important}.pe-md-5{padding-right:3rem!important}.pb-md-0{padding-bottom:0!important}.pb-md-1{padding-bottom:.25rem!important}.pb-md-2{padding-bottom:.5rem!important}.pb-md-3{padding-bottom:1rem!important}.pb-md-4{padding-bottom:1.5rem!important}.pb-md-5{padding-bottom:3rem!important}.ps-md-0{padding-left:0!important}.ps-md-1{padding-left:.25rem!important}.ps-md-2{padding-left:.5rem!important}.ps-md-3{padding-left:1rem!important}.ps-md-4{padding-left:1.5rem!important}.ps-md-5{padding-left:3rem!important}.gap-md-0{gap:0!important}.gap-md-1{gap:.25rem!important}.gap-md-2{gap:.5rem!important}.gap-md-3{gap:1rem!important}.gap-md-4{gap:1.5rem!important}.gap-md-5{gap:3rem!important}.row-gap-md-0{row-gap:0!important}.row-gap-md-1{row-gap:.25rem!important}.row-gap-md-2{row-gap:.5rem!important}.row-gap-md-3{row-gap:1rem!important}.row-gap-md-4{row-gap:1.5rem!important}.row-gap-md-5{row-gap:3rem!important}.column-gap-md-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-md-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-md-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-md-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-md-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-md-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.text-md-start{text-align:left!important}.text-md-end{text-align:right!important}.text-md-center{text-align:center!important}}@media (min-width:992px){.float-lg-start{float:left!important}.float-lg-end{float:right!important}.float-lg-none{float:none!important}.object-fit-lg-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-lg-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-lg-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-lg-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-lg-none{-o-object-fit:none!important;object-fit:none!important}.d-lg-inline{display:inline!important}.d-lg-inline-block{display:inline-block!important}.d-lg-block{display:block!important}.d-lg-grid{display:grid!important}.d-lg-inline-grid{display:inline-grid!important}.d-lg-table{display:table!important}.d-lg-table-row{display:table-row!important}.d-lg-table-cell{display:table-cell!important}.d-lg-flex{display:flex!important}.d-lg-inline-flex{display:inline-flex!important}.d-lg-none{display:none!important}.flex-lg-fill{flex:1 1 auto!important}.flex-lg-row{flex-direction:row!important}.flex-lg-column{flex-direction:column!important}.flex-lg-row-reverse{flex-direction:row-reverse!important}.flex-lg-column-reverse{flex-direction:column-reverse!important}.flex-lg-grow-0{flex-grow:0!important}.flex-lg-grow-1{flex-grow:1!important}.flex-lg-shrink-0{flex-shrink:0!important}.flex-lg-shrink-1{flex-shrink:1!important}.flex-lg-wrap{flex-wrap:wrap!important}.flex-lg-nowrap{flex-wrap:nowrap!important}.flex-lg-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-lg-start{justify-content:flex-start!important}.justify-content-lg-end{justify-content:flex-end!important}.justify-content-lg-center{justify-content:center!important}.justify-content-lg-between{justify-content:space-between!important}.justify-content-lg-around{justify-content:space-around!important}.justify-content-lg-evenly{justify-content:space-evenly!important}.align-items-lg-start{align-items:flex-start!important}.align-items-lg-end{align-items:flex-end!important}.align-items-lg-center{align-items:center!important}.align-items-lg-baseline{align-items:baseline!important}.align-items-lg-stretch{align-items:stretch!important}.align-content-lg-start{align-content:flex-start!important}.align-content-lg-end{align-content:flex-end!important}.align-content-lg-center{align-content:center!important}.align-content-lg-between{align-content:space-between!important}.align-content-lg-around{align-content:space-around!important}.align-content-lg-stretch{align-content:stretch!important}.align-self-lg-auto{align-self:auto!important}.align-self-lg-start{align-self:flex-start!important}.align-self-lg-end{align-self:flex-end!important}.align-self-lg-center{align-self:center!important}.align-self-lg-baseline{align-self:baseline!important}.align-self-lg-stretch{align-self:stretch!important}.order-lg-first{order:-1!important}.order-lg-0{order:0!important}.order-lg-1{order:1!important}.order-lg-2{order:2!important}.order-lg-3{order:3!important}.order-lg-4{order:4!important}.order-lg-5{order:5!important}.order-lg-last{order:6!important}.m-lg-0{margin:0!important}.m-lg-1{margin:.25rem!important}.m-lg-2{margin:.5rem!important}.m-lg-3{margin:1rem!important}.m-lg-4{margin:1.5rem!important}.m-lg-5{margin:3rem!important}.m-lg-auto{margin:auto!important}.mx-lg-0{margin-right:0!important;margin-left:0!important}.mx-lg-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-lg-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-lg-3{margin-right:1rem!important;margin-left:1rem!important}.mx-lg-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-lg-5{margin-right:3rem!important;margin-left:3rem!important}.mx-lg-auto{margin-right:auto!important;margin-left:auto!important}.my-lg-0{margin-top:0!important;margin-bottom:0!important}.my-lg-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-lg-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-lg-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-lg-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-lg-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-lg-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-lg-0{margin-top:0!important}.mt-lg-1{margin-top:.25rem!important}.mt-lg-2{margin-top:.5rem!important}.mt-lg-3{margin-top:1rem!important}.mt-lg-4{margin-top:1.5rem!important}.mt-lg-5{margin-top:3rem!important}.mt-lg-auto{margin-top:auto!important}.me-lg-0{margin-right:0!important}.me-lg-1{margin-right:.25rem!important}.me-lg-2{margin-right:.5rem!important}.me-lg-3{margin-right:1rem!important}.me-lg-4{margin-right:1.5rem!important}.me-lg-5{margin-right:3rem!important}.me-lg-auto{margin-right:auto!important}.mb-lg-0{margin-bottom:0!important}.mb-lg-1{margin-bottom:.25rem!important}.mb-lg-2{margin-bottom:.5rem!important}.mb-lg-3{margin-bottom:1rem!important}.mb-lg-4{margin-bottom:1.5rem!important}.mb-lg-5{margin-bottom:3rem!important}.mb-lg-auto{margin-bottom:auto!important}.ms-lg-0{margin-left:0!important}.ms-lg-1{margin-left:.25rem!important}.ms-lg-2{margin-left:.5rem!important}.ms-lg-3{margin-left:1rem!important}.ms-lg-4{margin-left:1.5rem!important}.ms-lg-5{margin-left:3rem!important}.ms-lg-auto{margin-left:auto!important}.p-lg-0{padding:0!important}.p-lg-1{padding:.25rem!important}.p-lg-2{padding:.5rem!important}.p-lg-3{padding:1rem!important}.p-lg-4{padding:1.5rem!important}.p-lg-5{padding:3rem!important}.px-lg-0{padding-right:0!important;padding-left:0!important}.px-lg-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-lg-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-lg-3{padding-right:1rem!important;padding-left:1rem!important}.px-lg-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-lg-5{padding-right:3rem!important;padding-left:3rem!important}.py-lg-0{padding-top:0!important;padding-bottom:0!important}.py-lg-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-lg-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-lg-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-lg-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-lg-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-lg-0{padding-top:0!important}.pt-lg-1{padding-top:.25rem!important}.pt-lg-2{padding-top:.5rem!important}.pt-lg-3{padding-top:1rem!important}.pt-lg-4{padding-top:1.5rem!important}.pt-lg-5{padding-top:3rem!important}.pe-lg-0{padding-right:0!important}.pe-lg-1{padding-right:.25rem!important}.pe-lg-2{padding-right:.5rem!important}.pe-lg-3{padding-right:1rem!important}.pe-lg-4{padding-right:1.5rem!important}.pe-lg-5{padding-right:3rem!important}.pb-lg-0{padding-bottom:0!important}.pb-lg-1{padding-bottom:.25rem!important}.pb-lg-2{padding-bottom:.5rem!important}.pb-lg-3{padding-bottom:1rem!important}.pb-lg-4{padding-bottom:1.5rem!important}.pb-lg-5{padding-bottom:3rem!important}.ps-lg-0{padding-left:0!important}.ps-lg-1{padding-left:.25rem!important}.ps-lg-2{padding-left:.5rem!important}.ps-lg-3{padding-left:1rem!important}.ps-lg-4{padding-left:1.5rem!important}.ps-lg-5{padding-left:3rem!important}.gap-lg-0{gap:0!important}.gap-lg-1{gap:.25rem!important}.gap-lg-2{gap:.5rem!important}.gap-lg-3{gap:1rem!important}.gap-lg-4{gap:1.5rem!important}.gap-lg-5{gap:3rem!important}.row-gap-lg-0{row-gap:0!important}.row-gap-lg-1{row-gap:.25rem!important}.row-gap-lg-2{row-gap:.5rem!important}.row-gap-lg-3{row-gap:1rem!important}.row-gap-lg-4{row-gap:1.5rem!important}.row-gap-lg-5{row-gap:3rem!important}.column-gap-lg-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-lg-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-lg-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-lg-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-lg-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-lg-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.text-lg-start{text-align:left!important}.text-lg-end{text-align:right!important}.text-lg-center{text-align:center!important}}@media (min-width:1200px){.float-xl-start{float:left!important}.float-xl-end{float:right!important}.float-xl-none{float:none!important}.object-fit-xl-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-xl-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-xl-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-xl-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-xl-none{-o-object-fit:none!important;object-fit:none!important}.d-xl-inline{display:inline!important}.d-xl-inline-block{display:inline-block!important}.d-xl-block{display:block!important}.d-xl-grid{display:grid!important}.d-xl-inline-grid{display:inline-grid!important}.d-xl-table{display:table!important}.d-xl-table-row{display:table-row!important}.d-xl-table-cell{display:table-cell!important}.d-xl-flex{display:flex!important}.d-xl-inline-flex{display:inline-flex!important}.d-xl-none{display:none!important}.flex-xl-fill{flex:1 1 auto!important}.flex-xl-row{flex-direction:row!important}.flex-xl-column{flex-direction:column!important}.flex-xl-row-reverse{flex-direction:row-reverse!important}.flex-xl-column-reverse{flex-direction:column-reverse!important}.flex-xl-grow-0{flex-grow:0!important}.flex-xl-grow-1{flex-grow:1!important}.flex-xl-shrink-0{flex-shrink:0!important}.flex-xl-shrink-1{flex-shrink:1!important}.flex-xl-wrap{flex-wrap:wrap!important}.flex-xl-nowrap{flex-wrap:nowrap!important}.flex-xl-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-xl-start{justify-content:flex-start!important}.justify-content-xl-end{justify-content:flex-end!important}.justify-content-xl-center{justify-content:center!important}.justify-content-xl-between{justify-content:space-between!important}.justify-content-xl-around{justify-content:space-around!important}.justify-content-xl-evenly{justify-content:space-evenly!important}.align-items-xl-start{align-items:flex-start!important}.align-items-xl-end{align-items:flex-end!important}.align-items-xl-center{align-items:center!important}.align-items-xl-baseline{align-items:baseline!important}.align-items-xl-stretch{align-items:stretch!important}.align-content-xl-start{align-content:flex-start!important}.align-content-xl-end{align-content:flex-end!important}.align-content-xl-center{align-content:center!important}.align-content-xl-between{align-content:space-between!important}.align-content-xl-around{align-content:space-around!important}.align-content-xl-stretch{align-content:stretch!important}.align-self-xl-auto{align-self:auto!important}.align-self-xl-start{align-self:flex-start!important}.align-self-xl-end{align-self:flex-end!important}.align-self-xl-center{align-self:center!important}.align-self-xl-baseline{align-self:baseline!important}.align-self-xl-stretch{align-self:stretch!important}.order-xl-first{order:-1!important}.order-xl-0{order:0!important}.order-xl-1{order:1!important}.order-xl-2{order:2!important}.order-xl-3{order:3!important}.order-xl-4{order:4!important}.order-xl-5{order:5!important}.order-xl-last{order:6!important}.m-xl-0{margin:0!important}.m-xl-1{margin:.25rem!important}.m-xl-2{margin:.5rem!important}.m-xl-3{margin:1rem!important}.m-xl-4{margin:1.5rem!important}.m-xl-5{margin:3rem!important}.m-xl-auto{margin:auto!important}.mx-xl-0{margin-right:0!important;margin-left:0!important}.mx-xl-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-xl-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-xl-3{margin-right:1rem!important;margin-left:1rem!important}.mx-xl-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-xl-5{margin-right:3rem!important;margin-left:3rem!important}.mx-xl-auto{margin-right:auto!important;margin-left:auto!important}.my-xl-0{margin-top:0!important;margin-bottom:0!important}.my-xl-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-xl-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-xl-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-xl-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-xl-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-xl-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-xl-0{margin-top:0!important}.mt-xl-1{margin-top:.25rem!important}.mt-xl-2{margin-top:.5rem!important}.mt-xl-3{margin-top:1rem!important}.mt-xl-4{margin-top:1.5rem!important}.mt-xl-5{margin-top:3rem!important}.mt-xl-auto{margin-top:auto!important}.me-xl-0{margin-right:0!important}.me-xl-1{margin-right:.25rem!important}.me-xl-2{margin-right:.5rem!important}.me-xl-3{margin-right:1rem!important}.me-xl-4{margin-right:1.5rem!important}.me-xl-5{margin-right:3rem!important}.me-xl-auto{margin-right:auto!important}.mb-xl-0{margin-bottom:0!important}.mb-xl-1{margin-bottom:.25rem!important}.mb-xl-2{margin-bottom:.5rem!important}.mb-xl-3{margin-bottom:1rem!important}.mb-xl-4{margin-bottom:1.5rem!important}.mb-xl-5{margin-bottom:3rem!important}.mb-xl-auto{margin-bottom:auto!important}.ms-xl-0{margin-left:0!important}.ms-xl-1{margin-left:.25rem!important}.ms-xl-2{margin-left:.5rem!important}.ms-xl-3{margin-left:1rem!important}.ms-xl-4{margin-left:1.5rem!important}.ms-xl-5{margin-left:3rem!important}.ms-xl-auto{margin-left:auto!important}.p-xl-0{padding:0!important}.p-xl-1{padding:.25rem!important}.p-xl-2{padding:.5rem!important}.p-xl-3{padding:1rem!important}.p-xl-4{padding:1.5rem!important}.p-xl-5{padding:3rem!important}.px-xl-0{padding-right:0!important;padding-left:0!important}.px-xl-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-xl-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-xl-3{padding-right:1rem!important;padding-left:1rem!important}.px-xl-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-xl-5{padding-right:3rem!important;padding-left:3rem!important}.py-xl-0{padding-top:0!important;padding-bottom:0!important}.py-xl-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-xl-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-xl-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-xl-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-xl-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-xl-0{padding-top:0!important}.pt-xl-1{padding-top:.25rem!important}.pt-xl-2{padding-top:.5rem!important}.pt-xl-3{padding-top:1rem!important}.pt-xl-4{padding-top:1.5rem!important}.pt-xl-5{padding-top:3rem!important}.pe-xl-0{padding-right:0!important}.pe-xl-1{padding-right:.25rem!important}.pe-xl-2{padding-right:.5rem!important}.pe-xl-3{padding-right:1rem!important}.pe-xl-4{padding-right:1.5rem!important}.pe-xl-5{padding-right:3rem!important}.pb-xl-0{padding-bottom:0!important}.pb-xl-1{padding-bottom:.25rem!important}.pb-xl-2{padding-bottom:.5rem!important}.pb-xl-3{padding-bottom:1rem!important}.pb-xl-4{padding-bottom:1.5rem!important}.pb-xl-5{padding-bottom:3rem!important}.ps-xl-0{padding-left:0!important}.ps-xl-1{padding-left:.25rem!important}.ps-xl-2{padding-left:.5rem!important}.ps-xl-3{padding-left:1rem!important}.ps-xl-4{padding-left:1.5rem!important}.ps-xl-5{padding-left:3rem!important}.gap-xl-0{gap:0!important}.gap-xl-1{gap:.25rem!important}.gap-xl-2{gap:.5rem!important}.gap-xl-3{gap:1rem!important}.gap-xl-4{gap:1.5rem!important}.gap-xl-5{gap:3rem!important}.row-gap-xl-0{row-gap:0!important}.row-gap-xl-1{row-gap:.25rem!important}.row-gap-xl-2{row-gap:.5rem!important}.row-gap-xl-3{row-gap:1rem!important}.row-gap-xl-4{row-gap:1.5rem!important}.row-gap-xl-5{row-gap:3rem!important}.column-gap-xl-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-xl-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-xl-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-xl-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-xl-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-xl-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.text-xl-start{text-align:left!important}.text-xl-end{text-align:right!important}.text-xl-center{text-align:center!important}}@media (min-width:1400px){.float-xxl-start{float:left!important}.float-xxl-end{float:right!important}.float-xxl-none{float:none!important}.object-fit-xxl-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-xxl-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-xxl-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-xxl-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-xxl-none{-o-object-fit:none!important;object-fit:none!important}.d-xxl-inline{display:inline!important}.d-xxl-inline-block{display:inline-block!important}.d-xxl-block{display:block!important}.d-xxl-grid{display:grid!important}.d-xxl-inline-grid{display:inline-grid!important}.d-xxl-table{display:table!important}.d-xxl-table-row{display:table-row!important}.d-xxl-table-cell{display:table-cell!important}.d-xxl-flex{display:flex!important}.d-xxl-inline-flex{display:inline-flex!important}.d-xxl-none{display:none!important}.flex-xxl-fill{flex:1 1 auto!important}.flex-xxl-row{flex-direction:row!important}.flex-xxl-column{flex-direction:column!important}.flex-xxl-row-reverse{flex-direction:row-reverse!important}.flex-xxl-column-reverse{flex-direction:column-reverse!important}.flex-xxl-grow-0{flex-grow:0!important}.flex-xxl-grow-1{flex-grow:1!important}.flex-xxl-shrink-0{flex-shrink:0!important}.flex-xxl-shrink-1{flex-shrink:1!important}.flex-xxl-wrap{flex-wrap:wrap!important}.flex-xxl-nowrap{flex-wrap:nowrap!important}.flex-xxl-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-xxl-start{justify-content:flex-start!important}.justify-content-xxl-end{justify-content:flex-end!important}.justify-content-xxl-center{justify-content:center!important}.justify-content-xxl-between{justify-content:space-between!important}.justify-content-xxl-around{justify-content:space-around!important}.justify-content-xxl-evenly{justify-content:space-evenly!important}.align-items-xxl-start{align-items:flex-start!important}.align-items-xxl-end{align-items:flex-end!important}.align-items-xxl-center{align-items:center!important}.align-items-xxl-baseline{align-items:baseline!important}.align-items-xxl-stretch{align-items:stretch!important}.align-content-xxl-start{align-content:flex-start!important}.align-content-xxl-end{align-content:flex-end!important}.align-content-xxl-center{align-content:center!important}.align-content-xxl-between{align-content:space-between!important}.align-content-xxl-around{align-content:space-around!important}.align-content-xxl-stretch{align-content:stretch!important}.align-self-xxl-auto{align-self:auto!important}.align-self-xxl-start{align-self:flex-start!important}.align-self-xxl-end{align-self:flex-end!important}.align-self-xxl-center{align-self:center!important}.align-self-xxl-baseline{align-self:baseline!important}.align-self-xxl-stretch{align-self:stretch!important}.order-xxl-first{order:-1!important}.order-xxl-0{order:0!important}.order-xxl-1{order:1!important}.order-xxl-2{order:2!important}.order-xxl-3{order:3!important}.order-xxl-4{order:4!important}.order-xxl-5{order:5!important}.order-xxl-last{order:6!important}.m-xxl-0{margin:0!important}.m-xxl-1{margin:.25rem!important}.m-xxl-2{margin:.5rem!important}.m-xxl-3{margin:1rem!important}.m-xxl-4{margin:1.5rem!important}.m-xxl-5{margin:3rem!important}.m-xxl-auto{margin:auto!important}.mx-xxl-0{margin-right:0!important;margin-left:0!important}.mx-xxl-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-xxl-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-xxl-3{margin-right:1rem!important;margin-left:1rem!important}.mx-xxl-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-xxl-5{margin-right:3rem!important;margin-left:3rem!important}.mx-xxl-auto{margin-right:auto!important;margin-left:auto!important}.my-xxl-0{margin-top:0!important;margin-bottom:0!important}.my-xxl-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-xxl-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-xxl-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-xxl-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-xxl-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-xxl-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-xxl-0{margin-top:0!important}.mt-xxl-1{margin-top:.25rem!important}.mt-xxl-2{margin-top:.5rem!important}.mt-xxl-3{margin-top:1rem!important}.mt-xxl-4{margin-top:1.5rem!important}.mt-xxl-5{margin-top:3rem!important}.mt-xxl-auto{margin-top:auto!important}.me-xxl-0{margin-right:0!important}.me-xxl-1{margin-right:.25rem!important}.me-xxl-2{margin-right:.5rem!important}.me-xxl-3{margin-right:1rem!important}.me-xxl-4{margin-right:1.5rem!important}.me-xxl-5{margin-right:3rem!important}.me-xxl-auto{margin-right:auto!important}.mb-xxl-0{margin-bottom:0!important}.mb-xxl-1{margin-bottom:.25rem!important}.mb-xxl-2{margin-bottom:.5rem!important}.mb-xxl-3{margin-bottom:1rem!important}.mb-xxl-4{margin-bottom:1.5rem!important}.mb-xxl-5{margin-bottom:3rem!important}.mb-xxl-auto{margin-bottom:auto!important}.ms-xxl-0{margin-left:0!important}.ms-xxl-1{margin-left:.25rem!important}.ms-xxl-2{margin-left:.5rem!important}.ms-xxl-3{margin-left:1rem!important}.ms-xxl-4{margin-left:1.5rem!important}.ms-xxl-5{margin-left:3rem!important}.ms-xxl-auto{margin-left:auto!important}.p-xxl-0{padding:0!important}.p-xxl-1{padding:.25rem!important}.p-xxl-2{padding:.5rem!important}.p-xxl-3{padding:1rem!important}.p-xxl-4{padding:1.5rem!important}.p-xxl-5{padding:3rem!important}.px-xxl-0{padding-right:0!important;padding-left:0!important}.px-xxl-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-xxl-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-xxl-3{padding-right:1rem!important;padding-left:1rem!important}.px-xxl-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-xxl-5{padding-right:3rem!important;padding-left:3rem!important}.py-xxl-0{padding-top:0!important;padding-bottom:0!important}.py-xxl-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-xxl-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-xxl-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-xxl-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-xxl-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-xxl-0{padding-top:0!important}.pt-xxl-1{padding-top:.25rem!important}.pt-xxl-2{padding-top:.5rem!important}.pt-xxl-3{padding-top:1rem!important}.pt-xxl-4{padding-top:1.5rem!important}.pt-xxl-5{padding-top:3rem!important}.pe-xxl-0{padding-right:0!important}.pe-xxl-1{padding-right:.25rem!important}.pe-xxl-2{padding-right:.5rem!important}.pe-xxl-3{padding-right:1rem!important}.pe-xxl-4{padding-right:1.5rem!important}.pe-xxl-5{padding-right:3rem!important}.pb-xxl-0{padding-bottom:0!important}.pb-xxl-1{padding-bottom:.25rem!important}.pb-xxl-2{padding-bottom:.5rem!important}.pb-xxl-3{padding-bottom:1rem!important}.pb-xxl-4{padding-bottom:1.5rem!important}.pb-xxl-5{padding-bottom:3rem!important}.ps-xxl-0{padding-left:0!important}.ps-xxl-1{padding-left:.25rem!important}.ps-xxl-2{padding-left:.5rem!important}.ps-xxl-3{padding-left:1rem!important}.ps-xxl-4{padding-left:1.5rem!important}.ps-xxl-5{padding-left:3rem!important}.gap-xxl-0{gap:0!important}.gap-xxl-1{gap:.25rem!important}.gap-xxl-2{gap:.5rem!important}.gap-xxl-3{gap:1rem!important}.gap-xxl-4{gap:1.5rem!important}.gap-xxl-5{gap:3rem!important}.row-gap-xxl-0{row-gap:0!important}.row-gap-xxl-1{row-gap:.25rem!important}.row-gap-xxl-2{row-gap:.5rem!important}.row-gap-xxl-3{row-gap:1rem!important}.row-gap-xxl-4{row-gap:1.5rem!important}.row-gap-xxl-5{row-gap:3rem!important}.column-gap-xxl-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-xxl-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-xxl-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-xxl-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-xxl-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-xxl-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.text-xxl-start{text-align:left!important}.text-xxl-end{text-align:right!important}.text-xxl-center{text-align:center!important}}@media (min-width:1200px){.fs-1{font-size:2.5rem!important}.fs-2{font-size:2rem!important}.fs-3{font-size:1.75rem!important}.fs-4{font-size:1.5rem!important}}@media print{.d-print-inline{display:inline!important}.d-print-inline-block{display:inline-block!important}.d-print-block{display:block!important}.d-print-grid{display:grid!important}.d-print-inline-grid{display:inline-grid!important}.d-print-table{display:table!important}.d-print-table-row{display:table-row!important}.d-print-table-cell{display:table-cell!important}.d-print-flex{display:flex!important}.d-print-inline-flex{display:inline-flex!important}.d-print-none{display:none!important}}
/*# sourceMappingURL=bootstrap.min.css.map */
--- END OF FILE static/css/bootstrap.min.css ---

--- START OF FILE static/css/style.css ---

/* =================================================================
   1. FONDATIONS : VARIABLES, RESET & TYPOGRAPHIE
   ================================================================= */
:root {
  --couleur-principale: #1f3b73;
  --couleur-secondaire: #01257d;
  --couleur-accent: #a7d3f2;
  --texte-principal: #2c3e50;
  --texte-inverse: #ffffff;
  --texte-lien: var(--couleur-principale);
  --texte-discret: #6c7a89;
  --fond-page: #f8f9fa;
  --fond-element: #ffffff;
  --couleur-succes: #28a745;
  --couleur-erreur: #dc3545;
  --couleur-avertissement: #ffc107;
  --couleur-bordure: #dee2e6;
  --ombre-legere: 0 1px 3px rgba(0, 0, 0, 0.05);
  --ombre-moyenne: 0 4px 12px rgba(0, 0, 0, 0.1);
}

*, *::before, *::after { box-sizing: border-box; }

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  background-color: var(--fond-page);
  color: var(--texte-principal);
}

a {
  color: var(--texte-lien);
  text-decoration: none;
}

/* =================================================================
   2. MISE EN PAGE GLOBALE
   ================================================================= */
.main-content {
    padding: 2rem;
    max-width: 1600px;
    margin: 0 auto;
}

/* =================================================================
   3. HEADER & NAVIGATION
   ================================================================= */

.app-header {
  background-color: var(--couleur-principale);
  padding: 0.75rem 2rem;
}
.header-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
}
.header-brand a { text-decoration: none; }
.header-brand h1 { margin: 0; font-size: 1.5rem; color: var(--texte-inverse); }
.brand-subtitle {
    margin-top: 2px;
    font-size: 0.8rem;
    opacity: 0.7;
    color: var(--texte-inverse);
}
.header-right { display: flex; align-items: center; gap: 1.25rem; }

/* ==========================
   DROPDOWN EXPANDABLE SEARCH
   ========================== */
.search-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    background: rgba(255, 255, 255, 0.08);
    border: 2px solid transparent;
    border-radius: 14px;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    /* CORRECTION CRITIQUE : On autorise le d√©passement pour voir le menu */
    overflow: visible !important; 
    z-index: 1000;
}

.search-wrapper.focused {
    background: rgba(255, 255, 255, 0.12);
    border-color: rgba(138, 155, 191, 0.5);
    box-shadow: 0 8px 32px rgba(31, 59, 115, 0.3);
}

/* L'ic√¥ne loupe */
.search-icon-dropdown {
    position: absolute;
    left: 1.1rem;
    width: 20px;
    height: 20px;
    fill: #8a9bbf;
    transition: all 0.3s ease;
    z-index: 1002; /* Au-dessus de l'input */
    pointer-events: none; /* Laisse passer le clic vers l'input */
}

.search-wrapper.focused .search-icon-dropdown {
    fill: rgba(255, 255, 255, 0.9);
    transform: scale(1.1);
}

/* L'input */
.search-input-dropdown {
    padding: 0.75rem 3rem 0.75rem 3.2rem;
    border: none;
    background: transparent;
    color: white;
    font-size: 15px;
    width: 0;
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    outline: none;
}

.search-input-dropdown.expanded {
    width: 320px;
    opacity: 1;
}

.search-input-dropdown::placeholder {
    color: rgba(255, 255, 255, 0.5);
}

/* Bouton croix */
.search-clear-btn {
    position: absolute;
    right: 1rem;
    width: 24px;
    height: 24px;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none; /* G√©r√© par JS */
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    z-index: 1002;
}

.search-clear-btn.visible {
    display: flex;
}

.search-clear-btn:hover {
    background: rgba(255, 255, 255, 0.2);
}

.search-clear-btn svg {
    width: 14px;
    height: 14px;
    fill: rgba(255, 255, 255, 0.7);
}

/* --- LE MENU D√âROULANT (CORRIG√â) --- */
.dropdown-results {
    position: absolute;
    top: calc(100% + 10px); /* Un peu d'espace sous la barre */
    left: 0;
    width: 100%; /* M√™me largeur que la barre */
    min-width: 300px; /* Largeur minimum pour √™tre lisible */
    
    /* Style visuel solide pour √™tre bien visible */
    background-color: #152952; /* Bleu fonc√© opaque */
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    
    max-height: 400px;
    overflow-y: auto;
    z-index: 9999; /* Tr√®s haut pour passer au-dessus de tout */
    
    /* Animation */
    display: none;
    opacity: 0;
    transform: translateY(-10px);
    transition: opacity 0.3s ease, transform 0.3s ease;
}

/* Classe ajout√©e par JS pour afficher */
.dropdown-results.visible {
    display: block;
    opacity: 1;
    transform: translateY(0);
}

/* Les √©l√©ments de la liste */
.search-result-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    text-decoration: none;
    color: white;
    transition: background 0.2s;
}

.search-result-item:last-child {
    border-bottom: none;
}

.search-result-item:hover {
    background-color: rgba(255, 255, 255, 0.15);
    color: white;
    text-decoration: none;
}

.search-result-img {
    width: 40px;
    height: 40px;
    object-fit: cover;
    border-radius: 6px;
    background-color: rgba(255, 255, 255, 0.1);
    flex-shrink: 0;
}

.search-result-info {
    flex: 1;
    min-width: 0; /* Pour que le texte tronqu√© fonctionne */
}

.search-result-info h6 {
    margin: 0;
    font-size: 0.95rem;
    font-weight: 600;
    color: white;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.search-result-info small {
    color: rgba(255, 255, 255, 0.6);
    font-size: 0.8rem;
    display: block;
}

/* √âtat vide / Chargement */
.search-status {
    padding: 20px;
    text-align: center;
    color: rgba(255, 255, 255, 0.7);
    font-size: 0.9rem;
}

/* Scrollbar styling */
.dropdown-results::-webkit-scrollbar {
    width: 6px;
}

.dropdown-results::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
}

.dropdown-results::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
}

.dropdown-results::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
}

.header-icon-link {
    color: var(--texte-inverse);
    position: relative;
    display: flex;
    align-items: center;
    padding: 0.5rem;
    border-radius: 50%;
    transition: background-color 0.2s;
}
.header-icon-link:hover {
    background-color: rgba(255, 255, 255, 0.1);
}
.header-icon-link svg {
    width: 24px;
    height: 24px;
    fill: currentColor;
}

.notification-badge {
    position: absolute;
    top: 0;
    right: 0;
    background-color: var(--couleur-erreur);
    color: white;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    font-size: 0.7rem;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid var(--couleur-principale);
}

.header-icon.alert-ok { fill: var(--texte-inverse); opacity: 0.7; }
.header-icon.alert-warning { fill: #f57f17; }
.header-icon.alert-critical { fill: #dc3545; }

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}
.pulse { animation: pulse 2s infinite; }
.pulse-fast { animation: pulse 1s infinite; }

.auth-section {
  display: flex;
  align-items: center;
  gap: 1rem;
  color: var(--texte-inverse);
}
.auth-section .btn-outline-light {
    border-radius: 20px;
    font-weight: 500;
    font-size: 0.85rem;
}

.sub-nav {
  background-color: var(--fond-element);
  padding: 0.75rem 2rem;
  border-bottom: 1px solid var(--couleur-bordure);
  display: flex;
  gap: 1.5rem;
  justify-content: center;
}
.sub-nav-button {
  background-color: #f8f9fa;
  color: var(--texte-principal);
  padding: 0.5rem 1rem;
  border-radius: 6px;
  font-weight: 500;
  border: 1px solid var(--couleur-bordure);
  transition: all 0.2s ease;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}
.sub-nav-button:hover {
    background-color: #e9ecef;
	text-decoration: none;
}
.sub-nav-button.active {
  background-color: var(--couleur-principale);
  color: var(--texte-inverse);
  border-color: var(--couleur-principale);
}
.sub-nav-icon {
  width: 20px;
  height: 20px;
  fill: currentColor;
}


/* =================================================================
   4. EN-T√äTE DE PAGE & FIL D'ARIANE
   ================================================================= */
.breadcrumb-container {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
    padding: 12px 24px; /* Un peu moins de hauteur pour s'int√©grer au header */
    background: linear-gradient(135deg, #f6f8fb 0%, #ffffff 100%);
    border-radius: 16px;
    border: 1px solid rgba(31, 59, 115, 0.1);
    position: relative;
    overflow: hidden;
    margin-bottom: 2rem; /* Espace sous le fil d'ariane */
    box-shadow: 0 2px 10px rgba(0,0,0,0.03);
}

.breadcrumb-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(167, 211, 242, 0.1), transparent);
    animation: shimmer 3s infinite;
    pointer-events: none;
}

@keyframes shimmer {
    to { left: 200%; }
}

.breadcrumb-link {
    position: relative;
    color: #6b7280;
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
    padding: 6px 12px;
    border-radius: 10px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.breadcrumb-link::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 10px;
    background: linear-gradient(135deg, #1f3b73, #01257d);
    opacity: 0;
    transition: opacity 0.3s;
    z-index: -1;
}

.breadcrumb-link:hover {
    color: #ffffff;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(31, 59, 115, 0.3);
}

.breadcrumb-link:hover::before {
    opacity: 1;
}

.breadcrumb-link:hover svg {
    stroke: #ffffff; /* Change la couleur de l'ic√¥ne au survol */
}

.breadcrumb-separator {
    color: #d1d5db;
    font-size: 18px;
    line-height: 1;
    font-weight: 300;
    user-select: none;
    transition: all 0.3s;
	animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
            0%, 100% {
                opacity: 0.5;
            }
            50% {
                opacity: 1;
            }
        }

.breadcrumb-current {
    color: #1f3b73;
    font-size: 14px;
    font-weight: 600;
    padding: 6px 16px;
    background: linear-gradient(135deg, rgba(31, 59, 115, 0.08), rgba(167, 211, 242, 0.15));
    border-radius: 10px;
    position: relative;
    overflow: hidden;
}

.breadcrumb-current::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, #1f3b73, #a7d3f2);
    animation: slideIn 0.6s ease-out;
}

@keyframes slideIn {
    from { width: 0; }
    to { width: 100%; }
}

.breadcrumb-icon {
    width: 16px;
    height: 16px;
    display: inline-block;
    stroke: currentColor;
    transition: stroke 0.3s;
}

@media (max-width: 768px) {
    .breadcrumb-container {
        padding: 10px 16px;
        gap: 4px;
    }
    .breadcrumb-link, .breadcrumb-current {
        font-size: 12px;
        padding: 4px 8px;
    }
}

/* =================================================================
   5. TABLEAU DE BORD (DASHBOARD)
   ================================================================= */
.dashboard-container {
    padding: 2rem;
    background: #f8f9fa;
    min-height: calc(100vh - 120px);
}

.dashboard-header {
    margin-bottom: 2rem;
}

.dashboard-title {
    font-size: 2rem;
    font-weight: 700;
    color: #1e293b;
    display: flex;
    align-items: center;
    gap: 1rem;
    margin: 0;
}

.dashboard-title svg {
    width: 40px;
    height: 40px;
    fill: #3b82f6;
}

.budget-display {
    text-align: center;
    padding: 2rem 0;
}

.budget-label {
    display: block;
    font-size: 0.875rem;
    color: #64748b;
    margin-bottom: 0.5rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.budget-value {
    display: block;
    font-size: 2.5rem;
    font-weight: 700;
    font-family: 'Poppins', sans-serif;
}

.budget-value.positive {
    color: #10b981;
}

.budget-value.negative {
    color: #ef4444;
}

.widget-placeholder {
    text-align: center;
    padding: 2rem 1rem;
    color: #64748b;
}

.widget-placeholder p {
    margin: 0;
    font-size: 0.95rem;
}

.item-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.item-list-entry {
    padding: 1rem;
    border-bottom: 1px solid #f1f5f9;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: background 0.2s;
}

.item-list-entry:last-child {
    border-bottom: none;
}

.item-list-entry:hover {
    background: #f8fafc;
}

.item-info {
    flex: 1;
}

.item-title {
    display: block;
    font-weight: 600;
    color: #1e293b;
    margin-bottom: 0.25rem;
}

.item-subtitle {
    display: block;
    font-size: 0.875rem;
    color: #64748b;
}

.badge-countdown {
    font-size: 0.875rem;
    font-weight: 600;
    padding: 0.5rem 1rem;
    border-radius: 0.5rem;
    background: #dbeafe;
    color: #1e40af;
}

.badge-countdown.urgent {
    background: #fee2e2;
    color: #991b1b;
}

.badge-countdown.warning {
    background: #fef3c7;
    color: #92400e;
}

.badge-action {
    font-size: 0.875rem;
    font-weight: 500;
    padding: 0.5rem 0.75rem;
    border-radius: 0.5rem;
    background: #f1f5f9;
    color: #475569;
}

.stat-grid {
    display: grid;
    gap: 1rem;
}

.stat-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    background: #f8fafc;
    border-radius: 0.5rem;
    border-left: 3px solid #3b82f6;
}

.stat-item span:first-child {
    color: #64748b;
    font-size: 0.875rem;
}

.stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1e293b;
}

.btn-widget {
    display: block;
    width: 100%;
    padding: 0.625rem 1rem;
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    color: white;
    text-align: center;
    border-radius: 0.5rem;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.2s;
}

.btn-widget:hover {
    background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    color: white;
}

.btn-widget-secondary {
    background: white;
    color: #3b82f6;
    border: 2px solid #3b82f6;
}

.btn-widget-secondary:hover {
    background: #eff6ff;
    color: #2563eb;
    border-color: #2563eb;
}

.widget-subtitle {
    font-size: 0.875rem;
    font-weight: 600;
    color: #64748b;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 1rem;
}

@media (max-width: 768px) {
    .dashboard-container {
        padding: 1rem;
    }

    .dashboard-title {
        font-size: 1.5rem;
    }

    .budget-value {
        font-size: 2rem;
    }
}

.widget-card {
        background: white;
        border-radius: 16px;
        padding: 0; /* On g√®re le padding en interne pour ne pas couper la barre du haut */
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        border: 2px solid transparent;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        flex-direction: column;
        position: relative;
        overflow: hidden;
        height: 100%;
    }

    /* La barre color√©e anim√©e (Identique Admin) */
    .widget-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--couleur-principale), #667eea);
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.4s ease;
        z-index: 10;
    }

    /* Effet de survol Premium */
    .widget-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 32px rgba(31, 59, 115, 0.15);
        border-color: var(--couleur-principale);
    }

    .widget-card:hover::before {
        transform: scaleX(1);
    }

    /* Ic√¥nes de widgets (Style Admin) */
    .widget-icon-wrapper {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    .widget-icon-wrapper svg { width: 24px; height: 24px; fill: white; }

    /* Boutons uniformis√©s */
    .btn-dashboard {
        background: linear-gradient(135deg, #1f3b73 0%, #163a6e 100%);
        color: white;
        border: none;
        padding: 0.75rem 1rem;
        border-radius: 8px;
        font-weight: 600;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
    }
    .btn-dashboard:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(31, 59, 115, 0.3);
        color: white;
    }

/* =================================================================
   6. TABLEAUX
   ================================================================= */
.objet-table {
  width: 100%;
  border-collapse: collapse;
  background-color: var(--fond-element);
  border: 1px solid var(--couleur-bordure);
  border-radius: 8px;
  overflow: hidden;
  box-shadow: var(--ombre-legere);
  font-size: 0.9rem;
}

.objet-table th {
  background-color: #f8f9fa;
  font-weight: 600;
  text-align: left;
  padding: 0.75rem 1rem;
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--texte-discret);
  border-bottom: 2px solid var(--couleur-bordure);
  white-space: nowrap;
}

.objet-table td {
  padding: 0.75rem 1rem;
  border-bottom: 1px solid var(--couleur-bordure);
  vertical-align: middle; /* IMPORTANT : toutes les cellules align√©es au milieu */
}

.objet-table tbody tr:last-child td { border-bottom: none; }
.objet-table tbody tr:hover { background-color: #f1f3f5; }

/* --- Styles pour les en-t√™tes de colonne triables --- */
.objet-table th.sortable {
  cursor: pointer;
  position: relative;
}
.objet-table th.sortable a {
  color: inherit;
  text-decoration: none;
  display: block;
}
.objet-table th.sortable:hover {
    background-color: #e9ecef;
}
.objet-table th.th-sort-asc a,
.objet-table th.th-sort-desc a {
  color: var(--couleur-principale);
}
.objet-table th.sortable::after {
  content: "";
  display: inline-block;
  width: 1em;
  height: 1em;
  margin-left: 0.5rem;
  vertical-align: middle;
  opacity: 0.4;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3Cpath fill='%236c7a89' d='M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: center;
}
.objet-table th.th-sort-asc::after {
  opacity: 1;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3Cpath fill='%231F3B73' d='M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z'/%3E%3C/svg%3E");
}
.objet-table th.th-sort-desc::after {
  opacity: 1;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3Cpath fill='%231F3B73' d='M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z'/%3E%3C/svg%3E");
}

/* --- Styles pour la colonne "Image" --- */
.image-cell {
  width: 60px;
  text-align: center;
  padding: 0.5rem !important; /* CORRECTION : padding r√©duit pour la colonne image */
}

.image-preview-wrapper {
    position: relative;
    display: inline-block; /* CORRECTION : inline-block pour √©viter les probl√®mes de layout */
    width: 40px;
    height: 40px;
    vertical-align: middle; /* CORRECTION : alignement vertical */
}

.image-objet-thumbnail {
  width: 40px;
  height: 40px;
  object-fit: cover;
  border-radius: 4px;
  border: 1px solid var(--couleur-bordure);
  cursor: pointer;
  display: block; /* CORRECTION : block pour √©viter les espaces inline */
}

/* CORRECTION : Style pour le placeholder */
.table-image-placeholder {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #f0f0f0;
  border-radius: 4px;
  border: 1px solid var(--couleur-bordure);
}

.table-image-placeholder svg {
  fill: #999;
}

.image-objet-preview {
  visibility: hidden;
  opacity: 0;
  position: fixed !important; /* CORRECTION : !important pour s'assurer qu'il ne perturbe pas le layout */
  width: 250px;
  height: 250px;
  object-fit: contain;
  background-color: var(--fond-element);
  border: 2px solid #ccc;
  border-radius: 8px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
  z-index: 10010;
  transition: opacity 0.2s ease;
  pointer-events: none; /* CORRECTION : ne bloque pas les interactions */
  padding: 4px;
}

.image-preview-wrapper:hover .image-objet-preview {
  visibility: visible;
  opacity: 1;
}


/* --- Styles pour la colonne "√âtat" --- */
.texte-perime, .texte-perime-bientot, .texte-alerte, .texte-ok {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
}

.texte-perime { color: #c62828; }
.texte-perime-bientot { color: #f57f17; }
.texte-alerte { color: #b58600; }
.texte-ok { color: #28a745; }
.texte-perime svg, .texte-perime-bientot svg, .texte-alerte svg, .texte-ok svg {
  width: 20px;
  height: 20px;
  fill: currentColor;
}

/* --- Styles pour la colonne "Actions" --- */
.actions-cell {
    text-align: right;
    white-space: nowrap;
    /* CORRECTION : Retrait du display: flex qui causait le d√©calage */
}

.actions-cell .form-in-cell {
    margin: 0;
    padding: 0;
    display: inline-block; /* CORRECTION : inline-block au lieu de inline-flex */
    vertical-align: middle;
}

.actions-cell .btn {
    min-width: 90px;
    margin: 0 0.25rem;
    vertical-align: middle; /* CORRECTION : alignement vertical */
}

/* Bouton Modifier */
.actions-cell .btn-outline-primary {
    border-color: var(--couleur-principale);
    color: var(--texte-principal);
}
.actions-cell .btn-outline-primary:hover {
    background-color: var(--couleur-principale);
    border-color: var(--couleur-principale);
    color: var(--texte-inverse);
}

/* Bouton Supprimer */
.actions-cell .btn-outline-danger {
    border-color: #a50000;
    color: var(--texte-principal);
}

.actions-cell .btn-outline-danger:hover {
    background-color: #a50000;
    border-color: #a50000;
    color: var(--texte-inverse);
}

/* --- Styles pour la colonne "Checkbox" --- */
.checkbox-column {
  width: 40px;
  text-align: center;
  padding: 0.5rem !important;
}


/* =================================================================
   7. CALENDRIER DE R√âSERVATION - VERSION MODERNE
   ================================================================= */

/* Container principal */
#calendrier-container {
    background: var(--fond-element);
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    padding: 2rem;
    max-width: 1400px;
    margin: 0 auto;
}

/* En-t√™te du calendrier */
.calendrier-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 2px solid var(--couleur-bordure);
}

.calendrier-header h3 {
    margin: 0;
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--texte-principal);
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

/* Navigation mois (si vous avez des boutons pr√©c√©dent/suivant) */
.calendrier-nav {
    display: flex;
    align-items: center;
    gap: 2rem;
}

.calendrier-nav .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.25rem;
    border-radius: 8px;
    background: var(--couleur-principale);
    color: white;
    border: none;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 6px rgba(31, 59, 115, 0.2);
    text-decoration: none;
}

.calendrier-nav .btn:hover {
    background: #163a6e;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(31, 59, 115, 0.3);
}

.calendrier-nav .current-month {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--texte-principal);
    min-width: 220px;
    text-align: center;
    text-transform: capitalize;
}

/* Grille du calendrier */
.calendrier-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 1px;
    background-color: var(--couleur-bordure);
    border: 1px solid var(--couleur-bordure);
    border-radius: 8px;
    overflow: hidden;
}

/* En-t√™tes des jours de la semaine */
.day-name {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    font-weight: 700;
    text-align: center;
    padding: 1rem 0;
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--texte-principal);
    border-bottom: 2px solid var(--couleur-principale);
}

/* Cellules des jours */
.day-cell {
    position: relative;
    height: 100px; /* Hauteur fixe pour voir la pastille */
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: flex-start;
    text-decoration: none !important;
    color: inherit;
}

.day-cell:hover {
    background-color: #f8f9fa;
    border-color: #0d6efd;
}

/* Effet hover pour les jours r√©servables */
a.day-cell.can-reserve:hover {
    background: linear-gradient(135deg, rgba(31, 59, 115, 0.08) 0%, rgba(31, 59, 115, 0.03) 100%);
    transform: scale(1.02);
    z-index: 10;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* Num√©ro du jour */
.day-number {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--texte-principal);
    margin-bottom: 0.5rem;
    line-height: 1;
}

/* Jour actuel (today) */
.day-cell.today {
    background: rgba(31, 59, 115, 0.05);
    border: 2px solid var(--couleur-principale);
}

.day-cell.today .day-number {
    background-color: var(--couleur-principale);
    color: white;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    box-shadow: 0 2px 6px rgba(31, 59, 115, 0.3);
}

/* Jours d'autres mois (grayed out) */
.day-cell.other-month {
    background-color: #f8f9fa;
    opacity: 0.5;
}

.day-cell.other-month .day-number {
    color: var(--texte-discret);
    font-weight: 400;
}

/* Jours pass√©s (non r√©servables) */
.day-cell.past-day {
    background-color: #f8f9fa;
    color: #adb5bd;
    cursor: not-allowed;
    opacity: 0.6;
}

.day-cell.past-day:hover {
    transform: none;
    box-shadow: none;
    background-color: #f8f9fa;
}

.day-cell.past-day .day-number {
    color: #adb5bd;
}

/* Jours avec activit√©/r√©servation */
.day-cell.has-activity {
    background: linear-gradient(135deg, rgba(40, 167, 69, 0.08) 0%, rgba(40, 167, 69, 0.03) 100%);
}

.activity-dot {
    width: 8px;
    height: 8px;
    background-color: var(--couleur-succes, #28a745);
    border-radius: 50%;
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    box-shadow: 0 0 0 2px white, 0 0 0 3px var(--couleur-succes, #28a745);
    animation: pulse-dot 2s infinite;
}

@keyframes pulse-dot {
    0%, 100% { 
        transform: translateX(-50%) scale(1);
        opacity: 1;
    }
    50% { 
        transform: translateX(-50%) scale(1.2);
        opacity: 0.8;
    }
}

/* Jours complets (si applicable) */
.day-cell.full {
    background: linear-gradient(135deg, rgba(220, 53, 69, 0.08) 0%, rgba(220, 53, 69, 0.03) 100%);
    cursor: not-allowed;
    position: relative;
}

.day-cell.full::after {
    content: 'COMPLET';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: var(--couleur-erreur, #dc3545);
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: 700;
    letter-spacing: 0.5px;
    box-shadow: 0 2px 6px rgba(220, 53, 69, 0.3);
}

.day-cell.full:hover {
    transform: none;
    box-shadow: none;
}

/* Week-end styling (optionnel) */
.day-cell.weekend {
    background: rgba(255, 193, 7, 0.03);
}

/* Contenu suppl√©mentaire dans les cellules */
.day-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    margin-top: 0.5rem;
}

.day-event {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
    background: rgba(31, 59, 115, 0.1);
    border-left: 3px solid var(--couleur-principale);
    border-radius: 3px;
    color: var(--texte-principal);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* Formulaire inline dans les cellules (si utilis√©) */
.form-in-cell {
    display: inline-block;
    margin: 0;
}

/* L√©gende du calendrier */
.calendrier-legend {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 2rem;
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--couleur-bordure);
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: var(--texte-discret);
}

.legend-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    flex-shrink: 0;
}

.legend-dot.today { 
    background: var(--couleur-principale); 
}

.legend-dot.available { 
    background: white;
    border: 2px solid var(--couleur-bordure); 
}

.legend-dot.reserved { 
    background: var(--couleur-succes, #28a745); 
}

.legend-dot.full { 
    background: var(--couleur-erreur, #dc3545); 
}

.legend-dot.past { 
    background: #f8f9fa;
    border: 2px solid #dee2e6; 
}

/* Responsive Design */
@media (max-width: 1024px) {
    #calendrier-container {
        padding: 1.5rem;
    }
    
    .calendrier-header h3 {
        font-size: 1.5rem;
    }
    
    .calendrier-nav .current-month {
        font-size: 1.25rem;
        min-width: 180px;
    }
}

@media (max-width: 768px) {
    #calendrier-container {
        padding: 1rem;
        border-radius: 8px;
    }
    
    .calendrier-header {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
    }
    
    .calendrier-grid {
        gap: 0;
    }
    
    .day-name {
        padding: 0.75rem 0;
        font-size: 0.75rem;
    }
    
    .day-cell {
        min-height: 80px;
        padding: 0.5rem 0.25rem;
    }
    
    .day-number {
        font-size: 0.95rem;
    }
    
    .day-cell.today .day-number {
        width: 28px;
        height: 28px;
        font-size: 0.9rem;
    }
    
    .day-event {
        font-size: 0.65rem;
        padding: 0.15rem 0.3rem;
    }
    
    .calendrier-nav {
        gap: 1rem;
    }
    
    .calendrier-nav .btn {
        padding: 0.5rem 1rem;
        font-size: 0.875rem;
    }
    
    .calendrier-legend {
        gap: 1rem;
        font-size: 0.75rem;
    }
    
    .legend-dot {
        width: 10px;
        height: 10px;
    }
}

@media (max-width: 480px) {
    .day-cell {
        min-height: 60px;
        padding: 0.25rem;
    }
    
    .day-number {
        font-size: 0.85rem;
    }
    
    .day-cell.today .day-number {
        width: 24px;
        height: 24px;
    }
    
    .activity-dot {
        width: 6px;
        height: 6px;
        bottom: 6px;
    }
    
    .day-event {
        display: none; /* Masquer les √©v√©nements sur tr√®s petits √©crans */
    }
}

/* √âtats de chargement (optionnel) */
.calendrier-grid.loading {
    opacity: 0.6;
    pointer-events: none;
}

.calendrier-grid.loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 40px;
    height: 40px;
    margin: -20px 0 0 -20px;
    border: 4px solid var(--couleur-bordure);
    border-top-color: var(--couleur-principale);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}


/* =======================================================
/* VUE JOURNALIERE REPENSEE
/* =======================================================
En-t√™te avec split layout */
.management-header-split {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 2px solid var(--couleur-bordure);
    flex-wrap: wrap;
    gap: 1rem;
}

.management-header-split .page-title {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--texte-principal);
}

.management-header-split .page-title svg {
    width: 32px;
    height: 32px;
    fill: var(--couleur-principale);
}

.management-header-split .page-actions {
    display: flex;
    gap: 0.75rem;
}

/* Bouton d'action principal */
.btn-action {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.875rem 1.5rem;
    background: linear-gradient(135deg, var(--couleur-principale) 0%, #163a6e 100%);
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    font-size: 0.95rem;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 4px 12px rgba(31, 59, 115, 0.25);
    position: relative;
    overflow: hidden;
}

.btn-action::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
}

.btn-action:hover::before {
    left: 100%;
}

.btn-action:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(31, 59, 115, 0.35);
}

.btn-action:active {
    transform: translateY(0);
    box-shadow: 0 2px 8px rgba(31, 59, 115, 0.3);
}

/* Card container pour le contenu */
.content-card {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    padding: 2rem;
    overflow: hidden;
}

/* Planning journalier */
.daily-schedule {
    display: flex;
    flex-direction: column;
    gap: 0;
    position: relative;
}

/* Ligne d'heure */
.schedule-slot {
    display: grid;
    grid-template-columns: 80px 1fr;
    min-height: 80px;
    border-bottom: 1px solid #e9ecef;
    position: relative;
    transition: background-color 0.2s;
}

.schedule-slot:last-child {
    border-bottom: none;
}

.schedule-slot:hover {
    background-color: rgba(31, 59, 115, 0.02);
}

/* Label de l'heure */
.time-label {
    display: flex;
    align-items: flex-start;
    justify-content: center;
    padding: 1rem 0.5rem;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--texte-discret);
    border-right: 2px solid var(--couleur-bordure);
    background: linear-gradient(to right, #f8f9fa 0%, #eff4fa 100%);
}

/* Container des √©v√©nements */
.events-container {
    padding: 0.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    position: relative;
}

/* Placeholder quand pas d'√©v√©nement */
.no-event-placeholder {
    min-height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--texte-discret);
    font-size: 0.85rem;
    font-style: italic;
    opacity: 0;
    transition: opacity 0.3s;
}

.schedule-slot:hover .no-event-placeholder {
    opacity: 0.5;
}

.no-event-placeholder::after {
    content: 'Aucune r√©servation';
}

/* Bloc d'√©v√©nement/r√©servation */
.event-block {
    background: linear-gradient(135deg, rgba(31, 59, 115, 0.95) 0%, rgba(31, 59, 115, 0.85) 100%);
    border-left: 4px solid var(--couleur-principale);
    border-radius: 8px;
    padding: 0.75rem 1rem;
    color: white;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 8px rgba(31, 59, 115, 0.2);
    position: relative;
    overflow: hidden;
}

.event-block::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, transparent 100%);
    opacity: 0;
    transition: opacity 0.3s;
}

.event-block:hover::before {
    opacity: 1;
}

.event-block:hover {
    transform: translateX(5px) scale(1.02);
    box-shadow: 0 6px 20px rgba(31, 59, 115, 0.3);
    border-left-width: 6px;
}

/* √âv√©nement qui continue d'une heure pr√©c√©dente */
.event-block.continuation {
    background: linear-gradient(135deg, rgba(31, 59, 115, 0.7) 0%, rgba(31, 59, 115, 0.6) 100%);
    border-left-style: dashed;
    opacity: 0.9;
}

.event-block.continuation:hover {
    opacity: 1;
}

/* Heure de l'√©v√©nement */
.event-time {
    font-size: 0.875rem;
    font-weight: 700;
    margin-bottom: 0.25rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.event-time::before {
    content: 'üïê';
    font-size: 1rem;
}

/* Utilisateur de la r√©servation */
.event-user {
    font-size: 0.95rem;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.event-user::before {
    content: 'üë§';
    font-size: 1rem;
}

/* Variantes de couleur pour diff√©rents types d'√©v√©nements */
.event-block[data-type="lab"] {
    background: linear-gradient(135deg, rgba(40, 167, 69, 0.95) 0%, rgba(40, 167, 69, 0.85) 100%);
    border-left-color: var(--couleur-succes, #28a745);
}

.event-block[data-type="meeting"] {
    background: linear-gradient(135deg, rgba(255, 193, 7, 0.95) 0%, rgba(255, 193, 7, 0.85) 100%);
    border-left-color: #ffc107;
    color: #333;
}

.event-block[data-type="maintenance"] {
    background: linear-gradient(135deg, rgba(220, 53, 69, 0.95) 0%, rgba(220, 53, 69, 0.85) 100%);
    border-left-color: var(--couleur-erreur, #dc3545);
}

/* Tooltip personnalis√© */
.tooltip {
    position: fixed;
    background: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 0.75rem 1rem;
    border-radius: 8px;
    font-size: 0.875rem;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s;
    z-index: 10000;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
    max-width: 300px;
}

.tooltip.show {
    opacity: 1;
}

.tooltip::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border: 5px solid transparent;
    border-top-color: rgba(0, 0, 0, 0.9);
}

/* Indicateur de ligne de temps actuelle */
.current-time-indicator {
    position: absolute;
    left: 80px;
    right: 0;
    height: 2px;
    background: var(--couleur-erreur, #dc3545);
    z-index: 100;
    box-shadow: 0 0 8px rgba(220, 53, 69, 0.5);
    animation: pulse-line 2s infinite;
}

.current-time-indicator::before {
    content: '';
    position: absolute;
    left: -6px;
    top: -4px;
    width: 10px;
    height: 10px;
    background: var(--couleur-erreur, #dc3545);
    border-radius: 50%;
    box-shadow: 0 0 8px rgba(220, 53, 69, 0.7);
}

@keyframes pulse-line {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

/* √âtat vide (aucune r√©servation sur la journ√©e) */
.daily-schedule:empty::after {
    content: 'Aucune r√©servation pour cette journ√©e';
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 400px;
    color: var(--texte-discret);
    font-size: 1.125rem;
    font-style: italic;
}

/* Responsive Design */
@media (max-width: 768px) {
    .management-header-split {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .management-header-split .page-title {
        font-size: 1.5rem;
    }
    
    .management-header-split .page-title svg {
        width: 28px;
        height: 28px;
    }
    
    .content-card {
        padding: 1rem;
        border-radius: 8px;
    }
    
    .schedule-slot {
        grid-template-columns: 60px 1fr;
        min-height: 60px;
    }
    
    .time-label {
        font-size: 0.75rem;
        padding: 0.75rem 0.25rem;
    }
    
    .events-container {
        padding: 0.25rem;
    }
    
    .event-block {
        padding: 0.5rem 0.75rem;
    }
    
    .event-time {
        font-size: 0.75rem;
    }
    
    .event-user {
        font-size: 0.85rem;
    }
    
    .btn-action {
        width: 100%;
        justify-content: center;
        padding: 0.75rem 1rem;
    }
}

@media (max-width: 480px) {
    .schedule-slot {
        grid-template-columns: 50px 1fr;
    }
    
    .time-label {
        font-size: 0.7rem;
    }
    
    .event-time::before,
    .event-user::before {
        display: none;
    }
}

/* Animation d'entr√©e pour les √©v√©nements */
@keyframes slideInEvent {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.event-block {
    animation: slideInEvent 0.3s ease-out;
}

.event-block:nth-child(1) { animation-delay: 0.05s; }
.event-block:nth-child(2) { animation-delay: 0.1s; }
.event-block:nth-child(3) { animation-delay: 0.15s; }
.event-block:nth-child(4) { animation-delay: 0.2s; }

/* Dark mode support (optionnel) */
@media (prefers-color-scheme: dark) {
    .content-card {
        background: #dfe3ee;
    }
    
    .schedule-slot {
        border-bottom-color: #333;
    }
    
    .time-label {
        background: linear-gradient(to right, #dfe3ee 0%, #f7f7f7 100%);
        border-right-color: #333;
    }
    
    .schedule-slot:hover {
        background-color: #f7f7f7;
    }
}


//* ===================================================================
   8. IC√îNE DU PANIER AVEC PASTILLE DE NOTIFICATION
   =================================================================== */

.header-icon-link {
    position: relative; /* Important pour le positionnement absolu de la pastille */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 8px;
    border-radius: 8px;
    transition: background-color 0.2s ease;
}

.header-icon-link:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

.header-icon {
    width: 24px;
    height: 24px;
    fill: currentColor;
}

.bell-warning {
    fill: #ffc107 !important; /* Orange/Jaune (Bootstrap Warning) */
}

.bell-critical {
    fill: #dc3545 !important; /* Rouge (Bootstrap Danger) */
}

/* Pastille de compteur du panier */
.cart-count-badge {
    position: absolute;
    top: 2px;
    right: 2px;
    
    /* Style de la pastille */
    background: linear-gradient(135deg, #ff4757, #ff6348);
    color: white;
    
    /* Taille et forme */
    min-width: 18px;
    height: 18px;
    border-radius: 9px;
    
    /* Centrage du texte */
    display: flex;
    align-items: center;
    justify-content: center;
    
    /* Typographie */
    font-size: 11px;
    font-weight: 700;
    line-height: 1;
    padding: 0 5px;
    
    /* Bordure pour contraste */
    border: 2px solid var(--couleur-principale);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    
    /* Animation d'apparition */
    animation: badgePop 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Animation d'apparition de la pastille */
@keyframes badgePop {
    0% {
        transform: scale(0);
        opacity: 0;
    }
    50% {
        transform: scale(1.2);
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

/* Animation de pulsation (optionnel, pour attirer l'attention) */
.cart-count-badge.pulse {
    animation: badgePulse 1.5s infinite ease-in-out;
	z-index: 10;
}

@keyframes badgePulse {
    0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.7);
    }
    50% {
        transform: scale(1.3); /* Grossit de 30% (au lieu de 10% avant) */
        box-shadow: 0 0 15px 5px rgba(255, 71, 87, 0.6); /* Gros halo lumineux rouge */
    }
    100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(255, 71, 87, 0);
    }
}


/* Pour les nombres √† 2 chiffres ou plus */
.cart-count-badge[data-count="10"],
.cart-count-badge[data-count="11"],
.cart-count-badge[data-count="12"],
.cart-count-badge[data-count="13"],
.cart-count-badge[data-count="14"],
.cart-count-badge[data-count="15"],
.cart-count-badge[data-count="16"],
.cart-count-badge[data-count="17"],
.cart-count-badge[data-count="18"],
.cart-count-badge[data-count="19"] {
    min-width: 22px;
    font-size: 10px;
}

/* Si vous avez plus de 99 items (improbable mais s√©curit√©) */
.cart-count-badge.large {
    min-width: 24px;
    font-size: 9px;
    padding: 0 4px;
}

/* Responsive : ajustements pour mobile */
@media (max-width: 768px) {
    .cart-count-badge {
        top: 0;
        right: 0;
        min-width: 16px;
        height: 16px;
        font-size: 10px;
        border-width: 1.5px;
    }
}

/* Variante : pastille avec effet "nouveau" (optionnel) */
.cart-count-badge.new::after {
    content: '';
    position: absolute;
    top: -2px;
    right: -2px;
    width: 6px;
    height: 6px;
    background: #2ecc71;
    border-radius: 50%;
    border: 1px solid #2c3e50;
    animation: blink 1.5s ease-in-out infinite;
}

@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}

.cart-list-wrapper {
        min-height: 200px;
    }

    /* Style des items g√©n√©r√©s par le JS (Anticipation) */
    .cart-item {
        border-bottom: 1px solid #f1f3f5;
        padding: 1.5rem;
        transition: background-color 0.2s;
    }
    .cart-item:last-child { border-bottom: none; }
    .cart-item:hover { background-color: #f8f9fa; }

    /* √âtat vide */
    .empty-cart-container {
        padding: 4rem 2rem;
        text-align: center;
        color: #6c757d;
    }
    .empty-cart-icon {
        font-size: 4rem;
        margin-bottom: 1rem;
        opacity: 0.3;
        color: var(--couleur-principale);
    }

    /* Barre d'actions */
    .cart-footer {
        background-color: #f8f9fa;
        border-top: 1px solid #e9ecef;
        padding: 1.5rem;
        border-radius: 0 0 12px 12px;
    }


/* =================================================================
   9. SYST√àME DE MODALES (100% BOOTSTRAP)
   ================================================================= */

/* --- 8.1 Am√©liorations globales pour les modales Bootstrap --- */
.modal-content {
    border: none;
    border-radius: 12px;
}
.modal-header {
    border-bottom: none;
}
.modal-footer {
    background-color: #f8f9fa;
}

/* --- 8.2 Styles pour la modale d'ajout d'objet --- */
.modal-dialog.modal-xl .modal-header {
    background-color: var(--couleur-principale);
    color: var(--texte-inverse);
}
.modal-dialog.modal-xl .modal-header .btn-close {
    filter: invert(1) grayscale(100%) brightness(200%);
}
.modal-dialog.modal-xl .modal-form {
  padding: 2rem;
}

/* --- 8.3 Styles pour la modale de danger --- */
/* Bootstrap g√®re d√©j√† la plupart des styles. On peut juste affiner si besoin. */
#dangerModal .modal-header {
    background-color: var(--couleur-erreur);
}

/* --- 8.3 Styles communs aux en-t√™tes de TOUTES les modales --- */
.modal-header .modal-title-with-icon, .modal-header .modal-title {
  font-size: 1.2rem;
  font-weight: 600;
}
.modal-header .close-btn {
  background: none;
  border: none;
  font-size: 1.5rem;
  opacity: 0.7;
  transition: opacity 0.2s;
  cursor: pointer;
}
.modal-header .close-btn:hover { opacity: 1; }

/* --- 8.4 Styles communs aux pieds de page de TOUTES les modales --- */
.modal-footer .btn, .modal-actions .btn {
    font-weight: 500;
    border-radius: 6px;
    padding: 0.6rem 1.2rem;
}

/* --- 8.5 Styles sp√©cifiques √† la modale d'ajout d'objet --- */
.modal-dialog.modal-xl .modal-form {
  padding: 2rem;
  background-color: var(--fond-element);
}
.modal-dialog.modal-xl .form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0 2rem;
  align-items: start;
}
.modal-dialog.modal-xl .form-column {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}
.modal-dialog.modal-xl .form-group { margin-bottom: 0; }
.modal-dialog.modal-xl .form-group label {
  font-weight: 500;
  font-size: 0.9rem;
  margin-bottom: 0.4rem;
}
.modal-dialog.modal-xl .form-group input, .modal-dialog.modal-xl .form-group select {
  width: 100%;
  padding: 0.6rem 0.8rem;
  font-size: 0.95rem;
  border-radius: 6px;
}
.modal-dialog.modal-xl .form-help-text {
    font-size: 0.8rem;
    color: var(--texte-discret);
    margin-top: 0.25rem;
}

/* --- 8.6 Styles pour la recherche Pexels dans la modale d'objet --- */
.modal-dialog.modal-xl .input-with-button { display: flex; gap: 0.5rem; }
.modal-dialog.modal-xl .input-with-button input { flex-grow: 1; }
.modal-dialog.modal-xl .pexels-results-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: 0.5rem;
    margin-top: 0.75rem;
    max-height: 180px;
    overflow-y: auto;
    padding: 0.5rem;
    border: 1px solid var(--couleur-bordure);
    border-radius: 6px;
}
.modal-dialog.modal-xl .pexels-image {
    width: 100%;
    height: 60px;
    object-fit: cover;
    border-radius: 4px;
    cursor: pointer;
}

/* --- 8.7 Styles specifiques √† la modale danger --- */
#danger-modal .modal-header {
    background-color: var(--couleur-erreur);
}


/* =================================================================
   10. PAGE D'INVENTAIRE & FILTRES
   ================================================================= */

.filtres-section {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 1.5rem;
  padding: 1.5rem;
  margin-bottom: 2rem;
  background-color: var(--fond-element);
  border: 1px solid var(--couleur-bordure);
  border-radius: 8px;
  box-shadow: var(--ombre-legere);
}

.filter-group {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.filter-group label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 500;
  color: var(--texte-principal);
}

.filter-icon {
  width: 20px;
  height: 20px;
  fill: var(--texte-discret);
}

.filter-group input, .filter-group select {
    font-size: 0.9rem;
    padding: 0.5rem 0.75rem;
    border-radius: 6px;
    border: 1px solid #ced4da;
    min-width: 180px;
}

.btn-reset {
    color: var(--texte-discret);
    font-weight: 500;
    text-decoration: underline;
}
.btn-reset:hover {
    color: var(--couleur-principale);
}

.table-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
}
.table-header .page-title {
    margin: 0;
}


/* ================================================================
   12. PAGE DETAILS objet
   ==============================================================*/
.object-image-container {
        height: 250px;
        background-color: #f8f9fa;
        display: flex;
        align-items: center;
        justify-content: center;
        border-bottom: 1px solid #e9ecef;
        overflow: hidden;
    }
    .object-image {
        max-height: 100%;
        max-width: 100%;
        object-fit: contain;
    }
    
    /* Indicateurs de stock */
    .stock-indicator {
        padding: 1.5rem;
        border-radius: 12px;
        background-color: white;
        border: 1px solid #e9ecef;
        box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }
    .stock-value {
        font-size: 2.5rem;
        font-weight: 700;
        line-height: 1;
        margin-bottom: 0.5rem;
    }
    .stock-label {
        color: #6c757d;
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 600;
    }

    /* Tableau Historique */
    .history-table th {
        background-color: #f8f9fa;
        font-size: 0.8rem;
        text-transform: uppercase;
        color: #6c757d;
    }
    .history-table td {
        vertical-align: middle;
        font-size: 0.9rem;
    }



/* =================================================================
   11. FOOTER PRINCIPAL DU SITE (RESTAUR√â)
   ================================================================= */
.site-footer {
    background-color: var(--couleur-secondaire);
    color: rgba(255, 255, 255, 0.8);
    padding: 3rem 2rem 1.5rem;
    margin-top: 3rem;
    font-size: 0.85rem;
    line-height: 1.6;
}

.footer-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 2rem;
    max-width: 1600px;
    margin: 0 auto;
    padding-bottom: 2rem;
    border-bottom: 1px solid #4a6a9f;
}

.footer-section {
    text-align: center;
    border-left: 1px solid #4a6a9f;
    padding: 0 1rem;
}

.footer-section:first-child {
    border-left: none;
}

.footer-title {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
}

.footer-title h4 {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
    color: var(--texte-inverse);
}

.footer-section .icon-svg {
    width: 20px;
    height: 20px;
    fill: var(--couleur-accent);
}

.footer-section p {
    margin: 0 0 0.5rem 0;
}

.footer-section a {
    color: rgba(255, 255, 255, 0.8);
    text-decoration: none;
    transition: color 0.2s;
}

.footer-section a:hover {
    color: var(--texte-inverse);
    text-decoration: underline;
}

.license-icons {
    margin-top: 0.75rem;
}

.footer-bottom {
    text-align: center;
    margin-top: 1.5rem;
    font-size: 0.8rem;
    color: var(--texte-discret);
}

/* =================================================================
   12. VISITE GUID√âE (TUTORIEL)
   ================================================================= */

.tour-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.7);
    z-index: 10000;
    display: none; /* Cach√© par d√©faut */
}

.tour-tooltip {
    position: absolute;
    background-color: var(--fond-element);
    padding: 1.5rem;
    border-radius: 8px;
    box-shadow: var(--ombre-moyenne);
    z-index: 10002;
    width: 320px;
    display: none; /* Cach√© par d√©faut */
    border-top: 4px solid var(--couleur-principale);
}

.tour-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--couleur-principale);
    margin: 0 0 0.75rem 0;
}

.tour-content {
    font-size: 0.9rem;
    line-height: 1.6;
    margin-bottom: 1.5rem;
    color: var(--texte-principal);
}

.tour-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.tour-btn-skip {
    background: none;
    border: none;
    color: var(--texte-discret);
    cursor: pointer;
    font-weight: 500;
    padding: 0;
}
.tour-btn-skip:hover {
    text-decoration: underline;
}

.tour-btn-next {
    background-color: var(--couleur-principale);
    color: var(--texte-inverse);
    border: none;
    padding: 0.6rem 1.2rem;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 500;
}
.tour-btn-next:hover {
    background-color: var(--couleur-secondaire);
}

/* Classe pour l'√©l√©ment en surbrillance */
.tour-highlight {
    position: relative;
    z-index: 10001;
    /* Astuce pour cr√©er le "trou" dans le fond noir */
    box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.7);
    border-radius: 4px;
}

/* =================================================================
   13. PAGE DE CONNEXION (DESIGN "GLASS")
   ================================================================= */

.login-page-body {
    background-color: var(--fond-page);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 2rem;
}

.login-form-container {
    width: 100%;
    max-width: 420px;
    padding: 2.5rem;
    border-radius: 12px;
    background: rgba(230, 230, 230, 0.2);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: var(--ombre-moyenne);
}

.login-header {
    text-align: center;
    margin-bottom: 2rem;
    color: var(--texte-principal);
}
.login-icon-wrapper {
    width: 60px;
    height: 60px;
    margin: 0 auto 1.5rem;
    background: #f1f3f5;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}
.login-icon-wrapper svg {
    width: 32px;
    height: 32px;
    fill: var(--couleur-principale);
}
.login-header h2 {
    margin: 0;
    font-size: 1.8rem;
    font-weight: 600;
}

.login-form {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}
.input-group { position: relative; }
.input-icon {
    position: absolute;
    top: 50%;
    left: 1rem;
    transform: translateY(-50%);
    width: 20px;
    height: 20px;
    fill: var(--texte-discret);
}
.input-group input {
    width: 100%;
    padding: 0.8rem 1rem 0.8rem 3rem;
    font-size: 1rem;
    border-radius: 8px;
    border: 1px solid var(--couleur-bordure);
    background: var(--fond-element);
    color: var(--texte-principal);
}
.input-group input:focus {
    outline: none;
    border-color: var(--couleur-principale);
    box-shadow: 0 0 0 3px rgba(31, 59, 115, 0.1);
}

.btn-login {
    width: 100%;
    padding: 0.9rem;
    font-size: 1.1rem;
    font-weight: 600;
    margin-top: 1rem;
    background-color: var(--couleur-principale);
    color: var(--texte-inverse);
    border: none;
    border-radius: 8px;
    cursor: pointer;
}

.form-switch-link {
    text-align: center;
    margin-top: 1.5rem;
    font-size: 0.9rem;
}
.form-switch-link a {
    color: var(--couleur-principale);
    font-weight: 500;
}

/* =================================================================
   14. PAGE DE CONFIGURATION (SETUP)
   ================================================================= */

.setup-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    min-height: 100vh;
    align-items: center;
}
.setup-illustration {
    background-color: #e9ecef;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
}
.setup-illustration img { max-width: 70%; height: auto; }
.setup-form-wrapper { padding: 2rem 4rem; }
.setup-header { text-align: left; margin-bottom: 2rem; }
.setup-header h1 {
    font-size: 2.5rem;
    font-weight: bold;
    color: var(--texte-principal);
    margin: 0;
}
.setup-form {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}
.password-group {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
}


/* =================================================================
   15. PAGE DE PROFIL
   ================================================================= */

.profile-page-container {
    display: flex;
    justify-content: center;
    padding-top: 2rem; /* Un peu d'espace en haut */
}

.profile-form-wrapper {
    width: 100%;
    max-width: 500px; /* Un peu plus large pour le confort */
    background-color: var(--fond-element);
    border-radius: 8px;
    box-shadow: var(--ombre-legere);
    border: 1px solid var(--couleur-bordure);
    overflow: hidden;
}

.profile-header {
    text-align: center;
    padding: 1.5rem;
    border-bottom: 1px solid var(--couleur-bordure);
}

.profile-header h2 {
    margin: 0 0 0.5rem 0;
    font-size: 1.5rem;
    font-weight: 600;
}

.profile-form {
    padding: 2rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}


/* =================================================================
   16. √âTAT VIDE & MODALES SIMPLES
   ================================================================= */

.empty-state-container {
    text-align: center;
    padding: 4rem 2rem;
    background-color: var(--fond-element);
    border: 1px dashed var(--couleur-bordure);
    border-radius: 8px;
    margin-top: 2rem;
}

.empty-state-icon {
    width: 60px;
    height: 60px;
    margin: 0 auto 1.5rem;
    background-color: #f1f3f5;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.empty-state-icon svg {
    width: 32px;
    height: 32px;
    fill: var(--couleur-principale);
}

.empty-state-container h3 {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--texte-principal);
    margin: 0 0 0.5rem 0;
}

.empty-state-container p {
    color: var(--texte-discret);
    max-width: 400px;
    margin: 0 auto 1.5rem;
}

/* =================================================================
   17. PAGES DE GESTION (ARMOIRES, CAT√âGORIES)
   ================================================================= */

.management-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid var(--couleur-bordure);
}
.management-header .page-title {
    margin: 0;
}

.add-inline-form {
  display: flex;
  gap: 0.5rem;
}
.add-inline-form input {
    font-size: 0.9rem;
    padding: 0.5rem 0.75rem;
    border-radius: 6px;
    border: 1px solid #ced4da;
    width: 250px;
}
.add-inline-form button {
    background-color: var(--couleur-principale);
    color: var(--texte-inverse);
    border: none;
    border-radius: 6px;
    width: 38px;
    height: 38px;
    font-size: 1.5rem;
    cursor: pointer;
}

.card-container.management-page {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.5rem;
}

.item-card {
  background-color: var(--fond-element);
  border: 1px solid var(--couleur-bordure);
  border-radius: 8px;
  box-shadow: var(--ombre-legere);
  padding: 1rem;
  display: flex;
  align-items: center;
  gap: 1rem;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.item-card:hover {
    transform: translateY(-3px);
    box-shadow: var(--ombre-moyenne);
}

.card-info {
  flex-grow: 1;
}
.card-title {
  font-weight: 600;
  font-size: 1.1rem;
  color: var(--texte-principal);
  margin-bottom: 0.25rem;
  display: block;
}
.card-count {
  font-size: 0.85rem;
  color: var(--texte-discret);
  display: block;
}

.card-actions {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.card-actions a, .card-actions .edit-btn, .card-actions .delete-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 50%; /* Boutons ronds */
    background-color: var(--fond-element);
    border: 1px solid var(--couleur-bordure);
    color: var(--texte-discret);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.card-actions a:hover, .card-actions .edit-btn:hover, .card-actions .delete-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.card-actions a[title="Voir le contenu"]:hover {
    background-color: rgba(31, 59, 115, 0.1);
    border-color: var(--couleur-principale);
    color: var(--couleur-principale);
}

.card-actions .edit-btn:hover {
    background-color: rgba(40, 167, 69, 0.1);
    border-color: var(--couleur-succes);
    color: var(--couleur-succes);
}

.card-actions .delete-btn:hover {
    background-color: rgba(220, 53, 69, 0.1);
    border-color: var(--couleur-erreur);
    color: var(--couleur-erreur);
}

.card-actions svg {
	width: 18px;
    height: 18px;
    fill: currentColor;
    transition: transform 0.3s;
}

.card-actions a:hover svg,
.card-actions .edit-btn:hover svg,
.card-actions .delete-btn:hover svg {
    transform: scale(1.1);
}

/* Animation de pulsation pour le bouton supprimer */
.card-actions .delete-btn:hover {
    animation: pulse-danger 0.6s infinite;
}

@keyframes pulse-danger {
    0%, 100% { box-shadow: 0 4px 12px rgba(220, 53, 69, 0.2); }
    50% { box-shadow: 0 4px 16px rgba(220, 53, 69, 0.4); }
}

.empty-state-text {
    text-align: center;
    padding: 3rem;
    color: var(--texte-discret);
    font-style: italic;
}

.edit-mode {
  display: none;
  align-items: center;
  gap: 0.5rem;
  width: 100%;
}
.edit-input {
  flex-grow: 1;
}
.save-btn, .cancel-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.5rem; 
  display: flex;
  align-items: center;
  justify-content: center;
}
.save-btn svg, .cancel-btn svg {
    width: 20px;
    height: 20px;
    fill: var(--texte-discret);
    transition: all 0.2s ease;
}

.save-btn:hover svg {
    fill: var(--couleur-succes);/
    transform: scale(1.2); 
}
.cancel-btn:hover svg {
    fill: var(--couleur-erreur); 
    transform: scale(1.2); 
}

/* =================================================================
   18. SURCHARGE DES STYLES BOOTSTRAP (MODALES & FORMULAIRES)
   ================================================================= */

/* On rend les modales un peu plus √©l√©gantes */
.modal-content {
    border: none;
    border-radius: 12px;
}
.modal-header {
    background-color: var(--couleur-principale);
    color: var(--texte-inverse);
    border-bottom: none;
}
.modal-header .btn-close {
    filter: invert(1) grayscale(100%) brightness(200%); /* Rend la croix blanche */
}
.modal-footer {
    background-color: #f8f9fa;
}

/* On affine l'apparence des champs de formulaire Bootstrap */
.form-control, .form-select {
    font-size: 0.95rem;
    padding: 0.6rem 1rem;
    border-radius: 6px;
}
.form-control:focus, .form-select:focus {
    border-color: var(--couleur-principale);
    box-shadow: 0 0 0 3px rgba(31, 59, 115, 0.15);
}

/* On affine l'apparence des boutons Bootstrap */
.modal-footer .btn {
    font-weight: 500;
    border-radius: 6px;
    padding: 0.6rem 1.2rem;
}


/* =================================================================
   19. PAGE PANIER DE R√âSERVATION
   ================================================================= */

.cart-page-content {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    overflow: hidden;
}

.cart-items-container {
    padding: 0;
    min-height: 300px;
}

/* √âtat panier vide */
.empty-cart-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    text-align: center;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
}

.empty-cart-icon {
    width: 80px;
    height: 80px;
    fill: #adb5bd;
    margin-bottom: 24px;
    opacity: 0.5;
}

.empty-cart-state h3 {
    font-size: 24px;
    font-weight: 600;
    color: #495057;
    margin: 0 0 12px 0;
}

.empty-cart-state p {
    font-size: 16px;
    color: #6c757d;
    margin: 0 0 32px 0;
    max-width: 400px;
}

/* Items du panier */
.summary-item {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 20px;
    padding: 24px;
    background: white;
    border-bottom: 1px solid #e9ecef;
    transition: background-color 0.2s ease;
    animation: slideIn 0.3s ease;
}

.summary-item:hover {
    background: #f8f9fa;
}

.summary-item:last-child {
    border-bottom: none;
}

.summary-item-details {
    flex: 1;
}

.summary-item-details > p {
    margin: 0 0 16px 0;
    font-size: 16px;
    font-weight: 600;
    color: #2c3e50;
}

.summary-item-details > p strong {
    color: var(--couleur-principale);
}

.summary-subtitle {
    font-size: 14px;
    font-weight: 600;
    color: #6c757d;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin: 16px 0 8px 0;
}

.summary-item-details ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.summary-item-details li {
    padding: 6px 0;
    color: #495057;
    font-size: 15px;
}

.summary-item-details li strong {
    color: #2c3e50;
    font-weight: 600;
}

/* Actions des items */
.summary-actions {
    display: flex;
    flex-direction: column;
    gap: 8px;
    flex-shrink: 0;
}

.btn-action.btn-secondary {
    background: #6c757d;
    color: white;
}

.btn-action.btn-secondary:hover {
    background: #5a6268;
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(108, 117, 125, 0.3);
}

.btn-action.btn-danger {
    background: #dc3545;
    color: white;
}

.btn-action.btn-danger:hover {
    background: #c82333;
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(220, 53, 69, 0.3);
}

/* Barre d'actions du panier */
.cart-actions-bar {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 16px;
    padding: 24px;
    background: white;
    border-top: 1px solid #e9ecef;
}

.btn-outline-danger {
    background: white;
    color: #dc3545;
    border: 2px solid #dc3545;
}

.btn-outline-danger:hover {
    background: #dc3545;
    color: white;
    transform: translateY(-1px);
}

.btn-lg {
    padding: 14px 28px;
    font-size: 16px;
}

/* Animation d'apparition des items */
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* Responsive */
@media (max-width: 768px) {
    .cart-actions-bar {
        flex-direction: column;
        gap: 12px;
    }
	
	.cart-actions-bar .btn-outline-danger {
		background: white;
		color: #dc3545;
		border: 2px solid #dc3545;
	}
	
	.cart-actions-bar .btn-outline-danger:hover {
		background: #dc3545;
		color: white;
		transform: translateY(-2px);
		box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);
	}
    
    .summary-item {
        flex-direction: column;
        gap: 16px;
    }
    
    .summary-actions {
        flex-direction: row;
        width: 100%;
    }
    
    .summary-actions .btn-action {
        flex: 1;
    }
    
    .empty-cart-state {
        padding: 40px 20px;
    }
    
    .empty-cart-icon {
        width: 60px;
        height: 60px;
    }
    
    .empty-cart-state h3 {
        font-size: 20px;
    }
}


/* ===================================================================
   20. TOOLTIP DE R√âSERVATION
   ================================================================== */

#reservation-tooltip {
    position: absolute;
    z-index: 1060; /* Au-dessus de tout */
    display: none; /* Cach√© par d√©faut */
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.2s ease, transform 0.2s ease;
    pointer-events: auto; /* Permet de cliquer sur les boutons */
    
    /* Design de la carte */
    background: #ffffff;
    min-width: 260px;
    max-width: 320px;
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15), 0 2px 10px rgba(0,0,0,0.05);
    border: 1px solid rgba(0,0,0,0.05);
    overflow: hidden;
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
}

/* √âtat visible */
#reservation-tooltip.visible {
    display: block;
    opacity: 1;
    transform: translateY(0);
}

/* --- EN-T√äTE (Heure + Actions) --- */
.tooltip-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: #f8f9fa; /* Gris tr√®s l√©ger */
    border-bottom: 1px solid #eee;
}

.tooltip-title {
    font-size: 0.95rem;
    color: #212529;
    font-weight: 700;
    letter-spacing: -0.3px;
}

/* --- BOUTONS D'ACTION (Ic√¥nes seulement) --- */
.tooltip-buttons {
    display: flex;
    gap: 8px;
}

.tooltip-buttons button {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    border: none;
    background: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    color: #adb5bd; /* Gris par d√©faut */
}

/* Bouton √âditer (Bleu au survol) */
.tooltip-buttons .btn-edit-resa:hover {
    background: #e7f1ff;
    color: #0d6efd;
}

/* Bouton Supprimer (Rouge au survol) */
.tooltip-buttons .btn-delete-resa:hover {
    background: #fee2e2;
    color: #dc3545;
}

/* --- LISTE DES ITEMS --- */
.tooltip-list {
    list-style: none;
    padding: 12px 16px;
    margin: 0;
    max-height: 200px;
    overflow-y: auto;
}

.tooltip-list li {
    display: flex;
    align-items: flex-start;
    padding: 4px 0;
    font-size: 0.9rem;
    color: #495057;
    line-height: 1.4;
}

/* Puce personnalis√©e */
.tooltip-list li::before {
    content: "‚Ä¢";
    color: #0d6efd; /* Couleur primaire */
    font-weight: bold;
    margin-right: 8px;
    font-size: 1.2em;
    line-height: 1;
}

/* --- √âTATS DE CHARGEMENT / ERREUR --- */
.tooltip-loading {
    padding: 20px;
    text-align: center;
    color: #6c757d;
    font-size: 0.85rem;
}

.tooltip-error {
    padding: 15px;
    text-align: center;
    color: #dc3545;
    font-weight: 600;
    background: #fff5f5;
}


/* ============================================
/* VUE JOURNALI√àRE (STYLE GOOGLE CALENDAR)
==============================================*/

.daily-schedule-wrapper {
    display: flex;
    flex-direction: column;
    background: #ffffff;
    padding-bottom: 20px;
}

.schedule-row {
    display: flex;
    border-bottom: 1px solid #e0e0e0; /* Ligne grise fine */
    min-height: 60px;
}

.time-col {
    width: 70px;
    border-right: 1px solid #e0e0e0;
    padding: 10px;
    text-align: right;
    flex-shrink: 0;
}

.time-text {
    color: #70757a;
    font-size: 0.85rem;
    position: relative;
    top: -18px; /* Aligne l'heure sur la ligne du haut */
    background: white;
    padding-left: 5px;
}

.events-col {
    flex-grow: 1;
    padding: 4px 10px;
    display: flex;
    flex-direction: column;
    gap: 4px; /* Espace entre les √©v√©nements */
}

/* Style des blocs √©v√©nements */
.event-item {
    background-color: #e8f0fe; /* Bleu Google tr√®s clair */
    border-left: 4px solid #1967d2; /* Bordure bleue accentu√©e */
    color: #1967d2;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.9rem;
    cursor: pointer;
    transition: box-shadow 0.2s ease;
}

.event-item:hover {
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    background-color: #d2e3fc;
}

.event-item.continuation {
    opacity: 0.6;
    border-left-style: dashed;
    background-color: #f1f3f4;
    color: #5f6368;
}

.event-content strong {
    display: block;
    font-size: 0.85rem;
}

/* --- TOOLTIP FLOTTANT --- */
.calendar-tooltip {
    position: fixed; /* Important: Fixed pour sortir du flux */
    background: white;
    width: 320px;
    border-radius: 8px;
    box-shadow: 0 12px 28px rgba(0,0,0,0.25); /* Ombre port√©e forte */
    border: 1px solid #dadce0;
    z-index: 10000; /* Au-dessus de tout */
    opacity: 0;
	visibility: hidden;
	transform: translateY(-5px);
	transition: opacity 0.2s, visibility 0.2s, transform 0.2s;
    font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    overflow: hidden;
	pointer-events: none;
}

.calendar-tooltip.visible {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
    pointer-events: auto;
}

/* Petite fl√®che pointant vers la r√©servation */
.calendar-tooltip::before {
    content: '';
    position: absolute;
    top: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-bottom: 8px solid #dadce0;
}

.calendar-tooltip::after {
    content: '';
    position: absolute;
    top: -7px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-bottom: 8px solid white;
}

.tooltip-header {
    background: #f8f9fa;
    padding: 12px 16px;
    border-bottom: 1px solid #eee;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.tooltip-title {
    font-weight: 600;
    color: #202124;
    font-size: 1rem;
}

.tooltip-body {
    padding: 16px;
    max-height: 300px;
    overflow-y: auto;
}

.tooltip-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.tooltip-list li {
    margin-bottom: 6px;
    font-size: 0.9rem;
    color: #3c4043;
}

.tooltip-actions {
    display: flex;
    gap: 8px;
}

.btn-tooltip {
    padding: 4px 12px;
    border-radius: 4px;
    font-size: 0.85rem;
    border: 1px solid #dadce0;
    background: white;
    cursor: pointer;
    transition: background 0.2s;
}

.btn-tooltip:hover {
    background: #f1f3f4;
}

.btn-tooltip.delete {
    color: #d93025;
    border-color: #f28b82;
}

.btn-tooltip.delete:hover {
    background: #fce8e6;
}


/* =================================================================
   BADGE DE R√âSERVATION SUR LE CALENDRIER MENSUEL
   ================================================================= */

.reservation-badge {
	background-color: #0d6efd; /* Bleu Bootstrap */
    color: white;
    font-size: 0.75rem;
    padding: 2px 6px;
    border-radius: 10px;
    margin-top: 4px;
    display: inline-block;
    font-weight: 600;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.reservation-badge:hover {
    transform: translateY(-2px) scale(1.1);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.6);
}

/* Couleurs selon le nombre */
.reservation-badge[data-count="1"] { background-color: #0dcaf0; color: #000; } /* Cyan pour 1 */
.reservation-badge[data-count="2"] { background-color: #0d6efd; } /* Bleu pour 2 */
.reservation-badge[data-count="3"] { background-color: #fd7e14; } /* Orange pour 3 */
.reservation-badge[data-count="4"] { background-color: #dc3545; } /* Rouge pour 4+ */
}

/* Tooltip des r√©servations du jour */
.day-tooltip {
    position: fixed;
    background: white;
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
    border: 1px solid #e0e0e0;
    min-width: 280px;
    max-width: 350px;
    z-index: 10001;
    font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    overflow: hidden;
}

.day-tooltip-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 12px 16px;
    font-size: 0.95rem;
    font-weight: 600;
}

.day-tooltip-list {
    list-style: none;
    padding: 0;
    margin: 0;
    max-height: 250px;
    overflow-y: auto;
}

.day-tooltip-list li {
    padding: 10px 16px;
    border-bottom: 1px solid #f0f0f0;
    font-size: 0.85rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.day-tooltip-list li:last-child {
    border-bottom: none;
}

.day-tooltip-list li:hover {
    background: #f8f9fa;
}

.res-user {
    font-weight: 600;
    color: #2c3e50;
}

.res-time {
    color: #6c757d;
    font-size: 0.8rem;
}

.more-indicator {
    font-style: italic;
    color: #6c757d !important;
    justify-content: center !important;
}

.day-tooltip-footer {
    padding: 10px 16px;
    background: #f8f9fa;
    text-align: center;
    font-size: 0.8rem;
    color: #6c757d;
    font-style: italic;
    border-top: 1px solid #e0e0e0;
}

.tooltip-loading,
.tooltip-error {
    padding: 16px;
    text-align: center;
    color: #6c757d;
    font-size: 0.85rem;
}

/* Animation d'apparition */
@keyframes badgeAppear {
    from {
        opacity: 0;
        transform: scale(0.5);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.reservation-badge {
    animation: badgeAppear 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Responsive */
@media (max-width: 768px) {
    .reservation-badge {
        font-size: 0.7rem;
        min-width: 20px;
        height: 18px;
        padding: 2px 6px;
    }
    
    .day-tooltip {
        min-width: 240px;
        max-width: calc(100vw - 20px);
    }
}


/* =================================================================
   PROFIL - AJUSTEMENTS POUR PAGES AVEC HEADER
   ================================================================= */

/* Quand on a le header + nav, on ajuste le centrage vertical */
.login-page-body.with-header {
    min-height: calc(100vh - 200px); /* Soustrait la hauteur du header + nav */
    padding-top: 2rem;
    padding-bottom: 2rem;
}


/* =================================================================
   CENTRE D'ALERTES - DESIGN MODERNE
   ================================================================= */

/* En-t√™te des alertes */
.alerts-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 3rem;
    gap: 2rem;
    flex-wrap: wrap;
}

.alerts-title-section {
    flex: 1;
    min-width: 300px;
}

.alerts-subtitle {
    color: var(--texte-discret);
    font-size: 1rem;
    margin-top: 0.5rem;
}

/* Statistiques en cartes */
.alerts-stats {
    display: flex;
    gap: 1.5rem;
    flex-wrap: wrap;
}

.stat-card {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    min-width: 180px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    border-left: 4px solid;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.stat-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
}

.stat-card.stat-warning {
    border-left-color: #ed8936;
    background: linear-gradient(135deg, #fff 0%, #fff5ee 100%);
}

.stat-card.stat-danger {
    border-left-color: #e53e3e;
    background: linear-gradient(135deg, #fff 0%, #fff5f5 100%);
}

.stat-icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.stat-card.stat-warning .stat-icon {
    background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
}

.stat-card.stat-danger .stat-icon {
    background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
}

.stat-icon svg {
    fill: white;
}

.stat-content {
    display: flex;
    flex-direction: column;
}

.stat-value {
    font-size: 2rem;
    font-weight: 700;
    color: var(--texte-principal);
    line-height: 1;
}

.stat-label {
    font-size: 0.875rem;
    color: var(--texte-discret);
    margin-top: 0.25rem;
    font-weight: 500;
}

/* Sections d'alertes */
.alert-section {
    margin-bottom: 4rem;
}

.section-header {
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid var(--couleur-bordure);
}

.section-title-wrapper {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.5rem;
}

.section-icon {
    width: 24px;
    height: 24px;
    fill: var(--couleur-principale);
}

.section-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--texte-principal);
    margin: 0;
}

.section-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 32px;
    height: 32px;
    padding: 0 12px;
    border-radius: 16px;
    font-size: 0.875rem;
    font-weight: 700;
    color: white;
}

.section-badge.badge-warning {
    background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
}

.section-badge.badge-danger {
    background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
}

.section-description {
    color: var(--texte-discret);
    font-size: 0.95rem;
    margin: 0;
}

/* Grille des cartes d'alertes */
.alerts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 1.5rem;
}

/* Carte d'alerte */
.alert-card {
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    border: 2px solid transparent;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
}

.alert-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}

.alert-card.alert-card-warning {
    border-color: #ed8936;
}

.alert-card.alert-card-critical {
    border-color: #e53e3e;
}

.alert-card.alert-card-resolved {
    opacity: 0.7;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
}

/* Image de la carte */
.alert-card-image {
    position: relative;
    width: 100%;
    height: 180px;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    overflow: hidden;
}

.alert-card-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.alert-card-image-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.alert-card-image-placeholder svg {
    fill: #adb5bd;
    opacity: 0.5;
}

.alert-resolved-badge {
    position: absolute;
    top: 12px;
    right: 12px;
    background: #28a745;
    color: white;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 4px;
    box-shadow: 0 2px 8px rgba(40, 167, 69, 0.4);
}

.alert-resolved-badge svg {
    fill: white;
}

/* Contenu de la carte */
.alert-card-content {
    padding: 1.25rem;
    flex: 1;
}

.alert-card-title {
    font-size: 1.125rem;
    font-weight: 600;
    margin: 0 0 0.75rem 0;
}

.alert-card-title a {
    color: var(--texte-principal);
    text-decoration: none;
    transition: color 0.2s;
}

.alert-card-title a:hover {
    color: var(--couleur-principale);
}

.alert-card-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-bottom: 1rem;
}

.meta-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: var(--texte-discret);
}

.meta-item svg {
    fill: var(--texte-discret);
}

/* M√©triques de stock */
.alert-card-metrics {
    display: flex;
    gap: 1.5rem;
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--couleur-bordure);
}

.metric {
    display: flex;
    flex-direction: column;
}

.metric-label {
    font-size: 0.75rem;
    color: var(--texte-discret);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 0.25rem;
}

.metric-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--texte-principal);
}

.metric.metric-critical .metric-value {
    color: #e53e3e;
}

/* Info p√©remption */
.alert-expiry-info {
    margin-top: 1rem;
    padding: 1rem;
    background: #f8f9fa;
    border-radius: 8px;
}

.expiry-date {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.95rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
}

.expiry-date.expiry-critical {
    color: #e53e3e;
}

.expiry-date.expiry-warning {
    color: #ed8936;
}

.expiry-date svg {
    fill: currentColor;
}

.expiry-status {
    font-size: 0.875rem;
    padding: 6px 12px;
    border-radius: 6px;
    display: inline-block;
}

.expiry-status.status-critical {
    background: #fff5f5;
    color: #c53030;
    border: 1px solid #feb2b2;
}

.expiry-status.status-warning {
    background: #fffaf0;
    color: #c05621;
    border: 1px solid #fbd38d;
}

.alert-quantity-badge {
    margin-top: 0.75rem;
    display: inline-block;
    background: var(--couleur-principale);
    color: white;
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 0.875rem;
    font-weight: 600;
}

/* Actions de la carte */
.alert-card-actions {
    padding: 1rem 1.25rem;
    background: #f8f9fa;
    border-top: 1px solid var(--couleur-bordure);
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.checkbox-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: var(--texte-principal);
    cursor: pointer;
    user-select: none;
}

.checkbox-label input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--couleur-principale);
}

.checkbox-label span {
    font-weight: 500;
}

.btn-suggest {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    width: 100%;
    padding: 0.75rem 1rem;
    background: linear-gradient(135deg, var(--couleur-principale) 0%, #163a6e 100%);
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-suggest:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(31, 59, 115, 0.3);
}

.btn-suggest svg {
    fill: white;
}

/* √âtat vide */
.empty-alerts {
    text-align: center;
    padding: 4rem 2rem;
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.empty-alerts svg {
    fill: var(--couleur-succes);
    opacity: 0.3;
    margin-bottom: 1.5rem;
}

.empty-alerts h4 {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--texte-principal);
    margin: 0 0 0.5rem 0;
}

.empty-alerts p {
    color: var(--texte-discret);
    margin: 0;
}

/* Responsive */
@media (max-width: 1200px) {
    .alerts-grid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    }
}

@media (max-width: 768px) {
    .alerts-header {
        flex-direction: column;
    }
    
    .alerts-stats {
        width: 100%;
        justify-content: space-between;
    }
    
    .stat-card {
        flex: 1;
        min-width: 0;
    }
    
    .alerts-grid {
        grid-template-columns: 1fr;
    }
    
    .alert-card-metrics {
        gap: 1rem;
    }
}

@media (max-width: 480px) {
    .alerts-stats {
        flex-direction: column;
    }
    
    .stat-card {
        width: 100%;
    }
}


/* =================================================================
   MODALE DE SUGGESTION - DESIGN MODERNE BOOTSTRAP
   ================================================================= */

#suggestionModal .modal-header {
    background: linear-gradient(135deg, var(--couleur-principale) 0%, #163a6e 100%);
    color: white;
    border-bottom: none;
}

#suggestionModal .modal-title {
    display: flex;
    align-items: center;
    font-weight: 600;
}

#suggestionModal .btn-close {
    filter: invert(1) grayscale(100%) brightness(200%);
}

#suggestionModal .modal-footer {
    border-top: 1px solid var(--couleur-bordure);
}

/* Carte d'info de l'objet */
.suggestion-info-card {
    display: flex;
    gap: 1rem;
    padding: 1.25rem;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 12px;
    border-left: 4px solid var(--couleur-principale);
}

.suggestion-icon {
    width: 56px;
    height: 56px;
    background: white;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.suggestion-icon svg {
    fill: var(--couleur-principale);
}

.suggestion-info-content {
    flex: 1;
}

.suggestion-info-content h6 {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--texte-principal);
}

/* Champs du formulaire */
#suggestionModal .form-label {
    display: flex;
    align-items: center;
    color: var(--texte-principal);
    margin-bottom: 0.5rem;
}

#suggestionModal .form-label svg {
    fill: var(--couleur-principale);
}

#suggestionModal .form-control:focus {
    border-color: var(--couleur-principale);
    box-shadow: 0 0 0 0.25rem rgba(31, 59, 115, 0.15);
}

#suggestionModal .form-control-lg {
    font-size: 1.125rem;
    font-weight: 600;
}

/* Boutons */
#suggestionModal .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    font-weight: 600;
    border-radius: 8px;
    transition: all 0.3s ease;
}

#suggestionModal .btn svg {
    fill: currentColor;
}

#suggestionModal .btn-primary {
    background: linear-gradient(135deg, var(--couleur-principale) 0%, #163a6e 100%);
    border: none;
}

#suggestionModal .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(31, 59, 115, 0.3);
}

#suggestionModal .btn-primary:disabled {
    background: #6c757d;
    transform: none;
    cursor: not-allowed;
}

#suggestionModal .btn-secondary {
    background: #e9ecef;
    color: var(--texte-principal);
    border: 1px solid #dee2e6;
}

#suggestionModal .btn-secondary:hover {
    background: #dee2e6;
    color: var(--texte-principal);
}

/* Animation de chargement du bouton */
#suggestionModal .btn-primary.loading {
    position: relative;
    color: transparent;
}

#suggestionModal .btn-primary.loading::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    top: 50%;
    left: 50%;
    margin-left: -10px;
    margin-top: -10px;
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-top-color: white;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}


/* ================================*/
/* PAGE ADMINISTRATION */
/* ================================*/
/* =================================================================
   PAGE ADMINISTRATION - DESIGN MODERNE
   ================================================================= */

/* En-t√™te Hero */
.admin-hero {
    background: linear-gradient(135deg, var(--couleur-principale) 0%, #163a6e 100%);
    color: white;
    padding: 3rem 2rem;
    border-radius: 16px;
    margin-bottom: 2rem;
    box-shadow: 0 8px 32px rgba(31, 59, 115, 0.2);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 2rem;
}

.admin-hero-content {
    display: flex;
    align-items: center;
    gap: 2rem;
}

.admin-hero-icon {
    width: 80px;
    height: 80px;
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.admin-hero-icon svg {
    fill: white;
}

.admin-hero-title {
    font-size: 2.5rem;
    font-weight: 700;
    margin: 0 0 0.5rem 0;
    line-height: 1.2;
}

.admin-hero-subtitle {
    font-size: 1.125rem;
    opacity: 0.9;
    margin: 0;
    font-weight: 400;
}

/* Statut de la licence */
.license-status {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem 1.5rem;
    border-radius: 12px;
    font-weight: 600;
    font-size: 1rem;
    backdrop-filter: blur(10px);
    border: 2px solid rgba(255, 255, 255, 0.2);
}

.license-status svg {
    fill: currentColor;
}

.license-status.license-pro {
    background: rgba(255, 215, 0, 0.2);
    color: #FFD700;
}

.license-status.license-free {
    background: rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 0.9);
}

/* Banni√®re d'info */
.admin-info-banner {
    background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
    border-left: 4px solid #1976d2;
    padding: 1.25rem 1.5rem;
    border-radius: 8px;
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 3rem;
}

.admin-info-banner svg {
    fill: #1976d2;
    flex-shrink: 0;
}

.admin-info-banner p {
    margin: 0;
    color: #1565c0;
    font-size: 1rem;
    line-height: 1.6;
}

/* Cat√©gories admin */
.admin-category {
    margin-bottom: 4rem;
}

.category-header {
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 3px solid var(--couleur-bordure);
}

.category-title {
    display: flex;
    align-items: center;
    gap: 1rem;
    font-size: 2rem;
    font-weight: 700;
    color: var(--texte-principal);
    margin: 0 0 0.75rem 0;
}

.category-title svg {
    fill: var(--couleur-principale);
}

.category-description {
    font-size: 1.0625rem;
    color: var(--texte-discret);
    margin: 0;
}

/* Grille des cartes */
.admin-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 2rem;
}

/* Cartes admin */
.admin-card {
    background: white;
    border-radius: 16px;
    padding: 2rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    border: 2px solid transparent;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
}

.admin-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--couleur-principale), #667eea);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.4s ease;
}

.admin-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15);
    border-color: var(--couleur-principale);
}

.admin-card:hover::before {
    transform: scaleX(1);
}

/* Carte large (pour export inventaire) */
.admin-card.card-wide {
    grid-column: span 2;
}

/* Ic√¥nes des cartes */
.card-icon-wrapper {
    width: 64px;
    height: 64px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1.5rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.card-icon-wrapper svg {
    fill: white;
}

.card-icon-blue { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
.card-icon-purple { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); }
.card-icon-orange { background: linear-gradient(135deg, #ff9a56 0%, #ff6a88 100%); }
.card-icon-green { background: linear-gradient(135deg, #48c6ef 0%, #6f86d6 100%); }
.card-icon-teal { background: linear-gradient(135deg, #0ba360 0%, #3cba92 100%); }
.card-icon-indigo { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
.card-icon-pink { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
.card-icon-cyan { background: linear-gradient(135deg, #30cfd0 0%, #330867 100%); }
.card-icon-gold { background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); }
.card-icon-gray { background: linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%); }
.card-icon-red { background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%); }
.card-icon-amber { background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); }

/* Contenu des cartes */
.card-title {
    font-size: 1.375rem;
    font-weight: 600;
    color: var(--texte-principal);
    margin: 0 0 0.75rem 0;
    line-height: 1.3;
}

.card-description {
    color: var(--texte-discret);
    font-size: 1rem;
    line-height: 1.6;
    margin: 0 0 1.5rem 0;
    flex: 1;
}

/* Footer des cartes */
.card-footer {
    margin-top: auto;
    padding-top: 1.5rem;
    border-top: 1px solid var(--couleur-bordure);
}

.card-footer-multiple {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
}

/* Boutons des cartes */
.btn-card {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.875rem 1.5rem;
    border-radius: 10px;
    font-weight: 600;
    font-size: 0.95rem;
    text-decoration: none;
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
    white-space: nowrap;
}

.btn-card svg {
    fill: currentColor;
    transition: transform 0.3s ease;
}

.btn-card:hover svg {
    transform: translateX(4px);
}

.btn-card.btn-primary {
    background: linear-gradient(135deg, var(--couleur-principale) 0%, #163a6e 100%);
    color: white;
    box-shadow: 0 4px 12px rgba(31, 59, 115, 0.3);
}

.btn-card.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(31, 59, 115, 0.4);
}

.btn-card.btn-secondary {
    background: #e9ecef;
    color: var(--texte-principal);
    border: 2px solid #dee2e6;
}

.btn-card.btn-secondary:hover {
    background: #dee2e6;
    border-color: #ced4da;
}

.btn-card.btn-success {
    background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
    color: white;
    box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
}

.btn-card.btn-success:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
}

.btn-card.btn-gold {
    background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
    color: #000;
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
}

.btn-card.btn-gold:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
}

.btn-card.btn-disabled {
    background: #e9ecef;
    color: #6c757d;
    cursor: not-allowed;
    opacity: 0.6;
}

/* Carte de licence sp√©ciale */
.admin-card.card-license {
    background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
    border: 2px solid #e9ecef;
}

.license-header {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
}

.license-badge {
    display: inline-block;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 700;
    letter-spacing: 0.5px;
    margin-top: 0.5rem;
}

.license-badge.badge-pro {
    background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
    color: #000;
}

.license-badge.badge-free {
    background: #e9ecef;
    color: #6c757d;
}

.instance-id-box {
    background: #f8f9fa;
    padding: 1rem 1.25rem;
    border-radius: 8px;
    margin-bottom: 1.5rem;
    border: 1px dashed #dee2e6;
}

.instance-label {
    display: block;
    font-size: 0.875rem;
    color: var(--texte-discret);
    margin-bottom: 0.5rem;
    font-weight: 500;
}

#instance-id-code {
    display: block;
    font-family: 'Courier New', monospace;
    font-size: 0.95rem;
    color: var(--couleur-principale);
    background: white;
    padding: 0.75rem 1rem;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
    border: 1px solid #dee2e6;
}

#instance-id-code:hover {
    background: #e3f2fd;
    border-color: var(--couleur-principale);
}

/* Formulaire de licence */
.license-form {
    display: flex;
    gap: 0.75rem;
}

.license-form input {
    flex: 1;
    padding: 0.875rem 1rem;
    border: 2px solid #dee2e6;
    border-radius: 8px;
    font-size: 0.95rem;
}

.license-form input:focus {
    outline: none;
    border-color: var(--couleur-principale);
}

/* Carte de base de donn√©es */
.admin-card.card-database {
    border: 2px solid #fee;
}

.alert-warning {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    background: #fff3cd;
    border-left: 4px solid #ffc107;
    padding: 1rem 1.25rem;
    border-radius: 8px;
    margin: 1.5rem 0;
}

.alert-warning svg {
    fill: #856404;
    flex-shrink: 0;
}

.alert-warning span {
    color: #856404;
    font-size: 0.9375rem;
    font-weight: 500;
}

.inline-form {
    display: inline-block;
}

/* Responsive */
@media (max-width: 1200px) {
    .admin-grid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    }
    
    .admin-card.card-wide {
        grid-column: span 1;
    }
}

@media (max-width: 768px) {
    .admin-hero {
        flex-direction: column;
        align-items: flex-start;
        padding: 2rem 1.5rem;
    }
    
    .admin-hero-content {
        flex-direction: column;
        align-items: flex-start;
        gap: 1.5rem;
    }
    
    .admin-hero-icon {
        width: 64px;
        height: 64px;
    }
    
    .admin-hero-title {
        font-size: 2rem;
    }
    
    .admin-hero-subtitle {
        font-size: 1rem;
    }
    
    .license-status {
        width: 100%;
        justify-content: center;
    }
    
    .admin-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    .admin-card {
        padding: 1.5rem;
    }
    
    .category-title {
        font-size: 1.5rem;
    }
    
    .card-footer-multiple {
        flex-direction: column;
    }
    
    .card-footer-multiple .btn-card {
        width: 100%;
    }
    
    .license-form {
        flex-direction: column;
    }
}

@media (max-width: 480px) {
    .admin-hero-title {
        font-size: 1.75rem;
    }
    
    .card-title {
        font-size: 1.25rem;
    }
}

/* Animation d'entr√©e des cartes */
@keyframes cardFadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.admin-card {
    animation: cardFadeIn 0.5s ease forwards;
}

.admin-card:nth-child(1) { animation-delay: 0.05s; }
.admin-card:nth-child(2) { animation-delay: 0.1s; }
.admin-card:nth-child(3) { animation-delay: 0.15s; }
.admin-card:nth-child(4) { animation-delay: 0.2s; }
.admin-card:nth-child(5) { animation-delay: 0.25s; }
.admin-card:nth-child(6) { animation-delay: 0.3s; }


/* =================================================================
   CARTES UTILISATEURS - DESIGN MODERNE
   ================================================================= */
.user-card {
	background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    border: 1px solid #e9ecef;
    display: flex;
    align-items: center;
    gap: 1rem; /* Espace entre les √©l√©ments */
    flex-wrap: wrap; /* CRUCIAL : Permet aux boutons de passer √† la ligne si manque de place */   
    margin-bottom: 1rem;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s;
    position: relative;
    overflow: hidden; /* Modifi√© de visible √† hidden pour l'effet */
}

.user-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(135deg, var(--couleur-principale, #1f3b73), #667eea);
    transform: scaleY(0);
    transition: transform 0.3s ease;
}
    
.user-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 28px rgba(31, 59, 115, 0.15);
    border-color: var(--couleur-principale, #1f3b73);
}

.user-card:hover::before {
    transform: scaleY(1);
}



.user-avatar {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #1f3b73 0%, #667eea 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    flex-shrink: 0; /* L'avatar ne doit pas r√©tr√©cir */
}

.user-avatar svg { width: 28px; height: 28px; fill: white; }

.user-info { 
    flex-grow: 1; /* Prend l'espace disponible */
    min-width: 200px; /* Largeur mini pour √©viter l'√©crasement du texte */
}

.user-name { font-size: 1.1rem; font-weight: 600; margin: 0; color: #2c3e50; }

.user-email { 
    font-size: 0.9rem; 
    color: #6c757d; 
    margin: 2px 0 5px 0; 
    display: flex; 
    align-items: center; 
    gap: 5px;
    word-break: break-all; /* √âvite que l'email ne pousse tout dehors */
}

.user-email svg { width: 14px; height: 14px; fill: currentColor; flex-shrink: 0; }

.role-badge {
    display: inline-flex; align-items: center; gap: 4px;
    padding: 4px 10px; border-radius: 20px;
    font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;
}

.role-admin { background-color: #fff3cd; color: #856404; border: 1px solid #ffeeba; }

.role-utilisateur { background-color: #e9ecef; color: #495057; border: 1px solid #dee2e6; }

.role-badge svg { width: 12px; height: 12px; fill: currentColor; }

.user-actions {
	display: flex;
    gap: 8px;
    margin-left: auto; /* Pousse le bloc √† droite */
    align-items: center;
    flex-shrink: 0; /* CRUCIAL : Emp√™che les boutons d'√™tre √©cras√©s/cach√©s */
}

.btn-icon-only {
    width: 36px;
    height: 36px;
    padding: 0;
    border: 1px solid #dee2e6;
    background-color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    color: #6c757d;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.btn-icon-only svg {
   width: 18px;
   height: 18px;
   fill: currentColor;
   display: block;
}

.btn-icon-only:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }

.btn-edit:hover { color: #1f3b73; border-color: #1f3b73; background-color: #eef2ff; }
.btn-reset:hover { color: #495057; border-color: #495057; background-color: #f8f9fa; }
.btn-promote { color: #ffc107; border-color: #ffc107; } 
.btn-promote:hover { color: #ba8b00; background-color: #fff3cd; }
.btn-delete-danger { color: #dc3545; border-color: #dc3545; } 
.btn-delete-danger:hover { color: #a71d2a; background-color: #f8d7da; }

.btn-icon-only.btn-edit:hover svg {
    fill: var(--couleur-principale);
}

.btn-icon-only.btn-promote:hover svg {
    fill: #FFA500;
}

.btn-icon-only.btn-reset:hover svg {
    fill: var(--couleur-succes);
}

.btn-icon-only.btn-delete-danger:hover svg {
    fill: var(--couleur-erreur);
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Responsive */
@media (max-width: 768px) {
.user-card { flex-direction: column; text-align: center; }
.user-email { justify-content: center; }
.user-actions { margin-left: 0; width: 100%; justify-content: center; margin-top: 10px; }
}


/* PAGE REGISTER */
body.login-page-body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            /* On garde le centrage d√©fini dans style.css, on change juste la couleur de fond */
        }

.register-container {
            width: 100%;
            max-width: 500px;
        }

.register-card {
border: none;
border-radius: 15px;
box-shadow: 0 10px 30px rgba(31, 59, 115, 0.15); 
overflow: hidden;
background: var(--fond-element); /* Utilise le blanc d√©fini dans ton CSS */
width: 100%;
max-width: 450px;
}

.register-header {
            /* UTILISATION DE TES VARIABLES GLOBALES */
            background: linear-gradient(135deg, var(--couleur-principale) 0%, var(--couleur-secondaire) 100%);
            padding: 2rem 1.5rem;
            text-align: center;
            color: var(--texte-inverse); /* Blanc d√©fini dans ton CSS */
        }

        .register-logo {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(5px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .register-logo svg {
            fill: var(--texte-inverse);
            width: 35px;
            height: 35px;
        }

        /* Ajustement des Floating Labels de Bootstrap */
        .form-floating > label {
            padding-left: 1rem;
            color: var(--texte-discret);
        }

        .register-header h1 {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .register-header p {
            font-size: 0.95rem;
            opacity: 0.95;
            margin: 0;
        }

        .register-body {
            padding: 2rem;
        }

        .form-label {
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-label .required {
            color: var(--danger-color);
        }

        .form-control {
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            font-size: 0.95rem;
            transition: all 0.2s;
        }

        .form-control:focus {
            border-color: var(--couleur-principale);
            box-shadow: 0 0 0 0.25rem rgba(31, 59, 115, 0.15); /* Version transparente de ton bleu */
        }

        .input-group-text {
            background: #f3f4f6;
            border: 2px solid #e5e7eb;
            border-right: none;
            color: var(--secondary-color);
        }

        .input-group .form-control {
            border-left: none;
        }

        .input-group:focus-within .input-group-text {
            border-color: var(--primary-color);
            background: #eff6ff;
            color: var(--primary-color);
        }

        .text-uppercase {
            text-transform: uppercase;
        }

        .password-strength {
            margin-top: 0.5rem;
            font-size: 0.85rem;
        }

        .strength-bar {
            height: 4px;
            background: #e9ecef;
            border-radius: 2px;
            margin-top: 8px;
            overflow: hidden;
        }

        .strength-bar-fill {
            height: 100%;
            width: 0;
            transition: width 0.3s ease, background-color 0.3s ease;
        }

        .strength-weak { background: var(--danger-color); }
        .strength-medium { background: var(--warning-color); }
        .strength-strong { background: var(--success-color); }

        .password-requirements {
            font-size: 0.75rem;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin-top: 5px;
            border: 1px solid var(--couleur-bordure);
        }

        .password-requirements h6 {
            font-size: 0.85rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
        }

         .requirement-item {
            margin-bottom: 2px;
            color: var(--texte-discret);
            transition: color 0.2s;
        }

        .requirement-item.met {
            color: var(--couleur-succes); /* Utilise ton vert d√©fini */
            font-weight: 600;
        }

        .requirement-item i {
            font-size: 0.8rem;
            margin-right: 4px;
        }

        .btn-register {
            background-color: var(--couleur-principale);
            border: none;
            padding: 12px;
            font-weight: 600;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
        }

        .btn-register:hover {
            background-color: var(--couleur-secondaire);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(1, 37, 125, 0.3);
        }

        .btn-register:active {
            transform: translateY(0);
        }

        .register-footer {
            text-align: center;
            padding-top: 1.5rem;
            margin-top: 1.5rem;
            border-top: 1px solid #e5e7eb;
        }

        .register-footer p {
            color: #6b7280;
            margin: 0;
        }

        .register-footer a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
        }

        .register-footer a:hover {
            text-decoration: underline;
        }

        .alert {
            border: none;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .alert-danger, .alert-error {
            background: #fef2f2;
            color: #991b1b;
            border-left: 3px solid var(--danger-color);
        }

        .alert-success {
            background: #f0fdf4;
            color: #166534;
            border-left: 3px solid var(--success-color);
        }

        .form-text {
            font-size: 0.85rem;
            color: #6b7280;
            margin-top: 0.25rem;
        }

        .btn-outline-secondary {
            border-color: #e5e7eb;
        }

        @media (max-width: 576px) {
            body {
                padding: 1rem;
            }

            .register-header {
                padding: 2rem 1.5rem;
            }

            .register-body {
                padding: 1.5rem;
            }

            .register-header h1 {
                font-size: 1.5rem;
            }
        }

/* Style sp√©cial pour le code d'invitation */
        #code_invitation {
            letter-spacing: 2px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: var(--couleur-principale);
            background-color: #f8f9fa;
            border: 2px dashed var(--couleur-bordure);
        }
        #code_invitation:focus {
            background-color: var(--fond-element);
            border-color: var(--couleur-principale);
        }

/* =======================================================
/*  PAGE GESTION Kits
/*========================================================*/
.kit-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        border: 1px solid #e9ecef;
        
        /* FLEXBOX ROBUSTE */
        display: flex;
        align-items: center;
        gap: 1.5rem;
        flex-wrap: wrap; /* Permet le retour √† la ligne si n√©cessaire */
        
        margin-bottom: 1rem;
        transition: transform 0.2s, box-shadow 0.2s;
        position: relative;
        overflow: visible;
    }
    
    .kit-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        border-color: var(--couleur-principale, #1f3b73);
    }

    /* Ic√¥ne Kit */
    .kit-icon {
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, #6f42c1 0%, #a8edea 100%);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        flex-shrink: 0; /* Ne r√©tr√©cit jamais */
    }
    .kit-icon svg { width: 28px; height: 28px; fill: white; }

    /* Infos */
    .kit-info { 
        flex-grow: 1; 
        min-width: 200px; /* Largeur mini pour √©viter l'√©crasement */
    }
    
    .kit-name { 
        font-size: 1.1rem; 
        font-weight: 600; 
        margin: 0; 
        color: #2c3e50; 
        text-decoration: none; 
        display: block;
    }
    .kit-name:hover { color: var(--couleur-principale, #1f3b73); text-decoration: underline; }
    
    .kit-desc { 
        font-size: 0.9rem; 
        color: #6c757d; 
        margin: 4px 0 8px 0;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* Badge Compteur */
    .count-badge {
        display: inline-flex; align-items: center; gap: 6px;
        padding: 4px 10px; border-radius: 20px;
        font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;
        background-color: #f8f9fa; color: #495057; border: 1px solid #dee2e6;
    }
    .count-badge svg { width: 14px; height: 14px; fill: currentColor; }

    /* --- ACTIONS (CORRIG√â) --- */
    .kit-actions {
        display: flex;
        gap: 8px;
        margin-left: auto; /* Pousse tout √† droite */
        align-items: center;
        flex-shrink: 0; /* Emp√™che le r√©tr√©cissement */
    }

    /* Boutons ronds */
    .btn-icon-only {
        width: 36px; height: 36px; padding: 0;
        border: 1px solid #dee2e6; background-color: white; border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        cursor: pointer; transition: all 0.2s ease; color: #6c757d;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        text-decoration: none; /* Important pour les liens <a> */
    }
    
    .btn-icon-only svg { 
        width: 18px; height: 18px; 
        fill: currentColor; 
        display: block; 
    }
    
    .btn-icon-only:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }

    /* Couleurs sp√©cifiques */
    .btn-edit:hover { color: #1f3b73; border-color: #1f3b73; background-color: #eef2ff; }
    .btn-delete:hover { color: #dc3545; border-color: #dc3545; background-color: #f8d7da; }

    /* Responsive */
    @media (max-width: 768px) {
        .kit-card { flex-direction: column; text-align: center; gap: 1rem; }
        .kit-actions { margin-left: 0; width: 100%; justify-content: center; }
    }

/* ==============================================================
/* PAGE MODIFIER KITS 
/* ============================================================*/
.kit-edit-card {
        background: white;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        border: 1px solid #e9ecef;
        height: 100%; /* Pour que les deux colonnes aient la m√™me hauteur */
        display: flex;
        flex-direction: column;
        overflow: hidden; /* Pour que le header ne d√©passe pas des bords arrondis */
    }

    /* Header de la carte */
    .kit-edit-header {
        padding: 1.25rem;
        border-bottom: 1px solid #e9ecef;
        background-color: #f8f9fa;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    /* Titre dans le header */
    .kit-edit-title {
        font-size: 1.1rem;
        font-weight: 600;
        margin: 0;
        color: #2c3e50;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    /* Corps de la carte */
    .kit-edit-body {
        padding: 0; /* On retire le padding pour que le tableau touche les bords */
        flex-grow: 1;
        overflow-y: auto; /* Scroll interne */
        max-height: 650px;
        background-color: #fff;
    }

    /* Zone de contenu avec padding (pour la recherche par ex) */
    .kit-edit-toolbar {
        padding: 1rem;
        background-color: #fff;
        border-bottom: 1px solid #f1f3f5;
        position: sticky;
        top: 0;
        z-index: 10;
    }

    /* Tableau sp√©cifique */
    .kit-edit-table {
        width: 100%;
        margin-bottom: 0;
    }
    .kit-edit-table th {
        font-size: 0.8rem;
        text-transform: uppercase;
        color: #6c757d;
        font-weight: 600;
        background-color: #f8f9fa;
        padding: 0.75rem 1rem;
        border-bottom: 1px solid #e9ecef;
        position: sticky;
        top: 0; /* Header fixe si pas de toolbar */
    }
    /* Si toolbar pr√©sente, ajuster le top */
    .kit-edit-body:has(.kit-edit-toolbar) .kit-edit-table th {
        top: 0; /* Le contexte de scroll change, c'est ok */
    }

    .kit-edit-table td {
        vertical-align: middle;
        padding: 0.75rem 1rem;
        border-bottom: 1px solid #f1f3f5;
    }
    .kit-edit-table tr:last-child td { border-bottom: none; }
    .kit-edit-table tr:hover { background-color: #f8f9fa; }

    /* Input quantit√© sp√©cifique */
    .kit-qty-input {
        width: 70px;
        text-align: center;
        border: 1px solid #ced4da;
        border-radius: 6px;
        padding: 4px;
        font-weight: 500;
    }
    .kit-qty-input:focus {
        border-color: var(--couleur-principale);
        outline: none;
        box-shadow: 0 0 0 2px rgba(31, 59, 115, 0.1);
    }

    /* Barre de recherche sp√©cifique */
    .kit-search-wrapper {
        position: relative;
    }
    .kit-search-wrapper i {
        position: absolute;
        left: 12px;
        top: 50%;
        transform: translateY(-50%);
        color: #adb5bd;
    }
    .kit-search-input {
        padding-left: 35px;
        border-radius: 20px;
        background-color: #f8f9fa;
        border: 1px solid #e9ecef;
    }
    .kit-search-input:focus {
        background-color: #fff;
        border-color: #b1b7c1;
        box-shadow: none;
    }

/* =======================================
/* PAGE GESTION ECHEANCES 
/* =====================================*/
 /* Tableaux */
    .echeance-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
    }
    .echeance-table th {
        background-color: #f8f9fa;
        color: #6c757d;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.8rem;
        padding: 1rem;
        border-bottom: 2px solid #e9ecef;
    }
    .echeance-table td {
        padding: 1rem;
        vertical-align: middle;
        border-bottom: 1px solid #f1f3f5;
        background-color: white;
    }
    .echeance-table tr:hover td {
        background-color: #f8f9fa;
    }

    /* Statuts et couleurs */
    .status-badge {
        display: inline-flex; align-items: center; gap: 6px;
        padding: 6px 12px; border-radius: 20px;
        font-size: 0.8rem; font-weight: 600;
    }
    .status-ok { background-color: #d1e7dd; color: #0f5132; }
    .status-warning { background-color: #fff3cd; color: #856404; }
    .status-danger { background-color: #f8d7da; color: #842029; }
    .status-done { background-color: #e2e3e5; color: #41464b; text-decoration: line-through; opacity: 0.7; }

    /* Ligne trait√©e (gris√©e) */
    tr.row-done td {
        color: #adb5bd;
    }
    tr.row-done td strong {
        font-weight: normal;
    }

    /* Actions : Alignement parfait */
    .actions-wrapper {
        display: flex;
        justify-content: flex-end; /* Align√© √† droite */
        align-items: center;
        gap: 8px; /* Espace entre les boutons */
    }

    .btn-icon-only {
        width: 32px; height: 32px; padding: 0;
        border-radius: 50%; display: inline-flex; align-items: center; justify-content: center;
        transition: all 0.2s;
        border: 1px solid transparent; /* Pour √©viter le saut au hover */
    }
    .btn-icon-only:hover { transform: translateY(-2px); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }


/* ===================================================
/* PAGE BUDGET ADMIN 
/* =================================================*/
.budget-summary-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        border: 1px solid #e9ecef;
        height: auto;
        margin-bottom: 1.5rem; 
    }
    
    .budget-stat-list {
        list-style: none;
        padding: 0;
        margin: 1.5rem 0;
    }
    
    .budget-stat-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem 0;
        border-bottom: 1px dashed #e9ecef;
    }
    .budget-stat-item:last-child { border-bottom: none; }
    
    .stat-label { color: #6c757d; font-size: 0.95rem; }
    .stat-value { font-weight: 700; font-size: 1.1rem; font-family: 'Courier New', monospace; }
    
    .val-positive { color: #198754; }
    .val-negative { color: #dc3545; }
    .val-neutral { color: #0d6efd; }

    /* Actions rapides */
    .budget-actions {
        display: grid;
        gap: 0.5rem;
    }

    /* Tableau D√©penses */
    .budget-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
    }
    .budget-table th {
        background-color: #f8f9fa;
        color: #6c757d;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.8rem;
        padding: 1rem;
        border-bottom: 2px solid #e9ecef;
    }
    .budget-table td {
        padding: 1rem;
        vertical-align: middle;
        border-bottom: 1px solid #f1f3f5;
        background-color: white;
    }
    .budget-table tr:hover td { background-color: #f8f9fa; }

    /* Boutons actions tableau */
    .btn-icon-only {
        width: 32px; height: 32px; padding: 0;
        border-radius: 50%; display: inline-flex; align-items: center; justify-content: center;
        transition: all 0.2s;
    }
    .btn-icon-only:hover { transform: translateY(-2px); }

    /* Zone Export */
    .export-zone {
        background-color: #f8f9fa;
        border-radius: 8px;
        padding: 1rem;
        margin-top: 1rem;
        border: 1px solid #e9ecef;
    }


/* ===================================================
   PAGE FOURNISSEURS
   =================================================*/
.fournisseur-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
    }
    .fournisseur-table th {
        background-color: #f8f9fa;
        color: #6c757d;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.8rem;
        padding: 1rem;
        border-bottom: 2px solid #e9ecef;
    }
    .fournisseur-table td {
        padding: 1rem;
        vertical-align: middle;
        border-bottom: 1px solid #f1f3f5;
        background-color: white;
    }
    .fournisseur-table tr:hover td {
        background-color: #f8f9fa;
    }

    /* Logo Fournisseur */
    .fournisseur-logo-wrapper {
        width: 50px;
        height: 50px;
        border-radius: 8px;
        border: 1px solid #e9ecef;
        background-color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        padding: 4px;
    }
    .fournisseur-logo {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
    }
    .fournisseur-logo-placeholder {
        color: #adb5bd;
        font-size: 1.5rem;
    }

    /* Lien site web */
    .website-link {
        color: #0d6efd;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 5px;
        font-size: 0.9rem;
    }
    .website-link:hover { text-decoration: underline; }

    /* Actions */
    .btn-icon-only {
        width: 32px; height: 32px; padding: 0;
        border-radius: 50%; display: inline-flex; align-items: center; justify-content: center;
        transition: all 0.2s;
    }
    .btn-icon-only:hover { transform: translateY(-2px); }

.supplier-item {
    transition: background-color 0.2s ease;
    border-bottom: 1px solid #f1f5f9;
}
.supplier-item:last-child {
    border-bottom: none;
}
.supplier-item:hover {
    background-color: #f8f9fa;
}

.supplier-avatar {
    width: 48px;
    height: 48px;
    border-radius: 12px; /* Carr√© arrondi moderne */
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 1.2rem;
    color: var(--couleur-principale);
    background-color: #eef2ff; /* Fond bleu tr√®s clair */
    border: 1px solid #e0e7ff;
    overflow: hidden;
    flex-shrink: 0;
}

.supplier-logo-img {
    width: 100%;
    height: 100%;
    object-fit: contain; /* Garde les proportions du logo */
    padding: 4px;
    background: white;
}

.supplier-link {
    color: #64748b;
    text-decoration: none;
    font-size: 0.85rem;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    transition: color 0.2s;
}
.supplier-link:hover {
    color: var(--couleur-principale);
}


/* ================================================
   PAGE IMPORTATION EN MASSE
   ==============================================*/
    /* Carte Instructions */
    .import-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        border: 1px solid #e9ecef;
        height: 100%;
    }

    .step-number {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        background-color: #eef2ff;
        color: #4f46e5;
        border-radius: 50%;
        font-weight: 700;
        margin-right: 10px;
    }

    /* Zone de Drop */
    .file-drop-zone {
        border: 2px dashed #cbd5e1;
        border-radius: 12px;
        padding: 3rem 1.5rem;
        text-align: center;
        background-color: #f8fafc;
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
    }

    .file-drop-zone:hover, .file-drop-zone.dragover {
        border-color: #4f46e5;
        background-color: #eef2ff;
    }

    .file-drop-zone.file-selected {
        border-color: #10b981;
        background-color: #ecfdf5;
    }

    .file-input {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        cursor: pointer;
    }

    .drop-icon {
        font-size: 3rem;
        color: #94a3b8;
        margin-bottom: 1rem;
        transition: color 0.3s;
    }

    .file-drop-zone:hover .drop-icon { color: #4f46e5; }
    .file-drop-zone.file-selected .drop-icon { color: #10b981; }

    /* Listes d'aide */
    .help-list {
        list-style: none;
        padding: 0;
        margin-top: 1rem;
    }
    .help-list li {
        position: relative;
        padding-left: 1.5rem;
        margin-bottom: 0.5rem;
        color: #64748b;
        font-size: 0.9rem;
    }
    .help-list li::before {
        content: "‚Ä¢";
        color: #4f46e5;
        font-weight: bold;
        position: absolute;
        left: 0;
    }


/* =========================================
   TOAST Premium
   =======================================*/
.toast-container {
    z-index: 11000;
}

.toast {
    border: none;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); /* Ombre un peu plus marqu√©e */
    margin-bottom: 10px;
}

/* Force le texte en BLANC et GRAS pour les toasts color√©s */
.toast.text-bg-success,
.toast.text-bg-danger,
.toast.text-bg-warning,
.toast.text-bg-primary {
    color: #ffffff !important;
    font-weight: 600 !important; /* Gras mais pas trop */
}

/* On s'assure que les liens dans les toasts sont aussi blancs */
.toast.text-bg-success a,
.toast.text-bg-danger a {
    color: #ffffff;
    text-decoration: underline;
}

/* Bouton de fermeture bien blanc */
.toast .btn-close {
    filter: invert(1) grayscale(100%) brightness(200%);
    opacity: 0.8;
}
.toast .btn-close:hover {
    opacity: 1;
}

/* =====================================================
   BOUTON SUGG√âRER (Style Premium)
   ===================================================*/
.btn-suggest {
    /* Fond d√©grad√© Jaune/Or */
    background: linear-gradient(135deg, #ffc107 0%, #ffca2c 100%);
    border: none;
    
    /* Typographie */
    color: #212529 !important;
    font-weight: 700 !important;
    font-size: 0.95rem; /* L√©g√®rement r√©duit pour l'harmonie */
    text-transform: uppercase;
    letter-spacing: 0.5px;
    
    /* Forme */
    padding: 12px 20px;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(255, 193, 7, 0.25);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    
    /* --- CORRECTION ALIGNEMENT --- */
    display: flex !important;       /* Force le mode Flexbox */
    align-items: center !important; /* Centre verticalement l'ic√¥ne et le texte */
    justify-content: center;        /* Centre horizontalement */
    gap: 12px;                      /* Espace entre l'ic√¥ne et le texte */
    line-height: 1;                 /* R√©initialise la hauteur de ligne pour √©viter les d√©calages */
}

/* Correction sp√©cifique pour l'ic√¥ne dans ce bouton */
.btn-suggest svg, 
.btn-suggest i {
    width: 18px;       /* Taille ajust√©e √† la hauteur du texte */
    height: 18px;
    display: block;    /* Supprime les comportements de texte */
    margin: 0 !important; /* ON SUPPRIME LE D√âCALAGE PR√âC√âDENT */
    fill: currentColor;
}

/* Effet au survol */
.btn-suggest:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 15px rgba(255, 193, 7, 0.4);
    background: linear-gradient(135deg, #ffca2c 0%, #ffc107 100%);
    color: #000 !important;
}

/* Effet au clic */
.btn-suggest:active {
    transform: translateY(-1px);
    box-shadow: 0 4px 6px rgba(255, 193, 7, 0.25);
}


/* ==================================================
   PAGE A PROPOS
   ================================================*/
.fade-in-up {
        animation: fadeInUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
    }
    
    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Carte Hero */
    .about-hero {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
        border-radius: 20px;
        padding: 3rem 2rem;
        text-align: center;
        border: 1px solid #e9ecef;
        box-shadow: 0 10px 30px rgba(31, 59, 115, 0.05);
        margin-bottom: 2rem;
        position: relative;
        overflow: hidden;
    }

    /* D√©coration d'arri√®re-plan */
    .about-hero::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(31, 59, 115, 0.03) 0%, transparent 70%);
        z-index: 0;
    }

    .logo-container {
        width: 100px;
        height: 100px;
        background: white;
        border-radius: 24px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 8px 24px rgba(0,0,0,0.08);
        margin-bottom: 1.5rem;
        position: relative;
        z-index: 1;
    }

    /* Cartes D√©veloppeurs */
    .dev-card {
        background: white;
        border-radius: 16px;
        padding: 1.5rem;
        border: 1px solid #e9ecef;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        height: 100%;
        text-align: center;
    }
    .dev-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 24px rgba(31, 59, 115, 0.1);
        border-color: var(--couleur-principale);
    }

    .dev-avatar {
        width: 64px;
        height: 64px;
        background: linear-gradient(135deg, var(--couleur-principale) 0%, #667eea 100%);
        color: white;
        border-radius: 50%;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        margin-bottom: 1rem;
        box-shadow: 0 4px 12px rgba(31, 59, 115, 0.2);
    }

    /* Section Licence */
    .license-box {
        background: #152952; /* Bleu nuit profond */
        color: white;
        border-radius: 16px;
        padding: 2rem;
        position: relative;
        overflow: hidden;
    }
    
    .license-badge-pro {
        background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        color: #000;
        font-weight: 800;
        padding: 0.5rem 1rem;
        border-radius: 30px;
        display: inline-block;
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
    }

    .license-badge-free {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        font-weight: 600;
        padding: 0.5rem 1rem;
        border-radius: 30px;
        display: inline-block;
        border: 1px solid rgba(255,255,255,0.3);
    }

    .instance-code {
        font-family: 'Courier New', monospace;
        background: rgba(0, 0, 0, 0.3);
        padding: 0.5rem 1rem;
        border-radius: 8px;
        color: #a7d3f2;
        letter-spacing: 1px;
        cursor: pointer;
        transition: background 0.2s;
    }
    .instance-code:hover {
        background: rgba(0, 0, 0, 0.5);
        color: white;
    }


/* =================================================================
   21. MODULE RAPPORTS (DESIGN PREMIUM)
   ================================================================= */

/* --- Mise en page (Grille) --- */
.form-rapports-grid {
    display: grid;
    grid-template-columns: 400px 1fr; /* Colonne gauche fixe, droite flexible */
    gap: 2rem;
    align-items: start;
}

.rapports-config-col {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

/* --- Cartes de Rapport --- */
.rapport-card {
    background: var(--fond-element);
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: var(--ombre-legere);
    border: 1px solid var(--couleur-bordure);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.rapport-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--ombre-moyenne);
}

/* --- Titres avec Ic√¥nes --- */
.card-title-icon {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--couleur-principale);
    margin: 0 0 1.5rem 0;
    padding-bottom: 1rem;
    border-bottom: 2px solid #f1f3f5;
}

.card-title-svg {
    width: 24px;
    height: 24px;
    fill: var(--couleur-principale);
    background: rgba(31, 59, 115, 0.1);
    padding: 4px;
    border-radius: 6px;
    box-sizing: content-box; /* Important pour le padding */
}

/* --- Formulaires & Inputs --- */
.form-subtitle {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--texte-discret);
    font-weight: 700;
    margin-bottom: 0.75rem;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group:last-child {
    margin-bottom: 0;
}

.form-group-inline {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

.input-group label {
    display: block;
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--texte-principal);
    margin-bottom: 0.4rem;
}

.input-group input[type="date"] {
    width: 100%;
    padding: 0.6rem 1rem;
    border: 1px solid var(--couleur-bordure);
    border-radius: 8px;
    font-family: inherit;
    color: var(--texte-principal);
    background: #f8f9fa;
    transition: all 0.2s;
}

.input-group input[type="date"]:focus {
    background: white;
    border-color: var(--couleur-principale);
    box-shadow: 0 0 0 3px rgba(31, 59, 115, 0.1);
    outline: none;
}

/* --- Segmented Controls (Radios Modernes) --- */
.segmented-control {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    background: #f8f9fa;
    padding: 0.5rem;
    border-radius: 10px;
    border: 1px solid var(--couleur-bordure);
}

/* On cache les vrais boutons radio */
.segmented-control input[type="radio"] {
    display: none;
}

/* Le style du label (qui agit comme bouton) */
.segmented-control label {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 15px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid transparent;
    color: var(--texte-discret);
    font-weight: 500;
    font-size: 0.9rem;
}

.segmented-control label:hover {
    background: rgba(0,0,0,0.03);
    color: var(--texte-principal);
}

/* √âtat s√©lectionn√© (Magie CSS) */
.segmented-control input[type="radio"]:checked + label {
    background: white;
    color: var(--couleur-principale);
    border-color: var(--couleur-principale);
    box-shadow: 0 2px 8px rgba(31, 59, 115, 0.15);
    font-weight: 600;
}

.segmented-control .btn-icon {
    width: 20px;
    height: 20px;
    stroke: currentColor;
    stroke-width: 2;
    fill: none;
    opacity: 0.7;
}

.segmented-control input[type="radio"]:checked + label .btn-icon {
    opacity: 1;
    stroke: var(--couleur-principale);
}

/* --- Boutons d'Export (Variante) --- */
.export-control {
    flex-direction: row; /* Horizontal pour les boutons */
    gap: 1rem;
    background: transparent;
    border: none;
    padding: 0;
}

.segmented-label {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 12px;
    background: white;
    border: 1px solid var(--couleur-bordure);
    border-radius: 8px;
    cursor: pointer;
    color: var(--texte-principal);
    font-weight: 600;
    font-size: 0.9rem;
    transition: all 0.2s;
    box-shadow: 0 2px 4px rgba(0,0,0,0.02);
}

.segmented-label:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    border-color: var(--couleur-principale);
    color: var(--couleur-principale);
}

.segmented-label:active {
    transform: translateY(0);
}

/* --- Aper√ßu Historique (Timeline) --- */
.history-preview-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.history-preview-item {
    display: flex;
    flex-direction: column;
    padding: 1rem;
    background: #f8f9fa;
    border-radius: 10px;
    border-left: 4px solid var(--couleur-principale);
    transition: background 0.2s;
}

.history-preview-item:hover {
    background: white;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.history-preview-header {
    display: flex;
    justify-content: space-between;
    font-size: 0.75rem;
    color: var(--texte-discret);
    margin-bottom: 0.5rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.history-preview-date, .history-preview-time {
    display: flex;
    align-items: center;
    gap: 4px;
}

.history-preview-icon {
    width: 14px;
    height: 14px;
    fill: var(--texte-discret);
}

.history-preview-body {
    font-size: 0.95rem;
    color: var(--texte-principal);
    margin-bottom: 0.5rem;
}

.history-preview-action {
    font-weight: 700;
    color: var(--couleur-principale);
}

.history-preview-object {
    font-weight: 500;
}

.history-preview-footer {
    font-size: 0.8rem;
    color: var(--texte-discret);
    font-style: italic;
    display: flex;
    align-items: center;
    gap: 6px;
}

.history-preview-footer::before {
    content: '';
    display: block;
    width: 20px;
    height: 1px;
    background: #dee2e6;
}

/* --- Responsive --- */
@media (max-width: 992px) {
    .form-rapports-grid {
        grid-template-columns: 1fr; /* Empilement sur mobile/tablette */
    }
    
    .form-group-inline {
        grid-template-columns: 1fr;
    }
    
    .export-control {
        flex-direction: column;
    }
}


/* --- CALENDRIER MENSUEL --- */
.calendrier-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding: 0 10px;
}

.calendrier-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr); /* 7 jours */
    gap: 10px;
}

/* En-t√™tes (Lun, Mar...) */
.cal-header {
    text-align: center;
    font-weight: bold;
    color: #6c757d;
    padding-bottom: 10px;
    text-transform: uppercase;
    font-size: 0.85rem;
}

/* Case Jour */
.cal-day {
    background: white;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    min-height: 120px; /* Hauteur fixe pour uniformit√© */
    padding: 10px;
    position: relative;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    flex-direction: column;
}

.cal-day:hover {
    border-color: #0d6efd;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    transform: translateY(-2px);
}

.cal-day.empty {
    background: transparent;
    border: none;
    cursor: default;
}

.cal-day.today {
    background-color: #f8f9fa;
    border: 2px solid #0d6efd;
}

.cal-day.today .day-number {
    color: #0d6efd;
    font-weight: 800;
}

.cal-day.past-day {
    background-color: #f8f9fa;
    color: #adb5bd;
    border-color: #f1f3f5;
}

.cal-day.past-day .day-number {
    color: #adb5bd;
}

.cal-day.past-day:hover {
    transform: none;
    box-shadow: none;
    border-color: #f1f3f5;
}

.day-number {
    font-weight: 600;
    font-size: 1.1rem;
    color: #495057;
    margin-bottom: 5px;
}

/* Badge R√©servation */
.day-content {
    flex-grow: 1;
    display: flex;
    align-items: flex-end; /* Badge en bas */
}

.resa-badge {
    width: 100%;
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 0.8rem;
    font-weight: 600;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Bouton "+" flottant (visible au survol) */
.btn-add-fast {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 28px;
    height: 28px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.2s;
    font-size: 12px;
}

.cal-day:hover .btn-add-fast {
    opacity: 1;
}
--- END OF FILE static/css/style.css ---

--- START OF FILE static/js/bootstrap.bundle.min.js ---

/*!
  * Bootstrap v5.3.0 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).bootstrap=e()}(this,(function(){"use strict";const t=new Map,e={set(e,i,n){t.has(e)||t.set(e,new Map);const s=t.get(e);s.has(i)||0===s.size?s.set(i,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`)},get:(e,i)=>t.has(e)&&t.get(e).get(i)||null,remove(e,i){if(!t.has(e))return;const n=t.get(e);n.delete(i),0===n.size&&t.delete(e)}},i="transitionend",n=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,((t,e)=>`#${CSS.escape(e)}`))),t),s=t=>{t.dispatchEvent(new Event(i))},o=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),r=t=>o(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(n(t)):null,a=t=>{if(!o(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),i=t.closest("details:not([open])");if(!i)return e;if(i!==t){const e=t.closest("summary");if(e&&e.parentNode!==i)return!1;if(null===e)return!1}return e},l=t=>!t||t.nodeType!==Node.ELEMENT_NODE||!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled")),c=t=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?c(t.parentNode):null},h=()=>{},d=t=>{t.offsetHeight},u=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,f=[],p=()=>"rtl"===document.documentElement.dir,m=t=>{var e;e=()=>{const e=u();if(e){const i=t.NAME,n=e.fn[i];e.fn[i]=t.jQueryInterface,e.fn[i].Constructor=t,e.fn[i].noConflict=()=>(e.fn[i]=n,t.jQueryInterface)}},"loading"===document.readyState?(f.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of f)t()})),f.push(e)):e()},g=(t,e=[],i=t)=>"function"==typeof t?t(...e):i,_=(t,e,n=!0)=>{if(!n)return void g(t);const o=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:i}=window.getComputedStyle(t);const n=Number.parseFloat(e),s=Number.parseFloat(i);return n||s?(e=e.split(",")[0],i=i.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(i))):0})(e)+5;let r=!1;const a=({target:n})=>{n===e&&(r=!0,e.removeEventListener(i,a),g(t))};e.addEventListener(i,a),setTimeout((()=>{r||s(e)}),o)},b=(t,e,i,n)=>{const s=t.length;let o=t.indexOf(e);return-1===o?!i&&n?t[s-1]:t[0]:(o+=i?1:-1,n&&(o=(o+s)%s),t[Math.max(0,Math.min(o,s-1))])},v=/[^.]*(?=\..*)\.|.*/,y=/\..*/,w=/::\d+$/,A={};let E=1;const T={mouseenter:"mouseover",mouseleave:"mouseout"},C=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function O(t,e){return e&&`${e}::${E++}`||t.uidEvent||E++}function x(t){const e=O(t);return t.uidEvent=e,A[e]=A[e]||{},A[e]}function k(t,e,i=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===i))}function L(t,e,i){const n="string"==typeof e,s=n?i:e||i;let o=N(t);return C.has(o)||(o=t),[n,s,o]}function S(t,e,i,n,s){if("string"!=typeof e||!t)return;let[o,r,a]=L(e,i,n);if(e in T){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};r=t(r)}const l=x(t),c=l[a]||(l[a]={}),h=k(c,r,o?i:null);if(h)return void(h.oneOff=h.oneOff&&s);const d=O(r,e.replace(v,"")),u=o?function(t,e,i){return function n(s){const o=t.querySelectorAll(e);for(let{target:r}=s;r&&r!==this;r=r.parentNode)for(const a of o)if(a===r)return M(s,{delegateTarget:r}),n.oneOff&&P.off(t,s.type,e,i),i.apply(r,[s])}}(t,i,r):function(t,e){return function i(n){return M(n,{delegateTarget:t}),i.oneOff&&P.off(t,n.type,e),e.apply(t,[n])}}(t,r);u.delegationSelector=o?i:null,u.callable=r,u.oneOff=s,u.uidEvent=d,c[d]=u,t.addEventListener(a,u,o)}function D(t,e,i,n,s){const o=k(e[i],n,s);o&&(t.removeEventListener(i,o,Boolean(s)),delete e[i][o.uidEvent])}function I(t,e,i,n){const s=e[i]||{};for(const[o,r]of Object.entries(s))o.includes(n)&&D(t,e,i,r.callable,r.delegationSelector)}function N(t){return t=t.replace(y,""),T[t]||t}const P={on(t,e,i,n){S(t,e,i,n,!1)},one(t,e,i,n){S(t,e,i,n,!0)},off(t,e,i,n){if("string"!=typeof e||!t)return;const[s,o,r]=L(e,i,n),a=r!==e,l=x(t),c=l[r]||{},h=e.startsWith(".");if(void 0===o){if(h)for(const i of Object.keys(l))I(t,l,i,e.slice(1));for(const[i,n]of Object.entries(c)){const s=i.replace(w,"");a&&!e.includes(s)||D(t,l,r,n.callable,n.delegationSelector)}}else{if(!Object.keys(c).length)return;D(t,l,r,o,s?i:null)}},trigger(t,e,i){if("string"!=typeof e||!t)return null;const n=u();let s=null,o=!0,r=!0,a=!1;e!==N(e)&&n&&(s=n.Event(e,i),n(t).trigger(s),o=!s.isPropagationStopped(),r=!s.isImmediatePropagationStopped(),a=s.isDefaultPrevented());const l=M(new Event(e,{bubbles:o,cancelable:!0}),i);return a&&l.preventDefault(),r&&t.dispatchEvent(l),l.defaultPrevented&&s&&s.preventDefault(),l}};function M(t,e={}){for(const[i,n]of Object.entries(e))try{t[i]=n}catch(e){Object.defineProperty(t,i,{configurable:!0,get:()=>n})}return t}function j(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function F(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const H={setDataAttribute(t,e,i){t.setAttribute(`data-bs-${F(e)}`,i)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${F(e)}`)},getDataAttributes(t){if(!t)return{};const e={},i=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const n of i){let i=n.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),e[i]=j(t.dataset[n])}return e},getDataAttribute:(t,e)=>j(t.getAttribute(`data-bs-${F(e)}`))};class ${static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const i=o(e)?H.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"==typeof i?i:{},...o(e)?H.getDataAttributes(e):{},..."object"==typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[n,s]of Object.entries(e)){const e=t[n],r=o(e)?"element":null==(i=e)?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(s).test(r))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${r}" but expected type "${s}".`)}var i}}class W extends ${constructor(t,i){super(),(t=r(t))&&(this._element=t,this._config=this._getConfig(i),e.set(this._element,this.constructor.DATA_KEY,this))}dispose(){e.remove(this._element,this.constructor.DATA_KEY),P.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,i=!0){_(t,e,i)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return e.get(r(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.3.0"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const B=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let i=t.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),e=i&&"#"!==i?i.trim():null}return n(e)},z={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const i=[];let n=t.parentNode.closest(e);for(;n;)i.push(n),n=n.parentNode.closest(e);return i},prev(t,e){let i=t.previousElementSibling;for(;i;){if(i.matches(e))return[i];i=i.previousElementSibling}return[]},next(t,e){let i=t.nextElementSibling;for(;i;){if(i.matches(e))return[i];i=i.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(e,t).filter((t=>!l(t)&&a(t)))},getSelectorFromElement(t){const e=B(t);return e&&z.findOne(e)?e:null},getElementFromSelector(t){const e=B(t);return e?z.findOne(e):null},getMultipleElementsFromSelector(t){const e=B(t);return e?z.find(e):[]}},R=(t,e="hide")=>{const i=`click.dismiss${t.EVENT_KEY}`,n=t.NAME;P.on(document,i,`[data-bs-dismiss="${n}"]`,(function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),l(this))return;const s=z.getElementFromSelector(this)||this.closest(`.${n}`);t.getOrCreateInstance(s)[e]()}))};class q extends W{static get NAME(){return"alert"}close(){if(P.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),P.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=q.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}R(q,"close"),m(q);const V='[data-bs-toggle="button"]';class K extends W{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each((function(){const e=K.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}P.on(document,"click.bs.button.data-api",V,(t=>{t.preventDefault();const e=t.target.closest(V);K.getOrCreateInstance(e).toggle()})),m(K);const Q={endCallback:null,leftCallback:null,rightCallback:null},X={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Y extends ${constructor(t,e){super(),this._element=t,t&&Y.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Q}static get DefaultType(){return X}static get NAME(){return"swipe"}dispose(){P.off(this._element,".bs.swipe")}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),g(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const e=t/this._deltaX;this._deltaX=0,e&&g(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(P.on(this._element,"pointerdown.bs.swipe",(t=>this._start(t))),P.on(this._element,"pointerup.bs.swipe",(t=>this._end(t))),this._element.classList.add("pointer-event")):(P.on(this._element,"touchstart.bs.swipe",(t=>this._start(t))),P.on(this._element,"touchmove.bs.swipe",(t=>this._move(t))),P.on(this._element,"touchend.bs.swipe",(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const U="next",G="prev",J="left",Z="right",tt="slid.bs.carousel",et="carousel",it="active",nt={ArrowLeft:Z,ArrowRight:J},st={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ot={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class rt extends W{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=z.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===et&&this.cycle()}static get Default(){return st}static get DefaultType(){return ot}static get NAME(){return"carousel"}next(){this._slide(U)}nextWhenVisible(){!document.hidden&&a(this._element)&&this.next()}prev(){this._slide(G)}pause(){this._isSliding&&s(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?P.one(this._element,tt,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void P.one(this._element,tt,(()=>this.to(t)));const i=this._getItemIndex(this._getActive());if(i===t)return;const n=t>i?U:G;this._slide(n,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&P.on(this._element,"keydown.bs.carousel",(t=>this._keydown(t))),"hover"===this._config.pause&&(P.on(this._element,"mouseenter.bs.carousel",(()=>this.pause())),P.on(this._element,"mouseleave.bs.carousel",(()=>this._maybeEnableCycle()))),this._config.touch&&Y.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of z.find(".carousel-item img",this._element))P.on(t,"dragstart.bs.carousel",(t=>t.preventDefault()));const t={leftCallback:()=>this._slide(this._directionToOrder(J)),rightCallback:()=>this._slide(this._directionToOrder(Z)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new Y(this._element,t)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=nt[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=z.findOne(".active",this._indicatorsElement);e.classList.remove(it),e.removeAttribute("aria-current");const i=z.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);i&&(i.classList.add(it),i.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const i=this._getActive(),n=t===U,s=e||b(this._getItems(),i,n,this._config.wrap);if(s===i)return;const o=this._getItemIndex(s),r=e=>P.trigger(this._element,e,{relatedTarget:s,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:o});if(r("slide.bs.carousel").defaultPrevented)return;if(!i||!s)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=s;const l=n?"carousel-item-start":"carousel-item-end",c=n?"carousel-item-next":"carousel-item-prev";s.classList.add(c),d(s),i.classList.add(l),s.classList.add(l),this._queueCallback((()=>{s.classList.remove(l,c),s.classList.add(it),i.classList.remove(it,c,l),this._isSliding=!1,r(tt)}),i,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return z.findOne(".active.carousel-item",this._element)}_getItems(){return z.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return p()?t===J?G:U:t===J?U:G}_orderToDirection(t){return p()?t===G?J:Z:t===G?Z:J}static jQueryInterface(t){return this.each((function(){const e=rt.getOrCreateInstance(this,t);if("number"!=typeof t){if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)}))}}P.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",(function(t){const e=z.getElementFromSelector(this);if(!e||!e.classList.contains(et))return;t.preventDefault();const i=rt.getOrCreateInstance(e),n=this.getAttribute("data-bs-slide-to");return n?(i.to(n),void i._maybeEnableCycle()):"next"===H.getDataAttribute(this,"slide")?(i.next(),void i._maybeEnableCycle()):(i.prev(),void i._maybeEnableCycle())})),P.on(window,"load.bs.carousel.data-api",(()=>{const t=z.find('[data-bs-ride="carousel"]');for(const e of t)rt.getOrCreateInstance(e)})),m(rt);const at="show",lt="collapse",ct="collapsing",ht='[data-bs-toggle="collapse"]',dt={parent:null,toggle:!0},ut={parent:"(null|element)",toggle:"boolean"};class ft extends W{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const i=z.find(ht);for(const t of i){const e=z.getSelectorFromElement(t),i=z.find(e).filter((t=>t===this._element));null!==e&&i.length&&this._triggerArray.push(t)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return dt}static get DefaultType(){return ut}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((t=>t!==this._element)).map((t=>ft.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;if(P.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const e of t)e.hide();const e=this._getDimension();this._element.classList.remove(lt),this._element.classList.add(ct),this._element.style[e]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=`scroll${e[0].toUpperCase()+e.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ct),this._element.classList.add(lt,at),this._element.style[e]="",P.trigger(this._element,"shown.bs.collapse")}),this._element,!0),this._element.style[e]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(P.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,d(this._element),this._element.classList.add(ct),this._element.classList.remove(lt,at);for(const t of this._triggerArray){const e=z.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ct),this._element.classList.add(lt),P.trigger(this._element,"hidden.bs.collapse")}),this._element,!0)}_isShown(t=this._element){return t.classList.contains(at)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=r(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(ht);for(const e of t){const t=z.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=z.find(":scope .collapse .collapse",this._config.parent);return z.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const i of t)i.classList.toggle("collapsed",!e),i.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const i=ft.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===i[t])throw new TypeError(`No method named "${t}"`);i[t]()}}))}}P.on(document,"click.bs.collapse.data-api",ht,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();for(const t of z.getMultipleElementsFromSelector(this))ft.getOrCreateInstance(t,{toggle:!1}).toggle()})),m(ft);var pt="top",mt="bottom",gt="right",_t="left",bt="auto",vt=[pt,mt,gt,_t],yt="start",wt="end",At="clippingParents",Et="viewport",Tt="popper",Ct="reference",Ot=vt.reduce((function(t,e){return t.concat([e+"-"+yt,e+"-"+wt])}),[]),xt=[].concat(vt,[bt]).reduce((function(t,e){return t.concat([e,e+"-"+yt,e+"-"+wt])}),[]),kt="beforeRead",Lt="read",St="afterRead",Dt="beforeMain",It="main",Nt="afterMain",Pt="beforeWrite",Mt="write",jt="afterWrite",Ft=[kt,Lt,St,Dt,It,Nt,Pt,Mt,jt];function Ht(t){return t?(t.nodeName||"").toLowerCase():null}function $t(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Wt(t){return t instanceof $t(t).Element||t instanceof Element}function Bt(t){return t instanceof $t(t).HTMLElement||t instanceof HTMLElement}function zt(t){return"undefined"!=typeof ShadowRoot&&(t instanceof $t(t).ShadowRoot||t instanceof ShadowRoot)}const Rt={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},s=e.elements[t];Bt(s)&&Ht(s)&&(Object.assign(s.style,i),Object.keys(n).forEach((function(t){var e=n[t];!1===e?s.removeAttribute(t):s.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach((function(t){var n=e.elements[t],s=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:i[t]).reduce((function(t,e){return t[e]="",t}),{});Bt(n)&&Ht(n)&&(Object.assign(n.style,o),Object.keys(s).forEach((function(t){n.removeAttribute(t)})))}))}},requires:["computeStyles"]};function qt(t){return t.split("-")[0]}var Vt=Math.max,Kt=Math.min,Qt=Math.round;function Xt(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function Yt(){return!/^((?!chrome|android).)*safari/i.test(Xt())}function Ut(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var n=t.getBoundingClientRect(),s=1,o=1;e&&Bt(t)&&(s=t.offsetWidth>0&&Qt(n.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Qt(n.height)/t.offsetHeight||1);var r=(Wt(t)?$t(t):window).visualViewport,a=!Yt()&&i,l=(n.left+(a&&r?r.offsetLeft:0))/s,c=(n.top+(a&&r?r.offsetTop:0))/o,h=n.width/s,d=n.height/o;return{width:h,height:d,top:c,right:l+h,bottom:c+d,left:l,x:l,y:c}}function Gt(t){var e=Ut(t),i=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:n}}function Jt(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&zt(i)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Zt(t){return $t(t).getComputedStyle(t)}function te(t){return["table","td","th"].indexOf(Ht(t))>=0}function ee(t){return((Wt(t)?t.ownerDocument:t.document)||window.document).documentElement}function ie(t){return"html"===Ht(t)?t:t.assignedSlot||t.parentNode||(zt(t)?t.host:null)||ee(t)}function ne(t){return Bt(t)&&"fixed"!==Zt(t).position?t.offsetParent:null}function se(t){for(var e=$t(t),i=ne(t);i&&te(i)&&"static"===Zt(i).position;)i=ne(i);return i&&("html"===Ht(i)||"body"===Ht(i)&&"static"===Zt(i).position)?e:i||function(t){var e=/firefox/i.test(Xt());if(/Trident/i.test(Xt())&&Bt(t)&&"fixed"===Zt(t).position)return null;var i=ie(t);for(zt(i)&&(i=i.host);Bt(i)&&["html","body"].indexOf(Ht(i))<0;){var n=Zt(i);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||e&&"filter"===n.willChange||e&&n.filter&&"none"!==n.filter)return i;i=i.parentNode}return null}(t)||e}function oe(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function re(t,e,i){return Vt(t,Kt(e,i))}function ae(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function le(t,e){return e.reduce((function(e,i){return e[i]=t,e}),{})}const ce={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,i=t.state,n=t.name,s=t.options,o=i.elements.arrow,r=i.modifiersData.popperOffsets,a=qt(i.placement),l=oe(a),c=[_t,gt].indexOf(a)>=0?"height":"width";if(o&&r){var h=function(t,e){return ae("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:le(t,vt))}(s.padding,i),d=Gt(o),u="y"===l?pt:_t,f="y"===l?mt:gt,p=i.rects.reference[c]+i.rects.reference[l]-r[l]-i.rects.popper[c],m=r[l]-i.rects.reference[l],g=se(o),_=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,b=p/2-m/2,v=h[u],y=_-d[c]-h[f],w=_/2-d[c]/2+b,A=re(v,w,y),E=l;i.modifiersData[n]=((e={})[E]=A,e.centerOffset=A-w,e)}},effect:function(t){var e=t.state,i=t.options.element,n=void 0===i?"[data-popper-arrow]":i;null!=n&&("string"!=typeof n||(n=e.elements.popper.querySelector(n)))&&Jt(e.elements.popper,n)&&(e.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function he(t){return t.split("-")[1]}var de={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ue(t){var e,i=t.popper,n=t.popperRect,s=t.placement,o=t.variation,r=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,h=t.roundOffsets,d=t.isFixed,u=r.x,f=void 0===u?0:u,p=r.y,m=void 0===p?0:p,g="function"==typeof h?h({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var _=r.hasOwnProperty("x"),b=r.hasOwnProperty("y"),v=_t,y=pt,w=window;if(c){var A=se(i),E="clientHeight",T="clientWidth";A===$t(i)&&"static"!==Zt(A=ee(i)).position&&"absolute"===a&&(E="scrollHeight",T="scrollWidth"),(s===pt||(s===_t||s===gt)&&o===wt)&&(y=mt,m-=(d&&A===w&&w.visualViewport?w.visualViewport.height:A[E])-n.height,m*=l?1:-1),s!==_t&&(s!==pt&&s!==mt||o!==wt)||(v=gt,f-=(d&&A===w&&w.visualViewport?w.visualViewport.width:A[T])-n.width,f*=l?1:-1)}var C,O=Object.assign({position:a},c&&de),x=!0===h?function(t,e){var i=t.x,n=t.y,s=e.devicePixelRatio||1;return{x:Qt(i*s)/s||0,y:Qt(n*s)/s||0}}({x:f,y:m},$t(i)):{x:f,y:m};return f=x.x,m=x.y,l?Object.assign({},O,((C={})[y]=b?"0":"",C[v]=_?"0":"",C.transform=(w.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",C)):Object.assign({},O,((e={})[y]=b?m+"px":"",e[v]=_?f+"px":"",e.transform="",e))}const fe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,i=t.options,n=i.gpuAcceleration,s=void 0===n||n,o=i.adaptive,r=void 0===o||o,a=i.roundOffsets,l=void 0===a||a,c={placement:qt(e.placement),variation:he(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,ue(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:r,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,ue(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var pe={passive:!0};const me={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,i=t.instance,n=t.options,s=n.scroll,o=void 0===s||s,r=n.resize,a=void 0===r||r,l=$t(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach((function(t){t.addEventListener("scroll",i.update,pe)})),a&&l.addEventListener("resize",i.update,pe),function(){o&&c.forEach((function(t){t.removeEventListener("scroll",i.update,pe)})),a&&l.removeEventListener("resize",i.update,pe)}},data:{}};var ge={left:"right",right:"left",bottom:"top",top:"bottom"};function _e(t){return t.replace(/left|right|bottom|top/g,(function(t){return ge[t]}))}var be={start:"end",end:"start"};function ve(t){return t.replace(/start|end/g,(function(t){return be[t]}))}function ye(t){var e=$t(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function we(t){return Ut(ee(t)).left+ye(t).scrollLeft}function Ae(t){var e=Zt(t),i=e.overflow,n=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+n)}function Ee(t){return["html","body","#document"].indexOf(Ht(t))>=0?t.ownerDocument.body:Bt(t)&&Ae(t)?t:Ee(ie(t))}function Te(t,e){var i;void 0===e&&(e=[]);var n=Ee(t),s=n===(null==(i=t.ownerDocument)?void 0:i.body),o=$t(n),r=s?[o].concat(o.visualViewport||[],Ae(n)?n:[]):n,a=e.concat(r);return s?a:a.concat(Te(ie(r)))}function Ce(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Oe(t,e,i){return e===Et?Ce(function(t,e){var i=$t(t),n=ee(t),s=i.visualViewport,o=n.clientWidth,r=n.clientHeight,a=0,l=0;if(s){o=s.width,r=s.height;var c=Yt();(c||!c&&"fixed"===e)&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:r,x:a+we(t),y:l}}(t,i)):Wt(e)?function(t,e){var i=Ut(t,!1,"fixed"===e);return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}(e,i):Ce(function(t){var e,i=ee(t),n=ye(t),s=null==(e=t.ownerDocument)?void 0:e.body,o=Vt(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),r=Vt(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-n.scrollLeft+we(t),l=-n.scrollTop;return"rtl"===Zt(s||i).direction&&(a+=Vt(i.clientWidth,s?s.clientWidth:0)-o),{width:o,height:r,x:a,y:l}}(ee(t)))}function xe(t){var e,i=t.reference,n=t.element,s=t.placement,o=s?qt(s):null,r=s?he(s):null,a=i.x+i.width/2-n.width/2,l=i.y+i.height/2-n.height/2;switch(o){case pt:e={x:a,y:i.y-n.height};break;case mt:e={x:a,y:i.y+i.height};break;case gt:e={x:i.x+i.width,y:l};break;case _t:e={x:i.x-n.width,y:l};break;default:e={x:i.x,y:i.y}}var c=o?oe(o):null;if(null!=c){var h="y"===c?"height":"width";switch(r){case yt:e[c]=e[c]-(i[h]/2-n[h]/2);break;case wt:e[c]=e[c]+(i[h]/2-n[h]/2)}}return e}function ke(t,e){void 0===e&&(e={});var i=e,n=i.placement,s=void 0===n?t.placement:n,o=i.strategy,r=void 0===o?t.strategy:o,a=i.boundary,l=void 0===a?At:a,c=i.rootBoundary,h=void 0===c?Et:c,d=i.elementContext,u=void 0===d?Tt:d,f=i.altBoundary,p=void 0!==f&&f,m=i.padding,g=void 0===m?0:m,_=ae("number"!=typeof g?g:le(g,vt)),b=u===Tt?Ct:Tt,v=t.rects.popper,y=t.elements[p?b:u],w=function(t,e,i,n){var s="clippingParents"===e?function(t){var e=Te(ie(t)),i=["absolute","fixed"].indexOf(Zt(t).position)>=0&&Bt(t)?se(t):t;return Wt(i)?e.filter((function(t){return Wt(t)&&Jt(t,i)&&"body"!==Ht(t)})):[]}(t):[].concat(e),o=[].concat(s,[i]),r=o[0],a=o.reduce((function(e,i){var s=Oe(t,i,n);return e.top=Vt(s.top,e.top),e.right=Kt(s.right,e.right),e.bottom=Kt(s.bottom,e.bottom),e.left=Vt(s.left,e.left),e}),Oe(t,r,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(Wt(y)?y:y.contextElement||ee(t.elements.popper),l,h,r),A=Ut(t.elements.reference),E=xe({reference:A,element:v,strategy:"absolute",placement:s}),T=Ce(Object.assign({},v,E)),C=u===Tt?T:A,O={top:w.top-C.top+_.top,bottom:C.bottom-w.bottom+_.bottom,left:w.left-C.left+_.left,right:C.right-w.right+_.right},x=t.modifiersData.offset;if(u===Tt&&x){var k=x[s];Object.keys(O).forEach((function(t){var e=[gt,mt].indexOf(t)>=0?1:-1,i=[pt,mt].indexOf(t)>=0?"y":"x";O[t]+=k[i]*e}))}return O}function Le(t,e){void 0===e&&(e={});var i=e,n=i.placement,s=i.boundary,o=i.rootBoundary,r=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,c=void 0===l?xt:l,h=he(n),d=h?a?Ot:Ot.filter((function(t){return he(t)===h})):vt,u=d.filter((function(t){return c.indexOf(t)>=0}));0===u.length&&(u=d);var f=u.reduce((function(e,i){return e[i]=ke(t,{placement:i,boundary:s,rootBoundary:o,padding:r})[qt(i)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}const Se={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var s=i.mainAxis,o=void 0===s||s,r=i.altAxis,a=void 0===r||r,l=i.fallbackPlacements,c=i.padding,h=i.boundary,d=i.rootBoundary,u=i.altBoundary,f=i.flipVariations,p=void 0===f||f,m=i.allowedAutoPlacements,g=e.options.placement,_=qt(g),b=l||(_!==g&&p?function(t){if(qt(t)===bt)return[];var e=_e(t);return[ve(t),e,ve(e)]}(g):[_e(g)]),v=[g].concat(b).reduce((function(t,i){return t.concat(qt(i)===bt?Le(e,{placement:i,boundary:h,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):i)}),[]),y=e.rects.reference,w=e.rects.popper,A=new Map,E=!0,T=v[0],C=0;C<v.length;C++){var O=v[C],x=qt(O),k=he(O)===yt,L=[pt,mt].indexOf(x)>=0,S=L?"width":"height",D=ke(e,{placement:O,boundary:h,rootBoundary:d,altBoundary:u,padding:c}),I=L?k?gt:_t:k?mt:pt;y[S]>w[S]&&(I=_e(I));var N=_e(I),P=[];if(o&&P.push(D[x]<=0),a&&P.push(D[I]<=0,D[N]<=0),P.every((function(t){return t}))){T=O,E=!1;break}A.set(O,P)}if(E)for(var M=function(t){var e=v.find((function(e){var i=A.get(e);if(i)return i.slice(0,t).every((function(t){return t}))}));if(e)return T=e,"break"},j=p?3:1;j>0&&"break"!==M(j);j--);e.placement!==T&&(e.modifiersData[n]._skip=!0,e.placement=T,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function De(t,e,i){return void 0===i&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function Ie(t){return[pt,gt,mt,_t].some((function(e){return t[e]>=0}))}const Ne={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,i=t.name,n=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,r=ke(e,{elementContext:"reference"}),a=ke(e,{altBoundary:!0}),l=De(r,n),c=De(a,s,o),h=Ie(l),d=Ie(c);e.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":d})}},Pe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,i=t.options,n=t.name,s=i.offset,o=void 0===s?[0,0]:s,r=xt.reduce((function(t,i){return t[i]=function(t,e,i){var n=qt(t),s=[_t,pt].indexOf(n)>=0?-1:1,o="function"==typeof i?i(Object.assign({},e,{placement:t})):i,r=o[0],a=o[1];return r=r||0,a=(a||0)*s,[_t,gt].indexOf(n)>=0?{x:a,y:r}:{x:r,y:a}}(i,e.rects,o),t}),{}),a=r[e.placement],l=a.x,c=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[n]=r}},Me={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,i=t.name;e.modifiersData[i]=xe({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},je={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,n=t.name,s=i.mainAxis,o=void 0===s||s,r=i.altAxis,a=void 0!==r&&r,l=i.boundary,c=i.rootBoundary,h=i.altBoundary,d=i.padding,u=i.tether,f=void 0===u||u,p=i.tetherOffset,m=void 0===p?0:p,g=ke(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:h}),_=qt(e.placement),b=he(e.placement),v=!b,y=oe(_),w="x"===y?"y":"x",A=e.modifiersData.popperOffsets,E=e.rects.reference,T=e.rects.popper,C="function"==typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,O="number"==typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),x=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,k={x:0,y:0};if(A){if(o){var L,S="y"===y?pt:_t,D="y"===y?mt:gt,I="y"===y?"height":"width",N=A[y],P=N+g[S],M=N-g[D],j=f?-T[I]/2:0,F=b===yt?E[I]:T[I],H=b===yt?-T[I]:-E[I],$=e.elements.arrow,W=f&&$?Gt($):{width:0,height:0},B=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},z=B[S],R=B[D],q=re(0,E[I],W[I]),V=v?E[I]/2-j-q-z-O.mainAxis:F-q-z-O.mainAxis,K=v?-E[I]/2+j+q+R+O.mainAxis:H+q+R+O.mainAxis,Q=e.elements.arrow&&se(e.elements.arrow),X=Q?"y"===y?Q.clientTop||0:Q.clientLeft||0:0,Y=null!=(L=null==x?void 0:x[y])?L:0,U=N+K-Y,G=re(f?Kt(P,N+V-Y-X):P,N,f?Vt(M,U):M);A[y]=G,k[y]=G-N}if(a){var J,Z="x"===y?pt:_t,tt="x"===y?mt:gt,et=A[w],it="y"===w?"height":"width",nt=et+g[Z],st=et-g[tt],ot=-1!==[pt,_t].indexOf(_),rt=null!=(J=null==x?void 0:x[w])?J:0,at=ot?nt:et-E[it]-T[it]-rt+O.altAxis,lt=ot?et+E[it]+T[it]-rt-O.altAxis:st,ct=f&&ot?function(t,e,i){var n=re(t,e,i);return n>i?i:n}(at,et,lt):re(f?at:nt,et,f?lt:st);A[w]=ct,k[w]=ct-et}e.modifiersData[n]=k}},requiresIfExists:["offset"]};function Fe(t,e,i){void 0===i&&(i=!1);var n,s,o=Bt(e),r=Bt(e)&&function(t){var e=t.getBoundingClientRect(),i=Qt(e.width)/t.offsetWidth||1,n=Qt(e.height)/t.offsetHeight||1;return 1!==i||1!==n}(e),a=ee(e),l=Ut(t,r,i),c={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(o||!o&&!i)&&(("body"!==Ht(e)||Ae(a))&&(c=(n=e)!==$t(n)&&Bt(n)?{scrollLeft:(s=n).scrollLeft,scrollTop:s.scrollTop}:ye(n)),Bt(e)?((h=Ut(e,!0)).x+=e.clientLeft,h.y+=e.clientTop):a&&(h.x=we(a))),{x:l.left+c.scrollLeft-h.x,y:l.top+c.scrollTop-h.y,width:l.width,height:l.height}}function He(t){var e=new Map,i=new Set,n=[];function s(t){i.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!i.has(t)){var n=e.get(t);n&&s(n)}})),n.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){i.has(t.name)||s(t)})),n}var $e={placement:"bottom",modifiers:[],strategy:"absolute"};function We(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function Be(t){void 0===t&&(t={});var e=t,i=e.defaultModifiers,n=void 0===i?[]:i,s=e.defaultOptions,o=void 0===s?$e:s;return function(t,e,i){void 0===i&&(i=o);var s,r,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},$e,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},l=[],c=!1,h={state:a,setOptions:function(i){var s="function"==typeof i?i(a.options):i;d(),a.options=Object.assign({},o,a.options,s),a.scrollParents={reference:Wt(t)?Te(t):t.contextElement?Te(t.contextElement):[],popper:Te(e)};var r,c,u=function(t){var e=He(t);return Ft.reduce((function(t,i){return t.concat(e.filter((function(t){return t.phase===i})))}),[])}((r=[].concat(n,a.options.modifiers),c=r.reduce((function(t,e){var i=t[e.name];return t[e.name]=i?Object.assign({},i,e,{options:Object.assign({},i.options,e.options),data:Object.assign({},i.data,e.data)}):e,t}),{}),Object.keys(c).map((function(t){return c[t]}))));return a.orderedModifiers=u.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,i=t.options,n=void 0===i?{}:i,s=t.effect;if("function"==typeof s){var o=s({state:a,name:e,instance:h,options:n});l.push(o||function(){})}})),h.update()},forceUpdate:function(){if(!c){var t=a.elements,e=t.reference,i=t.popper;if(We(e,i)){a.rects={reference:Fe(e,se(i),"fixed"===a.options.strategy),popper:Gt(i)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var n=0;n<a.orderedModifiers.length;n++)if(!0!==a.reset){var s=a.orderedModifiers[n],o=s.fn,r=s.options,l=void 0===r?{}:r,d=s.name;"function"==typeof o&&(a=o({state:a,options:l,name:d,instance:h})||a)}else a.reset=!1,n=-1}}},update:(s=function(){return new Promise((function(t){h.forceUpdate(),t(a)}))},function(){return r||(r=new Promise((function(t){Promise.resolve().then((function(){r=void 0,t(s())}))}))),r}),destroy:function(){d(),c=!0}};if(!We(t,e))return h;function d(){l.forEach((function(t){return t()})),l=[]}return h.setOptions(i).then((function(t){!c&&i.onFirstUpdate&&i.onFirstUpdate(t)})),h}}var ze=Be(),Re=Be({defaultModifiers:[me,Me,fe,Rt]}),qe=Be({defaultModifiers:[me,Me,fe,Rt,Pe,Se,je,ce,Ne]});const Ve=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Nt,afterRead:St,afterWrite:jt,applyStyles:Rt,arrow:ce,auto:bt,basePlacements:vt,beforeMain:Dt,beforeRead:kt,beforeWrite:Pt,bottom:mt,clippingParents:At,computeStyles:fe,createPopper:qe,createPopperBase:ze,createPopperLite:Re,detectOverflow:ke,end:wt,eventListeners:me,flip:Se,hide:Ne,left:_t,main:It,modifierPhases:Ft,offset:Pe,placements:xt,popper:Tt,popperGenerator:Be,popperOffsets:Me,preventOverflow:je,read:Lt,reference:Ct,right:gt,start:yt,top:pt,variationPlacements:Ot,viewport:Et,write:Mt},Symbol.toStringTag,{value:"Module"})),Ke="dropdown",Qe="ArrowUp",Xe="ArrowDown",Ye="click.bs.dropdown.data-api",Ue="keydown.bs.dropdown.data-api",Ge="show",Je='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ze=`${Je}.show`,ti=".dropdown-menu",ei=p()?"top-end":"top-start",ii=p()?"top-start":"top-end",ni=p()?"bottom-end":"bottom-start",si=p()?"bottom-start":"bottom-end",oi=p()?"left-start":"right-start",ri=p()?"right-start":"left-start",ai={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},li={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ci extends W{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=z.next(this._element,ti)[0]||z.prev(this._element,ti)[0]||z.findOne(ti,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return ai}static get DefaultType(){return li}static get NAME(){return Ke}toggle(){return this._isShown()?this.hide():this.show()}show(){if(l(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!P.trigger(this._element,"show.bs.dropdown",t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const t of[].concat(...document.body.children))P.on(t,"mouseover",h);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ge),this._element.classList.add(Ge),P.trigger(this._element,"shown.bs.dropdown",t)}}hide(){if(l(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!P.trigger(this._element,"hide.bs.dropdown",t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))P.off(t,"mouseover",h);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ge),this._element.classList.remove(Ge),this._element.setAttribute("aria-expanded","false"),H.removeDataAttribute(this._menu,"popper"),P.trigger(this._element,"hidden.bs.dropdown",t)}}_getConfig(t){if("object"==typeof(t=super._getConfig(t)).reference&&!o(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${Ke.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(void 0===Ve)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=this._parent:o(this._config.reference)?t=r(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=qe(t,this._menu,e)}_isShown(){return this._menu.classList.contains(Ge)}_getPlacement(){const t=this._parent;if(t.classList.contains("dropend"))return oi;if(t.classList.contains("dropstart"))return ri;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?ii:ei:e?si:ni}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(H.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...g(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const i=z.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((t=>a(t)));i.length&&b(i,e,t===Xe,!i.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=ci.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(2===t.button||"keyup"===t.type&&"Tab"!==t.key)return;const e=z.find(Ze);for(const i of e){const e=ci.getInstance(i);if(!e||!1===e._config.autoClose)continue;const n=t.composedPath(),s=n.includes(e._menu);if(n.includes(e._element)||"inside"===e._config.autoClose&&!s||"outside"===e._config.autoClose&&s)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const o={relatedTarget:e._element};"click"===t.type&&(o.clickEvent=t),e._completeHide(o)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),i="Escape"===t.key,n=[Qe,Xe].includes(t.key);if(!n&&!i)return;if(e&&!i)return;t.preventDefault();const s=this.matches(Je)?this:z.prev(this,Je)[0]||z.next(this,Je)[0]||z.findOne(Je,t.delegateTarget.parentNode),o=ci.getOrCreateInstance(s);if(n)return t.stopPropagation(),o.show(),void o._selectMenuItem(t);o._isShown()&&(t.stopPropagation(),o.hide(),s.focus())}}P.on(document,Ue,Je,ci.dataApiKeydownHandler),P.on(document,Ue,ti,ci.dataApiKeydownHandler),P.on(document,Ye,ci.clearMenus),P.on(document,"keyup.bs.dropdown.data-api",ci.clearMenus),P.on(document,Ye,Je,(function(t){t.preventDefault(),ci.getOrCreateInstance(this).toggle()})),m(ci);const hi="show",di="mousedown.bs.backdrop",ui={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},fi={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class pi extends ${constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return ui}static get DefaultType(){return fi}static get NAME(){return"backdrop"}show(t){if(!this._config.isVisible)return void g(t);this._append();const e=this._getElement();this._config.isAnimated&&d(e),e.classList.add(hi),this._emulateAnimation((()=>{g(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(hi),this._emulateAnimation((()=>{this.dispose(),g(t)}))):g(t)}dispose(){this._isAppended&&(P.off(this._element,di),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=r(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),P.on(t,di,(()=>{g(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){_(t,this._getElement(),this._config.isAnimated)}}const mi=".bs.focustrap",gi="backward",_i={autofocus:!0,trapElement:null},bi={autofocus:"boolean",trapElement:"element"};class vi extends ${constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return _i}static get DefaultType(){return bi}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),P.off(document,mi),P.on(document,"focusin.bs.focustrap",(t=>this._handleFocusin(t))),P.on(document,"keydown.tab.bs.focustrap",(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,P.off(document,mi))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const i=z.focusableChildren(e);0===i.length?e.focus():this._lastTabNavDirection===gi?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?gi:"forward")}}const yi=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",wi=".sticky-top",Ai="padding-right",Ei="margin-right";class Ti{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ai,(e=>e+t)),this._setElementAttributes(yi,Ai,(e=>e+t)),this._setElementAttributes(wi,Ei,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ai),this._resetElementAttributes(yi,Ai),this._resetElementAttributes(wi,Ei)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,i){const n=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+n)return;this._saveInitialAttribute(t,e);const s=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${i(Number.parseFloat(s))}px`)}))}_saveInitialAttribute(t,e){const i=t.style.getPropertyValue(e);i&&H.setDataAttribute(t,e,i)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const i=H.getDataAttribute(t,e);null!==i?(H.removeDataAttribute(t,e),t.style.setProperty(e,i)):t.style.removeProperty(e)}))}_applyManipulationCallback(t,e){if(o(t))e(t);else for(const i of z.find(t,this._element))e(i)}}const Ci=".bs.modal",Oi="hidden.bs.modal",xi="show.bs.modal",ki="modal-open",Li="show",Si="modal-static",Di={backdrop:!0,focus:!0,keyboard:!0},Ii={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ni extends W{constructor(t,e){super(t,e),this._dialog=z.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ti,this._addEventListeners()}static get Default(){return Di}static get DefaultType(){return Ii}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||P.trigger(this._element,xi,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ki),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){this._isShown&&!this._isTransitioning&&(P.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Li),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){P.off(window,Ci),P.off(this._dialog,Ci),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new pi({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new vi({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=z.findOne(".modal-body",this._dialog);e&&(e.scrollTop=0),d(this._element),this._element.classList.add(Li),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,P.trigger(this._element,"shown.bs.modal",{relatedTarget:t})}),this._dialog,this._isAnimated())}_addEventListeners(){P.on(this._element,"keydown.dismiss.bs.modal",(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),P.on(window,"resize.bs.modal",(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),P.on(this._element,"mousedown.dismiss.bs.modal",(t=>{P.one(this._element,"click.dismiss.bs.modal",(e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(ki),this._resetAdjustments(),this._scrollBar.reset(),P.trigger(this._element,Oi)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(P.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._element.style.overflowY;"hidden"===e||this._element.classList.contains(Si)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(Si),this._queueCallback((()=>{this._element.classList.remove(Si),this._queueCallback((()=>{this._element.style.overflowY=e}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),i=e>0;if(i&&!t){const t=p()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!i&&t){const t=p()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const i=Ni.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===i[t])throw new TypeError(`No method named "${t}"`);i[t](e)}}))}}P.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',(function(t){const e=z.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),P.one(e,xi,(t=>{t.defaultPrevented||P.one(e,Oi,(()=>{a(this)&&this.focus()}))}));const i=z.findOne(".modal.show");i&&Ni.getInstance(i).hide(),Ni.getOrCreateInstance(e).toggle(this)})),R(Ni),m(Ni);const Pi="show",Mi="showing",ji="hiding",Fi=".offcanvas.show",Hi="hidePrevented.bs.offcanvas",$i="hidden.bs.offcanvas",Wi={backdrop:!0,keyboard:!0,scroll:!1},Bi={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class zi extends W{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Wi}static get DefaultType(){return Bi}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||P.trigger(this._element,"show.bs.offcanvas",{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Ti).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Mi),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Pi),this._element.classList.remove(Mi),P.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:t})}),this._element,!0))}hide(){this._isShown&&(P.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(ji),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(Pi,ji),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Ti).reset(),P.trigger(this._element,$i)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=Boolean(this._config.backdrop);return new pi({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{"static"!==this._config.backdrop?this.hide():P.trigger(this._element,Hi)}:null})}_initializeFocusTrap(){return new vi({trapElement:this._element})}_addEventListeners(){P.on(this._element,"keydown.dismiss.bs.offcanvas",(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():P.trigger(this._element,Hi))}))}static jQueryInterface(t){return this.each((function(){const e=zi.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}P.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',(function(t){const e=z.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),l(this))return;P.one(e,$i,(()=>{a(this)&&this.focus()}));const i=z.findOne(Fi);i&&i!==e&&zi.getInstance(i).hide(),zi.getOrCreateInstance(e).toggle(this)})),P.on(window,"load.bs.offcanvas.data-api",(()=>{for(const t of z.find(Fi))zi.getOrCreateInstance(t).show()})),P.on(window,"resize.bs.offcanvas",(()=>{for(const t of z.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&zi.getOrCreateInstance(t).hide()})),R(zi),m(zi);const Ri={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},qi=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Vi=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Ki=(t,e)=>{const i=t.nodeName.toLowerCase();return e.includes(i)?!qi.has(i)||Boolean(Vi.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(i)))},Qi={allowList:Ri,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Xi={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Yi={entry:"(string|element|function|null)",selector:"(string|element)"};class Ui extends ${constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Qi}static get DefaultType(){return Xi}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[e,i]of Object.entries(this._config.content))this._setContent(t,i,e);const e=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&e.classList.add(...i.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,i]of Object.entries(t))super._typeCheckConfig({selector:e,entry:i},Yi)}_setContent(t,e,i){const n=z.findOne(i,t);n&&((e=this._resolvePossibleFunction(e))?o(e)?this._putElementInTemplate(r(e),n):this._config.html?n.innerHTML=this._maybeSanitize(e):n.textContent=e:n.remove())}_maybeSanitize(t){return this._config.sanitize?function(t,e,i){if(!t.length)return t;if(i&&"function"==typeof i)return i(t);const n=(new window.DOMParser).parseFromString(t,"text/html"),s=[].concat(...n.body.querySelectorAll("*"));for(const t of s){const i=t.nodeName.toLowerCase();if(!Object.keys(e).includes(i)){t.remove();continue}const n=[].concat(...t.attributes),s=[].concat(e["*"]||[],e[i]||[]);for(const e of n)Ki(e,s)||t.removeAttribute(e.nodeName)}return n.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return g(t,[this])}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const Gi=new Set(["sanitize","allowList","sanitizeFn"]),Ji="fade",Zi="show",tn=".modal",en="hide.bs.modal",nn="hover",sn="focus",on={AUTO:"auto",TOP:"top",RIGHT:p()?"left":"right",BOTTOM:"bottom",LEFT:p()?"right":"left"},rn={allowList:Ri,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},an={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ln extends W{constructor(t,e){if(void 0===Ve)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return rn}static get DefaultType(){return an}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),P.off(this._element.closest(tn),en,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=P.trigger(this._element,this.constructor.eventName("show")),e=(c(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!e)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:n}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(n.append(i),P.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(i),i.classList.add(Zi),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))P.on(t,"mouseover",h);this._queueCallback((()=>{P.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!P.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Zi),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))P.off(t,"mouseover",h);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),P.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(Ji,Zi),e.classList.add(`bs-${this.constructor.NAME}-auto`);const i=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME).toString();return e.setAttribute("id",i),this._isAnimated()&&e.classList.add(Ji),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Ui({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Ji)}_isShown(){return this.tip&&this.tip.classList.contains(Zi)}_createPopper(t){const e=g(this._config.placement,[this,t,this._element]),i=on[e.toUpperCase()];return qe(this._element,t,this._getPopperConfig(i))}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return g(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,...g(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)P.on(this._element,this.constructor.eventName("click"),this._config.selector,(t=>{this._initializeOnDelegatedTarget(t).toggle()}));else if("manual"!==e){const t=e===nn?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),i=e===nn?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");P.on(this._element,t,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?sn:nn]=!0,e._enter()})),P.on(this._element,i,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?sn:nn]=e._element.contains(t.relatedTarget),e._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},P.on(this._element.closest(tn),en,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=H.getDataAttributes(this._element);for(const t of Object.keys(e))Gi.has(t)&&delete e[t];return t={...e,..."object"==typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:r(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,i]of Object.entries(this._config))this.constructor.Default[e]!==i&&(t[e]=i);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each((function(){const e=ln.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}m(ln);const cn={...ln.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},hn={...ln.DefaultType,content:"(null|string|element|function)"};class dn extends ln{static get Default(){return cn}static get DefaultType(){return hn}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each((function(){const e=dn.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}m(dn);const un="click.bs.scrollspy",fn="active",pn="[href]",mn={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},gn={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class _n extends W{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return mn}static get DefaultType(){return gn}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=r(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"==typeof t.threshold&&(t.threshold=t.threshold.split(",").map((t=>Number.parseFloat(t)))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(P.off(this._config.target,un),P.on(this._config.target,un,pn,(t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const i=this._rootElement||window,n=e.offsetTop-this._element.offsetTop;if(i.scrollTo)return void i.scrollTo({top:n,behavior:"smooth"});i.scrollTop=n}})))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((t=>this._observerCallback(t)),t)}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),i=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},n=(this._rootElement||document.documentElement).scrollTop,s=n>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=n;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const t=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&t){if(i(o),!n)return}else s||t||i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=z.find(pn,this._config.target);for(const e of t){if(!e.hash||l(e))continue;const t=z.findOne(decodeURI(e.hash),this._element);a(t)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(fn),this._activateParents(t),P.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))z.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(fn);else for(const e of z.parents(t,".nav, .list-group"))for(const t of z.prev(e,".nav-link, .nav-item > .nav-link, .list-group-item"))t.classList.add(fn)}_clearActiveClass(t){t.classList.remove(fn);const e=z.find("[href].active",t);for(const t of e)t.classList.remove(fn)}static jQueryInterface(t){return this.each((function(){const e=_n.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}P.on(window,"load.bs.scrollspy.data-api",(()=>{for(const t of z.find('[data-bs-spy="scroll"]'))_n.getOrCreateInstance(t)})),m(_n);const bn="ArrowLeft",vn="ArrowRight",yn="ArrowUp",wn="ArrowDown",An="active",En="fade",Tn="show",Cn='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',On=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${Cn}`;class xn extends W{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),P.on(this._element,"keydown.bs.tab",(t=>this._keydown(t))))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),i=e?P.trigger(e,"hide.bs.tab",{relatedTarget:t}):null;P.trigger(t,"show.bs.tab",{relatedTarget:e}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){t&&(t.classList.add(An),this._activate(z.getElementFromSelector(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),P.trigger(t,"shown.bs.tab",{relatedTarget:e})):t.classList.add(Tn)}),t,t.classList.contains(En)))}_deactivate(t,e){t&&(t.classList.remove(An),t.blur(),this._deactivate(z.getElementFromSelector(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),P.trigger(t,"hidden.bs.tab",{relatedTarget:e})):t.classList.remove(Tn)}),t,t.classList.contains(En)))}_keydown(t){if(![bn,vn,yn,wn].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=[vn,wn].includes(t.key),i=b(this._getChildren().filter((t=>!l(t))),t.target,e,!0);i&&(i.focus({preventScroll:!0}),xn.getOrCreateInstance(i).show())}_getChildren(){return z.find(On,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const t of e)this._setInitialAttributesOnChild(t)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),i=this._getOuterElement(t);t.setAttribute("aria-selected",e),i!==t&&this._setAttributeIfNotExists(i,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=z.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const i=this._getOuterElement(t);if(!i.classList.contains("dropdown"))return;const n=(t,n)=>{const s=z.findOne(t,i);s&&s.classList.toggle(n,e)};n(".dropdown-toggle",An),n(".dropdown-menu",Tn),i.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}_elemIsActive(t){return t.classList.contains(An)}_getInnerElement(t){return t.matches(On)?t:z.findOne(On,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each((function(){const e=xn.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}P.on(document,"click.bs.tab",Cn,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),l(this)||xn.getOrCreateInstance(this).show()})),P.on(window,"load.bs.tab",(()=>{for(const t of z.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))xn.getOrCreateInstance(t)})),m(xn);const kn="hide",Ln="show",Sn="showing",Dn={animation:"boolean",autohide:"boolean",delay:"number"},In={animation:!0,autohide:!0,delay:5e3};class Nn extends W{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return In}static get DefaultType(){return Dn}static get NAME(){return"toast"}show(){P.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(kn),d(this._element),this._element.classList.add(Ln,Sn),this._queueCallback((()=>{this._element.classList.remove(Sn),P.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this.isShown()&&(P.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(Sn),this._queueCallback((()=>{this._element.classList.add(kn),this._element.classList.remove(Sn,Ln),P.trigger(this._element,"hidden.bs.toast")}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ln),super.dispose()}isShown(){return this._element.classList.contains(Ln)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){P.on(this._element,"mouseover.bs.toast",(t=>this._onInteraction(t,!0))),P.on(this._element,"mouseout.bs.toast",(t=>this._onInteraction(t,!1))),P.on(this._element,"focusin.bs.toast",(t=>this._onInteraction(t,!0))),P.on(this._element,"focusout.bs.toast",(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=Nn.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}return R(Nn),m(Nn),{Alert:q,Button:K,Carousel:rt,Collapse:ft,Dropdown:ci,Modal:Ni,Offcanvas:zi,Popover:dn,ScrollSpy:_n,Tab:xn,Toast:Nn,Tooltip:ln}}));
//# sourceMappingURL=bootstrap.bundle.min.js.map
--- END OF FILE static/js/bootstrap.bundle.min.js ---

--- START OF FILE static/js/script.js ---

// =================================================================
// FONCTION GLOBALE POUR AFFICHER LA MODALE D'INFORMATION
// =================================================================
function updateCartIcon() {
    const badge = document.getElementById('cart-count-badge');
    if (!badge) return;
    
    const cart = JSON.parse(sessionStorage.getItem('reservationCart')) || {};
    const cartCount = Object.keys(cart).length;
    
    if (cartCount > 0) {
        // Formatage du nombre (99+ si > 99)
        badge.textContent = cartCount > 99 ? '99+' : cartCount;
        
        // Ajout de classes CSS selon la quantit√©
        badge.classList.toggle('large', cartCount > 99);
        
        badge.style.display = 'flex';
    } else {
        badge.style.display = 'none';
    }
}

function showInfoModal(title, message) {
    const modal = document.getElementById('info-modal');
    if (modal) {
        const modalTitle = modal.querySelector('#info-modal-title span');
        const modalText = modal.querySelector('#info-modal-text');
        if (modalTitle && modalText) {
            modalTitle.textContent = title;
            modalText.textContent = message;
            modal.style.display = 'flex';
        }
    }
}

// =================================================================
// SYST√àME DE NOTIFICATIONS (TOASTS)
// =================================================================
function showToast(message, type = 'success') {
    const container = document.querySelector('.toast-container');
    if (!container) return;

    let icon = 'bi-check-circle-fill';
    let toastClass = 'text-bg-success'; // Vert par d√©faut

    if (type === 'error' || type === 'danger') {
        icon = 'bi-exclamation-triangle-fill';
        toastClass = 'text-bg-danger'; // Rouge
    } else if (type === 'info') {
        icon = 'bi-info-circle-fill';
        toastClass = 'text-bg-primary'; // Bleu
    } else if (type === 'warning') {
        icon = 'bi-exclamation-circle-fill';
        toastClass = 'text-bg-warning'; // Jaune/Orange
    }

    const html = `
        <div class="toast ${toastClass} align-items-center border-0 fade show" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body d-flex align-items-center gap-3" style="padding: 12px 16px;">
                    <i class="bi ${icon} fs-4"></i>
                    <div style="font-size: 1rem;">
                        ${message}
                    </div>
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    `;

    container.insertAdjacentHTML('beforeend', html);
    
    const toastElement = container.lastElementChild;
    
    // Auto-destruction
    setTimeout(() => {
        if (toastElement && document.body.contains(toastElement)) {
            toastElement.classList.remove('show');
            setTimeout(() => toastElement.remove(), 500);
        }
    }, 4500);
    
    // Clic croix
    const closeBtn = toastElement.querySelector('.btn-close');
    if(closeBtn) closeBtn.addEventListener('click', () => toastElement.remove());
}

// =================================================================
// POINT D'ENTR√âE UNIQUE : TOUT LE CODE EST DANS CE BLOC
// =================================================================
document.addEventListener("DOMContentLoaded", function () {
	updateCartIcon();
    const csrfToken = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');

    // =================================================================
	// SECTION 1 : LOGIQUE DE TRI ET PAGINATION DYNAMIQUE (AJAX)
	// =================================================================
	const dynamicContent = document.getElementById('dynamic-content');
	if (dynamicContent) {
		const searchInput = document.getElementById('search-input');
		const armoireFilter = document.getElementById('filtre-armoire');
		const categorieFilter = document.getElementById('filtre-categorie');
		const etatFilter = document.getElementById('filtre-etat');
		let searchTimeout;

		function fetchDynamicContent(page = 1, sortBy = null, direction = null) {
			const currentSortBy = sortBy || dynamicContent.dataset.sortBy || 'nom';
			const currentDirection = direction || dynamicContent.dataset.direction || 'asc';
			const params = new URLSearchParams({
				page: page,
				sort_by: currentSortBy,
				direction: currentDirection
			});

			if (searchInput && searchInput.value) {
				params.set('q', searchInput.value);
			}
			if (armoireFilter && armoireFilter.value) {
				params.set('armoire', armoireFilter.value);
			}
			if (categorieFilter && categorieFilter.value) {
				params.set('categorie', categorieFilter.value);
			}
			if (etatFilter && etatFilter.value) {
				params.set('etat', etatFilter.value);
			}

			const apiUrl = `/api/inventaire/?${params.toString()}`;

			fetch(apiUrl)
			.then(response => response.json())
			.then(data => {
				dynamicContent.innerHTML = data.html;
				dynamicContent.dataset.sortBy = currentSortBy;
				dynamicContent.dataset.direction = currentDirection;
			})
			.catch(error => {
				console.error("Erreur lors de la mise √† jour du contenu:", error);
				dynamicContent.innerHTML = "<p>Erreur de chargement des donn√©es. Cette fonctionnalit√© est peut-√™tre en cours de migration.</p>";
			});
		}

		function debounceFetch() {
			clearTimeout(searchTimeout);
			searchTimeout = setTimeout(() => fetchDynamicContent(1), 300);
		}

		if (searchInput) searchInput.addEventListener('input', debounceFetch);
		if (armoireFilter) armoireFilter.addEventListener('change', () => fetchDynamicContent(1));
		if (categorieFilter) categorieFilter.addEventListener('change', () => fetchDynamicContent(1));
		if (etatFilter) etatFilter.addEventListener('change', () => fetchDynamicContent(1));
	}
	
	// =================================================================
    // SECTION 2 : GESTIONNAIRE D'√âV√âNEMENTS GLOBAL POUR TOUS LES CLICS
    // =================================================================
	document.body.addEventListener('click', function(e) {
		
        // --- Logique pour le contenu dynamique (Pagination & Tri) ---
        const dynamicContentContainer = e.target.closest('#dynamic-content');
        if (dynamicContentContainer) {
            const pageLink = e.target.closest('.page-link');
			if (pageLink) {
				e.preventDefault();
				const url = new URL(pageLink.href);
				const page = url.searchParams.get('page');
				if (page) fetchDynamicContent(page);
                return; // On arr√™te le traitement ici
			}
			
			const sortLink = e.target.closest('.sortable a');
			if (sortLink) {
				e.preventDefault();
				const url = new URL(sortLink.href);
				const sortBy = url.searchParams.get('sort_by');
				const direction = url.searchParams.get('direction');
				if (sortBy && direction) fetchDynamicContent(1, sortBy, direction);
                return; // On arr√™te le traitement ici
			}
        }

        // --- D√âBUT DE LA CORRECTION POUR LA MODALE DE DANGER ---
        const openModalButton = e.target.closest('.btn-open-danger-modal, .delete-btn, .btn-delete-objet');
		if (openModalButton) {
			e.preventDefault();

            const dangerModalElement = document.getElementById('dangerModal');
            if (!dangerModalElement) {
                console.error("L'√©l√©ment de la modale de danger (#dangerModal) est introuvable.");
                return;
            }
            
            // On utilise la m√©thode Bootstrap pour √©viter les conflits
            const dangerModal = bootstrap.Modal.getOrCreateInstance(dangerModalElement);

			const modalText = dangerModalElement.querySelector('#dangerModalText');
			const modalForm = dangerModalElement.querySelector('#dangerModalForm');

            let message = "√ätes-vous s√ªr de vouloir effectuer cette action ?";
			let actionUrl = "#";

			if (openModalButton.matches('.btn-delete-objet')) {
				const form = openModalButton.closest('form');
				message = `√ätes-vous s√ªr de vouloir supprimer l'objet <strong>'${openModalButton.dataset.objetNom}'</strong> ?<br>Cette action est irr√©versible.`;
				actionUrl = form ? form.action : '#';
			} else if (openModalButton.matches('.delete-btn')) {
				const form = openModalButton.closest('.delete-form-interactive');
				const itemName = form.dataset.itemName || 'cet √©l√©ment';
				message = `√ätes-vous s√ªr de vouloir supprimer l'√©l√©ment "${itemName}" ? Cette action est d√©finitive.`;
				actionUrl = form ? form.action : '#';
			}
			
			if (modalText) modalText.innerHTML = message;
			if (modalForm) modalForm.action = actionUrl;
			
            dangerModal.show();
            return; // On arr√™te le traitement ici
		}

		const editBtn = e.target.closest('.edit-btn');
		if (editBtn) {
			const card = editBtn.closest('.item-card');
			card.querySelector('.card-info').style.display = 'none';
			card.querySelector('.card-actions').style.display = 'none';
			card.querySelector('.edit-mode').style.display = 'flex';
			card.querySelector('.edit-input').focus();
		}

		const saveBtn = e.target.closest('.save-btn');
		if (saveBtn) {
			const card = saveBtn.closest('.item-card');
			const input = card.querySelector('.edit-input');
			const isArmoiresPage = window.location.pathname.includes('gestion_armoires');
			const fetchURL = isArmoiresPage ? '/admin/modifier_armoire' : '/admin/modifier_categorie';

			fetch(fetchURL, {
				method: 'POST',
				headers: { 'Content-Type': 'application/json', 'X-CSRFToken': csrfToken },
				body: JSON.stringify({ id: saveBtn.dataset.id, nom: input.value })
			})
			.then(response => response.json())
			.then(data => {
				if (data.success) {
					card.querySelector('.card-title').textContent = data.nouveau_nom;
					card.querySelector('.cancel-btn').click();
				} else {
					showInfoModal('Erreur', data.error);
				}
			});
		}

		const cancelBtn = e.target.closest('.cancel-btn');
		if (cancelBtn) {
			const card = cancelBtn.closest('.item-card');
			card.querySelector('.edit-mode').style.display = 'none';
			card.querySelector('.card-info').style.display = '';
			card.querySelector('.card-actions').style.display = '';
			card.querySelector('.edit-input').value = card.querySelector('.card-title').textContent.trim();
		}

		const closeBtn = e.target.closest('.modal-overlay .close-btn, .modal-overlay .btn-cancel');
		const overlay = e.target.closest('.modal-overlay');
		if (closeBtn || (overlay && e.target === overlay)) {
			const modalToClose = e.target.closest('.modal-overlay');
			if (modalToClose) modalToClose.style.display = 'none';
			return;
		}

		const trigger = e.target.closest('[data-modal-trigger]');
		if (trigger) {
			console.log("√âl√©ment d√©clencheur trouv√© (trigger) :", trigger);
			const modalId = trigger.dataset.modalTrigger;
			console.log("Tentative d'ouverture de la modale avec l'ID :", modalId);

			const modal = document.getElementById(modalId);
			if (!modal) {
				console.error(`Modale non trouv√©e avec l'ID : ${modalId}`);
				return;
			}
			
			if (trigger.dataset.modalTitle) {
				const modalTitle = modal.querySelector('#' + modalId + '-title span');
				if (modalTitle) modalTitle.textContent = trigger.dataset.modalTitle;
			}
			if (trigger.dataset.modalMessage) {
				const modalMessage = modal.querySelector('#' + modalId + '-message');
				if (modalMessage) modalMessage.textContent = trigger.dataset.modalMessage;
			}
			modal.style.display = 'flex';
			
			if (modalId === 'cloture-impossible-modal') {
				const anneeScolaire = trigger.dataset.anneeScolaire;
				const anneeFin = trigger.dataset.anneeFin;
				modal.querySelector('#cloture-impossible-annee').textContent = anneeScolaire;
				modal.querySelector('#cloture-impossible-date').textContent = `le 01/06/${anneeFin}`;
			}

			if (modalId === 'add-object-modal') {
				const addObjectModalElement = document.getElementById('add-object-modal');
				if (!addObjectModalElement) return;
				
				const addObjectModalInstance = bootstrap.Modal.getOrCreateInstance(addObjectModalElement);
				const form = addObjectModalElement.querySelector('form');
				const modalTitle = addObjectModalElement.querySelector('#modal-objet-title');
				const submitBtn = addObjectModalElement.querySelector('#modal-submit-btn');
				const imagePreviewContainer = addObjectModalElement.querySelector('#image-preview-container');
				const imagePreview = imagePreviewContainer?.querySelector('img');
				
				const objetId = trigger.dataset.objetId;
				
				if (objetId) {
					// --- MODE MODIFICATION ---
					if (modalTitle) modalTitle.textContent = "Modifier l'objet";
					if (submitBtn) submitBtn.textContent = "Mettre √† jour";
					if (form) form.action = `/modifier_objet/${objetId}`;
					
					// Pr√©-remplissage des champs
					const fields = {
						'nom': trigger.dataset.nom,
						'quantite': trigger.dataset.quantite,
						'seuil': trigger.dataset.seuil,
						'date_peremption': trigger.dataset.datePeremption,
						'armoire_id': trigger.dataset.armoireId,
						'categorie_id': trigger.dataset.categorieId,
						'image_url': trigger.dataset.imageUrl,
						'fds_url': trigger.dataset.fdsUrl
					};
					
					for (const [fieldId, value] of Object.entries(fields)) {
						const input = form?.querySelector(`#${fieldId}`);
						if (input) input.value = value || '';
					}
					
					// Gestion de l'image
					const imageUrl = trigger.dataset.imageUrl;
					if (imageUrl && imagePreview && imagePreviewContainer) {
						imagePreview.src = imageUrl;
						imagePreviewContainer.style.display = 'block';
					} else if (imagePreviewContainer) {
						imagePreviewContainer.style.display = 'none';
					}
					
				} else {
					// --- MODE AJOUT ---
					if (modalTitle) modalTitle.textContent = "Ajouter un nouvel objet";
					if (submitBtn) submitBtn.textContent = "Enregistrer l'objet";
					if (form) {
						form.action = document.body.dataset.addUrl || '/ajouter_objet';
						form.reset();
					}
					if (imagePreviewContainer) imagePreviewContainer.style.display = 'none';
				}
				
				// Ouvrir la modale Bootstrap
				addObjectModalInstance.show();
				
				// Initialisation Pexels
				setupPexelsSearch();
				
				return; // Important : arr√™ter ici
			}

			if (trigger.dataset.formUsername) {
				modal.querySelectorAll('#username, #username-placeholder, #username-to-match').forEach(el => {
					el.textContent = trigger.dataset.formUsername;
				});
			}
			if (modalId === 'edit-email-modal' && trigger.dataset.formEmail) {
				form.querySelector('#email').value = trigger.dataset.formEmail;
			}
			if (modalId === 'edit-fournisseur-modal') {
				const form = modal.querySelector('#edit-fournisseur-form');
				const id = trigger.dataset.id;
				
				form.action = `/admin/fournisseurs/modifier/${id}`;
				form.querySelector('#edit_nom').value = trigger.dataset.nom;
				form.querySelector('#edit_site_web').value = trigger.dataset.siteWeb;
				form.querySelector('#edit_logo_url').value = trigger.dataset.logoUrl;
			}
			if (modalId === 'delete-user-modal') {
				const username = trigger.dataset.formUsername;
				form.dataset.username = username;
				modal.querySelector('#username-to-match').textContent = username;
				modal.querySelector('#username-placeholder').textContent = username;
				modal.querySelector('#delete-confirm-input').value = '';
				modal.querySelector('#delete-error-message').textContent = '';
			}
			if (modalId === 'budget-modal') {
				form.querySelector('#annee').value = trigger.dataset.formAnnee || new Date().getFullYear();
				form.querySelector('#montant_initial').value = trigger.dataset.formMontantInitial || '0.00';
			}
			if (modalId === 'depense-modal') {
				const form = modal.querySelector('form');
				if (form) {
					form.reset();
				}

				const dateInput = modal.querySelector('#date_depense');
				if (dateInput) {
					dateInput.value = new Date().toISOString().split('T')[0];
				}

				const fournisseurSelect = modal.querySelector('#fournisseur_id');
				if (fournisseurSelect) {
					fournisseurSelect.disabled = false;
				}
			}
			if (modalId === 'edit-depense-modal') {
				const depenseId = trigger.dataset.depenseId;
				form.action = `/admin/budget/modifier_depense/${depenseId}`;
				form.querySelector('#edit_date_depense').value = trigger.dataset.formDateDepense;
				form.querySelector('#edit_fournisseur_id').value = trigger.dataset.formFournisseurId;
				form.querySelector('#edit_contenu').value = trigger.dataset.formContenu;
				form.querySelector('#edit_montant').value = trigger.dataset.formMontant;
				const estBonAchatCheckbox = form.querySelector('#edit_est_bon_achat');
				estBonAchatCheckbox.checked = trigger.dataset.formEstBonAchat == '1';
				estBonAchatCheckbox.dispatchEvent(new Event('change'));
			}
			if (modalId === 'echeance-modal') {
				const modalTitle = modal.querySelector('#echeance-modal-title');
				const submitBtn = modal.querySelector('#echeance-submit-btn');
				const traiteGroup = modal.querySelector('#traite-group');
				const echeanceId = trigger.dataset.echeanceId;
				if (echeanceId) {
					modalTitle.textContent = "Modifier une √©ch√©ance";
					submitBtn.textContent = "Enregistrer les modifications";
					form.action = `/admin/echeances/modifier/${echeanceId}`;
					form.querySelector('#intitule').value = trigger.dataset.formIntitule;
					form.querySelector('#date_echeance').value = trigger.dataset.formDateEcheance;
					form.querySelector('#details').value = trigger.dataset.formDetails;
					traiteGroup.style.display = 'flex';
					form.querySelector('#traite').checked = trigger.dataset.formTraite == '1';
				} else {
					modalTitle.textContent = "Ajouter une √©ch√©ance";
					submitBtn.textContent = "Enregistrer";
					form.action = document.body.dataset.urlAjoutEcheance;
					form.reset();
					traiteGroup.style.display = 'none';
				}
			}
			if (modalId === 'reset-licence-modal') {
				const passwordInput = modal.querySelector('#admin_password_confirm');
				if (passwordInput) passwordInput.value = '';
			}
		}

		const instanceIdCode = e.target.closest('#instance-id-code');
		if (instanceIdCode) {
			navigator.clipboard.writeText(instanceIdCode.textContent)
			.then(() => {
				const originalText = instanceIdCode.textContent;
				instanceIdCode.textContent = 'Copi√© !';
				setTimeout(() => { instanceIdCode.textContent = originalText; }, 1500);
			})
			.catch(err => {
				console.error('Erreur de copie : ', err);
				showInfoModal("Erreur", "Impossible de copier l'identifiant.");
			});
		}

		const clotureBtn = e.target.closest('#cloture-budget-btn');
		if (clotureBtn) {
			const form = document.getElementById('cloture-budget-form');
			const modal = document.getElementById('cloture-budget-modal');
			const anneeSpan = document.getElementById('cloture-budget-annee');
			const confirmBtn = document.getElementById('confirm-cloture-btn');
			if (form && modal && anneeSpan && confirmBtn) {
				anneeSpan.textContent = form.dataset.annee;
				confirmBtn.onclick = () => { form.submit(); };
			}
		}
	});
	// =================================================================
	// SECTION 3 : GESTIONNAIRES D'√âV√âNEMENTS NON-CLIC (input, change, submit)
	// =================================================================
	document.body.addEventListener('change', function(e) {
		if (e.target.matches('.commande-checkbox, .traite-checkbox')) {
			const checkbox = e.target;
			const isCommande = checkbox.matches('.commande-checkbox');
			const url = isCommande 
				? `/maj_commande/${checkbox.dataset.id}` 
				: `/maj_traite/${checkbox.dataset.id}`;
				
			const body = isCommande 
				? { en_commande: checkbox.checked } 
				: { traite: checkbox.checked };

			fetch(url, {
				method: "POST",
				headers: { 
					"Content-Type": "application/json",
					"X-CSRFToken": csrfToken
				},
				body: JSON.stringify(body)
			})
			.then(response => {
				if (!response.ok) {
					throw new Error('La r√©ponse du serveur n\'est pas valide.');
				}
				return response.json();
			})
			.then(data => {
				if (data.success) {
					checkbox.closest('tr').classList.toggle('acquitte', checkbox.checked);
				} else {
					showInfoModal("Erreur", data.error || "Une erreur est survenue.");
					checkbox.checked = !checkbox.checked;
				}
			})
			.catch(error => {
				console.error('Erreur Fetch:', error);
				showInfoModal("Erreur de Communication", "Impossible de contacter le serveur.");
				checkbox.checked = !checkbox.checked;
			});
		}
	});

	// =======================================================================
	// SECTION 4 : RECHERCHE GLOBALE (HEADER) - VERSION CORRIG√âE
	// =======================================================================
	const globalSearchInput = document.getElementById('globalSearchInput');
	const resultsContainer = document.getElementById('globalSearchResults');
	const searchWrapper = document.getElementById('search-wrapper-dropdown');
	const clearBtn = document.getElementById('clear-btn-dropdown');

	if (globalSearchInput && resultsContainer && searchWrapper) {
		let searchTimeoutHeader;
		
		// 1. Gestion visuelle (Focus)
		globalSearchInput.addEventListener('focus', () => {
			searchWrapper.classList.add('focused');
			globalSearchInput.classList.add('expanded');
			// Si on a d√©j√† une recherche, on r√©affiche les r√©sultats
			if (globalSearchInput.value.length >= 2 && resultsContainer.innerHTML !== '') {
				resultsContainer.style.display = 'block';
				resultsContainer.classList.add('visible');
			}
		});

		// 2. Gestion de la frappe
		globalSearchInput.addEventListener('input', function(e) {
			const query = e.target.value.trim();
			clearTimeout(searchTimeoutHeader);
			
			// Gestion du bouton croix
			if (clearBtn) {
				if (query) clearBtn.classList.add('visible');
				else clearBtn.classList.remove('visible');
			}
			
			// Si vide ou trop court, on cache tout
			if (query.length < 2) {
				resultsContainer.classList.remove('visible');
				resultsContainer.style.display = 'none';
				return;
			}
			
			// D√©lai (Debounce)
			searchTimeoutHeader = setTimeout(() => {
				console.log("Recherche lanc√©e pour :", query); // DEBUG
				
				// Afficher chargement
				resultsContainer.style.display = 'block';
				resultsContainer.classList.add('visible');
				resultsContainer.innerHTML = '<div class="search-status"><div class="spinner-border spinner-border-sm text-white me-2"></div>Recherche...</div>';
				
				// Appel API
				fetch(`/api/search?q=${encodeURIComponent(query)}`)
					.then(response => {
						console.log("Statut r√©ponse API :", response.status); // DEBUG
						if (!response.ok) throw new Error('Erreur r√©seau');
						return response.json();
					})
					.then(data => {
						console.log("Donn√©es re√ßues :", data); // DEBUG
						
						if (data.length === 0) {
							resultsContainer.innerHTML = '<div class="search-status">Aucun r√©sultat trouv√©.</div>';
						} else {
							let html = '';
							data.forEach(item => {
								// 1. Correction du nom de la cl√© (l'API renvoie 'image', pas 'image_url')
								const rawImage = item.image || item.image_url; 
								
								// 2. Logique Hybride : URL Externe vs Fichier Local
								let imgUrl = 'https://via.placeholder.com/40?text=IMG'; // Image par d√©faut
								
								if (rawImage) {
									if (rawImage.startsWith('http')) {
										imgUrl = rawImage; // C'est une URL web (Pexels, etc.)
									} else {
										imgUrl = `/static/${rawImage}`; // C'est un fichier local -> on ajoute /static/
									}
								}

								// S√©curisation des valeurs nulles
								const armoire = item.armoire || 'Sans armoire';
								const quantite = item.quantite !== undefined ? item.quantite : '?';
								
								html += `
									<a href="/objet/${item.id}" class="search-result-item">
										<img src="${imgUrl}" alt="Img" class="search-result-img">
										<div class="search-result-info">
											<h6>${item.nom}</h6>
											<small>${armoire} ‚Ä¢ Qt√©: ${quantite}</small>
										</div>
									</a>
								`;
							});
							resultsContainer.innerHTML = html;
						}
					})
					.catch(error => {
						console.error('Erreur JS recherche:', error);
						resultsContainer.innerHTML = '<div class="search-status text-danger">Erreur technique.</div>';
					});
			}, 300);
		});
		
		// 3. Bouton Clear
		if (clearBtn) {
			clearBtn.addEventListener('click', function() {
				globalSearchInput.value = '';
				clearBtn.classList.remove('visible');
				resultsContainer.classList.remove('visible');
				resultsContainer.style.display = 'none';
				globalSearchInput.focus();
			});
		}
		
		// 4. Fermeture au clic ext√©rieur (INDISPENSABLE)
		document.addEventListener('click', function(e) {
			if (!searchWrapper.contains(e.target)) {
				searchWrapper.classList.remove('focused');
				globalSearchInput.classList.remove('expanded');
				resultsContainer.classList.remove('visible');
				resultsContainer.style.display = 'none';
			}
		});
	}
    // =====================================================================
	// SECTION 5 : GESTION DEPLACEMENT EN MASSE
	// =====================================================================
    const selectAllCheckbox = document.getElementById('select-all-checkbox');
	if (selectAllCheckbox) {
		const objetCheckboxes = document.querySelectorAll('.objet-checkbox');
		const bulkActionSection = document.getElementById('bulk-action-section');
		const bulkMoveBtn = document.getElementById('bulk-move-btn');
		const moveDestination = document.getElementById('move-destination');
		function toggleBulkActionSection() {
			const anyChecked = document.querySelector('.objet-checkbox:checked');
			if(bulkActionSection) bulkActionSection.style.display = anyChecked ? 'flex' : 'none';
		}
		selectAllCheckbox.addEventListener('change', function () {
			objetCheckboxes.forEach(checkbox => { checkbox.checked = this.checked; });
			toggleBulkActionSection();
		});
		objetCheckboxes.forEach(checkbox => {
			checkbox.addEventListener('change', function () {
				if (!this.checked) selectAllCheckbox.checked = false;
				toggleBulkActionSection();
			});
		});
		if(bulkMoveBtn) {
            bulkMoveBtn.addEventListener('click', function () {
                const selectedObjectIds = Array.from(objetCheckboxes).filter(cb => cb.checked).map(cb => cb.dataset.id);
                if (selectedObjectIds.length === 0) {
                    showInfoModal("Aucune S√©lection", "Veuillez s√©lectionner au moins un objet √† d√©placer.");
                    return;
                }
                const destinationId = moveDestination.value;
                const pathname = window.location.pathname;
                const typeDestination = pathname.includes('/armoire/') ? 'armoire' : (pathname.includes('/categorie/') ? 'categorie' : '');
                if (!typeDestination) {
                    showInfoModal("Action Impossible", "Action de d√©placement non disponible sur cette page.");
                    return;
                }
                fetch('/api/deplacer_objets', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'X-CSRFToken': csrfToken },
                    body: JSON.stringify({
                        objet_ids: selectedObjectIds,
                        destination_id: destinationId,
                        type_destination: typeDestination
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        window.location.reload();
                    } else {
                        showInfoModal("Erreur", "Erreur lors du d√©placement des objets : " + (data.error || 'Erreur inconnue'));
                    }
                })
                .catch(error => {
                    console.error("Erreur lors du d√©placement en masse :", error);
                    showInfoModal("Erreur de Communication", "Une erreur est survenue lors de la communication avec le serveur.");
                });
            });
        }
	}
	
	// =================================================================
	// SECTION 6 : ANIMATION DE LA CLOCHE D'ALERTE
	// =================================================================
	const alertIcon = document.getElementById('alert-icon-link');
	if (alertIcon) {
		const alertCount = parseInt(alertIcon.dataset.alertCount, 10);

		if (alertCount > 3) {
			alertIcon.classList.add('has-alerts-high');
		} else if (alertCount > 0) {
			alertIcon.classList.add('has-alerts-medium');
		}
	}

    // ==================================================================
	// SECTION 7 : FILTRE DE kit
	// ==================================================================
    const kitObjetSearch = document.getElementById('kit-objet-search');
    if (kitObjetSearch) {
        const availableObjectsTable = document.getElementById('available-objects-table');
        const rows = availableObjectsTable.querySelectorAll('tbody tr');
        kitObjetSearch.addEventListener('input', function () {
            const searchTerm = this.value.toLowerCase();
            rows.forEach(row => {
                const nomObjet = row.querySelector('td:first-child').textContent.toLowerCase();
                row.style.display = nomObjet.includes(searchTerm) ? '' : 'none';
            });
        });
    }

    // ===================================================================
	// SECTION 8 : Rapports
	// ===================================================================
    const formRapportsGrid = document.querySelector('.form-rapports-grid');
    if (formRapportsGrid) {
        const dateDebutInput = formRapportsGrid.querySelector('#date_debut');
        const dateFinInput = formRapportsGrid.querySelector('#date_fin');
        const today = new Date().toISOString().split('T')[0];
        if (!dateFinInput.value) dateFinInput.value = today;
        dateDebutInput.addEventListener('change', () => {
            if (dateDebutInput.value) {
                dateFinInput.min = dateDebutInput.value;
                if (dateFinInput.value < dateDebutInput.value) dateFinInput.value = dateDebutInput.value;
            }
        });
    }

    // ===================================================================
	// SECTION 9 : EXPORT DU BUDGET
	// ===================================================================
    const dateDebutExport = document.getElementById('date_debut_export');
    if (dateDebutExport) {
        const dateFinExport = document.getElementById('date_fin_export');
        const pdfLink = document.getElementById('export-pdf-link');
        const excelLink = document.getElementById('export-excel-link');
        function updateExportLinks() {
            const dateDebut = dateDebutExport.value;
            const dateFin = dateFinExport.value;
            const exportUrl = '/admin/exporter_budget';
            const paramsPdf = new URLSearchParams({ format: 'pdf', date_debut: dateDebut, date_fin: dateFin });
            pdfLink.href = `${exportUrl}?${paramsPdf.toString()}`;
            const paramsExcel = new URLSearchParams({ format: 'excel', date_debut: dateDebut, date_fin: dateFin });
            excelLink.href = `${exportUrl}?${paramsExcel.toString()}`;
        }
        dateDebutExport.addEventListener('change', updateExportLinks);
        dateFinExport.addEventListener('change', updateExportLinks);
        updateExportLinks();
    }

    // ====================================================================
	// SECTION 10 : MODALE DES DEPENSES
	// ====================================================================
    const depenseModal = document.getElementById('depense-modal');
    if (depenseModal) {
        const bonAchatCheckbox = depenseModal.querySelector('#est_bon_achat');
        const fournisseurSelect = depenseModal.querySelector('#fournisseur_id');
        bonAchatCheckbox.addEventListener('change', function () {
            fournisseurSelect.disabled = this.checked;
            if (this.checked) fournisseurSelect.value = '';
        });
    }
    const editDepenseModal = document.getElementById('edit-depense-modal');
    if (editDepenseModal) {
        const bonAchatCheckbox = editDepenseModal.querySelector('#edit_est_bon_achat');
        const fournisseurSelect = editDepenseModal.querySelector('#edit_fournisseur_id');
        bonAchatCheckbox.addEventListener('change', function () {
            fournisseurSelect.disabled = this.checked;
            if (this.checked) fournisseurSelect.value = '';
        });
    }

    // =======================================================================
	// SECTION 11 : FONCTIONS ADMIN DB LICENCE GEST UTILISATEUR
	// =======================================================================
	const importDbInput = document.getElementById('fichier-db');
	if (importDbInput) {
		importDbInput.addEventListener('change', function () {
			if (this.files.length > 0) this.form.submit();
		});
	}
	const resetLicenceForm = document.getElementById('reset-licence-form');
	if (resetLicenceForm) {
		resetLicenceForm.addEventListener('submit', function (event) {
			const confirmation = confirm('√ätes-vous s√ªr de vouloir r√©initialiser la licence ? L\'application repassera en mode GRATUIT limit√© √† 50 objets.');
			if (!confirmation) event.preventDefault();
		});
	}
	const deleteUserModal = document.getElementById('delete-user-modal');
	if (deleteUserModal) {
		const deleteForm = deleteUserModal.querySelector('form');
		const confirmInput = deleteUserModal.querySelector('#delete-confirm-input');
		const errorMessage = deleteUserModal.querySelector('#delete-error-message');
		deleteForm.addEventListener('submit', function(event) {
			if (confirmInput.value.trim() !== this.dataset.username) {
				event.preventDefault(); 
				errorMessage.textContent = 'Le nom de l\'utilisateur ne correspond pas.';
				confirmInput.focus();
			} else {
				errorMessage.textContent = '';
			}
		});
	}

    // =======================================================================
	// SECTION 12 : UPLOAD LOGO
	// =======================================================================
    const editLogoInput = document.getElementById('edit_logo');
    if (editLogoInput) {
        const editLogoFilename = document.getElementById('edit-logo-filename');
        const defaultText = editLogoFilename.textContent;
        editLogoInput.addEventListener('change', function() {
            editLogoFilename.textContent = this.files.length > 0 ? this.files[0].name : defaultText;
        });
    }

	// =================================================================
	// SECTION 13 : LOGIQUE POUR LA RECHERCHE D'IMAGES PEXELS
	// =================================================================
    function setupPexelsSearch() {
        const pexelsSearchButton = document.getElementById('btn-search-pexels');
        const pexelsResultsContainer = document.getElementById('pexels-results');
        const imageUrlInput = document.getElementById('image_url');
        const imageNameInput = document.getElementById('nom');
        const imagePreview = document.getElementById('image-preview');
        const imagePreviewContainer = document.getElementById('image-preview-container');

        if (!pexelsSearchButton || pexelsSearchButton.dataset.listenerAttached) return;
        
        pexelsSearchButton.dataset.listenerAttached = 'true';

        pexelsSearchButton.addEventListener('click', async () => {
            const query = imageNameInput.value.trim();
            if (!query) {
                alert("Veuillez d'abord entrer un nom pour l'objet √† rechercher.");
                return;
            }
            pexelsResultsContainer.innerHTML = '<p>Recherche en cours...</p>';
            pexelsResultsContainer.style.display = 'block';
            try {
                const response = await fetch(`/api/search-images?q=${encodeURIComponent(query)}`);
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || 'La recherche a √©chou√©.');
                }
                const images = await response.json();
                pexelsResultsContainer.innerHTML = '';
                if (images.length === 0) {
                    pexelsResultsContainer.innerHTML = '<p>Aucune image trouv√©e.</p>';
                } else {
                    images.forEach(image => {
                        const imgElement = document.createElement('img');
                        imgElement.src = image.small_url;
                        imgElement.classList.add('pexels-image');
                        imgElement.alt = `Photo par ${image.photographer}`;
                        imgElement.title = `Photo par ${image.photographer}`;
                        imgElement.addEventListener('click', () => {
                            imageUrlInput.value = image.large_url;
                            imagePreview.src = image.large_url;
                            imagePreviewContainer.style.display = 'block';
                            pexelsResultsContainer.style.display = 'none';
                        });
                        pexelsResultsContainer.appendChild(imgElement);
                    });
                }
            } catch (error) {
                pexelsResultsContainer.innerHTML = `<p style="color: red;">Erreur : ${error.message}</p>`;
            }
        });

        imageUrlInput.addEventListener('input', () => {
            const url = imageUrlInput.value.trim();
            if (url) {
                imagePreview.src = url;
                imagePreviewContainer.style.display = 'block';
            } else {
                imagePreviewContainer.style.display = 'none';
            }
        });
    }
	
	// =================================================================
	// NOUVELLE SECTION : GESTION DE LA MODALE D'AJOUT/MODIFICATION D'OBJET
	// =================================================================
	const addObjectModalElement = document.getElementById('addObjectModal');
	if (addObjectModalElement) {
		addObjectModalElement.addEventListener('show.bs.modal', function (event) {
			const button = event.relatedTarget; // Le bouton qui a ouvert la modale
			
			// S√©curit√© : v√©rifier que le bouton existe bien
			if (!button) {
				console.error("Aucun bouton d√©clencheur trouv√© pour la modale");
				return;
			}
			
			const form = addObjectModalElement.querySelector('form');
			const modalTitle = addObjectModalElement.querySelector('.modal-title');
			const submitBtn = form.querySelector('button[type="submit"]');
			const imagePreviewContainer = addObjectModalElement.querySelector('#image-preview-container');
			const imagePreview = imagePreviewContainer?.querySelector('img');
			
			// On v√©rifie si on est en mode "Modification"
			const objetId = button.dataset.objetId;
			
			if (objetId) {
				// --- MODE MODIFICATION ---
				console.log("Mode MODIFICATION - Objet ID:", objetId);
				
				modalTitle.textContent = "Modifier l'objet";
				form.action = `/modifier_objet/${objetId}`;
				
				// Pr√©-remplissage des champs avec validation
				const fields = {
					'nom': button.dataset.nom,
					'quantite': button.dataset.quantite,
					'seuil': button.dataset.seuil,
					'date_peremption': button.dataset.datePeremption,
					'armoire_id': button.dataset.armoireId,
					'categorie_id': button.dataset.categorieId,
					'image_url': button.dataset.imageUrl,
					'fds_url': button.dataset.fdsUrl
				};
				
				// Remplissage s√©curis√© de tous les champs
				for (const [fieldId, value] of Object.entries(fields)) {
					const input = form.querySelector(`#${fieldId}`);
					if (input) {
						input.value = value || '';
					} else {
						console.warn(`Champ #${fieldId} introuvable dans le formulaire`);
					}
				}
				
				// Gestion de l'aper√ßu d'image
				const imageUrl = button.dataset.imageUrl;
				if (imageUrl && imagePreview && imagePreviewContainer) {
					// V√©rification si URL externe ou fichier local
					if (imageUrl.startsWith('http')) {
						imagePreview.src = imageUrl;
					} else {
						imagePreview.src = `/static/${imageUrl}`;
					}
					imagePreviewContainer.style.display = 'block';
				} else if (imagePreviewContainer) {
					imagePreviewContainer.style.display = 'none';
				}
				
				// Bouton de soumission
				if (submitBtn) {
					submitBtn.textContent = 'Mettre √† jour';
					submitBtn.className = 'btn btn-primary'; // Optionnel : changer le style
				}
				
			} else {
				// --- MODE AJOUT ---
				console.log("Mode AJOUT - Nouveau objet");
				
				modalTitle.textContent = "Ajouter un nouvel objet";
				
				// URL d'ajout depuis data-attribute ou URL par d√©faut
				form.action = document.body.dataset.addUrl || '/ajouter_objet';
				
				// R√©initialisation compl√®te du formulaire
				form.reset();
				
				// Masquer l'aper√ßu d'image
				if (imagePreviewContainer) {
					imagePreviewContainer.style.display = 'none';
				}
				
				// Bouton de soumission
				if (submitBtn) {
					submitBtn.textContent = 'Enregistrer l\'objet';
					submitBtn.className = 'btn btn-success'; // Optionnel : changer le style
				}
			}
			
			// Initialisation de la recherche Pexels
			if (typeof setupPexelsSearch === 'function') {
				setupPexelsSearch();
			} else {
				console.warn("setupPexelsSearch n'est pas d√©finie");
			}
		});
	}
	
	// =================================================================
    // SECTION 14 : MODALE DE SUGGESTION DE COMMANDE (BOOTSTRAP 5)
    // =================================================================
    const suggestionModal = document.getElementById('suggestionModal');
    if (suggestionModal) {
        const suggestionModalInstance = new bootstrap.Modal(suggestionModal);
        
        const objetNomElement = document.getElementById('suggestion-objet-nom');
        const objetIdInput = document.getElementById('suggestion-objet-id');
        const quantityInput = document.getElementById('suggestion-quantity-input');
        const commentaireInput = document.getElementById('suggestion-commentaire');
        const confirmBtn = document.getElementById('suggestion-confirm-btn');

        // 1. OUVERTURE ET CALCUL
        document.addEventListener('click', function(e) {
            const btnSuggest = e.target.closest('.btn-suggest');
            if (btnSuggest) {
                e.preventDefault();
                
                // R√©cup√©ration des donn√©es depuis le bouton HTML
                const objetId = btnSuggest.dataset.objetId;
                const objetNom = btnSuggest.dataset.objetNom;
                
                // Conversion en nombre (le || 0 √©vite le NaN si l'attribut est vide)
                const stockActuel = parseInt(btnSuggest.dataset.stock) || 0;
                const seuilAlerte = parseInt(btnSuggest.dataset.seuil) || 0;
                
                console.log(`Calcul suggestion : Stock=${stockActuel}, Seuil=${seuilAlerte}`); // Debug console

                // Remplissage UI
                if (objetNomElement) objetNomElement.textContent = objetNom;
                if (objetIdInput) objetIdInput.value = objetId;
                
                // --- CALCUL INTELLIGENT ---
                let proposition = 1; // Valeur par d√©faut
                
                // Si on est en dessous ou √©gal au seuil (et que le seuil est d√©fini)
                if (stockActuel <= seuilAlerte && seuilAlerte > 0) {
                    // Objectif : Remonter √† 2x le seuil (stock de s√©curit√©)
                    const cible = seuilAlerte * 2;
                    proposition = cible - stockActuel;
                    
                    // S√©curit√© : on commande au moins 1, et id√©alement au moins 5 si c'est du consommable
                    if (proposition < 1) proposition = 1;
                }
                
                if (quantityInput) quantityInput.value = proposition;
                
                // Placeholder contextuel
                if (commentaireInput) {
                    commentaireInput.value = '';
                    if (stockActuel <= seuilAlerte && seuilAlerte > 0) {
                        commentaireInput.placeholder = `Stock critique (${stockActuel}/${seuilAlerte}). R√©assort conseill√©.`;
                    } else {
                        commentaireInput.placeholder = "Pourquoi cette commande ?";
                    }
                }
                
                suggestionModalInstance.show();
                
                // Focus sur le champ quantit√©
                setTimeout(() => {
                    if (quantityInput) { quantityInput.focus(); quantityInput.select(); }
                }, 300);
            }
        });

        // 2. RESET FERMETURE
        suggestionModal.addEventListener('hidden.bs.modal', function() {
            if (quantityInput) quantityInput.value = '';
            if (commentaireInput) commentaireInput.value = '';
            if (confirmBtn) {
                confirmBtn.classList.remove('loading');
                confirmBtn.disabled = false;
            }
        });

        // 3. ENVOI (Utilise showToast pour l'affichage propre)
        if (confirmBtn) {
            confirmBtn.addEventListener('click', async function() {
                const objetId = objetIdInput.value;
                const quantite = parseInt(quantityInput.value);
                const commentaire = commentaireInput.value.trim();
                
                if (!quantite || quantite < 1) {
                    quantityInput.classList.add('is-invalid');
                    return;
                }
                quantityInput.classList.remove('is-invalid');
                
                confirmBtn.classList.add('loading');
                confirmBtn.disabled = true;
                
                try {
                    const response = await fetch('/api/suggerer_commande', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRFToken': csrfToken
                        },
                        body: JSON.stringify({
                            objet_id: objetId,
                            quantite: quantite,
                            commentaire: commentaire
                        })
                    });
                    
                    const result = await response.json();
                    
                    if (response.ok) {
                        // C'EST ICI QUE L'AFFICHAGE SE JOUE
                        // On utilise showToast (la bulle) et non showInfoModal (le truc moche)
                        if (typeof showToast === 'function') {
                            showToast(result.message || 'Suggestion envoy√©e !', 'success');
                        } else {
                            alert(result.message); // Fallback si showToast n'existe pas
                        }
                        
                        suggestionModalInstance.hide();
                        setTimeout(() => window.location.reload(), 1500);
                    } else {
                        if (typeof showToast === 'function') {
                            showToast(result.error || 'Erreur serveur', 'error');
                        } else {
                            alert(result.error);
                        }
                    }
                } catch (error) {
                    console.error('Erreur:', error);
                    if (typeof showToast === 'function') {
                        showToast('Erreur de connexion', 'error');
                    }
                } finally {
                    confirmBtn.classList.remove('loading');
                    confirmBtn.disabled = false;
                }
            });
        }
    }
    setupPexelsSearch();
	
	// =================================================================
    // SECTION 15 : ANIMATION BREADCRUMB (FIL D'ARIANE)
    // =================================================================
    const breadcrumbLinks = document.querySelectorAll('.breadcrumb-link');
    
    if (breadcrumbLinks.length > 0) {
        breadcrumbLinks.forEach(link => {
            link.addEventListener('mouseenter', function() {
                const separator = this.nextElementSibling;
                if (separator && separator.classList.contains('breadcrumb-separator')) {
                    separator.style.transform = 'scale(1.3) rotate(20deg)';
                    separator.style.color = '#667eea';
                    separator.style.fontWeight = 'bold';
                }
            });
            
            link.addEventListener('mouseleave', function() {
                const separator = this.nextElementSibling;
                if (separator && separator.classList.contains('breadcrumb-separator')) {
                    separator.style.transform = 'scale(1) rotate(0deg)';
                    separator.style.color = '#d1d5db';
                    separator.style.fontWeight = '300';
                }
            });
        });
    }
});
--- END OF FILE static/js/script.js ---

--- START OF FILE static/js/modules/booking-modal.js ---

// static/js/modules/booking-modal.js
import { showToast } from './toast.js';
import { updateCartBadge } from './cart-utils.js';

const bookingModalElement = document.getElementById('bookingModal');
let bookingModalInstance = null;

let modalTitle, dateInput, startTimeSelect, endTimeSelect;
let availableItemsContainer, bookingCartContainer, validateBtn, cancelBtn;
let editingGroupId = null;

// Gestion Modale "Dernier Item"
let lastItemModalInstance = null;
let pendingDelete = null;

export function initBookingModal() {
    if (!bookingModalElement) return;

    modalTitle = bookingModalElement.querySelector('.modal-title');
    dateInput = document.getElementById('bookingDate');
    startTimeSelect = document.getElementById('startTime');
    endTimeSelect = document.getElementById('endTime');
    availableItemsContainer = document.getElementById('availableItems');
    bookingCartContainer = document.getElementById('bookingCart');
    validateBtn = document.getElementById('validateBookingBtn');
    cancelBtn = bookingModalElement.querySelector('.modal-footer .btn-secondary');

    // Init Modale Warning
    const warningEl = document.getElementById('lastItemWarningModal');
    if (warningEl) {
        lastItemModalInstance = new bootstrap.Modal(warningEl);
        const confirmBtn = document.getElementById('btnConfirmLastItemDelete');
        if (confirmBtn) {
            confirmBtn.addEventListener('click', () => {
                if (pendingDelete) {
                    performRemoveItem(pendingDelete.id, pendingDelete.type);
                    lastItemModalInstance.hide();
                    pendingDelete = null;
                }
            });
        }
    }

    bookingModalElement.addEventListener('show.bs.modal', handleModalOpen);
    
    // CORRECTION : Nettoyage forc√© √† la fermeture
    bookingModalElement.addEventListener('hidden.bs.modal', () => {
        resetModalState();
        forceCleanup(); 
    });

    if (startTimeSelect) startTimeSelect.addEventListener('change', handleTimeChange);
    if (endTimeSelect) endTimeSelect.addEventListener('change', loadAvailabilities);

    setupDelegatedEvents();
}

export function openReservationModal(date, groupId = null) {
    if (!bookingModalElement) return;
    bookingModalElement.dataset.date = date;
    if (groupId) bookingModalElement.dataset.groupId = groupId;
    else delete bookingModalElement.dataset.groupId;

    if (!bookingModalInstance) bookingModalInstance = new bootstrap.Modal(bookingModalElement);
    bookingModalInstance.show();
}

async function handleModalOpen(event) {
    const trigger = event.relatedTarget || bookingModalElement;
    const date = trigger.dataset.date;
    editingGroupId = trigger.dataset.groupId || null;

    if (!date) return;

    dateInput.value = date;
    const dateFr = new Date(date).toLocaleDateString('fr-FR', { weekday: 'long', day: 'numeric', month: 'long' });
    
    if (bookingCartContainer) bookingCartContainer.style.display = 'block';

    if (editingGroupId) {
        // --- MODE √âDITION ---
        modalTitle.innerHTML = `<i class="bi bi-pencil-square me-2"></i>Modifier la r√©servation`;
        if (validateBtn) validateBtn.style.display = 'none';
        
        if (cancelBtn) {
            cancelBtn.textContent = "Fermer";
            cancelBtn.classList.remove('btn-secondary', 'btn-outline-secondary');
            cancelBtn.classList.add('btn-dark');
            
            // Reset du bouton pour comportement par d√©faut (fermeture)
            const newCancelBtn = cancelBtn.cloneNode(true);
            // Pas d'event listener sp√©cifique, le data-bs-dismiss suffit
            cancelBtn.parentNode.replaceChild(newCancelBtn, cancelBtn);
            cancelBtn = newCancelBtn;
        }
        await loadExistingReservation(editingGroupId);

    } else {
        // --- MODE CR√âATION ---
        modalTitle.innerHTML = `<i class="bi bi-calendar-check me-2"></i>R√©server pour le ${dateFr}`;
        
        if (validateBtn) {
            validateBtn.style.display = 'inline-block';
            validateBtn.innerHTML = '<i class="bi bi-cart-check me-2"></i>Voir mon panier';
            validateBtn.classList.remove('btn-primary', 'disabled');
            validateBtn.classList.add('btn-success');
            
            const newValidateBtn = validateBtn.cloneNode(true);
            newValidateBtn.type = 'button';
            newValidateBtn.disabled = false;
            newValidateBtn.onclick = (e) => { 
                e.preventDefault(); 
                window.location.href = '/panier'; 
            };
            validateBtn.parentNode.replaceChild(newValidateBtn, validateBtn);
            validateBtn = newValidateBtn;
        }

        // Bouton "Poursuivre"
        if (cancelBtn) {
            cancelBtn.innerHTML = '<i class="bi bi-calendar-week me-2"></i>Poursuivre (Calendrier)';
            cancelBtn.classList.remove('btn-dark', 'btn-secondary', 'btn-danger');
            cancelBtn.classList.add('btn-outline-secondary');
            
            const newCancelBtn = cancelBtn.cloneNode(true);
            newCancelBtn.type = 'button';
            
            newCancelBtn.onclick = (e) => {
                e.preventDefault();
                
                // Fermeture manuelle propre
                if (bookingModalInstance) bookingModalInstance.hide();
                else {
                    const instance = bootstrap.Modal.getInstance(bookingModalElement);
                    if (instance) instance.hide();
                }
                
                // Nettoyage forc√© imm√©diat
                forceCleanup();

                // Redirection si n√©cessaire
                if (!window.location.pathname.includes('/calendrier')) {
                    window.location.href = '/calendrier';
                }
            };
            
            cancelBtn.parentNode.replaceChild(newCancelBtn, cancelBtn);
            cancelBtn = newCancelBtn;
        }

        updateHourOptions(); 
        setSmartTime();      
        loadAvailabilities();
        refreshMiniCart();
    }
}

function resetModalState() {
    delete bookingModalElement.dataset.date;
    delete bookingModalElement.dataset.groupId;
    editingGroupId = null;
    availableItemsContainer.innerHTML = '';
    if (bookingCartContainer) bookingCartContainer.innerHTML = '';
}

/**
 * NETTOYAGE FORC√â DU BACKDROP (CORRECTION BUG CHROME)
 * Supprime manuellement les √©l√©ments fant√¥mes de Bootstrap
 */
function forceCleanup() {
    setTimeout(() => {
        // 1. Supprimer tous les backdrops restants
        document.querySelectorAll('.modal-backdrop').forEach(el => el.remove());
        
        // 2. Restaurer le scroll du body
        document.body.classList.remove('modal-open');
        document.body.style.overflow = '';
        document.body.style.paddingRight = '';
    }, 150); // Petit d√©lai pour laisser l'animation Bootstrap finir
}

// --- LOGIQUE M√âTIER ---

async function loadExistingReservation(groupId) {
    try {
        bookingCartContainer.innerHTML = '<div class="text-center py-3"><div class="spinner-border spinner-border-sm text-muted"></div></div>';
        const response = await fetch(`/api/reservation_details/${groupId}`);
        if (!response.ok) throw new Error("Erreur chargement");
        const data = await response.json();

        if (data.debut && data.fin) {
            startTimeSelect.value = data.debut.substring(11, 16);
            endTimeSelect.value = data.fin.substring(11, 16);
        }

        renderMiniCart(data.items, false); 
        
        const startDt = new Date(data.debut);
        if (startDt < new Date()) {
            availableItemsContainer.innerHTML = `<div class="alert alert-warning"><i class="bi bi-clock-history me-2"></i>R√©servation pass√©e. Lecture seule.</div>`;
            renderMiniCart(data.items, true);
        } else {
            loadAvailabilities();
        }
    } catch (error) {
        console.error(error);
        bookingCartContainer.innerHTML = '<div class="text-danger">Erreur chargement</div>';
    }
}

function loadAvailabilities() {
    const date = dateInput.value;
    const start = startTimeSelect.value;
    const end = endTimeSelect.value;
    if (!date || !start || !end) return;

    availableItemsContainer.innerHTML = `<div class="text-center py-5"><div class="spinner-border text-primary mb-2"></div><p class="text-muted small">V√©rification stocks...</p></div>`;

    let url = `/api/disponibilites?date=${date}&heure_debut=${start}&heure_fin=${end}`;
    fetch(url).then(res => res.json()).then(response => {
        if (!response.success) {
            availableItemsContainer.innerHTML = `<div class="alert alert-danger">${response.error}</div>`;
        } else {
            renderAvailableItems(response.data);
        }
    }).catch(() => availableItemsContainer.innerHTML = `<div class="alert alert-danger">Erreur connexion.</div>`);
}

async function refreshMiniCart() {
    if (!bookingCartContainer) return;
    bookingCartContainer.innerHTML = '<div class="text-center py-3"><div class="spinner-border spinner-border-sm text-muted"></div></div>';
    try {
        const res = await fetch('/api/panier');
        const json = await res.json();
        if (json.success && json.data.items.length > 0) renderMiniCart(json.data.items, false);
        else bookingCartContainer.innerHTML = '<div class="text-muted fst-italic text-center mt-3">Votre panier est vide.</div>';
    } catch (e) { bookingCartContainer.innerHTML = '<div class="text-danger small">Erreur panier</div>'; }
}

// --- ACTIONS ---

async function addItem(item) {
    const payload = { type: item.type, id: item.id, quantite: 1 };
    const csrfToken = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');
    
    let url = '/api/panier/ajouter';
    if (editingGroupId) {
        url = `/api/reservation/${editingGroupId}/ajouter`;
    } else {
        payload.date = dateInput.value;
        payload.heure_debut = startTimeSelect.value;
        payload.heure_fin = endTimeSelect.value;
    }

    try {
        const res = await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'X-CSRFToken': csrfToken },
            body: JSON.stringify(payload)
        });
        const data = await res.json();

        if (res.ok && data.success) {
            showToast(`Ajout√© : ${item.nom}`, "success");
            updateCartBadge();
            loadAvailabilities();
            if (editingGroupId) loadExistingReservation(editingGroupId);
            else refreshMiniCart();
        } else {
            showToast(data.error || "Erreur", "error");
        }
    } catch (err) { showToast("Erreur technique", "error"); }
}

function requestRemoveItem(itemId, itemType, currentQty) {
    if (editingGroupId) {
        const itemsCount = document.querySelectorAll('#bookingCart li').length;
        if (itemsCount === 1 && currentQty <= 1) {
            pendingDelete = { id: itemId, type: itemType };
            if (lastItemModalInstance) {
                lastItemModalInstance.show();
            } else {
                if(confirm("Supprimer la r√©servation ?")) performRemoveItem(itemId, itemType);
            }
            return;
        }
    }
    performRemoveItem(itemId, itemType);
}

async function performRemoveItem(itemId, itemType) {
    const csrfToken = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');
    
    let url = `/api/panier/retirer/${itemId}`;
    if (editingGroupId) {
        url = `/api/reservation/${editingGroupId}/retirer/${itemId}?type=${itemType}`;
    }

    try {
        const res = await fetch(url, {
            method: 'DELETE',
            headers: { 'X-CSRFToken': csrfToken }
        });
        const data = await res.json();

        if (res.ok) {
            showToast("Retir√©", "info");
            updateCartBadge();
            
            if (editingGroupId && data.remaining_items === 0) {
                if (bookingModalInstance) bookingModalInstance.hide();
                forceCleanup(); // Nettoyage aussi ici
                window.location.reload();
                return;
            }

            loadAvailabilities();
            if (editingGroupId) loadExistingReservation(editingGroupId);
            else refreshMiniCart();
        }
    } catch (e) { console.error(e); }
}

// --- RENDU ---

function renderAvailableItems(data) {
    let html = '<div class="list-group list-group-flush">';
    const getImg = (img) => img ? (img.startsWith('http') ? img : `/static/${img}`) : null;
    
    const renderRow = (item, type, style) => {
        const dispo = item.disponible;
        const active = dispo > 0;
        const imgUrl = getImg(item.image);
        const imgHtml = imgUrl ? `<img src="${imgUrl}" class="rounded border" style="width:40px;height:40px;object-fit:cover;">` : `<div class="rounded bg-light d-flex align-items-center justify-content-center" style="width:40px;height:40px;"><i class="bi bi-box text-muted"></i></div>`;

        return `
            <div class="list-group-item d-flex justify-content-between align-items-center py-2 px-0 ${style}">
                <div class="d-flex align-items-center gap-2 overflow-hidden">
                    ${imgHtml}
                    <div class="text-truncate">
                        <div class="fw-bold text-dark text-truncate" title="${item.nom}">${item.nom}</div>
                        <div class="small text-muted">${item.armoire || ''}</div>
                    </div>
                </div>
                <div class="d-flex align-items-center gap-2 flex-shrink-0">
                    <span class="badge ${active ? 'bg-light text-dark border' : 'bg-danger-subtle text-danger'} rounded-pill">${dispo}</span>
                    <button type="button" class="btn btn-sm ${active ? 'btn-primary' : 'btn-secondary disabled'} btn-add-item" 
                            data-type="${type}" data-id="${item.id}" data-nom="${item.nom}" ${!active ? 'disabled' : ''}>
                        <i class="bi bi-plus-lg"></i>
                    </button>
                </div>
            </div>`;
    };

    if (data.objets?.length) {
        html += '<h6 class="mt-3 mb-2 text-muted small fw-bold">OBJETS</h6>';
        data.objets.forEach(o => html += renderRow(o, 'objet', ''));
    }
    if (data.kits?.length) {
        html += '<h6 class="mt-3 mb-2 text-muted small fw-bold">KITS</h6>';
        data.kits.forEach(k => html += renderRow(k, 'kit', 'bg-light border-start border-3 border-info ps-2'));
    }
    availableItemsContainer.innerHTML = html + '</div>';
}

function renderMiniCart(items, readOnly) {
    let html = '<ul class="list-group list-group-flush">';
    items.forEach(item => {
        const type = item.type || 'objet'; 
        const deleteBtn = readOnly ? '' : `<button class="btn btn-link text-danger p-0 btn-remove-item" data-id="${item.id}" data-type="${type}" data-qty="${item.quantite}"><i class="bi bi-dash-circle-fill"></i></button>`;
        
        html += `
            <li class="list-group-item d-flex justify-content-between align-items-center px-0 py-2">
                <div class="small lh-1">
                    <div class="fw-bold text-truncate" style="max-width: 140px;">${item.nom}</div>
                    ${item.heure_debut ? `<div class="text-muted" style="font-size:0.75rem;">${item.heure_debut}-${item.heure_fin}</div>` : ''}
                </div>
                <div class="d-flex align-items-center gap-2">
                    <span class="badge bg-primary rounded-pill">x${item.quantite}</span>
                    ${deleteBtn}
                </div>
            </li>`;
    });
    bookingCartContainer.innerHTML = html + '</ul>';
}

function setupDelegatedEvents() {
    availableItemsContainer.addEventListener('click', (e) => {
        const btn = e.target.closest('.btn-add-item');
        if (!btn || btn.disabled) return;
        e.preventDefault();
        
        const original = btn.innerHTML;
        btn.innerHTML = '<span class="spinner-border spinner-border-sm"></span>';
        btn.disabled = true;

        addItem({
            type: btn.dataset.type,
            id: parseInt(btn.dataset.id, 10),
            nom: btn.dataset.nom
        }).then(() => {
            btn.innerHTML = original;
            btn.disabled = false;
        });
    });

    if (bookingCartContainer) {
        bookingCartContainer.addEventListener('click', (e) => {
            const btn = e.target.closest('.btn-remove-item');
            if (!btn) return;
            e.preventDefault();
            const itemId = parseInt(btn.dataset.id, 10);
            const itemType = btn.dataset.type;
            const currentQty = parseInt(btn.dataset.qty, 10);
            
            requestRemoveItem(itemId, itemType, currentQty);
        });
    }
}

function handleTimeChange(event) {
    if (event.target === startTimeSelect) {
        const startHour = parseInt(startTimeSelect.value.split(':')[0]);
        const endHour = startHour + 1;
        if (endHour <= 18) {
            const newEndTime = `${String(endHour).padStart(2, '0')}:00`;
            const optionExists = [...endTimeSelect.options].some(o => o.value === newEndTime);
            if (optionExists) endTimeSelect.value = newEndTime;
        }
    }
    loadAvailabilities();
}

function updateHourOptions() {
    const now = new Date();
    const todayStr = now.toISOString().split('T')[0];
    if (dateInput.value === todayStr) {
        const currentHour = now.getHours();
        Array.from(startTimeSelect.options).forEach(opt => {
            const h = parseInt(opt.value.split(':')[0]);
            opt.disabled = (h <= currentHour);
        });
    } else {
        Array.from(startTimeSelect.options).forEach(opt => opt.disabled = false);
    }
}

function setSmartTime() {
    const now = new Date();
    const todayStr = now.toISOString().split('T')[0];

    if (dateInput.value === todayStr) {
        let currentHour = now.getHours();
        let targetHour = currentHour + 1;
        if (targetHour < 8) targetHour = 8;
        if (targetHour > 17) targetHour = 17;

        const startStr = `${String(targetHour).padStart(2, '0')}:00`;
        const endStr = `${String(targetHour + 1).padStart(2, '0')}:00`;

        const optionExists = [...startTimeSelect.options].some(o => o.value === startStr);
        if (optionExists) {
            startTimeSelect.value = startStr;
            endTimeSelect.value = endStr;
        }
    } else {
        startTimeSelect.value = "08:00";
        endTimeSelect.value = "09:00";
    }
}

document.addEventListener('DOMContentLoaded', initBookingModal);
--- END OF FILE static/js/modules/booking-modal.js ---

--- START OF FILE static/js/modules/calendar-daily.js ---

import { openReservationModal } from './booking-modal.js';
import { escapeHtml } from './cart-utils.js';
import { showToast } from './toast.js';

document.addEventListener('DOMContentLoaded', function() {
    const tooltip = document.getElementById('reservation-tooltip');
    let activeTooltip = null;

    // --- GESTION DE LA MODALE DE SUPPRESSION ---
    const deleteModalEl = document.getElementById('deleteConfirmModal');
    let deleteModalInstance = null;
    let confirmDeleteBtn = null;
    let groupIdToDelete = null;

    if (deleteModalEl) {
        deleteModalInstance = new bootstrap.Modal(deleteModalEl);
        confirmDeleteBtn = document.getElementById('btnConfirmDeleteAction');
        
        if (confirmDeleteBtn) {
            confirmDeleteBtn.addEventListener('click', () => {
                if (groupIdToDelete) {
                    performDeletion(groupIdToDelete);
                }
            });
        }
    }

    // 1. GESTION DU TOOLTIP AU SURVOL
    document.querySelectorAll('.event-item').forEach(item => {
        item.addEventListener('mouseenter', async function(e) {
            const groupId = this.dataset.groupeId;
            if (!groupId) return;

            // Positionnement initial
            const rect = this.getBoundingClientRect();
            tooltip.style.left = `${rect.left + window.scrollX}px`;
            tooltip.style.top = `${rect.bottom + window.scrollY + 5}px`;
            tooltip.innerHTML = '<div class="tooltip-loading"><div class="spinner-border spinner-border-sm"></div> Chargement...</div>';
            tooltip.classList.add('visible');
            activeTooltip = groupId;

            try {
                const response = await fetch(`/api/reservation_details/${groupId}`);
                if (!response.ok) throw new Error('Erreur r√©seau');
                const details = await response.json();

                if (activeTooltip !== groupId) return;

                // --- CONSTRUCTION DU HTML ---
                
                // 1. Boutons d'action (Seulement si autoris√©)
                let buttonsHtml = '';
                if (details.can_edit) {
                    buttonsHtml = `
                        <div class="tooltip-buttons">
                            <button class="btn-edit-resa" data-groupe-id="${groupId}" data-date="${details.debut.substring(0, 10)}" title="Modifier">
                                <i class="bi bi-pencil-fill"></i>
                            </button>
                            <button class="btn-delete-resa text-danger" data-groupe-id="${groupId}" title="Supprimer">
                                <i class="bi bi-trash-fill"></i>
                            </button>
                        </div>`;
                }

                // 2. En-t√™te avec Nom et Heure
                let contentHtml = `
                    <div class="tooltip-header">
                        <div>
                            <div class="tooltip-title">
                                ${escapeHtml(details.debut.substring(11, 16))} - ${escapeHtml(details.fin.substring(11, 16))}
                            </div>
                            <div class="small text-muted">
                                <i class="bi bi-person-circle me-1"></i>${escapeHtml(details.user_name)}
                            </div>
                        </div>
                        ${buttonsHtml}
                    </div>
                    <ul class="tooltip-list">
                `;

                // 3. Liste des items
                const itemsList = details.items || details.objets || [];
                if (itemsList.length > 0) {
                    itemsList.forEach(obj => {
                        contentHtml += `<li>‚Ä¢ ${escapeHtml(String(obj.quantite))} x ${escapeHtml(obj.nom)}</li>`;
                    });
                } else {
                    contentHtml += '<li>Aucun mat√©riel</li>';
                }

                contentHtml += '</ul>';
                tooltip.innerHTML = contentHtml;

                // --- ATTACHEMENT √âV√âNEMENTS (Si boutons pr√©sents) ---
                if (details.can_edit) {
                    const editBtn = tooltip.querySelector('.btn-edit-resa');
                    if (editBtn) {
                        editBtn.addEventListener('click', function() {
                            openReservationModal(this.dataset.date, this.dataset.groupeId);
                        });
                    }

                    const deleteBtn = tooltip.querySelector('.btn-delete-resa');
                    if (deleteBtn) {
                        deleteBtn.addEventListener('click', function() {
                            groupIdToDelete = this.dataset.groupeId;
                            if (deleteModalInstance) deleteModalInstance.show();
                            else if(confirm("Supprimer ?")) performDeletion(groupIdToDelete);
                        });
                    }
                }

            } catch (error) {
                console.error(error);
                tooltip.innerHTML = '<div class="tooltip-error">Erreur de chargement</div>';
            }
        });

        item.addEventListener('mouseleave', function() {
            setTimeout(() => {
                if (!tooltip.matches(':hover')) {
                    tooltip.classList.remove('visible');
                    activeTooltip = null;
                }
            }, 100);
        });
    });

    tooltip.addEventListener('mouseleave', function() {
        tooltip.classList.remove('visible');
        activeTooltip = null;
    });

    // 2. BOUTON "NOUVELLE R√âSERVATION"
    const newResaBtn = document.getElementById('new-reservation-btn');
    if (newResaBtn) {
        newResaBtn.addEventListener('click', function() {
            const container = document.querySelector('.main-container');
            const pageDate = container ? container.dataset.date : new Date().toISOString().split('T')[0];
            openReservationModal(pageDate);
        });
    }

    // 3. FONCTION DE SUPPRESSION
    function performDeletion(groupId) {
        const csrfToken = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');
        
        if (confirmDeleteBtn) {
            confirmDeleteBtn.disabled = true;
            confirmDeleteBtn.innerHTML = '<span class="spinner-border spinner-border-sm"></span>';
        }

        fetch('/api/supprimer_reservation', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': csrfToken
            },
            body: JSON.stringify({ groupe_id: groupId })
        })
        .then(res => res.json())
        .then(data => {
            if (data.success) {
                if (deleteModalInstance) deleteModalInstance.hide();
                showToast("R√©servation supprim√©e", "success");
                setTimeout(() => window.location.reload(), 500);
            } else {
                showToast(data.error || "Erreur lors de la suppression", "error");
                resetDeleteBtn();
            }
        })
        .catch(err => {
            console.error(err);
            showToast("Erreur de communication", "error");
            resetDeleteBtn();
        });
    }

    function resetDeleteBtn() {
        if (confirmDeleteBtn) {
            confirmDeleteBtn.disabled = false;
            confirmDeleteBtn.innerHTML = '<i class="bi bi-trash-fill me-2"></i>Supprimer';
        }
    }
});
--- END OF FILE static/js/modules/calendar-daily.js ---

--- START OF FILE static/js/modules/calendar-monthly.js ---

import { openReservationModal } from './booking-modal.js';

document.addEventListener('DOMContentLoaded', () => {
    const container = document.getElementById('calendrier-container');
    if (!container) return;

    const monthYearElement = container.querySelector('#current-month-year');
    const gridElement = container.querySelector('.calendrier-grid');
    const prevBtn = container.querySelector('#prev-month-btn');
    const nextBtn = container.querySelector('#next-month-btn');

    let currentDate = new Date();
    let dayTooltip = null;

    // --- 1. API : R√©cup√©rer les chiffres du mois ---
    async function fetchReservations(year, month) {
        try {
            // month + 1 car JS est 0-index√©, Python 1-index√©
            const response = await fetch(`/api/reservations_par_mois/${year}/${month + 1}`);
            if (!response.ok) return {};
            return await response.json();
        } catch (error) {
            console.error("Erreur calendrier:", error);
            return {};
        }
    }

    // --- 2. TOOLTIP : Cr√©ation et Affichage ---
    function createDayTooltip() {
        if (!dayTooltip) {
            dayTooltip = document.createElement('div');
            dayTooltip.className = 'day-tooltip';
            dayTooltip.style.display = 'none';
            document.body.appendChild(dayTooltip);
        }
        return dayTooltip;
    }

    async function showDayTooltip(dateKey, cellElement) {
        const tooltip = createDayTooltip();
        
        // Loader
        tooltip.innerHTML = '<div class="p-2 text-center"><div class="spinner-border spinner-border-sm text-light"></div></div>';
        tooltip.style.display = 'block';
        positionTooltip(tooltip, cellElement);

        try {
            // Appel √† la route que tu as d√©j√† : /api/reservations_jour/<date>
            const response = await fetch(`/api/reservations_jour/${dateKey}`);
            if (!response.ok) throw new Error('Erreur');
            
            const data = await response.json();
            const reservations = data.reservations || [];

            if (reservations.length === 0) {
                hideDayTooltip();
                return;
            }

            // Construction du contenu
            let html = `<div class="day-tooltip-header">${reservations.length} r√©servation(s)</div>`;
            html += '<ul class="day-tooltip-list">';
            
            reservations.slice(0, 5).forEach(r => {
                html += `<li><strong>${r.nom_utilisateur}</strong> <span class="opacity-75">${r.heure_debut}-${r.heure_fin}</span></li>`;
            });
            
            if (reservations.length > 5) {
                html += `<li class="text-center fst-italic small">+ ${reservations.length - 5} autres...</li>`;
            }
            html += '</ul>';
            
            tooltip.innerHTML = html;
            positionTooltip(tooltip, cellElement); // Repositionner apr√®s chargement du contenu
        } catch (error) {
            tooltip.innerHTML = '<div class="p-2 text-danger small">Erreur chargement</div>';
        }
    }

    function positionTooltip(tooltip, cellElement) {
        const rect = cellElement.getBoundingClientRect();
        const tooltipRect = tooltip.getBoundingClientRect();
        
        // Centr√© au-dessus de la case
        let top = rect.top - tooltipRect.height - 8;
        let left = rect.left + (rect.width / 2) - (tooltipRect.width / 2);

        tooltip.style.top = `${top + window.scrollY}px`;
        tooltip.style.left = `${left + window.scrollX}px`;
    }

    function hideDayTooltip() {
        if (dayTooltip) dayTooltip.style.display = 'none';
    }

    // --- 3. RENDU DU CALENDRIER ---
    async function renderCalendar(date) {
        const year = date.getFullYear();
        const month = date.getMonth();

        monthYearElement.textContent = date.toLocaleDateString('fr-FR', { month: 'long', year: 'numeric' });
        monthYearElement.style.textTransform = 'capitalize';
        
        gridElement.innerHTML = '<div class="text-center w-100 py-5"><div class="spinner-border text-primary"></div></div>';

        const reservations = await fetchReservations(year, month);
        
        // Date du jour (sans les heures pour comparaison stricte)
        const today = new Date();
        today.setHours(0, 0, 0, 0);

        gridElement.innerHTML = '';

        // En-t√™tes
        ['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'].forEach(d => {
            gridElement.innerHTML += `<div class="cal-header">${d}</div>`;
        });

        // Cases vides
        const firstDay = new Date(year, month, 1).getDay();
        const startDay = (firstDay === 0 ? 6 : firstDay - 1);
        for (let i = 0; i < startDay; i++) {
            gridElement.innerHTML += `<div class="cal-day empty"></div>`;
        }

        // Jours
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        
        for (let day = 1; day <= daysInMonth; day++) {
            // Date de la case en cours de construction
            const currentDayDate = new Date(year, month, day);
            const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            
            const count = reservations[dateStr] || 0;
            const isToday = currentDayDate.getTime() === today.getTime();
            const isPast = currentDayDate < today; // V√©rification jour pass√©

            const cell = document.createElement('div');
            
            // Classes CSS conditionnelles
            let classes = 'cal-day';
            if (isToday) classes += ' today';
            if (isPast) classes += ' past-day'; // CSS √† ajouter pour griser
            cell.className = classes;
            
            // Badge HTML
            let badgeHtml = '';
            if (count > 0) {
                let colorClass = count > 4 ? 'bg-danger' : (count > 2 ? 'bg-warning text-dark' : 'bg-info text-dark');
                badgeHtml = `<div class="reservation-badge ${colorClass}">${count} r√©serv.</div>`;
            }

            // Bouton "+" (Uniquement si jour futur ou aujourd'hui)
            let btnHtml = '';
            if (!isPast) {
                btnHtml = `
                    <button class="btn btn-sm btn-light btn-add-fast position-absolute top-0 end-0 m-1" 
                            style="display:none; width:24px; height:24px; padding:0;"
                            title="R√©server">
                        <i class="bi bi-plus"></i>
                    </button>
                `;
            }

            cell.innerHTML = `
                <div class="day-number">${day}</div>
                <div class="day-content">${badgeHtml}</div>
                ${btnHtml}
            `;

            // √âv√©nements (Clics d√©sactiv√©s pour le pass√©, sauf pour voir le d√©tail si y'a des r√©sas)
            if (!isPast || count > 0) {
                cell.addEventListener('click', () => window.location.href = `/jour/${dateStr}`);
            } else {
                cell.style.cursor = 'default';
            }

            // Gestion du bouton "+" (Seulement si pas pass√©)
            if (!isPast) {
                const btn = cell.querySelector('.btn-add-fast');
                
                cell.addEventListener('mouseenter', () => {
                    if(btn) btn.style.display = 'flex';
                });
                cell.addEventListener('mouseleave', () => {
                    if(btn) btn.style.display = 'none';
                });

                if (btn) {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        openReservationModal(dateStr);
                    });
                }
            }

            // Tooltip au survol (Toujours actif m√™me pour le pass√© pour voir l'historique)
            if (count > 0) {
                let timer;
                cell.addEventListener('mouseenter', () => {
                    clearTimeout(timer);
                    showDayTooltip(dateStr, cell);
                });
                cell.addEventListener('mouseleave', () => {
                    timer = setTimeout(hideDayTooltip, 200);
                });
            }

            gridElement.appendChild(cell);
        }
    }

    // Navigation
    prevBtn.addEventListener('click', () => { currentDate.setMonth(currentDate.getMonth() - 1); renderCalendar(currentDate); });
    nextBtn.addEventListener('click', () => { currentDate.setMonth(currentDate.getMonth() + 1); renderCalendar(currentDate); });

    renderCalendar(currentDate);
});
--- END OF FILE static/js/modules/calendar-monthly.js ---

--- START OF FILE static/js/modules/cart-summary.js ---

// static/js/modules/cart-summary.js
import { showToast } from './toast.js';
import { updateCartBadge, escapeHtml } from './cart-utils.js';

// --- GESTION MODALE ---
let cartModalInstance = null;
let pendingAction = null; // Stocke la fonction √† ex√©cuter apr√®s confirmation
const modalMessageEl = document.getElementById('cartModalMessage');

document.addEventListener('DOMContentLoaded', () => {
    // Init Modale
    const modalEl = document.getElementById('cartActionModal');
    if (modalEl) {
        cartModalInstance = new bootstrap.Modal(modalEl);
        const confirmBtn = document.getElementById('btnConfirmCartAction');
        
        // Clic sur "Confirmer" dans la modale
        if (confirmBtn) {
            confirmBtn.addEventListener('click', () => {
                if (pendingAction) pendingAction(); // Ex√©cute l'action stock√©e
                if (cartModalInstance) cartModalInstance.hide();
            });
        }
    }

    loadServerCart();
    setupGlobalActions();
});

// R√©f√©rences DOM
const container = document.getElementById('cart-items-container');
const emptyState = document.getElementById('empty-cart-message');
const actionsBar = document.getElementById('cart-actions');
const btnConfirm = document.getElementById('confirm-cart-btn');
const btnClear = document.getElementById('clear-cart-btn');

/**
 * Charge le panier depuis l'API
 */
async function loadServerCart() {
    if (!container) return;

    container.innerHTML = `
        <div class="text-center py-5">
            <div class="spinner-border text-primary" role="status"></div>
            <p class="mt-2 text-muted">Chargement de votre panier...</p>
        </div>`;

    try {
        const response = await fetch('/api/panier');
        const json = await response.json();

        if (!json.success || !json.data.items || json.data.items.length === 0) {
            showEmptyState();
            return;
        }

        renderCartItems(json.data.items);
        updateCartBadge();

    } catch (error) {
        console.error(error);
        container.innerHTML = `<div class="alert alert-danger">Impossible de charger le panier.</div>`;
    }
}

function showEmptyState() {
    if (container) container.innerHTML = '';
    if (emptyState) emptyState.style.display = 'block';
    if (actionsBar) actionsBar.style.display = 'none';
    updateCartBadge();
}

function renderCartItems(items) {
    const groups = {};
    
    items.forEach(item => {
        const key = `${item.date}_${item.heure_debut}_${item.heure_fin}`;
        if (!groups[key]) {
            groups[key] = {
                date: item.date,
                start: item.heure_debut,
                end: item.heure_fin,
                items: []
            };
        }
        groups[key].items.push(item);
    });

    let html = '';
    
    Object.values(groups).forEach(group => {
        const dateObj = new Date(group.date);
        const dateFr = dateObj.toLocaleDateString('fr-FR', { weekday: 'long', day: 'numeric', month: 'long' });

        html += `
            <div class="card mb-3 border-0 shadow-sm overflow-hidden">
                <div class="card-header bg-light d-flex justify-content-between align-items-center py-3">
                    <div>
                        <strong class="text-primary text-capitalize"><i class="bi bi-calendar-event me-2"></i>${dateFr}</strong>
                        <span class="mx-2 text-muted">|</span>
                        <span class="fw-bold text-dark">${group.start} - ${group.end}</span>
                    </div>
                </div>
                <div class="card-body p-0">
                    <ul class="list-group list-group-flush">
        `;

        group.items.forEach(item => {
            const badge = item.type === 'kit' 
                ? '<span class="badge bg-info text-dark me-2">KIT</span>' 
                : '<span class="badge bg-secondary me-2">OBJET</span>';

            html += `
                <li class="list-group-item d-flex justify-content-between align-items-center py-3">
                    <div class="d-flex align-items-center">
                        ${badge}
                        <span class="fw-medium">${escapeHtml(item.nom)}</span>
                    </div>
                    <div class="d-flex align-items-center gap-3">
                        <span class="fw-bold fs-5">x${item.quantite}</span>
                        <button class="btn btn-sm btn-outline-danger border-0 btn-delete-item" 
                                data-id="${item.id}" 
                                title="Retirer">
                            <i class="bi bi-trash-fill"></i>
                        </button>
                    </div>
                </li>
            `;
        });

        html += `</ul></div></div>`;
    });

    container.innerHTML = html;
    
    if (emptyState) emptyState.style.display = 'none';
    if (actionsBar) actionsBar.style.display = 'flex';

    // Events Suppression Item
    document.querySelectorAll('.btn-delete-item').forEach(btn => {
        btn.addEventListener('click', (e) => {
            const itemId = e.currentTarget.dataset.id;
            askConfirmation("Retirer cet √©l√©ment du panier ?", () => deleteItem(itemId));
        });
    });
}

/**
 * Ouvre la modale de confirmation
 */
function askConfirmation(message, actionCallback) {
    if (cartModalInstance) {
        if (modalMessageEl) modalMessageEl.textContent = message;
        pendingAction = actionCallback;
        cartModalInstance.show();
    } else {
        // Fallback si modale pas trouv√©e (ne devrait pas arriver)
        if (confirm(message)) actionCallback();
    }
}

async function deleteItem(itemId) {
    const csrfToken = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');

    try {
        const res = await fetch(`/api/panier/retirer/${itemId}`, {
            method: 'DELETE',
            headers: { 'X-CSRFToken': csrfToken }
        });

        if (res.ok) {
            showToast("√âl√©ment retir√©", "info");
            loadServerCart();
        } else {
            showToast("Erreur lors de la suppression", "error");
        }
    } catch (err) {
        console.error(err);
        showToast("Erreur technique", "error");
    }
}

function setupGlobalActions() {
    // 1. Vider le panier
    if (btnClear) {
        btnClear.addEventListener('click', () => {
            askConfirmation("Voulez-vous vraiment vider tout votre panier ?", async () => {
                const csrfToken = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');
                try {
                    const res = await fetch('/api/panier', {
                        method: 'DELETE',
                        headers: { 'X-CSRFToken': csrfToken }
                    });
                    if (res.ok) {
                        showToast("Panier vid√©", "info");
                        showEmptyState();
                    }
                } catch (err) {
                    showToast("Erreur technique", "error");
                }
            });
        });
    }

    // 2. Valider (Checkout)
    if (btnConfirm) {
        btnConfirm.addEventListener('click', async () => {
            const originalText = btnConfirm.innerHTML;
            btnConfirm.disabled = true;
            btnConfirm.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Validation...';

            const csrfToken = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');

            try {
                const res = await fetch('/api/panier/checkout', {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'X-CSRFToken': csrfToken 
                    }
                });

                const json = await res.json();

                if (res.ok && json.success) {
                    showToast(`Succ√®s ! ${json.data.reservations_count} r√©servations cr√©√©es.`, "success");
                    setTimeout(() => {
                        window.location.href = '/calendrier';
                    }, 1500);
                } else {
                    showToast(json.error || "Erreur lors de la validation", "error");
                    btnConfirm.disabled = false;
                    btnConfirm.innerHTML = originalText;
                    loadServerCart();
                }
            } catch (err) {
                console.error(err);
                showToast("Erreur technique critique", "error");
                btnConfirm.disabled = false;
                btnConfirm.innerHTML = originalText;
            }
        });
    }
}
--- END OF FILE static/js/modules/cart-summary.js ---

--- START OF FILE static/js/modules/cart-utils.js ---

// static/js/modules/cart-utils.js

// Protection XSS simple
export function escapeHtml(text) {
    if (text === null || text === undefined) return '';
    return String(text)
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
}

/**
 * Met √† jour le badge du panier en interrogeant le serveur.
 * √Ä appeler apr√®s chaque ajout/suppression.
 */
export async function updateCartBadge() {
    const badge = document.getElementById('cart-count-badge');
    if (!badge) return;

    try {
        const response = await fetch('/api/panier');
        if (response.ok) {
            const json = await response.json();
            // L'API retourne { success: true, data: { items: [], total: X } }
            const count = json.data.total || 0;

            badge.textContent = count > 99 ? '99+' : count;
            
            if (count > 0) {
                badge.style.display = 'flex';
                badge.classList.add('pulse');
                // On retire l'anim apr√®s 1s
                setTimeout(() => badge.classList.remove('pulse'), 1000);
            } else {
                badge.style.display = 'none';
            }
        }
    } catch (error) {
        console.error("Erreur synchro badge panier:", error);
    }
}

// Auto-update au chargement de la page si le script est import√©
document.addEventListener('DOMContentLoaded', updateCartBadge);
--- END OF FILE static/js/modules/cart-utils.js ---

--- START OF FILE static/js/modules/import_feedback.js ---

document.addEventListener('DOMContentLoaded', function() {
    // On s√©lectionne les √©l√©ments HTML dont on a besoin
    const fileInput = document.getElementById('fichier_excel');
    const dropZone = document.getElementById('drop-zone');
    
    // On v√©rifie que les √©l√©ments existent avant de continuer
    if (!fileInput || !dropZone) {
        return; 
    }

    const fileMsg = dropZone.querySelector('.file-msg');
    const originalMsg = fileMsg.innerHTML;

    // On √©coute l'√©v√©nement 'change' sur le champ de fichier
    fileInput.addEventListener('change', function() {
        if (this.files && this.files.length > 0) {
            // Si un fichier est s√©lectionn√©, on met √† jour le message et le style
            fileMsg.innerHTML = `Fichier s√©lectionn√© : <strong>${this.files[0].name}</strong>`;
            dropZone.classList.add('file-selected');
        } else {
            // Si la s√©lection est annul√©e, on revient √† l'√©tat initial
            fileMsg.innerHTML = originalMsg;
            dropZone.classList.remove('file-selected');
        }
    });
});
--- END OF FILE static/js/modules/import_feedback.js ---

--- START OF FILE static/js/modules/toast.js ---

/**
 * Affiche une notification (toast) Bootstrap 5.
 * Cr√©e dynamiquement le conteneur de toasts s'il n'existe pas.
 * @param {string} message Le message √† afficher.
 * @param {string} type Le type de toast ('success', 'danger', 'warning', 'info'). Par d√©faut 'info'.
 */
export function showToast(message, type = 'info') {
    // Cr√©e le conteneur de toasts s'il n'est pas d√©j√† dans la page
    let toastContainer = document.getElementById('toast-container');
    if (!toastContainer) {
        toastContainer = document.createElement('div');
        toastContainer.id = 'toast-container';
        // CORRECTION : "end-0" a √©t√© remplac√© par "start-0" pour positionner √† gauche.
        toastContainer.className = 'toast-container position-fixed top-0 start-0 p-3';
        toastContainer.style.zIndex = 1090; // S'assurer qu'il est au-dessus des modales
        document.body.appendChild(toastContainer);
    }

    // D√©termine la couleur du toast en fonction du type
    const toastClassMap = {
        success: 'text-bg-success',
        danger: 'text-bg-danger',
        warning: 'text-bg-warning',
        info: 'text-bg-info',
    };
    // Pour le message de d√©connexion, on utilise le bleu principal
    if (type === 'logout') {
        toastClassMap.logout = 'text-bg-primary';
    }
    const toastClass = toastClassMap[type] || 'text-bg-secondary';

    // Cr√©e l'√©l√©ment toast
    const toastElement = document.createElement('div');
    toastElement.className = `toast align-items-center ${toastClass} border-0`;
    toastElement.setAttribute('role', 'alert');
    toastElement.setAttribute('aria-live', 'assertive');
    toastElement.setAttribute('aria-atomic', 'true');

    toastElement.innerHTML = `
        <div class="d-flex">
            <div class="toast-body">
                ${message}
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    `;

    // Ajoute le toast au conteneur et l'affiche
    toastContainer.appendChild(toastElement);

    const toast = new bootstrap.Toast(toastElement, {
        delay: 2000 // Dispara√Æt apr√®s 3 secondes
    });

    // Supprime l'√©l√©ment du DOM apr√®s sa disparition pour garder la page propre
    toastElement.addEventListener('hidden.bs.toast', () => {
        toastElement.remove();
    });

    toast.show();
}
--- END OF FILE static/js/modules/toast.js ---

--- START OF FILE static/js/modules/tour.js ---

const tourSteps = [
    {
        element: '#btn-gerer-armoires', // S√©lecteur CSS du bouton "G√©rer les Armoires"
        title: '√âtape 1 : Les Armoires',
        content: 'Bienvenue ! Pour commencer, vous devez cr√©er au moins une "armoire". C\'est l\'emplacement physique o√π sera rang√© votre mat√©riel.'
    },
    {
        element: '#btn-gerer-categories', // S√©lecteur CSS du bouton "G√©rer les Cat√©gories"
        title: '√âtape 2 : Les Cat√©gories',
        content: 'Excellent ! Maintenant, cr√©ez une "cat√©gorie" pour classer vos objets (par exemple : Verrerie, Produits chimiques, Mat√©riel √©lectrique...).'
    },
    {
        element: '#btn-inventaire-complet', // S√©lecteur CSS du bouton "Inventaire Complet"
        title: 'Pr√™t √† commencer !',
        content: 'Parfait ! Vous avez maintenant tout ce qu\'il faut. Cliquez sur "Inventaire Complet" pour ajouter votre premier objet.'
    }
];

let currentStep = 0;

// On r√©cup√®re les √©l√©ments HTML du tutoriel
const overlay = document.getElementById('tour-overlay');
const tooltip = document.getElementById('tour-tooltip');
const titleEl = document.getElementById('tour-title');
const contentEl = document.getElementById('tour-content');
const nextBtn = document.getElementById('tour-next-btn');
const skipBtn = document.getElementById('tour-skip-btn');

function showStep(stepIndex) {
    // On retire la surbrillance de l'√©tape pr√©c√©dente
    document.querySelectorAll('.tour-highlight').forEach(el => el.classList.remove('tour-highlight'));

    if (stepIndex >= tourSteps.length) {
        endTour();
        return;
    }

    const step = tourSteps[stepIndex];
    const targetElement = document.querySelector(step.element);

    if (!targetElement) {
        console.warn(`√âl√©ment du tutoriel non trouv√© : ${step.element}`);
        endTour();
        return;
    }

    // On met √† jour le contenu du tooltip
    titleEl.textContent = step.title;
    contentEl.textContent = step.content;

    // On affiche les √©l√©ments
    overlay.style.display = 'block';
    tooltip.style.display = 'block';

    // On met l'√©l√©ment cible en surbrillance
    targetElement.classList.add('tour-highlight');

    // On positionne le tooltip √† c√¥t√© de l'√©l√©ment
    const targetRect = targetElement.getBoundingClientRect();
    tooltip.style.top = `${targetRect.bottom + 10}px`;
    tooltip.style.left = `${targetRect.left}px`;
}

function endTour() {
    overlay.style.display = 'none';
    tooltip.style.display = 'none';
    document.querySelectorAll('.tour-highlight').forEach(el => el.classList.remove('tour-highlight'));
    // Optionnel : on pourrait envoyer une requ√™te au serveur pour marquer le tutoriel comme "vu"
}

// On attache les √©v√©nements aux boutons
nextBtn.addEventListener('click', () => {
    currentStep++;
    showStep(currentStep);
});

skipBtn.addEventListener('click', endTour);

// On exporte la fonction pour la d√©marrer depuis une autre page
export function startTour() {
    currentStep = 0;
    showStep(currentStep);
}
--- END OF FILE static/js/modules/tour.js ---

--- START OF FILE templates/Licence.txt ---

Copyright (c) 2025 Xavier De Baudry d'Asson & Yll Basha

Tous droits r√©serv√©s.

Il est interdit de reproduire, distribuer, modifier, d√©compiler ou faire de l'ing√©nierie inverse sur ce logiciel sans l'autorisation √©crite pr√©alable des d√©tenteurs des droits d'auteur.
--- END OF FILE templates/Licence.txt ---

--- START OF FILE templates/_add_object_modal.html ---

<div id="add-object-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h3 class="modal-title-with-icon">
                <svg xmlns="http://www.w3.org/2000/svg" class="modal-icon" viewBox="0 -960 960 960"><path d="M440-280h80v-120h120v-80H520v-120h-80v120H320v80h120v120ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Z"/></svg>
                Ajouter un Nouvel Objet
            </h3>
            <button class="close-btn">√ó</button>
        </div>
        <form action="{{ url_for('inventaire.ajouter_objet') }}" method="post" enctype="multipart/form-data" class="modal-form">
		<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <div class="form-grid">
                <div class="form-column">
                    <label for="nom">Nom de l'objet</label>
                    <input type="text" id="nom" name="nom" required>

                    <label for="armoire_id">Armoire de rangement</label>
                    <select id="armoire_id" name="armoire_id" required>
                        {% for armoire in armoires %}
                            <option value="{{ armoire.id }}">{{ armoire.nom }}</option>
                        {% endfor %}
                    </select>

                    <label for="categorie_id">Cat√©gorie</label>
                    <select id="categorie_id" name="categorie_id" required>
                        {% for categorie in categories %}
                            <option value="{{ categorie.id }}">{{ categorie.nom }}</option>
                        {% endfor %}
                    </select>
                    
                    <label for="fds_id">Fiche de Donn√©es de S√©curit√© (Optionnel)</label>
                    <select id="fds_id" name="fds_id">
                        <option value="">Aucune</option>
                        {% for fds in fds_list %}
                            <option value="{{ fds.id }}">{{ fds.nom_original }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-column">
                    <label for="quantite">Quantit√© initiale</label>
                    <input type="number" id="quantite" name="quantite" value="1" min="0" required>

                    <label for="seuil">Seuil d'alerte stock bas</label>
                    <input type="number" id="seuil" name="seuil" value="0" min="0" required>
                    
                    <label for="date_peremption">Date de p√©remption (Optionnel)</label>
                    <input type="date" id="date_peremption" name="date_peremption">

                    <label for="image">Image (Optionnel)</label>
                    <input type="file" id="image" name="image" class="custom-file-input">
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-action">Annuler</button>
                <button type="submit" class="btn-action">Ajouter l'objet</button>
            </div>
        </form>
    </div>
</div>
--- END OF FILE templates/_add_object_modal.html ---

--- START OF FILE templates/_breadcrumb.html ---

{% if breadcrumbs %}
<nav class="breadcrumb-container" aria-label="Fil d'Ariane">
    {% for item in breadcrumbs %}
        
        <!-- S√©parateur (sauf avant le premier √©l√©ment) -->
        {% if not loop.first %}
            <span class="breadcrumb-separator">‚Ä∫</span>
        {% endif %}
        
        <!-- √âl√©ment Actif (Dernier ou sans URL) -->
        {% if loop.last or not item.url %}
            <span class="breadcrumb-current">{{ item.text }}</span>
        
        <!-- Lien Cliquable -->
        {% else %}
            <a href="{{ item.url }}" class="breadcrumb-link">
                <!-- Ic√¥ne Maison uniquement pour le premier √©l√©ment (Accueil/Dashboard) -->
                {% if loop.first %}
                <svg class="breadcrumb-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                </svg>
                {% endif %}
                
                {{ item.text }}
            </a>
        {% endif %}
        
    {% endfor %}
</nav>
{% endif %}
--- END OF FILE templates/_breadcrumb.html ---

--- START OF FILE templates/_inventaire_content.html ---

<table class="objet-table">
    <thead>
		<tr>
			{% if session.user_role == 'admin' and pagination.endpoint != 'inventaire.inventaire' %}<th class="checkbox-column"><input type="checkbox" id="select-all-checkbox" title="Tout s√©lectionner"></th>{% endif %}
			
			{# --- LIENS DE TRI (Conserv√©s) --- #}
			<th class="sortable {% if sort_by == 'nom' %}th-sort-{{ direction }}{% endif %}">
				<a href="{{ url_for(pagination.endpoint, page=pagination.page, sort_by='nom', direction='desc' if sort_by == 'nom' and direction == 'asc' else 'asc', armoire_id=armoire_id, categorie_id=categorie_id, q=request.args.get('q'), etat=request.args.get('etat')) }}">Nom</a>
			</th>
			<th class="sortable {% if sort_by == 'quantite' %}th-sort-{{ direction }}{% endif %}">
				<a href="{{ url_for(pagination.endpoint, page=pagination.page, sort_by='quantite', direction='desc' if sort_by == 'quantite' and direction == 'asc' else 'asc', armoire_id=armoire_id, categorie_id=categorie_id, q=request.args.get('q'), etat=request.args.get('etat')) }}">Quantit√©</a>
			</th>
			<th class="sortable {% if sort_by == 'seuil' %}th-sort-{{ direction }}{% endif %}">
				<a href="{{ url_for(pagination.endpoint, page=pagination.page, sort_by='seuil', direction='desc' if sort_by == 'seuil' and direction == 'asc' else 'asc', armoire_id=armoire_id, categorie_id=categorie_id, q=request.args.get('q'), etat=request.args.get('etat')) }}">Seuil</a>
			</th>
			<th class="sortable {% if sort_by == 'date_peremption' %}th-sort-{{ direction }}{% endif %}">
				<a href="{{ url_for(pagination.endpoint, page=pagination.page, sort_by='date_peremption', direction='desc' if sort_by == 'date_peremption' and direction == 'asc' else 'asc', armoire_id=armoire_id, categorie_id=categorie_id, q=request.args.get('q'), etat=request.args.get('etat')) }}">P√©remption</a>
			</th>
			<th class="sortable {% if sort_by == 'categorie' %}th-sort-{{ direction }}{% endif %}">
				<a href="{{ url_for(pagination.endpoint, page=pagination.page, sort_by='categorie', direction='desc' if sort_by == 'categorie' and direction == 'asc' else 'asc', armoire_id=armoire_id, categorie_id=categorie_id, q=request.args.get('q'), etat=request.args.get('etat')) }}">Cat√©gorie</a>
			</th>
			<th class="sortable {% if sort_by == 'armoire' %}th-sort-{{ direction }}{% endif %}">
				<a href="{{ url_for(pagination.endpoint, page=pagination.page, sort_by='armoire', direction='desc' if sort_by == 'armoire' and direction == 'asc' else 'asc', armoire_id=armoire_id, categorie_id=categorie_id, q=request.args.get('q'), etat=request.args.get('etat')) }}">Armoire</a>
			</th>

			<th>Image</th>
			<th>√âtat</th>
			{% if session.user_id %}<th>Actions</th>{% endif %}
		</tr>
	</thead>
    <tbody>
        {% for objet in objets %}
        
        {# --- LOGIQUE √âTAT (Design conserv√©) --- #}
        {% set perime, perime_bientot, statut = False, False, 'ok' %}
        
        {% if objet.date_peremption %}
            {% if objet.date_peremption < date_actuelle.date() %}
                {% set perime, statut = True, 'perime' %}
            {% elif (objet.date_peremption - date_actuelle.date()).days <= 30 %}
                {% set perime_bientot, statut = True, 'bientot' %}
            {% endif %}
        {% endif %}
        
        {# Utilisation de quantite_disponible du DTO #}
        {% if statut == 'ok' and objet.quantite_disponible <= objet.seuil %}
            {% set statut = 'stock' %}
        {% endif %}

        <tr class="{{ 'row-perime' if perime else 'row-perime-bientot' if perime_bientot }}" data-objet-id="{{ objet.id }}">
            {% if session.user_role == 'admin' and pagination.endpoint != 'inventaire.inventaire' %}<td class="checkbox-column"><input type="checkbox" class="objet-checkbox" data-id="{{ objet.id }}"></td>{% endif %}
            
            <td data-field="nom"><a href="{{ url_for('inventaire.voir_objet', objet_id=objet.id) }}">{{ objet.nom }}</a></td>
            <td data-field="quantite">{{ objet.quantite_disponible }}</td>
            <td data-field="seuil">{{ objet.seuil }}</td>
            
            <td data-field="date_peremption" class="{{ 'texte-perime' if perime else 'texte-perime-bientot' if perime_bientot }}">
                {{ objet.date_peremption.strftime('%d/%m/%Y') if objet.date_peremption else '-' }}
            </td>
            
            {# --- MODIFICATION ICI : Acc√®s aux champs plats du DTO --- #}
            <td data-field="categorie">{{ objet.categorie_nom if objet.categorie_nom else '-' }}</td>
            <td data-field="armoire">{{ objet.armoire_nom if objet.armoire_nom else '-' }}</td>
            
            <td class="image-cell">
				<div class="image-preview-wrapper">
					{% if objet.image_url %}
                        {% if objet.image_url.startswith('http') %}
						    <img src="{{ objet.image_url }}" class="image-objet-thumbnail" alt="{{ objet.nom }}" loading="lazy">
						    <img src="{{ objet.image_url }}" class="image-objet-preview" alt="{{ objet.nom }}" loading="lazy">
                        {% else %}
                            <img src="{{ url_for('static', filename=objet.image_url) }}" class="image-objet-thumbnail" alt="{{ objet.nom }}" loading="lazy">
						    <img src="{{ url_for('static', filename=objet.image_url) }}" class="image-objet-preview" alt="{{ objet.nom }}" loading="lazy">
                        {% endif %}
					{% else %}
						<div class="table-image-placeholder">
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor"><path d="m840-234-80-80v-446H314l-80-80h526q33 0 56.5 23.5T840-760v526ZM792-56l-64-64H200q-33 0-56.5-23.5T120-200v-528l-64-64 56-56 736 736-56 56ZM240-280l120-160 90 120 33-44-283-283v447h447l-80-80H240Zm297-257ZM424-424Z"/></svg>
						</div>
					{% endif %}
				</div>
			</td>

            <td data-type="alerte" data-alerte-status="{{ statut }}">
                {% if statut == 'perime' %}
                    <span class="texte-perime" title="Produit p√©rim√©"><i class="bi bi-x-circle-fill"></i></span>
                {% elif statut == 'bientot' %}
                    <span class="texte-perime-bientot" title="Expire bient√¥t"><i class="bi bi-exclamation-circle-fill"></i></span>
                {% elif statut == 'stock' %}
                    <span class="texte-alerte" title="Stock bas"><i class="bi bi-exclamation-triangle-fill"></i></span>
                {% else %}
                    <span class="texte-ok" title="OK"><i class="bi bi-check-circle-fill"></i></span>
                {% endif %}
            </td>

            {% if session.user_id %}
			<td class="actions-cell">
                {# Bouton d'√©dition : Note que les IDs armoire/cat√©gorie ne sont pas dans le DTO liste pour perf #}
                {# Si l'√©dition n√©cessite ces IDs, il faudra soit les ajouter au DTO, soit faire un fetch AJAX au clic #}
				<button class="btn btn-sm btn-outline-primary edit-objet-btn"
						data-objet-id="{{ objet.id }}"
						data-nom="{{ objet.nom }}"
						data-quantite="{{ objet.quantite_physique }}"
						data-seuil="{{ objet.seuil }}"
						
						{# CES DEUX LIGNES DOIVENT √äTRE PR√âSENTES #}
						data-armoire-id="{{ objet.armoire_id }}"
						data-categorie-id="{{ objet.categorie_id }}"
						
						data-date-peremption="{{ objet.date_peremption or '' }}"
						data-image-url="{{ objet.image_url or '' }}"
						data-fds-url="{{ objet.fds_url or '' }}"
						data-bs-toggle="modal" data-bs-target="#addObjectModal">
					<i class="bi bi-pencil-square"></i>
				</button>
				
				{% if session.user_role == 'admin' %}
				<form class="form-in-cell" action="{{ url_for('inventaire.supprimer_objet', id_objet=objet.id) }}" method="post">
					<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
					<button type="button" class="btn btn-sm btn-outline-danger btn-delete-objet" data-objet-nom="{{ objet.nom }}">
						<i class="bi bi-trash"></i>
					</button>
				</form>
				{% endif %}
			</td>
			{% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>
{% include '_pagination.html' %}
--- END OF FILE templates/_inventaire_content.html ---

--- START OF FILE templates/_modale_danger.html ---

<div class="modal fade" id="dangerModal" tabindex="-1" aria-labelledby="dangerModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="dangerModalLabel">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i>
                    Confirmation Requise
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form id="dangerModalForm" action="" method="post">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <p id="dangerModalText">Le message de confirmation va ici.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-danger" id="confirmDeleteBtn">Confirmer</button>
                </div>
            </form>
        </div>
    </div>
</div>
--- END OF FILE templates/_modale_danger.html ---

--- START OF FILE templates/_modale_suggestion.html ---

<!-- Modale Bootstrap de suggestion de commande -->
<div class="modal fade" id="suggestionModal" tabindex="-1" aria-labelledby="suggestionModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="suggestionModalLabel">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="24px" style="vertical-align: middle; margin-right: 8px; fill: currentColor;">
                        <path d="M440-280h80v-160h160v-80H520v-160h-80v160H280v80h160v160Zm40 200q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
                    </svg>
                    Suggestion de Commande
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            
            <div class="modal-body">
                <div class="suggestion-info-card">
                    <div class="suggestion-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                            <path d="M440-183v-274L200-596v274l240 139Zm80 0 240-139v-274L520-457v274Zm-80 92L160-252q-19-11-29.5-29T120-321v-318q0-22 10.5-40t29.5-29l280-161q19-11 40-11t40 11l280 161q19 11 29.5 29t10.5 40v318q0 22-10.5 40T800-252L520-91q-19 11-40 11t-40-11Z"/>
                        </svg>
                    </div>
                    <div class="suggestion-info-content">
                        <h6 id="suggestion-objet-nom" class="mb-1">-</h6>
                        <p class="text-muted mb-0 small">Indiquez la quantit√© √† commander pour r√©approvisionner cet article</p>
                    </div>
                </div>

                <div class="mb-3 mt-4">
                    <label for="suggestion-quantity-input" class="form-label fw-semibold">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px" style="vertical-align: middle; margin-right: 4px;">
                            <path d="M440-280h80v-160h160v-80H520v-160h-80v160H280v80h160v160Z"/>
                        </svg>
                        Quantit√© √† commander *
                    </label>
                    <input type="number" 
                           class="form-control form-control-lg" 
                           id="suggestion-quantity-input" 
                           min="1" 
                           placeholder="Ex: 50"
                           required>
                    <div class="form-text">Entrez le nombre d'unit√©s √† commander</div>
                </div>

                <div class="mb-3">
                    <label for="suggestion-commentaire" class="form-label fw-semibold">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px" style="vertical-align: middle; margin-right: 4px;">
                            <path d="M240-400h480v-80H240v80Zm0-120h480v-80H240v80Zm0-120h480v-80H240v80ZM880-80 720-240H160q-33 0-56.5-23.5T80-320v-480q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v720Z"/>
                        </svg>
                        Commentaire (optionnel)
                    </label>
                    <textarea class="form-control" 
                              id="suggestion-commentaire" 
                              rows="3" 
                              placeholder="Ajoutez des informations compl√©mentaires..."></textarea>
                </div>

                <input type="hidden" id="suggestion-objet-id">
            </div>
            
            <div class="modal-footer bg-light">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px" style="vertical-align: middle; margin-right: 4px;">
                        <path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/>
                    </svg>
                    Annuler
                </button>
                <button type="button" class="btn btn-primary" id="suggestion-confirm-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px" style="vertical-align: middle; margin-right: 4px;">
                        <path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/>
                    </svg>
                    Envoyer la suggestion
                </button>
            </div>
        </div>
    </div>
</div>
--- END OF FILE templates/_modale_suggestion.html ---

--- START OF FILE templates/_modale_warning.html ---

<div class="modal-overlay" id="warning-modal" style="display: none;">
    <div class="modal-content modal-warning"> <!-- On utilise la classe .modal-warning que tu as d√©j√† -->
        <div class="modal-header">
            <h3 id="warning-modal-title" class="modal-title-with-icon">
                <svg class="modal-icon" ...> <!-- Ic√¥ne d'avertissement --> </svg>
                <span>Titre de l'avertissement</span>
            </h3>
            <button type="button" class="close-btn close-modal-btn">&times;</button>
        </div>
        <div class="modal-form">
            <p id="warning-modal-message">Message de l'avertissement.</p>
            <div class="modal-actions">
                <button type="button" class="btn-action btn-secondary close-modal-btn">Fermer</button>
            </div>
        </div>
    </div>
</div>
--- END OF FILE templates/_modale_warning.html ---

--- START OF FILE templates/_modals.html ---

<!-- ================================================================= -->
<!-- 1. MODALE DE R√âSERVATION (CALENDRIER) -->
<!-- ================================================================= -->
<div class="modal fade" id="bookingModal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title"><i class="bi bi-calendar-check me-2"></i>R√©server du mat√©riel</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="bookingDate">
                <input type="hidden" id="editingGroupId">
                <div class="row">
                    <div class="col-md-7">
                        <div class="mb-3">
                            <label class="form-label fw-bold">Cr√©neau horaire</label>
                            <div class="d-flex align-items-center gap-2">
                                <select class="form-select" id="startTime">
                                    {% for h in range(8, 18) %}
                                        <option value="{{ '%02d:00'|format(h) }}">{{ '%02d:00'|format(h) }}</option>
                                    {% endfor %}
                                </select>
                                <span>√†</span>
                                <select class="form-select" id="endTime">
                                    {% for h in range(9, 19) %}
                                        <option value="{{ '%02d:00'|format(h) }}">{{ '%02d:00'|format(h) }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        <hr>
                        <div id="availableItems">
                            <div class="text-center py-4">
                                <div class="spinner-border text-primary" role="status"></div>
                                <p class="mt-2 text-muted">Chargement du mat√©riel...</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5 border-start bg-light">
                        <h6 class="fw-bold mb-3">Votre Panier</h6>
                        <div id="bookingCart">
                            <p class="text-muted small fst-italic">Votre panier est vide.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <button type="button" class="btn btn-primary" id="validateBookingBtn" disabled>Valider la r√©servation</button>
            </div>
        </div>
    </div>
</div>

<!-- ================================================================= -->
<!-- 2. MODALE DE CONFIRMATION (R√âSERVATION) -->
<!-- ================================================================= -->
<div class="modal fade" id="confirmationModal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title"><i class="bi bi-check-circle me-2"></i>Confirmer la r√©servation</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body p-4">
                <div id="confirmation-summary-list">
                    <!-- Contenu g√©n√©r√© par JS -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="confirmation-back-btn" class="btn btn-secondary">Modifier</button>
                <button type="button" id="confirmation-confirm-btn" class="btn btn-success">Confirmer d√©finitivement</button>
            </div>
        </div>
    </div>
</div>

<!-- ================================================================= -->
<!-- 3. MODALE DANGER (SUPPRESSION G√âN√âRIQUE) -->
<!-- ================================================================= -->
<div class="modal fade" id="dangerModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-danger">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title"><i class="bi bi-exclamation-triangle-fill me-2"></i>Confirmation Requise</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form id="dangerModalForm" action="" method="post">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <div class="modal-body p-4">
                    <p id="dangerModalText" class="mb-0 fs-5">√ätes-vous s√ªr de vouloir effectuer cette action ?</p>
                    <p class="text-muted small mt-2">Cette action est irr√©versible.</p>
                </div>
                <div class="modal-footer bg-light">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-danger">Confirmer</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- ================================================================= -->
<!-- 4. MODALE D'AJOUT/MODIF OBJET -->
<!-- ================================================================= -->
<div class="modal fade" id="addObjectModal" tabindex="-1">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="modal-objet-title"><i class="bi bi-box-seam me-2"></i>G√©rer un objet</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form action="{{ url_for('inventaire.ajouter_objet') }}" method="post">
                <div class="modal-body p-4">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <div class="row g-4">
                        <!-- Colonne Gauche -->
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="nom" name="nom" required placeholder="Nom">
                                <label for="nom">Nom de l'objet</label>
                            </div>
                            <div class="row g-2 mb-3">
                                <div class="col-6">
                                    <div class="form-floating">
                                        <input type="number" class="form-control" id="quantite" name="quantite" required placeholder="Qt√©">
                                        <label for="quantite">Quantit√©</label>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-floating">
                                        <input type="number" class="form-control" id="seuil" name="seuil" required placeholder="Seuil">
                                        <label for="seuil">Seuil d'alerte</label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="date" class="form-control" id="date_peremption" name="date_peremption">
                                <label for="date_peremption">Date de p√©remption (Optionnel)</label>
                            </div>
                            <div class="form-floating mb-3">
                                <select class="form-select" id="armoire_id" name="armoire_id" required>
                                    {% for a in all_armoires %}<option value="{{ a.id }}">{{ a.nom }}</option>{% endfor %}
                                </select>
                                <label for="armoire_id">Armoire</label>
                            </div>
                            <div class="form-floating">
                                <select class="form-select" id="categorie_id" name="categorie_id" required>
                                    {% for c in all_categories %}<option value="{{ c.id }}">{{ c.nom }}</option>{% endfor %}
                                </select>
                                <label for="categorie_id">Cat√©gorie</label>
                            </div>
                        </div>
                        
                        <!-- Colonne Droite (Image & FDS) -->
                        <div class="col-md-6 border-start ps-4">
                            <label class="form-label fw-bold text-muted small">IMAGE DE L'OBJET</label>
                            <div class="input-group mb-2">
                                <input type="text" class="form-control" id="image_url" name="image_url" placeholder="URL de l'image">
                                <button class="btn btn-outline-secondary" type="button" id="btn-search-pexels">
                                    <i class="bi bi-search"></i> Pexels
                                </button>
                            </div>
                            
                            <!-- Zone de r√©sultats Pexels -->
                            <div id="pexels-results" class="d-flex gap-2 overflow-auto py-2" style="display: none;"></div>
                            
                            <!-- Aper√ßu -->
                            <div id="image-preview-container" class="bg-light rounded d-flex align-items-center justify-content-center mb-3" style="height: 150px; display: none;">
                                <img id="image-preview" src="" style="max-height: 100%; max-width: 100%; object-fit: contain;">
                            </div>

                            <label class="form-label fw-bold text-muted small mt-3">S√âCURIT√â</label>
                            <div class="form-floating">
                                <input type="text" class="form-control" id="fds_url" name="fds_url" placeholder="URL FDS">
                                <label for="fds_url">Lien vers la Fiche de S√©curit√© (PDF)</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer bg-light">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary" id="modal-submit-btn">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- ================================================================= -->
<!-- 5. MODALE DE SUGGESTION (COMMANDE) -->
<!-- ================================================================= -->
<div class="modal fade" id="suggestionModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-warning">
            <div class="modal-header bg-warning text-dark">
                <h5 class="modal-title"><i class="bi bi-lightbulb me-2"></i>Sugg√©rer une commande</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body p-4">
                <p class="mb-3">Objet concern√© : <strong id="suggestion-objet-nom" class="text-primary fs-5">-</strong></p>
                <input type="hidden" id="suggestion-objet-id">
                
                <div class="form-floating mb-3">
                    <input type="number" class="form-control" id="suggestion-quantity-input" min="1" required placeholder="Qt√©">
                    <label for="suggestion-quantity-input">Quantit√© sugg√©r√©e</label>
                </div>
                
                <div class="form-floating">
                    <textarea class="form-control" id="suggestion-commentaire" style="height: 100px" placeholder="Commentaire"></textarea>
                    <label for="suggestion-commentaire">Pourquoi cette commande ? (Optionnel)</label>
                </div>
            </div>
            <div class="modal-footer bg-light">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <button type="button" class="btn btn-warning fw-bold" id="suggestion-confirm-btn">Envoyer la suggestion</button>
            </div>
        </div>
    </div>
</div>


<!-- ================================================================= -->
<!-- 6. MODALE DE SUPPRESSION R√âSERVATION (SP√âCIFIQUE CALENDRIER) -->
<!-- ================================================================= -->
<div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title"><i class="bi bi-exclamation-triangle-fill me-2"></i>Confirmation</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
                <p class="mb-0 fs-5">Voulez-vous vraiment supprimer cette r√©servation ?</p>
                <p class="text-muted small mt-2">Cette action est irr√©versible et remettra le stock en circulation.</p>
            </div>
            <div class="modal-footer bg-light">
                <button type="button" class="btn btn-secondary px-4" data-bs-dismiss="modal">Annuler</button>
                <!-- L'ID ci-dessous est celui cherch√© par calendar-daily.js -->
                <button type="button" class="btn btn-danger px-4" id="btnConfirmDeleteAction">
                    <i class="bi bi-trash-fill me-2"></i>Supprimer
                </button>
            </div>
        </div>
    </div>
</div>



<!-- ================================================================= -->
<!-- 7. MODALE AVERTISSEMENT DERNIER ITEM (Pour booking-modal.js) -->
<!-- ================================================================= -->
<div class="modal fade" id="lastItemWarningModal" tabindex="-1" aria-hidden="true" style="z-index: 1070;">
    <div class="modal-dialog modal-dialog-centered modal-sm"> <!-- modal-sm pour faire compact -->
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header bg-warning text-dark border-0">
                <h5 class="modal-title fs-6 fw-bold">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i>Attention
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4 text-center">
                <p class="mb-2 fw-medium">Retirer ce dernier objet annulera compl√®tement la r√©servation.</p>
                <p class="text-muted small mb-0">Voulez-vous continuer ?</p>
            </div>
            <div class="modal-footer bg-light border-0 justify-content-center">
                <button type="button" class="btn btn-outline-secondary btn-sm px-3" data-bs-dismiss="modal">Non, garder</button>
                <button type="button" class="btn btn-warning btn-sm px-3 fw-bold" id="btnConfirmLastItemDelete">
                    Oui, supprimer
                </button>
            </div>
        </div>
    </div>
</div>


<!-- ================================================================= -->
<!-- 8. MODALE ACTION PANIER (Suppression Item / Vider) -->
<!-- ================================================================= -->
<div class="modal fade" id="cartActionModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title"><i class="bi bi-trash3-fill me-2"></i>Confirmation</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
                <p id="cartModalMessage" class="mb-0 fs-5">Confirmez-vous cette action ?</p>
            </div>
            <div class="modal-footer bg-light">
                <button type="button" class="btn btn-secondary px-4" data-bs-dismiss="modal">Annuler</button>
                <button type="button" class="btn btn-danger px-4" id="btnConfirmCartAction">
                    Confirmer
                </button>
            </div>
        </div>
    </div>
</div>
--- END OF FILE templates/_modals.html ---

--- START OF FILE templates/_pagination.html ---

{# templates/_pagination.html #}
{% if pagination.total_pages > 1 %}
<nav aria-label="Pagination">
    <ul class="pagination">
        {# Bouton Pr√©c√©dent #}
        <li class="page-item {% if pagination.page == 1 %}disabled{% endif %}">
            <a class="page-link" href="{{ url_for(pagination.endpoint, id=pagination.id, page=pagination.page - 1, sort_by=sort_by, direction=direction, q=request.args.get('q'), armoire=request.args.get('armoire'), categorie=request.args.get('categorie'), etat=request.args.get('etat')) if pagination.page > 1 else '#' }}">Pr√©c√©dent</a>
        </li>

        {# Liens des pages #}
        {% for p in range(1, pagination.total_pages + 1) %}
            <li class="page-item {% if p == pagination.page %}active{% endif %}">
                <a class="page-link" href="{{ url_for(pagination.endpoint, id=pagination.id, page=p, sort_by=sort_by, direction=direction, q=request.args.get('q'), armoire=request.args.get('armoire'), categorie=request.args.get('categorie'), etat=request.args.get('etat')) }}">{{ p }}</a>
            </li>
        {% endfor %}

        {# Bouton Suivant #}
        <li class="page-item {% if pagination.page == pagination.total_pages %}disabled{% endif %}">
            <a class="page-link" href="{{ url_for(pagination.endpoint, id=pagination.id, page=pagination.page + 1, sort_by=sort_by, direction=direction, q=request.args.get('q'), armoire=request.args.get('armoire'), categorie=request.args.get('categorie'), etat=request.args.get('etat')) if pagination.page < pagination.total_pages else '#' }}">Suivant</a>
        </li>
    </ul>
</nav>
{% endif %}
--- END OF FILE templates/_pagination.html ---

--- START OF FILE templates/_table_objets.html ---

<table class="objet-table">
    <thead>
        <tr>
            {% if session.user_role == 'admin' and pagination.endpoint != 'inventaire.inventaire' %}<th class="checkbox-column"><input type="checkbox" id="select-all-checkbox" title="Tout s√©lectionner"></th>{% endif %}
            
            {% set next_direction = 'desc' if sort_by == 'nom' and direction == 'asc' else 'asc' %}
            <th class="sortable {% if sort_by == 'nom' %}th-sort-{{ direction }}{% endif %}">
                <a href="{{ url_for(pagination.endpoint, id=pagination.id, page=pagination.page, sort_by='nom', direction=next_direction, q=request.args.get('q'), armoire=request.args.get('armoire'), categorie=request.args.get('categorie'), etat=request.args.get('etat')) }}">Nom</a>
            </th>

            {% set next_direction = 'desc' if sort_by == 'quantite' and direction == 'asc' else 'asc' %}
            <th class="sortable {% if sort_by == 'quantite' %}th-sort-{{ direction }}{% endif %}">
                <a href="{{ url_for(pagination.endpoint, id=pagination.id, page=pagination.page, sort_by='quantite', direction=next_direction, q=request.args.get('q'), armoire=request.args.get('armoire'), categorie=request.args.get('categorie'), etat=request.args.get('etat')) }}">Quantit√©</a>
            </th>

            {% set next_direction = 'desc' if sort_by == 'seuil' and direction == 'asc' else 'asc' %}
            <th class="sortable {% if sort_by == 'seuil' %}th-sort-{{ direction }}{% endif %}">
                <a href="{{ url_for(pagination.endpoint, id=pagination.id, page=pagination.page, sort_by='seuil', direction=next_direction, q=request.args.get('q'), armoire=request.args.get('armoire'), categorie=request.args.get('categorie'), etat=request.args.get('etat')) }}">Seuil</a>
            </th>

            {% set next_direction = 'desc' if sort_by == 'date_peremption' and direction == 'asc' else 'asc' %}
            <th class="sortable {% if sort_by == 'date_peremption' %}th-sort-{{ direction }}{% endif %}">
                <a href="{{ url_for(pagination.endpoint, id=pagination.id, page=pagination.page, sort_by='date_peremption', direction=next_direction, q=request.args.get('q'), armoire=request.args.get('armoire'), categorie=request.args.get('categorie'), etat=request.args.get('etat')) }}">P√©remption</a>
            </th>

            {% set next_direction = 'desc' if sort_by == 'armoire' and direction == 'asc' else 'asc' %}
            <th class="sortable {% if sort_by == 'armoire' %}th-sort-{{ direction }}{% endif %}">
                <a href="{{ url_for(pagination.endpoint, id=pagination.id, page=pagination.page, sort_by='armoire', direction=next_direction, q=request.args.get('q'), armoire=request.args.get('armoire'), categorie=request.args.get('categorie'), etat=request.args.get('etat')) }}">Armoire</a>
            </th>

            {% set next_direction = 'desc' if sort_by == 'categorie' and direction == 'asc' else 'asc' %}
            <th class="sortable {% if sort_by == 'categorie' %}th-sort-{{ direction }}{% endif %}">
                <a href="{{ url_for(pagination.endpoint, id=pagination.id, page=pagination.page, sort_by='categorie', direction=next_direction, q=request.args.get('q'), armoire=request.args.get('armoire'), categorie=request.args.get('categorie'), etat=request.args.get('etat')) }}">Cat√©gorie</a>
            </th>
            
            <th>Image</th>
            <th>√âtat</th>
            {% if session.user_id %}<th>Actions</th>{% endif %}
        </tr>
    </thead>
    <tbody>
        {% for objet in objets %}
        {% set perime, perime_bientot, statut = False, False, 'ok' %}
        {% if objet.date_peremption %}
            {% set date_peremption_obj = date_actuelle.strptime(objet.date_peremption, '%Y-%m-%d') %}
            {% if date_peremption_obj < date_actuelle %}{% set perime, statut = True, 'perime' %}
            {% elif (date_peremption_obj - date_actuelle).days <= 30 %}{% set perime_bientot, statut = True, 'bientot' %}
            {% endif %}
        {% endif %}
        {% if statut == 'ok' and objet.quantite_disponible <= objet.seuil %}{% set statut = 'stock' %}{% endif %}

        <tr class="{{ 'row-perime' if perime else 'row-perime-bientot' if perime_bientot }}" data-objet-id="{{ objet.id }}">
            {% if session.user_role == 'admin' and pagination.endpoint != 'inventaire.inventaire' %}<td class="checkbox-column"><input type="checkbox" class="objet-checkbox" data-id="{{ objet.id }}"></td>{% endif %}
            <td data-field="nom"><a href="{{ url_for('inventaire.voir_objet', objet_id=objet.id) }}">{{ objet.nom }}</a></td>
            <td data-field="quantite">{{ objet.quantite_disponible }}</td>
            <td data-field="seuil">{{ objet.seuil }}</td>
            <td data-field="date_peremption" class="{{ 'texte-perime' if perime else 'texte-perime-bientot' if perime_bientot }}">{{ date_peremption_obj.strftime('%d/%m/%Y') if objet.date_peremption }}</td>
            <td data-field="armoire">{{ objet.armoire }}</td>
            <td data-field="categorie">{{ objet.categorie }}</td>
            <td class="image-cell">
                {% if objet.image %}
                <div class="image-preview-wrapper">
                    <img src="{{ url_for('serve_image', filename=objet.image) }}" class="image-objet-thumbnail" alt="Image de {{ objet.nom }}">
                    <img src="{{ url_for('serve_image', filename=objet.image) }}" class="image-objet-preview" alt="Aper√ßu de {{ objet.nom }}">
                </div>
                {% endif %}
            </td>
            <td data-type="alerte" data-alerte-status="{{ statut }}">
                {% if statut == 'perime' %}<span class="texte-perime" title="Produit p√©rim√©. A recycler !"><svg xmlns="http://www.w3.org/2000/svg" class="icon-svg" viewBox="0 -960 960 960"><path d="M240-80v-170q-39-17-68.5-45.5t-50-64.5q-20.5-36-31-77T80-520q0-158 112-259t288-101q176 0 288 101t112 259q0 42-10.5 83t-31 77q-20.5 36-50 64.5T720-250v170H240Zm80-80h40v-80h80v80h80v-80h80v80h40v-142q38-9 67.5-30t50-50q20.5-29 31.5-64t11-74q0-125-88.5-202.5T480-800q-143 0-231.5 77.5T160-520q0 39 11 74t31.5 64q20.5 29 50.5 50t67 30v142Zm100-200h120l-60-120-60 120Zm-80-80q33 0 56.5-23.5T420-520q0-33-23.5-56.5T340-600q-33 0-56.5 23.5T260-520q0 33 23.5 56.5T340-440Zm280 0q33 0 56.5-23.5T700-520q0-33-23.5-56.5T620-600q-33 0-56.5 23.5T540-520q0 33 23.5 56.5T620-440ZM480-160Z"/></svg></span>{% elif statut == 'bientot' %}<span class="texte-perime-bientot" title="Expire bient√¥t"><svg xmlns="http://www.w3.org/2000/svg" class="icon-svg" viewBox="0 -960 960 960"><path d="M480-520q66 0 113-47t47-113v-120H320v120q0 66 47 113t113 47ZM160-80v-80h80v-120q0-61 28.5-114.5T348-480q-51-32-79.5-85.5T240-680v-120h-80v-80h640v80h-80v120q0 61-28.5 114.5T612-480q51 32 79.5 85.5T720-280v120h80v80H160Z"/></svg></span>
                {% elif statut == 'stock' %}<span class="texte-alerte" title="Stock bas"><svg xmlns="http://www.w3.org/2000/svg" class="icon-svg" viewBox="0 -960 960 960"><path d="M320-80q-17 0-28.5-11.5T280-120v-640q0-17 11.5-28.5T320-800h80v-80h160v80h80q17 0 28.5 11.5T680-760v308q-22 6-42 15.5T600-414v-306H360v560h148q5 22 14.5 42T545-80H320Zm40-80Zm296 80-56-56 84-84-84-84 56-56 84 84 84-84 56 56-83 84 83 84-56 56-84-83-84 83Z"/></svg></span>
                {% else %}<span class="texte-ok" title="OK"><svg xmlns="http://www.w3.org/2000/svg" class="icon-svg" viewBox="0 -960 960 960"><path d="M320-80q-17 0-28.5-11.5T280-120v-640q0-17 11.5-28.5T320-800h80v-80h160v80h80q17 0 28.5 11.5T680-760v640q0 17-11.5 28.5T640-80H320Z"/></svg></span>
                {% endif %}
            </td>
            {% if session.user_id %}
            <td>
                <button class="btn-action edit-objet-btn"
                        data-objet-id="{{ objet.id }}"
                        data-armoire-id="{{ objet.armoire_id }}"
                        data-categorie-id="{{ objet.categorie_id }}"
                        data-nom="{{ objet.nom }}"
                        data-quantite="{{ objet.quantite_physique }}"
                        data-seuil="{{ objet.seuil }}"
                        data-date-peremption="{{ objet.date_peremption or '' }}"
                        data-image-url="{{ objet.image_url or '' }}"
                        data-modal-trigger="add-object-modal">
                    Modifier
                </button>
				{% if session.user_role == 'admin' %}
				<form class="form-in-cell" action="{{ url_for('inventaire.supprimer_objet', id_objet=objet.id) }}" method="post" onsubmit="return confirm('√ätes-vous s√ªr de vouloir supprimer d√©finitivement l\'objet \'{{ objet.nom }}\' ? Cette action est irr√©versible.');">
					<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
					<button type="submit" class="btn-action btn-danger">Supprimer</button>
				</form>
				{% endif %}
            </td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>
--- END OF FILE templates/_table_objets.html ---

--- START OF FILE templates/a_propos.html ---

{% extends "base.html" %}

{% block title %}√Ä Propos - LabFlow{% endblock %}

{% block content %}

<div class="main-container">
    {% include '_breadcrumb.html' %}

    <div class="row justify-content-center fade-in-up">
        <div class="col-lg-10">
            
            <!-- 1. HERO SECTION -->
            <div class="about-hero">
                <div class="logo-container">
                    <!-- Logo SVG LabFlow -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="56" height="56" fill="currentColor" class="bi bi-motherboard-fill text-primary" viewBox="0 0 16 16">
                        <path d="M5 7h3V4H5z"/>
                        <path d="M1 2a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-2H.5a.5.5 0 0 1-.5-.5v-1A.5.5 0 0 1 .5 9H1V8H.5a.5.5 0 0 1-.5-.5v-1A.5.5 0 0 1 .5 6H1V5H.5a.5.5 0 0 1-.5-.5v-2A.5.5 0 0 1 .5 2zm11 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0zm2 0a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0zM3.5 10a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zM4 4h-.5a.5.5 0 0 0 0 1H4v1h-.5a.5.5 0 0 0 0 1H4a1 1 0 0 0 1 1v.5a.5.5 0 0 0 1 0V8h1v.5a.5.5 0 0 0 1 0V8a1 1 0 0 0 1-1h.5a.5.5 0 0 0 0-1H9V5h.5a.5.5 0 0 0 0-1H9a1 1 0 0 0-1-1v-.5a.5.5 0 0 0-1 0V3H6v-.5a.5.5 0 0 0-1 0V3a1 1 0 0 0-1 1m7 7.5v1a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 0-.5.5"/>
                    </svg>
                </div>
                <h1 class="fw-bold text-dark mb-2">LabFlow</h1>
                <p class="text-muted fs-5 mb-4">Gestion Intelligente de Mat√©riel de Laboratoire</p>
                <span class="badge bg-light text-dark border rounded-pill px-3 py-2">Version 1.0.0</span>
            </div>

            <!-- 2. L'√âQUIPE -->
            <div class="row g-4 mb-5">
                <div class="col-12 text-center mb-2">
                    <h3 class="h5 fw-bold text-secondary text-uppercase ls-1">D√©velopp√© avec passion par</h3>
                </div>
                
                <!-- Xavier -->
                <div class="col-md-6">
                    <div class="dev-card">
                        <div class="dev-avatar">
                            <i class="bi bi-code-slash"></i>
                        </div>
                        <h4 class="fw-bold text-dark">Xavier De Baudry d'Asson</h4>
                        <p class="text-primary small fw-bold mb-2">Enseignant SVT & Lead Developer</p>
                        <p class="text-muted small">Conception, Architecture et D√©veloppement Backend.</p>
                        <a href="mailto:xavier.de-baudry-d-asson@ac-nancy-metz.fr" class="btn btn-sm btn-outline-secondary rounded-pill mt-2">
                            <i class="bi bi-envelope me-1"></i> Contact
                        </a>
                    </div>
                </div>

                <!-- Yll -->
                <div class="col-md-6">
                    <div class="dev-card">
                        <div class="dev-avatar" style="background: linear-gradient(135deg, #0d6efd 0%, #0dcaf0 100%);">
                            <i class="bi bi-palette"></i>
                        </div>
                        <h4 class="fw-bold text-dark">Yll Basha</h4>
                        <p class="text-info small fw-bold mb-2">Enseignant SVT & UI/UX Designer</p>
                        <p class="text-muted small">Design, Exp√©rience Utilisateur et Tests.</p>
                        <a href="mailto:yll.basha@ac-nancy-metz.fr" class="btn btn-sm btn-outline-secondary rounded-pill mt-2">
                            <i class="bi bi-envelope me-1"></i> Contact
                        </a>
                    </div>
                </div>
            </div>

            <!-- 3. LICENCE & SYST√àME (Visible Admin) -->
            {% if session.user_role == 'admin' %}
            <div class="license-box shadow">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h4 class="fw-bold mb-1">√âtat du Syst√®me</h4>
                        <p class="text-white-50 mb-3 small">Informations techniques de votre instance.</p>
                        
                        <div class="d-flex align-items-center gap-3 flex-wrap mb-4">
                            <div>
                                <small class="d-block text-white-50 mb-1">Statut Licence</small>
                                {% if licence.is_pro %}
                                    <span class="license-badge-pro"><i class="bi bi-star-fill me-1"></i>PRO</span>
                                {% else %}
                                    <span class="license-badge-free">GRATUITE</span>
                                {% endif %}
                            </div>
                            
                            <div>
                                <small class="d-block text-white-50 mb-1">Identifiant Instance</small>
                                <div class="instance-code" onclick="copierID(this)" title="Cliquer pour copier">
                                    {{ licence.instance_id }}
                                    <i class="bi bi-clipboard ms-2 opacity-50"></i>
                                </div>
                            </div>
                        </div>

                        <!-- ZONE D'ACTIVATION (Ajout√©e ici) -->
                        {% if not licence.is_pro %}
                        <div class="pt-3 border-top border-white-10" style="border-color: rgba(255,255,255,0.1) !important;">
                            <label class="small text-white-50 mb-2">Vous avez une cl√© d'activation ?</label>
                            <form action="{{ url_for('admin.activer_licence') }}" method="post" class="d-flex gap-2">
                                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                <input type="text" name="licence_cle" 
                                       class="form-control form-control-sm" 
                                       placeholder="Collez votre cl√© ici (ex: A1B2...)" 
                                       required
                                       style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; max-width: 300px;">
                                <button type="submit" class="btn btn-sm btn-warning fw-bold text-dark">
                                    Activer
                                </button>
                            </form>
                        </div>
                        {% endif %}

                    </div>
                    <div class="col-md-4 text-center d-none d-md-block">
                        <i class="bi bi-shield-check display-1 opacity-25"></i>
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- Footer discret -->
            <div class="text-center mt-5 text-muted small">
                <p class="opacity-50">Fait avec Flask, Bootstrap 5 & ‚ù§Ô∏è</p>
            </div>

        </div>
    </div>
</div>

<script>
    function copierID(element) {
        const text = element.innerText.trim();
        navigator.clipboard.writeText(text).then(() => {
            const original = element.innerHTML;
            element.innerHTML = '<i class="bi bi-check-circle-fill text-success me-1"></i> Copi√© !';
            setTimeout(() => {
                element.innerHTML = original;
            }, 2000);
        });
    }
</script>

{% endblock %}
--- END OF FILE templates/a_propos.html ---

--- START OF FILE templates/admin.html ---

{% extends "base.html" %}
{% block title %}Panneau d'Administration - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    {% include '_breadcrumb.html' %}
    
    <!-- En-t√™te principal -->
    <div class="admin-hero">
        <div class="admin-hero-content">
            <div class="admin-hero-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="48px">
                    <path d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Z"/>
                </svg>
            </div>
            <div>
                <h1 class="admin-hero-title">Panneau d'Administration</h1>
                <p class="admin-hero-subtitle">G√©rez et configurez votre application LabFlow</p>
            </div>
        </div>
		
		<!-- Code d'invitation de l'√©tablissement -->
		<div class="alert alert-info shadow-sm">
			<div class="d-flex align-items-center mb-2">
				<i class="bi bi-ticket-perforated-fill fs-4 me-2"></i>
				<h5 class="mb-0">Code d'invitation de votre √©tablissement</h5>
			</div>
			<p class="mb-2">Partagez ce code avec vos coll√®gues pour qu'ils rejoignent <strong>{{ session.nom_etablissement }}</strong> :</p>
			<div class="input-group">
				<input type="text" 
					   class="form-control form-control-lg text-center fw-bold" 
					   id="codeInvitation"
					   value="{{ etablissement.code_invitation }}" 
					   readonly
					   style="font-family: monospace; font-size: 1.75rem; letter-spacing: 0.1em; background: #f8f9fa;">
				<button class="btn btn-primary btn-lg" onclick="copierCode()" type="button">
					<i class="bi bi-clipboard me-1"></i> Copier
				</button>
			</div>
			<small class="text-muted d-block mt-2">
				<i class="bi bi-info-circle me-1"></i>
				Ce code permet √† quiconque le poss√®de de cr√©er un compte dans votre √©tablissement
			</small>
		</div>

		<script>
		function copierCode() {
			const input = document.getElementById('codeInvitation');
			input.select();
			navigator.clipboard.writeText(input.value).then(() => {
				const btn = event.target.closest('button');
				const originalHTML = btn.innerHTML;
				btn.innerHTML = '<i class="bi bi-check-circle-fill me-1"></i> Copi√© !';
				btn.classList.remove('btn-primary');
				btn.classList.add('btn-success');
				setTimeout(() => {
					btn.innerHTML = originalHTML;
					btn.classList.remove('btn-success');
					btn.classList.add('btn-primary');
				}, 2000);
			});
		}
		</script>
        
        <!-- Statut de la licence -->
        <div class="license-status {{ 'license-pro' if licence.is_pro else 'license-free' }}">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="20px">
                <path d="m354-287 126-76 126 77-33-144 111-96-146-13-58-136-58 135-146 13 111 97-33 143ZM233-120l65-281L80-590l288-25 112-265 112 265 288 25-218 189 65 281-247-149-247 149Zm247-350Z"/>
            </svg>
            <span>{{ 'Version Pro' if licence.is_pro else 'Version Gratuite' }}</span>
        </div>
    </div>

    <!-- Info box -->
    <div class="admin-info-banner">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="24px">
            <path d="M480-680q-33 0-56.5-23.5T400-760q0-33 23.5-56.5T480-840q33 0 56.5 23.5T560-760q0 33-23.5 56.5T480-680Zm-60 560v-480h120v480H420Z"/>
        </svg>
        <p>Cette section vous permet d'effectuer des op√©rations de maintenance et de gestion sur l'ensemble de l'application.</p>
    </div>

    <!-- SECTION : Gestion Quotidienne -->
    <div class="admin-category">
        <div class="category-header">
            <h2 class="category-title">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="28px">
                    <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h168q13-36 43.5-58t68.5-22q38 0 68.5 22t43.5 58h168q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm280-670q13 0 21.5-8.5T510-820q0-13-8.5-21.5T480-850q-13 0-21.5 8.5T450-820q0 13 8.5 21.5T480-790Z"/>
                </svg>
                Gestion Quotidienne
            </h2>
            <p class="category-description">Outils essentiels pour la gestion journali√®re de votre laboratoire</p>
        </div>

        <div class="admin-grid">
            <!-- Carte Utilisateurs -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-blue">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M40-160v-112q0-34 17.5-62.5T104-378q62-31 126-46.5T360-440q66 0 130 15.5T616-378q29 15 46.5 43.5T680-272v112H40Zm720 0v-120q0-44-24.5-84.5T666-434q51 6 96 20.5t84 35.5q36 20 55 44.5t19 53.5v120H760ZM360-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm400-160q0 66-47 113t-113 47q-11 0-28-2.5t-28-5.5q27-32 41.5-71t14.5-81q0-42-14.5-81T544-792q14-5 28-6.5t28-1.5q66 0 113 47t47 113Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Gestion des Utilisateurs</h3>
                <p class="card-description">Ajoutez, supprimez ou modifiez les comptes utilisateurs et leurs permissions</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.gestion_utilisateurs') }}" class="btn-card btn-primary">
                        G√©rer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte Kits -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-purple">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M80-160v-400q0-33 23.5-56.5T160-640h120v-80q0-33 23.5-56.5T360-800h240q33 0 56.5 23.5T680-720v80h120q33 0 56.5 23.5T880-560v400H80Zm240-480h320v-80H320v80Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Gestion des Kits</h3>
                <p class="card-description">Cr√©ez et configurez des kits de mat√©riel pr√©d√©finis pour faciliter les r√©servations</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.gestion_kits') }}" class="btn-card btn-primary">
                        G√©rer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte √âch√©ances -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-orange">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M200-80q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H200Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Gestion des √âch√©ances</h3>
                <p class="card-description">D√©finissez et suivez les dates importantes : maintenances, contrats, commandes</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.gestion_echeances') }}" class="btn-card btn-primary">
                        G√©rer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte Budget -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-green">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M600-120q-118 0-210-67T260-360H120v-80h122q-2-11-2-20v-40q0-9 2-20H120v-80h140q38-106 130-173t210-67q69 0 130.5 24T840-748l-70 70q-35-29-78.5-45.5T600-740q-75 0-136.5 38.5T370-600h230v80H344q-2 11-3 20t-1 20q0 11 1 20t3 20h256v80H370q32 63 93.5 101.5T600-220q48 0 92.5-16.5T770-282l70 70q-48 44-109.5 68T600-120Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Gestion Budg√©taire</h3>
                <p class="card-description">Suivez votre budget annuel, enregistrez vos d√©penses et exportez des rapports</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.budget') }}" class="btn-card btn-primary">
                        Acc√©der
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte Fournisseurs -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-teal">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M280-160q-50 0-85-35t-35-85H60l18-80h113q17-19 40-29.5t49-10.5q26 0 49 10.5t40 29.5h167l84-360H182l4-17q6-28 27.5-45.5T264-800h456l-37 160h117l120 160-40 200h-80q0 50-35 85t-85 35q-50 0-85-35t-35-85H400q0 50-35 85t-85 35Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Gestion des Fournisseurs</h3>
                <p class="card-description">Consultez, ajoutez ou supprimez les fiches des fournisseurs r√©f√©renc√©s</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.gestion_fournisseurs') }}" class="btn-card btn-primary">
                        G√©rer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- SECTION : Analyse et Exports -->
    <div class="admin-category">
        <div class="category-header">
            <h2 class="category-title">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="28px">
                    <path d="m105-399-65-47 200-320 120 140 160-260 120 180 135-214 65 47-198 314-119-179-152 247-121-141-145 233Z"/>
                </svg>
                Analyse et Exports
            </h2>
            <p class="category-description">Outils d'analyse et d'export pour vos donn√©es</p>
        </div>

        <div class="admin-grid">
            <!-- Carte Import -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-indigo">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M240-160q-33 0-56.5-23.5T160-240v-480q0-33 23.5-56.5T240-800h360l160 160v400q0 33-23.5 56.5T720-160H240Zm0-80h480v-360H560v-120H240v480Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Importation en Masse</h3>
                <p class="card-description">Ajoutez plusieurs objets √† votre inventaire en une seule fois via Excel</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.importer_page') }}" class="btn-card btn-primary">
                        Importer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte Rapports -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-pink">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="m105-399-65-47 200-320 120 140 160-260 120 180 135-214 65 47-198 314-119-179-152 247-121-141-145 233Zm475 159q42 0 71-29t29-71q0-42-29-71t-71-29q-42 0-71 29t-29 71q0 42 29 71t71 29Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Rapports d'Activit√©</h3>
                <p class="card-description">G√©n√©rez des rapports d√©taill√©s sur l'utilisation du mat√©riel et les r√©servations</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.rapports') }}" class="btn-card btn-primary">
                        G√©n√©rer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte Export Inventaire -->
            <div class="admin-card card-wide">
                <div class="card-icon-wrapper card-icon-cyan">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h160v-40h240v40h160q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Exporter l'Inventaire Complet</h3>
                <p class="card-description">Obtenez une liste compl√®te de tous les objets avec leur stock disponible actuel</p>
                <div class="card-footer card-footer-multiple">
                    <a href="{{ url_for('admin.exporter_inventaire', format='pdf') }}" class="btn-card btn-secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M320-240h320v-80H320v80Zm0-160h320v-80H320v80ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Z"/>
                        </svg>
                        Export PDF
                    </a>
                    <a href="{{ url_for('admin.exporter_inventaire', format='excel') }}" class="btn-card btn-secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M240-160q-33 0-56.5-23.5T160-240v-480q0-33 23.5-56.5T240-800h360l160 160v400q0 33-23.5 56.5T720-160H240Z"/>
                        </svg>
                        Export Excel
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- SECTION : Administration du Syst√®me -->
    <div class="admin-category">
        <div class="category-header">
            <h2 class="category-title">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="28px">
                    <path d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Z"/>
                </svg>
                Administration du Syst√®me
            </h2>
            <p class="category-description">Configuration avanc√©e et maintenance de l'application</p>
        </div>

        <div class="admin-grid">
            <!-- Carte Base de Donn√©es -->
            <div class="admin-card">
                <div class="card-icon-wrapper" style="background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="32" height="32" fill="white">
                        <path d="M8.5 1.5A1.5 1.5 0 0 1 10 0h4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h6c-.314.418-.5.937-.5 1.5v7.793L4.854 6.646a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0l3.5-3.5a.5.5 0 0 0-.708-.708L8.5 9.293z"/>
                    </svg>
                </div>
                <h3 class="card-title">Sauvegardes & Restauration</h3>
                <p class="card-description">G√©rez vos points de restauration, exportez vos donn√©es JSON et restaurez l'√©tat du laboratoire.</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.gestion_sauvegardes') }}" class="btn-card btn-primary">
                        Acc√©der au gestionnaire
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

{% include '_modale_warning.html' %}
{% include '_modals.html' %}
{% endblock %}
--- END OF FILE templates/admin.html ---

--- START OF FILE templates/admin_backup.html ---

{% extends "base.html" %}

{% block title %}Sauvegardes - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    
    <!-- 1. Fil d'ariane Premium -->
    {% include '_breadcrumb.html' %}

    <!-- 2. En-t√™te avec Ic√¥ne Rouge -->
    <div class="d-flex justify-content-between align-items-center mb-5 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <!-- Fond Rouge -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);">
                <i class="bi bi-hdd-network fs-4"></i>
            </div>
            <span class="fw-bold">Gestion des Sauvegardes</span>
        </h2>
    </div>

    <!-- Zone 1 : Cr√©er une sauvegarde -->
    <div class="card border-0 shadow-sm rounded-3 mb-4">
        <div class="card-body p-4">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h4 class="fw-bold text-primary mb-2">
                        <i class="bi bi-cloud-download me-2"></i>Exportation des donn√©es
                    </h4>
                    <p class="text-muted mb-0">
                        G√©n√©rez un fichier de sauvegarde complet (JSON) contenant tout votre inventaire, vos utilisateurs, vos budgets et votre historique.
                        <br>
                        <small class="text-info"><i class="bi bi-info-circle"></i> Ce fichier pourra √™tre utilis√© pour restaurer votre laboratoire en cas de probl√®me.</small>
                    </p>
                </div>
                <div class="col-md-4 text-end">
                    <a href="{{ url_for('admin.telecharger_db') }}" class="btn btn-primary btn-lg shadow-sm">
                        <i class="bi bi-download me-2"></i>T√©l√©charger une sauvegarde
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Zone 2 : Restauration -->
    <div class="card border-0 shadow-sm rounded-3 border-start border-warning border-5">
        <div class="card-body p-4">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h4 class="fw-bold text-dark mb-2">
                        <i class="bi bi-arrow-counterclockwise me-2 text-warning"></i>Restauration
                    </h4>
                    <p class="text-muted mb-0">
                        Restaurez les donn√©es de votre √©tablissement √† partir d'un fichier de sauvegarde pr√©c√©dent.
                        <br>
                        <strong class="text-danger">Attention : Cette action remplacera toutes les donn√©es actuelles.</strong>
                    </p>
                </div>
                <div class="col-md-4 text-end">
                    <button class="btn btn-outline-warning text-dark fw-bold" data-bs-toggle="modal" data-bs-target="#restoreModal">
                        <i class="bi bi-upload me-2"></i>Importer une sauvegarde
                    </button>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- Modale de Restauration S√©curis√©e -->
<div class="modal fade" id="restoreModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-danger">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title"><i class="bi bi-exclamation-triangle-fill me-2"></i>Restauration Critique</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form action="{{ url_for('admin.importer_db') }}" method="post" enctype="multipart/form-data">
                <div class="modal-body p-4">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    
                    <div class="alert alert-warning shadow-sm">
                        <strong><i class="bi bi-cone-striped me-2"></i>Action Irr√©versible</strong>
                        <p class="mb-0 small mt-1">
                            Vous √™tes sur le point d'√©craser la base de donn√©es actuelle avec le contenu du fichier. 
                            Les donn√©es non sauvegard√©es seront perdues.
                        </p>
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">Fichier de sauvegarde (.json)</label>
                        <input type="file" name="fichier" class="form-control" accept=".json" required>
                    </div>

                    <hr>

                    <div class="mb-3">
                        <label class="form-label text-muted small">S√©curit√© : Tapez <strong>RESTAURER</strong> pour confirmer.</label>
                        <input type="text" id="confirm-restore-input" class="form-control border-danger text-danger fw-bold" placeholder="RESTAURER" autocomplete="off">
                    </div>
                </div>
                <div class="modal-footer bg-light">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" id="btn-confirm-restore" class="btn btn-danger" disabled>
                        <i class="bi bi-check-circle me-2"></i>Lancer la restauration
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    // S√©curit√© pour le bouton restaurer
    document.getElementById('confirm-restore-input').addEventListener('input', function() {
        const btn = document.getElementById('btn-confirm-restore');
        if (this.value === 'RESTAURER') {
            btn.disabled = false;
        } else {
            btn.disabled = true;
        }
    });
</script>
{% endblock %}
--- END OF FILE templates/admin_backup.html ---

--- START OF FILE templates/admin_echeances.html ---

{% extends "base.html" %}

{% block title %}Gestion des √âch√©ances - LabFlow{% endblock %}

{% block content %}
*
<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <!-- Ic√¥ne √âch√©ances (Orange) -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #ff9a56 0%, #ff6a88 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="28" height="28" fill="currentColor">
                    <path d="M200-80q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H200Z"/>
                </svg>
            </div>
            <span class="fw-bold">Gestion des √âch√©ances</span>
        </h2>
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#echeanceModal" onclick="resetModal()">
            <i class="bi bi-plus-lg me-2"></i> Ajouter une √©ch√©ance
        </button>
    </div>

    <!-- Tableau -->
    <div class="card border-0 shadow-sm rounded-3 overflow-hidden">
        <div class="table-responsive">
            <table class="echeance-table mb-0">
                <thead>
                    <tr>
                        <th style="width: 150px;">Date</th>
                        <th>Intitul√©</th>
                        <th>D√©tails</th>
                        <th style="width: 140px;">Statut</th>
                        <th class="text-end" style="width: 100px;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% if echeances %}
                        {% for echeance in echeances %}
                            <!-- Calcul du statut pour le style -->
                            {% set is_late = (not echeance.traite and echeance.date_echeance < date_actuelle) %}
                            {% set is_soon = (not echeance.traite and (echeance.date_echeance - date_actuelle).days < 30 and not is_late) %}
                            
                            <tr class="{{ 'row-done' if echeance.traite else '' }}">
                                <td>
                                    <div class="d-flex align-items-center gap-2">
                                        <i class="bi bi-calendar3 text-muted"></i>
                                        <span class="fw-medium">{{ echeance.date_echeance.strftime('%d/%m/%Y') }}</span>
                                    </div>
                                </td>
                                <td>
                                    <strong class="d-block text-dark">{{ echeance.intitule }}</strong>
                                </td>
                                <td class="text-muted small">
                                    {{ echeance.details or '-' }}
                                </td>
                                <td>
                                    {% if echeance.traite %}
                                        <span class="status-badge status-done"><i class="bi bi-check-circle-fill"></i> Trait√©</span>
                                    {% elif is_late %}
                                        <span class="status-badge status-danger"><i class="bi bi-exclamation-triangle-fill"></i> Retard</span>
                                    {% elif is_soon %}
                                        <span class="status-badge status-warning"><i class="bi bi-clock-history"></i> Bient√¥t</span>
                                    {% else %}
                                        <span class="status-badge status-ok"><i class="bi bi-hourglass-split"></i> En cours</span>
                                    {% endif %}
                                </td>
                                <td>
                                    <!-- Wrapper Flexbox pour aligner les boutons -->
                                    <div class="actions-wrapper">
                                        <!-- Modifier -->
                                        <button class="btn btn-sm btn-outline-primary btn-icon-only" 
                                                title="Modifier"
                                                onclick='openEditModal({{ echeance.id }}, "{{ echeance.intitule|replace('"', '&quot;') }}", "{{ echeance.date_echeance.strftime('%Y-%m-%d') }}", "{{ (echeance.details or "")|replace('"', '&quot;')|replace('\n', ' ')|replace('\r', '') }}", {{ "true" if echeance.traite else "false" }})'>
                                            <i class="bi bi-pencil-fill"></i>
                                        </button>
                                        
                                        <!-- Supprimer -->
                                        <button class="btn btn-sm btn-outline-danger btn-icon-only" 
                                                title="Supprimer"
                                                data-bs-toggle="modal" 
                                                data-bs-target="#deleteModal"
                                                data-url="{{ url_for('admin.supprimer_echeance', id=echeance.id) }}">
                                            <i class="bi bi-trash-fill"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="5" class="text-center py-5 text-muted">
                                <i class="bi bi-calendar-x display-4 d-block mb-3 opacity-25"></i>
                                Aucune √©ch√©ance enregistr√©e.
                            </td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Modale Ajout/Modification -->
<div class="modal fade" id="echeanceModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="modalTitle"><i class="bi bi-calendar-plus me-2"></i>Nouvelle √âch√©ance</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form id="echeanceForm" action="{{ url_for('admin.ajouter_echeance') }}" method="post">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    
                    <div class="mb-3">
                        <label class="form-label">Intitul√© *</label>
                        <input type="text" class="form-control" name="intitule" id="inputIntitule" required placeholder="Ex: Renouvellement contrat maintenance">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Date d'√©ch√©ance *</label>
                        <input type="date" class="form-control" name="date_echeance" id="inputDate" required>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">D√©tails</label>
                        <textarea class="form-control" name="details" id="inputDetails" rows="3"></textarea>
                    </div>

                    <!-- Checkbox visible uniquement en mode √©dition -->
                    <div class="form-check d-none" id="divTraite">
                        <input class="form-check-input" type="checkbox" name="traite" id="checkTraite">
                        <label class="form-check-label" for="checkTraite">
                            Marquer comme trait√©e / termin√©e
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale Suppression -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">Supprimer l'√©ch√©ance</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p>Voulez-vous vraiment supprimer cette √©ch√©ance ?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <form id="deleteForm" method="post" action="">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn btn-danger">Supprimer</button>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    // R√©initialiser la modale pour l'ajout
    function resetModal() {
        document.getElementById('modalTitle').innerHTML = '<i class="bi bi-calendar-plus me-2"></i>Nouvelle √âch√©ance';
        document.getElementById('echeanceForm').action = "{{ url_for('admin.ajouter_echeance') }}";
        document.getElementById('inputIntitule').value = '';
        document.getElementById('inputDate').value = '';
        document.getElementById('inputDetails').value = '';
        document.getElementById('checkTraite').checked = false;
        document.getElementById('divTraite').classList.add('d-none'); // Cacher le statut trait√© √† la cr√©ation
    }

    // Remplir la modale pour l'√©dition
    function openEditModal(id, intitule, date, details, traite) {
        // Ouvrir la modale via Bootstrap
        const modal = new bootstrap.Modal(document.getElementById('echeanceModal'));
        modal.show();

        // Remplir les champs
        document.getElementById('modalTitle').innerHTML = '<i class="bi bi-pencil-square me-2"></i>Modifier l\'√©ch√©ance';
        document.getElementById('echeanceForm').action = "/admin/echeances/modifier/" + id;
        document.getElementById('inputIntitule').value = intitule;
        document.getElementById('inputDate').value = date;
        document.getElementById('inputDetails').value = details;
        
        // G√©rer la case √† cocher
        const checkTraite = document.getElementById('checkTraite');
        checkTraite.checked = traite;
        document.getElementById('divTraite').classList.remove('d-none'); // Afficher le statut trait√©
    }

    // Gestion suppression
    const deleteModal = document.getElementById('deleteModal');
    if (deleteModal) {
        deleteModal.addEventListener('show.bs.modal', function(event) {
            const button = event.relatedTarget;
            const url = button.dataset.url;
            document.getElementById('deleteForm').action = url;
        });
    }
</script>
{% endblock %}
--- END OF FILE templates/admin_echeances.html ---

--- START OF FILE templates/admin_fournisseurs.html ---

{% extends "base.html" %}

{% block title %}Gestion des Fournisseurs - LabFlow{% endblock %}

{% block content %}

<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-2">
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 40px; height: 40px; background: linear-gradient(135deg, #0ba360 0%, #3cba92 100%);">
                <i class="bi bi-bus-front"></i>
            </div>
            Gestion des Fournisseurs
        </h2>
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#fournisseurModal" onclick="resetModal()">
            <i class="bi bi-plus-lg me-2"></i> Ajouter un fournisseur
        </button>
    </div>

    <!-- Tableau -->
    <div class="card border-0 shadow-sm rounded-3 overflow-hidden">
        <div class="table-responsive">
            <table class="fournisseur-table mb-0">
                <thead>
                    <tr>
                        <th style="width: 80px;">Logo</th>
                        <th>Nom</th>
                        <th>Site Web</th>
                        <th class="text-end" style="width: 120px;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% if fournisseurs %}
                        {% for item in fournisseurs %}
                            <tr>
                                <td>
                                    <div class="fournisseur-logo-wrapper">
                                        {% if item.Fournisseur.logo %}
                                            <img src="{{ item.Fournisseur.logo }}" alt="{{ item.Fournisseur.nom }}" class="fournisseur-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='block'">
                                            <i class="bi bi-image fournisseur-logo-placeholder" style="display: none;"></i>
                                        {% else %}
                                            <i class="bi bi-image fournisseur-logo-placeholder"></i>
                                        {% endif %}
                                    </div>
                                </td>
                                <td>
                                    <strong class="text-dark">{{ item.Fournisseur.nom }}</strong>
                                </td>
                                <td>
                                    {% if item.Fournisseur.site_web %}
                                        <a href="{{ item.Fournisseur.site_web }}" target="_blank" class="website-link">
                                            <i class="bi bi-link-45deg"></i> Visiter le site
                                        </a>
                                    {% else %}
                                        <span class="text-muted small">-</span>
                                    {% endif %}
                                </td>
                                <td class="text-end">
                                    <!-- Modifier -->
                                    <button class="btn btn-sm btn-outline-primary btn-icon-only me-1" 
                                            title="Modifier"
                                            onclick='openEditModal({{ item.Fournisseur.id }}, "{{ item.Fournisseur.nom|replace('"', '&quot;') }}", "{{ item.Fournisseur.site_web or "" }}", "{{ item.Fournisseur.logo or "" }}")'>
                                        <i class="bi bi-pencil-fill"></i>
                                    </button>
                                    
                                    <!-- Supprimer -->
                                    <button class="btn btn-sm btn-outline-danger btn-icon-only" 
                                            title="Supprimer"
                                            {% if item.depenses_count > 0 %}disabled{% endif %}
                                            data-bs-toggle="modal" 
                                            data-bs-target="#deleteModal"
                                            data-url="{{ url_for('admin.supprimer_fournisseur', id=item.Fournisseur.id) }}">
                                        <i class="bi bi-trash-fill"></i>
                                    </button>
                                </td>
                            </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="4" class="text-center py-5 text-muted">
                                <i class="bi bi-shop display-4 d-block mb-3 opacity-25"></i>
                                Aucun fournisseur enregistr√©.
                            </td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Modale Ajout/Modification -->
<div class="modal fade" id="fournisseurModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="modalTitle"><i class="bi bi-shop me-2"></i>Nouveau Fournisseur</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form id="fournisseurForm" action="{{ url_for('admin.ajouter_fournisseur') }}" method="post">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    
                    <div class="mb-3">
                        <label class="form-label">Nom du fournisseur *</label>
                        <input type="text" class="form-control" name="nom" id="inputNom" required placeholder="Ex: Jeulin, Pierron...">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Site Web</label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="bi bi-globe"></i></span>
                            <input type="url" class="form-control" name="site_web" id="inputSite" placeholder="https://...">
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">URL du Logo</label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="bi bi-image"></i></span>
                            <input type="url" class="form-control" name="logo_url" id="inputLogo" placeholder="https://...">
                        </div>
                        <div class="form-text">Lien direct vers l'image du logo.</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale Suppression -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">Supprimer le fournisseur</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p>Voulez-vous vraiment supprimer ce fournisseur ?</p>
                <div class="alert alert-warning small">
                    <i class="bi bi-exclamation-triangle me-1"></i> Impossible si des d√©penses y sont li√©es.
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <form id="deleteForm" method="post" action="">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn btn-danger">Supprimer</button>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    // R√©initialiser la modale pour l'ajout
    function resetModal() {
        document.getElementById('modalTitle').innerHTML = '<i class="bi bi-shop me-2"></i>Nouveau Fournisseur';
        document.getElementById('fournisseurForm').action = "{{ url_for('admin.ajouter_fournisseur') }}";
        document.getElementById('inputNom').value = '';
        document.getElementById('inputSite').value = '';
        document.getElementById('inputLogo').value = '';
    }

    // Remplir la modale pour l'√©dition
    function openEditModal(id, nom, site, logo) {
        // Ouvrir la modale via Bootstrap
        const modal = new bootstrap.Modal(document.getElementById('fournisseurModal'));
        modal.show();

        // Remplir les champs
        document.getElementById('modalTitle').innerHTML = '<i class="bi bi-pencil-square me-2"></i>Modifier le fournisseur';
        document.getElementById('fournisseurForm').action = "/admin/fournisseurs/modifier/" + id;
        document.getElementById('inputNom').value = nom;
        document.getElementById('inputSite').value = site;
        document.getElementById('inputLogo').value = logo;
    }

    // Gestion suppression
    const deleteModal = document.getElementById('deleteModal');
    if (deleteModal) {
        deleteModal.addEventListener('show.bs.modal', function(event) {
            const button = event.relatedTarget;
            const url = button.dataset.url;
            document.getElementById('deleteForm').action = url;
        });
    }
</script>
{% endblock %}
--- END OF FILE templates/admin_fournisseurs.html ---

--- START OF FILE templates/admin_import.html ---

{% extends "base.html" %}

{% block title %}Importation en Masse - LabFlow{% endblock %}

{% block content %}


<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <!-- Ic√¥ne Import (Indigo) -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 -960 960 960">
                    <path d="M240-160q-33 0-56.5-23.5T160-240v-480q0-33 23.5-56.5T240-800h360l160 160v400q0 33-23.5 56.5T720-160H240Zm0-80h480v-360H560v-120H240v480Z"/>
                </svg>
            </div>
            <span class="fw-bold">Importation en Masse</span>
        </h2>
    </div>

    <div class="row g-4">
        
        <!-- COLONNE GAUCHE : Instructions -->
        <div class="col-lg-6">
            <div class="import-card">
                <h4 class="mb-4 d-flex align-items-center">
                    <span class="step-number">1</span>
                    Pr√©parer le fichier
                </h4>
                
                <p class="text-muted mb-4">
                    Pour importer de nouveaux objets, t√©l√©chargez le mod√®le Excel officiel. 
                    Remplissez-le en respectant scrupuleusement les colonnes.
                </p>

                <!-- NOUVEAU BLOC D'AVERTISSEMENT -->
                <div class="alert alert-warning border-0 shadow-sm d-flex align-items-start mb-4" role="alert">
                    <i class="bi bi-exclamation-triangle-fill fs-5 me-3 text-warning-emphasis mt-1"></i>
                    <div>
                        <strong class="text-warning-emphasis">Pr√©alable important :</strong>
                        <p class="mb-0 small text-muted mt-1">
                            Le mod√®le Excel g√©n√®re des <strong>listes d√©roulantes</strong> bas√©es sur vos donn√©es actuelles.
                            <br>
                            Assurez-vous d'avoir cr√©√© toutes vos 
                            <a href="{{ url_for('main.gestion_armoires') }}" class="fw-bold text-dark text-decoration-underline">Armoires</a> 
                            et 
                            <a href="{{ url_for('main.gestion_categories') }}" class="fw-bold text-dark text-decoration-underline">Cat√©gories</a> 
                            dans l'application <strong>avant</strong> de t√©l√©charger ce fichier.
                        </p>
                    </div>
                </div>

                <div class="alert alert-info border-0 bg-light text-dark mb-4">
                    <h6 class="fw-bold mb-2"><i class="bi bi-info-circle me-2"></i>R√®gles de remplissage :</h6>
                    <ul class="help-list mb-0">
                        <li>Les colonnes <strong>Nom</strong>, <strong>Quantit√©</strong> et <strong>Seuil</strong> sont obligatoires.</li>
                        <li>Utilisez les menus d√©roulants pour l'Armoire et la Cat√©gorie.</li>
                        <li>La date doit √™tre au format <strong>AAAA-MM-JJ</strong> (ex: 2025-12-31).</li>
                    </ul>
                </div>

                <div class="text-center">
                    <a href="{{ url_for('admin.telecharger_modele_excel') }}" class="btn btn-outline-primary w-100 py-3 fw-bold">
                        <i class="bi bi-file-earmark-arrow-down me-2"></i>T√©l√©charger le Mod√®le (.xlsx)
                    </a>
                </div>
            </div>
        </div>

        <!-- COLONNE DROITE : Upload -->
        <div class="col-lg-6">
            <div class="import-card">
                <h4 class="mb-4 d-flex align-items-center">
                    <span class="step-number">2</span>
                    Importer les donn√©es
                </h4>

                <form action="{{ url_for('admin.importer_fichier') }}" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

                    <div class="form-group mb-4">
                        <div class="file-drop-zone" id="drop-zone">
                            <i class="bi bi-cloud-upload drop-icon"></i>
                            <h5 class="fw-bold text-dark mb-2">D√©posez votre fichier ici</h5>
                            <p class="text-muted small mb-0 file-msg">ou cliquez pour parcourir vos dossiers</p>
                            
                            <input type="file" name="fichier_excel" id="fichier_excel" class="file-input" accept=".xlsx" required>
                        </div>
                    </div>

                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary py-2 fw-bold">
                            <i class="bi bi-play-circle-fill me-2"></i>Lancer l'Importation
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const fileInput = document.getElementById('fichier_excel');
        const dropZone = document.getElementById('drop-zone');
        const fileMsg = dropZone.querySelector('.file-msg');
        const dropIcon = dropZone.querySelector('.drop-icon');
        const originalMsg = fileMsg.innerHTML;

        // Gestion du changement de fichier
        fileInput.addEventListener('change', function() {
            if (this.files && this.files.length > 0) {
                const fileName = this.files[0].name;
                fileMsg.innerHTML = `Fichier pr√™t : <strong class="text-success">${fileName}</strong>`;
                dropZone.classList.add('file-selected');
                dropIcon.classList.remove('bi-cloud-upload');
                dropIcon.classList.add('bi-file-earmark-excel-fill');
            } else {
                fileMsg.innerHTML = originalMsg;
                dropZone.classList.remove('file-selected');
                dropIcon.classList.add('bi-cloud-upload');
                dropIcon.classList.remove('bi-file-earmark-excel-fill');
            }
        });

        // Effets visuels au Drag & Drop
        ['dragenter', 'dragover'].forEach(eventName => {
            dropZone.addEventListener(eventName, (e) => {
                e.preventDefault();
                dropZone.classList.add('dragover');
            }, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, (e) => {
                e.preventDefault();
                dropZone.classList.remove('dragover');
            }, false);
        });
    });
</script>

{% endblock %}
--- END OF FILE templates/admin_import.html ---

--- START OF FILE templates/admin_kit_modifier.html ---

{% extends "base.html" %}

{% block title %}Modifier le Kit : {{ kit.nom }} - LabFlow{% endblock %}

{% block content %}

<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-2">
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white" 
                 style="width: 40px; height: 40px; background: linear-gradient(135deg, #6f42c1 0%, #a8edea 100%);">
                <i class="bi bi-box-seam"></i>
            </div>
            Modification du Kit : <span class="text-primary">{{ kit.nom }}</span>
        </h2>
        <a href="{{ url_for('admin.gestion_kits') }}" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left me-2"></i>Retour
        </a>
    </div>

    <div class="row g-4">
        
        <!-- COLONNE GAUCHE : Objets DANS le kit -->
        <div class="col-lg-6">
            <div class="kit-edit-card">
                <div class="kit-edit-header">
                    <h3 class="kit-edit-title">
                        <i class="bi bi-check-circle-fill text-success"></i> Contenu du Kit
                    </h3>
                    <span class="badge bg-white text-dark border">{{ objets_in_kit|length }} objets</span>
                </div>
                
                <div class="kit-edit-body">
                    {% if objets_in_kit %}
                    <form method="post" action="{{ url_for('admin.modifier_kit', kit_id=kit.id) }}">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        
                        <table class="kit-edit-table">
                            <thead>
                                <tr>
                                    <th>Objet</th>
                                    <th class="text-center" style="width: 100px;">Qt√©</th>
                                    <th class="text-end" style="width: 60px;"></th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for assoc in objets_in_kit %}
                                <tr>
                                    <td>
                                        <div class="fw-bold text-dark">{{ assoc.objet.nom }}</div>
                                        <small class="text-muted">Stock total : {{ assoc.objet.quantite_physique }}</small>
                                    </td>
                                    <td class="text-center">
                                        <input type="number" name="quantite_{{ assoc.id }}" 
                                               value="{{ assoc.quantite }}" 
                                               class="form-control form-control-sm kit-qty-input mx-auto" 
                                               min="1">
                                    </td>
                                    <td class="text-end">
                                        <button type="button" class="btn btn-sm btn-outline-danger border-0"
                                                title="Retirer du kit"
                                                data-bs-toggle="modal" 
                                                data-bs-target="#removeModal"
                                                data-url="{{ url_for('admin.retirer_objet_kit', kit_objet_id=assoc.id) }}"
                                                data-name="{{ assoc.objet.nom }}">
                                            <i class="bi bi-x-lg"></i>
                                        </button>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>

                        <!-- Bouton flottant en bas de la liste -->
                        <div class="p-3 border-top bg-white text-end sticky-bottom">
                            <button type="submit" class="btn btn-success">
                                <i class="bi bi-save me-2"></i>Mettre √† jour les quantit√©s
                            </button>
                        </div>
                    </form>
                    {% else %}
                        <div class="text-center py-5 text-muted">
                            <i class="bi bi-box-seam display-4 mb-3 d-block opacity-25"></i>
                            <p>Ce kit est vide.</p>
                            <small>Ajoutez des objets depuis la liste de droite.</small>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- COLONNE DROITE : Objets DISPONIBLES -->
        <div class="col-lg-6">
            <div class="kit-edit-card border-primary border-opacity-25">
                <div class="kit-edit-header bg-primary bg-opacity-10">
                    <h3 class="kit-edit-title text-primary">
                        <i class="bi bi-plus-circle-fill"></i> Ajouter des objets
                    </h3>
                </div>
                
                <!-- Barre de recherche fixe en haut de la liste -->
                <div class="kit-edit-toolbar">
                    <div class="kit-search-wrapper">
                        <i class="bi bi-search"></i>
                        <input type="text" id="kit-objet-search" class="form-control kit-search-input" placeholder="Rechercher un objet √† ajouter...">
                    </div>
                </div>

                <div class="kit-edit-body">
                    <table class="kit-edit-table" id="available-objects-table">
                        <thead>
                            <tr>
                                <th>Objet (Stock)</th>
                                <th class="text-center" style="width: 90px;">Qt√©</th>
                                <th class="text-end" style="width: 60px;"></th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for objet in objets_disponibles %}
                            <tr class="objet-row">
                                <td>
                                    <span class="objet-name fw-medium">{{ objet.nom }}</span>
                                    <small class="text-muted ms-1">({{ objet.quantite_physique }})</small>
                                </td>
                                
                                <!-- Formulaire individuel par ligne -->
                                <form method="post" action="{{ url_for('admin.modifier_kit', kit_id=kit.id) }}">
                                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                    <input type="hidden" name="objet_id" value="{{ objet.id }}">
                                    
                                    <td class="text-center">
                                        <input type="number" name="quantite" value="1" 
                                               class="form-control form-control-sm kit-qty-input mx-auto" 
                                               min="1" max="{{ objet.quantite_physique }}">
                                    </td>
                                    <td class="text-end">
                                        <button type="submit" class="btn btn-sm btn-primary" 
                                                title="Ajouter au kit"
                                                {% if objet.quantite_physique == 0 %}disabled{% endif %}>
                                            <i class="bi bi-plus-lg"></i>
                                        </button>
                                    </td>
                                </form>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    
                    <!-- Message si aucun r√©sultat de recherche -->
                    <div id="no-results" class="text-center py-5 text-muted d-none">
                        <i class="bi bi-search mb-2 d-block opacity-50"></i>
                        Aucun objet trouv√©
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modale de confirmation de retrait -->
<div class="modal fade" id="removeModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">Retirer l'objet</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p>Voulez-vous vraiment retirer <strong id="remove-object-name"></strong> du kit ?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <form id="removeForm" method="post" action="">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn btn-danger">Retirer</button>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    
    // 1. Recherche dynamique JS
    const searchInput = document.getElementById('kit-objet-search');
    const tableRows = document.querySelectorAll('#available-objects-table .objet-row');
    const noResults = document.getElementById('no-results');

    if (searchInput) {
        searchInput.addEventListener('keyup', function(e) {
            const term = e.target.value.toLowerCase();
            let visibleCount = 0;

            tableRows.forEach(row => {
                const name = row.querySelector('.objet-name').textContent.toLowerCase();
                if (name.includes(term)) {
                    row.style.display = '';
                    visibleCount++;
                } else {
                    row.style.display = 'none';
                }
            });

            if (visibleCount === 0) {
                noResults.classList.remove('d-none');
            } else {
                noResults.classList.add('d-none');
            }
        });
    }

    // 2. Gestion de la modale de retrait
    const removeModal = document.getElementById('removeModal');
    if (removeModal) {
        removeModal.addEventListener('show.bs.modal', function(event) {
            const button = event.relatedTarget;
            const url = button.dataset.url;
            const name = button.dataset.name;
            
            document.getElementById('removeForm').action = url;
            document.getElementById('remove-object-name').textContent = name;
        });
    }
});
</script>
{% endblock %}
--- END OF FILE templates/admin_kit_modifier.html ---

--- START OF FILE templates/admin_kits.html ---

{% extends "base.html" %}

{% block title %}Gestion des Kits - LabFlow{% endblock %}

{% block content %}

<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te de page -->
    <div class="management-header mb-4 pb-3 border-bottom d-flex justify-content-between align-items-center flex-wrap gap-3">
        <h2 class="page-title h3 mb-0 d-flex align-items-center gap-3">
            <!-- Ic√¥ne Kits (Cyan/Rose - ou le style "Valise") -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="28" height="28" fill="currentColor">
                    <path d="M80-160v-400q0-33 23.5-56.5T160-640h120v-80q0-33 23.5-56.5T360-800h240q33 0 56.5 23.5T680-720v80h120q33 0 56.5 23.5T880-560v400H80Zm240-480h320v-80H320v80Z"/>
                </svg>
            </div>
            <span class="fw-bold text-dark">Gestion des Kits</span>
        </h2>
        
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addKitModal">
            <i class="bi bi-plus-lg me-2"></i> Cr√©er un nouveau kit
        </button>
    </div>

    <!-- Liste des Kits -->
    {% if kits and kits|length > 0 %}
        <div class="card-container management-page">
            {% for item in kits %}
            <div class="kit-card">
                <!-- Ic√¥ne -->
                <div class="kit-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                        <path d="M80-160v-400q0-33 23.5-56.5T160-640h120v-80q0-33 23.5-56.5T360-800h240q33 0 56.5 23.5T680-720v80h120q33 0 56.5 23.5T880-560v400H80Zm240-480h320v-80H320v80Z"/>
                    </svg>
                </div>

                <!-- Infos -->
                <div class="kit-info">
                    <a href="{{ url_for('admin.modifier_kit', kit_id=item.Kit.id) }}" class="kit-name stretched-link-custom">
                        {{ item.Kit.nom }}
                    </a>
                    <p class="kit-desc">{{ item.Kit.description or 'Aucune description' }}</p>
                    
                    <span class="count-badge">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
                        </svg>
                        {% if item.count == 0 %}Vide{% elif item.count == 1 %}1 objet{% else %}{{ item.count }} objets{% endif %}
                    </span>
                </div>

                <!-- Actions -->
                <div class="kit-actions">
                    <!-- Modifier (CRAYON) -->
                    <a href="{{ url_for('admin.modifier_kit', kit_id=item.Kit.id) }}" 
                       class="btn-icon-only btn-edit" 
                       title="Modifier le contenu">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 17l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"/>
                        </svg>
                    </a>

                    <!-- Supprimer (POUBELLE) -->
                    <button type="button" class="btn-icon-only btn-delete"
                            title="Supprimer le kit"
                            data-bs-toggle="modal"
                            data-bs-target="#deleteKitModal"
                            data-kit-id="{{ item.Kit.id }}"
                            data-kit-name="{{ item.Kit.nom }}">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/>
                        </svg>
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>

    {% else %}
        <!-- √âtat vide -->
        <div class="text-center py-5 bg-white rounded shadow-sm border">
            <div class="mb-3 text-muted">
                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 -960 960 960" fill="currentColor" style="opacity: 0.3;">
                    <path d="M80-160v-400q0-33 23.5-56.5T160-640h120v-80q0-33 23.5-56.5T360-800h240q33 0 56.5 23.5T680-720v80h120q33 0 56.5 23.5T880-560v400H80Zm240-480h320v-80H320v80Z"/>
                </svg>
            </div>
            <h3>Aucun kit cr√©√©</h3>
            <p class="text-muted">Cr√©ez des kits pour regrouper le mat√©riel (ex: TP Chimie, Dissection...).</p>
            <button type="button" class="btn btn-primary mt-2" data-bs-toggle="modal" data-bs-target="#addKitModal">
                Cr√©er mon premier kit
            </button>
        </div>
    {% endif %}
</div>

<!-- ================= MODALES ================= -->

<!-- Modale Ajout Kit -->
<div class="modal fade" id="addKitModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title"><i class="bi bi-box-seam me-2"></i>Nouveau Kit</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form action="{{ url_for('admin.ajouter_kit') }}" method="post">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <div class="mb-3">
                        <label class="form-label">Nom du kit *</label>
                        <input type="text" class="form-control" name="nom" required placeholder="Ex: TP Optique 6√®me">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Description</label>
                        <textarea class="form-control" name="description" rows="3" placeholder="D√©tails sur l'usage du kit..."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary">Cr√©er et configurer</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale Suppression Kit -->
<div class="modal fade" id="deleteKitModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-danger">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">Supprimer le kit</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form action="" method="post" id="deleteKitForm">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <div class="alert alert-danger">
                        Cette action est d√©finitive. Les objets contenus dans le kit ne seront pas supprim√©s de l'inventaire, mais le regroupement sera perdu.
                    </div>
                    <p class="mb-0">Voulez-vous vraiment supprimer le kit : <strong id="delete-kit-name"></strong> ?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-danger">Supprimer</button>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Gestion de la modale de suppression
    const deleteModal = document.getElementById('deleteKitModal');
    if (deleteModal) {
        deleteModal.addEventListener('show.bs.modal', function(event) {
            const button = event.relatedTarget;
            const kitId = button.dataset.kitId;
            const kitName = button.dataset.kitName;
            
            document.getElementById('deleteKitForm').action = `/admin/kits/supprimer/${kitId}`;
            document.getElementById('delete-kit-name').textContent = kitName;
        });
    }
});
</script>
{% endblock %}
--- END OF FILE templates/admin_kits.html ---

--- START OF FILE templates/admin_utilisateurs.html ---

{% extends "base.html" %}

{% block title %}Gestion des Utilisateurs - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te de page -->
    <div class="management-header">
        <h2 class="page-title h3 mb-0 d-flex align-items-center gap-3">
            <!-- Ic√¥ne Utilisateurs (Violet) -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="28" height="28" fill="currentColor">
                    <path d="M40-160v-112q0-34 17.5-62.5T104-378q62-31 126-46.5T360-440q66 0 130 15.5T616-378q29 15 46.5 43.5T680-272v112H40Zm720 0v-120q0-44-24.5-84.5T666-434q51 6 96 20.5t84 35.5q36 20 55 44.5t19 53.5v120H760ZM360-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm400-160q0 66-47 113t-113 47q-11 0-28-2.5t-28-5.5q27-32 41.5-71t14.5-81q0-42-14.5-81T544-792q14-5 28-6.5t28-1.5q66 0 113 47t47 113Z"/>
                </svg>
            </div>
            <span class="fw-bold text-dark">Gestion des Utilisateurs</span>
        </h2>
        
        {% if session.user_role == 'admin' %}
        <div class="page-actions-container">
            <button type="button" 
                    class="btn btn-primary" 
                    data-bs-toggle="modal" 
                    data-bs-target="#addUserModal">
                <i class="bi bi-person-plus-fill me-2"></i> 
                Ajouter un utilisateur
            </button>
        </div>
        {% endif %}
    </div>

    <!-- Liste des utilisateurs -->
    {% if utilisateurs and utilisateurs|length > 0 %}
        <div class="card-container management-page">
            {% for user in utilisateurs %}
            <div class="user-card">
                <!-- Avatar -->
                <div class="user-avatar">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor">
                        <path d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-160v-112q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q62 0 126 15.5T736-378q29 15.5 46.5 44T800-272v112H160Z"/>
                    </svg>
                </div>

                <!-- Informations -->
                <div class="user-info">
                    <h3 class="user-name">
                        {{ user.nom_utilisateur }}
                        {% if user.id|string == session.user_id|string %} 
                            <span class="badge bg-light text-dark border ms-1" style="font-size: 0.7em;">VOUS</span> 
                        {% endif %}
                    </h3>
                    <p class="user-email">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor">
                            <path d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm320-280L160-640v400h640v-400L480-440Zm0-80 320-200H160l320 200ZM160-640v-80 480-400Z"/>
                        </svg>
                        {{ user.email or 'Non d√©fini' }}
                    </p>
                    <span class="role-badge role-{{ user.role }}">
                        {% if user.role == 'admin' %}
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor">
                                <path d="m344-60-76-128-144-32 14-148-98-112 98-112-14-148 144-32 76-128 136 58 136-58 76 128 144 32-14 148 98 112-98 112 14 148-144 32-76 128-136-58-136 58Zm34-102 102-44 104 44 56-96 110-26-10-112 74-84-74-86 10-112-110-24-58-96-102 44-104-44-56 96-110 24 10 112-74 86 74 84-10 114 110 24 58 96Zm102-318Zm-42 142 226-226-56-58-170 170-86-84-56 56 142 142Z"/>
                            </svg>
                        {% endif %}
                        {{ user.role|capitalize }}
                    </span>
                </div>

                <!-- Actions (Style Restaur√©) -->
                <div class="user-actions">
                    <!-- 1. Modifier Email -->
                    <button class="btn-icon-only btn-edit"
                            title="Modifier l'e-mail"
                            data-bs-toggle="modal"
                            data-bs-target="#editEmailModal"
                            data-user-id="{{ user.id }}"
                            data-username="{{ user.nom_utilisateur }}"
                            data-email="{{ user.email or '' }}">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm280-280L200-640v440h560v-440L480-480Zm0-60 226-140H254l226 140Zm-280-60v560-560Z"/>
                        </svg>
                    </button>

                    <!-- 2. Reset MDP -->
                    <button class="btn-icon-only btn-reset"
                            title="R√©initialiser le mot de passe"
                            data-bs-toggle="modal"
                            data-bs-target="#resetPasswordModal"
                            data-user-id="{{ user.id }}"
                            data-username="{{ user.nom_utilisateur }}">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path d="M280-400q-33 0-56.5-23.5T200-480q0-33 23.5-56.5T280-560q33 0 56.5 23.5T360-480q0 33-23.5 56.5T280-400Zm0 160q-100 0-170-70T40-480q0-100 70-170t170-70q67 0 121.5 33t86.5 87h352l120 120-180 180-80-60-80 60-85-60h-47q-32 54-86.5 87T280-240Zm0-80q56 0 98.5-34t56.5-86h125l58 41 82-61 71 55 75-75-40-40H435q-14-52-56.5-86T280-640q-66 0-113 47t-47 113q0 66 47 113t113 47Z"/>
                        </svg>
                    </button>

                    <!-- 3. Promouvoir (Si pas soi-m√™me et pas admin) -->
                    {% if (user.id|string != session.user_id|string) and (user.role != 'admin') %}
                    <button class="btn-icon-only btn-promote"
                            title="Promouvoir Administrateur"
                            data-bs-toggle="modal"
                            data-bs-target="#promoteModal"
                            data-user-id="{{ user.id }}"
                            data-username="{{ user.nom_utilisateur }}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trophy" viewBox="0 0 16 16">
                          <path d="M2.5.5A.5.5 0 0 1 3 0h10a.5.5 0 0 1 .5.5q0 .807-.034 1.536a3 3 0 1 1-1.133 5.89c-.79 1.865-1.878 2.777-2.833 3.011v2.173l1.425.356c.194.048.377.135.537.255L13.3 15.1a.5.5 0 0 1-.3.9H3a.5.5 0 0 1-.3-.9l1.838-1.379c.16-.12.343-.207.537-.255L6.5 13.11v-2.173c-.955-.234-2.043-1.146-2.833-3.012a3 3 0 1 1-1.132-5.89A33 33 0 0 1 2.5.5m.099 2.54a2 2 0 0 0 .72 3.935c-.333-1.05-.588-2.346-.72-3.935m10.083 3.935a2 2 0 0 0 .72-3.935c-.133 1.59-.388 2.885-.72 3.935M3.504 1q.01.775.056 1.469c.13 2.028.457 3.546.87 4.667C5.294 9.48 6.484 10 7 10a.5.5 0 0 1 .5.5v2.61a1 1 0 0 1-.757.97l-1.426.356a.5.5 0 0 0-.179.085L4.5 15h7l-.638-.479a.5.5 0 0 0-.18-.085l-1.425-.356a1 1 0 0 1-.757-.97V10.5A.5.5 0 0 1 9 10c.516 0 1.706-.52 2.57-2.864.413-1.12.74-2.64.87-4.667q.045-.694.056-1.469z"/>
                        </svg>
                    </button>
                    {% endif %}

                    <!-- 4. Supprimer (Si pas soi-m√™me) -->
                    {% if user.id|string != session.user_id|string %}
                    <button class="btn-icon-only btn-delete-danger"
                            title="Supprimer l'utilisateur"
                            data-bs-toggle="modal"
                            data-bs-target="#deleteUserModal"
                            data-user-id="{{ user.id }}"
                            data-username="{{ user.nom_utilisateur }}">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/>
                        </svg>
                    </button>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>

    {% else %}
        <!-- √âtat vide -->
        <div class="empty-state-container">
            <div class="empty-state-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor">
                    <path d="M40-160v-112q0-34 17.5-62.5T104-378q62-31 126-46.5T360-440q66 0 130 15.5T616-378q29 15 46.5 43.5T680-272v112H40Zm720 0v-120q0-44-24.5-84.5T666-434q51 6 96 20.5t84 35.5q36 20 55 44.5t19 53.5v120H760ZM360-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm400-160q0 66-47 113t-113 47q-11 0-28-2.5t-28-5.5q27-32 41.5-71t14.5-81q0-42-14.5-81T544-792q14-5 28-6.5t28-1.5q66 0 113 47t47 113Z"/>
                </svg>
            </div>
            <h3>Aucun utilisateur enregistr√©</h3>
            <p>Commencez par ajouter votre premier utilisateur.</p>
            {% if session.user_role == 'admin' %}
            <button type="button" class="btn btn-primary mt-3" data-bs-toggle="modal" data-bs-target="#addUserModal">
                Ajouter le premier utilisateur
            </button>
            {% endif %}
        </div>
    {% endif %}
</div>

<!-- ================= MODALES ================= -->

<!-- Modale Ajout -->
<div class="modal fade" id="addUserModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title"><i class="bi bi-person-plus-fill me-2"></i>Nouvel utilisateur</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form action="{{ url_for('admin.ajouter_utilisateur') }}" method="post">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <div class="mb-3">
                        <label class="form-label">Nom d'utilisateur *</label>
                        <input type="text" class="form-control" name="nom_utilisateur" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" name="email">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Mot de passe *</label>
                        <input type="password" class="form-control" name="mot_de_passe" required minlength="6">
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="est_admin" id="checkAdmin">
                        <label class="form-check-label" for="checkAdmin">Acc√®s Administrateur</label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary">Cr√©er</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale Email -->
<div class="modal fade" id="editEmailModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Modifier l'e-mail</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form action="" method="post" id="editEmailForm">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <p>Utilisateur : <strong id="edit-email-username"></strong></p>
                    <div class="mb-3">
                        <label class="form-label">Nouvel e-mail</label>
                        <input type="email" class="form-control" id="edit_email" name="email" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale Reset MDP -->
<div class="modal fade" id="resetPasswordModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title"><i class="bi bi-shield-lock-fill me-2"></i>R√©initialiser le mot de passe</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form action="" method="post" id="resetPasswordForm" novalidate>
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <p class="mb-3">Utilisateur : <strong id="reset-password-username" class="text-primary"></strong></p>
                    
                    <!-- Nouveau Mot de passe -->
                    <div class="mb-3 position-relative">
                        <label class="form-label small fw-bold text-muted">Nouveau mot de passe</label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="reset_new_pass" name="nouveau_mot_de_passe" required>
                            <button class="btn btn-outline-secondary" type="button" onclick="togglePass('reset_new_pass')">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Confirmation -->
                    <div class="mb-3 position-relative">
                        <label class="form-label small fw-bold text-muted">Confirmer le mot de passe</label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="reset_confirm_pass" name="confirmation_mot_de_passe" required>
                            <button class="btn btn-outline-secondary" type="button" onclick="togglePass('reset_confirm_pass')">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Crit√®res de s√©curit√© (Feedback visuel) -->
                    <div class="card bg-light border-0 p-2">
                        <small class="fw-bold text-muted mb-1 d-block">Crit√®res de s√©curit√© :</small>
                        <ul class="list-unstyled mb-0 small" id="password-requirements-list">
                            <li id="rule-length" class="text-danger"><i class="bi bi-x-circle me-1"></i>12 caract√®res min.</li>
                            <li id="rule-upper" class="text-danger"><i class="bi bi-x-circle me-1"></i>1 Majuscule</li>
                            <li id="rule-lower" class="text-danger"><i class="bi bi-x-circle me-1"></i>1 Minuscule</li>
                            <li id="rule-number" class="text-danger"><i class="bi bi-x-circle me-1"></i>1 Chiffre</li>
                            <li id="rule-special" class="text-danger"><i class="bi bi-x-circle me-1"></i>1 Caract√®re sp√©cial</li>
                            <li id="rule-match" class="text-danger fw-bold mt-1"><i class="bi bi-x-circle me-1"></i>Mots de passe identiques</li>
                        </ul>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary" id="btn-submit-reset" disabled>Valider</button>
                </div>
            </form>
        </div>
    </div>
</div>
<script>
    // Petit helper pour l'oeil (afficher/masquer)
    function togglePass(id) {
        const input = document.getElementById(id);
        input.type = input.type === 'password' ? 'text' : 'password';
    }

    document.addEventListener('DOMContentLoaded', function() {
        const passInput = document.getElementById('reset_new_pass');
        const confirmInput = document.getElementById('reset_confirm_pass');
        const submitBtn = document.getElementById('btn-submit-reset');

        function validatePassword() {
            const val = passInput.value;
            const confirmVal = confirmInput.value;

            // Regex
            const hasLength = val.length >= 12;
            const hasUpper = /[A-Z]/.test(val);
            const hasLower = /[a-z]/.test(val);
            const hasNumber = /[0-9]/.test(val);
            const hasSpecial = /[^A-Za-z0-9]/.test(val);
            const isMatch = val === confirmVal && val.length > 0;

            // Mise √† jour UI
            updateRule('rule-length', hasLength);
            updateRule('rule-upper', hasUpper);
            updateRule('rule-lower', hasLower);
            updateRule('rule-number', hasNumber);
            updateRule('rule-special', hasSpecial);
            updateRule('rule-match', isMatch);

            // Activation du bouton seulement si TOUT est bon
            if (hasLength && hasUpper && hasLower && hasNumber && hasSpecial && isMatch) {
                submitBtn.disabled = false;
            } else {
                submitBtn.disabled = true;
            }
        }

        function updateRule(elementId, isValid) {
            const el = document.getElementById(elementId);
            const icon = el.querySelector('i');
            if (isValid) {
                el.classList.remove('text-danger');
                el.classList.add('text-success');
                icon.classList.remove('bi-x-circle');
                icon.classList.add('bi-check-circle-fill');
            } else {
                el.classList.remove('text-success');
                el.classList.add('text-danger');
                icon.classList.remove('bi-check-circle-fill');
                icon.classList.add('bi-x-circle');
            }
        }

        // √âcouteurs d'√©v√©nements
        if(passInput && confirmInput) {
            passInput.addEventListener('input', validatePassword);
            confirmInput.addEventListener('input', validatePassword);
        }
        
        // Reset du formulaire quand on ouvre la modale
        const resetModal = document.getElementById('resetPasswordModal');
        if(resetModal) {
            resetModal.addEventListener('show.bs.modal', function () {
                passInput.value = '';
                confirmInput.value = '';
                validatePassword(); // Pour remettre tout en rouge/d√©sactiv√©
            });
        }
    });
</script>

<!-- Modale Promotion -->
<div class="modal fade" id="promoteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-warning">
            <div class="modal-header bg-warning text-dark">
                <h5 class="modal-title"><i class="bi bi-exclamation-triangle-fill me-2"></i>Passation de Pouvoir</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form action="" method="post" id="promoteForm">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <p>Vous allez nommer <strong id="promote-username"></strong> Administrateur.</p>
                    <div class="alert alert-danger">
                        <strong>Attention :</strong> Vous perdrez vos droits d'administrateur.
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Votre mot de passe pour confirmer :</label>
                        <input type="password" class="form-control" name="password" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-warning">Confirmer</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale Suppression -->
<div class="modal fade" id="deleteUserModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-danger">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">Supprimer l'utilisateur</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form action="" method="post" id="deleteUserForm">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <div class="alert alert-danger">
                        Cette action est d√©finitive.
                    </div>
                    <p>Tapez le nom de l'utilisateur pour confirmer : <strong id="delete-username-to-match"></strong></p>
                    <input type="text" class="form-control" id="delete_confirm_input" required placeholder="Nom d'utilisateur">
                    <div id="delete_error_message" class="text-danger mt-2 small"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-danger">Supprimer</button>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    
    // Helper pour configurer les modales
    function setupModal(modalId, formId, actionBaseUrl, usernameFieldId, extraCallback) {
        const modal = document.getElementById(modalId);
        if (!modal) return;

        modal.addEventListener('show.bs.modal', function(event) {
            const button = event.relatedTarget;
            const userId = button.dataset.userId;
            const username = button.dataset.username;
            
            document.getElementById(formId).action = actionBaseUrl + userId;
            
            const usernameField = document.getElementById(usernameFieldId);
            if (usernameField) usernameField.textContent = username;

            if (extraCallback) extraCallback(button);
        });
    }

    // Configuration des modales
    setupModal('editEmailModal', 'editEmailForm', '/admin/utilisateurs/modifier_email/', 'edit-email-username', (btn) => {
        document.getElementById('edit_email').value = btn.dataset.email || '';
    });

    setupModal('resetPasswordModal', 'resetPasswordForm', '/admin/utilisateurs/reinitialiser_mdp/', 'reset-password-username', () => {
        document.getElementById('nouveau_mot_de_passe').value = '';
    });

    setupModal('promoteModal', 'promoteForm', '/admin/utilisateurs/promouvoir/', 'promote-username');

    // Suppression avec validation
    const deleteModal = document.getElementById('deleteUserModal');
    if (deleteModal) {
        let expectedUsername = '';
        deleteModal.addEventListener('show.bs.modal', function(event) {
            const button = event.relatedTarget;
            expectedUsername = button.dataset.username;
            document.getElementById('deleteUserForm').action = '/admin/utilisateurs/supprimer/' + button.dataset.userId;
            document.getElementById('delete-username-to-match').textContent = expectedUsername;
            document.getElementById('delete_confirm_input').value = '';
            document.getElementById('delete_error_message').textContent = '';
        });

        document.getElementById('deleteUserForm').addEventListener('submit', function(e) {
            const input = document.getElementById('delete_confirm_input');
            if (input.value.trim() !== expectedUsername) {
                e.preventDefault();
                document.getElementById('delete_error_message').textContent = "Le nom ne correspond pas.";
            }
        });
    }
});
</script>
{% endblock %}
--- END OF FILE templates/admin_utilisateurs.html ---

--- START OF FILE templates/alertes.html ---

{% extends "base.html" %}

{% block title %}Centre d'Alertes - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    
    <!-- Fil d'ariane -->
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te de page -->
    <div class="d-flex justify-content-between align-items-center mb-5 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #dc3545 0%, #ff6b6b 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                    <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                </svg>
            </div>
            <span class="fw-bold">Centre d'Alertes</span>
        </h2>
    </div>

    <!-- ======================================================= -->
    <!-- 1. SECTION SUGGESTIONS (PRIORITAIRE) -->
    <!-- ======================================================= -->
    <div id="suggestions" class="mb-5">
        <div class="d-flex align-items-center gap-2 mb-3">
            <h3 class="h5 fw-bold text-dark mb-0">Suggestions de Commande</h3>
            {% if suggestions %}
            <span class="badge bg-warning text-dark border border-warning-subtle rounded-pill">{{ suggestions|length }}</span>
            {% endif %}
        </div>

        {% if suggestions %}
        <div class="card border-0 shadow-sm rounded-3 overflow-hidden">
            <div class="table-responsive">
                <table class="table table-hover align-middle mb-0">
                    <thead class="table-light">
                        <tr>
                            <th style="width: 100px;">Date</th>
                            <th>Objet</th>
                            <th>Demand√© par</th>
                            <th class="text-center">Qt√©</th>
                            <th>Commentaire</th>
                            <th class="text-end" style="width: 120px;">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for s in suggestions %}
                        <tr>
                            <td class="text-muted small">{{ s.date_demande.strftime('%d/%m/%Y') }}</td>
                            <td>
                                <a href="{{ url_for('inventaire.voir_objet', objet_id=s.objet_id) }}" class="fw-bold text-decoration-none text-dark">
                                    {{ s.objet.nom }}
                                </a>
                                <div class="small text-muted">Stock actuel : {{ s.objet.quantite_physique }}</div>
                            </td>
                            <td>
                                <div class="d-flex align-items-center gap-2">
                                    <div class="rounded-circle bg-light d-flex align-items-center justify-content-center text-secondary border" style="width: 24px; height: 24px;">
                                        <i class="bi bi-person-fill" style="font-size: 0.7rem;"></i>
                                    </div>
                                    <span class="small">{{ s.utilisateur.nom_utilisateur }}</span>
                                </div>
                            </td>
                            <td class="text-center">
                                <span class="badge bg-warning text-dark border border-warning-subtle fs-6">+{{ s.quantite }}</span>
                            </td>
                            <td class="text-muted fst-italic small">{{ s.commentaire or '-' }}</td>
                            <td class="text-end">
                                <div class="d-flex justify-content-end gap-2">
                                    <!-- Valider -->
                                    <button type="button" class="btn btn-sm btn-success" 
                                            title="Valider (Marquer comme trait√©)"
                                            onclick="window.traiterSuggestion({{ s.id }}, 'valider')">
                                        <i class="bi bi-check-lg"></i>
                                    </button>
                                    
                                    <!-- Refuser -->
                                    <button type="button" class="btn btn-sm btn-outline-danger" 
                                            title="Refuser la suggestion"
                                            onclick="window.traiterSuggestion({{ s.id }}, 'refuser')">
                                        <i class="bi bi-x-lg"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        {% else %}
        <div class="alert alert-light border text-center py-4 text-muted shadow-sm">
            <i class="bi bi-inbox fs-3 d-block mb-2 opacity-25"></i>
            Aucune suggestion en attente.
        </div>
        {% endif %}
    </div>

    <!-- ======================================================= -->
    <!-- 2. SECTION STOCK CRITIQUE -->
    <!-- ======================================================= -->
    <div class="mb-5">
        <div class="d-flex align-items-center gap-2 mb-3">
            <h3 class="h5 fw-bold text-danger mb-0">Ruptures de Stock & Seuils</h3>
            {% if objets_stock %}
            <span class="badge bg-danger rounded-pill">{{ objets_stock|length }}</span>
            {% endif %}
        </div>

        {% if objets_stock %}
        <div class="row g-3">
            {% for objet in objets_stock %}
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 border-danger border-opacity-25 shadow-sm">
                    <div class="card-body d-flex align-items-center gap-3">
                        <div class="flex-grow-1">
                            <h6 class="card-title mb-1 fw-bold text-dark">{{ objet.nom }}</h6>
                            <div class="small text-muted mb-2">
                                {{ objet.armoire.nom if objet.armoire else 'Sans armoire' }}
                            </div>
                            <div class="d-flex align-items-center gap-2">
                                <span class="badge bg-danger">Stock: {{ objet.quantite_physique }}</span>
                                <span class="badge bg-light text-dark border">Seuil: {{ objet.seuil }}</span>
                            </div>
                        </div>
                        <a href="{{ url_for('inventaire.voir_objet', objet_id=objet.id) }}" class="btn btn-sm btn-outline-danger">
                            <i class="bi bi-eye"></i>
                        </a>
                    </div>
                    <!-- Barre de progression visuelle -->
                    <div class="progress" style="height: 4px;">
                        {% set percent = (objet.quantite_physique / objet.seuil * 100) if objet.seuil > 0 else 0 %}
                        <div class="progress-bar bg-danger" role="progressbar" style="width: {{ percent }}%"></div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="alert alert-success border-0 shadow-sm d-flex align-items-center">
            <i class="bi bi-check-circle-fill fs-4 me-3"></i>
            <div>
                <strong>Tout va bien !</strong>
                <div class="small">Aucun objet n'est en dessous de son seuil d'alerte.</div>
            </div>
        </div>
        {% endif %}
    </div>

    <!-- ======================================================= -->
    <!-- 3. SECTION P√âREMPTION -->
    <!-- ======================================================= -->
    <div class="mb-5">
        <div class="d-flex align-items-center gap-2 mb-3">
            <h3 class="h5 fw-bold text-warning-emphasis mb-0">Produits P√©rim√©s ou Bient√¥t P√©rim√©s</h3>
            {% if objets_peremption %}
            <span class="badge bg-warning text-dark rounded-pill">{{ objets_peremption|length }}</span>
            {% endif %}
        </div>

        {% if objets_peremption %}
        <div class="card border-0 shadow-sm rounded-3 overflow-hidden">
            <div class="table-responsive">
                <table class="table table-hover align-middle mb-0">
                    <thead class="table-light">
                        <tr>
                            <th>Objet</th>
                            <th>Date P√©remption</th>
                            <th>√âtat</th>
                            <th class="text-end">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for objet in objets_peremption %}
                        <tr>
                            <td class="fw-bold">{{ objet.nom }}</td>
                            <td>{{ objet.date_peremption.strftime('%d/%m/%Y') }}</td>
                            <td>
                                {% if objet.date_peremption < date_actuelle.date() %}
                                    <span class="badge bg-danger">P√©rim√©</span>
                                {% else %}
                                    <span class="badge bg-warning text-dark">Bient√¥t</span>
                                {% endif %}
                            </td>
                            <td class="text-end">
                                <a href="{{ url_for('inventaire.voir_objet', objet_id=objet.id) }}" class="btn btn-sm btn-outline-secondary">
                                    G√©rer
                                </a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        {% else %}
        <div class="alert alert-success border-0 shadow-sm d-flex align-items-center">
            <i class="bi bi-check-circle-fill fs-4 me-3"></i>
            <div>
                <strong>Aucun produit p√©rim√©.</strong>
                <div class="small">Votre stock est frais et √† jour.</div>
            </div>
        </div>
        {% endif %}
    </div>

</div>

<!-- Modale de Confirmation Dynamique -->
<div class="modal fade" id="confirmationModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header text-white" id="modal-header-bg">
                <h5 class="modal-title" id="modal-title">Confirmation</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
                <p class="mb-0 fs-5" id="modal-message">Voulez-vous vraiment effectuer cette action ?</p>
            </div>
            <div class="modal-footer bg-light border-0">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Annuler</button>
                <button type="button" class="btn" id="btn-confirm-action">Confirmer</button>
            </div>
        </div>
    </div>
</div>

<!-- SCRIPT CORRIG√â -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    let currentSuggestionId = null;
    let currentAction = null;
    
    // Initialisation de la modale Bootstrap
    const modalElement = document.getElementById('confirmationModal');
    const confirmationModal = new bootstrap.Modal(modalElement);
    
    const confirmBtn = document.getElementById('btn-confirm-action');
    const modalHeader = document.getElementById('modal-header-bg');
    const modalTitle = document.getElementById('modal-title');
    const modalMessage = document.getElementById('modal-message');

    // 1. Fonction appel√©e au clic sur le bouton du tableau
    // On l'attache √† window pour qu'elle soit accessible depuis le HTML onclick
    window.traiterSuggestion = function(id, action) {
        currentSuggestionId = id;
        currentAction = action;

        // Configuration visuelle selon l'action
        if (action === 'valider') {
            modalHeader.className = 'modal-header text-white bg-success';
            modalTitle.innerHTML = '<i class="bi bi-check-circle-fill me-2"></i>Valider la demande';
            modalMessage.textContent = "Voulez-vous valider cette suggestion de commande ?";
            confirmBtn.className = 'btn btn-success';
            confirmBtn.textContent = "Oui, Valider";
        } else {
            modalHeader.className = 'modal-header text-white bg-danger';
            modalTitle.innerHTML = '<i class="bi bi-trash-fill me-2"></i>Refuser la demande';
            modalMessage.textContent = "Voulez-vous refuser et supprimer cette suggestion ?";
            confirmBtn.className = 'btn btn-danger';
            confirmBtn.textContent = "Oui, Refuser";
        }

        confirmationModal.show();
    };

    // 2. Fonction appel√©e au clic sur "Confirmer" dans la modale
    confirmBtn.addEventListener('click', function() {
        if (!currentSuggestionId || !currentAction) return;

        // √âtat de chargement
        confirmBtn.disabled = true;
        confirmBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Traitement...';

        fetch(`/api/traiter_suggestion/${currentSuggestionId}/${currentAction}`, {
            method: 'POST',
            headers: {'X-CSRFToken': "{{ csrf_token() }}"}
        }).then(res => {
            if(res.ok) {
                window.location.reload();
            } else {
                alert("Erreur lors du traitement.");
                confirmBtn.disabled = false;
                confirmBtn.textContent = "R√©essayer";
            }
        });
    });
});
</script>

{% endblock %}
--- END OF FILE templates/alertes.html ---

--- START OF FILE templates/armoire.html ---

{% extends "base.html" %}

{% block title %}Armoire : {{ armoire.nom }}{% endblock %}

{% block content %}

    <div class="main-container">
        <!-- Fil d'ariane Modernis√© -->
        {% include '_breadcrumb.html' %}
        
        <!-- En-t√™te Armoire (Style Admin - Vert) -->
        <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
            <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
                <!-- Ic√¥ne Armoire (Vert Nature) -->
                <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                     style="width: 48px; height: 48px; background: linear-gradient(135deg, #198754 0%, #20c997 100%);">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-box2-fill" viewBox="0 0 16 16">
                        <path d="M3.75 0a1 1 0 0 0-.8.4L.1 4.2a.5.5 0 0 0-.1.3V15a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V4.5a.5.5 0 0 0-.1-.3L13.05.4a1 1 0 0 0-.8-.4zM15 4.667V5H1v-.333L1.5 4h6V1h1v3h6z"/>
                    </svg>
                </div>
                <span>Contenu de l'armoire : <strong class="text-success">{{ armoire.nom }}</strong></span>
            </h2>
        </div>

        <!-- Contenu de l'inventaire -->
        <div id="inventory-content" 
             data-sort-by="{{ sort_by }}" 
             data-direction="{{ direction }}" 
             data-armoire-id="{{ armoire.id }}">
            
            {% include '_inventaire_content.html' %}
        </div>

        <!-- Barre d'action de masse (Modernis√©e) -->
        {% if session.user_role == 'admin' %}
        <div id="bulk-action-section" class="card border-0 shadow-sm mt-4 bg-light" style="display: none;">
            <div class="card-body d-flex align-items-center flex-wrap gap-3">
                <div class="d-flex align-items-center text-primary">
                    <i class="bi bi-check-square-fill fs-4 me-2"></i>
                    <span class="fw-bold">Action group√©e</span>
                </div>
                
                <div class="d-flex align-items-center gap-2 flex-grow-1">
                    <label for="move-destination" class="text-nowrap">D√©placer la s√©lection vers :</label>
                    <select id="move-destination" class="form-select w-auto" style="min-width: 200px;">
                        <option value="" disabled selected>Choisir une autre armoire...</option>
                        {% for autre_armoire in autres_armoires %}
                            <option value="{{ autre_armoire.id }}">{{ autre_armoire.nom }}</option>
                        {% endfor %}
                    </select>
                    <button id="bulk-move-btn" class="btn btn-primary">
                        <i class="bi bi-arrow-right-circle me-2"></i>D√©placer
                    </button>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
{% endblock %}

{% block scripts %}

{% endblock %}
--- END OF FILE templates/armoire.html ---

--- START OF FILE templates/base.html ---

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <title>{% block title %}LabFlow{% endblock %}</title>
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block head_styles %}{% endblock %}
</head>
<body>
    <!-- 1. Stockage invisible des messages Flash (pour le JS) -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div id="flash-messages-storage" style="display: none;">
                {% for category, message in messages %}
                    <!-- On normalise les cat√©gories (danger -> error) pour notre fonction showToast -->
                    <div class="flash-data" 
                         data-category="{{ 'error' if category == 'danger' else category }}" 
                         data-message="{{ message }}"></div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <!-- 2. Structure de la page -->
    {% include 'header.html' %}
    {% include 'sub_header.html' %}

    <main class="main-content">
        {% block content %}{% endblock %}
    </main>
	
    {% include 'footer.html' %}
    
    <!-- 3. Modales Globales -->
    {% include '_modals.html' %}

    <!-- 4. √âl√©ments du Tour Guid√© (Cach√©s par d√©faut via CSS) -->
    <div id="tour-overlay" class="tour-overlay"></div>
    <div id="tour-tooltip" class="tour-tooltip">
        <div id="tour-title" class="tour-title"></div>
        <div id="tour-content" class="tour-content"></div>
        <div class="tour-actions">
            <button id="tour-btn-skip" class="tour-btn-skip">Passer</button>
            <button id="tour-btn-next" class="tour-btn-next">Suivant</button>
        </div>
    </div>
	
    <!-- 5. Conteneur des Toasts (Notifications) -->
    <div class="toast-container position-fixed top-0 start-0 p-3" style="z-index: 11000;"></div>

    <!-- 6. Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- script.js contient d√©sormais showToast() et la logique globale -->
    <script src="{{ url_for('static', filename='js/script.js') }}" defer></script>
    
    <!-- Script inline pour d√©clencher les toasts au chargement de la page -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const flashData = document.querySelectorAll('.flash-data');
            flashData.forEach(item => {
                // Appel de la fonction globale d√©finie dans script.js
                if (typeof showToast === 'function') {
                    showToast(item.dataset.message, item.dataset.category);
                }
            });
        });
    </script>
	<script type="module" src="{{ url_for('static', filename='js/modules/booking-modal.js') }}"></script>

    {% block scripts %}{% endblock %}
</body>
</html>
--- END OF FILE templates/base.html ---

--- START OF FILE templates/budget.html ---

{% extends "base.html" %}

{% block title %}Gestion des √âch√©ances - LabFlow{% endblock %}

{% block content %}

<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <!-- Ic√¥ne Budget (Bleu/Vert) -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #48c6ef 0%, #6f86d6 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="28" height="28" fill="currentColor">
                    <path d="M600-120q-118 0-210-67T260-360H120v-80h122q-2-11-2-20v-40q0-9 2-20H120v-80h140q38-106 130-173t210-67q69 0 130.5 24T840-748l-70 70q-35-29-78.5-45.5T600-740q-75 0-136.5 38.5T370-600h230v80H344q-2 11-3 20t-1 20q0 11 1 20t3 20h256v80H370q32 63 93.5 101.5T600-220q48 0 92.5-16.5T770-282l70 70q-48 44-109.5 68T600-120Z"/>
                </svg>
            </div>
            <span class="fw-bold">Suivi Budg√©taire</span>
        </h2>
    </div>

    <div class="row g-4">
        <!-- COLONNE GAUCHE : Synth√®se & Actions -->
        <div class="col-lg-4">
            <!-- Carte Synth√®se -->
            <div class="budget-summary-card mb-4">
                <h5 class="d-flex align-items-center gap-2 mb-3 text-dark fw-bold">
                    <i class="bi bi-pie-chart-fill text-primary"></i>
                    Synth√®se {{ annee_selectionnee | annee_scolaire }}
                </h5>
                
                {% if budget_affiche %}
                    <ul class="budget-stat-list">
                        <li class="budget-stat-item">
                            <span class="stat-label">Budget Initial</span>
                            <span class="stat-value val-neutral">{{ "%.2f"|format(budget_affiche.montant_initial) }} ‚Ç¨</span>
                        </li>
                        <li class="budget-stat-item">
                            <span class="stat-label">D√©penses Totales</span>
                            <span class="stat-value val-negative">- {{ "%.2f"|format(total_depenses) }} ‚Ç¨</span>
                        </li>
                        <li class="budget-stat-item pt-3 border-top border-2">
                            <span class="stat-label fw-bold text-dark">Solde Restant</span>
                            <span class="stat-value {% if solde >= 0 %}val-positive{% else %}val-negative{% endif %}">
                                {{ "%.2f"|format(solde) }} ‚Ç¨
                            </span>
                        </li>
                    </ul>
                {% else %}
                    <div class="alert alert-warning text-center small">
                        Aucun budget d√©fini pour cette ann√©e.
                    </div>
                {% endif %}

                <div class="budget-actions">
                    <button class="btn btn-primary w-100" 
                            data-bs-toggle="modal" 
                            data-bs-target="#budgetModal"
                            onclick="setupBudgetModal('{{ budget_actuel_pour_modales.annee if budget_actuel_pour_modales else annee_proposee_pour_creation }}', '{{ '%.2f'|format(budget_actuel_pour_modales.montant_initial) if budget_actuel_pour_modales else '0.00' }}')">
                        <i class="bi bi-pencil-square me-2"></i>
                        {% if budget_actuel_pour_modales %}Modifier le Budget{% else %}D√©finir le Budget{% endif %}
                    </button>
                    
                    <button class="btn btn-success w-100" 
                            data-bs-toggle="modal" 
                            data-bs-target="#depenseModal"
                            onclick="resetDepenseModal()"
                            {% if not budget_actuel_pour_modales %}disabled{% endif %}>
                        <i class="bi bi-plus-circle me-2"></i>Ajouter une D√©pense
                    </button>

                    {% if budget_affiche and not budget_affiche.cloture %}
                        {% if cloture_autorisee %}
                            <form action="{{ url_for('admin.cloturer_budget') }}" method="post" onsubmit="return confirm('√ätes-vous s√ªr de vouloir cl√¥turer ce budget ? Cette action est irr√©versible.');">
                                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                <input type="hidden" name="budget_id" value="{{ budget_affiche.id }}">
                                <button type="submit" class="btn btn-outline-danger w-100 mt-2">
                                    <i class="bi bi-lock-fill me-2"></i>Cl√¥turer l'ann√©e
                                </button>
                            </form>
                        {% else %}
                            <button class="btn btn-outline-secondary w-100 mt-2" disabled title="Possible √† partir du 01/06">
                                <i class="bi bi-lock me-2"></i>Cl√¥ture (d√®s juin)
                            </button>
                        {% endif %}
                    {% endif %}
                </div>
            </div>

            <!-- Carte Export -->
            <div class="budget-summary-card">
                <h5 class="d-flex align-items-center gap-2 mb-3 text-dark fw-bold">
                    <i class="bi bi-file-earmark-arrow-down-fill text-secondary"></i>
                    Exporter les D√©penses
                </h5>
                <div class="export-zone">
                    <div class="mb-2">
                        <label class="form-label small text-muted">P√©riode</label>
                        <div class="input-group input-group-sm mb-2">
                            <span class="input-group-text">Du</span>
                            {% set annee_debut = now.year if now.month >= 8 else now.year - 1 %}
                            <input type="date" id="date_debut_export" class="form-control" value="{{ '%s-09-01'|format(annee_debut) }}">
                        </div>
                        <div class="input-group input-group-sm">
                            <span class="input-group-text">Au</span>
                            <input type="date" id="date_fin_export" class="form-control" value="{{ now.strftime('%Y-%m-%d') }}">
                        </div>
                    </div>
                    <div class="d-flex gap-2 mt-3">
                        <button class="btn btn-sm btn-outline-dark flex-grow-1" onclick="exportData('pdf')">
                            <i class="bi bi-file-pdf me-1"></i>PDF
                        </button>
                        <button class="btn btn-sm btn-outline-success flex-grow-1" onclick="exportData('excel')">
                            <i class="bi bi-file-excel me-1"></i>Excel
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- COLONNE DROITE : Tableau D√©penses -->
        <div class="col-lg-8">
            <div class="card border-0 shadow-sm rounded-3 overflow-hidden h-100">
                <div class="card-header bg-white py-3 d-flex justify-content-between align-items-center">
                    <h5 class="mb-0 text-dark fw-bold">D√©tail des D√©penses</h5>
                    
                    <!-- S√©lecteur d'ann√©e -->
                    {% if budgets_archives %}
                    <form action="{{ url_for('admin.budget') }}" method="get" class="d-flex align-items-center gap-2">
                        <label for="annee_select" class="small text-muted mb-0">Ann√©e :</label>
                        <select name="annee" id="annee_select" class="form-select form-select-sm" onchange="this.form.submit()" style="width: auto;">
                            {% for ba in budgets_archives %}
                                <option value="{{ ba.annee }}" {% if ba.annee == annee_selectionnee %}selected{% endif %}>
                                    {{ ba.annee | annee_scolaire }}
                                    {% if ba.cloture %}(Cl√¥tur√©){% else %}(Actif){% endif %}
                                </option>
                            {% endfor %}
                        </select>
                    </form>
                    {% endif %}
                </div>

                <div class="table-responsive">
                    <table class="budget-table mb-0">
                        <thead>
                            <tr>
                                <th style="width: 100px;">Date</th>
                                <th>Fournisseur</th>
                                <th>Libell√©</th>
                                <th class="text-end" style="width: 100px;">Montant</th>
                                <th class="text-end" style="width: 100px;">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if depenses %}
                                {% for depense in depenses %}
                                <tr>
                                    <td>{{ depense.date_depense.strftime('%d/%m/%Y') }}</td>
                                    <td>
                                        {% if depense.est_bon_achat %}
                                            <span class="badge bg-light text-dark border"><i class="bi bi-ticket-perforated me-1"></i>Bon d'achat</span>
                                        {% else %}
                                            <span class="fw-medium text-dark">{{ depense.fournisseur.nom if depense.fournisseur else 'N/A' }}</span>
                                        {% endif %}
                                    </td>
                                    <td class="text-muted small">{{ depense.contenu }}</td>
                                    <td class="text-end fw-bold text-danger">- {{ "%.2f"|format(depense.montant) }} ‚Ç¨</td>
                                    <td class="text-end">
                                        <div class="d-flex justify-content-end gap-1">
                                            <button class="btn btn-sm btn-outline-primary btn-icon-only" 
                                                    title="Modifier"
                                                    onclick='openEditDepenseModal({{ depense.id }}, "{{ depense.date_depense }}", "{{ depense.fournisseur_id or "" }}", {{ "true" if depense.est_bon_achat else "false" }}, "{{ depense.contenu|replace('"', '&quot;') }}", "{{ depense.montant }}")'>
                                                <i class="bi bi-pencil-fill"></i>
                                            </button>
                                            
                                            <button class="btn btn-sm btn-outline-danger btn-icon-only" 
                                                    title="Supprimer"
                                                    data-bs-toggle="modal" 
                                                    data-bs-target="#deleteModal"
                                                    data-url="{{ url_for('admin.supprimer_depense', id=depense.id) }}">
                                                <i class="bi bi-trash-fill"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr>
                                    <td colspan="5" class="text-center py-5 text-muted">
                                        <i class="bi bi-receipt display-4 d-block mb-3 opacity-25"></i>
                                        Aucune d√©pense enregistr√©e pour cette ann√©e.
                                    </td>
                                </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modale Budget (D√©finir/Modifier) -->
<div class="modal fade" id="budgetModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title"><i class="bi bi-cash-coin me-2"></i>Budget Annuel</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form action="{{ url_for('admin.definir_budget') }}" method="post">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <div class="mb-3">
                        <label class="form-label">Ann√©e de d√©but (ex: 2025 pour 2025-2026)</label>
                        <input type="number" class="form-control" name="annee" id="budgetAnnee" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Montant Initial (‚Ç¨)</label>
                        <input type="number" step="0.01" class="form-control" name="montant_initial" id="budgetMontant" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale D√©pense (Ajout/Modif) -->
<div class="modal fade" id="depenseModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title" id="depenseModalTitle"><i class="bi bi-cart-plus me-2"></i>Nouvelle D√©pense</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form id="depenseForm" action="{{ url_for('admin.ajouter_depense') }}" method="post">
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <input type="hidden" name="budget_id" value="{{ budget_actuel_pour_modales.id if budget_actuel_pour_modales }}">
                    
                    <div class="mb-3">
                        <label class="form-label">Date</label>
                        <input type="date" class="form-control" name="date_depense" id="depenseDate" required value="{{ now.strftime('%Y-%m-%d') }}">
                    </div>

                    <div class="mb-3">
                        <div class="form-check form-switch mb-2">
                            <input class="form-check-input" type="checkbox" name="est_bon_achat" id="checkBonAchat" onchange="toggleFournisseur()">
                            <label class="form-check-label" for="checkBonAchat">C'est un Bon d'achat (Petit mat√©riel)</label>
                        </div>
                        
                        <div id="divFournisseur">
                            <label class="form-label">Fournisseur</label>
                            <select class="form-select" name="fournisseur_id" id="selectFournisseur">
                                <option value="">-- Choisir --</option>
                                {% for f in fournisseurs %}
                                    <option value="{{ f.id }}">{{ f.nom }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Libell√© / Contenu</label>
                        <textarea class="form-control" name="contenu" id="depenseContenu" rows="2" required></textarea>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Montant (‚Ç¨)</label>
                        <input type="number" step="0.01" class="form-control" name="montant" id="depenseMontant" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-success">Valider</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale Suppression -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">Supprimer la d√©pense</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p>Voulez-vous vraiment supprimer cette d√©pense ? Le montant sera recr√©dit√© au budget.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <form id="deleteForm" method="post" action="">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn btn-danger">Supprimer</button>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    // Gestion dynamique du champ Fournisseur
    function toggleFournisseur() {
        const isBonAchat = document.getElementById('checkBonAchat').checked;
        const divFournisseur = document.getElementById('divFournisseur');
        const selectFournisseur = document.getElementById('selectFournisseur');
        
        if (isBonAchat) {
            divFournisseur.style.display = 'none';
            selectFournisseur.required = false;
            selectFournisseur.value = "";
        } else {
            divFournisseur.style.display = 'block';
            selectFournisseur.required = true;
        }
    }

    // Pr√©pa Modale Budget
    function setupBudgetModal(annee, montant) {
        document.getElementById('budgetAnnee').value = annee;
        document.getElementById('budgetMontant').value = montant;
    }

    // Reset Modale D√©pense (Ajout)
    function resetDepenseModal() {
        document.getElementById('depenseModalTitle').innerHTML = '<i class="bi bi-cart-plus me-2"></i>Nouvelle D√©pense';
        document.getElementById('depenseForm').action = "{{ url_for('admin.ajouter_depense') }}";
        document.getElementById('depenseDate').value = new Date().toISOString().split('T')[0];
        document.getElementById('checkBonAchat').checked = false;
        document.getElementById('depenseContenu').value = '';
        document.getElementById('depenseMontant').value = '';
        toggleFournisseur();
        
        // Reset select
        document.getElementById('selectFournisseur').value = "";
    }

    // Pr√©pa Modale D√©pense (Modif)
    function openEditDepenseModal(id, date, fournisseurId, isBonAchat, contenu, montant) {
        const modal = new bootstrap.Modal(document.getElementById('depenseModal'));
        modal.show();

        document.getElementById('depenseModalTitle').innerHTML = '<i class="bi bi-pencil-square me-2"></i>Modifier la D√©pense';
        document.getElementById('depenseForm').action = "/admin/budget/depense/modifier/" + id;
        
        document.getElementById('depenseDate').value = date.split(' ')[0]; // Garde YYYY-MM-DD
        document.getElementById('checkBonAchat').checked = isBonAchat;
        document.getElementById('depenseContenu').value = contenu;
        document.getElementById('depenseMontant').value = montant;
        
        toggleFournisseur(); // Met √† jour l'affichage
        
        if (!isBonAchat) {
            document.getElementById('selectFournisseur').value = fournisseurId;
        }
    }

    // Suppression
    const deleteModal = document.getElementById('deleteModal');
    if (deleteModal) {
        deleteModal.addEventListener('show.bs.modal', function(event) {
            const button = event.relatedTarget;
            const url = button.dataset.url;
            document.getElementById('deleteForm').action = url;
        });
    }

    // Export (Redirection simple)
    function exportData(format) {
        // 1. R√©cup√©ration des valeurs des champs date
        const dateDebut = document.getElementById('date_debut_export').value;
        const dateFin = document.getElementById('date_fin_export').value;
        
        // 2. Validations basiques c√¥t√© client
        if (!dateDebut || !dateFin) {
            alert("Veuillez s√©lectionner une date de d√©but et une date de fin.");
            return;
        }

        if (dateDebut > dateFin) {
            alert("La date de d√©but ne peut pas √™tre post√©rieure √† la date de fin.");
            return;
        }

        // 3. Construction de l'URL vers la route Flask
        // On passe les param√®tres en GET query string
        const url = `/admin/budget/exporter?format=${format}&date_debut=${dateDebut}&date_fin=${dateFin}`;
        
        // 4. D√©clenchement du t√©l√©chargement
        // Le navigateur va suivre le lien, le serveur va renvoyer le fichier (attachment),
        // et l'utilisateur restera sur la page actuelle.
        window.location.href = url;
    }
</script>
{% endblock %}
--- END OF FILE templates/budget.html ---

--- START OF FILE templates/budget_voir.html ---

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Consultation du Budget</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    {% include 'header.html' %}
    <div class="main-container">
        <div class="management-header">
            <h2 class="page-title">
                <svg class="page-title-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M600-120q-118 0-210-67T260-360H120v-80h122q-2-11-2-20v-40q0-9 2-20H120v-80h140q38-106 130-173t210-67q69 0 130.5 24T840-748l-70 70q-35-29-78.5-45.5T600-740q-75 0-136.5 38.5T370-600h230v80H344q-2 11-3 20t-1 20q0 11 1 20t3 20h256v80H370q32 63 93.5 101.5T600-220q48 0 92.5-16.5T770-282l70 70q-48 44-109.5 68T600-120Z"/></svg>
                <span>Suivi Budg√©taire</span>
            </h2>
        </div>

        <div class="budget-grid">
            <!-- Colonne de gauche : Synth√®se -->
            <div class="budget-summary-col">
                <div class="content-card">
                    <h3 class="card-title-icon">
                        <svg class="card-title-svg" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M600-120q-118 0-210-67T260-360H120v-80h122q-2-11-2-20v-40q0-9 2-20H120v-80h140q38-106 130-173t210-67q69 0 130.5 24T840-748l-70 70q-35-29-78.5-45.5T600-740q-75 0-136.5 38.5T370-600h230v80H344q-2 11-3 20t-1 20q0 11 1 20t3 20h256v80H370q32 63 93.5 101.5T600-220q48 0 92.5-16.5T770-282l70 70q-48 44-109.5 68T600-120Z"/></svg>
                        Synth√®se Ann√©e {{ budget_actuel.annee if budget_actuel else 'N/A' }}
                    </h3>
                    {% if budget_actuel %}
                        <ul class="stat-list">
                            <li><span>Budget Initial</span> <span class="stat-value positive">{{ "%.2f"|format(budget_actuel.montant_initial) }} ‚Ç¨</span></li>
                            <li><span>D√©penses Totales</span> <span class="stat-value negative">{{ "%.2f"|format(total_depenses) }} ‚Ç¨</span></li>
                            <li class="solde"><span>Solde Restant</span> <span class="stat-value {% if solde >= 0 %}positive{% else %}negative{% endif %}">{{ "%.2f"|format(solde) }} ‚Ç¨</span></li>
                        </ul>
                    {% else %}
                        <p class="text-discret">Aucun budget n'a √©t√© d√©fini pour l'ann√©e en cours.</p>
                    {% endif %}
                </div>
            </div>

            <!-- Colonne de droite : Liste des d√©penses -->
            <div class="budget-details-col">
                <div class="content-card">
                    <h3 class="card-title-icon">
                        <svg class="card-title-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M360-200v-80h480v80H360Zm0-240v-80h480v80H360Zm0-240v-80h480v80H360ZM200-160q-33 0-56.5-23.5T120-240q0-33 23.5-56.5T200-320q33 0 56.5 23.5T280-240q0 33-23.5 56.5T200-160Zm0-240q-33 0-56.5-23.5T120-480q0-33 23.5-56.5T200-560q33 0 56.5 23.5T280-480q0 33-23.5 56.5T200-400Zm0-240q-33 0-56.5-23.5T120-720q0-33 23.5-56.5T200-800q33 0 56.5 23.5T280-720q0 33-23.5 56.5T200-640Z"/></svg>
                        D√©tail des D√©penses
                    </h3>
                    <div class="table-container">
                        <table class="objet-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Fournisseur</th>
                                    <th>Contenu de la commande</th>
                                    <th>Montant</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for depense in depenses %}
                                <tr>
                                    <td>{{ depense.date_depense | strftime('%d/%m/%Y') }}</td>
                                    <td>{{ depense.fournisseur_nom or 'N/A' }}</td>
                                    <td style="text-align: left;">{{ depense.contenu }}</td>
                                    <td class="negative">{{ "%.2f"|format(depense.montant) }} ‚Ç¨</td>
                                </tr>
                                {% else %}
                                <tr>
                                    <td colspan="4" class="text-discret" style="padding: 20px;">Aucune d√©pense enregistr√©e pour ce budget.</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% include 'footer.html' %}
</body>
</html>
--- END OF FILE templates/budget_voir.html ---

--- START OF FILE templates/calendrier.html ---

{% extends "base.html" %}
{% block title %}Calendrier de R√©servation{% endblock %}
{% block content %}
    <div class="main-container">
        {% include '_breadcrumb.html' %}
        <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
			<h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
				<!-- Ic√¥ne Calendrier (Orange) -->
				<div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
					 style="width: 48px; height: 48px; background: linear-gradient(135deg, #fd7e14 0%, #fcc419 100%);">
					<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-calendar2-week-fill" viewBox="0 0 16 16">
						<path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5m9.954 3H2.545c-.3 0-.545.224-.545.5v1c0 .276.244.5.545.5h10.91c.3 0 .545-.224.545-.5v-1c0-.276-.244-.5-.546-.5M8.5 7a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM3 10.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5m3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"/>
					</svg>
				</div>
				<span class="fw-bold">Calendrier de R√©servation</span>
			</h2>
			
			<!-- (Si tu as des boutons d'action pour le calendrier, ils vont ici) -->
		</div>
			<div id="calendrier-container" class="content-card">
				<div class="calendrier-header">
					<button id="prev-month-btn" class="btn btn-primary btn-sm">&lt; Pr√©c√©dent</button>
					<h3 id="current-month-year"></h3>
					<button id="next-month-btn" class="btn btn-primary btn-sm">Suivant &gt;</button>
				</div>
				<div class="calendrier-grid"></div>
			</div>
		</div>
    <div id="reservation-tooltip" class="tooltip"></div>
{% endblock %}
{% block scripts %}
    <script src="{{ url_for('static', filename='js/modules/calendar-monthly.js') }}" type="module"></script>
{% endblock %}
--- END OF FILE templates/calendrier.html ---

--- START OF FILE templates/categorie.html ---

{% extends "base.html" %}

{% block title %}Cat√©gorie : {{ categorie.nom }} - LabFlow{% endblock %}

{% block content %}
    <div class="main-container">
        <!-- Fil d'ariane -->
         {% include '_breadcrumb.html' %}

        <!-- En-t√™te Cat√©gorie (Style Admin - Rose) -->
        <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
            <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
                <!-- Ic√¥ne Cat√©gorie (Rose Vif) -->
                <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                     style="width: 48px; height: 48px; background: linear-gradient(135deg, #f77062 0%, #fe5196 100%);">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-inboxes-fill" viewBox="0 0 16 16">
                        <path d="M4.98 1a.5.5 0 0 0-.39.188L1.54 5H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0A.5.5 0 0 1 10 5h4.46l-3.05-3.812A.5.5 0 0 0 11.02 1zM3.81.563A1.5 1.5 0 0 1 4.98 0h6.04a1.5 1.5 0 0 1 1.17.563l3.7 4.625a.5.5 0 0 1 .106.374l-.39 3.124A1.5 1.5 0 0 1 14.117 10H1.883A1.5 1.5 0 0 1 .394 8.686l-.39-3.124a.5.5 0 0 1 .106-.374zM.125 11.17A.5.5 0 0 1 .5 11H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0 .5.5 0 0 1 .5-.5h5.5a.5.5 0 0 1 .496.562l-.39 3.124A1.5 1.5 0 0 1 14.117 16H1.883a1.5 1.5 0 0 1-1.489-1.314l-.39-3.124a.5.5 0 0 1 .121-.393z"/>
                    </svg>
                </div>
                <!-- CORRECTION ICI : categorie.nom -->
                <span>Objets dans la cat√©gorie : <strong style="color: #fe5196;">{{ categorie.nom }}</strong></span>
            </h2>
        </div>

        <!-- Contenu de l'inventaire -->
        <div id="inventory-content" 
             data-sort-by="{{ sort_by }}" 
             data-direction="{{ direction }}" 
             data-categorie-id="{{ categorie.id }}">
            
            {% include '_inventaire_content.html' %}
        </div>

        <!-- Barre d'action de masse (Modernis√©e) -->
        {% if session.user_role == 'admin' %}
        <div id="bulk-action-section" class="card border-0 shadow-sm mt-4 bg-light" style="display: none;">
            <div class="card-body d-flex align-items-center flex-wrap gap-3">
                <div class="d-flex align-items-center text-primary">
                    <i class="bi bi-check-square-fill fs-4 me-2"></i>
                    <span class="fw-bold">Action group√©e</span>
                </div>
                
                <div class="d-flex align-items-center gap-2 flex-grow-1">
                    <label for="move-destination" class="text-nowrap">D√©placer la s√©lection vers :</label>
                    <select id="move-destination" class="form-select w-auto" style="min-width: 200px;">
                        <option value="" disabled selected>Choisir une autre cat√©gorie...</option>
                        {% for c in categories_list %}
                            <!-- CORRECTION ICI : c.id != categorie.id -->
                            {% if c.id != categorie.id %}
                                <option value="{{ c.id }}">{{ c.nom }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                    <button id="bulk-move-btn" class="btn btn-primary">
                        <i class="bi bi-arrow-right-circle me-2"></i>D√©placer
                    </button>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
{% endblock %}

{% block scripts %}
    <!-- Cette page n'a pas besoin de script de type "module" sp√©cifique -->
{% endblock %}
--- END OF FILE templates/categorie.html ---

--- START OF FILE templates/footer.html ---

<footer class="site-footer">
  <div class="footer-content">

    <!-- Section Auteurs (inchang√©e) -->
    <div class="footer-section">
      <div class="footer-title">
        <svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
        <h4>Auteurs</h4>
      </div>
      <p>Yll Basha<br>Xavier De Baudry d'Asson<br>(Enseignants SVT)</p>
    </div>

    <!-- Section Mentions L√©gales (inchang√©e) -->
    <div class="footer-section">
      <div class="footer-title">
        <svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
        <h4>Mentions l√©gales</h4>
      </div>
      <p>Application interne de gestion de mat√©riel<br>
         Version p√©dagogique sous licence :</p>
		<div class="license-icons">
			<img src="{{ url_for('static', filename='icons/by-nc-nd.eu.svg') }}" alt="Licence CC-BY-NC-ND" class="cc-license-full">
		</div>
    </div>

    <!-- NOUVEAU : Section "Liens Utiles" -->
    <div class="footer-section">
      <div class="footer-title">
        <svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg>
        <h4>Liens utiles</h4>
      </div>
      <p><a href="mailto:contact.gmlcl@gmail.com">Contact</a></p>
      <!-- Le lien "√Ä Propos" est maintenant ici et visible par tous -->
      <p><a href="{{ url_for('main.a_propos') }}">√Ä Propos</a></p>
    </div>

    <!-- Section Administration (l√©g√®rement modifi√©e) -->
    <div class="footer-section">
      <div class="footer-title">
        <svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>
        <h4>Administration</h4>
      </div>
      <p><a href="{{ url_for('admin.admin') }}">Acc√®s r√©serv√©</a></p>
    </div>
  </div>

  <div class="footer-bottom">
    &#169; 2025 LabFlow &#64; ac-nancy-metz.fr
  </div>
  
	{# --- D√âBUT DE LA STRUCTURE DU TUTORIEL GUID√â --- #}
		<div id="tour-overlay" class="tour-overlay"></div>
		<div id="tour-tooltip" class="tour-tooltip">
			<div id="tour-title" class="tour-title"></div>
			<div id="tour-content" class="tour-content"></div>
			<div class="tour-actions">
				<button id="tour-skip-btn" class="tour-btn-skip">Passer</button>
				<button id="tour-next-btn" class="tour-btn-next">Suivant</button>
			</div>
		</div>
	{# --- FIN DE LA STRUCTURE DU TUTORIEL GUID√â --- #}
</footer>
--- END OF FILE templates/footer.html ---

--- START OF FILE templates/fournisseurs.html ---

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Nos Fournisseurs</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    {% include 'header.html' %}
    <div class="main-container">
        <div class="management-header">
            <h2 class="page-title">
                <svg class="page-title-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M240-160q-50 0-85-35t-35-85H40v-440q0-33 23.5-56.5T120-800h560v160h120l120 160v200h-80q0 50-35 85t-85 35q-50 0-85-35t-35-85H360q0 50-35 85t-85 35Zm0-80q17 0 28.5-11.5T280-280q0-17-11.5-28.5T240-320q-17 0-28.5 11.5T200-280q0 17 11.5 28.5T240-240ZM120-360h32q17-18 39-29t49-11q27 0 49 11t39 29h272v-360H120v360Zm600 120q17 0 28.5-11.5T760-280q0-17-11.5-28.5T720-320q-17 0-28.5 11.5T680-280q0 17 11.5 28.5T720-240Zm-40-200h170l-90-120h-80v120ZM360-540Z"/></svg>
                <span>Nos Fournisseurs</span>
            </h2>
        </div>

        <div class="card-container management-page">
            {% for f in fournisseurs %}
            <a href="{{ f.site_web or '#' }}" target="_blank" class="fournisseur-card-link">
                <div class="item-card fournisseur-card">
                    {% if f.logo %}
                        <img src="{{ url_for('static', filename='images/fournisseurs/' + f.logo) }}" alt="Logo de {{ f.nom }}" class="fournisseur-logo">
                    {% else %}
                        <div class="fournisseur-logo-placeholder">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h480q33 0 56.5 23.5T800-800v640q0 33-23.5 56.5T720-80H240Zm0-80h480v-640H240v640Z"/></svg>
                        </div>
                    {% endif %}
                    <div class="card-info">
                        <span class="card-title"><strong>{{ f.nom }}</strong></span>
                        <span class="card-description">{{ f.site_web or 'Site web non disponible' }}</span>
                    </div>
                </div>
            </a>
            {% else %}
                <p>Aucun fournisseur n'a √©t√© configur√© pour le moment.</p>
            {% endfor %}
        </div>
    </div>
    {% include 'footer.html' %}
</body>
</html>
--- END OF FILE templates/fournisseurs.html ---

--- START OF FILE templates/gestion_armoires.html ---

{% extends "base.html" %}

{% block title %}Gestion des Armoires - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te de page -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <!-- Ic√¥ne Armoires (Vert/Teal) -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #198754 0%, #20c997 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-box2-fill" viewBox="0 0 16 16">
                    <path d="M3.75 0a1 1 0 0 0-.8.4L.1 4.2a.5.5 0 0 0-.1.3V15a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V4.5a.5.5 0 0 0-.1-.3L13.05.4a1 1 0 0 0-.8-.4zM15 4.667V5H1v-.333L1.5 4h6V1h1v3h6z"/>
                </svg>
            </div>
            <span class="fw-bold">Gestion des Armoires</span>
        </h2>
        
        {% if session.user_role == 'admin' %}
        <div>
            <button type="button" 
                    class="btn btn-primary" 
                    data-bs-toggle="modal" 
                    data-bs-target="#addArmoireModal">
                <i class="bi bi-plus-circle-fill me-2"></i> 
                Ajouter une armoire
            </button>
        </div>
        {% endif %}
    </div>

    <!-- Liste des armoires ou √©tat vide -->
    {% if armoires %}
        <div class="card-container management-page" role="list">
            {% for armoire in armoires %}
            <article class="item-card" data-armoire-id="{{ armoire.id }}" role="listitem">
                <!-- Vue normale -->
                <div class="card-info">
                    <a href="{{ url_for('inventaire.voir_armoire', armoire_id=armoire.id) }}" 
                       class="card-title-link"
                       aria-label="Voir le contenu de {{ armoire.nom }}">
                        <span class="card-title">{{ armoire.nom }}</span>
                    </a>
                    <span class="card-count" aria-label="Nombre d'objets">
                        {% if armoire.count == 0 %}
                            Aucun objet
                        {% elif armoire.count == 1 %}
                            1 objet
                        {% else %}
                            {{ armoire.count }} objets
                        {% endif %}
                    </span>
                </div>

                <!-- Mode √©dition (masqu√© par d√©faut) -->
                <div class="edit-mode" style="display: none;">
                    <input type="text" 
                           value="{{ armoire.nom }}" 
                           class="edit-input"
                           aria-label="Modifier le nom de l'armoire"
                           maxlength="100">
                    <button type="button" 
                            class="save-btn" 
                            data-id="{{ armoire.id }}" 
                            title="Enregistrer les modifications"
                            aria-label="Enregistrer">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                            <path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/>
                        </svg>
                    </button>
                    <button type="button" 
                            class="cancel-btn" 
                            title="Annuler les modifications"
                            aria-label="Annuler">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                            <path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/>
                        </svg>
                    </button>
                </div>

                <!-- Actions -->
                <div class="card-actions">
                    <a href="{{ url_for('inventaire.voir_armoire', armoire_id=armoire.id) }}" 
                       class="action-btn" 
                       title="Voir le contenu de {{ armoire.nom }}"
                       aria-label="Voir le contenu">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                            <path d="M260-320q47 0 91.5 10.5T440-278v-394q-41-24-87-36t-93-12q-36 0-71.5 7T120-692v396q35-12 69.5-18t70.5-6Zm260 42q44-21 88.5-31.5T700-320q36 0 70.5 6t69.5 18v-396q-33-14-68.5-21t-71.5-7q-47 0-93 12t-87 36v394Zm-40 118q-48-38-104-59t-116-21q-42 0-82.5 11T100-198q-21 11-40.5-1T40-234v-482q0-11 5.5-21T62-752q46-24 96-36t102-12q58 0 113.5 15T480-740q51-30 106.5-45T700-800q52 0 102 12t96 36q11 5 16.5 15t5.5 21v482q0 23-19.5 35t-40.5 1q-37-20-77.5-31T700-240q-60 0-116 21t-104 59ZM280-494Z"/>
                        </svg>
                    </a>
                    
                    {% if session.user_role == 'admin' %}
                    <button type="button" 
                            class="action-btn edit-btn" 
                            title="Modifier le nom de {{ armoire.nom }}"
                            aria-label="Modifier le nom">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                            <path d="M167-120q-21 5-36.5-10.5T120-167l40-191 198 198-191 40Zm191-40L160-358l458-458q23-23 57-23t57 23l84 84q23 23 23 57t-23 57L358-160Zm317-600L261-346l85 85 414-414-85-85Z"/>
                        </svg>
                    </button>
                    
                    <form action="{{ url_for('admin.supprimer', type_objet='armoire', id=armoire.id) }}" 
                          method="post" 
                          class="delete-form-interactive" 
                          data-item-type="armoire" 
                          data-item-name="{{ armoire.nom }}">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <button type="button" 
                                class="action-btn delete-btn" 
                                title="Supprimer {{ armoire.nom }}"
                                aria-label="Supprimer l'armoire">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                                <path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/>
                            </svg>
                        </button>
                    </form>
                    {% endif %}
                </div>
            </article>
            {% endfor %}
        </div>

    {% else %}
        <!-- √âtat vide -->
        <div class="empty-state-container" role="status">
            <div class="empty-state-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor">
                    <path d="M360-440q-17 0-28.5-11.5T320-480q0-17 11.5-28.5T360-520q17 0 28.5 11.5T400-480q0 17-11.5 28.5T360-440Zm240 0q-17 0-28.5-11.5T560-480q0-17 11.5-28.5T600-520q17 0 28.5 11.5T640-480q0 17-11.5 28.5T600-440ZM120-120v-80h40v-560q0-33 23.5-56.5T240-840h480q33 0 56.5 23.5T800-760v560h40v80H120Zm120-80h200v-560H240v560Zm280 0h200v-560H520v560Zm-40-320Z"/>
                </svg>
            </div>
            <h3>Aucune armoire n'a √©t√© cr√©√©e</h3>
            <p>Commencez par ajouter votre premi√®re armoire pour organiser votre mat√©riel.</p>
            {% if session.user_role == 'admin' %}
            <button type="button" 
                    class="btn btn-primary mt-3" 
                    data-bs-toggle="modal" 
                    data-bs-target="#addArmoireModal"
                    aria-label="Ajouter la premi√®re armoire">
                Ajouter la premi√®re armoire
            </button>
            {% endif %}
        </div>
    {% endif %}
</div>

<!-- Modale d'ajout d'armoire (Bootstrap 5) -->
<div class="modal fade" 
     id="addArmoireModal" 
     tabindex="-1" 
     aria-labelledby="addArmoireModalLabel" 
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addArmoireModalLabel">
                    <i class="bi bi-folder-plus me-2"></i>
                    Ajouter une nouvelle armoire
                </h5>
                <button type="button" 
                        class="btn-close" 
                        data-bs-dismiss="modal" 
                        aria-label="Fermer"></button>
            </div>
            <form action="{{ url_for('admin.ajouter') }}" 
                  method="post" 
                  id="addArmoireForm"
                  novalidate>
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <input type="hidden" name="type" value="armoire">
                    
                    <div class="mb-3">
                        <label for="nomArmoire" class="form-label">
                            Nom de l'armoire <span class="text-danger">*</span>
                        </label>
                        <input type="text" 
                               class="form-control" 
                               id="nomArmoire" 
                               name="nom" 
                               placeholder="Ex: Armoire Chimie A"
                               required 
                               maxlength="100"
                               autocomplete="off"
                               aria-describedby="nomArmoireHelp">
                        <div id="nomArmoireHelp" class="form-text">
                            Choisissez un nom descriptif pour identifier facilement cette armoire.
                        </div>
                        <div class="invalid-feedback">
                            Veuillez entrer un nom pour l'armoire.
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" 
                            class="btn btn-secondary" 
                            data-bs-dismiss="modal">
                        Annuler
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-check-circle me-1"></i>
                        Ajouter l'armoire
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale de danger pour suppression -->
{% include '_modale_danger.html' %}

{% endblock %}

{% block scripts %}
<script>
// Validation du formulaire d'ajout
(function() {
    'use strict';
    const form = document.getElementById('addArmoireForm');
    if (form) {
        form.addEventListener('submit', function(event) {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }
            form.classList.add('was-validated');
        });
        
        // R√©initialiser la validation quand on ferme la modale
        const modal = document.getElementById('addArmoireModal');
        if (modal) {
            modal.addEventListener('hidden.bs.modal', function() {
                form.classList.remove('was-validated');
                form.reset();
            });
        }
    }
})();
</script>
{% endblock %}
--- END OF FILE templates/gestion_armoires.html ---

--- START OF FILE templates/gestion_categories.html ---

{% extends "base.html" %}

{% block title %}Gestion des Cat√©gories - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te de page -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <!-- Ic√¥ne Cat√©gories (Violet/Rose) -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #654ea3 0%, #eaafc8 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-inboxes-fill" viewBox="0 0 16 16">
                    <path d="M4.98 1a.5.5 0 0 0-.39.188L1.54 5H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0A.5.5 0 0 1 10 5h4.46l-3.05-3.812A.5.5 0 0 0 11.02 1zM3.81.563A1.5 1.5 0 0 1 4.98 0h6.04a1.5 1.5 0 0 1 1.17.563l3.7 4.625a.5.5 0 0 1 .106.374l-.39 3.124A1.5 1.5 0 0 1 14.117 10H1.883A1.5 1.5 0 0 1 .394 8.686l-.39-3.124a.5.5 0 0 1 .106-.374zM.125 11.17A.5.5 0 0 1 .5 11H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0 .5.5 0 0 1 .5-.5h5.5a.5.5 0 0 1 .496.562l-.39 3.124A1.5 1.5 0 0 1 14.117 16H1.883a1.5 1.5 0 0 1-1.489-1.314l-.39-3.124a.5.5 0 0 1 .121-.393z"/>
                </svg>
            </div>
            <span class="fw-bold">Gestion des Cat√©gories</span>
        </h2>
        
        {% if session.user_role == 'admin' %}
        <div>
            <button type="button" 
                    class="btn btn-primary" 
                    data-bs-toggle="modal" 
                    data-bs-target="#addCategorieModal">
                <i class="bi bi-plus-circle-fill me-2"></i> 
                Ajouter une cat√©gorie
            </button>
        </div>
        {% endif %}
    </div>

    <!-- Liste des cat√©gories ou √©tat vide -->
    {% if categories %}
        <div class="card-container management-page" role="list">
            {% for categorie in categories %}
            <div class="item-card" data-categorie-id="{{ categorie.id }}" role="listitem">
                <!-- Vue normale -->
                <div class="card-info">
                    <a href="{{ url_for('inventaire.voir_categorie', categorie_id=categorie.id) }}" 
                       class="card-title-link"
                       aria-label="Voir le contenu de {{ categorie.nom }}">
                        <span class="card-title">{{ categorie.nom }}</span>
                    </a>
                    <span class="card-count" aria-label="Nombre d'objets">
                        {% if categorie.count == 0 %}
                            Aucun objet
                        {% elif categorie.count == 1 %}
                            1 objet
                        {% else %}
                            {{ categorie.count }} objets
                        {% endif %}
                    </span>
                </div>

                <!-- Mode √©dition (masqu√© par d√©faut) -->
                <div class="edit-mode" style="display: none;">
                    <input type="text" 
                           value="{{ categorie.nom }}" 
                           class="edit-input"
                           aria-label="Modifier le nom de la cat√©gorie"
                           maxlength="100">
                    <button type="button" 
                            class="save-btn" 
                            data-id="{{ categorie.id }}" 
                            title="Enregistrer les modifications"
                            aria-label="Enregistrer">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                            <path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/>
                        </svg>
                    </button>
                    <button type="button" 
                            class="cancel-btn" 
                            title="Annuler les modifications"
                            aria-label="Annuler">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                            <path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/>
                        </svg>
                    </button>
                </div>

                <!-- Actions -->
                <div class="card-actions">
                    <a href="{{ url_for('inventaire.voir_categorie', categorie_id=categorie.id) }}" 
                       title="Voir le contenu de {{ categorie.nom }}"
                       aria-label="Voir le contenu">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                            <path d="M260-320q47 0 91.5 10.5T440-278v-394q-41-24-87-36t-93-12q-36 0-71.5 7T120-692v396q35-12 69.5-18t70.5-6Zm260 42q44-21 88.5-31.5T700-320q36 0 70.5 6t69.5 18v-396q-33-14-68.5-21t-71.5-7q-47 0-93 12t-87 36v394Zm-40 118q-48-38-104-59t-116-21q-42 0-82.5 11T100-198q-21 11-40.5-1T40-234v-482q0-11 5.5-21T62-752q46-24 96-36t102-12q58 0 113.5 15T480-740q51-30 106.5-45T700-800q52 0 102 12t96 36q11 5 16.5 15t5.5 21v482q0 23-19.5 35t-40.5 1q-37-20-77.5-31T700-240q-60 0-116 21t-104 59ZM280-494Z"/>
                        </svg>
                    </a>
                    
                    {% if session.user_role == 'admin' %}
                    <span class="edit-btn" 
                          title="Modifier le nom de {{ categorie.nom }}"
                          aria-label="Modifier le nom">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                            <path d="M167-120q-21 5-36.5-10.5T120-167l40-191 198 198-191 40Zm191-40L160-358l458-458q23-23 57-23t57 23l84 84q23 23 23 57t-23 57L358-160Zm317-600L261-346l85 85 414-414-85-85Z"/>
                        </svg>
                    </span>
                    
                    <form action="{{ url_for('admin.supprimer', type_objet='categorie', id=categorie.id) }}" 
                          method="post" 
                          class="delete-form-interactive" 
                          data-item-type="categorie" 
                          data-item-name="{{ categorie.nom }}">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <button type="button" 
                                class="delete-btn" 
                                title="Supprimer {{ categorie.nom }}"
                                aria-label="Supprimer la cat√©gorie">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                                <path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/>
                            </svg>
                        </button>
                    </form>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>

    {% else %}
        <!-- √âtat vide -->
        <div class="empty-state-container" role="status">
            <div class="empty-state-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor">
                    <path d="M160-480v240-480 240Zm400 360q17 0 28.5-11.5T600-160q0-17-11.5-28.5T560-200q-17 0-28.5 11.5T520-160q0 17 11.5 28.5T560-120Zm240-400q17 0 28.5-11.5T840-560q0-17-11.5-28.5T800-600q-17 0-28.5 11.5T760-560q0 17 11.5 28.5T800-520Zm-560 0h200v-80H240v80Zm0 160h200v-80H240v80Zm-80 200q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720H160v480h200v80H160ZM560-40q-50 0-85-35t-35-85q0-39 22.5-70t57.5-43v-127h240v-47q-35-12-57.5-43T680-560q0-50 35-85t85-35q50 0 85 35t35 85q0 39-22.5 70T840-447v127H600v47q35 12 57.5 43t22.5 70q0 50-35 85t-85 35Z"/>
                </svg>
            </div>
            <h3>Aucune cat√©gorie n'a √©t√© cr√©√©e</h3>
            <p>Commencez par ajouter votre premi√®re cat√©gorie pour classer votre mat√©riel.</p>
            {% if session.user_role == 'admin' %}
            <button type="button" 
                    class="btn btn-primary mt-3" 
                    data-bs-toggle="modal" 
                    data-bs-target="#addCategorieModal"
                    aria-label="Ajouter la premi√®re cat√©gorie">
                Ajouter la premi√®re cat√©gorie
            </button>
            {% endif %}
        </div>
    {% endif %}
</div>

<!-- Modale d'ajout de cat√©gorie (Bootstrap 5) -->
<div class="modal fade" 
     id="addCategorieModal" 
     tabindex="-1" 
     aria-labelledby="addCategorieModalLabel" 
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addCategorieModalLabel">
                    <i class="bi bi-tag-fill me-2"></i>
                    Ajouter une nouvelle cat√©gorie
                </h5>
                <button type="button" 
                        class="btn-close" 
                        data-bs-dismiss="modal" 
                        aria-label="Fermer"></button>
            </div>
            <form action="{{ url_for('admin.ajouter') }}" 
                  method="post" 
                  id="addCategorieForm"
                  novalidate>
                <div class="modal-body">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <input type="hidden" name="type" value="categorie">
                    
                    <div class="mb-3">
                        <label for="nomCategorie" class="form-label">
                            Nom de la cat√©gorie <span class="text-danger">*</span>
                        </label>
                        <input type="text" 
                               class="form-control" 
                               id="nomCategorie" 
                               name="nom" 
                               placeholder="Ex: Verrerie, Chimie organique, √âlectronique..."
                               required 
                               maxlength="100"
                               autocomplete="off"
                               aria-describedby="nomCategorieHelp">
                        <div id="nomCategorieHelp" class="form-text">
                            Choisissez un nom descriptif pour identifier facilement cette cat√©gorie.
                        </div>
                        <div class="invalid-feedback">
                            Veuillez entrer un nom pour la cat√©gorie.
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" 
                            class="btn btn-secondary" 
                            data-bs-dismiss="modal">
                        Annuler
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-check-circle me-1"></i>
                        Ajouter la cat√©gorie
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modale de danger pour suppression -->
{% include '_modale_danger.html' %}

{% endblock %}

{% block scripts %}
<script>
// Validation du formulaire d'ajout
(function() {
    'use strict';
    const form = document.getElementById('addCategorieForm');
    if (form) {
        form.addEventListener('submit', function(event) {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }
            form.classList.add('was-validated');
        });
        
        // R√©initialiser la validation quand on ferme la modale
        const modal = document.getElementById('addCategorieModal');
        if (modal) {
            modal.addEventListener('hidden.bs.modal', function() {
                form.classList.remove('was-validated');
                form.reset();
            });
        }
    }
})();
</script>
{% endblock %}
--- END OF FILE templates/gestion_categories.html ---

--- START OF FILE templates/header.html ---

<header class="app-header">
    <div class="header-container">
        <div class="header-brand">
			<a href="{{ url_for('inventaire.index') }}">
				<h1>{{ nom_etablissement or 'Mon Espace' }}</h1>
				<p class="brand-subtitle">LabFlow</p>
			</a>
		</div>
        <div class="header-right">
            <div class="search-wrapper" id="search-wrapper-dropdown">
				<svg class="search-icon-dropdown" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
					<path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/>
				</svg>
				<input type="text" 
					   id="globalSearchInput" 
					   class="search-input-dropdown"
					   placeholder="Rechercher un objet, un code-barre..." 
					   autocomplete="off">
				<button class="search-clear-btn" id="clear-btn-dropdown">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
						<path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
					</svg>
				</button>
				
				<!-- Conteneur des r√©sultats -->
				<div id="globalSearchResults" class="dropdown-results">
					<!-- Les r√©sultats seront inject√©s ici par JS -->
				</div>
			</div>
            
            <a href="{{ url_for('main.panier') }}" class="header-icon-link" title="Panier de r√©servation">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="header-icon" viewBox="0 0 16 16">
					<path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
				</svg>
				<span id="cart-count-badge" class="cart-count-badge" style="display: none;">0</span>
			</a>
            
            <a href="{{ url_for('main.alertes') }}" class="header-icon-link text-white" title="Alertes">
    
    <!-- SVG Bootstrap Icons (bi-bell-fill) -->
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" 
         class="header-icon 
         {% if alertes_total > 3 %}
             bell-critical
         {% elif alertes_total > 0 %}
             bell-warning
         {% endif %}" 
         viewBox="0 0 16 16">
        <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2m.995-14.901a1 1 0 1 0-1.99 0A5 5 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901"/>
    </svg>
    
    <!-- Pastille (R√©utilisation exacte du style Panier) -->
    {% if alertes_total and alertes_total > 0 %}
    <span class="cart-count-badge pulse" data-count="{{ alertes_total }}">
        {{ alertes_total }}
    </span>
    {% endif %}
</a>

            <div class="auth-section">
                {% if session.user_id %}
                    <a href="{{ url_for('auth.profil') }}" class="header-icon-link" title="G√©rer mon profil">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="header-icon" viewBox="0 0 16 16">
        <path d="M7.068.727c.243-.97 1.62-.97 1.864 0l.071.286a.96.96 0 0 0 1.622.434l.205-.211c.695-.719 1.888-.03 1.613.931l-.08.284a.96.96 0 0 0 1.187 1.187l.283-.081c.96-.275 1.65.918.931 1.613l-.211.205a.96.96 0 0 0 .434 1.622l.286.071c.97.243.97 1.62 0 1.864l-.286.071a.96.96 0 0 0-.434 1.622l.211.205c.719.695.03 1.888-.931 1.613l-.284-.08a.96.96 0 0 0-1.187 1.187l.081.283c.275.96-.918 1.65-1.613.931l-.205-.211a.96.96 0 0 0-1.622.434l-.071.286c-.243.97-1.62.97-1.864 0l-.071-.286a.96.96 0 0 0-1.622-.434l-.205.211c-.695.719-1.888.03-1.613-.931l.08-.284a.96.96 0 0 0-1.186-1.187l-.284.081c-.96.275-1.65-.918-.931-1.613l.211-.205a.96.96 0 0 0-.434-1.622l-.286-.071c-.97-.243-.97-1.62 0-1.864l.286-.071a.96.96 0 0 0 .434-1.622l-.211-.205c-.719-.695-.03-1.888.931-1.613l.284.08a.96.96 0 0 0 1.187-1.186l-.081-.284c-.275-.96.918-1.65 1.613-.931l.205.211a.96.96 0 0 0 1.622-.434zM12.973 8.5H8.25l-2.834 3.779A4.998 4.998 0 0 0 12.973 8.5m0-1a4.998 4.998 0 0 0-7.557-3.779l2.834 3.78zM5.048 3.967l-.087.065zm-.431.355A4.98 4.98 0 0 0 3.002 8c0 1.455.622 2.765 1.615 3.678L7.375 8zm.344 7.646.087.065z"/>
    </svg></a>
                    <span class="welcome-message">Bonjour, {{ session.username }}</span>
                    <a href="{{ url_for('auth.logout') }}" class="btn btn-sm btn-outline-light">Se d√©connecter</a>
                {% else %}
                    <a href="{{ url_for('auth.login') }}" class="auth-link">Connexion</a>
                {% endif %}
            </div>
        </div>
    </div>
</header>
--- END OF FILE templates/header.html ---

--- START OF FILE templates/index.html ---

{% extends "base.html" %}

{% block title %}Tableau de Bord - LabFlow{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- En-t√™te Principal -->
    <div class="d-flex justify-content-between align-items-center mb-5 pb-3 border-bottom">
        <h1 class="h2 mb-0 text-dark d-flex align-items-center gap-3">
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 56px; height: 56px; background: linear-gradient(135deg, #1f3b73 0%, #2c3e50 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-motherboard-fill" viewBox="0 0 16 16">
                    <path d="M5 7h3V4H5z"/>
                    <path d="M1 2a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-2H.5a.5.5 0 0 1-.5-.5v-1A.5.5 0 0 1 .5 9H1V8H.5a.5.5 0 0 1-.5-.5v-1A.5.5 0 0 1 .5 6H1V5H.5a.5.5 0 0 1-.5-.5v-2A.5.5 0 0 1 .5 2zm11 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0zm2 0a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0zM3.5 10a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zM4 4h-.5a.5.5 0 0 0 0 1H4v1h-.5a.5.5 0 0 0 0 1H4a1 1 0 0 0 1 1v.5a.5.5 0 0 0 1 0V8h1v.5a.5.5 0 0 0 1 0V8a1 1 0 0 0 1-1h.5a.5.5 0 0 0 0-1H9V5h.5a.5.5 0 0 0 0-1H9a1 1 0 0 0-1-1v-.5a.5.5 0 0 0-1 0V3H6v-.5a.5.5 0 0 0-1 0V3a1 1 0 0 0-1 1m7 7.5v1a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 0-.5.5"/>
                </svg>
            </div>
            <span class="fw-bold">Tableau de Bord</span>
        </h1>
    </div>

    <div class="row g-4">
		<div class="col-12 col-md-6 col-lg-4">
            <div class="widget-card shadow-sm" style="border-top: 4px solid #ffc107;">
                <div class="widget-header bg-white border-bottom p-3 d-flex align-items-center gap-3">
                    <!-- Ic√¥ne Ambre -->
                    <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                         style="width: 48px; height: 48px; background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); flex-shrink: 0;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-cart-plus-fill" viewBox="0 0 16 16">
                            <path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0M9 5.5V7h1.5a.5.5 0 0 1 0 1H9v1.5a.5.5 0 0 1-1 0V8H6.5a.5.5 0 0 1 0-1H8V5.5a.5.5 0 0 1 1 0"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="h5 mb-0 fw-bold text-dark">Suggestions</h3>
                        {% if data.suggestions %}
                        <span class="badge bg-warning text-dark border border-warning-subtle rounded-pill">
                            {{ data.suggestions|length }} en attente
                        </span>
                        {% endif %}
                    </div>
                </div>
                
                <div class="widget-body p-0 flex-grow-1">
                    {% if data.suggestions %}
                        <ul class="list-group list-group-flush">
                        {% for s in data.suggestions %}
                            <li class="list-group-item p-3 d-flex justify-content-between align-items-center">
                                <div class="d-flex align-items-center gap-2 overflow-hidden">
                                    <div class="rounded-circle bg-light border d-flex align-items-center justify-content-center text-secondary" 
                                         style="width: 28px; height: 28px; flex-shrink: 0;" 
                                         title="Demand√© par {{ s.utilisateur.nom_utilisateur }}">
                                        <i class="bi bi-person-fill small"></i>
                                    </div>
                                    <div class="text-truncate">
                                        <span class="fw-bold text-dark d-block text-truncate">{{ s.objet.nom }}</span>
                                        <small class="text-muted">{{ s.date_demande|strftime('%d/%m') }}</small>
                                    </div>
                                </div>
                                <span class="badge bg-warning-subtle text-dark border border-warning-subtle rounded-pill fs-6">
                                    +{{ s.quantite }}
                                </span>
                            </li>
                        {% endfor %}
                        </ul>
                    {% else %}
                        <div class="text-center text-muted py-5">
                            <i class="bi bi-check2-circle display-4 opacity-25"></i>
                            <p class="mb-0 mt-2">Aucune demande en attente.</p>
                        </div>
                    {% endif %}
                </div>
                
                <div class="widget-footer p-3 bg-light border-top mt-auto">
                    <!-- LE LIEN MAGIQUE AVEC ANCRE #suggestions -->
                    <a href="{{ url_for('main.alertes') }}#suggestions" class="btn btn-warning w-100 fw-bold text-dark">
                        <i class="bi bi-check-circle-fill me-2"></i>Traiter les demandes
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Widget Suivi Budg√©taire -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="widget-card shadow-sm">
                <div class="bg-white border-bottom p-3 d-flex align-items-center gap-3">
                    <div class="widget-icon-wrapper" style="background: linear-gradient(135deg, #48c6ef 0%, #6f86d6 100%);">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path d="M600-120q-118 0-210-67T260-360H120v-80h122q-2-11-2-20v-40q0-9 2-20H120v-80h140q38-106 130-173t210-67q69 0 130.5 24T840-748l-70 70q-35-29-78.5-45.5T600-740q-75 0-136.5 38.5T370-600h230v80H344q-2 11-3 20t-1 20q0 11 1 20t3 20h256v80H370q32 63 93.5 101.5T600-220q48 0 92.5-16.5T770-282l70 70q-48 44-109.5 68T600-120Z"/>
                        </svg>
                    </div>
                    <h3 class="h5 mb-0 fw-bold text-dark">Suivi Budg√©taire</h3>
                </div>
                <div class="p-4 d-flex flex-column justify-content-center flex-grow-1">
                    {% if data.solde_budget is not none %}
                        <div class="text-center">
                            <span class="d-block text-muted small text-uppercase fw-bold mb-2">Solde Actuel</span>
                            <span class="display-6 fw-bold {{ 'text-success' if data.solde_budget >= 0 else 'text-danger' }}">
                                {{ "%.2f"|format(data.solde_budget) }} ‚Ç¨
                            </span>
                        </div>
                    {% else %}
                        <p class="text-center text-muted mb-0">Aucun budget d√©fini.</p>
                    {% endif %}
                </div>
                <div class="p-3 bg-light border-top">
                    <a href="{{ url_for('admin.budget') }}" class="btn-dashboard w-100">Acc√©der</a>
                </div>
            </div>
        </div>

        <!-- Widget Prochaines √âch√©ances -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="widget-card shadow-sm">
                <div class="bg-white border-bottom p-3 d-flex align-items-center gap-3">
                    <div class="widget-icon-wrapper" style="background: linear-gradient(135deg, #ff9a56 0%, #ff6a88 100%);">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path d="M9.05.435c-.58-.58-1.52-.58-2.1 0L.436 6.95c-.58.58-.58 1.519 0 2.098l6.516 6.516c.58.58 1.519.58 2.098 0l6.516-6.516c.58-.58.58-1.519 0-2.098zM8 4c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995A.905.905 0 0 1 8 4m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                        </svg>
                    </div>
                    <h3 class="h5 mb-0 fw-bold text-dark">Prochaines √âch√©ances</h3>
                </div>
                <div class="p-0 flex-grow-1">
                    {% if data.prochaines_echeances %}
                        <ul class="list-group list-group-flush">
                            {% for echeance in data.prochaines_echeances %}
                            <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                                <div class="text-truncate me-2">
                                    <div class="fw-bold text-dark text-truncate">{{ echeance.intitule }}</div>
                                    <small class="text-muted">Le {{ echeance.date_echeance_obj|strftime('%d/%m/%Y') }}</small>
                                </div>
                                <span class="badge rounded-pill {{ 'bg-danger' if echeance.jours_restants < 7 else 'bg-warning text-dark' }}">
                                    J-{{ echeance.jours_restants }}
                                </span>
                            </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <p class="text-center text-muted py-5 mb-0">Aucune √©ch√©ance.</p>
                    {% endif %}
                </div>
                {% if session.user_role == 'admin' %}
                <div class="p-3 bg-light border-top">
                    <a href="{{ url_for('admin.gestion_echeances') }}" class="btn-dashboard w-100">G√©rer</a>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Widget Mes R√©servations -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="widget-card shadow-sm">
                <div class="bg-white border-bottom p-3 d-flex align-items-center gap-3">
                    <div class="widget-icon-wrapper" style="background: linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%);">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path d="M6 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1H9v1.07a7.001 7.001 0 0 1 3.274 12.474l.601.602a.5.5 0 0 1-.707.708l-.746-.746A6.97 6.97 0 0 1 8 16a6.97 6.97 0 0 1-3.422-.892l-.746.746a.5.5 0 0 1-.707-.708l.602-.602A7.001 7.001 0 0 1 7 2.07V1h-.5A.5.5 0 0 1 6 .5m2.5 5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9zM.86 5.387A2.5 2.5 0 1 1 4.387 1.86 8.04 8.04 0 0 0 .86 5.387M11.613 1.86a2.5 2.5 0 1 1 3.527 3.527 8.04 8.04 0 0 0-3.527-3.527"/>
                        </svg>
                    </div>
                    <h3 class="h5 mb-0 fw-bold text-dark">Mes R√©servations</h3>
                </div>
                <div class="p-0 flex-grow-1">
                    {% if data.reservations %}
                        <ul class="list-group list-group-flush">
                        {% for resa in data.reservations %}
                            <li class="list-group-item p-3">
                                <div class="d-flex justify-content-between align-items-center mb-1">
                                    <span class="fw-bold text-primary">{{ resa.debut_reservation|strftime_fr('%A %d %B') }}</span>
                                    <span class="badge bg-light text-dark border">{{ resa.debut_reservation|strftime('%H:%M') }}</span>
                                </div>
                                <small class="text-muted">{{ resa.item_count }} article(s)</small>
                            </li>
                        {% endfor %}
                        </ul>
                    {% else %}
                        <p class="text-center text-muted py-5 mb-0">Aucune r√©servation.</p>
                    {% endif %}
                </div>
                <div class="p-3 bg-light border-top">
                    <a href="{{ url_for('main.calendrier') }}" class="btn-dashboard w-100">R√©server</a>
                </div>
            </div>
        </div>

        <!-- Widget Fournisseurs -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="widget-card shadow-sm">
                <!-- Header -->
                <div class="bg-white border-bottom p-3 d-flex align-items-center gap-3">
                    <div class="widget-icon-wrapper" style="background: linear-gradient(135deg, #0ba360 0%, #3cba92 100%);">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path d="M5 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0m8 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m-6-1a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2zm1-6c-1.876 0-3.426.109-4.552.226A.5.5 0 0 0 3 4.723v3.554a.5.5 0 0 0 .448.497C4.574 8.891 6.124 9 8 9s3.426-.109 4.552-.226A.5.5 0 0 0 13 8.277V4.723a.5.5 0 0 0-.448-.497A44 44 0 0 0 8 4m0-1c-1.837 0-3.353.107-4.448.22a.5.5 0 1 1-.104-.994A44 44 0 0 1 8 2c1.876 0 3.426.109 4.552.226a.5.5 0 1 1-.104.994A43 43 0 0 0 8 3"/>
                            <path d="M15 8a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1V2.64c0-1.188-.845-2.232-2.064-2.372A44 44 0 0 0 8 0C5.9 0 4.208.136 3.064.268 1.845.408 1 1.452 1 2.64V4a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1v3.5c0 .818.393 1.544 1 2v2a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5V14h6v1.5a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-2c.607-.456 1-1.182 1-2zM8 1c2.056 0 3.71.134 4.822.261.676.078 1.178.66 1.178 1.379v8.86a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 11.5V2.64c0-.72.502-1.301 1.178-1.379A43 43 0 0 1 8 1"/>
                        </svg>
                    </div>
                    <h3 class="h5 mb-0 fw-bold text-dark">Fournisseurs</h3>
                </div>
                
                <!-- Liste -->
                <div class="widget-body p-0 flex-grow-1">
                    {% if data.fournisseurs %}
                        <div class="list-group list-group-flush">
                        {% for f in data.fournisseurs %}
                            <div class="supplier-item p-3 d-flex align-items-center gap-3">
                                <!-- Avatar Intelligent -->
                                <div class="supplier-avatar">
                                    {% if f.logo %}
                                        <!-- Image du logo -->
                                        <img src="{{ f.logo }}" alt="{{ f.nom }}" class="supplier-logo-img" 
                                             onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
                                        <!-- Fallback (Initiale) si l'image ne charge pas -->
                                        <span style="display: none;">{{ f.nom[0]|upper }}</span>
                                    {% else %}
                                        <!-- Initiale si pas de logo du tout -->
                                        <span>{{ f.nom[0]|upper }}</span>
                                    {% endif %}
                                </div>

                                <!-- Infos -->
                                <div class="flex-grow-1 overflow-hidden">
                                    <div class="fw-bold text-dark text-truncate">{{ f.nom }}</div>
                                    {% if f.site_web %}
                                        <a href="{{ f.site_web }}" target="_blank" class="supplier-link">
                                            <i class="bi bi-link-45deg"></i> Site web
                                        </a>
                                    {% else %}
                                        <span class="text-muted small" style="font-size: 0.8rem;">Aucun site web</span>
                                    {% endif %}
                                </div>
                                
                                <!-- Petite fl√®che d√©co -->
                                <i class="bi bi-chevron-right text-muted opacity-25"></i>
                            </div>
                        {% endfor %}
                        </div>
                    {% else %}
                        <div class="p-4 d-flex align-items-center justify-content-center h-100">
                            <div class="text-center text-muted opacity-50">
                                <i class="bi bi-shop display-4"></i>
                                <p class="mt-2 small mb-0">Annuaire vide</p>
                            </div>
                        </div>
                    {% endif %}
                </div>
                
                <!-- Footer -->
                <div class="p-3 bg-light border-top">
                    <a href="{{ url_for('admin.gestion_fournisseurs') }}" class="btn btn-dashboard w-100">G√©rer l'annuaire</a>
                </div>
            </div>
        </div>

        <!-- Widget Mon Historique R√©cent -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="widget-card shadow-sm">
                <div class="bg-white border-bottom p-3 d-flex align-items-center gap-3">
                    <div class="widget-icon-wrapper" style="background: linear-gradient(135deg, #6c757d 0%, #495057 100%);">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path d="M2.5 15a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1 0-1h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1zm2-13v1c0 .537.12 1.045.337 1.5h6.326c.216-.455.337-.963.337-1.5V2zm3 6.35c0 .701-.478 1.236-1.011 1.492A3.5 3.5 0 0 0 4.5 13s.866-1.299 3-1.48zm1 0v3.17c2.134.181 3 1.48 3 1.48a3.5 3.5 0 0 0-1.989-3.158C8.978 9.586 8.5 9.052 8.5 8.351z"/>
                        </svg>
                    </div>
                    <h3 class="h5 mb-0 fw-bold text-dark">Mon Historique</h3>
                </div>
                <div class="p-0 flex-grow-1">
                    {% if data.historique_recent %}
                        <ul class="list-group list-group-flush">
                        {% for action in data.historique_recent %}
                            <li class="list-group-item p-3">
                                <div class="d-flex justify-content-between">
                                    <span class="fw-bold text-dark small">{{ action.action }}</span>
                                    <small class="text-muted">{{ action.timestamp|strftime('%d/%m %H:%M') }}</small>
                                </div>
                                <small class="text-muted d-block text-truncate">{{ action.details }}</small>
                            </li>
                        {% endfor %}
                        </ul>
                    {% else %}
                        <p class="text-center text-muted py-5 mb-0">Aucune activit√©.</p>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Widget Nouveaut√©s & Contact -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="widget-card shadow-sm">
                <div class="bg-white border-bottom p-3 d-flex align-items-center gap-3">
                    <div class="widget-icon-wrapper" style="background: linear-gradient(135deg, #0d6efd 0%, #0dcaf0 100%);">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0"/>
                            <path d="M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7.256A4.5 4.5 0 0 0 12.5 8a4.5 4.5 0 0 0-3.59 1.787A.5.5 0 0 0 9 9.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .39-.187A4.5 4.5 0 0 0 8.027 12H6.5a.5.5 0 0 0-.5.5V16H3a1 1 0 0 1-1-1zm2 1.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5m3 0v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5m3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM4 5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5M7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5zm2.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5M4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"/>
                        </svg>
                    </div>
                    <h3 class="h5 mb-0 fw-bold text-dark">Nouveaut√©s et contact</h3>
                </div>
                <div class="p-0 flex-grow-1">
                    <div class="p-2 bg-light border-bottom text-center">
                        <small class="text-uppercase fw-bold text-muted" style="font-size: 0.7rem;">Ajouts r√©cents (-24h)</small>
                    </div>
                    {% if data.objets_recents %}
                        <ul class="list-group list-group-flush">
                        {% for objet in data.objets_recents %}
                            <li class="list-group-item d-flex justify-content-between align-items-center p-2 px-3">
                                <span class="small fw-medium text-dark">{{ objet.nom }}</span>
                                <a href="{{ url_for('inventaire.voir_objet', objet_id=objet.id) }}" class="btn btn-sm btn-link p-0 text-decoration-none">Voir</a>
                            </li>
                        {% endfor %}
                        </ul>
                    {% else %}
                        <p class="text-center text-muted py-4 small mb-0">Aucun ajout.</p>
                    {% endif %}
                </div>
                <div class="p-3 bg-light border-top">
                    <a href="mailto:{{ data.admin_contact }}" class="btn-dashboard w-100">Contacter l'admin</a>
                </div>
            </div>
        </div>

        <!-- Widget Statistiques Admin -->
        {% if session.user_role == 'admin' and data.stats %}
        <div class="col-12 col-md-6 col-lg-4">
            <div class="widget-card shadow-sm">
                <div class="bg-white border-bottom p-3 d-flex align-items-center gap-3">
                    <div class="widget-icon-wrapper" style="background: linear-gradient(135deg, #6610f2 0%, #6f42c1 100%);">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path d="M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1z"/>
                        </svg>
                    </div>
                    <h3 class="h5 mb-0 fw-bold text-dark">Statistiques Cl√©s</h3>
                </div>
                <div class="p-4 flex-grow-1">
                    <div class="row g-3">
                        <div class="col-6">
                            <div class="p-2 bg-light rounded text-center border">
                                <div class="h4 fw-bold text-primary mb-0">{{ data.stats.total_objets }}</div>
                                <small class="text-muted" style="font-size: 0.7rem;">OBJETS</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-2 bg-light rounded text-center border">
                                <div class="h4 fw-bold text-success mb-0">{{ data.stats.reservations_actives }}</div>
                                <small class="text-muted" style="font-size: 0.7rem;">R√âSAS</small>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="p-2 bg-light rounded text-center border">
                                <div class="h5 fw-bold text-dark mb-0">{{ data.stats.total_utilisateurs }}</div>
                                <small class="text-muted" style="font-size: 0.7rem;">UTILISATEURS</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-3 bg-light border-top">
                    <a href="{{ url_for('admin.admin') }}" class="btn-dashboard w-100">Panel Admin</a>
                </div>
            </div>
        </div>
        {% endif %}

    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/modules/tour.js') }}" type="module"></script>
<script type="module">
    import { startTour } from "{{ url_for('static', filename='js/modules/tour.js') }}";
    {% if start_tour %}
        startTour();
    {% endif %}
</script>
{% endblock %}
--- END OF FILE templates/index.html ---

--- START OF FILE templates/inventaire.html ---

{% extends "base.html" %}

{% block title %}Inventaire Complet - LabFlow{% endblock %}

{% block content %}

    <div class="main-container" data-add-url="{{ url_for('inventaire.ajouter_objet') }}">
        
        <div class="filtres-section">
            <div class="filter-group">
                <label for="search-input">
                    <svg class="filter-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg>
                    <span>Rechercher</span>
                </label>
                <input type="search" id="search-input" name="q" placeholder="Nom de l'objet..." value="{{ request.args.get('q', '') }}">
            </div>
            
            <div class="filter-group">
                <label for="filtre-armoire">
                    <svg class="filter-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M600-40q-33 0-56.5-23.5T520-120q0-23 11-41t29-29v-221q-18-11-29-28.5T520-480q0-33 23.5-56.5T600-560q33 0 56.5 23.5T680-480q0 23-11 40.5T640-411v115l160-53v-62q-18-11-29-28.5T760-480q0-33 23.5-56.5T840-560q33 0 56.5 23.5T920-480q0 23-11 40.5T880-411v119l-240 80v22q18 11 29 29t11 41q0 33-23.5 56.5T600-40ZM160-160v-560 560Zm0 0q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h240l80 80h320q33 0 56.5 23.5T880-640H447l-80-80H160v480h280v80H160Z"/></svg>
                    <span>Armoire</span>
                </label>
                <select id="filtre-armoire" name="armoire">
                    <option value="">Toutes</option>
                    {% for a in armoires %}<option value="{{ a.id }}" {% if request.args.get('armoire') == a.id|string %}selected{% endif %}>{{ a.nom }}</option>{% endfor %}
                </select>
            </div>
            
            <div class="filter-group">
                <label for="filtre-categorie">
                    <svg class="filter-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M160-480v240-480 240Zm400 360q17 0 28.5-11.5T600-160q0-17-11.5-28.5T560-200q-17 0-28.5 11.5T520-160q0 17 11.5 28.5T560-120Zm240-400q17 0 28.5-11.5T840-560q0-17-11.5-28.5T800-600q-17 0-28.5 11.5T760-560q0 17 11.5 28.5T800-520Zm-560 0h200v-80H240v80Zm0 160h200v-80H240v80Zm-80 200q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720H160v480h200v80H160ZM560-40q-50 0-85-35t-35-85q0-39 22.5-70t57.5-43v-127h240v-47q-35-12-57.5-43T680-560q0-50 35-85t85-35q50 0 85 35t35 85q0 39-22.5 70T840-447v127H600v47q35 12 57.5 43t22.5 70q0 50-35 85t-85 35Z"/></svg>
                    <span>Cat√©gorie</span>
                </label>
                <select id="filtre-categorie" name="categorie">
                    <option value="">Toutes</option>
                    {% for c in categories %}<option value="{{ c.id }}" {% if request.args.get('categorie') == c.id|string %}selected{% endif %}>{{ c.nom }}</option>{% endfor %}
                </select>
            </div>

            <div class="filter-group">
                <label for="filtre-etat">
                    <svg class="filter-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M450-420q38 0 64-26t26-64q0-38-26-64t-64-26q-38 0-64 26t-26 64q0 38 26 64t64 26Zm193 160L538-365q-20 13-42.5 19t-45.5 6q-71 0-120.5-49.5T280-510q0-71 49.5-120.5T450-680q71 0 120.5 49.5T620-510q0 23-6.5 45.5T594-422l106 106-57 56ZM200-120q-33 0-56.5-23.5T120-200v-160h80v160h160v80H200Zm400 0v-80h160v-160h80v160q0 33-23.5 56.5T760-120H600ZM120-600v-160q0-33 23.5-56.5T200-840h160v80H200v160h-80Zm640 0v-160H600v-80h160q33 0 56.5 23.5T840-760v160h-80Z"/></svg>
                    <span>√âtat</span>
                </label>
                <select id="filtre-etat" name="etat">
                    <option value="">Tous</option>
                    <option value="perime" {% if request.args.get('etat') == 'perime' %}selected{% endif %}>P√©rim√©s</option>
                    <option value="bientot" {% if request.args.get('etat') == 'bientot' %}selected{% endif %}>Expire bient√¥t</option>
                    <option value="stock" {% if request.args.get('etat') == 'stock' %}selected{% endif %}>Stock bas</option>
                    <option value="ok" {% if request.args.get('etat') == 'ok' %}selected{% endif %}>OK</option>
                </select>
            </div>

            <a href="{{ url_for('inventaire.inventaire') }}" class="btn-reset">R√©initialiser</a>
        </div>

        <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
			<h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
				<!-- Ic√¥ne Inventaire (Style Carte Admin : D√©grad√© Bleu) -->
				<div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
					 style="width: 48px; height: 48px; background: linear-gradient(135deg, #0d6efd 0%, #0dcaf0 100%);">
					<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-credit-card-2-front-fill" viewBox="0 0 16 16">
					  <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2.5 1a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm0 3a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm3 0a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm3 0a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm3 0a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1z"/>
					</svg>
				</div>
				<span class="fw-bold">Liste G√©n√©rale des Objets</span>
			</h2>
			
			<!-- Bouton d'action (Conserv√©) -->
			<div class="page-actions-container">
				{% if session.user_id %}
				<button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addObjectModal">
					<i class="bi bi-plus-circle-fill me-2"></i> Ajouter un mat√©riel
				</button>
				{% endif %}
			</div>
		</div>

        {% if objets %}
            <div id="dynamic-content" data-endpoint="inventaire" data-sort-by="{{ sort_by }}" data-direction="{{ direction }}">
                {% include '_inventaire_content.html' %}
            </div>
        {% else %}
            <div class="empty-state-container">
                <div class="empty-state-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="page-title-icon" viewBox="0 -960 960 960"><path d="M200-80q-33 0-56.5-23.5T120-160v-640q0-33 23.5-56.5T200-880h560q33 0 56.5 23.5T840-800v640q0 33-23.5 56.5T760-80H200Zm0-80h560v-640H200v640Zm140-40h280v-280h-80v120l-60-60-60 60v-120h-80v280Zm-60-320h400v-80H280v80Z"/></svg>
                </div>
                <h3>Votre inventaire est vide</h3>
                <p>Commencez par ajouter votre premier objet pour peupler votre inventaire.</p>
                {% if session.user_id %}
                <button class="btn btn-primary mt-3" data-bs-toggle="modal" data-bs-target="#addObjectModal">
                    Ajouter le premier objet
                </button>
                {% endif %}
            </div>
        {% endif %}
    </div>

    <!-- La modale d'ajout d'objet est maintenant ici -->
    <div class="modal fade" id="addObjectModal" tabindex="-1" aria-labelledby="addObjectModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg modal-dialog-centered"> <!-- modal-lg pour plus d'espace -->
			<div class="modal-content border-0 shadow-lg">
				
				<!-- Header Stylis√© -->
				<div class="modal-header bg-primary text-white">
					<h5 class="modal-title fw-bold" id="addObjectModalLabel">
						<i class="bi bi-box-seam-fill me-2"></i>Ajouter un mat√©riel
					</h5>
					<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>

				<form action="{{ url_for('inventaire.ajouter_objet') }}" method="post" enctype="multipart/form-data">
					<div class="modal-body p-4 bg-light"> <!-- Fond gris l√©ger pour faire ressortir les inputs -->
						<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
						
						<div class="row g-4">
							
							<!-- COLONNE GAUCHE : IDENTIT√â & STOCK -->
							<div class="col-md-6">
								<h6 class="text-uppercase text-muted fw-bold small mb-3 border-bottom pb-2">Informations G√©n√©rales</h6>
								
								<!-- Nom -->
								<div class="mb-3">
									<label for="nom" class="form-label fw-bold small">Nom de l'objet <span class="text-danger">*</span></label>
									<div class="input-group shadow-sm">
										<span class="input-group-text bg-white"><i class="bi bi-tag"></i></span>
										<input type="text" class="form-control border-start-0 ps-0" id="nom" name="nom" placeholder="Ex: B√©cher 50ml" required>
									</div>
								</div>

								<!-- Quantit√© & Seuil (C√¥te √† c√¥te) -->
								<div class="row g-2 mb-3">
									<div class="col-6">
										<label for="quantite" class="form-label fw-bold small">Quantit√© <span class="text-danger">*</span></label>
										<div class="input-group shadow-sm">
											<input type="number" class="form-control text-center fw-bold" id="quantite" name="quantite" value="1" min="0" required>
										</div>
									</div>
									<div class="col-6">
										<label for="seuil" class="form-label fw-bold small text-danger">Seuil Alerte <span class="text-danger">*</span></label>
										<div class="input-group shadow-sm">
											<span class="input-group-text bg-white text-danger"><i class="bi bi-bell"></i></span>
											<input type="number" class="form-control border-start-0 ps-0" id="seuil" name="seuil" value="5" min="0" required>
										</div>
									</div>
								</div>

								<!-- Date P√©remption -->
								<div class="mb-3">
									<label for="date_peremption" class="form-label fw-bold small">Date de p√©remption</label>
									<div class="input-group shadow-sm">
										<span class="input-group-text bg-white"><i class="bi bi-calendar-event"></i></span>
										<input type="date" class="form-control border-start-0 ps-0" id="date_peremption" name="date_peremption">
									</div>
								</div>
							</div>

							<!-- COLONNE DROITE : CLASSEMENT & M√âDIA -->
							<div class="col-md-6">
								<h6 class="text-uppercase text-muted fw-bold small mb-3 border-bottom pb-2">Classement & M√©dia</h6>

								<!-- Armoire & Cat√©gorie -->
								<div class="mb-3">
									<label for="armoire_id" class="form-label fw-bold small">Armoire <span class="text-danger">*</span></label>
									<div class="input-group shadow-sm">
										<span class="input-group-text bg-white"><i class="bi bi-archive"></i></span>
										<select class="form-select border-start-0 ps-0" id="armoire_id" name="armoire_id" required>
											{% for a in all_armoires %}<option value="{{ a.id }}">{{ a.nom }}</option>{% endfor %}
										</select>
									</div>
								</div>

								<div class="mb-3">
									<label for="categorie_id" class="form-label fw-bold small">Cat√©gorie <span class="text-danger">*</span></label>
									<div class="input-group shadow-sm">
										<span class="input-group-text bg-white"><i class="bi bi-bookmarks"></i></span>
										<select class="form-select border-start-0 ps-0" id="categorie_id" name="categorie_id" required>
											{% for c in all_categories %}<option value="{{ c.id }}">{{ c.nom }}</option>{% endfor %}
										</select>
									</div>
								</div>

								<!-- SECTION IMAGE UNIFI√âE -->
								<div class="card border-0 shadow-sm mb-3">
									<div class="card-body p-2 bg-white rounded">
										<label class="form-label fw-bold small mb-2">Image de l'objet</label>
										
										<!-- Onglets simplifi√©s pour choisir la source -->
										<ul class="nav nav-pills nav-fill small mb-2" id="pills-tab" role="tablist">
											<li class="nav-item" role="presentation">
												<button class="nav-link active py-1" id="pills-file-tab" data-bs-toggle="pill" data-bs-target="#pills-file" type="button" role="tab">
													<i class="bi bi-upload me-1"></i>Fichier
												</button>
											</li>
											<li class="nav-item" role="presentation">
												<button class="nav-link py-1" id="pills-url-tab" data-bs-toggle="pill" data-bs-target="#pills-url" type="button" role="tab">
													<i class="bi bi-link-45deg me-1"></i>URL / Web
												</button>
											</li>
										</ul>

										<div class="tab-content" id="pills-tabContent">
											<!-- Option 1 : Upload Fichier -->
											<div class="tab-pane fade show active" id="pills-file" role="tabpanel">
												<input type="file" class="form-control form-control-sm" id="image" name="image" accept="image/*">
												<div class="form-text x-small mt-1">Format JPG, PNG. Max 5 Mo.</div>
											</div>
											
											<!-- Option 2 : URL Web -->
											<div class="tab-pane fade" id="pills-url" role="tabpanel">
												<div class="input-group input-group-sm">
													<input type="text" class="form-control" id="image_url" name="image_url" placeholder="https://...">
													<button class="btn btn-outline-secondary" type="button" id="btn-search-pexels">
														<i class="bi bi-search"></i>
													</button>
												</div>
												<!-- Zone r√©sultats Pexels (cach√©e par d√©faut) -->
												<div id="pexels-results" class="d-flex gap-2 mt-2 overflow-auto" style="display:none; white-space: nowrap;"></div>
											</div>
										</div>
									</div>
								</div>

								<!-- FDS -->
								<div class="mb-0">
									<label for="fds_url" class="form-label fw-bold small">Fiche S√©curit√© (PDF)</label>
									<div class="input-group input-group-sm shadow-sm">
										<span class="input-group-text bg-white"><i class="bi bi-file-pdf text-danger"></i></span>
										<input type="text" class="form-control border-start-0 ps-0" id="fds_url" name="fds_url" placeholder="URL du PDF...">
									</div>
								</div>

							</div>
						</div>
					</div>
					
					<!-- Footer Actions -->
					<div class="modal-footer bg-white border-top-0">
						<button type="button" class="btn btn-light text-muted fw-bold" data-bs-dismiss="modal">Annuler</button>
						<button type="submit" class="btn btn-primary px-4 fw-bold shadow-sm">
							<i class="bi bi-check-lg me-2"></i>Enregistrer
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	{% include '_modale_danger.html' %}
{% endblock %}

{% block scripts %}
    <!-- Pas de script sp√©cifique n√©cessaire pour cette page -->
{% endblock %}
--- END OF FILE templates/inventaire.html ---

--- START OF FILE templates/login.html ---

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <title>Connexion - LabFlow</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="login-page-body">
    <div class="login-form-container">
        <div class="login-header">
            <div class="login-icon-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M720-240q25 0 42.5-17.5T780-300q0-25-17.5-42.5T720-360q-25 0-42.5 17.5T660-300q0 25 17.5 42.5T720-240Zm0 120q30 0 56-14t43-39q-23-14-48-20.5t-51-6.5q-26 0-51 6.5T621-173q17 25 43 39t56 14ZM360-640h240v-80q0-50-35-85t-85-35q-50 0-85 35t-35 85v80ZM490-80H240q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h40v-80q0-83 58.5-141.5T480-920q83 0 141.5 58.5T680-720v80h40q33 0 56.5 23.5T800-560v52q-18-6-37.5-9t-42.5-3v-40H240v400h212q8 24 16 41.5T490-80Zm230 40q-83 0-141.5-58.5T520-240q0-83 58.5-141.5T720-440q83 0 141.5 58.5T920-240q0 83-58.5 141.5T720-40ZM240-560v400-400Z"/></svg>
            </div>
            <h2>Connexion</h2>
        </div>

        <form action="{{ url_for('auth.login') }}" method="post" class="login-form">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            
            <div class="input-group">
                <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                <input type="text" id="username" name="username" required placeholder="Nom d'utilisateur">
            </div>

            <div class="input-group">
                <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
                <input type="password" id="password" name="password" required placeholder="Mot de passe">
            </div>

            <button type="submit" class="btn-login">Se connecter</button>
        </form>
        
        <div class="form-switch-link">
            <a href="{{ url_for('auth.register') }}">Pas encore de compte ? Cr√©ez-en un</a>
        </div>
    </div>
</body>
</html>
--- END OF FILE templates/login.html ---

--- START OF FILE templates/modale_objet.html ---

<div id="add-object-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h3 id="modal-objet-title" class="modal-title-with-icon">
                <svg class="modal-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M440-200h80v-160h160v-80H520v-160h-80v160H280v80h160v160ZM200-80q-33 0-56.5-23.5T120-160v-640q0-33 23.5-56.5T200-880h560q33 0 56.5 23.5T840-800v640q0 33-23.5 56.5T760-80H200Z"/></svg>
                <span>Ajouter un Nouvel Objet</span>
            </h3>
            <button type="button" class="close-btn">√ó</button>
        </div>
        <form id="modal-form-objet" action="" method="post" class="modal-form">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <div class="form-grid">
                <!-- Colonne de gauche -->
                <div class="form-column">
                    <div class="form-group">
                        <label for="nom">Nom de l'objet</label>
                        <input type="text" id="nom" name="nom" required>
                    </div>
                    <div class="form-group">
                        <label for="quantite">Quantit√©</label>
                        <input type="number" id="quantite" name="quantite" required>
                    </div>
                    <div class="form-group">
                        <label for="seuil">Seuil d'alerte</label>
                        <input type="number" id="seuil" name="seuil" required>
                    </div>
                    <div class="form-group">
                        <label for="date_peremption">Date de p√©remption</label>
                        <input type="date" id="date_peremption" name="date_peremption">
                    </div>
                    <div class="form-group">
                        <label for="armoire_id">Armoire</label>
                        <select id="armoire_id" name="armoire_id" required>
                            {% for a in all_armoires %}<option value="{{ a.id }}">{{ a.nom }}</option>{% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="categorie_id">Cat√©gorie</label>
                        <select id="categorie_id" name="categorie_id" required>
                            {% for c in all_categories %}<option value="{{ c.id }}">{{ c.nom }}</option>{% endfor %}
                        </select>
                    </div>
                </div>
                <!-- Colonne de droite -->
                <div class="form-column">
                    <div class="form-group">
                        <label for="image_url">Image (Optionnel)</label>
                        <div class="input-with-button">
                            <input type="text" id="image_url" name="image_url" placeholder="Coller une URL ou chercher">
                            <button type="button" id="btn-search-pexels" class="btn-action">Chercher</button>
                        </div>
                        <small class="form-help-text">Utilisez le nom de l'objet et cliquez sur "Chercher".</small>
                    </div>
                    <div id="pexels-results" class="pexels-results-grid" style="display: none;"></div>
                    <div id="image-preview-container" style="display:none; text-align: center;">
                        <img id="image-preview" src="" class="image-preview-modal" alt="Aper√ßu">
                    </div>
                    <div class="form-group">
                        <label for="fds_url">Fiche de S√©curit√© (URL du PDF)</label>
                        <input type="text" id="fds_url" name="fds_url" placeholder="Coller l'URL de la FDS">
                        <small class="form-help-text">Disponible sur le site de votre fournisseur.</small>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
				<!-- On s'assure que les classes sont bien l√† -->
				<button type="button" class="btn btn-secondary btn-cancel">Annuler</button>
				<button type="submit" id="modal-submit-btn" class="btn btn-primary">Enregistrer l'objet</button>
			</div>
        </form>
    </div>
</div>
--- END OF FILE templates/modale_objet.html ---

--- START OF FILE templates/objet_details.html ---

{% extends "base.html" %}

{% block title %}{{ objet.nom }} - D√©tails{% endblock %}

{% block content %}

<div class="main-container">
    
    <!-- Fil d'ariane -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url_for('inventaire.index') }}" class="text-decoration-none">Inventaire</a></li>
            {% if objet.categorie %}
            <li class="breadcrumb-item"><a href="#" class="text-decoration-none">{{ objet.categorie.nom }}</a></li>
            {% endif %}
            <li class="breadcrumb-item active" aria-current="page">{{ objet.nom }}</li>
        </ol>
    </nav>

    <div class="row g-4">
        
        <!-- COLONNE GAUCHE : Identit√© & Actions -->
        <div class="col-lg-4">
            <div class="card border-0 shadow-sm rounded-3 overflow-hidden">
                <!-- Image -->
                <div class="object-image-container">
					{% if objet.image_url %}
						{% if objet.image_url.startswith('http') %}
							<!-- Cas 1 : URL Externe (Copi√©-coll√©) -->
							<img src="{{ objet.image_url }}" alt="{{ objet.nom }}" class="object-image">
						{% else %}
							<!-- Cas 2 : Fichier Upload√© (Local) -->
							<img src="{{ url_for('static', filename=objet.image_url) }}" alt="{{ objet.nom }}" class="object-image">
						{% endif %}
					{% else %}
						<!-- Cas 3 : Pas d'image (Placeholder) -->
						<div class="text-center text-muted opacity-50">
							<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" class="bi bi-image" viewBox="0 0 16 16">
								<path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"/>
								<path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12"/>
							</svg>
							<p class="mt-2 mb-0 small">Aucune image</p>
						</div>
					{% endif %}
				</div>

                <div class="card-body">
                    <h1 class="h4 fw-bold mb-2">{{ objet.nom }}</h1>
                    
                    <div class="mb-4">
                        {% if objet.categorie %}
                            <span class="badge bg-primary-subtle text-primary border border-primary-subtle">
                                <i class="bi bi-tag-fill me-1"></i> {{ objet.categorie.nom }}
                            </span>
                        {% else %}
                            <span class="badge bg-secondary">Sans cat√©gorie</span>
                        {% endif %}
                    </div>

                    <!-- Infos Rapides -->
                    <ul class="list-group list-group-flush mb-4 small">
                        <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                            <span class="text-muted">Emplacement</span>
                            <span class="fw-bold text-dark">
                                <i class="bi bi-archive me-1"></i>
                                {{ objet.armoire.nom if objet.armoire else 'Non rang√©' }}
                            </span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                            <span class="text-muted">P√©remption</span>
                            {% if objet.date_peremption %}
                                <span class="fw-bold {{ 'text-danger' if objet.date_peremption < now.date() else 'text-dark' }}">
                                    {{ objet.date_peremption.strftime('%d/%m/%Y') }}
                                </span>
                            {% else %}
                                <span class="text-muted">-</span>
                            {% endif %}
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                            <span class="text-muted">Fiche S√©curit√© (FDS)</span>
                            {% if objet.fds_url %}
                                <a href="{{ objet.fds_url }}" target="_blank" class="text-decoration-none">
                                    <i class="bi bi-file-earmark-pdf-fill text-danger"></i> Voir
                                </a>
                            {% else %}
                                <span class="text-muted">-</span>
                            {% endif %}
                        </li>
                    </ul>

                    <!-- Actions -->
                    <div class="d-grid gap-2">
                        {% if session.user_role == 'admin' %}
                        <button class="btn btn-outline-primary" 
                                data-bs-toggle="modal" 
                                data-bs-target="#addObjectModal"
                                data-objet-id="{{ objet.id }}"
                                data-nom="{{ objet.nom }}"
                                data-quantite="{{ objet.quantite_physique }}"
                                data-seuil="{{ objet.seuil }}"
                                data-armoire-id="{{ objet.armoire_id }}"
                                data-categorie-id="{{ objet.categorie_id }}"
                                data-image-url="{{ objet.image_url }}"
                                data-date-peremption="{{ objet.date_peremption }}"
                                data-fds-url="{{ objet.fds_url }}">
                            <i class="bi bi-pencil-square me-2"></i>Modifier
                        </button>
                        {% endif %}
                        
                        <!-- Bouton Suggestion pour tous -->
                        <button class="btn btn-outline-warning text-dark btn-suggest"
								data-objet-id="{{ objet.id }}"
								data-objet-nom="{{ objet.nom }}"
								data-stock="{{ objet.quantite_physique }}"
								data-seuil="{{ objet.seuil }}">
							<i class="bi bi-cart-plus me-2"></i>Sugg√©rer une commande
						</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- COLONNE DROITE : Stock & Historique -->
        <div class="col-lg-8">
            
            <!-- Indicateurs de Stock -->
            <div class="row g-3 mb-4">
                <div class="col-md-6">
                    <div class="stock-indicator">
                        <div class="stock-value text-primary">{{ objet.quantite_physique }}</div>
                        <div class="stock-label">Stock Physique Total</div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="stock-indicator">
                        <div class="stock-value {{ 'text-success' if objet.quantite_disponible > objet.seuil else 'text-danger' }}">
                            {{ objet.quantite_disponible }}
                        </div>
                        <div class="stock-label">Disponible √† la r√©servation</div>
                    </div>
                </div>
            </div>

            <!-- Alerte Seuil -->
            {% if objet.quantite_physique <= objet.seuil %}
            <div class="alert alert-danger d-flex align-items-center mb-4 shadow-sm border-0" role="alert">
                <i class="bi bi-exclamation-triangle-fill fs-4 me-3"></i>
                <div>
                    <strong>Stock critique !</strong>
                    <div class="small">La quantit√© est inf√©rieure ou √©gale au seuil d'alerte ({{ objet.seuil }}). Pensez √† recommander.</div>
                </div>
            </div>
            {% endif %}

            <!-- Historique -->
            <div class="card border-0 shadow-sm rounded-3">
                <div class="card-header bg-white py-3 border-bottom">
                    <h5 class="mb-0 fw-bold text-dark">
                        <i class="bi bi-clock-history me-2 text-secondary"></i>Historique des mouvements
                    </h5>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover history-table mb-0">
                        <thead>
                            <tr>
                                <th style="width: 150px;">Date</th>
                                <th>Utilisateur</th>
                                <th>Action</th>
                                <th>D√©tails</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if historique %}
                                {% for h in historique %}
                                <tr>
                                    <td>{{ h.timestamp.strftime('%d/%m/%Y %H:%M') }}</td>
                                    <td>
                                        <div class="d-flex align-items-center gap-2">
                                            <div class="rounded-circle bg-light d-flex align-items-center justify-content-center" style="width: 24px; height: 24px;">
                                                <i class="bi bi-person-fill text-muted" style="font-size: 0.8rem;"></i>
                                            </div>
                                            {{ h.utilisateur.nom_utilisateur if h.utilisateur else 'Utilisateur supprim√©' }}
                                        </div>
                                    </td>
                                    <td>
                                        {% if 'Ajout' in h.action %}
                                            <span class="badge bg-success-subtle text-success border border-success-subtle">Ajout</span>
                                        {% elif 'Retrait' in h.action or 'Suppression' in h.action %}
                                            <span class="badge bg-danger-subtle text-danger border border-danger-subtle">Retrait</span>
                                        {% elif 'Modification' in h.action %}
                                            <span class="badge bg-warning-subtle text-warning border border-warning-subtle">Modif</span>
                                        {% else %}
                                            <span class="badge bg-secondary-subtle text-secondary border border-secondary-subtle">{{ h.action }}</span>
                                        {% endif %}
                                    </td>
                                    <td class="text-muted">{{ h.details }}</td>
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr>
                                    <td colspan="4" class="text-center py-4 text-muted">
                                        Aucun historique disponible pour cet objet.
                                    </td>
                                </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>
</div>

{% include '_modals.html' %}

{% endblock %}
--- END OF FILE templates/objet_details.html ---

--- START OF FILE templates/panier.html ---

{% extends "base.html" %}

{% block title %}Mon Panier - LabFlow{% endblock %}

{% block content %}

<div class="main-container">
    
    <!-- Fil d'ariane -->
     {% include '_breadcrumb.html' %}

    <!-- En-t√™te Panier -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #6610f2 0%, #6f42c1 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-cart-fill" viewBox="0 0 16 16">
                    <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                </svg>
            </div>
            <span class="fw-bold">Mon Panier de R√©servation</span>
        </h2>
    </div>

    <!-- Carte Principale -->
    <div class="card border-0 shadow-sm rounded-3">
        
        <!-- Zone du contenu (Liste charg√©e par JS) -->
        <div id="cart-items-container" class="cart-list-wrapper p-3">
            <!-- Spinner initial -->
            <div class="text-center py-5">
                <div class="spinner-border text-primary" role="status"></div>
            </div>
        </div>

        <!-- Message Panier Vide (Cach√© par d√©faut) -->
        <div id="empty-cart-message" class="empty-cart-container text-center py-5" style="display: none;">
            <div class="mb-3">
                <i class="bi bi-cart-x display-1 text-muted opacity-25"></i>
            </div>
            <h3 class="h5 fw-bold text-dark">Votre panier est vide</h3>
            <p class="mb-4 text-muted">S√©lectionnez des objets dans le calendrier ou l'inventaire pour commencer.</p>
            <a href="{{ url_for('main.calendrier') }}" class="btn btn-primary">
                <i class="bi bi-calendar-week me-2"></i>Aller au calendrier
            </a>
        </div>

        <!-- Actions (Footer) -->
        <div id="cart-actions" class="card-footer bg-white d-flex justify-content-between align-items-center p-3" style="display: none;">
            <button id="clear-cart-btn" class="btn btn-outline-danger">
                <i class="bi bi-trash me-2"></i>Vider le panier
            </button>
            
            <button id="confirm-cart-btn" class="btn btn-success btn-lg px-4 shadow-sm">
                <i class="bi bi-check-circle-fill me-2"></i>Confirmer la r√©servation
            </button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<!-- Import du module JS qui g√®re tout -->
<script src="{{ url_for('static', filename='js/modules/cart-summary.js') }}" type="module"></script>
{% endblock %}
--- END OF FILE templates/panier.html ---

--- START OF FILE templates/profil.html ---

{% extends "base.html" %}

{% block title %}Mon Profil - LabFlow{% endblock %}

{% block content %}
    <div class="login-page-body with-header">
        <div class="login-form-container">
            <div class="login-header">
                <div class="login-icon-wrapper">
                    <svg xmlns="http://www.w3.org/2000/svg" height="32px" viewBox="0 -960 960 960" width="32px">
                        <path d="M234-276q51-39 114-61.5T480-360q69 0 132 22.5T726-276q35-41 54.5-93T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 59 19.5 111t54.5 93Zm246-164q-59 0-99.5-40.5T340-580q0-59 40.5-99.5T480-720q59 0 99.5 40.5T620-580q0 59-40.5 99.5T480-440Zm0 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
                    </svg>
                </div>
                <h2>Mon Profil</h2>
                <p style="color: #6c757d; font-size: 0.95rem; margin-top: 0.5rem;">Mettez √† jour votre mot de passe en toute s√©curit√©</p>
            </div>

            <form action="{{ url_for('auth.profil') }}" method="post" class="login-form">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                
                <div class="input-group">
                    <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px">
                        <path d="M240-80q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h40v-80q0-83 58.5-141.5T480-920q83 0 141.5 58.5T680-720v80h40q33 0 56.5 23.5T800-560v400q0 33-23.5 56.5T720-80H240Zm0-80h480v-400H240v400Zm240-120q33 0 56.5-23.5T560-360q0-33-23.5-56.5T480-440q-33 0-56.5 23.5T400-360q0 33 23.5 56.5T480-280ZM360-640h240v-80q0-50-35-85t-85-35q-50 0-85 35t-35 85v80ZM240-160v-400 400Z"/>
                    </svg>
                    <input type="password" id="ancien_mot_de_passe" name="ancien_mot_de_passe" placeholder="Ancien mot de passe" required>
                </div>

                <div class="input-group">
                    <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px">
                        <path d="M240-80q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h40v-80q0-83 58.5-141.5T480-920q83 0 141.5 58.5T680-720v80h40q33 0 56.5 23.5T800-560v400q0 33-23.5 56.5T720-80H240Zm0-80h480v-400H240v400Zm240-120q33 0 56.5-23.5T560-360q0-33-23.5-56.5T480-440q-33 0-56.5 23.5T400-360q0 33 23.5 56.5T480-280ZM360-640h240v-80q0-50-35-85t-85-35q-50 0-85 35t-35 85v80ZM240-160v-400 400Z"/>
                    </svg>
                    <input type="password" id="nouveau_mot_de_passe" name="nouveau_mot_de_passe" placeholder="Nouveau mot de passe" required>
                </div>

                <div class="input-group">
                    <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px">
                        <path d="M240-80q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h40v-80q0-83 58.5-141.5T480-920q83 0 141.5 58.5T680-720v80h40q33 0 56.5 23.5T800-560v400q0 33-23.5 56.5T720-80H240Zm0-80h480v-400H240v400Zm240-120q33 0 56.5-23.5T560-360q0-33-23.5-56.5T480-440q-33 0-56.5 23.5T400-360q0 33 23.5 56.5T480-280ZM360-640h240v-80q0-50-35-85t-85-35q-50 0-85 35t-35 85v80ZM240-160v-400 400Z"/>
                    </svg>
                    <input type="password" id="confirmation_mot_de_passe" name="confirmation_mot_de_passe" placeholder="Confirmez le nouveau mot de passe" required>
                </div>

                <button type="submit" class="btn-login">Mettre √† jour le mot de passe</button>
            </form>
        </div>
    </div>
{% endblock %}
--- END OF FILE templates/profil.html ---

--- START OF FILE templates/rapports.html ---

{% extends "base.html" %}

{% block title %}Rapports d'Activit√© - LabFlow{% endblock %}

{% block content %}

<div class="main-container">
    {% include '_breadcrumb.html' %}

    <!-- En-t√™te (Style identique √† Import mais avec le SVG et la couleur de Admin > Rapports) -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <!-- D√©grad√© Pink (fa709a -> fee140) correspondant √† la carte Admin -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                <!-- Le SVG exact de ta page Admin -->
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="28" height="28" fill="currentColor">
                    <path d="m105-399-65-47 200-320 120 140 160-260 120 180 135-214 65 47-198 314-119-179-152 247-121-141-145 233Zm475 159q42 0 71-29t29-71q0-42-29-71t-71-29q-42 0-71 29t-29 71q0 42 29 71t71 29Z"/>
                </svg>
            </div>
            <span class="fw-bold">Rapports d'Activit√©</span>
        </h2>
    </div>

    <div class="row g-4">
        
    <!-- COLONNE GAUCHE : Configuration & Export -->
	<div class="col-lg-5">
		<div class="import-card h-100">
			
			<!-- √âTAPE 1 : CONFIGURATION -->
			<h4 class="mb-4 d-flex align-items-center text-dark fw-bold">
				<span class="step-number">1</span>
				Configuration
			</h4>

			<form action="{{ url_for('admin.exporter_rapports') }}" method="GET">
				
				<!-- P√©riode -->
				<div class="mb-4">
					<label class="form-label fw-bold text-muted small text-uppercase">P√©riode d'analyse</label>
					<div class="row g-2">
						<div class="col-6">
							<div class="form-floating">
								<input type="date" class="form-control" id="date_debut" name="date_debut" required>
								<label for="date_debut">D√©but</label>
							</div>
						</div>
						<div class="col-6">
							<div class="form-floating">
								<input type="date" class="form-control" id="date_fin" name="date_fin" required>
								<label for="date_fin">Fin</label>
							</div>
						</div>
					</div>
				</div>

				<!-- Type de rapport (Avec Filtres) -->
				<div class="mb-4">
					<label class="form-label fw-bold text-muted small text-uppercase mb-2">Type de rapport</label>
					
					<!-- Choix Principal -->
					<div class="btn-group w-100 mb-3" role="group">
						<input type="radio" class="btn-check" name="group_by" id="group_date" value="date" checked onchange="toggleActionFilters(false)">
						<label class="btn btn-outline-secondary" for="group_date">
							<i class="bi bi-calendar-event me-2"></i>Chronologique
						</label>

						<input type="radio" class="btn-check" name="group_by" id="group_action" value="action" onchange="toggleActionFilters(true)">
						<label class="btn btn-outline-secondary" for="group_action">
							<i class="bi bi-filter-circle me-2"></i>Par Action
						</label>
					</div>

					<!-- Zone de filtres (Cach√©e par d√©faut) -->
					<div id="action-filters" class="p-3 bg-light border rounded" style="display: none;">
						<label class="form-label fw-bold small text-dark mb-2">Inclure uniquement :</label>
						<div class="d-flex flex-wrap gap-2">
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" name="actions" value="Cr√©ation" id="act_creation" checked>
								<label class="form-check-label small" for="act_creation">Cr√©ation</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" name="actions" value="Modification" id="act_modif" checked>
								<label class="form-check-label small" for="act_modif">Modification</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" name="actions" value="Suppression" id="act_suppr" checked>
								<label class="form-check-label small" for="act_suppr">Suppression</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" name="actions" value="Initialisation" id="act_init" checked>
								<label class="form-check-label small" for="act_init">Initialisation</label>
							</div>
						</div>
						<div class="mt-2">
							<small class="text-muted fst-italic" style="font-size: 0.75rem;">D√©cochez pour exclure certains types.</small>
						</div>
					</div>
				</div>

				<hr class="my-4 text-muted opacity-25">

				<!-- √âTAPE 2 : EXPORT (C'est ce qui manquait !) -->
				<h4 class="mb-3 d-flex align-items-center text-dark fw-bold">
					<span class="step-number">2</span>
					Exporter
				</h4>

				<div class="d-grid gap-2">
					<button type="submit" name="format" value="excel" class="btn btn-success py-2 fw-bold d-flex align-items-center justify-content-center gap-2 shadow-sm">
						<i class="bi bi-file-earmark-excel-fill"></i> T√©l√©charger Excel
					</button>
					<button type="submit" name="format" value="pdf" class="btn btn-danger py-2 fw-bold d-flex align-items-center justify-content-center gap-2 shadow-sm">
						<i class="bi bi-file-earmark-pdf-fill"></i> T√©l√©charger PDF
					</button>
				</div>

			</form>
		</div>
	</div>

        <!-- COLONNE DROITE : Aper√ßu (Timeline) -->
        <div class="col-lg-7">
            <div class="import-card h-100">
                <div class="d-flex justify-content-between align-items-center mb-4 pb-2 border-bottom">
                    <h4 class="mb-0 d-flex align-items-center text-dark fw-bold">
                        <i class="bi bi-clock-history me-2 text-primary"></i>
                        Derni√®res activit√©s
                    </h4>
                    <span class="badge bg-light text-dark border">10 derniers</span>
                </div>

                {% if dernieres_actions %}
                    <div class="timeline-container">
                        {% for action in dernieres_actions %}
                        <div class="d-flex gap-3 mb-3 pb-3 border-bottom border-light last-no-border">
                            <!-- Date Box -->
                            <div class="text-center pt-1" style="min-width: 60px;">
                                <div class="fw-bold text-dark" style="font-size: 0.9rem;">{{ action.timestamp.strftime('%d/%m') }}</div>
                                <div class="text-muted small">{{ action.timestamp.strftime('%H:%M') }}</div>
                            </div>

                            <!-- Content -->
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <span class="badge bg-primary-subtle text-primary border border-primary-subtle mb-1 rounded-pill">
                                            {{ action.action }}
                                        </span>
                                        <h6 class="mb-1 text-dark fw-bold" style="font-size: 0.95rem;">{{ action.objet_nom }}</h6>
                                    </div>
                                    <small class="text-muted fst-italic d-flex align-items-center">
                                        <i class="bi bi-person-circle me-1"></i>{{ action.nom_utilisateur }}
                                    </small>
                                </div>
                                <p class="mb-0 small text-secondary mt-1">{{ action.details }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    
                    <!-- CSS Inline pour retirer la bordure du dernier √©l√©ment -->
                    <style>
                        .last-no-border:last-child { border-bottom: none !important; margin-bottom: 0 !important; padding-bottom: 0 !important; }
                    </style>

                {% else %}
                    <div class="text-center py-5 text-muted">
                        <i class="bi bi-inbox display-1 d-block mb-3 opacity-25"></i>
                        <p class="fs-5">Aucune activit√© r√©cente enregistr√©e.</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<script>
    // Petit script pour pr√©-remplir les dates (Mois en cours)
    document.addEventListener('DOMContentLoaded', function() {
        const dateDebut = document.getElementById('date_debut');
        const dateFin = document.getElementById('date_fin');
        
        if (!dateDebut.value) {
            const now = new Date();
            const firstDay = new Date(now.getFullYear(), now.getMonth(), 1);
            const lastDay = new Date(now.getFullYear(), now.getMonth() + 1, 0); // Dernier jour du mois
            
            // Format YYYY-MM-DD
            const formatDate = (date) => {
                const d = new Date(date);
                let month = '' + (d.getMonth() + 1);
                let day = '' + d.getDate();
                const year = d.getFullYear();

                if (month.length < 2) month = '0' + month;
                if (day.length < 2) day = '0' + day;

                return [year, month, day].join('-');
            };

            dateDebut.value = formatDate(firstDay);
            dateFin.value = formatDate(lastDay);
        }
    })
	function toggleActionFilters(show) {
		const filterBox = document.getElementById('action-filters');
		if (show) {
			filterBox.style.display = 'block';
			// Petite animation d'apparition
			filterBox.style.opacity = 0;
			setTimeout(() => {
				filterBox.style.transition = 'opacity 0.3s ease';
				filterBox.style.opacity = 1;
			}, 10);
		} else {
			filterBox.style.display = 'none';
		}
	};
</script>

{% endblock %}
--- END OF FILE templates/rapports.html ---

--- START OF FILE templates/register.html ---

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cr√©er un Compte - LabFlow</title>
    
    <!-- Bootstrap 5 CSS LOCAL -->
    <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">
    <!-- Bootstrap Icons LOCAL -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap-icons.css') }}">
    <!-- Google Fonts (optionnel si local souhait√©) -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS Global -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="login-page-body">

    <div class="register-card">
        <!-- En-t√™te -->
        <div class="register-header">
            <div class="register-logo">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" aria-hidden="true">
                    <path d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-160v-112q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v112H160Z"/>
                </svg>
            </div>
            <h1 class="h4 fw-bold mb-1">Cr√©er un compte</h1>
            <p class="small opacity-75 mb-0">Rejoignez votre √©tablissement sur LabFlow</p>
        </div>

        <div class="p-4">
            <!-- Messages flash -->
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ 'danger' if category == 'error' else category }} py-2 px-3 small mb-3 shadow-sm border-0" role="alert">
                            <i class="bi bi-info-circle-fill me-2" aria-hidden="true"></i>{{ message | e }}
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}

            <form method="post" id="registerForm" novalidate>
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

                <!-- Nom d'utilisateur -->
                <div class="form-floating mb-3">
                    <input type="text" 
                           class="form-control" 
                           id="username" 
                           name="username" 
                           placeholder="Identifiant" 
                           required 
                           minlength="3"
                           maxlength="50"
                           pattern="^[a-zA-Z0-9_-]+$"
                           autocomplete="username"
                           aria-describedby="usernameHelp">
                    <label for="username">Nom d'utilisateur</label>
                    <div class="invalid-feedback">
                        Le nom d'utilisateur doit contenir entre 3 et 50 caract√®res (lettres, chiffres, - ou _)
                    </div>
                    <div id="usernameHelp" class="form-text small">Uniquement lettres, chiffres, tirets et underscores</div>
                </div>

                <!-- Email -->
                <div class="form-floating mb-3">
                    <input type="email" 
                           class="form-control" 
                           id="email" 
                           name="email" 
                           placeholder="name@example.com" 
                           required
                           maxlength="120"
                           autocomplete="email"
                           aria-describedby="emailHelp">
                    <label for="email">Adresse e-mail</label>
                    <div class="invalid-feedback">
                        Veuillez saisir une adresse e-mail valide
                    </div>
                    <div id="emailHelp" class="form-text small">Vous recevrez un email de confirmation</div>
                </div>

                <!-- Code Invitation -->
                <div class="mb-3">
                    <div class="form-floating">
                        <input type="text" 
                               class="form-control text-uppercase text-center fw-bold" 
                               id="code_invitation" 
                               name="code_invitation" 
                               placeholder="CODE" 
                               required 
                               maxlength="20"
                               pattern="^[A-Z0-9-]+$"
                               autocomplete="off"
                               aria-describedby="codeHelp">
                        <label for="code_invitation" class="w-100 text-center">Code d'invitation</label>
                        <div class="invalid-feedback text-center">
                            Le code d'invitation est requis
                        </div>
                    </div>
                    <div id="codeHelp" class="form-text small text-center mt-1">Fourni par votre √©tablissement</div>
                </div>

                <!-- Mot de passe -->
                <div class="mb-2 position-relative">
                    <div class="form-floating">
                        <input type="password" 
                               class="form-control" 
                               id="password" 
                               name="password" 
                               placeholder="Mot de passe" 
                               required
                               minlength="12"
                               maxlength="128"
                               autocomplete="new-password"
                               aria-describedby="passwordHelp">
                        <label for="password">Mot de passe</label>
                    </div>
                    <button type="button" 
                            class="btn btn-link position-absolute top-50 end-0 translate-middle-y text-decoration-none text-muted" 
                            id="togglePassword" 
                            style="z-index: 5; padding-right: 15px;"
                            aria-label="Afficher ou masquer le mot de passe">
                        <i class="bi bi-eye" id="togglePasswordIcon" aria-hidden="true"></i>
                    </button>
                </div>

                <!-- Barre de force -->
                <div class="strength-bar mb-2" 
                     role="progressbar" 
                     aria-valuenow="0" 
                     aria-valuemin="0" 
                     aria-valuemax="100"
                     aria-label="Force du mot de passe">
                    <div class="strength-bar-fill" id="strengthBar"></div>
                </div>

                <!-- Exigences -->
                <div class="password-requirements mb-3" id="passwordHelp">
                    <div class="row g-1">
                        <div class="col-6 requirement-item" id="req-length">
                            <i class="bi bi-circle" aria-hidden="true"></i> 
                            <span>12 car. min</span>
                        </div>
                        <div class="col-6 requirement-item" id="req-uppercase">
                            <i class="bi bi-circle" aria-hidden="true"></i> 
                            <span>1 Majuscule</span>
                        </div>
                        <div class="col-6 requirement-item" id="req-lowercase">
                            <i class="bi bi-circle" aria-hidden="true"></i> 
                            <span>1 Minuscule</span>
                        </div>
                        <div class="col-6 requirement-item" id="req-number">
                            <i class="bi bi-circle" aria-hidden="true"></i> 
                            <span>1 Chiffre</span>
                        </div>
                        <div class="col-6 requirement-item" id="req-special">
                            <i class="bi bi-circle" aria-hidden="true"></i> 
                            <span>1 Caract√®re sp√©cial</span>
                        </div>
                        <div class="col-6 requirement-item" id="req-match">
                            <i class="bi bi-circle" aria-hidden="true"></i> 
                            <span>Mots de passe identiques</span>
                        </div>
                    </div>
                </div>

                <!-- Confirmation -->
                <div class="form-floating mb-4">
                    <input type="password" 
                           class="form-control" 
                           id="password_confirm" 
                           name="password_confirm" 
                           placeholder="Confirmation" 
                           required
                           minlength="12"
                           maxlength="128"
                           autocomplete="new-password">
                    <label for="password_confirm">Confirmer le mot de passe</label>
                    <div class="invalid-feedback">Les mots de passe ne correspondent pas</div>
                </div>

                <!-- Bouton -->
                <button type="submit" 
                        class="btn btn-primary btn-register w-100 text-white rounded-3 py-2 mb-3"
                        id="submitBtn">
                    <span id="submitBtnText">S'inscrire</span>
                    <span id="submitBtnSpinner" class="spinner-border spinner-border-sm ms-2 d-none" role="status" aria-hidden="true"></span>
                </button>

                <!-- Footer -->
                <div class="text-center small">
                    <span class="text-muted">D√©j√† un compte ?</span>
                    <a href="{{ url_for('auth.login') }}" class="text-decoration-none fw-bold" style="color: var(--couleur-principale);">Se connecter</a>
                </div>
            </form>
        </div>
    </div>

    <!-- Bootstrap 5 JS LOCAL -->
    <script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>

    <script>
        (function() {
            'use strict';

            document.addEventListener('DOMContentLoaded', function() {
                const form = document.getElementById('registerForm');
                const password = document.getElementById('password');
                const passwordConfirm = document.getElementById('password_confirm');
                const togglePassword = document.getElementById('togglePassword');
                const togglePasswordIcon = document.getElementById('togglePasswordIcon');
                const strengthBar = document.getElementById('strengthBar');
                const submitBtn = document.getElementById('submitBtn');
                const submitBtnText = document.getElementById('submitBtnText');
                const submitBtnSpinner = document.getElementById('submitBtnSpinner');
                const codeInput = document.getElementById('code_invitation');

                let passwordValidationTimeout = null;

                // Force le code invitation en majuscules en temps r√©el
                codeInput.addEventListener('input', function() {
                    this.value = this.value.toUpperCase();
                });

                // Toggle Password Visibility
                togglePassword.addEventListener('click', function() {
                    const type = password.type === 'password' ? 'text' : 'password';
                    password.type = type;
                    passwordConfirm.type = type;
                    
                    togglePasswordIcon.classList.toggle('bi-eye');
                    togglePasswordIcon.classList.toggle('bi-eye-slash');
                    
                    const label = type === 'text' ? 'Masquer le mot de passe' : 'Afficher le mot de passe';
                    togglePassword.setAttribute('aria-label', label);
                });

                // Fonction pour v√©rifier la correspondance (appel√©e par les deux champs)
                function checkMatch() {
                    const valPass = password.value;
                    const valConf = passwordConfirm.value;
                    
                    // On consid√®re que √ßa matche si les deux ne sont pas vides et sont √©gaux
                    const isMatch = valPass.length > 0 && valConf.length > 0 && valPass === valConf;
                    
                    updateRequirement('req-match', isMatch);

                    // Gestion de la classe invalid de Bootstrap pour le champ confirm
                    if (valConf.length > 0 && valPass !== valConf) {
                        passwordConfirm.classList.add('is-invalid');
                    } else {
                        passwordConfirm.classList.remove('is-invalid');
                    }

                    return isMatch;
                }

                // Password Strength Logic avec debouncing
                password.addEventListener('input', function() {
                    clearTimeout(passwordValidationTimeout);
                    
                    passwordValidationTimeout = setTimeout(function() {
                        const value = password.value;
                        let strength = 0;
                        
                        // V√©rifications avec regex plus robustes
                        const hasLength = value.length >= 12;
                        const hasUpperCase = /[A-Z]/.test(value);
                        const hasLowerCase = /[a-z]/.test(value);
                        const hasNumber = /[0-9]/.test(value);
                        // Accepte tous les caract√®res non-alphanum√©riques
                        const hasSpecial = /[^A-Za-z0-9]/.test(value);

                        updateRequirement('req-length', hasLength);
                        updateRequirement('req-uppercase', hasUpperCase);
                        updateRequirement('req-lowercase', hasLowerCase);
                        updateRequirement('req-number', hasNumber);
                        updateRequirement('req-special', hasSpecial);

                        if (hasLength) strength += 20;
                        if (hasUpperCase) strength += 20;
                        if (hasLowerCase) strength += 20;
                        if (hasNumber) strength += 20;
                        if (hasSpecial) strength += 20;

                        strengthBar.style.width = strength + '%';
                        strengthBar.parentElement.setAttribute('aria-valuenow', strength);
                        
                        if (strength <= 40) {
                            strengthBar.style.backgroundColor = 'var(--couleur-erreur, #dc3545)';
                            strengthBar.parentElement.setAttribute('aria-label', 'Force du mot de passe : Faible');
                        } else if (strength <= 80) {
                            strengthBar.style.backgroundColor = 'var(--couleur-avertissement, #ffc107)';
                            strengthBar.parentElement.setAttribute('aria-label', 'Force du mot de passe : Moyenne');
                        } else {
                            strengthBar.style.backgroundColor = 'var(--couleur-succes, #198754)';
                            strengthBar.parentElement.setAttribute('aria-label', 'Force du mot de passe : Forte');
                        }

                        // V√©rifier aussi la correspondance quand on modifie le mot de passe principal
                        checkMatch();
                    }, 200);
                });

                // Validation Match Password sur l'input de confirmation
                passwordConfirm.addEventListener('input', checkMatch);

                function updateRequirement(id, isMet) {
                    const element = document.getElementById(id);
                    const icon = element.querySelector('i');
                    if (isMet) {
                        element.classList.add('met');
                        icon.className = 'bi bi-check-circle-fill';
                    } else {
                        element.classList.remove('met');
                        icon.className = 'bi bi-circle';
                    }
                }

                // Form Submit Validation
                form.addEventListener('submit', function(event) {
                    event.preventDefault();
                    event.stopPropagation();

                    const isPasswordMatch = password.value === passwordConfirm.value;
                    const isFormValid = form.checkValidity();

                    if (!isFormValid || !isPasswordMatch) {
                        if (!isPasswordMatch) {
                            passwordConfirm.classList.add('is-invalid');
                        }
                        form.classList.add('was-validated');
                        return false;
                    }

                    // D√©sactiver le bouton et afficher le spinner
                    submitBtn.disabled = true;
                    submitBtnText.textContent = 'Inscription en cours...';
                    submitBtnSpinner.classList.remove('d-none');

                    // Soumettre le formulaire
                    form.submit();
                });

                // Emp√™cher la soumission multiple (double-clic)
                let formSubmitted = false;
                form.addEventListener('submit', function() {
                    if (formSubmitted) {
                        return false;
                    }
                    formSubmitted = true;
                });
            });
        })();
    </script>
</body>
</html>
--- END OF FILE templates/register.html ---

--- START OF FILE templates/setup.html ---

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration Initiale - LabFlow</title>
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    <style>
        /* --- MAGIE DES IC√îNES DANS LES INPUTS --- */
        .form-floating-icon {
            position: relative;
        }
        
        /* L'ic√¥ne √† gauche */
        .form-floating-icon > i {
            position: absolute;
            top: 50%;
            left: 1rem;
            transform: translateY(-50%);
            color: #6c757d; /* Couleur discr√®te */
            z-index: 5;
            font-size: 1.1rem;
        }

        /* On d√©cale le texte de l'input vers la droite */
        .form-floating-icon > .form-control {
            padding-left: 3rem;
        }

        /* On d√©cale aussi le label pour qu'il ne soit pas sur l'ic√¥ne */
        .form-floating-icon > label {
            padding-left: 3rem;
        }

        /* --- STYLES VALIDATION (Inchang√©s) --- */
        .strength-bar {
            height: 4px;
            background: #e9ecef;
            border-radius: 2px;
            margin-top: 8px;
            overflow: hidden;
        }
        .strength-bar-fill {
            height: 100%;
            width: 0;
            transition: width 0.3s ease, background-color 0.3s ease;
        }
        .password-requirements {
            font-size: 0.75rem;
            background: rgba(255, 255, 255, 0.5);
            padding: 10px;
            border-radius: 8px;
            margin-top: 5px;
            border: 1px solid var(--couleur-bordure);
        }
        .requirement-item {
            margin-bottom: 2px;
            color: var(--texte-discret);
            transition: color 0.2s;
        }
        .requirement-item.met {
            color: var(--couleur-succes);
            font-weight: 600;
        }
        .requirement-item i {
            font-size: 0.8rem;
            margin-right: 4px;
        }
    </style>
</head>

<body class="login-page-body">

    <div class="login-form-container" style="max-width: 600px;">
        <!-- En-t√™te -->
        <div class="login-header">
            <div class="login-icon-wrapper" style="background: linear-gradient(135deg, #2c3e50 0%, #4ca1af 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="white" viewBox="0 0 16 16">
                    <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
                </svg>
            </div>
            <h2>Bienvenue sur LabFlow</h2>
            <p class="text-muted">Configuration de votre √©tablissement</p>
        </div>

        <!-- Messages Flash -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category == 'error' else category }} shadow-sm border-0 mb-4">
                        <i class="bi bi-info-circle-fill me-2"></i>{{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <form action="{{ url_for('auth.setup') }}" method="post" id="setupForm" class="login-form" novalidate>
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

            <!-- Nom √âtablissement -->
            <div class="form-floating form-floating-icon mb-3">
                <i class="bi bi-building"></i>
                <input type="text" class="form-control" id="nom_etablissement" name="nom_etablissement" placeholder="Nom" required autocomplete="organization">
                <label for="nom_etablissement">Nom de l'√©tablissement</label>
            </div>

            <!-- Admin User -->
            <div class="form-floating form-floating-icon mb-3">
                <i class="bi bi-person-badge"></i>
                <input type="text" class="form-control" id="username" name="username" placeholder="Admin" required autocomplete="username">
                <label for="username">Nom d'utilisateur Admin</label>
            </div>

            <!-- Email -->
            <div class="form-floating form-floating-icon mb-3">
                <i class="bi bi-envelope"></i>
                <input type="email" class="form-control" id="email" name="email" placeholder="Email" required autocomplete="email">
                <label for="email">Email Administrateur</label>
            </div>

            <!-- Mot de passe -->
            <div class="mb-2 position-relative">
                <div class="form-floating form-floating-icon">
                    <i class="bi bi-lock"></i>
                    <input type="password" class="form-control" id="password" name="password" placeholder="Mot de passe" required autocomplete="new-password">
                    <label for="password">Mot de passe</label>
                </div>
                <button type="button" class="btn btn-link position-absolute top-50 end-0 translate-middle-y text-decoration-none text-muted" 
                        id="togglePassword" style="z-index: 10; padding-right: 15px;">
                    <i class="bi bi-eye" id="togglePasswordIcon"></i>
                </button>
            </div>

            <!-- Barre de force -->
            <div class="strength-bar mb-2">
                <div class="strength-bar-fill" id="strengthBar"></div>
            </div>

            <!-- Exigences -->
            <div class="password-requirements mb-3">
                <div class="row g-1">
                    <div class="col-6 requirement-item" id="req-length"><i class="bi bi-circle"></i> 12 car. min</div>
                    <div class="col-6 requirement-item" id="req-uppercase"><i class="bi bi-circle"></i> 1 Majuscule</div>
                    <div class="col-6 requirement-item" id="req-lowercase"><i class="bi bi-circle"></i> 1 Minuscule</div>
                    <div class="col-6 requirement-item" id="req-number"><i class="bi bi-circle"></i> 1 Chiffre</div>
                    <div class="col-6 requirement-item" id="req-special"><i class="bi bi-circle"></i> 1 Caract√®re sp√©cial</div>
                    <div class="col-6 requirement-item" id="req-match"><i class="bi bi-circle"></i> Identiques</div>
                </div>
            </div>

            <!-- Confirmation -->
            <div class="form-floating form-floating-icon mb-4">
                <i class="bi bi-check2-circle"></i>
                <input type="password" class="form-control" id="password_confirm" name="password_confirm" placeholder="Confirmation" required autocomplete="new-password">
                <label for="password_confirm">Confirmer le mot de passe</label>
                <div class="invalid-feedback">Les mots de passe ne correspondent pas</div>
            </div>

            <button type="submit" class="btn-login mt-2">
                <i class="bi bi-rocket-takeoff-fill me-2"></i>
                Cr√©er et D√©marrer
            </button>
        </form>
    </div>

    <!-- Script de Validation (Identique) -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('setupForm');
            const password = document.getElementById('password');
            const passwordConfirm = document.getElementById('password_confirm');
            const togglePassword = document.getElementById('togglePassword');
            const togglePasswordIcon = document.getElementById('togglePasswordIcon');
            const strengthBar = document.getElementById('strengthBar');

            // Toggle Password Visibility
            togglePassword.addEventListener('click', function() {
                const type = password.type === 'password' ? 'text' : 'password';
                password.type = type;
                passwordConfirm.type = type;
                togglePasswordIcon.classList.toggle('bi-eye');
                togglePasswordIcon.classList.toggle('bi-eye-slash');
            });

            // Fonction de v√©rification de correspondance
            function checkMatch() {
                const valPass = password.value;
                const valConf = passwordConfirm.value;
                const isMatch = valPass.length > 0 && valConf.length > 0 && valPass === valConf;
                
                updateRequirement('req-match', isMatch);

                if (valConf.length > 0 && valPass !== valConf) {
                    passwordConfirm.classList.add('is-invalid');
                } else {
                    passwordConfirm.classList.remove('is-invalid');
                }
                return isMatch;
            }

            // Password Strength Logic
            password.addEventListener('input', function() {
                const value = this.value;
                let strength = 0;
                
                const hasLength = value.length >= 12;
                const hasUpperCase = /[A-Z]/.test(value);
                const hasLowerCase = /[a-z]/.test(value);
                const hasNumber = /[0-9]/.test(value);
                const hasSpecial = /[^A-Za-z0-9]/.test(value);

                updateRequirement('req-length', hasLength);
                updateRequirement('req-uppercase', hasUpperCase);
                updateRequirement('req-lowercase', hasLowerCase);
                updateRequirement('req-number', hasNumber);
                updateRequirement('req-special', hasSpecial);

                if (hasLength) strength += 20;
                if (hasUpperCase) strength += 20;
                if (hasLowerCase) strength += 20;
                if (hasNumber) strength += 20;
                if (hasSpecial) strength += 20;

                strengthBar.style.width = strength + '%';
                
                if (strength <= 40) {
                    strengthBar.style.backgroundColor = 'var(--couleur-erreur, #dc3545)'; 
                } else if (strength <= 80) {
                    strengthBar.style.backgroundColor = 'var(--couleur-avertissement, #ffc107)'; 
                } else {
                    strengthBar.style.backgroundColor = 'var(--couleur-succes, #198754)'; 
                }

                checkMatch();
            });

            passwordConfirm.addEventListener('input', checkMatch);

            function updateRequirement(id, isMet) {
                const element = document.getElementById(id);
                const icon = element.querySelector('i');
                if (isMet) {
                    element.classList.add('met');
                    icon.className = 'bi bi-check-circle-fill';
                } else {
                    element.classList.remove('met');
                    icon.className = 'bi bi-circle';
                }
            }

            // Validation √† la soumission
            form.addEventListener('submit', function(event) {
                if (!form.checkValidity() || password.value !== passwordConfirm.value) {
                    event.preventDefault();
                    event.stopPropagation();
                    if (password.value !== passwordConfirm.value) {
                        passwordConfirm.classList.add('is-invalid');
                    }
                }
                form.classList.add('was-validated');
            });
        });
    </script>
</body>
</html>
--- END OF FILE templates/setup.html ---

--- START OF FILE templates/sub_header.html ---

<nav class="sub-nav">
    <!-- Inventaire Complet -->
    <a href="{{ url_for('inventaire.inventaire') }}" 
       class="sub-nav-button {% if request.endpoint and request.endpoint == 'inventaire.inventaire' %}active{% endif %}">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="sub-nav-icon bi bi-credit-card-2-front-fill" viewBox="0 0 16 16">
		  <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2.5 1a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm0 3a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm3 0a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm3 0a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm3 0a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1z"/>
		</svg>
        <span>Inventaire Complet</span>
    </a>

    <!-- G√©rer les Armoires -->
    <a href="{{ url_for('main.gestion_armoires') }}" 
       class="sub-nav-button {% if request.endpoint and request.endpoint == 'main.gestion_armoires' %}active{% endif %}">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="sub-nav-icon bi bi-box2-fill" viewBox="0 0 16 16">
            <path d="M3.75 0a1 1 0 0 0-.8.4L.1 4.2a.5.5 0 0 0-.1.3V15a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V4.5a.5.5 0 0 0-.1-.3L13.05.4a1 1 0 0 0-.8-.4zM15 4.667V5H1v-.333L1.5 4h6V1h1v3h6z"/>
        </svg>
        <span>G√©rer les Armoires</span>
    </a>

    <!-- G√©rer les Cat√©gories -->
    <a href="{{ url_for('main.gestion_categories') }}" 
       class="sub-nav-button {% if request.endpoint and request.endpoint == 'main.gestion_categories' %}active{% endif %}">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="sub-nav-icon bi bi-inboxes-fill" viewBox="0 0 16 16">
            <path d="M4.98 1a.5.5 0 0 0-.39.188L1.54 5H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0A.5.5 0 0 1 10 5h4.46l-3.05-3.812A.5.5 0 0 0 11.02 1zM3.81.563A1.5 1.5 0 0 1 4.98 0h6.04a1.5 1.5 0 0 1 1.17.563l3.7 4.625a.5.5 0 0 1 .106.374l-.39 3.124A1.5 1.5 0 0 1 14.117 10H1.883A1.5 1.5 0 0 1 .394 8.686l-.39-3.124a.5.5 0 0 1 .106-.374zM.125 11.17A.5.5 0 0 1 .5 11H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0 .5.5 0 0 1 .5-.5h5.5a.5.5 0 0 1 .496.562l-.39 3.124A1.5 1.5 0 0 1 14.117 16H1.883a1.5 1.5 0 0 1-1.489-1.314l-.39-3.124a.5.5 0 0 1 .121-.393z"/>
        </svg>
        <span>G√©rer les Cat√©gories</span>
    </a>

    <!-- Calendrier de r√©servation -->
    {% if session.user_id %}
    <a href="{{ url_for('main.calendrier') }}" 
       class="sub-nav-button {% if request.endpoint and (request.endpoint.startswith('main.calendrier') or request.endpoint.startswith('main.vue_jour')) %}active{% endif %}">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="sub-nav-icon bi bi-calendar2-week-fill" viewBox="0 0 16 16">
            <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5m9.954 3H2.545c-.3 0-.545.224-.545.5v1c0 .276.244.5.545.5h10.91c.3 0 .545-.224.545-.5v-1c0-.276-.244-.5-.546-.5M8.5 7a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM3 10.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5m3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"/>
        </svg>
        <span>Calendrier de r√©servation</span>
    </a>
    {% endif %}
</nav>
--- END OF FILE templates/sub_header.html ---

--- START OF FILE templates/vue_jour.html ---

{% extends "base.html" %}
{% block title %}R√©servations pour le {{ date_concernee | strftime_fr('%A %d %B %Y') }}{% endblock %}

{% block content %}
<!-- AJOUT CRUCIAL : data-date pour le JS -->
<div class="main-container" 
     data-date="{{ date_concernee.strftime('%Y-%m-%d') }}"
     data-is-admin="{{ 'true' if session.user_role == 'admin' else 'false' }}" 
     data-user-id="{{ session.user_id }}">
    
    <!-- En-t√™te -->
    <div class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
        <h2 class="h3 mb-0 text-dark d-flex align-items-center gap-3">
            <!-- Ic√¥ne Calendrier (Orange/Jaune) -->
            <div class="rounded-3 d-flex align-items-center justify-content-center text-white shadow-sm" 
                 style="width: 48px; height: 48px; background: linear-gradient(135deg, #fd7e14 0%, #fcc419 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-calendar2-week-fill" viewBox="0 0 16 16">
                    <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5m9.954 3H2.545c-.3 0-.545.224-.545.5v1c0 .276.244.5.545.5h10.91c.3 0 .545-.224.545-.5v-1c0-.276-.244-.5-.546-.5M8.5 7a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM3 10.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5m3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"/>
                </svg>
            </div>
            <!-- Date avec majuscule automatique (text-capitalize) -->
            <span class="fw-bold text-capitalize">{{ date_concernee|strftime_fr('%A %d %B %Y') }}</span>
        </h2>
        
        <!-- Bouton Nouvelle R√©servation -->
        <div>
			<button id="new-reservation-btn" 
					class="btn btn-primary"
					data-bs-toggle="modal" 
					data-bs-target="#bookingModal">
				<i class="bi bi-plus-lg me-2"></i> Nouvelle R√©servation
			</button>
		</div>
    </div>
    
    <!-- Grille Calendrier Style Google -->
    <div class="card shadow-sm border-0" style="background: white; border-radius: 8px;">
        <div class="daily-schedule-wrapper">
            {% for hour in range(8, 21) %}
                <div class="schedule-row" data-hour="{{ hour }}">
                    <!-- Colonne Heure -->
                    <div class="time-col">
                        <span class="time-text">{{ "%02d:00"|format(hour) }}</span>
                    </div>
                    
                    <!-- Colonne √âv√©nements -->
                    <div class="events-col">
                        {% set events = reservations_par_heure.get(hour, {}) %}
                        
                        <!-- √âv√©nements (Suite) -->
                        {% if events['continues'] %}
                            {% for resa in events['continues'] %}
                            <div class="event-item continuation" data-groupe-id="{{ resa.groupe_id }}">
                                <div class="event-content">
                                    <small>(Suite)</small> {{ resa.nom_utilisateur }}
                                </div>
                            </div>
                            {% endfor %}
                        {% endif %}
                        
                        <!-- √âv√©nements (D√©but) -->
                        {% if events['starts'] %}
                            {% for resa in events['starts'] %}
                            <div class="event-item start" data-groupe-id="{{ resa.groupe_id }}">
                                <div class="event-content">
                                    <strong>{{ resa.debut_reservation|strftime('%H:%M') }} - {{ resa.fin_reservation|strftime('%H:%M') }}</strong>
                                    <span>{{ resa.nom_utilisateur }}</span>
                                </div>
                            </div>
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Tooltip plac√© ici pour √©viter les probl√®mes de z-index -->
<div id="reservation-tooltip" class="calendar-tooltip"></div>

{% include '_modals.html' %} 
{% include '_modale_danger.html' %}
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/modules/calendar-daily.js') }}" type="module"></script>
{% endblock %}
--- END OF FILE templates/vue_jour.html ---

--- START OF FILE templates/errors/404.html ---

{% extends "base.html" %}

{% block title %}Page non trouv√©e - LabFlow{% endblock %}

{% block content %}
<div class="container d-flex flex-column justify-content-center align-items-center" style="min-height: 60vh;">
    <div class="text-center">
        <h1 class="display-1 fw-bold text-primary">404</h1>
        <h2 class="h4 mb-4 text-muted">Oups ! Cette page semble introuvable.</h2>
        <p class="mb-5 text-secondary">Le lien que vous avez suivi est peut-√™tre cass√© ou la page a √©t√© supprim√©e.</p>
        <a href="{{ url_for('inventaire.index') }}" class="btn btn-primary px-4 py-2 rounded-pill shadow-sm">
            <i class="bi bi-house-door-fill me-2"></i>Retour √† l'accueil
        </a>
    </div>
</div>
{% endblock %}
--- END OF FILE templates/errors/404.html ---

--- START OF FILE templates/errors/429.html ---

{% extends "base.html" %}

{% block title %}Trop de requ√™tes - LabFlow{% endblock %}

{% block content %}
<div class="main-container d-flex align-items-center justify-content-center" style="min-height: 70vh;">
    
    <div class="card border-0 shadow-lg rounded-4 overflow-hidden" style="max-width: 500px; width: 100%;">
        <!-- Bandeau sup√©rieur d√©coratif -->
        <div style="height: 10px; background: linear-gradient(90deg, #ff9a56, #ff6a88);"></div>
        
        <div class="card-body p-5 text-center">
            
            <!-- Ic√¥ne Anim√©e -->
            <div class="mb-4 position-relative d-inline-block">
                <div class="rounded-circle d-flex align-items-center justify-content-center text-white shadow-sm" 
                     style="width: 80px; height: 80px; background: linear-gradient(135deg, #ff9a56 0%, #ff6a88 100%);">
                    <i class="bi bi-hourglass-split fs-1 pulse-icon"></i>
                </div>
            </div>

            <h1 class="h3 fw-bold text-dark mb-3">Oups ! Vous allez un peu trop vite.</h1>
            
            <p class="text-muted mb-4">
                Le serveur a re√ßu trop de demandes de votre part en tr√®s peu de temps. 
                Par mesure de s√©curit√©, nous avons temporairement mis votre acc√®s en pause.
            </p>

            <div class="alert alert-warning border-0 bg-warning-subtle text-warning-emphasis small mb-4">
                <i class="bi bi-clock-history me-2"></i>
                Veuillez patienter quelques instants avant de r√©essayer.
            </div>

            <div class="d-grid gap-2">
                <a href="{{ url_for('inventaire.index') }}" class="btn btn-primary btn-lg shadow-sm">
                    <i class="bi bi-house-door-fill me-2"></i>Retour √† l'accueil
                </a>
                <button onclick="window.history.back()" class="btn btn-link text-decoration-none text-muted">
                    R√©essayer la page pr√©c√©dente
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Style sp√©cifique pour l'animation du sablier -->
<style>
    .pulse-icon {
        animation: spin-slow 3s infinite linear;
    }

    @keyframes spin-slow {
        0% { transform: rotate(0deg); }
        25% { transform: rotate(180deg); }
        50% { transform: rotate(180deg); }
        75% { transform: rotate(360deg); }
        100% { transform: rotate(360deg); }
    }
</style>
{% endblock %}
--- END OF FILE templates/errors/429.html ---

--- START OF FILE templates/errors/500.html ---

{% extends "base.html" %}

{% block title %}Erreur Serveur - LabFlow{% endblock %}

{% block content %}
<div class="container d-flex flex-column justify-content-center align-items-center" style="min-height: 60vh;">
    <div class="text-center">
        <h1 class="display-1 fw-bold text-danger">500</h1>
        <h2 class="h4 mb-4 text-muted">Erreur interne du serveur.</h2>
        <p class="mb-5 text-secondary">Un probl√®me technique est survenu. Nos √©quipes ont √©t√© notifi√©es.</p>
        <a href="{{ url_for('inventaire.index') }}" class="btn btn-outline-danger px-4 py-2 rounded-pill">
            <i class="bi bi-arrow-clockwise me-2"></i>R√©essayer
        </a>
    </div>
</div>
{% endblock %}
--- END OF FILE templates/errors/500.html ---

--- START OF FILE tools/Keys.txt ---

SECRET_KEY='4d890aa022eeeec33f3aa0ab1c5dc5f71297eb39537372c8'
GMLCL_PRO_KEY='X@vierN@welQuentinS@cha14211825!'

--- END OF FILE tools/Keys.txt ---

--- START OF FILE tools/Secret_Key-GMLCL_Key.txt ---

export SECRET_KEY='0ce2f925e3ecc39e5ea2f3bc0ce917acb8fd787f92ba9f5a'
export GMLCL_PRO_KEY='LABO-PRO-2025-X@v14211825!S@cha14211825!Quentin14211825!'
export PEXELS_API_KEY='eXyUFwq2u2j0PdTD06ctisTuF577uGWasC6Wxz3cmzeffMAa6wCTK6gb'
--- END OF FILE tools/Secret_Key-GMLCL_Key.txt ---

--- START OF FILE tools/keygen_ui.py ---

import tkinter as tk
from tkinter import ttk
import hashlib
import pyperclip # Librairie pour copier dans le presse-papiers

# ATTENTION : Cette cl√© doit √™tre EXACTEMENT la m√™me que dans votre app.py
CLE_PRO_SECRETE = "LABO-PRO-2025-X@v14211825!S@cha14211825!Quentin14211825!"

def generer_et_afficher_cle():
    """R√©cup√®re l'ID, g√©n√®re la cl√© et l'affiche dans le champ de sortie."""
    instance_id = entry_id.get().strip()
    if not instance_id:
        entry_cle.delete(0, tk.END)
        entry_cle.insert(0, "Veuillez entrer un ID d'instance.")
        return

    # Le m√™me calcul que dans app.py
    chaine_a_hasher = f"{instance_id}-{CLE_PRO_SECRETE}"
    hash_complet = hashlib.sha256(chaine_a_hasher.encode('utf-8')).hexdigest()
    cle_licence = hash_complet[:16]

    # Afficher la cl√© g√©n√©r√©e
    entry_cle.delete(0, tk.END)
    entry_cle.insert(0, cle_licence)
    print(f"Cl√© g√©n√©r√©e pour {instance_id}: {cle_licence}")

def copier_cle():
    """Copie la cl√© g√©n√©r√©e dans le presse-papiers."""
    cle = entry_cle.get()
    if cle and "Veuillez" not in cle:
        pyperclip.copy(cle)
        # Petit feedback visuel
        btn_copier.config(text="Copi√© !")
        root.after(1500, lambda: btn_copier.config(text="Copier la cl√©"))

# --- Cr√©ation de l'interface graphique ---
root = tk.Tk()
root.title("G√©n√©rateur de Cl√© de Licence Pro")
root.geometry("500x200")
root.resizable(False, False)

# Style
style = ttk.Style()
style.configure("TLabel", font=("Arial", 10))
style.configure("TButton", font=("Arial", 10))
style.configure("TEntry", font=("Arial", 10))

# Frame principale
main_frame = ttk.Frame(root, padding="20")
main_frame.pack(fill="both", expand=True)

# Champ d'entr√©e pour l'ID d'instance
lbl_id = ttk.Label(main_frame, text="Identifiant d'Instance du Client :")
lbl_id.pack(pady=(0, 5), anchor="w")
entry_id = ttk.Entry(main_frame, width=60)
entry_id.pack(fill="x")

# Bouton de g√©n√©ration
btn_generer = ttk.Button(main_frame, text="G√©n√©rer la Cl√©", command=generer_et_afficher_cle)
btn_generer.pack(pady=10)

# Champ de sortie pour la cl√© g√©n√©r√©e
lbl_cle = ttk.Label(main_frame, text="Cl√© de Licence √† fournir :")
lbl_cle.pack(pady=(10, 5), anchor="w")
entry_cle = ttk.Entry(main_frame, width=60, state="readonly")
entry_cle.pack(fill="x", side="left", expand=True)

# Bouton pour copier
btn_copier = ttk.Button(main_frame, text="Copier", command=copier_cle)
btn_copier.pack(fill="x", side="right", padx=(5, 0))


# Lancer l'application
root.mainloop()
--- END OF FILE tools/keygen_ui.py ---

--- START OF FILE views/__init__.py ---


--- END OF FILE views/__init__.py ---

--- START OF FILE views/admin.py ---

# ============================================================
# FICHIER : views/admin.py (Version Durcie & S√©curis√©e)
# ============================================================
import json
import hashlib
import secrets
import re
import logging
from io import BytesIO
from urllib.parse import urlparse
from html import escape
from datetime import date, datetime, timedelta
from collections import defaultdict
from functools import wraps

from flask import (Blueprint, render_template, request, redirect, url_for,
                   flash, session, jsonify, send_file, current_app, abort)
from werkzeug.security import check_password_hash, generate_password_hash
from werkzeug.utils import secure_filename
from sqlalchemy.exc import IntegrityError, SQLAlchemyError
from sqlalchemy import func
from sqlalchemy.orm import joinedload

# Pour Excel
import openpyxl
from openpyxl import Workbook, load_workbook
from openpyxl.styles import Font, PatternFill, Alignment, Border, Side
from openpyxl.comments import Comment
from openpyxl.worksheet.datavalidation import DataValidation

# Pour PDF
from reportlab.lib import colors
from reportlab.lib.pagesizes import A4, landscape
from reportlab.lib.styles import getSampleStyleSheet, ParagraphStyle
from reportlab.lib.units import cm, mm
from reportlab.platypus import SimpleDocTemplate, Table, TableStyle, Paragraph, Spacer, Flowable
from reportlab.lib.enums import TA_CENTER, TA_RIGHT, TA_LEFT
from reportlab.graphics.shapes import Drawing, Rect, Line
from reportlab.graphics import renderPDF

# Imports Locaux
from extensions import limiter, cache
from db import db, Utilisateur, Parametre, Objet, Armoire, Categorie, Fournisseur, Kit, KitObjet, Budget, Depense, Echeance, Historique, Etablissement, Historique, Reservation, Suggestion
from utils import calculate_license_key, admin_required, login_required, log_action, get_etablissement_params, allowed_file

# ============================================================
# CONFIGURATION
# ============================================================
admin_bp = Blueprint('admin', __name__, template_folder='../templates', url_prefix='/admin')

MAX_EXPORT_LIMIT = 3000
MAX_FILE_SIZE = 10 * 1024 * 1024 # 10 Mo
PASSWORD_MIN_LENGTH = 12
EMAIL_REGEX = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'

# ============================================================
# UTILITAIRES DE S√âCURIT√â
# ============================================================
def hash_user_id(user_id):
    """Anonymise l'ID utilisateur pour les logs."""
    return hashlib.sha256(str(user_id).encode()).hexdigest()[:8]

def validate_email(email):
    return re.match(EMAIL_REGEX, email) is not None

def validate_password_strength(password):
    if len(password) < PASSWORD_MIN_LENGTH:
        return False, f"Le mot de passe doit contenir au moins {PASSWORD_MIN_LENGTH} caract√®res."
    if not re.search(r"[a-z]", password): return False, "Doit contenir une minuscule."
    if not re.search(r"[A-Z]", password): return False, "Doit contenir une majuscule."
    if not re.search(r"[0-9]", password): return False, "Doit contenir un chiffre."
    if not re.search(r"[^a-zA-Z0-9]", password): return False, "Doit contenir un caract√®re sp√©cial."
    return True, ""

def validate_url(url):
    if not url: return True
    try:
        result = urlparse(url)
        return all([result.scheme in ['http', 'https'], result.netloc])
    except ValueError:
        return False

def sanitize_for_excel(value):
    """Prot√®ge contre l'injection CSV/Excel."""
    if isinstance(value, str) and value.startswith(('=', '+', '-', '@')):
        return f"'{value}"
    return value

def generer_code_unique():
    for _ in range(10):
        code = f"LABFLOW-{secrets.token_hex(3).upper()}"
        nested = db.session.begin_nested()
        try:
            test_etab = Etablissement(nom="__TEST__", code_invitation=code)
            db.session.add(test_etab)
            db.session.flush()
            nested.rollback()
            return code
        except IntegrityError:
            nested.rollback()
            continue
    raise RuntimeError("Impossible de g√©n√©rer un code unique")

def json_serial(obj):
    if isinstance(obj, (datetime, date)): return obj.isoformat()
    raise TypeError(f"Type {type(obj)} non s√©rialisable")

def sanitize_filename(name):
    safe = re.sub(r'[^\w\s-]', '', str(name))
    cleaned = secure_filename(safe)
    return cleaned[:100] if cleaned else "Export"

# ============================================================
# ROUTE PRINCIPALE
# ============================================================
@admin_bp.route("/")
@admin_required
def admin():
    etablissement_id = session.get('etablissement_id')
    etablissement = db.session.get(Etablissement, etablissement_id)
    
    if not etablissement:
        admin_hash = hash_user_id(session.get('user_id'))
        current_app.logger.critical(f"Admin access attempt invalid etab by admin_{admin_hash}")
        flash("Erreur critique : √âtablissement introuvable.", "error")
        return redirect(url_for('auth.login'))

    if not etablissement.code_invitation:
        try:
            etablissement.code_invitation = generer_code_unique()
            db.session.commit()
        except Exception as e:
            db.session.rollback()
            current_app.logger.error("Erreur g√©n√©ration code invitation", exc_info=True)

    params = get_etablissement_params(etablissement_id)
    
    licence_info = {
        'is_pro': params.get('licence_statut') == 'PRO',
        'instance_id': params.get('instance_id', 'N/A'),
        'statut': params.get('licence_statut', 'FREE')
    }

    return render_template("admin.html", now=datetime.now(), licence=licence_info, etablissement=etablissement)

# ============================================================
# GESTION ARMOIRES / CAT√âGORIES
# ============================================================
@admin_bp.route("/ajouter", methods=["POST"])
@admin_required
@limiter.limit("30 per minute") # Rate limit ajout√©
def ajouter():
    etablissement_id = session['etablissement_id']
    type_objet = request.form.get("type")
    nom = request.form.get("nom", "").strip()
    
    if not nom:
        flash("Le nom ne peut pas √™tre vide.", "error")
        return redirect(request.referrer)

    Model = Armoire if type_objet == "armoire" else Categorie
    
    try:
        nouvel_element = Model(nom=nom, etablissement_id=etablissement_id)
        db.session.add(nouvel_element)
        db.session.commit()
        flash(f"L'√©l√©ment '{nom}' a √©t√© cr√©√©.", "success")
    except IntegrityError:
        db.session.rollback()
        flash(f"L'√©l√©ment '{nom}' existe d√©j√†.", "error")
    except Exception:
        db.session.rollback()
        current_app.logger.error(f"Erreur ajout {type_objet}", exc_info=True) # Log s√©curis√©
        flash("Erreur technique.", "error")
    
    redirect_to = "main.gestion_armoires" if type_objet == "armoire" else "main.gestion_categories"
    return redirect(url_for(redirect_to))

@admin_bp.route("/supprimer/<type_objet>/<int:id>", methods=["POST"])
@admin_required
@limiter.limit("20 per minute")
def supprimer(type_objet, id):
    etablissement_id = session['etablissement_id']
    
    if type_objet == "armoire":
        Model = Armoire
        redirect_to = "main.gestion_armoires"
    elif type_objet == "categorie":
        Model = Categorie
        redirect_to = "main.gestion_categories"
    else:
        abort(400)

    element = db.session.get(Model, id)

    if not element or element.etablissement_id != etablissement_id:
        current_app.logger.warning(f"IDOR SUSPECT: User {session.get('user_id')} delete {type_objet} {id}")
        abort(403)

    if type_objet == "armoire":
        count = db.session.query(Objet).filter_by(armoire_id=id, etablissement_id=etablissement_id).count()
    else:
        count = db.session.query(Objet).filter_by(categorie_id=id, etablissement_id=etablissement_id).count()
        
    if count > 0:
        flash(f"Impossible de supprimer '{element.nom}' car il contient encore {count} objet(s).", "error")
        return redirect(url_for(redirect_to))

    try:
        nom_element = element.nom
        db.session.delete(element)
        db.session.commit()
        flash(f"L'√©l√©ment '{nom_element}' a √©t√© supprim√©.", "success")
    except Exception:
        db.session.rollback()
        current_app.logger.error(f"Erreur suppression {type_objet}", exc_info=True)
        flash("Erreur technique.", "error")
    
    return redirect(url_for(redirect_to))

@admin_bp.route("/modifier_armoire", methods=["POST"])
@admin_required
def modifier_armoire():
    try:
        etablissement_id = session['etablissement_id']
        data = request.get_json()
        if not data: return jsonify(success=False, error="Donn√©es manquantes"), 400
            
        armoire_id = data.get("id")
        nouveau_nom = data.get("nom", "").strip()

        if not all([armoire_id, nouveau_nom]): return jsonify(success=False, error="Donn√©es invalides"), 400

        armoire = db.session.get(Armoire, armoire_id)
        if not armoire or armoire.etablissement_id != etablissement_id:
            return jsonify(success=False, error="Armoire introuvable"), 404

        armoire.nom = nouveau_nom
        db.session.commit()
        return jsonify(success=True, nouveau_nom=nouveau_nom)
    
    except IntegrityError:
        db.session.rollback()
        return jsonify(success=False, error="Ce nom existe d√©j√†"), 409
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur modifier_armoire", exc_info=True)
        return jsonify(success=False, error="Erreur serveur"), 500

@admin_bp.route("/modifier_categorie", methods=["POST"])
@admin_required
def modifier_categorie():
    try:
        etablissement_id = session['etablissement_id']
        data = request.get_json()
        if not data: return jsonify(success=False, error="Donn√©es manquantes"), 400

        categorie_id = data.get("id")
        nouveau_nom = data.get("nom", "").strip()

        if not all([categorie_id, nouveau_nom]): return jsonify(success=False, error="Donn√©es invalides"), 400

        categorie = db.session.get(Categorie, categorie_id)
        if not categorie or categorie.etablissement_id != etablissement_id:
            return jsonify(success=False, error="Cat√©gorie introuvable"), 404

        categorie.nom = nouveau_nom
        db.session.commit()
        return jsonify(success=True, nouveau_nom=nouveau_nom)
    except IntegrityError:
        db.session.rollback()
        return jsonify(success=False, error="Ce nom existe d√©j√†"), 409
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur modifier_categorie", exc_info=True)
        return jsonify(success=False, error="Erreur serveur"), 500

# ============================================================
# GESTION UTILISATEURS (DURCIE)
# ============================================================
@admin_bp.route("/utilisateurs")
@admin_required
def gestion_utilisateurs():
    etablissement_id = session['etablissement_id']
    utilisateurs = db.session.execute(
        db.select(Utilisateur)
        .filter_by(etablissement_id=etablissement_id)
        .order_by(Utilisateur.nom_utilisateur)
        .limit(100)
    ).scalars().all()

    breadcrumbs = [{'text': 'Administration', 'url': url_for('admin.admin')}, {'text': 'Utilisateurs'}]
    return render_template("admin_utilisateurs.html", utilisateurs=utilisateurs, breadcrumbs=breadcrumbs, now=datetime.now)

@admin_bp.route("/utilisateurs/ajouter", methods=["POST"])
@admin_required
@limiter.limit("5 per minute") # Rate Limit Strict
def ajouter_utilisateur():
    etablissement_id = session['etablissement_id']
    nom_utilisateur = request.form.get('nom_utilisateur', '').strip()
    email = request.form.get('email', '').strip()
    mot_de_passe = request.form.get('mot_de_passe', '').strip()
    est_admin = 'est_admin' in request.form

    if not nom_utilisateur or not mot_de_passe:
        flash("Champs obligatoires manquants.", "danger")
        return redirect(url_for('admin.gestion_utilisateurs'))
    
    if email and not validate_email(email):
        flash("Format d'email invalide.", "danger")
        return redirect(url_for('admin.gestion_utilisateurs'))

    is_valid, error_msg = validate_password_strength(mot_de_passe)
    if not is_valid:
        flash(error_msg, "danger")
        return redirect(url_for('admin.gestion_utilisateurs'))

    try:
        nouvel_utilisateur = Utilisateur(
            nom_utilisateur=nom_utilisateur,
            email=email or None,
            mot_de_passe=generate_password_hash(mot_de_passe, method='scrypt'),
            role='admin' if est_admin else 'utilisateur',
            etablissement_id=etablissement_id
        )
        db.session.add(nouvel_utilisateur)
        db.session.commit()
        
        admin_hash = hash_user_id(session['user_id'])
        current_app.logger.info(f"Utilisateur cr√©√© par admin_{admin_hash}")
        flash(f"Utilisateur '{nom_utilisateur}' cr√©√©.", "success")
        
    except IntegrityError:
        db.session.rollback()
        # ANTI-ENUMERATION : Message g√©n√©rique
        flash("Erreur : Impossible de cr√©er cet utilisateur (nom peut-√™tre d√©j√† pris).", "danger")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur cr√©ation user", exc_info=True)
        flash("Erreur technique.", "danger")

    return redirect(url_for('admin.gestion_utilisateurs'))

@admin_bp.route("/utilisateurs/modifier_email/<int:id_user>", methods=["POST"])
@admin_required
def modifier_email_utilisateur(id_user):
    etablissement_id = session['etablissement_id']
    email = request.form.get('email', '').strip()
    
    if email and not validate_email(email):
        flash("Format d'email invalide.", "error")
        return redirect(url_for('admin.gestion_utilisateurs'))

    user = db.session.get(Utilisateur, id_user)
    if not user or user.etablissement_id != etablissement_id:
        flash("Utilisateur introuvable.", "error")
        return redirect(url_for('admin.gestion_utilisateurs'))

    try:
        user.email = email if email else None
        db.session.commit()
        flash("Email mis √† jour.", "success")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur modif email", exc_info=True)
        flash("Erreur technique.", "error")

    return redirect(url_for('admin.gestion_utilisateurs'))

@admin_bp.route("/utilisateurs/reinitialiser_mdp/<int:id_user>", methods=["POST"])
@admin_required
@limiter.limit("5 per minute") # Rate Limit Strict
def reinitialiser_mdp(id_user):
    etablissement_id = session['etablissement_id']
    
    if id_user == session['user_id']:
        flash("Action impossible sur soi-m√™me.", "warning")
        return redirect(url_for('admin.gestion_utilisateurs'))

    nouveau_mdp = request.form.get('nouveau_mot_de_passe')
    is_valid, error_msg = validate_password_strength(nouveau_mdp)
    if not is_valid:
        flash(error_msg, "error")
        return redirect(url_for('admin.gestion_utilisateurs'))

    user = db.session.get(Utilisateur, id_user)
    if not user or user.etablissement_id != etablissement_id:
        flash("Utilisateur introuvable.", "error")
        return redirect(url_for('admin.gestion_utilisateurs'))

    try:
        user.mot_de_passe = generate_password_hash(nouveau_mdp, method='scrypt')
        db.session.commit()
        flash(f"Mot de passe r√©initialis√© pour {user.nom_utilisateur}.", "success")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur reset MDP", exc_info=True)
        flash("Erreur technique.", "error")

    return redirect(url_for('admin.gestion_utilisateurs'))

@admin_bp.route("/utilisateurs/supprimer/<int:id_user>", methods=["POST"])
@admin_required
@limiter.limit("5 per minute") # Rate Limit Strict
def supprimer_utilisateur(id_user):
    if id_user == session['user_id']:
        flash("Impossible de supprimer son propre compte.", "error")
        return redirect(url_for('admin.gestion_utilisateurs'))
    
    etablissement_id = session['etablissement_id']
    user = db.session.get(Utilisateur, id_user)
    
    if not user or user.etablissement_id != etablissement_id:
        flash("Utilisateur introuvable.", "error")
        return redirect(url_for('admin.gestion_utilisateurs'))

    try:
        has_history = db.session.query(Historique).filter_by(utilisateur_id=user.id).first()
        has_reservations = db.session.query(Reservation).filter_by(utilisateur_id=user.id).first()

        if has_history or has_reservations:
            user.nom_utilisateur = f"Utilisateur_Supprim√©_{user.id}_{secrets.token_hex(2)}"
            user.email = None
            user.mot_de_passe = "deleted"
            user.role = "desactive"
            db.session.commit()
            flash("Utilisateur anonymis√© et d√©sactiv√© (historique conserv√©).", "warning")
        else:
            db.session.delete(user)
            db.session.commit()
            flash("Utilisateur supprim√© d√©finitivement.", "success")
            
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur suppression user", exc_info=True)
        flash("Erreur technique.", "error")
        
    return redirect(url_for('admin.gestion_utilisateurs'))

@admin_bp.route("/utilisateurs/promouvoir/<int:id_user>", methods=["POST"])
@admin_required
@limiter.limit("3 per minute") # Rate Limit Tr√®s Strict
def promouvoir_utilisateur(id_user):
    if id_user == session['user_id']:
        flash("Action impossible sur soi-m√™me.", "warning")
        return redirect(url_for('admin.gestion_utilisateurs'))
    
    etablissement_id = session['etablissement_id']
    target_user = db.session.get(Utilisateur, id_user)
    current_admin = db.session.get(Utilisateur, session['user_id'])
    
    if not target_user or target_user.etablissement_id != etablissement_id:
        flash("Utilisateur cible introuvable.", "danger")
        return redirect(url_for('admin.gestion_utilisateurs'))

    password_confirm = request.form.get('password')
    if not password_confirm or not check_password_hash(current_admin.mot_de_passe, password_confirm):
        flash("Mot de passe incorrect.", "danger")
        return redirect(url_for('admin.gestion_utilisateurs'))

    try:
        target_user.role = 'admin'
        current_admin.role = 'utilisateur'
        db.session.commit()
        session['user_role'] = 'utilisateur'
        flash(f"Passation r√©ussie ! {target_user.nom_utilisateur} est administrateur.", "success")
        return redirect(url_for('inventaire.index'))
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur promotion", exc_info=True)
        flash("Erreur technique.", "danger")
        return redirect(url_for('admin.gestion_utilisateurs'))

# ============================================================
# GESTION KITS
# ============================================================
@admin_bp.route("/kits")
@admin_required
def gestion_kits():
    etablissement_id = session['etablissement_id']
    kits_data = db.session.execute(
        db.select(Kit, func.count(KitObjet.id).label('count'))
        .outerjoin(KitObjet, Kit.id == KitObjet.kit_id)
        .filter(Kit.etablissement_id == etablissement_id)
        .group_by(Kit.id)
        .order_by(Kit.nom)
    ).mappings().all()
    breadcrumbs = [{'text': 'Administration', 'url': url_for('admin.admin')}, {'text': 'Kits'}]
    return render_template("admin_kits.html", kits=kits_data, breadcrumbs=breadcrumbs)

@admin_bp.route("/kits/ajouter", methods=["POST"])
@admin_required
@limiter.limit("10 per minute")
def ajouter_kit():
    etablissement_id = session['etablissement_id']
    nom = request.form.get("nom", "").strip()
    description = request.form.get("description", "").strip()

    if not nom:
        flash("Le nom du kit est requis.", "danger")
        return redirect(url_for('admin.gestion_kits'))

    try:
        nouveau_kit = Kit(nom=nom, description=description, etablissement_id=etablissement_id)
        db.session.add(nouveau_kit)
        db.session.commit()
        flash(f"Kit '{nom}' cr√©√©.", "success")
        return redirect(url_for('admin.modifier_kit', kit_id=nouveau_kit.id))
    except IntegrityError:
        db.session.rollback()
        flash("Un kit portant ce nom existe d√©j√†.", "danger")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur ajout kit", exc_info=True)
        flash("Erreur technique.", "danger")
    return redirect(url_for('admin.gestion_kits'))

@admin_bp.route("/kits/modifier/<int:kit_id>", methods=["GET", "POST"])
@admin_required
def modifier_kit(kit_id):
    etablissement_id = session['etablissement_id']
    kit = db.session.get(Kit, kit_id)
    
    if not kit or kit.etablissement_id != etablissement_id:
        flash("Kit introuvable.", "danger")
        return redirect(url_for('admin.gestion_kits'))

    if request.method == "POST":
        try:
            objet_id_str = request.form.get("objet_id")
            if objet_id_str:
                objet_id = int(objet_id_str)
                quantite = int(request.form.get("quantite", 1))
                if quantite <= 0: raise ValueError("Quantit√© > 0 requise.")

                objet = db.session.get(Objet, objet_id)
                if not objet or objet.etablissement_id != etablissement_id:
                    raise ValueError("Objet invalide.")
                
                assoc = db.session.execute(db.select(KitObjet).filter_by(kit_id=kit.id, objet_id=objet_id)).scalar_one_or_none()
                if assoc:
                    assoc.quantite += quantite
                else:
                    db.session.add(KitObjet(kit_id=kit.id, objet_id=objet_id, quantite=quantite, etablissement_id=etablissement_id))
                flash(f"Objet '{objet.nom}' ajout√©.", "success")
                db.session.commit()
            else:
                modifs = 0
                for key, value in request.form.items():
                    if key.startswith("quantite_"):
                        try:
                            k_id = int(key.split("_")[1])
                            val = int(value)
                            assoc = db.session.get(KitObjet, k_id)
                            if assoc and assoc.kit_id == kit.id:
                                if val > 0:
                                    assoc.quantite = val
                                    modifs += 1
                                else:
                                    db.session.delete(assoc)
                                    modifs += 1
                        except ValueError: continue
                if modifs > 0:
                    db.session.commit()
                    flash("Quantit√©s mises √† jour.", "success")
        except Exception as e:
            db.session.rollback()
            current_app.logger.error("Erreur modif kit", exc_info=True)
            flash(f"Erreur : {str(e)}", "danger")
        return redirect(url_for('admin.modifier_kit', kit_id=kit_id))

    objets_in_kit = db.session.execute(db.select(KitObjet).filter_by(kit_id=kit.id).options(joinedload(KitObjet.objet))).scalars().all()
    ids_in_kit = [o.objet_id for o in objets_in_kit]
    objets_disponibles = db.session.execute(
        db.select(Objet).filter(Objet.etablissement_id == etablissement_id)
        .filter(~Objet.id.in_(ids_in_kit) if ids_in_kit else True)
        .order_by(Objet.nom).limit(500)
    ).scalars().all()

    breadcrumbs = [{'text': 'Admin', 'url': url_for('admin.admin')}, {'text': 'Kits', 'url': url_for('admin.gestion_kits')}, {'text': kit.nom}]
    return render_template("admin_kit_modifier.html", kit=kit, breadcrumbs=breadcrumbs, objets_in_kit=objets_in_kit, objets_disponibles=objets_disponibles)

@admin_bp.route("/kits/retirer_objet/<int:kit_objet_id>", methods=["POST"])
@admin_required
def retirer_objet_kit(kit_objet_id):
    etablissement_id = session['etablissement_id']
    assoc = db.session.get(KitObjet, kit_objet_id)
    if not assoc or assoc.etablissement_id != etablissement_id:
        flash("Objet introuvable.", "danger")
        return redirect(url_for('admin.gestion_kits'))
    kit_id = assoc.kit_id
    try:
        db.session.delete(assoc)
        db.session.commit()
        flash("Objet retir√©.", "success")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur retrait objet kit", exc_info=True)
        flash("Erreur technique.", "danger")
    return redirect(url_for('admin.modifier_kit', kit_id=kit_id))

@admin_bp.route("/kits/supprimer/<int:kit_id>", methods=["POST"])
@admin_required
def supprimer_kit(kit_id):
    etablissement_id = session['etablissement_id']
    kit = db.session.get(Kit, kit_id)
    if kit and kit.etablissement_id == etablissement_id:
        try:
            db.session.delete(kit)
            db.session.commit()
            flash("Kit supprim√©.", "success")
        except Exception:
            db.session.rollback()
            current_app.logger.error("Erreur suppression kit", exc_info=True)
            flash("Erreur technique.", "danger")
    else:
        flash("Kit introuvable.", "danger")
    return redirect(url_for('admin.gestion_kits'))

# ============================================================
# GESTION √âCH√âANCES
# ============================================================
@admin_bp.route("/echeances", methods=['GET'])
@admin_required
def gestion_echeances():
    etablissement_id = session['etablissement_id']
    echeances = db.session.execute(db.select(Echeance).filter_by(etablissement_id=etablissement_id).order_by(Echeance.date_echeance.asc())).scalars().all()
    breadcrumbs = [{'text': 'Admin', 'url': url_for('admin.admin')}, {'text': '√âch√©ances'}]
    return render_template("admin_echeances.html", echeances=echeances, breadcrumbs=breadcrumbs, date_actuelle=date.today())

@admin_bp.route("/echeances/ajouter", methods=['POST'])
@admin_required
def ajouter_echeance():
    etablissement_id = session['etablissement_id']
    intitule = request.form.get('intitule', '').strip()
    date_str = request.form.get('date_echeance')
    details = request.form.get('details', '').strip()

    if not intitule or not date_str:
        flash("Champs obligatoires manquants.", "warning")
        return redirect(url_for('admin.gestion_echeances'))

    try:
        date_echeance = datetime.strptime(date_str, '%Y-%m-%d').date()
        db.session.add(Echeance(intitule=intitule, date_echeance=date_echeance, details=details or None, etablissement_id=etablissement_id))
        db.session.commit()
        flash("√âch√©ance ajout√©e.", "success")
    except ValueError:
        flash("Format de date invalide.", "warning")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur ajout √©ch√©ance", exc_info=True)
        flash("Erreur technique.", "danger")
    return redirect(url_for('admin.gestion_echeances'))

@admin_bp.route("/echeances/modifier/<int:id>", methods=['POST'])
@admin_required
def modifier_echeance(id):
    etablissement_id = session['etablissement_id']
    echeance = db.session.get(Echeance, id)
    if not echeance or echeance.etablissement_id != etablissement_id:
        flash("√âch√©ance introuvable.", "danger")
        return redirect(url_for('admin.gestion_echeances'))

    try:
        echeance.intitule = request.form.get('intitule', '').strip()
        echeance.date_echeance = datetime.strptime(request.form.get('date_echeance'), '%Y-%m-%d').date()
        echeance.details = request.form.get('details', '').strip() or None
        echeance.traite = 1 if 'traite' in request.form else 0
        db.session.commit()
        flash("√âch√©ance modifi√©e.", "success")
    except ValueError:
        flash("Format de date invalide.", "warning")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur modif √©ch√©ance", exc_info=True)
        flash("Erreur technique.", "danger")
    return redirect(url_for('admin.gestion_echeances'))

@admin_bp.route("/echeances/supprimer/<int:id>", methods=['POST'])
@admin_required
def supprimer_echeance(id):
    etablissement_id = session['etablissement_id']
    echeance = db.session.get(Echeance, id)
    if not echeance or echeance.etablissement_id != etablissement_id:
        flash("√âch√©ance introuvable.", "danger")
        return redirect(url_for('admin.gestion_echeances'))
    try:
        db.session.delete(echeance)
        db.session.commit()
        flash("√âch√©ance supprim√©e.", "success")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur suppression √©ch√©ance", exc_info=True)
        flash("Erreur technique.", "danger")
    return redirect(url_for('admin.gestion_echeances'))

# ============================================================
# GESTION BUDGET
# ============================================================
@admin_bp.route("/budget", methods=['GET'])
@admin_required
def budget():
    etablissement_id = session['etablissement_id']
    now = datetime.now()
    annee_scolaire_actuelle = now.year if now.month >= 8 else now.year - 1
    try:
        annee_selectionnee = int(request.args.get('annee', annee_scolaire_actuelle))
    except ValueError:
        annee_selectionnee = annee_scolaire_actuelle

    budgets_archives = db.session.execute(db.select(Budget).filter_by(etablissement_id=etablissement_id).order_by(Budget.annee.desc())).scalars().all()
    budget_affiche = db.session.execute(db.select(Budget).filter_by(etablissement_id=etablissement_id, annee=annee_selectionnee)).scalar_one_or_none()

    if not budget_affiche and not budgets_archives:
        try:
            budget_affiche = Budget(annee=annee_selectionnee, montant_initial=0.0, etablissement_id=etablissement_id)
            db.session.add(budget_affiche)
            db.session.commit()
            budgets_archives.insert(0, budget_affiche)
        except IntegrityError: db.session.rollback()

    depenses = []
    total_depenses = 0
    solde = 0
    cloture_autorisee = False

    if budget_affiche:
        depenses = db.session.execute(
            db.select(Depense).filter_by(budget_id=budget_affiche.id).options(joinedload(Depense.fournisseur)).order_by(Depense.date_depense.desc())
        ).scalars().all()
        total_depenses = sum(d.montant for d in depenses)
        solde = budget_affiche.montant_initial - total_depenses
        if date.today() >= date(budget_affiche.annee + 1, 6, 1): cloture_autorisee = True

    budget_actuel_pour_modales = budget_affiche if budget_affiche and not budget_affiche.cloture else db.session.execute(db.select(Budget).filter_by(etablissement_id=etablissement_id, cloture=False).order_by(Budget.annee.desc())).scalars().first()
    annee_proposee = annee_scolaire_actuelle
    if budgets_archives and budgets_archives[0].annee >= annee_scolaire_actuelle: annee_proposee = budgets_archives[0].annee + 1
    fournisseurs = db.session.execute(db.select(Fournisseur).filter_by(etablissement_id=etablissement_id).order_by(Fournisseur.nom)).scalars().all()
    
    return render_template("budget.html", breadcrumbs=[{'text': 'Admin', 'url': url_for('admin.admin')}, {'text': 'Budget'}], 
                           budget_affiche=budget_affiche, budget_actuel_pour_modales=budget_actuel_pour_modales,
                           annee_proposee_pour_creation=annee_proposee, depenses=depenses, total_depenses=total_depenses,
                           solde=solde, fournisseurs=fournisseurs, budgets_archives=budgets_archives,
                           annee_selectionnee=annee_selectionnee, cloture_autorisee=cloture_autorisee, now=now)

@admin_bp.route("/budget/definir", methods=['POST'])
@admin_required
def definir_budget():
    etablissement_id = session['etablissement_id']
    try:
        montant = float(request.form.get('montant_initial', '0').replace(',', '.'))
        annee = int(request.form.get('annee'))
        if montant < 0: raise ValueError("Montant n√©gatif.")
        
        budget = db.session.execute(db.select(Budget).filter_by(annee=annee, etablissement_id=etablissement_id)).scalar_one_or_none()
        if budget:
            budget.montant_initial = montant
            budget.cloture = False
            flash(f"Budget {annee} mis √† jour.", "success")
        else:
            db.session.add(Budget(annee=annee, montant_initial=montant, etablissement_id=etablissement_id))
            flash(f"Budget {annee} cr√©√©.", "success")
        db.session.commit()
    except Exception as e:
        db.session.rollback()
        current_app.logger.error("Erreur d√©finition budget", exc_info=True)
        flash("Erreur technique.", "danger")
    return redirect(url_for('admin.budget', annee=annee if 'annee' in locals() else None))

@admin_bp.route("/budget/depense/ajouter", methods=['POST'])
@admin_required
def ajouter_depense():
    etablissement_id = session['etablissement_id']
    try:
        budget = db.session.get(Budget, int(request.form.get('budget_id')))
        if not budget or budget.etablissement_id != etablissement_id or budget.cloture:
            raise ValueError("Budget invalide ou cl√¥tur√©.")

        est_bon_achat = 'est_bon_achat' in request.form
        fournisseur_id = int(request.form.get('fournisseur_id')) if not est_bon_achat else None
        montant = float(request.form.get('montant').replace(',', '.'))
        date_depense = datetime.strptime(request.form.get('date_depense'), '%Y-%m-%d').date()

        db.session.add(Depense(
            date_depense=date_depense, contenu=request.form.get('contenu', '').strip(),
            montant=montant, est_bon_achat=est_bon_achat, fournisseur_id=fournisseur_id,
            budget_id=budget.id, etablissement_id=etablissement_id
        ))
        db.session.commit()
        flash("D√©pense ajout√©e.", "success")
    except Exception as e:
        db.session.rollback()
        current_app.logger.error("Erreur ajout d√©pense", exc_info=True)
        flash("Erreur technique.", "danger")
    return redirect(url_for('admin.budget'))

@admin_bp.route("/budget/depense/supprimer/<int:id>", methods=['POST'])
@admin_required
def supprimer_depense(id):
    etablissement_id = session['etablissement_id']
    depense = db.session.get(Depense, id)
    if depense and depense.etablissement_id == etablissement_id:
        try:
            db.session.delete(depense)
            db.session.commit()
            flash("D√©pense supprim√©e.", "success")
        except Exception:
            db.session.rollback()
            current_app.logger.error("Erreur suppression d√©pense", exc_info=True)
            flash("Erreur technique.", "danger")
    else:
        flash("D√©pense introuvable.", "danger")
    return redirect(url_for('admin.budget'))

@admin_bp.route("/budget/cloturer", methods=['POST'])
@admin_required
def cloturer_budget():
    etablissement_id = session['etablissement_id']
    try:
        budget = db.session.get(Budget, int(request.form.get('budget_id')))
        if budget and budget.etablissement_id == etablissement_id:
            budget.cloture = True
            db.session.commit()
            flash("Budget cl√¥tur√©.", "success")
        else:
            flash("Budget introuvable.", "danger")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur cl√¥ture budget", exc_info=True)
        flash("Erreur technique.", "danger")
    return redirect(url_for('admin.budget'))

@admin_bp.route("/budget/exporter", methods=['GET'])
@admin_required
def exporter_budget():
    etablissement_id = session['etablissement_id']
    date_debut_str = request.args.get('date_debut')
    date_fin_str = request.args.get('date_fin')
    format_type = request.args.get('format')
    
    if not all([date_debut_str, date_fin_str, format_type]):
        flash("Param√®tres manquants.", "error")
        return redirect(url_for('admin.budget'))
    
    try:
        date_debut = datetime.strptime(date_debut_str, '%Y-%m-%d').date()
        date_fin = datetime.strptime(date_fin_str, '%Y-%m-%d').date()
        
        depenses = db.session.execute(
            db.select(Depense).options(joinedload(Depense.fournisseur))
            .filter_by(etablissement_id=etablissement_id)
            .filter(Depense.date_depense >= date_debut, Depense.date_depense <= date_fin)
            .order_by(Depense.date_depense.asc())
        ).scalars().all()
        
        if not depenses:
            flash("Aucune d√©pense sur cette p√©riode.", "warning")
            return redirect(url_for('admin.budget'))
        
        data_export = []
        total = 0.0
        for d in depenses:
            nom_fournisseur = "Petit mat√©riel" if d.est_bon_achat else (d.fournisseur.nom if d.fournisseur else "Inconnu")
            data_export.append({
                'date': d.date_depense.strftime('%d/%m/%Y'),
                'fournisseur': nom_fournisseur,
                'contenu': d.contenu or "-",
                'montant': d.montant
            })
            total += d.montant
        
        metadata = {
            'etablissement': session.get('nom_etablissement', 'Mon √âtablissement'),
            'date_debut': date_debut.strftime('%d/%m/%Y'),
            'date_fin': date_fin.strftime('%d/%m/%Y'),
            'date_generation': datetime.now().strftime('%d/%m/%Y √† %H:%M'),
            'nombre_depenses': len(data_export),
            'total': total
        }

        log_action('export_budget', f"Format: {format_type}")
        
        if format_type == 'excel': return generer_budget_excel_pro(data_export, metadata)
        else: return generer_budget_pdf_pro(data_export, metadata)
    
    except Exception:
        current_app.logger.error("Erreur export budget", exc_info=True)
        flash("Erreur lors de l'export.", "error")
        return redirect(url_for('admin.budget'))

# ============================================================
# GESTION FOURNISSEURS
# ============================================================
@admin_bp.route("/fournisseurs", methods=['GET'])
@admin_required
def gestion_fournisseurs():
    etablissement_id = session['etablissement_id']
    fournisseurs = db.session.execute(
        db.select(Fournisseur, func.count(Depense.id).label('depenses_count'))
        .outerjoin(Depense, Fournisseur.id == Depense.fournisseur_id)
        .filter(Fournisseur.etablissement_id == etablissement_id)
        .group_by(Fournisseur.id).order_by(Fournisseur.nom)
    ).all()
    return render_template("admin_fournisseurs.html", fournisseurs=fournisseurs, breadcrumbs=[{'text': 'Admin', 'url': url_for('admin.admin')}, {'text': 'Fournisseurs'}])

@admin_bp.route("/fournisseurs/ajouter", methods=['POST'])
@admin_required
def ajouter_fournisseur():
    etablissement_id = session['etablissement_id']
    nom = request.form.get('nom', '').strip()
    site_web = request.form.get('site_web', '').strip()
    logo_url = request.form.get('logo_url', '').strip()

    if not nom:
        flash("Nom obligatoire.", "danger")
        return redirect(url_for('admin.gestion_fournisseurs'))

    if site_web and not validate_url(site_web):
        flash("URL site web invalide.", "warning")
        return redirect(url_for('admin.gestion_fournisseurs'))
        
    if logo_url and not validate_url(logo_url):
        flash("URL logo invalide.", "warning")
        return redirect(url_for('admin.gestion_fournisseurs'))

    try:
        db.session.add(Fournisseur(nom=nom, site_web=site_web or None, logo=logo_url or None, etablissement_id=etablissement_id))
        db.session.commit()
        flash("Fournisseur ajout√©.", "success")
    except IntegrityError:
        db.session.rollback()
        flash("Ce fournisseur existe d√©j√†.", "danger")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur ajout fournisseur", exc_info=True)
        flash("Erreur technique.", "danger")
    return redirect(url_for('admin.gestion_fournisseurs'))

@admin_bp.route("/fournisseurs/modifier/<int:id>", methods=['POST'])
@admin_required
def modifier_fournisseur(id):
    etablissement_id = session['etablissement_id']
    fournisseur = db.session.get(Fournisseur, id)
    if not fournisseur or fournisseur.etablissement_id != etablissement_id:
        flash("Fournisseur introuvable.", "danger")
        return redirect(url_for('admin.gestion_fournisseurs'))

    try:
        nom = request.form.get('nom', '').strip()
        site_web = request.form.get('site_web', '').strip()
        logo_url = request.form.get('logo_url', '').strip()

        if not nom: raise ValueError("Nom vide")
        if site_web and not validate_url(site_web): raise ValueError("URL site invalide")
        if logo_url and not validate_url(logo_url): raise ValueError("URL logo invalide")
            
        fournisseur.nom = nom
        fournisseur.site_web = site_web or None
        fournisseur.logo = logo_url or None
        db.session.commit()
        flash("Fournisseur modifi√©.", "success")
    except ValueError as ve:
        flash(str(ve), "warning")
    except IntegrityError:
        db.session.rollback()
        flash("Nom d√©j√† pris.", "danger")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur modif fournisseur", exc_info=True)
        flash("Erreur technique.", "danger")
    return redirect(url_for('admin.gestion_fournisseurs'))

@admin_bp.route("/fournisseurs/supprimer/<int:id>", methods=['POST'])
@admin_required
def supprimer_fournisseur(id):
    etablissement_id = session['etablissement_id']
    fournisseur = db.session.get(Fournisseur, id)
    if fournisseur and fournisseur.etablissement_id == etablissement_id:
        if fournisseur.depenses:
            flash("Impossible : li√© √† des d√©penses.", "danger")
        else:
            try:
                db.session.delete(fournisseur)
                db.session.commit()
                flash("Fournisseur supprim√©.", "success")
            except Exception:
                db.session.rollback()
                current_app.logger.error("Erreur suppression fournisseur", exc_info=True)
                flash("Erreur technique.", "danger")
    else:
        flash("Fournisseur introuvable.", "danger")
    return redirect(url_for('admin.gestion_fournisseurs'))

# ============================================================
# SAUVEGARDE & RESTAURATION
# ============================================================
@admin_bp.route("/sauvegardes")
@admin_required
def gestion_sauvegardes():
    etablissement_id = session['etablissement_id']
    params = get_etablissement_params(etablissement_id)
    if params.get('licence_statut') != 'PRO':
        flash("R√©serv√© √† la version PRO.", "warning")
        return redirect(url_for('admin.admin'))
    return render_template("admin_backup.html", now=datetime.now(), breadcrumbs=[{'text': 'Admin', 'url': url_for('admin.admin')}, {'text': 'Sauvegardes'}])

@admin_bp.route("/telecharger_db")
@admin_required
def telecharger_db():
    etablissement_id = session['etablissement_id']
    params = get_etablissement_params(etablissement_id)
    if params.get('licence_statut') != 'PRO':
        flash("R√©serv√© PRO.", "warning")
        return redirect(url_for('admin.gestion_sauvegardes'))

    try:
        data = {
            'metadata': {'version': '1.0', 'date': datetime.now().isoformat(), 'etablissement': session.get('nom_etablissement')},
            'armoires': [], 'categories': [], 'fournisseurs': [], 'objets': [], 'budget': [], 'depenses': [], 'echeances': []
        }
        
        # Extraction des donn√©es (simplifi√©e pour la lisibilit√©)
        for a in db.session.execute(db.select(Armoire).filter_by(etablissement_id=etablissement_id)).scalars():
            data['armoires'].append({'id': a.id, 'nom': a.nom})
        for c in db.session.execute(db.select(Categorie).filter_by(etablissement_id=etablissement_id)).scalars():
            data['categories'].append({'id': c.id, 'nom': c.nom})
        for f in db.session.execute(db.select(Fournisseur).filter_by(etablissement_id=etablissement_id)).scalars():
            data['fournisseurs'].append({'id': f.id, 'nom': f.nom, 'site_web': f.site_web, 'logo': f.logo})
        for o in db.session.execute(db.select(Objet).filter_by(etablissement_id=etablissement_id)).scalars():
            data['objets'].append({
                'id': o.id, 'nom': o.nom, 'quantite': o.quantite_physique, 'seuil': o.seuil,
                'armoire_id': o.armoire_id, 'categorie_id': o.categorie_id, 'date_peremption': o.date_peremption,
                'image_url': o.image_url, 'fds_url': o.fds_url
            })
        for b in db.session.execute(db.select(Budget).filter_by(etablissement_id=etablissement_id)).scalars():
            b_data = {'id': b.id, 'annee': b.annee, 'montant': b.montant_initial, 'cloture': b.cloture}
            data['budget'].append(b_data)
            for d in b.depenses:
                data['depenses'].append({
                    'budget_id': b.id, 'date': d.date_depense, 'contenu': d.contenu,
                    'montant': d.montant, 'est_bon_achat': d.est_bon_achat, 'fournisseur_id': d.fournisseur_id
                })
        for e in db.session.execute(db.select(Echeance).filter_by(etablissement_id=etablissement_id)).scalars():
            data['echeances'].append({'intitule': e.intitule, 'date': e.date_echeance, 'details': e.details, 'traite': e.traite})

        json_str = json.dumps(data, default=json_serial, indent=4)
        buffer = BytesIO()
        buffer.write(json_str.encode('utf-8'))
        buffer.seek(0)
        log_action('backup_download', "Export JSON")
        safe_etab = sanitize_filename(session.get('nom_etablissement', 'Backup'))
        return send_file(buffer, as_attachment=True, download_name=f"Sauvegarde_{safe_etab}_{date.today()}.json", mimetype='application/json')

    except Exception:
        current_app.logger.error("Erreur backup", exc_info=True)
        flash("Erreur technique.", "error")
        return redirect(url_for('admin.gestion_sauvegardes'))

@admin_bp.route("/importer_db", methods=["POST"])
@admin_required
def importer_db():
    etablissement_id = session['etablissement_id']
    if 'fichier' not in request.files:
        flash("Aucun fichier.", "error")
        return redirect(url_for('admin.gestion_sauvegardes'))
        
    fichier = request.files['fichier']
    if fichier.filename == '' or not allowed_file(fichier.filename) or not fichier.filename.endswith('.json'):
        flash("Fichier invalide (.json requis).", "error")
        return redirect(url_for('admin.gestion_sauvegardes'))

    try:
        data = json.load(fichier)
        map_armoires = {}
        map_categories = {}
        map_fournisseurs = {}
        map_budgets = {}

        # Nettoyage
        for model in [KitObjet, Historique, Reservation, Suggestion, Depense, Objet, Kit, Budget, Echeance, Armoire, Categorie, Fournisseur]:
            db.session.query(model).filter_by(etablissement_id=etablissement_id).delete()
        db.session.flush()

        # Reconstruction
        for a in data.get('armoires', []):
            new_a = Armoire(nom=a['nom'], etablissement_id=etablissement_id)
            db.session.add(new_a)
            db.session.flush()
            map_armoires[a['id']] = new_a.id

        for c in data.get('categories', []):
            new_c = Categorie(nom=c['nom'], etablissement_id=etablissement_id)
            db.session.add(new_c)
            db.session.flush()
            map_categories[c['id']] = new_c.id

        for f in data.get('fournisseurs', []):
            new_f = Fournisseur(nom=f['nom'], site_web=f.get('site_web'), logo=f.get('logo'), etablissement_id=etablissement_id)
            db.session.add(new_f)
            db.session.flush()
            map_fournisseurs[f['id']] = new_f.id

        for o in data.get('objets', []):
            new_armoire_id = map_armoires.get(o['armoire_id'])
            new_cat_id = map_categories.get(o['categorie_id'])
            if not new_armoire_id or not new_cat_id: continue 
            
            date_perim = None
            if o.get('date_peremption'):
                try: date_perim = datetime.fromisoformat(o['date_peremption']).date()
                except: pass

            db.session.add(Objet(
                nom=o['nom'], quantite_physique=o['quantite'], seuil=o['seuil'],
                armoire_id=new_armoire_id, categorie_id=new_cat_id, date_peremption=date_perim,
                image_url=o.get('image_url'), fds_url=o.get('fds_url'), etablissement_id=etablissement_id
            ))

        for b in data.get('budget', []):
            new_b = Budget(annee=b['annee'], montant_initial=b['montant'], cloture=b['cloture'], etablissement_id=etablissement_id)
            db.session.add(new_b)
            db.session.flush()
            map_budgets[b['id']] = new_b.id

        for d in data.get('depenses', []):
            new_budget_id = map_budgets.get(d['budget_id'])
            if not new_budget_id: continue
            new_fournisseur_id = map_fournisseurs.get(d['fournisseur_id']) if d.get('fournisseur_id') else None
            try: date_dep = datetime.fromisoformat(d['date']).date()
            except: date_dep = date.today()
            db.session.add(Depense(
                budget_id=new_budget_id, fournisseur_id=new_fournisseur_id, contenu=d['contenu'],
                montant=d['montant'], date_depense=date_dep, est_bon_achat=d.get('est_bon_achat', False),
                etablissement_id=etablissement_id
            ))

        for e in data.get('echeances', []):
            try: date_ech = datetime.fromisoformat(e['date']).date()
            except: continue
            db.session.add(Echeance(intitule=e['intitule'], date_echeance=date_ech, details=e.get('details'), traite=e.get('traite', 0), etablissement_id=etablissement_id))

        db.session.commit()
        log_action('backup_restore', "Import JSON")
        flash("Restauration r√©ussie !", "success")

    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur import DB", exc_info=True)
        flash("Erreur critique lors de l'importation.", "error")

    return redirect(url_for('admin.gestion_sauvegardes'))

# ============================================================
# IMPORT EXCEL
# ============================================================
@admin_bp.route("/importer", methods=['GET'])
@admin_required
def importer_page():
    etablissement_id = session['etablissement_id']
    armoires = db.session.execute(db.select(Armoire).filter_by(etablissement_id=etablissement_id)).scalars().all()
    categories = db.session.execute(db.select(Categorie).filter_by(etablissement_id=etablissement_id)).scalars().all()
    return render_template("admin_import.html", breadcrumbs=[{'text': 'Admin', 'url': url_for('admin.admin')}, {'text': 'Import'}], armoires=armoires, categories=categories, now=datetime.now())

@admin_bp.route("/telecharger_modele")
@admin_required
def telecharger_modele_excel():
    etablissement_id = session['etablissement_id']
    armoires = db.session.execute(db.select(Armoire.nom).filter_by(etablissement_id=etablissement_id).order_by(Armoire.nom)).scalars().all()
    categories = db.session.execute(db.select(Categorie.nom).filter_by(etablissement_id=etablissement_id).order_by(Categorie.nom)).scalars().all()

    wb = Workbook()
    ws = wb.active
    ws.title = "Inventaire"
    ws.append(["Nom", "Quantit√©", "Seuil", "Armoire", "Cat√©gorie", "Date P√©remption", "Image (URL)"])
    
    # Styles et validations (simplifi√©)
    ws_data = wb.create_sheet("Data_Listes")
    ws_data.sheet_state = 'hidden'
    for i, nom in enumerate(armoires, 1): ws_data.cell(row=i, column=1, value=nom)
    for i, nom in enumerate(categories, 1): ws_data.cell(row=i, column=2, value=nom)
    
    if armoires:
        dv = DataValidation(type="list", formula1=f"'Data_Listes'!$A$1:$A${len(armoires)}", allow_blank=True)
        ws.add_data_validation(dv)
        dv.add('D2:D1000')
    if categories:
        dv = DataValidation(type="list", formula1=f"'Data_Listes'!$B$1:$B${len(categories)}", allow_blank=True)
        ws.add_data_validation(dv)
        dv.add('E2:E1000')

    buffer = BytesIO()
    wb.save(buffer)
    buffer.seek(0)
    return send_file(buffer, as_attachment=True, download_name='modele_import.xlsx', mimetype='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet')

@admin_bp.route("/importer", methods=['POST'])
@admin_required
@limiter.limit("10 per minute")
def importer_fichier():
    etablissement_id = session['etablissement_id']
    if 'fichier_excel' not in request.files:
        flash("Aucun fichier.", "error")
        return redirect(url_for('admin.importer_page'))

    fichier = request.files['fichier_excel']
    if fichier.filename == '' or not allowed_file(fichier.filename) or not fichier.filename.endswith('.xlsx'):
        flash("Fichier invalide (.xlsx requis).", "error")
        return redirect(url_for('admin.importer_page'))

    # Check size
    fichier.seek(0, 2)
    if fichier.tell() > MAX_FILE_SIZE:
        flash("Fichier trop volumineux.", "error")
        return redirect(url_for('admin.importer_page'))
    fichier.seek(0)

    try:
        wb = load_workbook(fichier)
        ws = wb.active
        existing_objets = {o.nom.lower() for o in db.session.execute(db.select(Objet).filter_by(etablissement_id=etablissement_id)).scalars().all()}
        armoires_map = {a.nom.lower(): a.id for a in db.session.execute(db.select(Armoire).filter_by(etablissement_id=etablissement_id)).scalars().all()}
        categories_map = {c.nom.lower(): c.id for c in db.session.execute(db.select(Categorie).filter_by(etablissement_id=etablissement_id)).scalars().all()}
        
        success_count = 0
        errors = []
        
        for i, row in enumerate(ws.iter_rows(min_row=2, values_only=True), 2):
            if not row or all(c is None for c in row): continue
            if len(row) < 5: 
                errors.append(f"Ligne {i}: Colonnes manquantes")
                continue
                
            nom, qte, seuil, arm_nom, cat_nom = row[0], row[1], row[2], row[3], row[4]
            if not all([nom, qte is not None, seuil is not None]):
                errors.append(f"Ligne {i}: Donn√©es obligatoires manquantes")
                continue
                
            if str(nom).lower() in existing_objets: continue
            
            arm_id = armoires_map.get(str(arm_nom).lower().strip()) if arm_nom else None
            cat_id = categories_map.get(str(cat_nom).lower().strip()) if cat_nom else None
            
            if not arm_id or not cat_id:
                errors.append(f"Ligne {i}: Armoire ou Cat√©gorie inconnue")
                continue
                
            date_perim = None
            if len(row) > 5 and row[5]:
                if isinstance(row[5], datetime): date_perim = row[5].date()
                elif isinstance(row[5], str):
                    try: date_perim = datetime.strptime(row[5].split(' ')[0], '%Y-%m-%d').date()
                    except: pass

            db.session.add(Objet(
                nom=str(nom), quantite_physique=int(qte), seuil=int(seuil),
                armoire_id=arm_id, categorie_id=cat_id, date_peremption=date_perim,
                image_url=str(row[6]) if len(row) > 6 and row[6] else None,
                etablissement_id=etablissement_id
            ))
            success_count += 1
            
        if errors:
            db.session.rollback()
            for e in errors[:5]: flash(e, "error")
            if len(errors) > 5: flash(f"... et {len(errors)-5} autres erreurs.", "error")
        else:
            db.session.commit()
            log_action('import_excel', f"{success_count} objets import√©s")
            flash(f"{success_count} objets import√©s.", "success")

    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur import Excel", exc_info=True)
        flash("Erreur technique.", "error")

    return redirect(url_for('admin.importer_page'))



@admin_bp.route("/exporter_inventaire")
@admin_required
@limiter.limit("5 per minute")
def exporter_inventaire():
    etablissement_id = session['etablissement_id']
    format_type = request.args.get('format')
    
    if format_type not in ['excel', 'pdf']:
        flash("Format non support√©.", "error")
        return redirect(url_for('admin.admin'))

    try:
        # 1. R√©cup√©ration des donn√©es (Optimis√©e avec Jointures)
        objets = db.session.execute(
            db.select(Objet)
            .options(joinedload(Objet.categorie), joinedload(Objet.armoire))
            .filter_by(etablissement_id=etablissement_id)
            .order_by(Objet.categorie_id, Objet.nom) # Tri par Cat√©gorie puis Nom
        ).scalars().all()
        
        # 2. Pr√©paration des donn√©es pour les g√©n√©rateurs
        data_export = []
        for obj in objets:
            data_export.append({
                'categorie': obj.categorie.nom if obj.categorie else "Sans cat√©gorie",
                'nom': obj.nom,
                'quantite': obj.quantite_physique,
                'seuil': obj.seuil,
                'armoire': obj.armoire.nom if obj.armoire else "Non rang√©",
                'peremption': obj.date_peremption.strftime('%d/%m/%Y') if obj.date_peremption else "-"
            })
            
        # 3. M√©tadonn√©es
        metadata = {
            'etablissement': session.get('nom_etablissement', 'Mon √âtablissement'),
            'date_generation': datetime.now().strftime('%d/%m/%Y √† %H:%M'),
            'total': len(data_export)
        }

        log_action('export_inventaire', f"Format: {format_type}, Items: {len(data_export)}")

        # 4. Appel des g√©n√©rateurs
        if format_type == 'excel':
            return generer_inventaire_excel(data_export, metadata)
        else:
            return generer_inventaire_pdf(data_export, metadata)

    except Exception as e:
        current_app.logger.error(f"Erreur export inventaire: {e}", exc_info=True)
        flash("Une erreur technique est survenue lors de l'export.", "error")
        return redirect(url_for('admin.admin'))

# ============================================================
# MODULE RAPPORTS & ACTIVIT√â (Version Durcie)
# ============================================================

# Constantes de s√©curit√© pour les rapports
MAX_EXPORT_DAYS = 366      # Limite la plage √† 1 an
MAX_EXPORT_ROWS = 5000     # Limite le nombre de lignes pour √©viter le crash RAM (ReportLab/OpenPyXL)
ALLOWED_FORMATS = {'excel', 'pdf'}

@admin_bp.route("/rapports")
@admin_required
def rapports():
    etablissement_id = session['etablissement_id']
    
    # Aper√ßu : 10 derni√®res actions
    resultats = db.session.execute(
        db.select(
            Historique,
            Utilisateur.nom_utilisateur,
            Objet.nom.label('objet_nom')
        )
        .outerjoin(Utilisateur, Historique.utilisateur_id == Utilisateur.id)
        .outerjoin(Objet, Historique.objet_id == Objet.id)
        .filter(Historique.etablissement_id == etablissement_id)
        .order_by(Historique.timestamp.desc())
        .limit(10)
    ).all()

    dernieres_actions = []
    for h, user_name, obj_name in resultats:
        dernieres_actions.append({
            'timestamp': h.timestamp,
            'action': h.action,
            'details': h.details,
            # Gestion des suppressions en cascade (Affichage seulement)
            'nom_utilisateur': user_name or "Utilisateur supprim√©",
            'objet_nom': obj_name or "Objet supprim√©"
        })

    return render_template("rapports.html", 
                           dernieres_actions=dernieres_actions,
                           breadcrumbs=[{'text': 'Admin', 'url': url_for('admin.admin')}, {'text': 'Rapports'}])


@admin_bp.route("/exporter_rapports", methods=['GET'])
@admin_required
@limiter.limit("5 per minute")
def exporter_rapports():
    etablissement_id = session['etablissement_id']
    
    # 1. R√©cup√©ration des param√®tres
    date_debut_str = request.args.get('date_debut')
    date_fin_str = request.args.get('date_fin')
    format_type = request.args.get('format')
    group_by = request.args.get('group_by', 'date')
    
    # NOUVEAU : R√©cup√©ration des actions coch√©es (liste)
    # Flask r√©cup√®re les checkbox multiples avec getlist
    selected_actions = request.args.getlist('actions') 

    if not all([date_debut_str, date_fin_str, format_type]):
        flash("Param√®tres manquants.", "warning")
        return redirect(url_for('admin.rapports'))

    if format_type not in ALLOWED_FORMATS:
        flash("Format non support√©.", "error")
        return redirect(url_for('admin.rapports'))

    try:
        # 2. Parsing Dates
        date_debut = datetime.strptime(date_debut_str, '%Y-%m-%d')
        date_fin = datetime.strptime(date_fin_str, '%Y-%m-%d')
        date_fin = date_fin.replace(hour=23, minute=59, second=59)

        if date_debut > date_fin:
            flash("Dates incoh√©rentes.", "warning")
            return redirect(url_for('admin.rapports'))
            
        if (date_fin - date_debut).days > MAX_EXPORT_DAYS:
            flash(f"P√©riode limit√©e √† {MAX_EXPORT_DAYS} jours.", "warning")
            return redirect(url_for('admin.rapports'))

        # 3. Construction Requ√™te
        query = db.select(
            Historique,
            Utilisateur.nom_utilisateur,
            Objet.nom.label('objet_nom')
        ).outerjoin(Utilisateur, Historique.utilisateur_id == Utilisateur.id)\
         .outerjoin(Objet, Historique.objet_id == Objet.id)\
         .filter(Historique.etablissement_id == etablissement_id)\
         .filter(Historique.timestamp >= date_debut)\
         .filter(Historique.timestamp <= date_fin)

        # --- LOGIQUE DE FILTRE ET TRI ---
        if group_by == 'action':
            # Si des actions sp√©cifiques sont coch√©es, on filtre
            if selected_actions:
                query = query.filter(Historique.action.in_(selected_actions))
            
            # On trie par Action puis par Date
            query = query.order_by(Historique.action.asc(), Historique.timestamp.desc())
        else:
            # Tri chronologique standard
            query = query.order_by(Historique.timestamp.desc())

        # Protection RAM
        query = query.limit(MAX_EXPORT_ROWS)
        resultats = db.session.execute(query).all()

        if not resultats:
            flash("Aucune donn√©e trouv√©e pour ces crit√®res.", "info")
            return redirect(url_for('admin.rapports'))

        # 4. Pr√©paration Donn√©es
        data_export = []
        for h, user_name, obj_name in resultats:
            data_export.append({
                'date': h.timestamp.strftime('%d/%m/%Y'),
                'heure': h.timestamp.strftime('%H:%M'),
                'utilisateur': user_name or "Inconnu",
                'action': h.action,
                'objet': obj_name or "-",
                'details': h.details or ""
            })

        # M√©tadonn√©es enrichies
        filtre_info = "Tous types"
        if group_by == 'action' and selected_actions:
            filtre_info = ", ".join(selected_actions)

        metadata = {
            'etablissement': session.get('nom_etablissement', 'LabFlow'),
            'periode': f"Du {date_debut.strftime('%d/%m/%Y')} au {date_fin.strftime('%d/%m/%Y')}",
            'total': len(data_export),
            'date_generation': datetime.now().strftime('%d/%m/%Y √† %H:%M'),
            'filtre': filtre_info # On pourra l'afficher dans le PDF si on veut
        }

        log_action('export_rapport', f"Format: {format_type}, Rows: {len(data_export)}")

        if format_type == 'excel':
            return generer_rapport_excel(data_export, metadata)
        else:
            return generer_rapport_pdf(data_export, metadata)

    except Exception as e:
        current_app.logger.error(f"Erreur export: {e}", exc_info=True)
        flash("Erreur technique lors de la g√©n√©ration.", "error")
        return redirect(url_for('admin.rapports'))

# ============================================================
# LICENCE (Rate Limit Custom)
# ============================================================
class RateLimiter:
    def __init__(self):
        self.attempts = defaultdict(list)
    def is_allowed(self, key):
        now = datetime.now()
        self.attempts[key] = [t for t in self.attempts[key] if now - t < timedelta(minutes=15)]
        if len(self.attempts[key]) >= 5: return False
        self.attempts[key].append(now)
        return True
    def reset(self, key):
        if key in self.attempts: del self.attempts[key]

license_limiter = RateLimiter()

def rate_limit_license(f):
    @wraps(f)
    def wrapped(*args, **kwargs):
        eid = session.get('etablissement_id')
        if not eid: return redirect(url_for('main.index'))
        if not license_limiter.is_allowed(eid):
            flash("Trop de tentatives. R√©essayez dans 15 min.", "error")
            return redirect(url_for('main.a_propos'))
        return f(*args, **kwargs)
    return wrapped

@admin_bp.route("/activer_licence", methods=["POST"])
@admin_required
@rate_limit_license
def activer_licence():
    etablissement_id = session.get('etablissement_id')
    cle_fournie = request.form.get('licence_cle', '').strip().upper()
    
    if not cle_fournie or len(cle_fournie) < 10:
        flash("Cl√© invalide.", "error")
        return redirect(url_for('main.a_propos'))
    
    try:
        param_instance = db.session.execute(db.select(Parametre).filter_by(etablissement_id=etablissement_id, cle='instance_id')).scalar_one_or_none()
        if not param_instance:
            flash("Erreur critique : Instance ID manquant.", "error")
            return redirect(url_for('main.a_propos'))
        
        cle_attendue = calculate_license_key(param_instance.valeur.strip())
        if not secrets.compare_digest(cle_fournie, cle_attendue):
            flash("Cl√© incorrecte.", "error")
            return redirect(url_for('main.a_propos'))
        
        # Activation
        param_statut = db.session.execute(db.select(Parametre).filter_by(etablissement_id=etablissement_id, cle='licence_statut')).scalar_one_or_none()
        if not param_statut: db.session.add(Parametre(etablissement_id=etablissement_id, cle='licence_statut', valeur='PRO'))
        else: param_statut.valeur = 'PRO'
        
        db.session.commit()
        try: cache.delete_memoized(get_etablissement_params, etablissement_id)
        except: pass
        license_limiter.reset(etablissement_id)
        flash("Licence PRO activ√©e !", "success")
        
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur activation licence", exc_info=True)
        flash("Erreur technique.", "error")
    
    return redirect(url_for('main.a_propos'))


# ============================================================
# G√âN√âRATEURS RAPPORTS PROFESSIONNELS (PDF/EXCEL) - VERSION FINALE
# ============================================================

# Imports sp√©cifiques aux rapports (√† laisser ici pour ne pas polluer le haut du fichier)
from reportlab.lib import colors
from reportlab.lib.pagesizes import A4, landscape
from reportlab.lib.styles import getSampleStyleSheet, ParagraphStyle
from reportlab.lib.units import cm
from reportlab.platypus import SimpleDocTemplate, Table, TableStyle, Paragraph, Spacer, PageBreak
from reportlab.lib.enums import TA_CENTER, TA_RIGHT, TA_LEFT
from html import escape
from openpyxl import Workbook
from openpyxl.styles import Font, PatternFill, Alignment, Border, Side
from io import BytesIO
from datetime import date
import re


# ============================================================
# UTILITAIRES INTERNES AUX RAPPORTS
# ============================================================

def sanitize_filename_report(text):
    """Nettoie un nom de fichier pour √©viter les caract√®res probl√©matiques."""
    if not text: return "Rapport"
    # On garde uniquement alphanum√©rique, tirets et underscores
    return re.sub(r'[^\w\s-]', '', str(text)).strip().replace(' ', '_')


def sanitize_for_excel_report(text):
    """Pr√©pare le texte pour Excel (√©vite les formules injection)."""
    if not text:
        return ""
    text = str(text)
    # Emp√™che l'injection de formules (=, +, -, @)
    if text.startswith(('=', '+', '-', '@')):
        text = "'" + text
    return text


# ============================================================
# G√âN√âRATEUR PDF AVEC LOGO VECTORIEL
# ============================================================

class LogoGraphique(Flowable):
    """Dessine un petit graphique vectoriel (Logo) directement en PDF."""
    def __init__(self, width=40, height=40):
        Flowable.__init__(self)
        self.width = width
        self.height = height

    def draw(self):
        # Couleurs
        bleu_fonce = colors.HexColor('#1F3B73')
        bleu_clair = colors.HexColor('#4facfe')
        
        # Barres du graphique
        self.canv.setFillColor(bleu_fonce)
        self.canv.rect(0, 0, 8, 15, fill=1, stroke=0)  # Barre 1
        self.canv.rect(12, 0, 8, 25, fill=1, stroke=0) # Barre 2
        
        self.canv.setFillColor(bleu_clair)
        self.canv.rect(24, 0, 8, 35, fill=1, stroke=0) # Barre 3 (La plus haute)
        
        # Ligne de tendance (Fl√®che)
        self.canv.setStrokeColor(colors.HexColor('#FFD700')) # Or
        self.canv.setLineWidth(2)
        self.canv.line(-5, 5, 35, 40) # Ligne montante

def generer_rapport_pdf(data, metadata):
    buffer = BytesIO()
    doc = SimpleDocTemplate(
        buffer,
        pagesize=landscape(A4),
        rightMargin=1.0*cm, leftMargin=1.0*cm, topMargin=1.0*cm, bottomMargin=1.0*cm,
        title=f"Rapport - {metadata['etablissement']}"
    )
    
    elements = []
    styles = getSampleStyleSheet()
    
    # --- EN-T√äTE AVEC LOGO ---
    # On cr√©e un tableau invisible pour mettre le Logo √† gauche et le Titre au centre
    logo = LogoGraphique(width=40, height=40)
    
    titre_style = ParagraphStyle('Titre', parent=styles['Heading1'], fontSize=22, textColor=colors.HexColor('#1F3B73'), alignment=TA_LEFT)
    sous_titre_style = ParagraphStyle('SousTitre', parent=styles['Normal'], fontSize=12, textColor=colors.gray, alignment=TA_LEFT)
    
    titre_bloc = [
        Paragraph(f"RAPPORT D'ACTIVIT√â", titre_style),
        Paragraph(f"{escape(metadata['etablissement'])}", sous_titre_style)
    ]
    
    # Tableau d'en-t√™te : [Logo | Textes]
    header_table_data = [[logo, titre_bloc]]
    header_table = Table(header_table_data, colWidths=[1.5*cm, 20*cm])
    header_table.setStyle(TableStyle([
        ('VALIGN', (0,0), (-1,-1), 'MIDDLE'),
        ('LEFTPADDING', (0,0), (-1,-1), 0),
    ]))
    elements.append(header_table)
    
    elements.append(Spacer(1, 0.5*cm))
    
    # --- M√âTADONN√âES (Cadre Gris) ---
    meta_style = ParagraphStyle('Meta', parent=styles['Normal'], fontSize=10, textColor=colors.black)
    meta_label = ParagraphStyle('MetaLabel', parent=styles['Normal'], fontSize=10, textColor=colors.HexColor('#1F3B73'), fontName='Helvetica-Bold')
    
    meta_data = [
        [Paragraph('P√©riode :', meta_label), Paragraph(metadata['periode'], meta_style),
         Paragraph('G√©n√©r√© le :', meta_label), Paragraph(metadata['date_generation'], meta_style)],
        [Paragraph('Total :', meta_label), Paragraph(f"{metadata['total']} entr√©es", meta_style), '', '']
    ]
    
    meta_table = Table(meta_data, colWidths=[2.5*cm, 8*cm, 2.5*cm, 8*cm])
    meta_table.setStyle(TableStyle([
        ('BACKGROUND', (0,0), (-1,-1), colors.HexColor('#F8F9FA')),
        ('BOX', (0,0), (-1,-1), 0.5, colors.HexColor('#CCCCCC')),
        ('PADDING', (0,0), (-1,-1), 6),
        ('VALIGN', (0,0), (-1,-1), 'MIDDLE'),
    ]))
    elements.append(meta_table)
    elements.append(Spacer(1, 0.8*cm))
    
    # --- TABLEAU DE DONN√âES ---
    header_style = ParagraphStyle('Header', parent=styles['Normal'], fontSize=10, textColor=colors.white, fontName='Helvetica-Bold', alignment=TA_CENTER)
    cell_style = ParagraphStyle('Cell', parent=styles['Normal'], fontSize=9, textColor=colors.black)
    
    headers = [
        Paragraph('Date', header_style),
        Paragraph('Heure', header_style),
        Paragraph('Utilisateur', header_style),
        Paragraph('Action', header_style),
        Paragraph('Objet', header_style),
        Paragraph('D√©tails', header_style)
    ]
    
    table_data = [headers]
    for row in data:
        table_data.append([
            Paragraph(row['date'], cell_style),
            Paragraph(row['heure'], cell_style),
            Paragraph(escape(row['utilisateur']), cell_style),
            Paragraph(escape(row['action']), cell_style),
            Paragraph(escape(row['objet']), cell_style),
            Paragraph(escape(row['details']) if row['details'] else '-', cell_style)
        ])
        
    col_widths = [2.5*cm, 1.5*cm, 4.0*cm, 3.0*cm, 6.5*cm, 10.0*cm]
    t = Table(table_data, colWidths=col_widths, repeatRows=1)
    
    t.setStyle(TableStyle([
        ('BACKGROUND', (0, 0), (-1, 0), colors.HexColor('#1F3B73')), # En-t√™te Bleu
        ('VALIGN', (0, 0), (-1, 0), 'MIDDLE'),
        ('TOPPADDING', (0, 0), (-1, 0), 10),
        ('BOTTOMPADDING', (0, 0), (-1, 0), 10),
        ('VALIGN', (0, 1), (-1, -1), 'TOP'),
        ('ROWBACKGROUNDS', (0, 1), (-1, -1), [colors.white, colors.HexColor('#F4F6F9')]), # Zebra
        ('GRID', (0, 0), (-1, -1), 0.5, colors.HexColor('#E0E0E0')),
        ('LINEBELOW', (0, 0), (-1, 0), 2, colors.HexColor('#1F3B73')), # Ligne forte sous header
    ]))
    
    elements.append(t)
    doc.build(elements)
    buffer.seek(0)
    
    filename = f"Rapport_{sanitize_filename_report(metadata['etablissement'])}_{date.today().strftime('%Y%m%d')}.pdf"
    return send_file(buffer, as_attachment=True, download_name=filename, mimetype='application/pdf')


# ============================================================
# G√âN√âRATEUR EXCEL (DESIGN TABLEAU DE BORD)
# ============================================================

def generer_rapport_excel(data, metadata):
    wb = Workbook()
    ws = wb.active
    ws.title = "Activit√©"
    
    # --- STYLES ---
    # Titre
    font_titre = Font(name='Segoe UI', size=18, bold=True, color="1F3B73")
    
    # En-t√™tes Tableau
    fill_header = PatternFill(start_color="1F3B73", end_color="1F3B73", fill_type="solid")
    font_header = Font(name='Segoe UI', size=11, bold=True, color="FFFFFF")
    align_center = Alignment(horizontal="center", vertical="center")
    
    # Donn√©es
    font_data = Font(name='Segoe UI', size=10)
    align_top = Alignment(vertical="top", wrap_text=True)
    border_thin = Border(left=Side(style='thin', color='D9D9D9'), 
                         right=Side(style='thin', color='D9D9D9'), 
                         bottom=Side(style='thin', color='D9D9D9'))

    # --- MISE EN PAGE ---
    
    # 1. Titre et Logo (Simul√© par emoji pour Excel)
    ws.merge_cells('A1:F1')
    ws['A1'] = f"üìä RAPPORT D'ACTIVIT√â - {metadata['etablissement']}"
    ws['A1'].font = font_titre
    ws['A1'].alignment = Alignment(horizontal="left", vertical="center")
    ws.row_dimensions[1].height = 40
    
    # 2. M√©tadonn√©es (Cadre gris clair)
    ws.merge_cells('A2:F4')
    meta_text = (f"P√©riode : {metadata['periode']}\n"
                 f"G√©n√©r√© le : {metadata['date_generation']}\n"
                 f"Total : {metadata['total']} enregistrements")
    
    ws['A2'] = meta_text
    ws['A2'].font = Font(name='Segoe UI', size=10, italic=True, color="555555")
    ws['A2'].alignment = Alignment(horizontal="left", vertical="center", wrap_text=True)
    ws['A2'].fill = PatternFill(start_color="F8F9FA", fill_type="solid")
    ws.row_dimensions[2].height = 60 # Hauteur pour les 3 lignes
    
    # 3. En-t√™tes du tableau (Ligne 6)
    headers = ["Date", "Heure", "Utilisateur", "Action", "Objet", "D√©tails"]
    ws.append([]) # Ligne 5 vide
    ws.append(headers) # Ligne 6
    
    for col_num, header in enumerate(headers, 1):
        cell = ws.cell(row=6, column=col_num)
        cell.fill = fill_header
        cell.font = font_header
        cell.alignment = align_center
    
    ws.row_dimensions[6].height = 30
    
    # 4. Donn√©es
    for row in data:
        ws.append([
            row['date'],
            row['heure'],
            sanitize_for_excel_report(row['utilisateur']),
            sanitize_for_excel_report(row['action']),
            sanitize_for_excel_report(row['objet']),
            sanitize_for_excel_report(row['details']) if row['details'] else '-'
        ])
        
    # 5. Finitions (Bordures et Largeurs)
    # Largeurs optimis√©es
    ws.column_dimensions['A'].width = 12
    ws.column_dimensions['B'].width = 10
    ws.column_dimensions['C'].width = 20
    ws.column_dimensions['D'].width = 18
    ws.column_dimensions['E'].width = 35
    ws.column_dimensions['F'].width = 60
    
    # Appliquer styles aux donn√©es
    for row in ws.iter_rows(min_row=7, max_row=ws.max_row):
        for cell in row:
            cell.font = font_data
            cell.alignment = align_top
            cell.border = border_thin
            
    # Filtres automatiques
    ws.auto_filter.ref = f"A6:F{ws.max_row}"
    
    # Figer les volets
    ws.freeze_panes = "A7"

    buffer = BytesIO()
    wb.save(buffer)
    buffer.seek(0)
    
    filename = f"Rapport_{sanitize_filename_report(metadata['etablissement'])}_{date.today().strftime('%Y%m%d')}.xlsx"
    return send_file(buffer, as_attachment=True, download_name=filename, mimetype='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet')


# ============================================================
# G√âN√âRATEURS INVENTAIRE (PDF/EXCEL)
# ============================================================

def generer_inventaire_pdf(data, metadata):
    """G√©n√®re un PDF propre de l'inventaire complet (Paysage)."""
    buffer = BytesIO()
    
    doc = SimpleDocTemplate(
        buffer,
        pagesize=landscape(A4),
        rightMargin=1.0*cm, leftMargin=1.0*cm, topMargin=1.0*cm, bottomMargin=1.0*cm,
        title=f"Inventaire - {metadata['etablissement']}"
    )
    
    elements = []
    styles = getSampleStyleSheet()
    
    # --- EN-T√äTE (R√©utilisation du style Rapport) ---
    logo = LogoGraphique(width=40, height=40) # Utilise la classe existante
    
    titre_style = ParagraphStyle('Titre', parent=styles['Heading1'], fontSize=22, textColor=colors.HexColor('#1F3B73'), alignment=TA_LEFT)
    sous_titre_style = ParagraphStyle('SousTitre', parent=styles['Normal'], fontSize=12, textColor=colors.gray, alignment=TA_LEFT)
    
    titre_bloc = [
        Paragraph(f"√âTAT DE L'INVENTAIRE", titre_style),
        Paragraph(f"{escape(metadata['etablissement'])}", sous_titre_style)
    ]
    
    header_table = Table([[logo, titre_bloc]], colWidths=[1.5*cm, 20*cm])
    header_table.setStyle(TableStyle([('VALIGN', (0,0), (-1,-1), 'MIDDLE')]))
    elements.append(header_table)
    
    elements.append(Spacer(1, 0.5*cm))
    
    # --- INFO BARRE ---
    info_text = f"<b>G√©n√©r√© le :</b> {metadata['date_generation']}  |  <b>Total r√©f√©rences :</b> {metadata['total']}"
    elements.append(Paragraph(info_text, ParagraphStyle('Info', parent=styles['Normal'], fontSize=10, alignment=TA_RIGHT, textColor=colors.HexColor('#1F3B73'))))
    elements.append(Spacer(1, 0.3*cm))

    # --- TABLEAU ---
    header_style = ParagraphStyle('Header', parent=styles['Normal'], fontSize=10, textColor=colors.white, fontName='Helvetica-Bold', alignment=TA_CENTER)
    cell_style = ParagraphStyle('Cell', parent=styles['Normal'], fontSize=9, textColor=colors.black)
    cell_center = ParagraphStyle('CellCenter', parent=cell_style, alignment=TA_CENTER)
    
    headers = [
        Paragraph('Cat√©gorie', header_style),
        Paragraph('D√©signation', header_style),
        Paragraph('Qt√©', header_style),
        Paragraph('Seuil', header_style),
        Paragraph('Emplacement', header_style),
        Paragraph('P√©remption', header_style)
    ]
    
    table_data = [headers]
    
    for row in data:
        # Alerte visuelle pour le stock bas (Rouge si Qt√© <= Seuil)
        qty_style = cell_center
        if row['quantite'] <= row['seuil']:
            qty_style = ParagraphStyle('Alert', parent=cell_center, textColor=colors.red, fontName='Helvetica-Bold')

        table_data.append([
            Paragraph(escape(row['categorie']), cell_style),
            Paragraph(escape(row['nom']), cell_style),
            Paragraph(str(row['quantite']), qty_style),
            Paragraph(str(row['seuil']), cell_center),
            Paragraph(escape(row['armoire']), cell_style),
            Paragraph(row['peremption'], cell_center)
        ])
    
    # Largeurs optimis√©es pour Paysage (Total ~27.5cm)
    col_widths = [
        5.0*cm,  # Cat√©gorie
        9.5*cm,  # Nom (Large)
        2.0*cm,  # Qt√©
        2.0*cm,  # Seuil
        5.0*cm,  # Armoire
        4.0*cm   # P√©remption
    ]
    
    t = Table(table_data, colWidths=col_widths, repeatRows=1)
    
    t.setStyle(TableStyle([
        ('BACKGROUND', (0, 0), (-1, 0), colors.HexColor('#1F3B73')),
        ('VALIGN', (0, 0), (-1, -1), 'MIDDLE'),
        ('TOPPADDING', (0, 0), (-1, 0), 8),
        ('BOTTOMPADDING', (0, 0), (-1, 0), 8),
        ('ROWBACKGROUNDS', (0, 1), (-1, -1), [colors.white, colors.HexColor('#F4F6F9')]),
        ('GRID', (0, 0), (-1, -1), 0.5, colors.HexColor('#E0E0E0')),
        ('LINEBELOW', (0, 0), (-1, 0), 2, colors.HexColor('#1F3B73')),
    ]))
    
    elements.append(t)
    doc.build(elements)
    buffer.seek(0)
    
    filename = f"Inventaire_{sanitize_filename_report(metadata['etablissement'])}_{date.today().strftime('%Y%m%d')}.pdf"
    return send_file(buffer, as_attachment=True, download_name=filename, mimetype='application/pdf')


def generer_inventaire_excel(data, metadata):
    """G√©n√®re un Excel propre de l'inventaire."""
    wb = Workbook()
    ws = wb.active
    ws.title = "Inventaire"
    
    # Styles
    font_titre = Font(name='Segoe UI', size=16, bold=True, color="1F3B73")
    fill_header = PatternFill(start_color="1F3B73", end_color="1F3B73", fill_type="solid")
    font_header = Font(name='Segoe UI', size=11, bold=True, color="FFFFFF")
    align_center = Alignment(horizontal="center", vertical="center")
    border_thin = Border(left=Side(style='thin', color='D9D9D9'), right=Side(style='thin', color='D9D9D9'), bottom=Side(style='thin', color='D9D9D9'))
    font_alert = Font(color="DC3545", bold=True) # Rouge pour stock bas

    # 1. En-t√™te
    ws.merge_cells('A1:F1')
    ws['A1'] = f"üì¶ √âTAT DE L'INVENTAIRE - {metadata['etablissement']}"
    ws['A1'].font = font_titre
    ws['A1'].alignment = Alignment(horizontal="left", vertical="center")
    ws.row_dimensions[1].height = 35
    
    ws['A2'] = f"G√©n√©r√© le : {metadata['date_generation']}"
    ws['A2'].font = Font(italic=True, color="666666")
    
    # 2. Tableau
    headers = ["Cat√©gorie", "D√©signation", "Quantit√©", "Seuil", "Emplacement", "P√©remption"]
    ws.append([])
    ws.append(headers) # Ligne 4
    
    for col_num, header in enumerate(headers, 1):
        cell = ws.cell(row=4, column=col_num)
        cell.value = header
        cell.fill = fill_header
        cell.font = font_header
        cell.alignment = align_center
    
    ws.row_dimensions[4].height = 30
    
    # 3. Donn√©es
    for row in data:
        ws.append([
            row['categorie'],
            row['nom'],
            row['quantite'],
            row['seuil'],
            row['armoire'],
            row['peremption']
        ])
        
        current_row = ws.max_row
        
        # Style des cellules
        for col in range(1, 7):
            cell = ws.cell(row=current_row, column=col)
            cell.border = border_thin
            cell.alignment = Alignment(vertical="center")
            
            # Centrer Qt√©, Seuil, Date
            if col in [3, 4, 6]:
                cell.alignment = align_center
                
        # Alerte Stock Bas (Rouge)
        if row['quantite'] <= row['seuil']:
            ws.cell(row=current_row, column=3).font = font_alert

    # 4. Largeurs
    ws.column_dimensions['A'].width = 25 # Cat
    ws.column_dimensions['B'].width = 40 # Nom
    ws.column_dimensions['C'].width = 12 # Qt√©
    ws.column_dimensions['D'].width = 12 # Seuil
    ws.column_dimensions['E'].width = 25 # Armoire
    ws.column_dimensions['F'].width = 15 # Date
    
    # Filtres
    ws.auto_filter.ref = f"A4:F{ws.max_row}"
    ws.freeze_panes = "A5"

    buffer = BytesIO()
    wb.save(buffer)
    buffer.seek(0)
    
    filename = f"Inventaire_{sanitize_filename_report(metadata['etablissement'])}_{date.today().strftime('%Y%m%d')}.xlsx"
    return send_file(buffer, as_attachment=True, download_name=filename, mimetype='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet')
--- END OF FILE views/admin.py ---

--- START OF FILE views/api.py ---

# -*- coding: utf-8 -*-
import json
from datetime import datetime
from typing import NamedTuple
from flask import Blueprint, request, jsonify, session, current_app, render_template
from werkzeug.exceptions import BadRequest

# Imports locaux
from db import db, Objet, Armoire, Categorie, Utilisateur, Reservation, Kit, KitObjet, Suggestion
from extensions import limiter
from utils import login_required

# --- SERVICES ---
from services.stock_service import StockService, StockServiceError
from services.panier_service import PanierService, PanierServiceError
from services.inventory_service import InventoryService, InventoryServiceError
from sqlalchemy import func, select

api_bp = Blueprint('api', __name__, url_prefix='/api')

# ============================================================
# STRUCTURES DE DONN√âES
# ============================================================

class Services(NamedTuple):
    stock: StockService
    panier: PanierService
    inventory: InventoryService

# ============================================================
# S√âCURIT√â & UTILITAIRES
# ============================================================

@api_bp.before_request
def validate_json_content_type():
    """
    Valide le Content-Type pour les requ√™tes mutantes.
    Note: Le CSRF est g√©r√© par Flask-WTF (cookie csrf_token + header X-CSRFToken ou form data).
    """
    if request.method in ['POST', 'PUT']:
        if not request.is_json:
            return jsonify({'success': False, 'error': 'Content-Type must be application/json'}), 415

def get_services() -> Services:
    """Factory s√©curis√©e retournant un NamedTuple."""
    user_id = session.get('user_id')
    etablissement_id = session.get('etablissement_id')

    if not user_id or not etablissement_id:
        raise ValueError("Session invalide")

    user = db.session.get(Utilisateur, user_id)
    if not user or user.etablissement_id != etablissement_id:
        current_app.logger.critical(
            f"SECURITY: IDOR Attempt. User {user_id} -> Etab {etablissement_id} "
            f"on {request.endpoint} ({request.method})"
        )
        raise ValueError("Session invalide : Incoh√©rence √©tablissement")

    return Services(
        stock=StockService(etablissement_id),
        panier=PanierService(etablissement_id),
        inventory=InventoryService(etablissement_id)
    )

def _parse_request_dates(date_str, h_debut, h_fin):
    """Parsing basique."""
    if not date_str or not h_debut or not h_fin:
        raise ValueError("Param√®tres date/heure manquants")
    try:
        d = datetime.strptime(date_str, "%Y-%m-%d").date()
        t_start = datetime.strptime(h_debut, "%H:%M").time()
        t_end = datetime.strptime(h_fin, "%H:%M").time()
        return datetime.combine(d, t_start), datetime.combine(d, t_end)
    except ValueError:
        raise ValueError("Format date/heure invalide")

def _validate_simulated_cart(cart_data):
    """Valide la structure du panier simul√©."""
    if not isinstance(cart_data, list):
        raise ValueError("Le panier doit √™tre une liste")
    if len(cart_data) > PanierService.MAX_ITEMS_PANIER:
        raise ValueError("Panier trop volumineux")
    
    for item in cart_data:
        if not isinstance(item, dict):
            raise ValueError("Item malform√©")
        
        if not all(k in item for k in ('type', 'id')):
            raise ValueError("Champs type/id manquants")
            
        if 'quantite' not in item and 'quantity' not in item:
             raise ValueError("Quantit√© manquante")

# ============================================================
# GESTION D'ERREURS CENTRALIS√âE
# ============================================================

@api_bp.errorhandler(StockServiceError)
@api_bp.errorhandler(PanierServiceError)
@api_bp.errorhandler(InventoryServiceError)
def handle_business_error(error):
    return jsonify({"success": False, "error": str(error), "code": "BUSINESS_ERROR"}), 400

@api_bp.errorhandler(ValueError)
@api_bp.errorhandler(BadRequest)
def handle_validation_error(error):
    msg = str(error) if isinstance(error, ValueError) else "JSON malform√© ou invalide"
    return jsonify({"success": False, "error": msg, "code": "VALIDATION_ERROR"}), 400

# ============================================================
# 1. GESTION DU PANIER
# ============================================================

@api_bp.route("/panier", methods=['GET'])
@login_required
@limiter.limit("120 per minute")
def get_panier():
    services = get_services()
    contenu = services.panier.get_contenu(session['user_id'])
    return jsonify({"success": True, "data": contenu})

@api_bp.route("/panier/ajouter", methods=['POST'])
@login_required
@limiter.limit("60 per minute")
def ajouter_item_panier():
    services = get_services()
    data = request.get_json()
    result = services.panier.ajouter_item(session['user_id'], data)
    return jsonify({"success": True, "data": result}), 201

@api_bp.route("/panier/retirer/<int:item_id>", methods=['DELETE'])
@login_required
def retirer_item_panier(item_id):
    services = get_services()
    services.panier.retirer_item(session['user_id'], item_id)
    return jsonify({"success": True}), 200

@api_bp.route("/panier", methods=['DELETE'])
@login_required
def vider_panier():
    services = get_services()
    services.panier.vider_panier(session['user_id'])
    return jsonify({"success": True}), 200

@api_bp.route("/panier/checkout", methods=['POST'])
@login_required
@limiter.limit("10 per minute")
def checkout_panier():
    services = get_services()
    user_id = session['user_id']
    
    try:
        result = services.panier.valider_panier(user_id)
        current_app.logger.info(f"API CHECKOUT SUCCESS | User {user_id} | Group {result['groupe_id']}")
        return jsonify({"success": True, "data": result}), 201
    except (PanierServiceError, StockServiceError) as e:
        current_app.logger.warning(f"API CHECKOUT BUSINESS ERROR | User {user_id} | {e}")
        raise
    except Exception as e:
        current_app.logger.error(f"API CHECKOUT CRITICAL ERROR | User {user_id} | {e}", exc_info=True)
        # Correction Wording : Paiement -> Validation
        return jsonify({"success": False, "error": "Erreur technique lors de la validation"}), 500

# ============================================================
# 2. DISPONIBILIT√âS
# ============================================================

@api_bp.route("/disponibilites", methods=['GET'])
@login_required
def api_disponibilites():
    services = get_services()
    
    start_dt, end_dt = _parse_request_dates(
        request.args.get('date'), 
        request.args.get('heure_debut'), 
        request.args.get('heure_fin')
    )

    # 1. On r√©cup√®re le panier ACTUEL de l'utilisateur (Server Side)
    # Pour que le stock affich√© tienne compte de ce qu'il a d√©j√† mis dans son panier
    items_a_deduire = []
    
    try:
        # On r√©cup√®re le contenu brut
        contenu_panier = services.panier.get_contenu(session['user_id'])
        
        # On le transforme en format simple pour StockService
        if contenu_panier and 'items' in contenu_panier:
            for item in contenu_panier['items']:
                # On ne d√©duit que les items qui chevauchent le cr√©neau demand√© ?
                # Pour simplifier l'UX : on d√©duit tout ce qui est dans le panier 
                # (approche pessimiste mais s√ªre pour l'utilisateur)
                items_a_deduire.append({
                    'type': item['type'],
                    'id': item['id_item'], # Attention : get_contenu renvoie 'id_item'
                    'quantite': item['quantite']
                })
    except Exception as e:
        current_app.logger.warning(f"Erreur lecture panier pour dispo: {e}")

    # 2. Gestion Panier Simul√© (Param√®tre URL optionnel, rarement utilis√© maintenant)
    panier_param = request.args.get('panier')
    if panier_param:
        try:
            panier_simule = json.loads(panier_param)
            _validate_simulated_cart(panier_simule)
            items_a_deduire.extend(panier_simule)
        except (json.JSONDecodeError, ValueError):
            pass # On ignore le panier simul√© s'il est cass√©

    # 3. Calcul final
    resultats = services.stock.get_disponibilites(start_dt, end_dt, panier_items=items_a_deduire)
    return jsonify({"success": True, "data": resultats})

# ============================================================
# 3. INVENTAIRE & RECHERCHE
# ============================================================

@api_bp.route("/search")
@login_required
@limiter.limit("30 per minute")
def search():
    services = get_services()
    query_text = request.args.get('q', '').strip()
    
    results = services.inventory.search_objets(query_text)
    return jsonify({"success": True, "data": results})

@api_bp.route("/inventaire")
@login_required
def api_inventaire():
    services = get_services()
    
    filters = {
        'q': request.args.get('q'),
        'armoire_id': request.args.get('armoire', type=int),
        'categorie_id': request.args.get('categorie', type=int),
        'etat': request.args.get('etat')
    }
    
    dto = services.inventory.get_paginated_inventory(
        page=request.args.get('page', 1, type=int),
        sort_by=request.args.get('sort_by', 'nom'),
        direction=request.args.get('direction', 'asc'),
        filters=filters
    )
    
    html = render_template(
        '_inventaire_content.html', 
        objets=dto.items, 
        pagination={'page': dto.current_page, 'total_pages': dto.total_pages, 'endpoint': 'inventaire.inventaire'}, 
        sort_by=request.args.get('sort_by', 'nom'), 
        direction=request.args.get('direction', 'asc'), 
        armoire=dto.context.armoire_nom, 
        categorie=dto.context.categorie_nom, 
        etat=filters['etat'], 
        date_actuelle=datetime.now()
    )
    return jsonify({'html': html})


# ============================================================
# 4. ROUTES CALENDRIER (Lecture Seule)
# ============================================================

@api_bp.route("/reservations_par_mois/<int:year>/<int:month>")
@login_required
def api_reservations_par_mois(year, month):
    """Renvoie le nombre de r√©servations par jour pour le calendrier."""
    etablissement_id = session.get('etablissement_id')
    try:
        from calendar import monthrange
        start_date = datetime(year, month, 1)
        days_in_month = monthrange(year, month)[1]
        end_date = datetime(year, month, days_in_month, 23, 59, 59)

        # On compte les groupes de r√©servation distincts par jour
        stats = db.session.execute(
            db.select(
                func.date(Reservation.debut_reservation).label('jour'), 
                func.count(func.distinct(Reservation.groupe_id)).label('total')
            )
            .filter(
                Reservation.etablissement_id == etablissement_id,
                Reservation.debut_reservation >= start_date,
                Reservation.debut_reservation <= end_date,
                Reservation.statut == 'confirm√©e'
            )
            .group_by(func.date(Reservation.debut_reservation))
        ).all()

        # Format : {'2025-12-28': 2, '2025-12-29': 5}
        return jsonify({str(row.jour): row.total for row in stats})
    except Exception as e:
        current_app.logger.error(f"Erreur stats calendrier: {e}")
        return jsonify({})

@api_bp.route("/reservation_details/<groupe_id>")
@login_required
def api_reservation_details(groupe_id):
    """Renvoie les d√©tails d'une r√©servation pour le tooltip."""
    etablissement_id = session.get('etablissement_id')
    current_user_id = session.get('user_id')
    user_role = session.get('user_role')
    
    try:
        stmt = (
            db.select(Reservation)
            .options(
                db.joinedload(Reservation.objet), 
                db.joinedload(Reservation.utilisateur), # <--- On charge l'utilisateur
                db.joinedload(Reservation.kit)
                .joinedload(Kit.objets_assoc)
                .joinedload(KitObjet.objet)
            )
            .filter_by(groupe_id=groupe_id, etablissement_id=etablissement_id)
        )
        res = db.session.execute(stmt).unique().scalars().all()
        
        if not res: 
            return jsonify({'error': 'Introuvable'}), 404
        
        first = res[0]
        
        # Calcul des permissions
        is_owner = (first.utilisateur_id == current_user_id)
        is_admin = (user_role == 'admin')
        can_edit = is_owner or is_admin

        details = {
            'groupe_id': groupe_id,
            'debut': first.debut_reservation.isoformat(),
            'fin': first.fin_reservation.isoformat(),
            'user_name': first.utilisateur.nom_utilisateur if first.utilisateur else "Inconnu", # <--- Ajout du nom
            'can_edit': can_edit, # <--- Ajout de la permission
            'items': []
        }
        
        for r in res:
            if r.kit_id and r.kit:
                nom = r.kit.nom
                type_item = 'kit'
                image = None
                if r.kit.objets_assoc and r.kit.objets_assoc[0].objet:
                    image = r.kit.objets_assoc[0].objet.image_url
            elif r.objet:
                nom = r.objet.nom
                type_item = 'objet'
                image = r.objet.image_url
            else:
                continue

            details['items'].append({
                'type': type_item,
                'id': r.kit_id if r.kit_id else r.objet_id,
                'nom': nom,
                'quantite': r.quantite_reservee,
                'image': image
            })
            
        return jsonify(details)

    except Exception as e:
        current_app.logger.error(f"Erreur details reservation: {e}", exc_info=True)
        return jsonify({'error': "Erreur serveur"}), 500

@api_bp.route("/supprimer_reservation", methods=['POST'])
@login_required
def api_supprimer_reservation():
    """Supprime une r√©servation (Admin ou Propri√©taire)."""
    etablissement_id = session.get('etablissement_id')
    gid = request.get_json().get('groupe_id')
    
    try:
        # V√©rification existence et droits
        existing = db.session.execute(
            db.select(Reservation).filter_by(groupe_id=gid, etablissement_id=etablissement_id).limit(1)
        ).scalar()
        
        if not existing: 
            return jsonify({'success': False, 'error': "Introuvable"}), 404
        
        if session.get('user_role') != 'admin' and existing.utilisateur_id != session.get('user_id'):
            return jsonify({'success': False, 'error': "Interdit"}), 403

        # Suppression
        db.session.execute(db.delete(Reservation).where(Reservation.groupe_id == gid))
        db.session.commit()
        return jsonify({'success': True})
    except Exception as e:
        db.session.rollback()
        current_app.logger.error(f"Erreur suppression: {e}")
        return jsonify({'success': False, 'error': "Erreur technique"}), 500

# Dans views/api.py

@api_bp.route("/reservations_jour/<date_str>")
@login_required
def api_reservations_jour_detail(date_str):
    """API JSON pour le tooltip du calendrier (survol)."""
    etablissement_id = session.get('etablissement_id')
    try:
        d = datetime.strptime(date_str, '%Y-%m-%d').date()
        
        # On r√©cup√®re les r√©servations du jour
        # On joint avec Utilisateur pour avoir le nom
        res = db.session.execute(
            db.select(Reservation, Utilisateur.nom_utilisateur)
            .join(Utilisateur, Reservation.utilisateur_id == Utilisateur.id)
            .filter(
                Reservation.etablissement_id == etablissement_id,
                func.date(Reservation.debut_reservation) == d,
                Reservation.statut == 'confirm√©e'
            )
            .order_by(Reservation.debut_reservation)
        ).all()
        
        # On groupe par groupe_id pour √©viter les doublons dans le tooltip
        # (Si une r√©sa a 3 objets, on ne veut pas afficher 3 fois le nom de l'utilisateur)
        seen_groups = set()
        data = []
        
        for r, nom_user in res:
            if r.groupe_id not in seen_groups:
                data.append({
                    'nom_utilisateur': nom_user,
                    'heure_debut': r.debut_reservation.strftime('%H:%M'),
                    'heure_fin': r.fin_reservation.strftime('%H:%M')
                })
                seen_groups.add(r.groupe_id)
                
        return jsonify({'reservations': data})
    except Exception as e:
        current_app.logger.error(f"Erreur API jour: {e}")
        return jsonify({'reservations': []}), 500
        

# ============================================================
# 5. MODIFICATION LIVE DES R√âSERVATIONS (CORRIG√â)
# ============================================================

@api_bp.route("/reservation/<groupe_id>/ajouter", methods=['POST'])
@login_required
def reservation_ajouter_item(groupe_id):
    """Ajoute un item √† une r√©servation existante."""
    services = get_services() # Utilise la factory s√©curis√©e
    data = request.get_json()
    
    try:
        # 1. R√©cup√©ration de la r√©servation (via SQL direct pour performance)
        stmt = select(Reservation).filter_by(groupe_id=groupe_id, etablissement_id=session['etablissement_id'])
        existing_resas = db.session.execute(stmt).scalars().all()
        
        if not existing_resas:
            return jsonify({'success': False, 'error': "R√©servation introuvable"}), 404
            
        first_resa = existing_resas[0]
        # V√©rification droits
        if session.get('user_role') != 'admin' and first_resa.utilisateur_id != session.get('user_id'):
            return jsonify({'success': False, 'error': "Non autoris√©"}), 403

        # 2. Donn√©es
        item_type = data.get('type')
        item_id = int(data.get('id'))
        qty_to_add = int(data.get('quantite', 1))
        
        # 3. V√©rification Stock (Via le Service Stock)
        # On regarde la dispo globale sur ce cr√©neau
        dispo = services.stock.get_disponibilites(
            first_resa.debut_reservation, 
            first_resa.fin_reservation
        )
        
        # On cherche combien il en reste
        stock_restant = 0
        found = False
        
        # Recherche dans les objets
        if item_type == 'objet':
            for obj in dispo['objets']:
                if obj['id'] == item_id:
                    stock_restant = obj['disponible']
                    found = True
                    break
        # Recherche dans les kits
        elif item_type == 'kit':
            for kit in dispo['kits']:
                if kit['id'] == item_id:
                    stock_restant = kit['disponible']
                    found = True
                    break
        
        if not found:
             return jsonify({'success': False, 'error': "Item inconnu ou indisponible"}), 400

        # Note: get_disponibilites a d√©j√† soustrait ce qui est r√©serv√©.
        # Donc stock_restant est ce qu'on peut VRAIMENT ajouter en plus.
        if stock_restant < qty_to_add:
            return jsonify({'success': False, 'error': f"Stock insuffisant (Max ajout: {stock_restant})"}), 400

        # 4. Mise √† jour DB
        target_resa = None
        for r in existing_resas:
            if item_type == 'kit' and r.kit_id == item_id: target_resa = r; break
            if item_type == 'objet' and r.objet_id == item_id: target_resa = r; break
            
        if target_resa:
            target_resa.quantite_reservee += qty_to_add
        else:
            new_resa = Reservation(
                utilisateur_id=first_resa.utilisateur_id,
                etablissement_id=session['etablissement_id'],
                quantite_reservee=qty_to_add,
                debut_reservation=first_resa.debut_reservation,
                fin_reservation=first_resa.fin_reservation,
                groupe_id=groupe_id,
                statut='confirm√©e'
            )
            if item_type == 'kit': new_resa.kit_id = item_id
            else: new_resa.objet_id = item_id
            db.session.add(new_resa)
            
        db.session.commit()
        return jsonify({'success': True})

    except Exception as e:
        db.session.rollback()
        current_app.logger.error(f"Erreur ajout live: {e}", exc_info=True)
        return jsonify({'success': False, 'error': "Erreur technique"}), 500

@api_bp.route("/reservation/<groupe_id>/retirer/<int:item_id>", methods=['DELETE'])
@login_required
def reservation_retirer_item(groupe_id, item_id):
    """Retire un item d'une r√©servation."""
    etablissement_id = session.get('etablissement_id')
    item_type = request.args.get('type') # 'objet' ou 'kit'
    
    try:
        stmt = select(Reservation).filter_by(groupe_id=groupe_id, etablissement_id=etablissement_id)
        resas = db.session.execute(stmt).scalars().all()
        
        target = None
        for r in resas:
            if item_type == 'kit' and r.kit_id == item_id: target = r; break
            if item_type == 'objet' and r.objet_id == item_id: target = r; break
            
        if not target:
            return jsonify({'success': False, 'error': "Item non trouv√©"}), 404
            
        if target.quantite_reservee > 1:
            target.quantite_reservee -= 1
        else:
            db.session.delete(target)
            
        db.session.commit()
        
        # V√©rifier s'il reste des items dans la r√©servation
        remaining = db.session.execute(
            select(func.count(Reservation.id)).filter_by(groupe_id=groupe_id)
        ).scalar()
        
        return jsonify({'success': True, 'remaining_items': remaining})

    except Exception as e:
        db.session.rollback()
        return jsonify({'success': False, 'error': str(e)}), 500



# ============================================================
# 6. SUGGESTIONS
# ============================================================

@api_bp.route("/suggerer_commande", methods=['POST'])
@login_required
def suggerer_commande():
    """Enregistre une suggestion de commande."""
    etablissement_id = session.get('etablissement_id')
    user_id = session.get('user_id')
    data = request.get_json()
    
    if not data:
        return jsonify({'success': False, 'error': "Donn√©es manquantes"}), 400

    try:
        nouvelle_suggestion = Suggestion(
            objet_id=int(data['objet_id']),
            utilisateur_id=user_id,
            quantite=int(data['quantite']),
            commentaire=data.get('commentaire', ''),
            etablissement_id=etablissement_id,
            statut='En attente',
            date_demande=datetime.now()
        )
        
        db.session.add(nouvelle_suggestion)
        db.session.commit()
        
        current_app.logger.info(f"Suggestion cr√©√©e par User {user_id} pour Objet {data['objet_id']}")
        return jsonify({'success': True})
        
    except Exception as e:
        db.session.rollback()
        current_app.logger.error(f"Erreur suggestion: {e}")
        return jsonify({'success': False, 'error': "Erreur technique"}), 500
--- END OF FILE views/api.py ---

--- START OF FILE views/auth.py ---

import re
import uuid
import secrets
from datetime import datetime
from flask import (Blueprint, render_template, request, redirect, url_for,
                   flash, session, current_app)
from werkzeug.security import check_password_hash, generate_password_hash
from sqlalchemy.exc import IntegrityError, SQLAlchemyError
from sqlalchemy import or_

# Imports DB
from db import db, Utilisateur, Parametre, Etablissement
from utils import login_required, is_setup_needed

auth_bp = Blueprint('auth', __name__, template_folder='../templates', url_prefix='/auth')

# --- HELPERS DE VALIDATION ---

def validate_email(email):
    """Validation basique du format email"""
    pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
    return re.match(pattern, email) is not None

def validate_password_strength(password):
    """
    V√©rifie que le mot de passe respecte la politique de s√©curit√© (Align√© avec le HTML) :
    - 12 caract√®res min
    - 1 Majuscule, 1 Minuscule, 1 Chiffre, 1 Sp√©cial
    """
    if len(password) < 12:
        return False, "Le mot de passe doit contenir au moins 12 caract√®res."
    if not re.search(r'[A-Z]', password):
        return False, "Le mot de passe doit contenir au moins une majuscule."
    if not re.search(r'[a-z]', password):
        return False, "Le mot de passe doit contenir au moins une minuscule."
    if not re.search(r'[0-9]', password):
        return False, "Le mot de passe doit contenir au moins un chiffre."
    if not re.search(r'[^a-zA-Z0-9]', password):
        return False, "Le mot de passe doit contenir au moins un caract√®re sp√©cial."
    return True, ""

def sanitize_input(text, max_length=100):
    """Nettoie et limite la longueur des entr√©es utilisateur"""
    if not text:
        return ""
    text = text.strip()[:max_length]
    # Retire les caract√®res de contr√¥le non imprimables
    text = re.sub(r'[\x00-\x1f\x7f-\x9f]', '', text)
    return text

def generer_code_invitation():
    """G√©n√®re un code unique comme LABFLOW-ABC123"""
    return f"LABFLOW-{secrets.token_hex(3).upper()}"

# --- ROUTES ---

@auth_bp.route("/login", methods=['GET', 'POST'])
def login():
    if 'user_id' in session:
        return redirect(url_for('inventaire.index'))
        
    if request.method == 'POST':
        username = request.form.get('username')
        password = request.form.get('password')
        
        # Syntaxe SQLAlchemy 2.0
        user = db.session.execute(
            db.select(Utilisateur).filter_by(nom_utilisateur=username)
        ).scalar_one_or_none()

        if user and check_password_hash(user.mot_de_passe, password):
            session.clear() # Protection Fixation de Session
            
            session.permanent = (user.role != 'admin')
            session['user_id'] = user.id
            session['username'] = user.nom_utilisateur
            session['user_role'] = user.role
            session['etablissement_id'] = user.etablissement_id
            
            etablissement = db.session.get(Etablissement, user.etablissement_id)
            if etablissement:
                session['nom_etablissement'] = etablissement.nom
                
            flash(f"Bienvenue, {user.nom_utilisateur} !", "success")
            return redirect(url_for('inventaire.index'))
        else:
            flash("Nom d'utilisateur ou mot de passe invalide.", "error")
            
    return render_template('login.html')

@auth_bp.route('/register', methods=['GET', 'POST'])
def register():
    if 'user_id' in session:
        return redirect(url_for('inventaire.index'))
    
    if is_setup_needed(current_app):
        return redirect(url_for('auth.setup'))
    
    if request.method == 'POST':
        username = sanitize_input(request.form.get('username', ''))
        email = sanitize_input(request.form.get('email', ''))
        code_invitation = request.form.get('code_invitation', '').strip().upper()
        password = request.form.get('password', '')
        password_confirm = request.form.get('password_confirm', '')
        
        if not all([username, email, code_invitation, password, password_confirm]):
            flash("Tous les champs sont requis.", "error")
            return render_template('register.html')
        
        if password != password_confirm:
            flash("Les mots de passe ne correspondent pas.", "error")
            return render_template('register.html')
        
        # Validation MDP
        is_valid, msg = validate_password_strength(password)
        if not is_valid:
            flash(msg, "error")
            return render_template('register.html')

        # Validation Email
        if not validate_email(email):
            flash("Format d'email invalide.", "error")
            return render_template('register.html')
        
        # V√©rification Code Invitation
        etablissement = db.session.execute(
            db.select(Etablissement).filter_by(code_invitation=code_invitation)
        ).scalar_one_or_none()
        
        if not etablissement:
            flash("Code d'invitation invalide.", "error")
            return render_template('register.html')

        try:
            new_user = Utilisateur(
                nom_utilisateur=username,
                email=email,
                mot_de_passe=generate_password_hash(password, method='scrypt'),
                role='utilisateur',
                etablissement_id=etablissement.id
            )
            db.session.add(new_user)
            db.session.commit()
            
            flash(f"Compte cr√©√© ! Bienvenue dans {etablissement.nom}.", "success")
            return redirect(url_for('auth.login'))
            
        except IntegrityError:
            db.session.rollback()
            flash(f"Le nom d'utilisateur ou l'email est d√©j√† utilis√©.", "error")
            return render_template('register.html')
        except Exception as e:
            db.session.rollback()
            current_app.logger.error(f"Erreur inscription : {e}")
            flash("Erreur technique.", "error")
            return render_template('register.html')
    
    return render_template('register.html')

@auth_bp.route("/setup", methods=['GET', 'POST'])
def setup():
    """
    Initialisation de l'application : cr√©ation de l'√©tablissement et du premier admin.
    """
    if not is_setup_needed(current_app):
        flash("L'application est d√©j√† configur√©e. Connectez-vous.", "warning")
        return redirect(url_for('auth.login'))
    
    if request.method == 'POST':
        # Nettoyage
        nom_etablissement = sanitize_input(request.form.get('nom_etablissement', ''), max_length=200)
        username = sanitize_input(request.form.get('username', ''), max_length=50)
        email = sanitize_input(request.form.get('email', ''), max_length=100)
        password = request.form.get('password', '')
        password_confirm = request.form.get('password_confirm', '')
        
        errors = []
        
        # Validations
        if not nom_etablissement or len(nom_etablissement) < 3:
            errors.append("Nom de l'√©tablissement invalide (min 3 caract√®res).")
            
        if not username or len(username) < 3:
            errors.append("Nom d'utilisateur invalide (min 3 caract√®res).")
            
        if not validate_email(email):
            errors.append("Format d'email invalide.")
            
        if password != password_confirm:
            errors.append("Les mots de passe ne correspondent pas.")
        else:
            is_valid, pwd_msg = validate_password_strength(password)
            if not is_valid:
                errors.append(pwd_msg)
        
        if errors:
            for error in errors: flash(error, "danger")
            return render_template('setup.html')
        
        try:
            # V√©rification unicit√© (Syntaxe SQLAlchemy 2.0)
            existing_user = db.session.execute(
                db.select(Utilisateur).filter(
                    (Utilisateur.nom_utilisateur == username) | 
                    (Utilisateur.email == email)
                )
            ).scalar_one_or_none()
            
            if existing_user:
                flash("Ce nom d'utilisateur ou cet email existe d√©j√†.", "danger")
                return render_template('setup.html')
            
            # Cr√©ation Etablissement
            code_invit = f"LABFLOW-{secrets.token_hex(3).upper()}"
            nouvel_etablissement = Etablissement(
                nom=nom_etablissement,
                code_invitation=code_invit
            )
            db.session.add(nouvel_etablissement)
            db.session.flush()
            
            # Cr√©ation Admin
            admin_user = Utilisateur(
                nom_utilisateur=username,
                mot_de_passe=generate_password_hash(password, method='scrypt'),
                role='admin',
                email=email,
                etablissement_id=nouvel_etablissement.id
            )
            db.session.add(admin_user)
            
            # Param√®tres
            instance_id = str(uuid.uuid4())
            now_iso = datetime.now().isoformat()
            
            params = [
                Parametre(cle='instance_id', valeur=instance_id, etablissement_id=nouvel_etablissement.id),
                Parametre(cle='licence_statut', valeur='FREE', etablissement_id=nouvel_etablissement.id),
                Parametre(cle='licence_date_creation', valeur=now_iso, etablissement_id=nouvel_etablissement.id)
            ]
            db.session.add_all(params)
            
            db.session.commit()
            
            current_app.logger.info(f"Setup completed: Etab {nouvel_etablissement.id}, Admin {admin_user.id}")
            
            flash(f"F√©licitations ! Configuration termin√©e. Votre code d'invitation : {code_invit}", "success")
            return redirect(url_for('auth.login'))
            
        except Exception as e:
            db.session.rollback()
            current_app.logger.critical(f"Erreur Setup : {e}")
            flash("Une erreur critique est survenue.", "danger")
            return render_template('setup.html')
    
    return render_template('setup.html')

@auth_bp.route("/logout")
def logout():
    session.clear()
    flash("Vous avez √©t√© d√©connect√©.", "success")
    return redirect(url_for('auth.login'))

@auth_bp.route("/profil", methods=['GET', 'POST'])
@login_required
def profil():
    user_id = session['user_id']
    user = db.session.get(Utilisateur, user_id)
    
    if not user:
        return redirect(url_for('auth.logout'))

    if request.method == 'POST':
        ancien_mdp = request.form.get('ancien_mot_de_passe')
        nouveau_mdp = request.form.get('nouveau_mot_de_passe')
        confirmation_mdp = request.form.get('confirmation_mot_de_passe')
        
        if not check_password_hash(user.mot_de_passe, ancien_mdp):
            flash("Ancien mot de passe incorrect.", "error")
            return redirect(url_for('auth.profil'))
        
        if nouveau_mdp != confirmation_mdp:
            flash("Les nouveaux mots de passe ne correspondent pas.", "error")
            return redirect(url_for('auth.profil'))

        is_valid, msg = validate_password_strength(nouveau_mdp)
        if not is_valid:
            flash(msg, "error")
            return redirect(url_for('auth.profil'))
        
        try:
            user.mot_de_passe = generate_password_hash(nouveau_mdp, method='scrypt')
            db.session.commit()
            flash("Mot de passe mis √† jour.", "success")
        except Exception as e:
            db.session.rollback()
            flash("Erreur technique.", "error")
    
    return render_template("profil.html", now=datetime.now())
--- END OF FILE views/auth.py ---

--- START OF FILE views/inventaire.py ---

# ============================================================
# FICHIER : views/inventaire.py
# ============================================================
import math
import os
from datetime import datetime, timedelta
from flask import (Blueprint, render_template, request, redirect, url_for,
                   flash, session, jsonify, current_app)
from werkzeug.utils import secure_filename
from sqlalchemy import func, desc, or_
from sqlalchemy.orm import joinedload

# IMPORTS DB
from db import db, Objet, Armoire, Categorie, Reservation, Utilisateur, Historique, Echeance, Budget, Depense, Fournisseur, Suggestion

# IMPORTS UTILS
from utils import login_required, admin_required, limit_objets_required, allowed_file

# --- CORRECTION ICI : On importe le Service au lieu de la fonction API ---
from services.inventory_service import InventoryService, InventoryServiceError

inventaire_bp = Blueprint(
    'inventaire', 
    __name__,
    template_folder='../templates'
)

# ============================================================
# ROUTES
# ============================================================
@inventaire_bp.route("/")
@login_required
def index():
    # --- LOGIQUE DASHBOARD (Conserv√©e) ---
    etablissement_id = session.get('etablissement_id')
    user_id = session.get('user_id')
    if not etablissement_id:
        flash("Erreur critique : session invalide. Veuillez vous reconnecter.", "error")
        return redirect(url_for('auth.logout'))
    
    dashboard_data = {}

    if session.get('user_role') == 'admin':
        dashboard_data['stats'] = {
            'total_objets': db.session.query(Objet).filter_by(etablissement_id=etablissement_id).count(),
            'total_utilisateurs': db.session.query(Utilisateur).filter_by(etablissement_id=etablissement_id).count(),
            'reservations_actives': db.session.query(Reservation).filter(
                Reservation.etablissement_id == etablissement_id,
                Reservation.debut_reservation >= datetime.now()
            ).count()
        }

    admin_user = db.session.execute(db.select(Utilisateur).filter_by(role='admin', etablissement_id=etablissement_id)).scalar_one_or_none()
    dashboard_data['admin_contact'] = admin_user.email if admin_user and admin_user.email else (admin_user.nom_utilisateur if admin_user else "Non d√©fini")
    
    vingt_quatre_heures_avant = datetime.now() - timedelta(hours=24)
    objets_recents = db.session.execute(db.select(Objet.id, Objet.nom).join(Historique, Objet.id == Historique.objet_id).filter(Objet.etablissement_id == etablissement_id, Historique.timestamp >= vingt_quatre_heures_avant, or_(Historique.action == 'Cr√©ation', (Historique.action == 'Modification') & (Historique.details.like('%Quantit√©%')))).group_by(Objet.id, Objet.nom).order_by(db.desc(func.max(Historique.timestamp))).limit(10)).mappings().all()
    dashboard_data['objets_recents'] = objets_recents

    date_aujourdhui = datetime.now().date()
    date_limite = date_aujourdhui + timedelta(days=30)

    echeances_brutes = db.session.execute(
        db.select(Echeance)
        .filter(
            Echeance.etablissement_id == etablissement_id,
            Echeance.traite == 0,
            Echeance.date_echeance >= date_aujourdhui,
            Echeance.date_echeance <= date_limite
        )
        .order_by(Echeance.date_echeance.asc())
        .limit(5)
    ).scalars().all()

    prochaines_echeances_calculees = []
    for echeance in echeances_brutes:
        jours_restants = (echeance.date_echeance - date_aujourdhui).days
        prochaines_echeances_calculees.append({
            'intitule': echeance.intitule,
            'date_echeance_obj': echeance.date_echeance,
            'jours_restants': jours_restants
        })
    dashboard_data['prochaines_echeances'] = prochaines_echeances_calculees

    now = datetime.now()
    
    reservations = db.session.execute(
        db.select(
            Reservation.groupe_id,
            Reservation.debut_reservation,
            func.count(Reservation.objet_id).label('item_count')
        )
        .filter(
            Reservation.etablissement_id == etablissement_id,
            Reservation.utilisateur_id == user_id,
            Reservation.debut_reservation >= now
        )
        .group_by(Reservation.groupe_id, Reservation.debut_reservation)
        .order_by(Reservation.debut_reservation.asc())
        .limit(5)
    ).mappings().all()
    
    dashboard_data['reservations'] = reservations

    annee_scolaire_actuelle = now.year if now.month >= 9 else now.year - 1

    budget_actuel = db.session.execute(
        db.select(Budget).filter_by(
            annee=annee_scolaire_actuelle,
            cloture=False,
            etablissement_id=etablissement_id
        )
    ).scalar_one_or_none()

    solde_actuel = None
    if budget_actuel:
        total_depenses = db.session.query(func.sum(Depense.montant)).filter_by(
            budget_id=budget_actuel.id,
            etablissement_id=etablissement_id
        ).scalar() or 0
        solde_actuel = budget_actuel.montant_initial - total_depenses

    dashboard_data['solde_budget'] = solde_actuel

    recent_reservations = db.session.execute(
        db.select(
            Reservation.groupe_id,
            Reservation.debut_reservation.label('timestamp')
        )
        .filter_by(utilisateur_id=user_id, etablissement_id=etablissement_id)
        .group_by(Reservation.groupe_id, Reservation.debut_reservation)
        .order_by(Reservation.debut_reservation.desc())
        .limit(5)
    ).mappings().all()

    other_actions = db.session.execute(
        db.select(
            Historique.action,
            Historique.timestamp,
            Historique.details,
            Objet.nom.label('objet_nom')
        )
        .join(Objet, Historique.objet_id == Objet.id)
        .filter(
            Historique.utilisateur_id == user_id,
            Historique.etablissement_id == etablissement_id
        )
        .where(Historique.action.notlike('%R√©servation%'))
        .order_by(Historique.timestamp.desc())
        .limit(5)
    ).mappings().all()

    all_actions = list(recent_reservations) + list(other_actions)
    all_actions.sort(key=lambda x: x['timestamp'], reverse=True)
    top_5_actions = all_actions[:5]

    historique_enrichi = []
    for action in top_5_actions:
        entry = {'timestamp': action['timestamp']}
        if 'groupe_id' in action: 
            entry['type'] = 'reservation'
            entry['action'] = 'R√©servation'
            entry['kits'] = []
            entry['objets_manuels'] = ["D√©tails en cours de migration..."]
        else: 
            entry['type'] = 'autre'
            entry['action'] = action['action']
            entry['details'] = f"{action['objet_nom']}"
        historique_enrichi.append(entry)

    dashboard_data['historique_recent'] = historique_enrichi
    
    fournisseurs = db.session.execute(
        db.select(Fournisseur)
        .filter_by(etablissement_id=etablissement_id)
        .order_by(Fournisseur.nom)
        .limit(5)
    ).scalars().all()
    
    dashboard_data['fournisseurs'] = fournisseurs

    suggestions_dashboard = db.session.execute(
        db.select(Suggestion)
        .options(joinedload(Suggestion.objet), joinedload(Suggestion.utilisateur))
        .filter_by(etablissement_id=etablissement_id, statut='En attente')
        .order_by(Suggestion.date_demande.desc())
        .limit(10)
    ).scalars().all()
    
    dashboard_data['suggestions'] = suggestions_dashboard
    
    start_tour = db.session.query(Armoire).filter_by(etablissement_id=etablissement_id).count() == 0
    
    return render_template("index.html", start_tour=start_tour, now=datetime.now(), data=dashboard_data)


@inventaire_bp.route("/inventaire")
@login_required
def inventaire():
    """
    Affiche l'inventaire principal.
    CORRIG√â : Utilise InventoryService.
    """
    etablissement_id = session['etablissement_id']
    service = InventoryService(etablissement_id)

    # Param√®tres
    page = request.args.get('page', 1, type=int)
    sort_by = request.args.get('sort_by', 'nom')
    direction = request.args.get('direction', 'asc')
    
    
    filters = {
        'q': request.args.get('q', None),
        'armoire_id': request.args.get('armoire', type=int),
        'categorie_id': request.args.get('categorie', type=int),
        'etat': request.args.get('etat', None)
    }

    try:
        # Appel Service (Retourne un DTO)
        dto = service.get_paginated_inventory(page, sort_by, direction, filters)

        # Construction du dict pagination pour le template
        pagination = {
            'page': dto.current_page,
            'total_pages': dto.total_pages,
            'endpoint': 'inventaire.inventaire'
        }
        
        # Listes pour les filtres (Dropdowns)
        armoires = db.session.execute(db.select(Armoire).filter_by(etablissement_id=etablissement_id).order_by(Armoire.nom)).scalars().all()
        categories = db.session.execute(db.select(Categorie).filter_by(etablissement_id=etablissement_id).order_by(Categorie.nom)).scalars().all()
        armoire_id = request.args.get('armoire', type=int)
        categorie_id = request.args.get('categorie', type=int)
        
        return render_template("inventaire.html",
                            objets=dto.items, # Liste de dicts
                            armoires=armoires,
                            categories=categories,
                            pagination=pagination,
                            date_actuelle=datetime.now(),
                            now=datetime.now,
                            sort_by=sort_by,
                            direction=direction,
                            is_general_inventory=True,
                            armoire_id=armoire_id,
                            categorie_id=categorie_id
                            )
                            
    except Exception as e:
        current_app.logger.error(f"Erreur inventaire: {e}")
        flash("Erreur lors du chargement de l'inventaire.", "error")
        return redirect(url_for('inventaire.index'))

# ============================================================
# ROUTES DE GESTION DES OBJETS (CRUD)
# ============================================================
@inventaire_bp.route("/ajouter_objet", methods=["POST"])
@login_required
@limit_objets_required
def ajouter_objet():
    etablissement_id = session['etablissement_id']
    user_id = session.get('user_id')

    try:
        image_path_db = None
        if 'image' in request.files:
            file = request.files['image']
            if file and file.filename != '':
                if allowed_file(file.filename):
                    filename = secure_filename(file.filename)
                    ts = datetime.now().strftime("%Y%m%d%H%M%S")
                    unique_filename = f"{ts}_{filename}"
                    upload_folder = os.path.join(current_app.root_path, 'static', 'uploads')
                    if not os.path.exists(upload_folder):
                        os.makedirs(upload_folder)
                    file.save(os.path.join(upload_folder, unique_filename))
                    image_path_db = f"uploads/{unique_filename}"
                else:
                    flash("Format d'image non autoris√© (JPG, PNG uniquement).", "warning")

        if not image_path_db:
            image_path_db = request.form.get("image_url", "").strip() or None

        new_objet = Objet(
            nom=request.form.get("nom", "").strip(),
            quantite_physique=int(request.form.get("quantite")),
            seuil=int(request.form.get("seuil")),
            armoire_id=int(request.form.get("armoire_id")),
            categorie_id=int(request.form.get("categorie_id")),
            date_peremption=request.form.get("date_peremption") or None,
            image_url=image_path_db,
            fds_url=request.form.get("fds_url", "").strip() or None,
            etablissement_id=etablissement_id
        )
        db.session.add(new_objet)
        db.session.flush() 

        hist = Historique(
            objet_id=new_objet.id,
            utilisateur_id=user_id,
            action="Cr√©ation",
            details=f"Ajout initial (Qt√©: {new_objet.quantite_physique})",
            etablissement_id=etablissement_id,
            timestamp=datetime.now()
        )
        db.session.add(hist)

        db.session.commit()
        flash(f"L'objet '{new_objet.nom}' a √©t√© ajout√© avec succ√®s !", "success")
        
    except (ValueError, TypeError):
        db.session.rollback()
        flash("Donn√©es invalides. Veuillez v√©rifier les champs num√©riques.", "error")
    except Exception as e:
        db.session.rollback()
        current_app.logger.error(f"Erreur ajout objet: {e}")
        flash(f"Une erreur est survenue.", "error")
        
    return redirect(request.referrer or url_for('inventaire.index'))


@inventaire_bp.route("/modifier_objet/<int:id_objet>", methods=["POST"])
@login_required
def modifier_objet(id_objet):
    objet = db.session.get(Objet, id_objet)
    if not objet or objet.etablissement_id != session['etablissement_id']:
        flash("Objet non trouv√© ou acc√®s non autoris√©.", "error")
        return redirect(url_for('inventaire.index'))

    user_id = session.get('user_id')
    etablissement_id = session['etablissement_id']

    try:
        anciens = {
            'nom': objet.nom,
            'quantite': objet.quantite_physique,
            'seuil': objet.seuil,
            'armoire': objet.armoire_id,
            'categorie': objet.categorie_id
        }

        if 'image' in request.files:
            file = request.files['image']
            if file and file.filename != '':
                if allowed_file(file.filename):
                    filename = secure_filename(file.filename)
                    ts = datetime.now().strftime("%Y%m%d%H%M%S")
                    unique_filename = f"{ts}_{filename}"
                    upload_folder = os.path.join(current_app.root_path, 'static', 'uploads')
                    if not os.path.exists(upload_folder):
                        os.makedirs(upload_folder)
                    file.save(os.path.join(upload_folder, unique_filename))
                    objet.image_url = f"uploads/{unique_filename}"
                else:
                    flash("Format d'image non autoris√©.", "warning")
        
        url_externe = request.form.get("image_url", "").strip()
        if url_externe:
            objet.image_url = url_externe

        objet.nom = request.form.get("nom", "").strip()
        objet.quantite_physique = int(request.form.get("quantite"))
        objet.seuil = int(request.form.get("seuil"))
        objet.armoire_id = int(request.form.get("armoire_id"))
        objet.categorie_id = int(request.form.get("categorie_id"))
        objet.date_peremption = request.form.get("date_peremption") or None
        objet.fds_url = request.form.get("fds_url", "").strip() or None
        
        details_modif = []
        if anciens['quantite'] != objet.quantite_physique:
            diff = objet.quantite_physique - anciens['quantite']
            signe = "+" if diff > 0 else ""
            details_modif.append(f"Stock: {anciens['quantite']} ‚ûù {objet.quantite_physique} ({signe}{diff})")
            
        if anciens['nom'] != objet.nom:
            details_modif.append(f"Nom chang√©")
            
        if anciens['armoire'] != objet.armoire_id:
            details_modif.append("D√©plac√© (Armoire)")

        if details_modif or anciens['seuil'] != objet.seuil:
            msg = ", ".join(details_modif) if details_modif else "Mise √† jour des d√©tails"
            hist = Historique(
                objet_id=objet.id,
                utilisateur_id=user_id,
                action="Modification",
                details=msg,
                etablissement_id=etablissement_id,
                timestamp=datetime.now()
            )
            db.session.add(hist)

        db.session.commit()
        flash(f"L'objet '{objet.nom}' a √©t√© mis √† jour avec succ√®s !", "success")
        
    except Exception as e:
        db.session.rollback()
        current_app.logger.error(f"Erreur modif objet: {e}")
        flash(f"Une erreur est survenue.", "error")

    return redirect(request.referrer or url_for('inventaire.index'))


@inventaire_bp.route("/objet/supprimer/<int:id_objet>", methods=["POST"])
@admin_required
def supprimer_objet(id_objet):
    objet = db.session.get(Objet, id_objet)
    if not objet or objet.etablissement_id != session['etablissement_id']:
        flash("Objet non trouv√© ou acc√®s non autoris√©.", "error")
        return redirect(url_for('inventaire.inventaire'))

    try:
        nom_objet = objet.nom
        hist = Historique(
            objet_id=None, 
            utilisateur_id=session.get('user_id'),
            action="Suppression",
            details=f"Suppression d√©finitive de : {nom_objet}",
            etablissement_id=session['etablissement_id'],
            timestamp=datetime.now()
        )
        db.session.add(hist)
        
        db.session.delete(objet)
        db.session.commit()
        flash(f"L'objet '{nom_objet}' a √©t√© supprim√©.", "success")
        
    except Exception as e:
        db.session.rollback()
        current_app.logger.error(f"Erreur suppression objet: {e}")
        flash(f"Une erreur est survenue lors de la suppression.", "error")

    return redirect(request.referrer or url_for('inventaire.inventaire'))

@inventaire_bp.route("/objet/<int:objet_id>")
@login_required
def voir_objet(objet_id):
    etablissement_id = session['etablissement_id']
    
    objet = db.session.execute(
        db.select(Objet)
        .options(joinedload(Objet.armoire), joinedload(Objet.categorie))
        .filter_by(id=objet_id, etablissement_id=etablissement_id)
    ).scalar_one_or_none()

    if not objet:
        flash("Objet non trouv√© ou acc√®s non autoris√©.", "error")
        return redirect(url_for('inventaire.index'))

    now = datetime.now()
    total_reserve = db.session.query(func.sum(Reservation.quantite_reservee)).filter(
        Reservation.objet_id == objet.id,
        Reservation.etablissement_id == etablissement_id,
        Reservation.fin_reservation > now
    ).scalar() or 0
    
    objet.quantite_disponible = objet.quantite_physique - total_reserve

    results = db.session.execute(
        db.select(Historique, Utilisateur)
        .outerjoin(Utilisateur, Historique.utilisateur_id == Utilisateur.id)
        .filter(Historique.objet_id == objet.id)
        .filter(Historique.etablissement_id == etablissement_id)
        .order_by(Historique.timestamp.desc())
        .limit(20)
    ).all()

    historique = []
    for h, u in results:
        h.nom_utilisateur = u.nom_utilisateur if u else "Utilisateur supprim√©"
        historique.append(h)

    armoires = db.session.execute(db.select(Armoire).filter_by(etablissement_id=etablissement_id)).scalars().all()
    categories = db.session.execute(db.select(Categorie).filter_by(etablissement_id=etablissement_id)).scalars().all()

    return render_template("objet_details.html",
                           objet=objet,
                           historique=historique,
                           armoires=armoires,
                           categories=categories,
                           now=datetime.now())

#==============================================================================
#  ROUTE AFFICHAGE ARMOIRES
#==============================================================================
@inventaire_bp.route("/armoire/<int:armoire_id>")
@login_required
def voir_armoire(armoire_id):
    """
    Affiche le contenu d'une armoire.
    CORRIG√â : Utilise InventoryService.
    """
    etablissement_id = session['etablissement_id']
    service = InventoryService(etablissement_id)

    page = request.args.get('page', 1, type=int)
    sort_by = request.args.get('sort_by', 'nom')
    direction = request.args.get('direction', 'asc')
    
    armoire = db.session.get(Armoire, armoire_id)
    if not armoire or armoire.etablissement_id != etablissement_id:
        flash("Armoire non trouv√©e ou acc√®s non autoris√©.", "error")
        return redirect(url_for('inventaire.index'))

    # Appel Service avec filtre armoire
    filters = {'armoire_id': armoire_id}
    dto = service.get_paginated_inventory(page, sort_by, direction, filters)

    pagination = {
        'page': dto.current_page,
        'total_pages': dto.total_pages,
        'endpoint': 'inventaire.voir_armoire',
        'armoire_id': armoire_id
    }

    autres_armoires = db.session.execute(
        db.select(Armoire)
        .filter(
            Armoire.etablissement_id == etablissement_id,
            Armoire.id != armoire_id
        )
        .order_by(Armoire.nom)
    ).scalars().all()

    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'Gestion des Armoires', 'url': url_for('main.gestion_armoires')},
        {'text': armoire.nom, 'url': None}
    ]

    return render_template("armoire.html",
                           armoire=armoire,
                           objets=dto.items, # DTO
                           pagination=pagination,
                           sort_by=sort_by,
                           direction=direction,
                           autres_armoires=autres_armoires,
                           breadcrumbs=breadcrumbs,
                           now=datetime.now(),
                           armoire_id=armoire_id,
                           categorie_id=None
                           )

#==============================================================================
#  ROUTE AFFICHAGE CATEGORIES
#==============================================================================
@inventaire_bp.route("/categorie/<int:categorie_id>")
@login_required
def voir_categorie(categorie_id):
    """
    Affiche le contenu d'une cat√©gorie.
    CORRIG√â : Utilise InventoryService.
    """
    etablissement_id = session['etablissement_id']
    service = InventoryService(etablissement_id)

    page = request.args.get('page', 1, type=int)
    sort_by = request.args.get('sort_by', 'nom')
    direction = request.args.get('direction', 'asc')

    categorie = db.session.get(Categorie, categorie_id)
    if not categorie or categorie.etablissement_id != etablissement_id:
        flash("Cat√©gorie non trouv√©e ou acc√®s non autoris√©.", "error")
        return redirect(url_for('inventaire.index'))

    # Appel Service avec filtre cat√©gorie
    filters = {'categorie_id': categorie_id}
    dto = service.get_paginated_inventory(page, sort_by, direction, filters)

    pagination = {
        'page': dto.current_page,
        'total_pages': dto.total_pages,
        'endpoint': 'inventaire.voir_categorie',
        'categorie_id': categorie_id
    }

    categories_list = db.session.execute(
        db.select(Categorie)
        .filter(
            Categorie.etablissement_id == etablissement_id,
            Categorie.id != categorie_id
        )
        .order_by(Categorie.nom)
    ).scalars().all()

    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'Gestion des Cat√©gories', 'url': url_for('main.gestion_categories')},
        {'text': categorie.nom, 'url': None}
    ]

    return render_template("categorie.html",
                           categorie=categorie,
                           objets=dto.items, # DTO
                           pagination=pagination,
                           sort_by=sort_by,
                           direction=direction,
                           categories_list=categories_list,
                           breadcrumbs=breadcrumbs,
                           now=datetime.now(),
                           armoire_id=None,
                           categorie_id=categorie_id
                           )
                           
#=======================================================
# ROUTE GESTION ALERTES TRAITEES
#=======================================================
@inventaire_bp.route("/maj_traite/<int:objet_id>", methods=["POST"])
@login_required
def maj_traite(objet_id):
    etablissement_id = session['etablissement_id']
    data = request.get_json()
    
    objet = db.session.get(Objet, objet_id)

    if not objet or objet.etablissement_id != etablissement_id:
        return jsonify(success=False, error="Objet non trouv√© ou acc√®s non autoris√©."), 404

    try:
        objet.traite = 1 if data.get("traite") else 0
        db.session.commit()
        return jsonify(success=True)
    except Exception as e:
        db.session.rollback()
        return jsonify(success=False, error=str(e)), 500

@inventaire_bp.route("/maj_commande/<int:objet_id>", methods=["POST"])
@login_required
def maj_commande(objet_id):
    etablissement_id = session['etablissement_id']
    data = request.get_json()
    
    objet = db.session.get(Objet, objet_id)

    if not objet or objet.etablissement_id != etablissement_id:
        return jsonify(success=False, error="Objet non trouv√© ou acc√®s non autoris√©."), 404

    try:
        objet.en_commande = 1 if data.get("en_commande") else 0
        db.session.commit()
        return jsonify(success=True)
    except Exception as e:
        db.session.rollback()
        return jsonify(success=False, error=str(e)), 500
--- END OF FILE views/inventaire.py ---

--- START OF FILE views/main.py ---

from datetime import datetime, timedelta
import os
from flask import (Blueprint, render_template, request, redirect, url_for,
                   flash, session, send_from_directory, current_app)
from sqlalchemy import func, desc
from sqlalchemy.orm import joinedload
from db import db, Armoire, Categorie, Fournisseur, Objet, Reservation, Utilisateur, Echeance, Depense, Budget, Parametre, Suggestion
from utils import login_required

main_bp = Blueprint(
    'main', 
    __name__,
    template_folder='../templates'
)

    
#============================================================
# GESTION ARMOIRES (LOGIQUE RESTAUR√âE)
#============================================================
@main_bp.route("/gestion_armoires")
@login_required
def gestion_armoires():
    etablissement_id = session['etablissement_id']
    
    armoires = db.session.execute(
        db.select(Armoire.id, Armoire.nom, func.count(Objet.id).label('count'))
        .outerjoin(Objet, Armoire.id == Objet.armoire_id)
        .filter(Armoire.etablissement_id == etablissement_id)
        .group_by(Armoire.id, Armoire.nom)
        .order_by(Armoire.nom)
    ).mappings().all()

    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'G√©rer les Armoires', 'url': None}
    ]

    return render_template("gestion_armoires.html",
                           armoires=armoires,
                           breadcrumbs=breadcrumbs,
                           now=datetime.now())

#============================================================
# GESTION CATEGORIES (LOGIQUE RESTAUR√âE)
#============================================================
@main_bp.route("/gestion_categories")
@login_required
def gestion_categories():
    etablissement_id = session['etablissement_id']

    categories = db.session.execute(
        db.select(Categorie.id, Categorie.nom, func.count(Objet.id).label('count'))
        .outerjoin(Objet, Categorie.id == Objet.categorie_id)
        .filter(Categorie.etablissement_id == etablissement_id)
        .group_by(Categorie.id, Categorie.nom)
        .order_by(Categorie.nom)
    ).mappings().all()

    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'G√©rer les Cat√©gories', 'url': None}
    ]

    return render_template("gestion_categories.html",
                           categories=categories,
                           breadcrumbs=breadcrumbs,
                           now=datetime.now())

#================================================================
#  GESTION CALENDRIER (SECTION MODIFI√âE)
#================================================================
@main_bp.route('/calendrier')
@login_required
def calendrier():
    etablissement_id = session.get('etablissement_id')
    
    # Gestion du mois affich√© (par d√©faut mois courant)
    year = request.args.get('year', datetime.now().year, type=int)
    month = request.args.get('month', datetime.now().month, type=int)
    
    # 1. R√©cup√©ration des jours avec r√©servations pour ce mois
    # On groupe par jour et on compte les groupes de r√©servation distincts
    start_date = datetime(year, month, 1)
    if month == 12:
        end_date = datetime(year + 1, 1, 1)
    else:
        end_date = datetime(year, month + 1, 1)

    stats_res = db.session.execute(
        db.select(
            func.date(Reservation.debut_reservation).label('jour'), 
            func.count(func.distinct(Reservation.groupe_id)).label('total')
        )
        .filter(
            Reservation.etablissement_id == etablissement_id,
            Reservation.debut_reservation >= start_date,
            Reservation.debut_reservation < end_date,
            Reservation.statut == 'confirm√©e'
        )
        .group_by(func.date(Reservation.debut_reservation))
    ).all()

    # 2. Transformation en Dictionnaire pour acc√®s rapide dans le template
    # Format : {'2025-12-28': 2, '2025-12-29': 1}
    reservations_map = {str(row.jour): row.total for row in stats_res}

    return render_template(
        'calendrier.html', 
        year=year, 
        month=month, 
        reservations_map=reservations_map, # <--- On passe √ßa au template
        now=datetime.now()
    )


@main_bp.route("/jour/<string:date_str>")
@login_required
def vue_jour(date_str):
    etablissement_id = session['etablissement_id']
    try:
        date_obj = datetime.strptime(date_str, '%Y-%m-%d').date()
    except ValueError:
        flash("Format de date invalide.", "danger")
        return redirect(url_for('main.calendrier'))

    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'Calendrier', 'url': url_for('main.calendrier')},
        {'text': date_obj.strftime('%d %B %Y'), 'url': None}
    ]

    start_of_day = datetime.combine(date_obj, datetime.min.time())
    end_of_day = datetime.combine(date_obj, datetime.max.time())

    # La requ√™te SQLAlchemy est bien pr√©sente et compl√®te
    reservations_brutes = db.session.execute(
        db.select(
            Reservation.groupe_id,
            Reservation.debut_reservation,
            Reservation.fin_reservation,
            Utilisateur.nom_utilisateur
        )
        .join(Utilisateur, Reservation.utilisateur_id == Utilisateur.id)
        .filter(
            Reservation.etablissement_id == etablissement_id,
            Reservation.debut_reservation < end_of_day,
            Reservation.fin_reservation > start_of_day
        )
        .distinct(Reservation.groupe_id)
        .order_by(Reservation.groupe_id, Reservation.debut_reservation)
    ).mappings().all()

    # La logique de formatage des donn√©es est bien pr√©sente et compl√®te
    reservations_par_heure = {hour: {'starts': [], 'continues': []} for hour in range(24)}
    for resa in reservations_brutes:
        debut_dt = resa.debut_reservation.replace(tzinfo=None)
        fin_dt = resa.fin_reservation.replace(tzinfo=None)

        start_hour = max(8, debut_dt.hour)
        end_hour = min(20, fin_dt.hour if fin_dt.minute > 0 or fin_dt.second > 0 else fin_dt.hour - 1)

        if debut_dt.date() == date_obj and 8 <= debut_dt.hour <= 20:
            reservations_par_heure[debut_dt.hour]['starts'].append(dict(resa))
        
        for hour in range(start_hour, end_hour + 1):
            if 8 <= hour <= 20:
                if hour != debut_dt.hour or debut_dt.date() != date_obj:
                    if not any(d.get('groupe_id') == resa.groupe_id for d in reservations_par_heure[hour]['continues']):
                        reservations_par_heure[hour]['continues'].append(dict(resa))

    # L'appel √† render_template est bien pr√©sent et complet
    return render_template("vue_jour.html",
                           date_concernee=date_obj,
                           reservations_par_heure=reservations_par_heure,
                           breadcrumbs=breadcrumbs)

#================================================================
# GESTION ALERTES
#================================================================
@main_bp.route("/alertes")
@login_required
def alertes():
    etablissement_id = session['etablissement_id']
    now = datetime.now()

    options = [
        joinedload(Objet.armoire),
        joinedload(Objet.categorie)
    ]
    
    # 1. Sous-requ√™te pour la quantit√© disponible
    subquery = db.session.query(
        Objet.id.label('objet_id'),
        (Objet.quantite_physique - func.coalesce(db.session.query(func.sum(Reservation.quantite_reservee))
            .filter(Reservation.objet_id == Objet.id, Reservation.fin_reservation > now)
            .scalar_subquery(), 0)).label('quantite_disponible')
    ).filter(Objet.etablissement_id == etablissement_id).subquery()

    # 2. Requ√™te brute (Renvoie des Rows [Objet, quantite])
    rows_stock = db.session.query(Objet, subquery.c.quantite_disponible.label('quantite_disponible'))\
        .join(subquery, Objet.id == subquery.c.objet_id)\
        .options(*options)\
        .filter(
            Objet.etablissement_id == etablissement_id,
            subquery.c.quantite_disponible <= Objet.seuil
        ).order_by(Objet.nom).all()

    # --- CORRECTION ICI : On extrait l'objet de la Row ---
    objets_stock_results = []
    for row in rows_stock:
        # row[0] est l'objet, row[1] est la quantit√© disponible calcul√©e
        obj = row[0] 
        # On peut attacher la quantit√© calcul√©e √† l'objet si on veut l'afficher
        obj.quantite_disponible_calc = row[1] 
        objets_stock_results.append(obj)
    # -----------------------------------------------------

    # 3. Requ√™te P√©remption (Celle-ci renvoie d√©j√† des Objets, pas de souci)
    date_limite = (now + timedelta(days=30)).date()
    objets_peremption = db.session.query(Objet)\
        .options(*options)\
        .filter(
            Objet.etablissement_id == etablissement_id,
            Objet.date_peremption != None,
            func.date(Objet.date_peremption) < date_limite,
            Objet.traite == 0
        ).order_by(Objet.date_peremption.asc()).all()
    
    # 4. Suggestions
    suggestions = db.session.execute(
        db.select(Suggestion)
        .options(joinedload(Suggestion.objet), joinedload(Suggestion.utilisateur))
        .filter_by(etablissement_id=etablissement_id, statut='En attente')
        .order_by(Suggestion.date_demande.desc())
    ).scalars().all()

    return render_template("alertes.html",
                           objets_stock=objets_stock_results,
                           objets_peremption=objets_peremption,
                           suggestions=suggestions,
                           date_actuelle=now,
                           now=now)

#================================================================
# GESTION FOURNISSEURS
#================================================================
@main_bp.route("/fournisseurs")
@login_required
def voir_fournisseurs():
    etablissement_id = session['etablissement_id']
    
    # NOUVELLE REQU√äTE : On r√©cup√®re tous les fournisseurs de l'√©tablissement
    fournisseurs = db.session.execute(
        db.select(Fournisseur)
        .filter_by(etablissement_id=etablissement_id)
        .order_by(Fournisseur.nom)
    ).scalars().all()
    
    return render_template("fournisseurs.html", fournisseurs=fournisseurs)

#================================================================
#  GESTION PANIER
#================================================================
@main_bp.route("/panier")
@login_required
def panier():
    # D√©finition du fil d'Ariane
    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'Mon Panier', 'url': None}
    ]
    return render_template("panier.html", breadcrumbs=breadcrumbs)

#================================================================
#  GESTION PAGE A PROPOS
#================================================================
@main_bp.route("/a-propos")
@login_required
def a_propos():
    etablissement_id = session.get('etablissement_id')
    
    # 1. R√©cup√©ration des infos de licence (Indispensable pour le template)
    params = db.session.execute(
        db.select(Parametre).filter_by(etablissement_id=etablissement_id)
    ).scalars().all()
    
    params_dict = {p.cle: p.valeur for p in params}
    
    licence_info = {
        'is_pro': params_dict.get('licence_statut') == 'PRO',
        'instance_id': params_dict.get('instance_id', 'N/A'),
        'statut': params_dict.get('licence_statut', 'FREE')
    }

    # 2. Fil d'Ariane
    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': '√Ä Propos', 'url': None}
    ]

    return render_template("a_propos.html", 
                           breadcrumbs=breadcrumbs,
                           licence=licence_info,
                           now=datetime.now())

#================================================================
#  GESTION FAVICON
#================================================================
@main_bp.route('/favicon.ico')
def favicon():
    return send_from_directory(os.path.join(current_app.root_path, 'static', 'icons'),
                               'favicon.ico', mimetype='image/vnd.microsoft.icon')

--- END OF FILE views/main.py ---


==================================================
FICHIER : tools\generate_structure.py
==================================================
import os

# Liste des dossiers √† ignorer pour ne pas polluer le prompt
IGNORE_DIRS = {
    '.git', '__pycache__', 'venv', 'env', '.idea', '.vscode', 
    'instance', 'migrations', 'static/uploads'
}

# Liste des fichiers √† ignorer
IGNORE_FILES = {
    '.DS_Store', 'Thumbs.db', '.gitignore', 'generate_structure.py', 
    'update_db.py', 'reset_db.py', 'audit_files.py', 'simulate_dormant.py'
}

def generate_tree(startpath):
    tree_str = "### üìÇ STRUCTURE R√âELLE DU PROJET\n/\n"
    
    for root, dirs, files in os.walk(startpath):
        # Filtrage des dossiers in-place
        dirs[:] = [d for d in dirs if d not in IGNORE_DIRS]
        
        level = root.replace(startpath, '').count(os.sep)
        indent = '‚îÇ   ' * (level)
        
        # On n'affiche pas la racine '.'
        if root != startpath:
            folder_name = os.path.basename(root)
            tree_str += f"{indent}‚îú‚îÄ‚îÄ üìÇ {folder_name}/\n"
            sub_indent = '‚îÇ   ' * (level + 1)
        else:
            sub_indent = '‚îÇ   '

        for f in sorted(files):
            if f not in IGNORE_FILES and not f.endswith('.pyc'):
                tree_str += f"{sub_indent}‚îú‚îÄ‚îÄ {f}\n"
                
    return tree_str

if __name__ == "__main__":
    try:
        # G√©n√®re l'arborescence depuis le dossier courant
        structure = generate_tree(os.getcwd())
        
        # Affiche dans la console
        print(structure)
        
        # Sauvegarde dans un fichier texte pour copier-coller facile
        with open("structure_projet.txt", "w", encoding="utf-8") as f:
            f.write(structure)
            
        print("\n‚úÖ L'arborescence a √©t√© g√©n√©r√©e dans 'structure_projet.txt' !")
        print("üëâ Ouvre ce fichier et copie tout son contenu pour le donner √† l'IA.")
        
    except Exception as e:
        print(f"Erreur : {e}")

==================================================
FICHIER : tools\generer_cle.py
==================================================
import hashlib
import sys

# C'est TA cl√© secr√®te (copi√©e depuis ton .env)
# Elle doit √™tre IDENTIQUE √† celle du fichier .env sinon √ßa ne marchera pas
SECRET_KEY = "LABO-PRO-2025-X@v14211825!S@cha14211825!Quentin14211825!"

def generate(instance_id):
    # On colle l'ID et le Secret
    raw = f"{instance_id}-{SECRET_KEY}"
    # On m√©lange le tout (Hash) et on prend les 16 premiers caract√®res
    return hashlib.sha256(raw.encode()).hexdigest()[:16].upper()

if __name__ == "__main__":
    print("\n--- G√âN√âRATEUR DE LICENCE LABFLOW ---")
    
    # Si l'ID est pass√© en argument ou demand√©
    if len(sys.argv) > 1:
        iid = sys.argv[1]
    else:
        iid = input("Collez l'Identifiant d'Instance ici : ").strip()
    
    if iid:
        cle = generate(iid)
        print(f"\nPOUR L'INSTANCE : {iid}")
        print(f"LA CL√â EST      : {cle}")
        print("-" * 40)
    else:
        print("Erreur : ID manquant.")

==================================================
FICHIER : tools\keygen.py
==================================================
import tkinter as tk
from tkinter import messagebox
import hashlib

# =============================================================================
# CONFIGURATION
# =============================================================================
# C'est la cl√© qui est dans ton fichier .env (GMLCL_PRO_KEY)
# Elle doit √™tre STRICTEMENT IDENTIQUE.
SECRET_KEY = "LABO-PRO-2025-X@v14211825!S@cha14211825!Quentin14211825!"

# =============================================================================
# LOGIQUE
# =============================================================================
def generer_cle():
    instance_id = entry_id.get().strip()
    
    if not instance_id:
        messagebox.showwarning("Attention", "Veuillez entrer un Identifiant d'Instance.")
        return

    try:
        # La formule magique (identique √† celle de ton site)
        raw = f"{instance_id}-{SECRET_KEY}"
        cle = hashlib.sha256(raw.encode()).hexdigest()[:16].upper()
        
        # Affichage
        entry_result.config(state='normal') # On d√©verrouille pour √©crire
        entry_result.delete(0, tk.END)
        entry_result.insert(0, cle)
        entry_result.config(state='readonly') # On reverrouille
        
        # Copie automatique dans le presse-papier
        root.clipboard_clear()
        root.clipboard_append(cle)
        lbl_info.config(text="Cl√© g√©n√©r√©e et copi√©e !", fg="green")
        
    except Exception as e:
        messagebox.showerror("Erreur", f"Une erreur est survenue : {e}")

def effacer():
    entry_id.delete(0, tk.END)
    entry_result.config(state='normal')
    entry_result.delete(0, tk.END)
    entry_result.config(state='readonly')
    lbl_info.config(text="Pr√™t", fg="grey")
    entry_id.focus()

# =============================================================================
# INTERFACE GRAPHIQUE
# =============================================================================
root = tk.Tk()
root.title("G√©n√©rateur Licence LabFlow")
root.geometry("400x280")
root.resizable(False, False)
root.configure(bg="#f0f2f5")

# Style
font_label = ("Helvetica", 10, "bold")
font_entry = ("Courier New", 11)

# Titre
tk.Label(root, text="G√©n√©rateur de Licence PRO", bg="#1f3b73", fg="white", font=("Helvetica", 14, "bold"), pady=10).pack(fill="x")

# Zone ID
frame_content = tk.Frame(root, bg="#f0f2f5", padx=20, pady=20)
frame_content.pack(fill="both", expand=True)

tk.Label(frame_content, text="Identifiant Instance (Client) :", bg="#f0f2f5", font=font_label).pack(anchor="w")
entry_id = tk.Entry(frame_content, font=font_entry, width=40, bd=2, relief="flat")
entry_id.pack(pady=(5, 15), ipady=5, fill="x")

# Bouton
btn_generate = tk.Button(frame_content, text="G√âN√âRER LA CL√â", command=generer_cle, bg="#198754", fg="white", font=("Helvetica", 10, "bold"), cursor="hand2", relief="flat", pady=5)
btn_generate.pack(fill="x", pady=5)

# Zone R√©sultat
tk.Label(frame_content, text="Cl√© de Licence :", bg="#f0f2f5", font=font_label).pack(anchor="w", pady=(15, 0))
entry_result = tk.Entry(frame_content, font=("Courier New", 14, "bold"), width=40, bd=2, relief="solid", justify="center", state="readonly", fg="#1f3b73")
entry_result.pack(pady=5, ipady=5, fill="x")

# Info bas
lbl_info = tk.Label(frame_content, text="Entrez l'ID et cliquez sur G√©n√©rer", bg="#f0f2f5", fg="grey")
lbl_info.pack(pady=5)

# Lancement
entry_id.focus()
root.bind('<Return>', lambda event: generer_cle()) # Touche Entr√©e pour valider
root.mainloop()

==================================================
FICHIER : tools\keygen_ui.py
==================================================
import tkinter as tk
from tkinter import ttk
import hashlib
import pyperclip # Librairie pour copier dans le presse-papiers

# ATTENTION : Cette cl√© doit √™tre EXACTEMENT la m√™me que dans votre app.py
CLE_PRO_SECRETE = "LABO-PRO-2025-X@v14211825!S@cha14211825!Quentin14211825!"

def generer_et_afficher_cle():
    """R√©cup√®re l'ID, g√©n√®re la cl√© et l'affiche dans le champ de sortie."""
    instance_id = entry_id.get().strip()
    if not instance_id:
        entry_cle.delete(0, tk.END)
        entry_cle.insert(0, "Veuillez entrer un ID d'instance.")
        return

    # Le m√™me calcul que dans app.py
    chaine_a_hasher = f"{instance_id}-{CLE_PRO_SECRETE}"
    hash_complet = hashlib.sha256(chaine_a_hasher.encode('utf-8')).hexdigest()
    cle_licence = hash_complet[:16]

    # Afficher la cl√© g√©n√©r√©e
    entry_cle.delete(0, tk.END)
    entry_cle.insert(0, cle_licence)
    print(f"Cl√© g√©n√©r√©e pour {instance_id}: {cle_licence}")

def copier_cle():
    """Copie la cl√© g√©n√©r√©e dans le presse-papiers."""
    cle = entry_cle.get()
    if cle and "Veuillez" not in cle:
        pyperclip.copy(cle)
        # Petit feedback visuel
        btn_copier.config(text="Copi√© !")
        root.after(1500, lambda: btn_copier.config(text="Copier la cl√©"))

# --- Cr√©ation de l'interface graphique ---
root = tk.Tk()
root.title("G√©n√©rateur de Cl√© de Licence Pro")
root.geometry("500x200")
root.resizable(False, False)

# Style
style = ttk.Style()
style.configure("TLabel", font=("Arial", 10))
style.configure("TButton", font=("Arial", 10))
style.configure("TEntry", font=("Arial", 10))

# Frame principale
main_frame = ttk.Frame(root, padding="20")
main_frame.pack(fill="both", expand=True)

# Champ d'entr√©e pour l'ID d'instance
lbl_id = ttk.Label(main_frame, text="Identifiant d'Instance du Client :")
lbl_id.pack(pady=(0, 5), anchor="w")
entry_id = ttk.Entry(main_frame, width=60)
entry_id.pack(fill="x")

# Bouton de g√©n√©ration
btn_generer = ttk.Button(main_frame, text="G√©n√©rer la Cl√©", command=generer_et_afficher_cle)
btn_generer.pack(pady=10)

# Champ de sortie pour la cl√© g√©n√©r√©e
lbl_cle = ttk.Label(main_frame, text="Cl√© de Licence √† fournir :")
lbl_cle.pack(pady=(10, 5), anchor="w")
entry_cle = ttk.Entry(main_frame, width=60, state="readonly")
entry_cle.pack(fill="x", side="left", expand=True)

# Bouton pour copier
btn_copier = ttk.Button(main_frame, text="Copier", command=copier_cle)
btn_copier.pack(fill="x", side="right", padx=(5, 0))


# Lancer l'application
root.mainloop()

==================================================
FICHIER : tools\Keys.txt
==================================================
SECRET_KEY='4d890aa022eeeec33f3aa0ab1c5dc5f71297eb39537372c8'
GMLCL_PRO_KEY='X@vierN@welQuentinS@cha14211825!'


==================================================
FICHIER : tools\Secret_Key-GMLCL_Key.txt
==================================================
export SECRET_KEY='0ce2f925e3ecc39e5ea2f3bc0ce917acb8fd787f92ba9f5a'
export GMLCL_PRO_KEY='LABO-PRO-2025-X@v14211825!S@cha14211825!Quentin14211825!'
export PEXELS_API_KEY='eXyUFwq2u2j0PdTD06ctisTuF577uGWasC6Wxz3cmzeffMAa6wCTK6gb'

==================================================
FICHIER : tools\structure_projet.txt
==================================================
### üìÇ STRUCTURE R√âELLE DU PROJET
/
‚îÇ   ‚îú‚îÄ‚îÄ .env
‚îÇ   ‚îú‚îÄ‚îÄ Mode-Emploi.pdf
‚îÇ   ‚îú‚îÄ‚îÄ README.md
‚îÇ   ‚îú‚îÄ‚îÄ api_pexels.txt
‚îÇ   ‚îú‚îÄ‚îÄ app.py
‚îÇ   ‚îú‚îÄ‚îÄ backup.sql
‚îÇ   ‚îú‚îÄ‚îÄ code_bundle_complet.txt
‚îÇ   ‚îú‚îÄ‚îÄ config.py
‚îÇ   ‚îú‚îÄ‚îÄ db.py
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml
‚îÇ   ‚îú‚îÄ‚îÄ extensions.py
‚îÇ   ‚îú‚îÄ‚îÄ forms.py
‚îÇ   ‚îú‚îÄ‚îÄ main.exe
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îú‚îÄ‚îÄ run.py
‚îÇ   ‚îú‚îÄ‚îÄ run.spec
‚îÇ   ‚îú‚îÄ‚îÄ utils.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ inventory_service.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kit_service.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ panier_service.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stock_service.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ static/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logo.png
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ css/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bootstrap-icons.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bootstrap.min.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ style.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ modules/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ alerts.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendar.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ inventory.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reports.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tour.css
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ icons/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ajout.png
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ by-nc-nd.eu.svg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart-grey.svg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart-orange.svg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart-red.svg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ favicon.ico
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logo.svg
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ images/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Cc_by-nc-nd_icon.svg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ apple-touch-icon.png
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ favicon.png
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ favicon.svg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ fournisseurs/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ avec56y7b.webp
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ biolab.jpg
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ images.png
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logo_sordalab.png
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ objets/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 16006587-lame_couvre_objet_pour_microscope.jpg
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 395000.webp
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Appareil_de_Berlese.jpg
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Cuve_cuvette_a_dissection.jpg
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ baguette-verre.jpg
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ becher-forme-basse.jpg
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ coton.jpeg
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ couelle.jpg
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ d029acf1-fc4f-4c57-a2c7-cd8970ee2f44.avif
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dd7bc02d-1c1e-4ad9-a211-931169ee470c.avif
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ e469ec17-a6da-4e4d-b488-d034edf2ab04.avif
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entonnoir.jpg
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fehling.png
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ imagemagic.jpeg
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lame.jpg
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lames-oignon.webp
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mortier.jpeg
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pilon.webp
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ racine_jacinthe_cl_mitoses_he_small.jpg
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shopping.webp
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sonde-cannelee.jpg
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tube-a-essai-en-verre-borosilicate-3-3-type-1-011753150-product_zoom-1-300x300.jpg
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ verre-montre.jpg
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vert-de-methyle-acetique-125-ml.jpg
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ js/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bootstrap.bundle.min.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ script.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ modules/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ booking-modal.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendar-daily.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendar-monthly.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart-summary.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart-utils.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ import_feedback.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ toast.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tour.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ uploads/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ fds/
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ templates/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Licence.txt
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _add_object_modal.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _breadcrumb.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _inventaire_content.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _modale_danger.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _modale_fournisseur_add.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _modale_fournisseur_edit.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _modale_suggestion.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _modale_warning.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _modals.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _pagination.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _table_objets.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ a_propos.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin_backup.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin_echeances.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin_fournisseurs.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin_import.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin_kit_modifier.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin_kits.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin_utilisateurs.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ alertes.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ armoire.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ budget.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendrier.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ categorie.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ documentation.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dormants.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ footer.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fournisseurs.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gestion_armoires.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gestion_categories.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ header.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ inventaire.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ legal.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ modale_objet.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ objet_details.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ panier.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profil.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rapports.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ register.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ setup.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sub_header.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vue_jour.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ errors/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 404.html
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 429.html
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 500.html
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ tools/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Keys.txt
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Secret_Key-GMLCL_Key.txt
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ generer_cle.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ keygen.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ keygen_ui.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ views/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ inventaire.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ _trash/


==================================================
FICHIER : tools\tree.py
==================================================
#!/usr/bin/env python3
"""
Script pour g√©n√©rer l'arborescence d'un projet Flask
Usage: python tree.py [chemin] [options]
"""

import os
import sys
from pathlib import Path

# Dossiers et fichiers √† ignorer (typiques Flask/Python)
IGNORE_DIRS = {
    '__pycache__', '.git', '.venv', 'venv', 'env',
    'node_modules', '.pytest_cache', '.mypy_cache',
    'instance', 'build', 'dist', '*.egg-info'
}

IGNORE_FILES = {
    '.DS_Store', 'Thumbs.db', '.env', '.env.local',
    '*.pyc', '*.pyo', '*.log', '.gitignore'
}

def should_ignore(name, is_dir=False):
    """V√©rifie si un fichier/dossier doit √™tre ignor√©."""
    if is_dir:
        return name in IGNORE_DIRS
    
    # Fichiers exacts
    if name in IGNORE_FILES:
        return True
    
    # Patterns (*.pyc, etc.)
    for pattern in IGNORE_FILES:
        if '*' in pattern:
            ext = pattern.replace('*', '')
            if name.endswith(ext):
                return True
    return False

def get_file_info(filepath):
    """R√©cup√®re des infos sur le fichier (taille, type)."""
    try:
        size = os.path.getsize(filepath)
        ext = os.path.splitext(filepath)[1]
        
        # Ic√¥nes selon type
        icons = {
            '.py': 'üêç', '.html': 'üåê', '.css': 'üé®', 
            '.js': '‚ö°', '.json': 'üìã', '.md': 'üìù',
            '.sql': 'üóÑÔ∏è', '.txt': 'üìÑ', '.pdf': 'üìï',
            '.png': 'üñºÔ∏è', '.jpg': 'üñºÔ∏è', '.jpeg': 'üñºÔ∏è'
        }
        icon = icons.get(ext, 'üìÑ')
        
        # Conversion taille
        if size < 1024:
            size_str = f"{size}B"
        elif size < 1024**2:
            size_str = f"{size/1024:.1f}KB"
        else:
            size_str = f"{size/(1024**2):.1f}MB"
        
        return f"{icon} ({size_str})"
    except:
        return ""

def print_tree(directory, prefix="", show_size=True, max_depth=None, current_depth=0):
    """
    Affiche l'arborescence r√©cursive.
    
    Args:
        directory: Chemin du dossier √† scanner
        prefix: Pr√©fixe pour l'indentation
        show_size: Afficher la taille des fichiers
        max_depth: Profondeur maximale (None = illimit√©)
        current_depth: Profondeur actuelle (usage interne)
    """
    if max_depth is not None and current_depth >= max_depth:
        return
    
    try:
        entries = sorted(os.listdir(directory))
    except PermissionError:
        print(f"{prefix}[Permission refus√©e]")
        return
    
    # S√©pare dossiers et fichiers
    dirs = [e for e in entries if os.path.isdir(os.path.join(directory, e)) and not should_ignore(e, True)]
    files = [e for e in entries if os.path.isfile(os.path.join(directory, e)) and not should_ignore(e, False)]
    
    # Affiche les dossiers d'abord
    for i, d in enumerate(dirs):
        is_last_dir = (i == len(dirs) - 1) and len(files) == 0
        connector = "‚îî‚îÄ‚îÄ " if is_last_dir else "‚îú‚îÄ‚îÄ "
        print(f"{prefix}{connector}üìÅ {d}/")
        
        extension = "    " if is_last_dir else "‚îÇ   "
        subdir_path = os.path.join(directory, d)
        print_tree(subdir_path, prefix + extension, show_size, max_depth, current_depth + 1)
    
    # Affiche les fichiers ensuite
    for i, f in enumerate(files):
        is_last = i == len(files) - 1
        connector = "‚îî‚îÄ‚îÄ " if is_last else "‚îú‚îÄ‚îÄ "
        
        filepath = os.path.join(directory, f)
        file_info = get_file_info(filepath) if show_size else ""
        print(f"{prefix}{connector}{f} {file_info}")

def count_stats(directory):
    """Compte le nombre de fichiers et dossiers."""
    total_files = 0
    total_dirs = 0
    total_size = 0
    
    for root, dirs, files in os.walk(directory):
        # Filtre les dossiers ignor√©s
        dirs[:] = [d for d in dirs if not should_ignore(d, True)]
        
        total_dirs += len(dirs)
        
        for f in files:
            if not should_ignore(f, False):
                total_files += 1
                try:
                    total_size += os.path.getsize(os.path.join(root, f))
                except:
                    pass
    
    return total_files, total_dirs, total_size

def save_to_file(directory, output_file="arborescence.txt", show_size=True, max_depth=None):
    """Sauvegarde l'arborescence dans un fichier."""
    import io
    from contextlib import redirect_stdout
    
    f = io.StringIO()
    with redirect_stdout(f):
        print(f"üìÇ Arborescence de : {os.path.abspath(directory)}")
        print("=" * 70)
        print()
        print_tree(directory, show_size=show_size, max_depth=max_depth)
        print()
        
        # Stats
        files, dirs, size = count_stats(directory)
        size_mb = size / (1024**2)
        print("=" * 70)
        print(f"üìä Statistiques :")
        print(f"   ‚Ä¢ Fichiers : {files}")
        print(f"   ‚Ä¢ Dossiers : {dirs}")
        print(f"   ‚Ä¢ Taille totale : {size_mb:.2f} MB")
    
    content = f.getvalue()
    
    with open(output_file, 'w', encoding='utf-8') as file:
        file.write(content)
    
    print(content)
    print(f"\n‚úÖ Arborescence sauvegard√©e dans : {output_file}")

def main():
    """Point d'entr√©e principal."""
    # Arguments
    directory = sys.argv[1] if len(sys.argv) > 1 else "."
    
    # Options
    show_size = "--no-size" not in sys.argv
    save = "--save" in sys.argv
    max_depth = None
    
    # Profondeur max
    for arg in sys.argv:
        if arg.startswith("--depth="):
            try:
                max_depth = int(arg.split("=")[1])
            except:
                pass
    
    # V√©rification
    if not os.path.exists(directory):
        print(f"‚ùå Erreur : Le chemin '{directory}' n'existe pas.")
        sys.exit(1)
    
    if not os.path.isdir(directory):
        print(f"‚ùå Erreur : '{directory}' n'est pas un dossier.")
        sys.exit(1)
    
    print(f"üìÇ Arborescence de : {os.path.abspath(directory)}")
    print("=" * 70)
    print()
    
    if save:
        save_to_file(directory, show_size=show_size, max_depth=max_depth)
    else:
        print_tree(directory, show_size=show_size, max_depth=max_depth)
        print()
        
        # Stats finales
        files, dirs, size = count_stats(directory)
        size_mb = size / (1024**2)
        print("=" * 70)
        print(f"üìä Statistiques :")
        print(f"   ‚Ä¢ Fichiers : {files}")
        print(f"   ‚Ä¢ Dossiers : {dirs}")
        print(f"   ‚Ä¢ Taille totale : {size_mb:.2f} MB")
        print()
        print("üí° Usage :")
        print("   python tree.py [chemin] [options]")
        print("   Options :")
        print("     --save         : Sauvegarde dans arborescence.txt")
        print("     --no-size      : Masque les tailles de fichiers")
        print("     --depth=N      : Limite la profondeur √† N niveaux")
        print()
        print("   Exemple : python tree.py . --save --depth=3")

if __name__ == "__main__":
    main()

==================================================
FICHIER : tools\update_db_security.py
==================================================
from app import create_app
from db import db

app = create_app()

with app.app_context():
    print("üîÑ Cr√©ation des tables de s√©curit√©...")
    # Cela ne touche pas aux tables existantes, √ßa cr√©e juste les nouvelles
    db.create_all()
    print("‚úÖ Tables 'equipements_securite', 'maintenance_plans', 'maintenance_logs' cr√©√©es avec succ√®s !")

==================================================
FICHIER : views\admin.py
==================================================
# ============================================================
# FICHIER : views/admin.py (VERSION FINALE & COMPL√àTE)
# ============================================================
import json
import hashlib
import secrets
import re
import logging
import io
import os
import filetype
from io import BytesIO
from urllib.parse import urlparse
from html import escape
from datetime import date, datetime, timedelta
from collections import defaultdict
from functools import wraps

from flask import (Blueprint, render_template, request, redirect, url_for,
                   flash, session, jsonify, send_file, current_app, abort, make_response)
from werkzeug.security import check_password_hash, generate_password_hash
from werkzeug.utils import secure_filename
from sqlalchemy.exc import IntegrityError, SQLAlchemyError
from sqlalchemy import func, select
from sqlalchemy.orm import joinedload

# --- IMPORTS POUR EXPORT PDF (ReportLab) ---
from reportlab.lib import colors
from reportlab.lib.pagesizes import A4, landscape
from reportlab.lib.styles import getSampleStyleSheet, ParagraphStyle
from reportlab.lib.units import cm, mm
from reportlab.platypus import SimpleDocTemplate, Table, TableStyle, Paragraph, Spacer, Flowable, Image as ReportLabImage
from reportlab.lib.enums import TA_CENTER, TA_RIGHT, TA_LEFT
from reportlab.graphics.shapes import Drawing, Rect, Line
from reportlab.graphics import renderPDF

# --- IMPORTS POUR EXPORT EXCEL (OpenPyXL) ---
import openpyxl
from openpyxl import Workbook, load_workbook
from openpyxl.styles import Font, PatternFill, Alignment, Border, Side
from openpyxl.drawing.image import Image as OpenPyXLImage
from openpyxl.worksheet.datavalidation import DataValidation

# Imports Locaux
from extensions import limiter, cache
from db import db, Utilisateur, Parametre, Objet, Armoire, Categorie, Fournisseur, Kit, KitObjet, Budget, Depense, Echeance, Historique, Etablissement, Reservation, Suggestion
from utils import calculate_license_key, admin_required, login_required, log_action, get_etablissement_params, allowed_file

from services.security_service import SecurityService

# ============================================================
# CONFIGURATION
# ============================================================
admin_bp = Blueprint('admin', __name__, template_folder='../templates', url_prefix='/admin')

MAX_EXPORT_LIMIT = 3000
MAX_FILE_SIZE = 10 * 1024 * 1024 # 10 Mo
PASSWORD_MIN_LENGTH = 12
EMAIL_REGEX = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
MAX_IMPORT_ROWS = 5000
MAX_JSON_SIZE = 5 * 1024 * 1024

# ============================================================
# UTILITAIRES DE S√âCURIT√â
# ============================================================
def hash_user_id(user_id):
    return hashlib.sha256(str(user_id).encode()).hexdigest()[:8]

def validate_email(email):
    return re.match(EMAIL_REGEX, email) is not None

def validate_password_strength(password):
    if len(password) < PASSWORD_MIN_LENGTH: return False, f"Min {PASSWORD_MIN_LENGTH} caract√®res."
    if not re.search(r"[a-z]", password): return False, "Min 1 minuscule."
    if not re.search(r"[A-Z]", password): return False, "Min 1 majuscule."
    if not re.search(r"[0-9]", password): return False, "Min 1 chiffre."
    if not re.search(r"[^a-zA-Z0-9]", password): return False, "Min 1 caract√®re sp√©cial."
    return True, ""

def validate_url(url):
    if not url: return True
    try:
        result = urlparse(url)
        return all([result.scheme in ['http', 'https'], result.netloc])
    except ValueError: return False

def sanitize_for_excel(value):
    if isinstance(value, str) and value.startswith(('=', '+', '-', '@')): return f"'{value}"
    return value

def generer_code_unique():
    for _ in range(100):
        code = f"LABFLOW-{secrets.token_hex(3).upper()}"
        nested = db.session.begin_nested()
        try:
            test_etab = Etablissement(nom="__TEST__", code_invitation=code)
            db.session.add(test_etab)
            db.session.flush()
            nested.rollback()
            return code
        except IntegrityError:
            nested.rollback()
            continue
    raise RuntimeError("Impossible de g√©n√©rer un code unique")

def json_serial(obj):
    if isinstance(obj, (datetime, date)): return obj.isoformat()
    raise TypeError(f"Type {type(obj)} non s√©rialisable")

def sanitize_filename(name):
    safe = re.sub(r'[^\w\s-]', '', str(name))
    cleaned = secure_filename(safe)
    return cleaned[:100] if cleaned else "Export"

def sanitize_filename_report(text):
    if not text: return "Rapport"
    return re.sub(r'[^\w\s-]', '', str(text)).strip().replace(' ', '_')

def sanitize_for_excel_report(text):
    if not text: return ""
    text = str(text)
    if text.startswith(('=', '+', '-', '@')): text = "'" + text
    return text

# ============================================================
# G√âN√âRATEURS PDF / EXCEL
# ============================================================

class LogoGraphique(Flowable):
    def __init__(self, width=40, height=40):
        Flowable.__init__(self)
        self.width = width
        self.height = height
    def draw(self):
        self.canv.setFillColor(colors.HexColor('#1F3B73'))
        self.canv.rect(0, 0, 8, 15, fill=1, stroke=0)
        self.canv.rect(12, 0, 8, 25, fill=1, stroke=0)
        self.canv.setFillColor(colors.HexColor('#4facfe'))
        self.canv.rect(24, 0, 8, 35, fill=1, stroke=0)
        self.canv.setStrokeColor(colors.HexColor('#FFD700'))
        self.canv.setLineWidth(2)
        self.canv.line(-5, 5, 35, 40)

def ajouter_logo_excel(ws):
    """Ajoute le logo LabFlow dans le fichier Excel si disponible."""
    logo_path = os.path.join(current_app.root_path, 'static', 'logo.png')
    if os.path.exists(logo_path):
        try:
            img = OpenPyXLImage(logo_path)
            img.width = 50
            img.height = 50
            ws.add_image(img, 'A1')
            return True
        except Exception:
            return False
    return False

def generer_budget_pdf_pro(data_export, metadata):
    buffer = BytesIO()
    doc = SimpleDocTemplate(buffer, pagesize=A4, rightMargin=1.5*cm, leftMargin=1.5*cm, topMargin=1.5*cm, bottomMargin=1.5*cm, title=f"Budget {metadata['etablissement']}")
    elements = []
    styles = getSampleStyleSheet()
    LABFLOW_BLUE = colors.HexColor('#1F3B73')
    style_titre = ParagraphStyle('Titre', parent=styles['Heading1'], fontSize=22, textColor=LABFLOW_BLUE, alignment=TA_CENTER)
    style_normal = ParagraphStyle('Normal', parent=styles['Normal'], fontSize=10)
    style_cell = ParagraphStyle('Cell', parent=styles['Normal'], fontSize=9)
    elements.append(Paragraph(metadata['etablissement'], style_titre))
    elements.append(Spacer(1, 0.5*cm))
    elements.append(Paragraph(f"Rapport du {metadata['date_debut']} au {metadata['date_fin']}", style_normal))
    elements.append(Spacer(1, 0.5*cm))
    table_data = [['Date', 'Fournisseur', 'Libell√©', 'Montant']]
    for item in data_export:
        table_data.append([Paragraph(item['date'], style_cell), Paragraph(escape(item['fournisseur']), style_cell), Paragraph(escape(item['contenu']), style_cell), Paragraph(f"{item['montant']:.2f} ‚Ç¨", style_cell)])
    table_data.append(['', '', 'TOTAL', f"{metadata['total']:.2f} ‚Ç¨"])
    t = Table(table_data, colWidths=[2.5*cm, 5*cm, 8*cm, 3*cm])
    t.setStyle(TableStyle([('BACKGROUND', (0, 0), (-1, 0), LABFLOW_BLUE), ('TEXTCOLOR', (0, 0), (-1, 0), colors.white), ('ALIGN', (0, 0), (-1, -1), 'CENTER'), ('VALIGN', (0, 0), (-1, -1), 'MIDDLE'), ('GRID', (0, 0), (-1, -1), 0.5, colors.grey), ('FONTNAME', (0, 0), (-1, 0), 'Helvetica-Bold'), ('ROWBACKGROUNDS', (0, 1), (-1, -2), [colors.white, colors.whitesmoke])]))
    elements.append(t)
    doc.build(elements)
    buffer.seek(0)
    filename = f"Budget_{sanitize_filename(metadata['etablissement'])}.pdf"
    return send_file(buffer, as_attachment=True, download_name=filename, mimetype='application/pdf')

def generer_budget_excel_pro(data_export, metadata):
    wb = Workbook()
    ws = wb.active
    ws.title = "Budget"
    
    COLOR_PRIMARY = "1F3B73"
    fill_header = PatternFill(start_color=COLOR_PRIMARY, end_color=COLOR_PRIMARY, fill_type="solid")
    font_header = Font(name='Segoe UI', size=11, bold=True, color="FFFFFF")
    
    font_titre = Font(name='Segoe UI', size=16, bold=True, color=COLOR_PRIMARY)
    align_center = Alignment(horizontal="center", vertical="center")
    align_left = Alignment(horizontal="left", vertical="center", wrap_text=True)
    align_right = Alignment(horizontal="right", vertical="center")
    font_data = Font(name='Segoe UI', size=10)
    border_thin = Border(left=Side(style='thin', color='D9D9D9'), right=Side(style='thin', color='D9D9D9'), bottom=Side(style='thin', color='D9D9D9'))

    ws.merge_cells('B1:E1')
    ws['B1'] = f"Rapport Budg√©taire - {metadata['etablissement']}"
    ws['B1'].font = font_titre
    ws['B1'].alignment = align_left
    ws.row_dimensions[1].height = 40
    
    ajouter_logo_excel(ws)

    ws.merge_cells('A2:D2')
    ws['A2'] = f"P√©riode : {metadata['date_debut']} au {metadata['date_fin']}"
    ws['A2'].alignment = align_left
    ws.merge_cells('A3:D3')
    ws['A3'] = f"G√©n√©r√© le {metadata['date_generation']} | {metadata['nombre_depenses']} √©critures"
    ws['A3'].alignment = align_left
    ws.row_dimensions[3].height = 20

    headers = ['Date', 'Fournisseur', 'Libell√©', 'Montant']
    ws.append([]) 
    ws.append(headers) 
    
    for col_num, header in enumerate(headers, 1):
        cell = ws.cell(row=5, column=col_num)
        cell.fill = fill_header
        cell.font = font_header
        cell.alignment = align_center
        cell.border = border_thin
    
    ws.row_dimensions[5].height = 25

    current_row = 6
    for item in data_export:
        ws.cell(row=current_row, column=1, value=item['date']).alignment = align_center
        ws.cell(row=current_row, column=2, value=item['fournisseur'])
        ws.cell(row=current_row, column=3, value=item['contenu'])
        c4 = ws.cell(row=current_row, column=4, value=item['montant'])
        c4.number_format = '#,##0.00 ‚Ç¨'
        c4.alignment = align_right
        
        for col in range(1, 5):
            ws.cell(row=current_row, column=col).border = border_thin
            ws.cell(row=current_row, column=col).font = font_data
        current_row += 1

    ws.cell(row=current_row, column=3, value="TOTAL").font = Font(bold=True)
    ws.cell(row=current_row, column=3).alignment = align_right
    c_total = ws.cell(row=current_row, column=4, value=metadata['total'])
    c_total.font = Font(bold=True, color=COLOR_PRIMARY, size=12)
    c_total.number_format = '#,##0.00 ‚Ç¨'

    ws.column_dimensions['A'].width = 15
    ws.column_dimensions['B'].width = 30
    ws.column_dimensions['C'].width = 50
    ws.column_dimensions['D'].width = 15

    buffer = BytesIO()
    wb.save(buffer)
    buffer.seek(0)
    filename = f"Budget_{sanitize_filename(metadata['etablissement'])}.xlsx"
    return send_file(buffer, as_attachment=True, download_name=filename, mimetype='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet')

def generer_rapport_pdf(data, metadata):
    buffer = BytesIO()
    doc = SimpleDocTemplate(buffer, pagesize=landscape(A4), rightMargin=1.0*cm, leftMargin=1.0*cm, topMargin=1.0*cm, bottomMargin=1.0*cm, title=f"Rapport - {metadata['etablissement']}")
    elements = []
    styles = getSampleStyleSheet()
    logo = LogoGraphique(width=40, height=40)
    titre_style = ParagraphStyle('Titre', parent=styles['Heading1'], fontSize=22, textColor=colors.HexColor('#1F3B73'), alignment=TA_LEFT)
    sous_titre_style = ParagraphStyle('SousTitre', parent=styles['Normal'], fontSize=12, textColor=colors.gray, alignment=TA_LEFT)
    titre_bloc = [Paragraph(f"RAPPORT D'ACTIVIT√â", titre_style), Paragraph(f"{escape(metadata['etablissement'])}", sous_titre_style)]
    header_table = Table([[logo, titre_bloc]], colWidths=[1.5*cm, 20*cm])
    header_table.setStyle(TableStyle([('VALIGN', (0,0), (-1,-1), 'MIDDLE'), ('LEFTPADDING', (0,0), (-1,-1), 0)]))
    elements.append(header_table)
    elements.append(Spacer(1, 0.5*cm))
    meta_style = ParagraphStyle('Meta', parent=styles['Normal'], fontSize=10, textColor=colors.black)
    meta_label = ParagraphStyle('MetaLabel', parent=styles['Normal'], fontSize=10, textColor=colors.HexColor('#1F3B73'), fontName='Helvetica-Bold')
    meta_data = [[Paragraph('P√©riode :', meta_label), Paragraph(metadata['periode'], meta_style), Paragraph('G√©n√©r√© le :', meta_label), Paragraph(metadata['date_generation'], meta_style)], [Paragraph('Total :', meta_label), Paragraph(f"{metadata['total']} entr√©es", meta_style), '', '']]
    meta_table = Table(meta_data, colWidths=[2.5*cm, 8*cm, 2.5*cm, 8*cm])
    meta_table.setStyle(TableStyle([('BACKGROUND', (0,0), (-1,-1), colors.HexColor('#F8F9FA')), ('BOX', (0,0), (-1,-1), 0.5, colors.HexColor('#CCCCCC')), ('PADDING', (0,0), (-1,-1), 6), ('VALIGN', (0,0), (-1,-1), 'MIDDLE')]))
    elements.append(meta_table)
    elements.append(Spacer(1, 0.8*cm))
    header_style = ParagraphStyle('Header', parent=styles['Normal'], fontSize=10, textColor=colors.white, fontName='Helvetica-Bold', alignment=TA_CENTER)
    cell_style = ParagraphStyle('Cell', parent=styles['Normal'], fontSize=9, textColor=colors.black)
    headers = [Paragraph('Date', header_style), Paragraph('Heure', header_style), Paragraph('Utilisateur', header_style), Paragraph('Action', header_style), Paragraph('Objet', header_style), Paragraph('D√©tails', header_style)]
    table_data = [headers]
    for row in data:
        table_data.append([Paragraph(row['date'], cell_style), Paragraph(row['heure'], cell_style), Paragraph(escape(row['utilisateur']), cell_style), Paragraph(escape(row['action']), cell_style), Paragraph(escape(row['objet']), cell_style), Paragraph(escape(row['details']) if row['details'] else '-', cell_style)])
    col_widths = [2.5*cm, 1.5*cm, 4.0*cm, 3.0*cm, 6.5*cm, 10.0*cm]
    t = Table(table_data, colWidths=col_widths, repeatRows=1)
    t.setStyle(TableStyle([('BACKGROUND', (0, 0), (-1, 0), colors.HexColor('#1F3B73')), ('VALIGN', (0, 0), (-1, 0), 'MIDDLE'), ('TOPPADDING', (0, 0), (-1, 0), 10), ('BOTTOMPADDING', (0, 0), (-1, 0), 10), ('VALIGN', (0, 1), (-1, -1), 'TOP'), ('ROWBACKGROUNDS', (0, 1), (-1, -1), [colors.white, colors.HexColor('#F4F6F9')]), ('GRID', (0, 0), (-1, -1), 0.5, colors.HexColor('#E0E0E0')), ('LINEBELOW', (0, 0), (-1, 0), 2, colors.HexColor('#1F3B73'))]))
    elements.append(t)
    doc.build(elements)
    buffer.seek(0)
    filename = f"Rapport_{sanitize_filename_report(metadata['etablissement'])}_{date.today().strftime('%Y%m%d')}.pdf"
    return send_file(buffer, as_attachment=True, download_name=filename, mimetype='application/pdf')

def generer_rapport_excel(data, metadata):
    wb = Workbook()
    ws = wb.active
    ws.title = "Activit√©"
    
    COLOR_PRIMARY = "1F3B73"
    fill_header = PatternFill(start_color="1F3B73", end_color="1F3B73", fill_type="solid")
    font_header = Font(name='Segoe UI', size=11, bold=True, color="FFFFFF")
    
    font_titre = Font(name='Segoe UI', size=18, bold=True, color=COLOR_PRIMARY)
    align_center = Alignment(horizontal="center", vertical="center")
    font_data = Font(name='Segoe UI', size=10)
    align_top = Alignment(vertical="top", wrap_text=True)
    border_thin = Border(left=Side(style='thin', color='D9D9D9'), right=Side(style='thin', color='D9D9D9'), bottom=Side(style='thin', color='D9D9D9'))

    ws.merge_cells('B1:F1')
    ws['B1'] = f"RAPPORT D'ACTIVIT√â - {metadata['etablissement']}"
    ws['B1'].font = font_titre
    ws['B1'].alignment = Alignment(horizontal="left", vertical="center")
    ws.row_dimensions[1].height = 45
    
    ajouter_logo_excel(ws)
    
    ws.merge_cells('A2:F4')
    ws['A2'] = f"P√©riode : {metadata['periode']}\nG√©n√©r√© le : {metadata['date_generation']}\nTotal : {metadata['total']} enregistrements"
    ws['A2'].alignment = Alignment(horizontal="left", vertical="center", wrap_text=True)
    
    headers = ["Date", "Heure", "Utilisateur", "Action", "Objet", "D√©tails"]
    ws.append([])
    ws.append(headers)
    
    for col_num, header in enumerate(headers, 1):
        cell = ws.cell(row=6, column=col_num)
        cell.fill = fill_header
        cell.font = font_header
        cell.alignment = align_center
    
    ws.row_dimensions[6].height = 30
    
    for row in data:
        ws.append([
            row['date'], row['heure'], 
            sanitize_for_excel_report(row['utilisateur']), 
            sanitize_for_excel_report(row['action']), 
            sanitize_for_excel_report(row['objet']), 
            sanitize_for_excel_report(row['details'])
        ])
    
    ws.column_dimensions['A'].width = 12
    ws.column_dimensions['B'].width = 10
    ws.column_dimensions['C'].width = 20
    ws.column_dimensions['D'].width = 15
    ws.column_dimensions['E'].width = 30
    ws.column_dimensions['F'].width = 50
    
    for row in ws.iter_rows(min_row=7, max_row=ws.max_row):
        for cell in row:
            cell.font = font_data
            cell.alignment = align_top
            cell.border = border_thin

    buffer = BytesIO()
    wb.save(buffer)
    buffer.seek(0)
    filename = f"Rapport_{sanitize_filename_report(metadata['etablissement'])}_{date.today().strftime('%Y%m%d')}.xlsx"
    return send_file(buffer, as_attachment=True, download_name=filename, mimetype='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet')

def generer_inventaire_pdf(data, metadata):
    buffer = BytesIO()
    doc = SimpleDocTemplate(buffer, pagesize=landscape(A4), rightMargin=1.0*cm, leftMargin=1.0*cm, topMargin=1.0*cm, bottomMargin=1.0*cm, title=f"Inventaire - {metadata['etablissement']}")
    elements = []
    styles = getSampleStyleSheet()
    logo = LogoGraphique(width=40, height=40)
    titre_style = ParagraphStyle('Titre', parent=styles['Heading1'], fontSize=22, textColor=colors.HexColor('#1F3B73'), alignment=TA_LEFT)
    sous_titre_style = ParagraphStyle('SousTitre', parent=styles['Normal'], fontSize=12, textColor=colors.gray, alignment=TA_LEFT)
    titre_bloc = [Paragraph(f"√âTAT DE L'INVENTAIRE", titre_style), Paragraph(f"{escape(metadata['etablissement'])}", sous_titre_style)]
    header_table = Table([[logo, titre_bloc]], colWidths=[1.5*cm, 20*cm])
    header_table.setStyle(TableStyle([('VALIGN', (0,0), (-1,-1), 'MIDDLE')]))
    elements.append(header_table)
    elements.append(Spacer(1, 0.5*cm))
    info_text = f"<b>G√©n√©r√© le :</b> {metadata['date_generation']}  |  <b>Total r√©f√©rences :</b> {metadata['total']}"
    elements.append(Paragraph(info_text, ParagraphStyle('Info', parent=styles['Normal'], fontSize=10, alignment=TA_RIGHT, textColor=colors.HexColor('#1F3B73'))))
    elements.append(Spacer(1, 0.3*cm))
    header_style = ParagraphStyle('Header', parent=styles['Normal'], fontSize=10, textColor=colors.white, fontName='Helvetica-Bold', alignment=TA_CENTER)
    cell_style = ParagraphStyle('Cell', parent=styles['Normal'], fontSize=9, textColor=colors.black)
    cell_center = ParagraphStyle('CellCenter', parent=cell_style, alignment=TA_CENTER)
    headers = [Paragraph('Cat√©gorie', header_style), Paragraph('D√©signation', header_style), Paragraph('Qt√©', header_style), Paragraph('Seuil', header_style), Paragraph('Emplacement', header_style), Paragraph('P√©remption', header_style)]
    table_data = [headers]
    for row in data:
        qty_style = cell_center
        if row['quantite'] <= row['seuil']: qty_style = ParagraphStyle('Alert', parent=cell_center, textColor=colors.red, fontName='Helvetica-Bold')
        table_data.append([Paragraph(escape(row['categorie']), cell_style), Paragraph(escape(row['nom']), cell_style), Paragraph(str(row['quantite']), qty_style), Paragraph(str(row['seuil']), cell_center), Paragraph(escape(row['armoire']), cell_style), Paragraph(row['peremption'], cell_center)])
    col_widths = [5.0*cm, 9.5*cm, 2.0*cm, 2.0*cm, 5.0*cm, 4.0*cm]
    t = Table(table_data, colWidths=col_widths, repeatRows=1)
    t.setStyle(TableStyle([('BACKGROUND', (0, 0), (-1, 0), colors.HexColor('#1F3B73')), ('VALIGN', (0, 0), (-1, -1), 'MIDDLE'), ('TOPPADDING', (0, 0), (-1, 0), 8), ('BOTTOMPADDING', (0, 0), (-1, 0), 8), ('ROWBACKGROUNDS', (0, 1), (-1, -1), [colors.white, colors.HexColor('#F4F6F9')]), ('GRID', (0, 0), (-1, -1), 0.5, colors.HexColor('#E0E0E0')), ('LINEBELOW', (0, 0), (-1, 0), 2, colors.HexColor('#1F3B73'))]))
    elements.append(t)
    doc.build(elements)
    buffer.seek(0)
    filename = f"Inventaire_{sanitize_filename_report(metadata['etablissement'])}_{date.today().strftime('%Y%m%d')}.pdf"
    return send_file(buffer, as_attachment=True, download_name=filename, mimetype='application/pdf')

def generer_inventaire_excel(data, metadata):
    """G√©n√®re un Excel propre (Style Premium sans image)."""
    wb = Workbook()
    ws = wb.active
    ws.title = "Inventaire"
    
    # --- 1. D√âFINITION DES STYLES ---
    COLOR_PRIMARY = "1F3B73"      # Bleu Nuit
    COLOR_HEADER_TEXT = "FFFFFF"  # Blanc
    COLOR_ZEBRA = "F4F6F9"        # Gris tr√®s clair
    COLOR_BORDER = "D0D0D0"       # Gris bordure
    COLOR_ALERT = "DC3545"        # Rouge Alerte

    # Polices
    font_titre = Font(name='Segoe UI', size=18, bold=True, color=COLOR_PRIMARY)
    # Sous-titre en gris et italique
    font_meta = Font(name='Segoe UI', size=11, italic=True, color="666666")
    
    font_header = Font(name='Segoe UI', size=11, bold=True, color=COLOR_HEADER_TEXT)
    font_data = Font(name='Segoe UI', size=10, color="333333")
    font_alert = Font(name='Segoe UI', size=10, bold=True, color=COLOR_ALERT)
    
    # Remplissages
    fill_header = PatternFill(start_color=COLOR_PRIMARY, end_color=COLOR_PRIMARY, fill_type="solid")
    fill_zebra = PatternFill(start_color=COLOR_ZEBRA, end_color=COLOR_ZEBRA, fill_type="solid")
    
    # Alignements
    align_center = Alignment(horizontal="center", vertical="center")
    align_left = Alignment(horizontal="left", vertical="center", wrap_text=True)
    
    # Bordures
    border_thin = Border(
        left=Side(style='thin', color=COLOR_BORDER),
        right=Side(style='thin', color=COLOR_BORDER),
        top=Side(style='thin', color=COLOR_BORDER),
        bottom=Side(style='thin', color=COLOR_BORDER)
    )

    # --- 2. EN-T√äTE (TEXTE SEULEMENT) ---
    
    # Ligne 1 : TITRE PRINCIPAL
    ws.merge_cells('A1:F1')
    ws['A1'] = f"√âTAT DE L'INVENTAIRE - {metadata['etablissement']}"
    ws['A1'].font = font_titre
    ws['A1'].alignment = align_left
    ws.row_dimensions[1].height = 35
    
    # Ligne 2 : SOUS-TITRE (Date | Total)
    ws.merge_cells('A2:F2')
    ws['A2'] = f"G√©n√©r√© le : {metadata['date_generation']} | Total r√©f√©rences : {metadata['total']}"
    ws['A2'].font = font_meta
    ws['A2'].alignment = align_left
    ws.row_dimensions[2].height = 25
    
    # Ligne 3 : Espace vide pour a√©rer
    ws.row_dimensions[3].height = 15

    # --- 3. TABLEAU : HEADERS (Ligne 4) ---
    headers = ["Cat√©gorie", "D√©signation", "Quantit√©", "Seuil", "Emplacement", "P√©remption"]
    
    header_row = 4
    for col_num, header in enumerate(headers, 1):
        cell = ws.cell(row=header_row, column=col_num, value=header)
        cell.fill = fill_header
        cell.font = font_header
        cell.alignment = align_center
        cell.border = border_thin
    
    ws.row_dimensions[header_row].height = 30

    # --- 4. TABLEAU : DONN√âES ---
    start_row = 5
    
    for i, row in enumerate(data):
        current_row = start_row + i
        
        # Insertion des valeurs
        ws.cell(row=current_row, column=1, value=row['categorie'])
        ws.cell(row=current_row, column=2, value=row['nom'])
        ws.cell(row=current_row, column=3, value=row['quantite'])
        ws.cell(row=current_row, column=4, value=row['seuil'])
        ws.cell(row=current_row, column=5, value=row['armoire'])
        ws.cell(row=current_row, column=6, value=row['peremption'])
        
        # Application du style
        ws.row_dimensions[current_row].height = 25
        
        for col in range(1, 7):
            cell = ws.cell(row=current_row, column=col)
            cell.border = border_thin
            cell.font = font_data
            
            # Alignement : Centre pour les chiffres/dates, Gauche pour le texte
            if col in [3, 4, 6]: 
                cell.alignment = align_center
            else:
                cell.alignment = align_left
            
            # Zebra Striping
            if current_row % 2 == 0:
                cell.fill = fill_zebra
        
        # Alerte Stock Bas (Rouge sur la quantit√©)
        if row['quantite'] <= row['seuil']:
            ws.cell(row=current_row, column=3).font = font_alert

    # --- 5. FINITIONS ---
    ws.column_dimensions['A'].width = 25
    ws.column_dimensions['B'].width = 45
    ws.column_dimensions['C'].width = 12
    ws.column_dimensions['D'].width = 12
    ws.column_dimensions['E'].width = 25
    ws.column_dimensions['F'].width = 18
    
    # Filtres automatiques
    ws.auto_filter.ref = f"A{header_row}:F{start_row + len(data) - 1}"
    
    # Figer les volets sous les titres
    ws.freeze_panes = f"A{start_row}"

    buffer = BytesIO()
    wb.save(buffer)
    buffer.seek(0)
    
    filename = f"Inventaire_{sanitize_filename_report(metadata['etablissement'])}_{date.today().strftime('%Y%m%d')}.xlsx"
    return send_file(buffer, as_attachment=True, download_name=filename, mimetype='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet')
# ============================================================
# ROUTE PRINCIPALE
# ============================================================
@admin_bp.route("/")
@admin_required
def admin():
    etablissement_id = session.get('etablissement_id')
    etablissement = db.session.get(Etablissement, etablissement_id)
    
    if not etablissement:
        admin_hash = hash_user_id(session.get('user_id'))
        current_app.logger.critical(f"Admin access attempt invalid etab by admin_{admin_hash}")
        flash("Erreur critique : √âtablissement introuvable.", "error")
        return redirect(url_for('auth.login'))

    if not etablissement.code_invitation:
        try:
            etablissement.code_invitation = generer_code_unique()
            db.session.commit()
        except Exception as e:
            db.session.rollback()
            current_app.logger.error("Erreur g√©n√©ration code invitation", exc_info=True)

    params = get_etablissement_params(etablissement_id)
    
    licence_info = {
        'is_pro': params.get('licence_statut') == 'PRO',
        'instance_id': params.get('instance_id', 'N/A'),
        'statut': params.get('licence_statut', 'FREE')
    }

    # --- RECUPERATION STATS S√âCURIT√â ---
    try:
        sec_service = SecurityService()
        securite_stats = sec_service.get_dashboard_stats(etablissement_id)
    except Exception as e:
        current_app.logger.error(f"Erreur chargement stats s√©curit√© admin: {str(e)}")
        securite_stats = None
    # -----------------------------------

    return render_template("admin.html", 
                           now=datetime.now(), 
                           licence=licence_info, 
                           etablissement=etablissement,
                           securite_stats=securite_stats)

# ============================================================
# GESTION ARMOIRES / CAT√âGORIES
# ============================================================
@admin_bp.route("/ajouter", methods=["POST"])
@admin_required
@limiter.limit("30 per minute") # Rate limit ajout√©
def ajouter():
    etablissement_id = session['etablissement_id']
    type_objet = request.form.get("type")
    nom = request.form.get("nom", "").strip()
    
    if not nom:
        flash("Le nom ne peut pas √™tre vide.", "error")
        return redirect(request.referrer)

    Model = Armoire if type_objet == "armoire" else Categorie
    
    try:
        nouvel_element = Model(nom=nom, etablissement_id=etablissement_id)
        db.session.add(nouvel_element)
        db.session.commit()
        flash(f"L'√©l√©ment '{nom}' a √©t√© cr√©√©.", "success")
    except IntegrityError:
        db.session.rollback()
        flash(f"L'√©l√©ment '{nom}' existe d√©j√†.", "error")
    except Exception:
        db.session.rollback()
        current_app.logger.error(f"Erreur ajout {type_objet}", exc_info=True) # Log s√©curis√©
        flash("Erreur technique.", "error")
    
    redirect_to = "main.gestion_armoires" if type_objet == "armoire" else "main.gestion_categories"
    return redirect(url_for(redirect_to))

@admin_bp.route("/supprimer/<type_objet>/<int:id>", methods=["POST"])
@admin_required
@limiter.limit("20 per minute")
def supprimer(type_objet, id):
    etablissement_id = session['etablissement_id']
    
    if type_objet == "armoire":
        Model = Armoire
        redirect_to = "main.gestion_armoires"
    elif type_objet == "categorie":
        Model = Categorie
        redirect_to = "main.gestion_categories"
    else:
        abort(400)

    element = db.session.get(Model, id)

    if not element or element.etablissement_id != etablissement_id:
        admin_hash = hash_user_id(session.get('user_id'))
        current_app.logger.warning(f"IDOR SUSPECT: AdminHash {admin_hash} delete {type_objet} {id}")
        abort(403)

    if type_objet == "armoire":
        count = db.session.query(Objet).filter_by(armoire_id=id, etablissement_id=etablissement_id).count()
    else:
        count = db.session.query(Objet).filter_by(categorie_id=id, etablissement_id=etablissement_id).count()
        
    if count > 0:
        flash(f"Impossible de supprimer '{element.nom}' car il contient encore {count} objet(s).", "error")
        return redirect(url_for(redirect_to))

    try:
        nom_element = element.nom
        db.session.delete(element)
        db.session.commit()
        flash(f"L'√©l√©ment '{nom_element}' a √©t√© supprim√©.", "success")
    except Exception:
        db.session.rollback()
        current_app.logger.error(f"Erreur suppression {type_objet}", exc_info=True)
        flash("Erreur technique.", "error")
    
    return redirect(url_for(redirect_to))

def _modifier_element_generique(model_class, request_data):
    """Helper pour modifier Armoire ou Categorie sans duplication."""
    try:
        etablissement_id = session['etablissement_id']
        element_id = request_data.get("id")
        nouveau_nom = request_data.get("nom", "").strip()

        if not all([element_id, nouveau_nom]): 
            return jsonify(success=False, error="Donn√©es invalides"), 400

        element = db.session.get(model_class, element_id)
        if not element or element.etablissement_id != etablissement_id:
            return jsonify(success=False, error="√âl√©ment introuvable"), 404

        element.nom = nouveau_nom
        db.session.commit()
        return jsonify(success=True, nouveau_nom=nouveau_nom)
    
    except IntegrityError:
        db.session.rollback()
        return jsonify(success=False, error="Ce nom existe d√©j√†"), 409
    except Exception:
        db.session.rollback()
        current_app.logger.error(f"Erreur modif {model_class.__name__}", exc_info=True)
        return jsonify(success=False, error="Erreur serveur"), 500

@admin_bp.route("/modifier_armoire", methods=["POST"])
@admin_required
def modifier_armoire():
    return _modifier_element_generique(Armoire, request.get_json())

@admin_bp.route("/modifier_categorie", methods=["POST"])
@admin_required
def modifier_categorie():
    return _modifier_element_generique(Categorie, request.get_json())

# ============================================================
# GESTION UTILISATEURS (DURCIE)
# ============================================================
@admin_bp.route("/utilisateurs")
@admin_required
def gestion_utilisateurs():
    etablissement_id = session['etablissement_id']
    utilisateurs = db.session.execute(
        db.select(Utilisateur)
        .filter_by(etablissement_id=etablissement_id)
        .order_by(Utilisateur.nom_utilisateur)
        .limit(100)
    ).scalars().all()

    breadcrumbs = [{'text': 'Administration', 'url': url_for('admin.admin')}, {'text': 'Utilisateurs'}]
    return render_template("admin_utilisateurs.html", utilisateurs=utilisateurs, breadcrumbs=breadcrumbs, now=datetime.now)

@admin_bp.route("/utilisateurs/ajouter", methods=["POST"])
@admin_required
@limiter.limit("5 per minute") # Rate Limit Strict
def ajouter_utilisateur():
    etablissement_id = session['etablissement_id']
    nom_utilisateur = request.form.get('nom_utilisateur', '').strip()
    email = request.form.get('email', '').strip()
    mot_de_passe = request.form.get('mot_de_passe', '').strip()
    est_admin = 'est_admin' in request.form

    if not nom_utilisateur or not mot_de_passe:
        flash("Champs obligatoires manquants.", "danger")
        return redirect(url_for('admin.gestion_utilisateurs'))
    
    if email and not validate_email(email):
        flash("Format d'email invalide.", "danger")
        return redirect(url_for('admin.gestion_utilisateurs'))

    is_valid, error_msg = validate_password_strength(mot_de_passe)
    if not is_valid:
        flash(error_msg, "danger")
        return redirect(url_for('admin.gestion_utilisateurs'))

    try:
        nouvel_utilisateur = Utilisateur(
            nom_utilisateur=nom_utilisateur,
            email=email or None,
            mot_de_passe=generate_password_hash(mot_de_passe, method='pbkdf2:sha256'),
            role='admin' if est_admin else 'utilisateur',
            etablissement_id=etablissement_id
        )
        db.session.add(nouvel_utilisateur)
        db.session.commit()
        
        admin_hash = hash_user_id(session['user_id'])
        current_app.logger.info(f"Utilisateur cr√©√© par admin_{admin_hash}")
        flash(f"Utilisateur '{nom_utilisateur}' cr√©√©.", "success")
        
    except IntegrityError:
        db.session.rollback()
        # ANTI-ENUMERATION : Message g√©n√©rique
        flash("Erreur : Impossible de cr√©er cet utilisateur (nom peut-√™tre d√©j√† pris).", "danger")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur cr√©ation user", exc_info=True)
        flash("Erreur technique.", "danger")

    return redirect(url_for('admin.gestion_utilisateurs'))

@admin_bp.route("/utilisateurs/modifier_email/<int:id_user>", methods=["POST"])
@admin_required
def modifier_email_utilisateur(id_user):
    etablissement_id = session['etablissement_id']
    email = request.form.get('email', '').strip()
    
    if email and not validate_email(email):
        flash("Format d'email invalide.", "error")
        return redirect(url_for('admin.gestion_utilisateurs'))

    user = db.session.get(Utilisateur, id_user)
    if not user or user.etablissement_id != etablissement_id:
        flash("Utilisateur introuvable.", "error")
        return redirect(url_for('admin.gestion_utilisateurs'))

    try:
        user.email = email if email else None
        db.session.commit()
        flash("Email mis √† jour.", "success")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur modif email", exc_info=True)
        flash("Erreur technique.", "error")

    return redirect(url_for('admin.gestion_utilisateurs'))

@admin_bp.route("/utilisateurs/reinitialiser_mdp/<int:id_user>", methods=["POST"])
@admin_required
@limiter.limit("5 per minute") # Rate Limit Strict
def reinitialiser_mdp(id_user):
    etablissement_id = session['etablissement_id']
    
    if id_user == session['user_id']:
        flash("Action impossible sur soi-m√™me.", "warning")
        return redirect(url_for('admin.gestion_utilisateurs'))

    nouveau_mdp = request.form.get('nouveau_mot_de_passe')
    is_valid, error_msg = validate_password_strength(nouveau_mdp)
    if not is_valid:
        flash(error_msg, "error")
        return redirect(url_for('admin.gestion_utilisateurs'))

    user = db.session.get(Utilisateur, id_user)
    if not user or user.etablissement_id != etablissement_id:
        flash("Utilisateur introuvable.", "error")
        return redirect(url_for('admin.gestion_utilisateurs'))

    try:
        user.mot_de_passe = generate_password_hash(nouveau_mdp, method='pbkdf2:sha256')
        db.session.commit()
        flash(f"Mot de passe r√©initialis√© pour {user.nom_utilisateur}.", "success")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur reset MDP", exc_info=True)
        flash("Erreur technique.", "error")

    return redirect(url_for('admin.gestion_utilisateurs'))

@admin_bp.route("/utilisateurs/supprimer/<int:id_user>", methods=["POST"])
@admin_required
@limiter.limit("5 per minute") # Rate Limit Strict
def supprimer_utilisateur(id_user):
    if id_user == session['user_id']:
        flash("Impossible de supprimer son propre compte.", "error")
        return redirect(url_for('admin.gestion_utilisateurs'))
    
    etablissement_id = session['etablissement_id']
    user = db.session.get(Utilisateur, id_user)
    
    if not user or user.etablissement_id != etablissement_id:
        flash("Utilisateur introuvable.", "error")
        return redirect(url_for('admin.gestion_utilisateurs'))

    try:
        has_history = db.session.query(Historique).filter_by(utilisateur_id=user.id).first()
        has_reservations = db.session.query(Reservation).filter_by(utilisateur_id=user.id).first()

        if has_history or has_reservations:
            user.nom_utilisateur = f"Utilisateur_Supprim√©_{user.id}_{secrets.token_hex(2)}"
            user.email = None
            user.mot_de_passe = "deleted"
            user.role = "desactive"
            db.session.commit()
            flash("Utilisateur anonymis√© et d√©sactiv√© (historique conserv√©).", "warning")
        else:
            db.session.delete(user)
            db.session.commit()
            flash("Utilisateur supprim√© d√©finitivement.", "success")
            
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur suppression user", exc_info=True)
        flash("Erreur technique.", "error")
        
    return redirect(url_for('admin.gestion_utilisateurs'))

@admin_bp.route("/utilisateurs/promouvoir/<int:id_user>", methods=["POST"])
@admin_required
@limiter.limit("3 per minute") # Rate Limit Tr√®s Strict
def promouvoir_utilisateur(id_user):
    if id_user == session['user_id']:
        flash("Action impossible sur soi-m√™me.", "warning")
        return redirect(url_for('admin.gestion_utilisateurs'))
    
    etablissement_id = session['etablissement_id']
    target_user = db.session.get(Utilisateur, id_user)
    current_admin = db.session.get(Utilisateur, session['user_id'])
    
    if not target_user or target_user.etablissement_id != etablissement_id:
        flash("Utilisateur cible introuvable.", "danger")
        return redirect(url_for('admin.gestion_utilisateurs'))

    password_confirm = request.form.get('password')
    if not password_confirm or not check_password_hash(current_admin.mot_de_passe, password_confirm):
        flash("Mot de passe incorrect.", "danger")
        return redirect(url_for('admin.gestion_utilisateurs'))

    try:
        target_user.role = 'admin'
        current_admin.role = 'utilisateur'
        db.session.commit()
        session['user_role'] = 'utilisateur'
        flash(f"Passation r√©ussie ! {target_user.nom_utilisateur} est administrateur.", "success")
        return redirect(url_for('inventaire.index'))
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur promotion", exc_info=True)
        flash("Erreur technique.", "danger")
        return redirect(url_for('admin.gestion_utilisateurs'))

# ============================================================
# GESTION KITS
# ============================================================
@admin_bp.route("/kits")
@admin_required
def gestion_kits():
    etablissement_id = session['etablissement_id']
    kits_data = db.session.execute(
        db.select(Kit, func.count(KitObjet.id).label('count'))
        .outerjoin(KitObjet, Kit.id == KitObjet.kit_id)
        .filter(Kit.etablissement_id == etablissement_id)
        .group_by(Kit.id)
        .order_by(Kit.nom)
    ).mappings().all()
    breadcrumbs = [{'text': 'Administration', 'url': url_for('admin.admin')}, {'text': 'Kits'}]
    return render_template("admin_kits.html", kits=kits_data, breadcrumbs=breadcrumbs)

@admin_bp.route("/kits/ajouter", methods=["POST"])
@admin_required
@limiter.limit("10 per minute")
def ajouter_kit():
    etablissement_id = session['etablissement_id']
    nom = request.form.get("nom", "").strip()
    description = request.form.get("description", "").strip()

    if not nom:
        flash("Le nom du kit est requis.", "danger")
        return redirect(url_for('admin.gestion_kits'))

    try:
        nouveau_kit = Kit(nom=nom, description=description, etablissement_id=etablissement_id)
        db.session.add(nouveau_kit)
        db.session.commit()
        flash(f"Kit '{nom}' cr√©√©.", "success")
        return redirect(url_for('admin.modifier_kit', kit_id=nouveau_kit.id))
    except IntegrityError:
        db.session.rollback()
        flash("Un kit portant ce nom existe d√©j√†.", "danger")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur ajout kit", exc_info=True)
        flash("Erreur technique.", "danger")
    return redirect(url_for('admin.gestion_kits'))

@admin_bp.route("/kits/modifier/<int:kit_id>", methods=["GET", "POST"])
@admin_required
def modifier_kit(kit_id):
    etablissement_id = session['etablissement_id']
    kit = db.session.get(Kit, kit_id)
    
    if not kit or kit.etablissement_id != etablissement_id:
        flash("Kit introuvable.", "danger")
        return redirect(url_for('admin.gestion_kits'))

    if request.method == "POST":
        try:
            # CAS 1 : Modification du Nom/Description
            if 'nom_kit' in request.form:
                nouveau_nom = request.form.get('nom_kit', '').strip()
                nouvelle_desc = request.form.get('description_kit', '').strip()
                
                if not nouveau_nom:
                    flash("Le nom du kit ne peut pas √™tre vide.", "warning")
                else:
                    kit.nom = nouveau_nom
                    kit.description = nouvelle_desc
                    db.session.commit()
                    flash("Informations du kit mises √† jour.", "success")

            # CAS 2 : Ajout d'un objet
            elif request.form.get("objet_id"):
                objet_id = int(request.form.get("objet_id"))
                quantite = int(request.form.get("quantite", 1))
                
                if quantite <= 0: raise ValueError("Quantit√© > 0 requise.")

                objet = db.session.get(Objet, objet_id)
                if not objet or objet.etablissement_id != etablissement_id:
                    raise ValueError("Objet invalide.")
                
                assoc = db.session.execute(db.select(KitObjet).filter_by(kit_id=kit.id, objet_id=objet_id)).scalar_one_or_none()
                if assoc:
                    assoc.quantite += quantite
                else:
                    db.session.add(KitObjet(kit_id=kit.id, objet_id=objet_id, quantite=quantite, etablissement_id=etablissement_id))
                
                db.session.commit()
                flash(f"Objet '{objet.nom}' ajout√©.", "success")

            # CAS 3 : Mise √† jour des quantit√©s (Tableau)
            else:
                modifs = 0
                for key, value in request.form.items():
                    if key.startswith("quantite_"):
                        try:
                            # CORRECTION : Validation stricte de l'ID
                            k_id_str = key.split("_")[1]
                            if not k_id_str.isdigit(): continue
                            
                            k_id = int(k_id_str)
                            val = int(value)
                            
                            assoc = db.session.get(KitObjet, k_id)
                            # V√©rification suppl√©mentaire d'appartenance
                            if assoc and assoc.kit_id == kit.id:
                                if val > 0:
                                    assoc.quantite = val
                                    modifs += 1
                                else:
                                    db.session.delete(assoc)
                                    modifs += 1
                        except (ValueError, IndexError): 
                            continue
                if modifs > 0:
                    db.session.commit()
                    flash("Quantit√©s mises √† jour.", "success")

        except Exception as e:
            db.session.rollback()
            current_app.logger.error("Erreur modif kit", exc_info=True)
            flash(f"Erreur : {str(e)}", "danger")
            
        return redirect(url_for('admin.modifier_kit', kit_id=kit_id))

    # Chargement des donn√©es pour l'affichage
    objets_in_kit = db.session.execute(
        db.select(KitObjet)
        .filter_by(kit_id=kit.id)
        .options(joinedload(KitObjet.objet))
    ).scalars().all()
    
    ids_in_kit = [o.objet_id for o in objets_in_kit]
    
    objets_disponibles = db.session.execute(
        db.select(Objet)
        .filter(Objet.etablissement_id == etablissement_id)
        .filter(~Objet.id.in_(ids_in_kit) if ids_in_kit else True)
        .order_by(Objet.nom)
        .limit(500)
    ).scalars().all()

    breadcrumbs = [
        {'text': 'Admin', 'url': url_for('admin.admin')}, 
        {'text': 'Kits', 'url': url_for('admin.gestion_kits')}, 
        {'text': kit.nom}
    ]
    
    return render_template("admin_kit_modifier.html", 
                           kit=kit, 
                           breadcrumbs=breadcrumbs, 
                           objets_in_kit=objets_in_kit, 
                           objets_disponibles=objets_disponibles)

@admin_bp.route("/kits/retirer_objet/<int:kit_objet_id>", methods=["POST"])
@admin_required
def retirer_objet_kit(kit_objet_id):
    etablissement_id = session['etablissement_id']
    assoc = db.session.get(KitObjet, kit_objet_id)
    if not assoc or assoc.etablissement_id != etablissement_id:
        flash("Objet introuvable.", "danger")
        return redirect(url_for('admin.gestion_kits'))
    kit_id = assoc.kit_id
    try:
        db.session.delete(assoc)
        db.session.commit()
        flash("Objet retir√©.", "success")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur retrait objet kit", exc_info=True)
        flash("Erreur technique.", "danger")
    return redirect(url_for('admin.modifier_kit', kit_id=kit_id))

@admin_bp.route("/kits/supprimer/<int:kit_id>", methods=["POST"])
@admin_required
def supprimer_kit(kit_id):
    etablissement_id = session['etablissement_id']
    kit = db.session.get(Kit, kit_id)
    if kit and kit.etablissement_id == etablissement_id:
        try:
            db.session.delete(kit)
            db.session.commit()
            flash("Kit supprim√©.", "success")
        except Exception:
            db.session.rollback()
            current_app.logger.error("Erreur suppression kit", exc_info=True)
            flash("Erreur technique.", "danger")
    else:
        flash("Kit introuvable.", "danger")
    return redirect(url_for('admin.gestion_kits'))

# ============================================================
# GESTION √âCH√âANCES
# ============================================================
@admin_bp.route("/echeances", methods=['GET'])
@admin_required
def gestion_echeances():
    etablissement_id = session['etablissement_id']
    echeances = db.session.execute(db.select(Echeance).filter_by(etablissement_id=etablissement_id).order_by(Echeance.date_echeance.asc())).scalars().all()
    breadcrumbs = [{'text': 'Admin', 'url': url_for('admin.admin')}, {'text': '√âch√©ances'}]
    return render_template("admin_echeances.html", echeances=echeances, breadcrumbs=breadcrumbs, date_actuelle=date.today())

@admin_bp.route("/echeances/ajouter", methods=['POST'])
@admin_required
def ajouter_echeance():
    etablissement_id = session['etablissement_id']
    intitule = request.form.get('intitule', '').strip()
    date_str = request.form.get('date_echeance')
    details = request.form.get('details', '').strip()

    if not intitule or not date_str:
        flash("Champs obligatoires manquants.", "warning")
        return redirect(url_for('admin.gestion_echeances'))

    try:
        date_echeance = datetime.strptime(date_str, '%Y-%m-%d').date()
        db.session.add(Echeance(intitule=intitule, date_echeance=date_echeance, details=details or None, etablissement_id=etablissement_id))
        db.session.commit()
        flash("√âch√©ance ajout√©e.", "success")
    except ValueError:
        flash("Format de date invalide.", "warning")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur ajout √©ch√©ance", exc_info=True)
        flash("Erreur technique.", "danger")
    return redirect(url_for('admin.gestion_echeances'))

@admin_bp.route("/echeances/modifier/<int:id>", methods=['POST'])
@admin_required
def modifier_echeance(id):
    etablissement_id = session['etablissement_id']
    echeance = db.session.get(Echeance, id)
    if not echeance or echeance.etablissement_id != etablissement_id:
        flash("√âch√©ance introuvable.", "danger")
        return redirect(url_for('admin.gestion_echeances'))

    try:
        echeance.intitule = request.form.get('intitule', '').strip()
        echeance.date_echeance = datetime.strptime(request.form.get('date_echeance'), '%Y-%m-%d').date()
        echeance.details = request.form.get('details', '').strip() or None
        echeance.traite = 1 if 'traite' in request.form else 0
        db.session.commit()
        flash("√âch√©ance modifi√©e.", "success")
    except ValueError:
        flash("Format de date invalide.", "warning")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur modif √©ch√©ance", exc_info=True)
        flash("Erreur technique.", "danger")
    return redirect(url_for('admin.gestion_echeances'))

@admin_bp.route("/echeances/supprimer/<int:id>", methods=['POST'])
@admin_required
def supprimer_echeance(id):
    etablissement_id = session['etablissement_id']
    echeance = db.session.get(Echeance, id)
    if not echeance or echeance.etablissement_id != etablissement_id:
        flash("√âch√©ance introuvable.", "danger")
        return redirect(url_for('admin.gestion_echeances'))
    try:
        db.session.delete(echeance)
        db.session.commit()
        flash("√âch√©ance supprim√©e.", "success")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur suppression √©ch√©ance", exc_info=True)
        flash("Erreur technique.", "danger")
    return redirect(url_for('admin.gestion_echeances'))

# ============================================================
# GESTION BUDGET
# ============================================================
@admin_bp.route("/budget", methods=['GET'])
@admin_required
def budget():
    etablissement_id = session['etablissement_id']
    now = datetime.now()
    annee_scolaire_actuelle = now.year if now.month >= 8 else now.year - 1
    try:
        annee_selectionnee = int(request.args.get('annee', annee_scolaire_actuelle))
    except ValueError:
        annee_selectionnee = annee_scolaire_actuelle

    budgets_archives = db.session.execute(db.select(Budget).filter_by(etablissement_id=etablissement_id).order_by(Budget.annee.desc())).scalars().all()
    budget_affiche = db.session.execute(db.select(Budget).filter_by(etablissement_id=etablissement_id, annee=annee_selectionnee)).scalar_one_or_none()

    if not budget_affiche and not budgets_archives:
        try:
            budget_affiche = Budget(annee=annee_selectionnee, montant_initial=0.0, etablissement_id=etablissement_id)
            db.session.add(budget_affiche)
            db.session.commit()
            budgets_archives.insert(0, budget_affiche)
        except IntegrityError: db.session.rollback()

    depenses = []
    total_depenses = 0
    solde = 0
    cloture_autorisee = False

    if budget_affiche:
        depenses = db.session.execute(
            db.select(Depense).filter_by(budget_id=budget_affiche.id).options(joinedload(Depense.fournisseur)).order_by(Depense.date_depense.desc())
        ).scalars().all()
        total_depenses = sum(d.montant for d in depenses)
        solde = budget_affiche.montant_initial - total_depenses
        if date.today() >= date(budget_affiche.annee + 1, 6, 1): cloture_autorisee = True

    budget_actuel_pour_modales = budget_affiche if budget_affiche and not budget_affiche.cloture else db.session.execute(db.select(Budget).filter_by(etablissement_id=etablissement_id, cloture=False).order_by(Budget.annee.desc())).scalars().first()
    annee_proposee = annee_scolaire_actuelle
    if budgets_archives and budgets_archives[0].annee >= annee_scolaire_actuelle: annee_proposee = budgets_archives[0].annee + 1
    fournisseurs = db.session.execute(db.select(Fournisseur).filter_by(etablissement_id=etablissement_id).order_by(Fournisseur.nom)).scalars().all()
    
    return render_template("budget.html", breadcrumbs=[{'text': 'Admin', 'url': url_for('admin.admin')}, {'text': 'Budget'}], 
                           budget_affiche=budget_affiche, budget_actuel_pour_modales=budget_actuel_pour_modales,
                           annee_proposee_pour_creation=annee_proposee, depenses=depenses, total_depenses=total_depenses,
                           solde=solde, fournisseurs=fournisseurs, budgets_archives=budgets_archives,
                           annee_selectionnee=annee_selectionnee, cloture_autorisee=cloture_autorisee, now=now)

@admin_bp.route("/budget/definir", methods=['POST'])
@admin_required
def definir_budget():
    etablissement_id = session['etablissement_id']
    try:
        montant = float(request.form.get('montant_initial', '0').replace(',', '.'))
        annee = int(request.form.get('annee'))
        if montant < 0: raise ValueError("Montant n√©gatif.")
        
        budget = db.session.execute(db.select(Budget).filter_by(annee=annee, etablissement_id=etablissement_id)).scalar_one_or_none()
        if budget:
            budget.montant_initial = montant
            budget.cloture = False
            flash(f"Budget {annee} mis √† jour.", "success")
        else:
            db.session.add(Budget(annee=annee, montant_initial=montant, etablissement_id=etablissement_id))
            flash(f"Budget {annee} cr√©√©.", "success")
        db.session.commit()
    except Exception as e:
        db.session.rollback()
        current_app.logger.error("Erreur d√©finition budget", exc_info=True)
        flash("Erreur technique.", "danger")
    return redirect(url_for('admin.budget', annee=annee if 'annee' in locals() else None))

@admin_bp.route("/budget/depense/ajouter", methods=['POST'])
@admin_required
def ajouter_depense():
    etablissement_id = session['etablissement_id']
    
    try:
        # 1. Validation Budget
        budget_id = int(request.form.get('budget_id'))
        budget = db.session.get(Budget, budget_id)
        
        if not budget or budget.etablissement_id != etablissement_id:
            raise ValueError("Budget invalide ou acc√®s interdit.")
        
        if budget.cloture:
            raise ValueError("Impossible d'ajouter une d√©pense √† un budget cl√¥tur√©.")

        # 2. R√©cup√©ration donn√©es
        est_bon_achat = 'est_bon_achat' in request.form
        montant_str = request.form.get('montant', '0').replace(',', '.')
        contenu = request.form.get('contenu', '').strip()
        date_str = request.form.get('date_depense')
        
        # 3. Validation montant
        try:
            montant = round(float(montant_str), 2)
        except ValueError:
            raise ValueError("Le format du montant est invalide.")

        MONTANT_MAX = current_app.config.get('DEPENSE_MONTANT_MAX', 1_000_000)
        if montant <= 0 or montant > MONTANT_MAX:
            raise ValueError(f"Le montant doit √™tre positif et inf√©rieur √† {MONTANT_MAX:,.0f} ‚Ç¨.")
        
        # 4. Validation contenu
        if not contenu:
            raise ValueError("La description ne peut pas √™tre vide.")
        if len(contenu) > 200:
            raise ValueError("La description est trop longue (max 200 caract√®res).")
        
        # 5. Validation date
        try:
            date_depense = datetime.strptime(date_str, '%Y-%m-%d').date()
        except ValueError:
            raise ValueError("Format de date invalide.")

        date_min = (datetime.now() - timedelta(days=365*10)).date()
        if date_depense < date_min or date_depense > datetime.now().date():
            raise ValueError("La date doit √™tre comprise entre il y a 10 ans et aujourd'hui.")
        
        # 6. Validation fournisseur
        fournisseur_id = None
        if not est_bon_achat:
            fournisseur_id_raw = request.form.get('fournisseur_id')
            if fournisseur_id_raw:
                try:
                    f_id = int(fournisseur_id_raw)
                    fournisseur = db.session.query(Fournisseur).filter_by(
                        id=f_id, 
                        etablissement_id=etablissement_id
                    ).first()
                    if not fournisseur:
                        raise ValueError("Fournisseur invalide ou introuvable.")
                    fournisseur_id = f_id
                except (ValueError, TypeError):
                    raise ValueError("ID Fournisseur invalide.")

        # 7. Cr√©ation de la d√©pense
        db.session.add(Depense(
            date_depense=date_depense,
            contenu=contenu,
            montant=montant,
            est_bon_achat=est_bon_achat,
            fournisseur_id=fournisseur_id,
            budget_id=budget.id,
            etablissement_id=etablissement_id
        ))
        db.session.commit()
        
        current_app.logger.info(f"D√©pense cr√©√©e pour √©tablissement {etablissement_id}")
        flash("D√©pense ajout√©e avec succ√®s.", "success")
        
    except ValueError as e:
        flash(str(e), "error")
    except IntegrityError:
        db.session.rollback()
        flash("Erreur de coh√©rence des donn√©es.", "error")
    except Exception as e:
        db.session.rollback()
        current_app.logger.error(f"Erreur ajout d√©pense: {e}", exc_info=True)
        flash("Erreur technique lors de l'ajout.", "error")
    
    return redirect(url_for('admin.budget'))

@admin_bp.route("/budget/depense/supprimer/<int:id>", methods=['POST'])
@admin_required
def supprimer_depense(id):
    etablissement_id = session['etablissement_id']
    depense = db.session.get(Depense, id)
    if depense and depense.etablissement_id == etablissement_id:
        try:
            db.session.delete(depense)
            db.session.commit()
            flash("D√©pense supprim√©e.", "success")
        except Exception:
            db.session.rollback()
            current_app.logger.error("Erreur suppression d√©pense", exc_info=True)
            flash("Erreur technique.", "danger")
    else:
        flash("D√©pense introuvable.", "danger")
    return redirect(url_for('admin.budget'))
    

@admin_bp.route("/budget/depense/modifier/<int:id>", methods=['POST'])
@admin_required
def modifier_depense(id):
    etablissement_id = session['etablissement_id']
    
    # 1. Verrouillage + r√©cup√©ration (SELECT ... FOR UPDATE)
    depense = db.session.query(Depense).with_for_update().filter_by(id=id).first()

    # 2. V√©rifications IDOR
    if not depense or depense.etablissement_id != etablissement_id:
        flash("D√©pense introuvable ou acc√®s interdit.", "error")
        return redirect(url_for('admin.budget'))
    
    if depense.budget.etablissement_id != etablissement_id:
        flash("Acc√®s interdit (Incoh√©rence Budget).", "error")
        return redirect(url_for('admin.budget'))

    # 3. V√©rification cl√¥ture
    if depense.budget.cloture:
        flash("Impossible de modifier une d√©pense d'un budget cl√¥tur√©.", "warning")
        return redirect(url_for('admin.budget'))

    try:
        # 4. R√©cup√©ration donn√©es
        est_bon_achat = 'est_bon_achat' in request.form
        montant_str = request.form.get('montant', '0').replace(',', '.')
        contenu = request.form.get('contenu', '').strip()
        date_str = request.form.get('date_depense')
        
        # 5. Validation montant
        try:
            montant = round(float(montant_str), 2)
        except ValueError:
            raise ValueError("Le format du montant est invalide.")

        # Utilisation d'une config ou valeur par d√©faut
        MONTANT_MAX = current_app.config.get('DEPENSE_MONTANT_MAX', 1_000_000)
        if montant <= 0 or montant > MONTANT_MAX:
            raise ValueError(f"Le montant doit √™tre positif et inf√©rieur √† {MONTANT_MAX:,.0f} ‚Ç¨.")
        
        # 6. Validation contenu
        if not contenu:
            raise ValueError("La description ne peut pas √™tre vide.")
        if len(contenu) > 200:
            raise ValueError("La description est trop longue (max 200 caract√®res).")
        
        # 7. Validation date
        try:
            date_depense = datetime.strptime(date_str, '%Y-%m-%d').date()
        except ValueError:
            raise ValueError("Format de date invalide.")

        # R√®gle m√©tier : pas de date future, pas de date trop ancienne (> 10 ans)
        date_min = (datetime.now() - timedelta(days=365*10)).date()
        if date_depense < date_min or date_depense > datetime.now().date():
            raise ValueError("La date doit √™tre comprise entre il y a 10 ans et aujourd'hui.")
        
        # 8. Validation fournisseur
        fournisseur_id = None
        if not est_bon_achat:
            fournisseur_id_raw = request.form.get('fournisseur_id')
            if fournisseur_id_raw:
                try:
                    f_id = int(fournisseur_id_raw)
                    # V√©rification stricte de l'appartenance du fournisseur
                    fournisseur = db.session.query(Fournisseur).filter_by(
                        id=f_id, 
                        etablissement_id=etablissement_id
                    ).first()
                    
                    if not fournisseur:
                        raise ValueError("Fournisseur invalide ou introuvable.")
                    fournisseur_id = f_id
                except (ValueError, TypeError):
                    raise ValueError("ID Fournisseur invalide.")

        # 9. Mise √† jour
        depense.date_depense = date_depense
        depense.contenu = contenu
        depense.montant = montant
        depense.est_bon_achat = est_bon_achat
        depense.fournisseur_id = fournisseur_id

        db.session.commit()
        
        # 10. Log audit
        current_app.logger.info(
            f"D√©pense {id} modifi√©e par User {session.get('user_id')} (Etab {etablissement_id})"
        )
        flash("D√©pense modifi√©e avec succ√®s.", "success")

    except ValueError as e:
        flash(str(e), "error")
    except IntegrityError:
        db.session.rollback()
        flash("Erreur de coh√©rence des donn√©es.", "error")
    except Exception as e:
        db.session.rollback()
        current_app.logger.error(f"Erreur modification d√©pense {id}: {e}", exc_info=True)
        flash("Erreur technique lors de la modification.", "error")

    return redirect(url_for('admin.budget'))



@admin_bp.route("/budget/cloturer", methods=['POST'])
@admin_required
def cloturer_budget():
    etablissement_id = session['etablissement_id']
    try:
        budget = db.session.get(Budget, int(request.form.get('budget_id')))
        if budget and budget.etablissement_id == etablissement_id:
            budget.cloture = True
            db.session.commit()
            flash("Budget cl√¥tur√©.", "success")
        else:
            flash("Budget introuvable.", "danger")
    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur cl√¥ture budget", exc_info=True)
        flash("Erreur technique.", "danger")
    return redirect(url_for('admin.budget'))

@admin_bp.route("/budget/exporter", methods=['GET'])
@admin_required
def exporter_budget():
    etablissement_id = session['etablissement_id']
    date_debut_str = request.args.get('date_debut')
    date_fin_str = request.args.get('date_fin')
    format_type = request.args.get('format')
    
    redirect_url = url_for('main.voir_budget')

    if not all([date_debut_str, date_fin_str, format_type]):
        flash("Param√®tres manquants.", "error")
        return redirect(redirect_url)
    
    try:
        date_debut = datetime.strptime(date_debut_str, '%Y-%m-%d').date()
        date_fin = datetime.strptime(date_fin_str, '%Y-%m-%d').date()
        
        depenses = db.session.execute(
            db.select(Depense).options(joinedload(Depense.fournisseur))
            .filter_by(etablissement_id=etablissement_id)
            .filter(Depense.date_depense >= date_debut, Depense.date_depense <= date_fin)
            .order_by(Depense.date_depense.asc())
        ).scalars().all()
        
        if not depenses:
            flash("Aucune d√©pense sur cette p√©riode.", "warning")
            return redirect(redirect_url)
        
        data_export = []
        total = 0.0
        for d in depenses:
            nom_fournisseur = "Petit mat√©riel" if d.est_bon_achat else (d.fournisseur.nom if d.fournisseur else "Inconnu")
            data_export.append({
                'date': d.date_depense.strftime('%d/%m/%Y'),
                'fournisseur': nom_fournisseur,
                'contenu': d.contenu or "-",
                'montant': d.montant
            })
            total += d.montant
        
        metadata = {
            'etablissement': session.get('nom_etablissement', 'Mon √âtablissement'),
            'date_debut': date_debut.strftime('%d/%m/%Y'),
            'date_fin': date_fin.strftime('%d/%m/%Y'),
            'date_generation': datetime.now().strftime('%d/%m/%Y √† %H:%M'),
            'nombre_depenses': len(data_export),
            'total': total
        }
        
        if format_type == 'excel': 
            return generer_budget_excel_pro(data_export, metadata)
        else: 
            return generer_budget_pdf_pro(data_export, metadata)
    
    except Exception as e:
        current_app.logger.error(f"Erreur export budget: {e}", exc_info=True)
        flash("Erreur technique lors de l'export.", "error")
        return redirect(redirect_url)

# ============================================================
# GESTION FOURNISSEURS
# ============================================================
@admin_bp.route("/fournisseurs", methods=['GET'])
@admin_required
def gestion_fournisseurs():
    etablissement_id = session['etablissement_id']
    fournisseurs = db.session.execute(
        db.select(Fournisseur, func.count(Depense.id).label('depenses_count'))
        .outerjoin(Depense, Fournisseur.id == Depense.fournisseur_id)
        .filter(Fournisseur.etablissement_id == etablissement_id)
        .group_by(Fournisseur.id).order_by(Fournisseur.nom)
    ).all()
    return render_template("admin_fournisseurs.html", fournisseurs=fournisseurs, breadcrumbs=[{'text': 'Admin', 'url': url_for('admin.admin')}, {'text': 'Fournisseurs'}])

@admin_bp.route("/fournisseurs/ajouter", methods=["POST"])
@admin_required
def ajouter_fournisseur():
    etablissement_id = session['etablissement_id']
    nom = request.form.get("nom")
    site_web = request.form.get("site_web")
    
    try:
        logo_filename = None
        
        # 1. Gestion Fichier (S√©curis√©e avec filetype)
        if 'logo_file' in request.files:
            file = request.files['logo_file']
            if file and file.filename != '':
                # A. V√©rification Taille
                file.seek(0, 2)
                if file.tell() > MAX_FILE_SIZE:
                    raise ValueError("Image trop volumineuse (Max 10Mo).")
                file.seek(0)
                
                # B. V√©rification Type (Via module filetype)
                header = file.read(261) # filetype a besoin de 261 bytes max
                file.seek(0)
                kind = filetype.guess(header)
                
                if kind is None or kind.extension not in ['jpg', 'png', 'gif']:
                    raise ValueError("Format image non support√© (JPG, PNG, GIF uniquement).")
                
                # C. Upload
                filename = secure_filename(file.filename)
                ts = datetime.now().strftime("%Y%m%d%H%M%S")
                unique_filename = f"{ts}_{filename}"
                
                upload_folder = os.path.join(current_app.root_path, 'static', 'images', 'fournisseurs')
                os.makedirs(upload_folder, exist_ok=True)
                    
                file.save(os.path.join(upload_folder, unique_filename))
                logo_filename = unique_filename

        # 2. Gestion URL (Si pas de fichier)
        if not logo_filename:
            logo_url = request.form.get("logo_url", "").strip()
            if logo_url:
                if validate_url(logo_url):
                    logo_filename = logo_url
                else:
                    raise ValueError("URL du logo invalide.")

        # 3. Insertion DB
        new_fournisseur = Fournisseur(
            nom=nom,
            site_web=site_web,
            logo=logo_filename,
            etablissement_id=etablissement_id
        )
        db.session.add(new_fournisseur)
        db.session.commit()
        flash("Fournisseur ajout√© avec succ√®s.", "success")

    except ValueError as e:
        flash(str(e), "warning")
    except Exception as e:
        db.session.rollback()
        current_app.logger.error("Erreur ajout fournisseur", exc_info=True)
        flash("Erreur technique lors de l'ajout.", "error")

    return redirect(url_for('main.voir_fournisseurs'))

@admin_bp.route("/fournisseurs/modifier/<int:id>", methods=["POST"])
@admin_required
def modifier_fournisseur(id):
    etablissement_id = session['etablissement_id']
    fournisseur = db.session.get(Fournisseur, id)
    
    if not fournisseur or fournisseur.etablissement_id != etablissement_id:
        flash("Fournisseur introuvable.", "error")
        return redirect(url_for('main.voir_fournisseurs'))

    try:
        fournisseur.nom = request.form.get("nom")
        fournisseur.site_web = request.form.get("site_web")

        # 1. Gestion Fichier (S√©curis√©e avec filetype)
        if 'logo_file' in request.files:
            file = request.files['logo_file']
            if file and file.filename != '':
                file.seek(0, 2)
                if file.tell() > MAX_FILE_SIZE:
                    raise ValueError("Image trop volumineuse (Max 10Mo).")
                file.seek(0)
                
                header = file.read(261)
                file.seek(0)
                kind = filetype.guess(header)
                
                if kind is None or kind.extension not in ['jpg', 'png', 'gif']:
                    raise ValueError("Format image non support√©.")
                
                filename = secure_filename(file.filename)
                ts = datetime.now().strftime("%Y%m%d%H%M%S")
                unique_filename = f"{ts}_{filename}"
                
                upload_folder = os.path.join(current_app.root_path, 'static', 'images', 'fournisseurs')
                os.makedirs(upload_folder, exist_ok=True)
                    
                file.save(os.path.join(upload_folder, unique_filename))
                fournisseur.logo = unique_filename
        
        # 2. Gestion URL (Seulement si renseign√©e et pas de fichier upload√©)
        logo_url = request.form.get("logo_url", "").strip()
        if logo_url and 'logo_file' in request.files and request.files['logo_file'].filename == '':
            if validate_url(logo_url):
                fournisseur.logo = logo_url
            else:
                raise ValueError("URL du logo invalide.")

        db.session.commit()
        flash("Fournisseur modifi√©.", "success")

    except ValueError as e:
        flash(str(e), "warning")
    except Exception as e:
        db.session.rollback()
        current_app.logger.error("Erreur modif fournisseur", exc_info=True)
        flash("Erreur technique.", "error")

    return redirect(url_for('main.voir_fournisseurs'))

@admin_bp.route("/fournisseurs/supprimer/<int:id>", methods=['POST'])
@admin_required
def supprimer_fournisseur(id):
    etablissement_id = session['etablissement_id']
    fournisseur = db.session.get(Fournisseur, id)
    if fournisseur and fournisseur.etablissement_id == etablissement_id:
        if fournisseur.depenses:
            flash("Impossible : li√© √† des d√©penses.", "danger")
        else:
            try:
                db.session.delete(fournisseur)
                db.session.commit()
                flash("Fournisseur supprim√©.", "success")
            except Exception:
                db.session.rollback()
                current_app.logger.error("Erreur suppression fournisseur", exc_info=True)
                flash("Erreur technique.", "danger")
    else:
        flash("Fournisseur introuvable.", "danger")
    return redirect(url_for('admin.gestion_fournisseurs'))

# ============================================================
# SAUVEGARDE & RESTAURATION
# ============================================================
@admin_bp.route("/sauvegardes")
@admin_required
def gestion_sauvegardes():
    etablissement_id = session['etablissement_id']
    params = get_etablissement_params(etablissement_id)
    if params.get('licence_statut') != 'PRO':
        flash("R√©serv√© √† la version PRO.", "warning")
        return redirect(url_for('admin.admin'))
    return render_template("admin_backup.html", now=datetime.now(), breadcrumbs=[{'text': 'Admin', 'url': url_for('admin.admin')}, {'text': 'Sauvegardes'}])

@admin_bp.route("/telecharger_db")
@admin_required
def telecharger_db():
    etablissement_id = session['etablissement_id']
    params = get_etablissement_params(etablissement_id)
    if params.get('licence_statut') != 'PRO':
        flash("R√©serv√© PRO.", "warning")
        return redirect(url_for('admin.gestion_sauvegardes'))

    try:
        data = {
            'metadata': {'version': '1.0', 'date': datetime.now().isoformat(), 'etablissement': session.get('nom_etablissement')},
            'armoires': [], 'categories': [], 'fournisseurs': [], 'objets': [], 'budget': [], 'depenses': [], 'echeances': []
        }
        
        # Extraction des donn√©es (simplifi√©e pour la lisibilit√©)
        for a in db.session.execute(db.select(Armoire).filter_by(etablissement_id=etablissement_id)).scalars():
            data['armoires'].append({'id': a.id, 'nom': a.nom})
        for c in db.session.execute(db.select(Categorie).filter_by(etablissement_id=etablissement_id)).scalars():
            data['categories'].append({'id': c.id, 'nom': c.nom})
        for f in db.session.execute(db.select(Fournisseur).filter_by(etablissement_id=etablissement_id)).scalars():
            data['fournisseurs'].append({'id': f.id, 'nom': f.nom, 'site_web': f.site_web, 'logo': f.logo})
        for o in db.session.execute(db.select(Objet).filter_by(etablissement_id=etablissement_id)).scalars():
            data['objets'].append({
                'id': o.id, 'nom': o.nom, 'quantite': o.quantite_physique, 'seuil': o.seuil,
                'armoire_id': o.armoire_id, 'categorie_id': o.categorie_id, 'date_peremption': o.date_peremption,
                'image_url': o.image_url, 'fds_url': o.fds_url
            })
        for b in db.session.execute(db.select(Budget).filter_by(etablissement_id=etablissement_id)).scalars():
            b_data = {'id': b.id, 'annee': b.annee, 'montant': b.montant_initial, 'cloture': b.cloture}
            data['budget'].append(b_data)
            for d in b.depenses:
                data['depenses'].append({
                    'budget_id': b.id, 'date': d.date_depense, 'contenu': d.contenu,
                    'montant': d.montant, 'est_bon_achat': d.est_bon_achat, 'fournisseur_id': d.fournisseur_id
                })
        for e in db.session.execute(db.select(Echeance).filter_by(etablissement_id=etablissement_id)).scalars():
            data['echeances'].append({'intitule': e.intitule, 'date': e.date_echeance, 'details': e.details, 'traite': e.traite})

        json_str = json.dumps(data, default=json_serial, indent=4)
        buffer = BytesIO()
        buffer.write(json_str.encode('utf-8'))
        buffer.seek(0)
        log_action('backup_download', "Export JSON")
        safe_etab = sanitize_filename(session.get('nom_etablissement', 'Backup'))
        return send_file(buffer, as_attachment=True, download_name=f"Sauvegarde_{safe_etab}_{date.today()}.json", mimetype='application/json')

    except Exception:
        current_app.logger.error("Erreur backup", exc_info=True)
        flash("Erreur technique.", "error")
        return redirect(url_for('admin.gestion_sauvegardes'))

@admin_bp.route("/importer_db", methods=["POST"])
@admin_required
def importer_db():
    etablissement_id = session['etablissement_id']
    if 'fichier' not in request.files:
        flash("Aucun fichier.", "error")
        return redirect(url_for('admin.gestion_sauvegardes'))
        
    fichier = request.files['fichier']
    
    # CORRECTION : V√©rification taille fichier avant lecture
    fichier.seek(0, 2)
    if fichier.tell() > MAX_JSON_SIZE:
        flash("Fichier JSON trop volumineux (Max 5Mo).", "error")
        return redirect(url_for('admin.gestion_sauvegardes'))
    fichier.seek(0)

    if fichier.filename == '' or not allowed_file(fichier.filename) or not fichier.filename.endswith('.json'):
        flash("Fichier invalide (.json requis).", "error")
        return redirect(url_for('admin.gestion_sauvegardes'))

    try:
        data = json.load(fichier)
        
        # CORRECTION : Transaction atomique (Tout ou rien)
        with db.session.begin_nested():
            map_armoires = {}
            map_categories = {}
            map_fournisseurs = {}
            map_budgets = {}

            # Nettoyage
            for model in [KitObjet, Historique, Reservation, Suggestion, Depense, Objet, Kit, Budget, Echeance, Armoire, Categorie, Fournisseur]:
                db.session.query(model).filter_by(etablissement_id=etablissement_id).delete()
            db.session.flush()

            # Reconstruction
            for a in data.get('armoires', []):
                new_a = Armoire(nom=a['nom'], etablissement_id=etablissement_id)
                db.session.add(new_a)
                db.session.flush()
                map_armoires[a['id']] = new_a.id

            for c in data.get('categories', []):
                new_c = Categorie(nom=c['nom'], etablissement_id=etablissement_id)
                db.session.add(new_c)
                db.session.flush()
                map_categories[c['id']] = new_c.id

            for f in data.get('fournisseurs', []):
                new_f = Fournisseur(nom=f['nom'], site_web=f.get('site_web'), logo=f.get('logo'), etablissement_id=etablissement_id)
                db.session.add(new_f)
                db.session.flush()
                map_fournisseurs[f['id']] = new_f.id

            for o in data.get('objets', []):
                new_armoire_id = map_armoires.get(o['armoire_id'])
                new_cat_id = map_categories.get(o['categorie_id'])
                if not new_armoire_id or not new_cat_id: continue 
                
                date_perim = None
                if o.get('date_peremption'):
                    try: date_perim = datetime.fromisoformat(o['date_peremption']).date()
                    except: pass

                db.session.add(Objet(
                    nom=o['nom'], quantite_physique=o['quantite'], seuil=o['seuil'],
                    armoire_id=new_armoire_id, categorie_id=new_cat_id, date_peremption=date_perim,
                    image_url=o.get('image_url'), fds_url=o.get('fds_url'), etablissement_id=etablissement_id
                ))

            for b in data.get('budget', []):
                new_b = Budget(annee=b['annee'], montant_initial=b['montant'], cloture=b['cloture'], etablissement_id=etablissement_id)
                db.session.add(new_b)
                db.session.flush()
                map_budgets[b['id']] = new_b.id

            for d in data.get('depenses', []):
                new_budget_id = map_budgets.get(d['budget_id'])
                if not new_budget_id: continue
                new_fournisseur_id = map_fournisseurs.get(d['fournisseur_id']) if d.get('fournisseur_id') else None
                try: date_dep = datetime.fromisoformat(d['date']).date()
                except: date_dep = date.today()
                db.session.add(Depense(
                    budget_id=new_budget_id, fournisseur_id=new_fournisseur_id, contenu=d['contenu'],
                    montant=d['montant'], date_depense=date_dep, est_bon_achat=d.get('est_bon_achat', False),
                    etablissement_id=etablissement_id
                ))

            for e in data.get('echeances', []):
                try: date_ech = datetime.fromisoformat(e['date']).date()
                except: continue
                db.session.add(Echeance(intitule=e['intitule'], date_echeance=date_ech, details=e.get('details'), traite=e.get('traite', 0), etablissement_id=etablissement_id))

        db.session.commit()
        log_action('backup_restore', "Import JSON")
        flash("Restauration r√©ussie !", "success")

    except Exception:
        db.session.rollback()
        current_app.logger.error("Erreur import DB", exc_info=True)
        flash("Erreur critique lors de l'importation.", "error")

    return redirect(url_for('admin.gestion_sauvegardes'))

# ============================================================
# IMPORT EXCEL
# ============================================================
@admin_bp.route("/importer", methods=['GET'])
@admin_required
def importer_page():
    etablissement_id = session['etablissement_id']
    armoires = db.session.execute(db.select(Armoire).filter_by(etablissement_id=etablissement_id)).scalars().all()
    categories = db.session.execute(db.select(Categorie).filter_by(etablissement_id=etablissement_id)).scalars().all()
    return render_template("admin_import.html", breadcrumbs=[{'text': 'Admin', 'url': url_for('admin.admin')}, {'text': 'Import'}], armoires=armoires, categories=categories, now=datetime.now())

@admin_bp.route("/telecharger_modele")
@admin_required
def telecharger_modele_excel():
    etablissement_id = session['etablissement_id']
    armoires = db.session.execute(db.select(Armoire.nom).filter_by(etablissement_id=etablissement_id).order_by(Armoire.nom)).scalars().all()
    categories = db.session.execute(db.select(Categorie.nom).filter_by(etablissement_id=etablissement_id).order_by(Categorie.nom)).scalars().all()

    wb = Workbook()
    ws = wb.active
    ws.title = "Inventaire"
    ws.append(["Nom", "Quantit√©", "Seuil", "Armoire", "Cat√©gorie", "Date P√©remption", "Image (URL)"])
    
    # Styles et validations (simplifi√©)
    ws_data = wb.create_sheet("Data_Listes")
    ws_data.sheet_state = 'hidden'
    for i, nom in enumerate(armoires, 1): ws_data.cell(row=i, column=1, value=nom)
    for i, nom in enumerate(categories, 1): ws_data.cell(row=i, column=2, value=nom)
    
    if armoires:
        dv = DataValidation(type="list", formula1=f"'Data_Listes'!$A$1:$A${len(armoires)}", allow_blank=True)
        ws.add_data_validation(dv)
        dv.add('D2:D1000')
    if categories:
        dv = DataValidation(type="list", formula1=f"'Data_Listes'!$B$1:$B${len(categories)}", allow_blank=True)
        ws.add_data_validation(dv)
        dv.add('E2:E1000')

    buffer = BytesIO()
    wb.save(buffer)
    buffer.seek(0)
    return send_file(buffer, as_attachment=True, download_name='modele_import.xlsx', mimetype='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet')

@admin_bp.route("/importer", methods=['POST'])
@admin_required
@limiter.limit("10 per minute")
def importer_fichier():
    etablissement_id = session['etablissement_id']
    if 'fichier_excel' not in request.files:
        flash("Aucun fichier.", "error")
        return redirect(url_for('admin.importer_page'))

    fichier = request.files['fichier_excel']
    if fichier.filename == '' or not allowed_file(fichier.filename) or not fichier.filename.endswith('.xlsx'):
        flash("Fichier invalide (.xlsx requis).", "error")
        return redirect(url_for('admin.importer_page'))

    # Check size
    fichier.seek(0, 2)
    if fichier.tell() > MAX_FILE_SIZE:
        flash("Fichier trop volumineux.", "error")
        return redirect(url_for('admin.importer_page'))
    fichier.seek(0)

    try:
        wb = load_workbook(fichier)
        ws = wb.active
        
        # 1. Validation des en-t√™tes
        headers = {cell.value: idx for idx, cell in enumerate(ws[1], 0) if cell.value}
        required_cols = {'Nom', 'Quantit√©', 'Seuil', 'Armoire', 'Cat√©gorie'}
        
        if not required_cols.issubset(headers.keys()):
            flash(f"Colonnes manquantes. Requis : {', '.join(required_cols)}", "error")
            return redirect(url_for('admin.importer_page'))

        existing_objets = {o.nom.lower() for o in db.session.execute(db.select(Objet).filter_by(etablissement_id=etablissement_id)).scalars().all()}
        armoires_map = {a.nom.lower(): a.id for a in db.session.execute(db.select(Armoire).filter_by(etablissement_id=etablissement_id)).scalars().all()}
        categories_map = {c.nom.lower(): c.id for c in db.session.execute(db.select(Categorie).filter_by(etablissement_id=etablissement_id)).scalars().all()}
        
        success_count = 0
        errors = []
        
        # 2. Lecture avec limite de lignes
        for i, row in enumerate(ws.iter_rows(min_row=2, values_only=True), 2):
            if i > MAX_IMPORT_ROWS:
                errors.append(f"Limite de {MAX_IMPORT_ROWS} lignes atteinte. Le reste a √©t√© ignor√©.")
                break
                
            if not row: continue
            
            # R√©cup√©ration via le mapping des colonnes
            try:
                nom = row[headers['Nom']]
                qte = row[headers['Quantit√©']]
                seuil = row[headers['Seuil']]
                arm_nom = row[headers['Armoire']]
                cat_nom = row[headers['Cat√©gorie']]
                
                # Colonnes optionnelles
                date_val = row[headers['Date P√©remption']] if 'Date P√©remption' in headers else None
                img_val = row[headers['Image (URL)']] if 'Image (URL)' in headers else None
            except IndexError:
                continue # Ligne malform√©e

            if not all([nom, qte is not None, seuil is not None]):
                errors.append(f"Ligne {i}: Donn√©es obligatoires manquantes")
                continue
                
            if str(nom).lower() in existing_objets: continue
            
            arm_id = armoires_map.get(str(arm_nom).lower().strip()) if arm_nom else None
            cat_id = categories_map.get(str(cat_nom).lower().strip()) if cat_nom else None
            
            if not arm_id or not cat_id:
                errors.append(f"Ligne {i}: Armoire ou Cat√©gorie inconnue")
                continue
                
            date_perim = None
            if date_val:
                if isinstance(date_val, datetime): date_perim = date_val.date()
                elif isinstance(date_val, str):
                    try: date_perim = datetime.strptime(date_val.split(' ')[0], '%Y-%m-%d').date()
                    except: pass

            db.session.add(Objet(
                nom=str(nom), quantite_physique=int(qte), seuil=int(seuil),
                armoire_id=arm_id, categorie_id=cat_id, date_peremption=date_perim,
                image_url=str(img_val) if img_val else None,
                etablissement_id=etablissement_id
            ))
            success_count += 1
            
        if errors:
            db.session.rollback()
            for e in errors[:5]: flash(e, "error")
            if len(errors) > 5: flash(f"... et {len(errors)-5} autres erreurs.", "error")
        else:
            db.session.commit()
            log_action('import_excel', f"{success_count} objets import√©s")
            flash(f"{success_count} objets import√©s.", "success")

    except Exception as e:
        db.session.rollback()
        current_app.logger.error("Erreur import Excel", exc_info=True)
        flash("Erreur technique.", "error")

    return redirect(url_for('admin.importer_page'))



@admin_bp.route("/exporter_inventaire")
@admin_required
@limiter.limit("5 per minute")
def exporter_inventaire():
    etablissement_id = session['etablissement_id']
    format_type = request.args.get('format')
    
    if format_type not in ['excel', 'pdf']:
        flash("Format non support√©.", "error")
        return redirect(url_for('admin.admin'))

    try:
        # 1. R√©cup√©ration des donn√©es (Optimis√©e avec Jointures)
        objets = db.session.execute(
            db.select(Objet)
            .options(joinedload(Objet.categorie), joinedload(Objet.armoire))
            .filter_by(etablissement_id=etablissement_id)
            .order_by(Objet.categorie_id, Objet.nom) # Tri par Cat√©gorie puis Nom
        ).scalars().all()
        
        # 2. Pr√©paration des donn√©es pour les g√©n√©rateurs
        data_export = []
        for obj in objets:
            data_export.append({
                'categorie': obj.categorie.nom if obj.categorie else "Sans cat√©gorie",
                'nom': obj.nom,
                'quantite': obj.quantite_physique,
                'seuil': obj.seuil,
                'armoire': obj.armoire.nom if obj.armoire else "Non rang√©",
                'peremption': obj.date_peremption.strftime('%d/%m/%Y') if obj.date_peremption else "-"
            })
            
        # 3. M√©tadonn√©es
        metadata = {
            'etablissement': session.get('nom_etablissement', 'Mon √âtablissement'),
            'date_generation': datetime.now().strftime('%d/%m/%Y √† %H:%M'),
            'total': len(data_export)
        }

        log_action('export_inventaire', f"Format: {format_type}, Items: {len(data_export)}")

        # 4. Appel des g√©n√©rateurs
        if format_type == 'excel':
            return generer_inventaire_excel(data_export, metadata)
        else:
            return generer_inventaire_pdf(data_export, metadata)

    except Exception as e:
        current_app.logger.error(f"Erreur export inventaire: {e}", exc_info=True)
        flash("Une erreur technique est survenue lors de l'export.", "error")
        return redirect(url_for('admin.admin'))

# ============================================================
# MODULE RAPPORTS & ACTIVIT√â (Version Durcie)
# ============================================================

# Constantes de s√©curit√© pour les rapports
MAX_EXPORT_DAYS = 366      # Limite la plage √† 1 an
MAX_EXPORT_ROWS = 5000     # Limite le nombre de lignes pour √©viter le crash RAM (ReportLab/OpenPyXL)
ALLOWED_FORMATS = {'excel', 'pdf'}

@admin_bp.route("/rapports")
@admin_required
def rapports():
    etablissement_id = session['etablissement_id']
    
    # 1. R√©cup√©ration des param√®tres d'URL
    page = request.args.get('page', 1, type=int)
    filtre_action = request.args.get('action', 'all') # all, creation, modification, deplacement, suppression
    search_query = request.args.get('q', '').strip()
    
    # 2. Construction de la requ√™te de base
    stmt = (
        db.select(Historique, Utilisateur.nom_utilisateur, Objet.nom.label('objet_nom'))
        .outerjoin(Utilisateur, Historique.utilisateur_id == Utilisateur.id)
        .outerjoin(Objet, Historique.objet_id == Objet.id)
        .filter(Historique.etablissement_id == etablissement_id)
        .order_by(Historique.timestamp.desc())
    )

    # 3. Application des filtres
    if filtre_action == 'creation':
        stmt = stmt.filter(Historique.action == 'Cr√©ation')
    elif filtre_action == 'suppression':
        stmt = stmt.filter(Historique.action == 'Suppression')
    elif filtre_action == 'modification':
        # Exclure les d√©placements (qui sont techniquement des modifs)
        stmt = stmt.filter(
            Historique.action == 'Modification',
            ~Historique.details.ilike('%D√©plac√©%'),
            ~Historique.details.ilike('%Armoire%')
        )
    elif filtre_action == 'deplacement':
        stmt = stmt.filter(
            Historique.action == 'Modification',
            (Historique.details.ilike('%D√©plac√©%') | Historique.details.ilike('%Armoire%'))
        )

    # 4. Recherche textuelle
    if search_query:
        stmt = stmt.filter(
            (Historique.details.ilike(f'%{search_query}%')) |
            (Objet.nom.ilike(f'%{search_query}%')) |
            (Utilisateur.nom_utilisateur.ilike(f'%{search_query}%'))
        )

    # 5. Pagination (50 items par page)
    pagination = db.paginate(stmt, page=page, per_page=50)

    # 6. Formatage des donn√©es pour la vue
    logs = []
    for item in pagination.items:
        # D√©tection du type pour g√©rer le cas o√π paginate renvoie un objet ou un tuple
        if isinstance(item, Historique):
            # Cas : Mod√®le seul
            h = item
            user_name = h.utilisateur.nom_utilisateur if h.utilisateur else "Utilisateur supprim√©"
            
            # R√©cup√©ration manuelle du nom de l'objet (si n√©cessaire)
            obj_name = "Objet supprim√©"
            if h.objet_id:
                obj = db.session.get(Objet, h.objet_id)
                if obj: obj_name = obj.nom
        else:
            # Cas : Tuple (Historique, nom_user, nom_objet)
            h, user_name, obj_name = item

        # D√©tection du type pour les badges (si pas d√©j√† filtr√©)
        type_badge = 'secondary'
        if h.action == 'Cr√©ation': type_badge = 'success'
        elif h.action == 'Suppression': type_badge = 'danger'
        elif 'D√©plac√©' in (h.details or ''): type_badge = 'info'
        elif h.action == 'Modification': type_badge = 'warning'

        logs.append({
            'date': h.timestamp,
            'user': user_name or "Utilisateur supprim√©",
            'objet': obj_name or "Objet supprim√©",
            'action': h.action,
            'details': h.details,
            'type_badge': type_badge
        })

    breadcrumbs = [
        {'text': 'Admin', 'url': url_for('admin.admin')}, 
        {'text': 'Historique Complet'}
    ]

    return render_template("rapports.html", 
                           logs=logs, 
                           pagination=pagination, 
                           filtre_actif=filtre_action,
                           search_query=search_query,
                           breadcrumbs=breadcrumbs)


@admin_bp.route("/exporter_rapports", methods=['GET'])
@admin_required
@limiter.limit("5 per minute")
def exporter_rapports():
    etablissement_id = session['etablissement_id']
    
    # 1. R√©cup√©ration des param√®tres
    date_debut_str = request.args.get('date_debut')
    date_fin_str = request.args.get('date_fin')
    format_type = request.args.get('format')
    group_by = request.args.get('group_by', 'date')
    
    # NOUVEAU : R√©cup√©ration des actions coch√©es (liste)
    # Flask r√©cup√®re les checkbox multiples avec getlist
    selected_actions = request.args.getlist('actions') 

    if not all([date_debut_str, date_fin_str, format_type]):
        flash("Param√®tres manquants.", "warning")
        return redirect(url_for('admin.rapports'))

    if format_type not in ALLOWED_FORMATS:
        flash("Format non support√©.", "error")
        return redirect(url_for('admin.rapports'))

    try:
        # 2. Parsing Dates
        date_debut = datetime.strptime(date_debut_str, '%Y-%m-%d')
        date_fin = datetime.strptime(date_fin_str, '%Y-%m-%d')
        date_fin = date_fin.replace(hour=23, minute=59, second=59)

        if date_debut > date_fin:
            flash("Dates incoh√©rentes.", "warning")
            return redirect(url_for('admin.rapports'))
            
        if (date_fin - date_debut).days > MAX_EXPORT_DAYS:
            flash(f"P√©riode limit√©e √† {MAX_EXPORT_DAYS} jours.", "warning")
            return redirect(url_for('admin.rapports'))

        # 3. Construction Requ√™te
        query = db.select(
            Historique,
            Utilisateur.nom_utilisateur,
            Objet.nom.label('objet_nom')
        ).outerjoin(Utilisateur, Historique.utilisateur_id == Utilisateur.id)\
         .outerjoin(Objet, Historique.objet_id == Objet.id)\
         .filter(Historique.etablissement_id == etablissement_id)\
         .filter(Historique.timestamp >= date_debut)\
         .filter(Historique.timestamp <= date_fin)

        # --- LOGIQUE DE FILTRE ET TRI ---
        if group_by == 'action':
            # Si des actions sp√©cifiques sont coch√©es, on filtre
            if selected_actions:
                query = query.filter(Historique.action.in_(selected_actions))
            
            # On trie par Action puis par Date
            query = query.order_by(Historique.action.asc(), Historique.timestamp.desc())
        else:
            # Tri chronologique standard
            query = query.order_by(Historique.timestamp.desc())

        # Protection RAM
        query = query.limit(MAX_EXPORT_ROWS)
        resultats = db.session.execute(query).all()

        if not resultats:
            flash("Aucune donn√©e trouv√©e pour ces crit√®res.", "info")
            return redirect(url_for('admin.rapports'))

        # 4. Pr√©paration Donn√©es
        data_export = []
        for h, user_name, obj_name in resultats:
            data_export.append({
                'date': h.timestamp.strftime('%d/%m/%Y'),
                'heure': h.timestamp.strftime('%H:%M'),
                'utilisateur': user_name or "Inconnu",
                'action': h.action,
                'objet': obj_name or "-",
                'details': h.details or ""
            })

        # M√©tadonn√©es enrichies
        filtre_info = "Tous types"
        if group_by == 'action' and selected_actions:
            filtre_info = ", ".join(selected_actions)

        metadata = {
            'etablissement': session.get('nom_etablissement', 'LabFlow'),
            'periode': f"Du {date_debut.strftime('%d/%m/%Y')} au {date_fin.strftime('%d/%m/%Y')}",
            'total': len(data_export),
            'date_generation': datetime.now().strftime('%d/%m/%Y √† %H:%M'),
            'filtre': filtre_info # On pourra l'afficher dans le PDF si on veut
        }

        log_action('export_rapport', f"Format: {format_type}, Rows: {len(data_export)}")

        if format_type == 'excel':
            return generer_rapport_excel(data_export, metadata)
        else:
            return generer_rapport_pdf(data_export, metadata)

    except Exception as e:
        current_app.logger.error(f"Erreur export: {e}", exc_info=True)
        flash("Erreur technique lors de la g√©n√©ration.", "error")
        return redirect(url_for('admin.rapports'))

# ============================================================
# LICENCE (Rate Limit Custom)
# ============================================================
class RateLimiter:
    def __init__(self):
        self.attempts = defaultdict(list)
        self.last_cleanup = datetime.now()

    def _cleanup_all(self):
        """Supprime les cl√©s vides et obsol√®tes."""
        now = datetime.now()
        cutoff = now - timedelta(minutes=15)
        
        # On it√®re sur une copie des cl√©s pour pouvoir supprimer
        for key in list(self.attempts.keys()):
            # On ne garde que les tentatives r√©centes
            self.attempts[key] = [t for t in self.attempts[key] if t > cutoff]
            # Si la liste est vide, on supprime la cl√© pour lib√©rer la m√©moire
            if not self.attempts[key]:
                del self.attempts[key]
        
        self.last_cleanup = now

    def is_allowed(self, key):
        now = datetime.now()
        
        # Nettoyage opportuniste global (toutes les heures)
        if (now - self.last_cleanup) > timedelta(hours=1):
            self._cleanup_all()
        
        # Nettoyage sp√©cifique √† la cl√© courante
        cutoff = now - timedelta(minutes=15)
        self.attempts[key] = [t for t in self.attempts[key] if t > cutoff]
        
        if len(self.attempts[key]) >= 5: 
            return False
            
        self.attempts[key].append(now)
        return True
    
    def reset(self, key):
        if key in self.attempts: del self.attempts[key]

license_limiter = RateLimiter()

def rate_limit_license(f):
    @wraps(f)
    def wrapped(*args, **kwargs):
        eid = session.get('etablissement_id')
        if not eid: return redirect(url_for('main.index'))
        if not license_limiter.is_allowed(eid):
            flash("Trop de tentatives. R√©essayez dans 15 min.", "error")
            return redirect(url_for('main.a_propos'))
        return f(*args, **kwargs)
    return wrapped

@admin_bp.route("/activer_licence", methods=["POST"])
@admin_required
@rate_limit_license
def activer_licence():
    etablissement_id = session.get('etablissement_id')
    cle_fournie = request.form.get('licence_cle', '').strip().upper()
    
    if not cle_fournie or len(cle_fournie) < 10:
        flash("Cl√© invalide.", "error")
        return redirect(url_for('main.a_propos'))
    
    try:
        param_instance = db.session.execute(db.select(Parametre).filter_by(etablissement_id=etablissement_id, cle='instance_id')).scalar_one_or_none()
        if not param_instance:
            flash("Erreur critique : Instance ID manquant.", "error")
            return redirect(url_for('main.a_propos'))
        
        cle_attendue = calculate_license_key(param_instance.valeur.strip())
        if not secrets.compare_digest(cle_fournie, cle_attendue):
            flash("Cl√© incorrecte.", "error")
            return redirect(url_for('main.a_propos'))
        
        # Activation
        param_statut = db.session.execute(db.select(Parametre).filter_by(etablissement_id=etablissement_id, cle='licence_statut')).scalar_one_or_none()
        if not param_statut: db.session.add(Parametre(etablissement_id=etablissement_id, cle='licence_statut', valeur='PRO'))
        else: param_statut.valeur = 'PRO'
        
        db.session.commit()
        try: cache.delete_memoized(get_etablissement_params, etablissement_id)
        except: pass
        license_limiter.reset(etablissement_id)
        flash("Licence PRO activ√©e !", "success")
        
    except Exception as e:
        db.session.rollback()
        current_app.logger.error(f"Erreur activation licence: {str(e)}", exc_info=True)
        flash("Erreur technique lors de l'activation.", "error")
    
    return redirect(url_for('main.a_propos'))


# ============================================================
# G√âN√âRATEURS RAPPORTS PROFESSIONNELS (PDF/EXCEL) - VERSION FINALE
# ============================================================

# Imports sp√©cifiques aux rapports (√† laisser ici pour ne pas polluer le haut du fichier)
from reportlab.lib import colors
from reportlab.lib.pagesizes import A4, landscape
from reportlab.lib.styles import getSampleStyleSheet, ParagraphStyle
from reportlab.lib.units import cm
from reportlab.platypus import SimpleDocTemplate, Table, TableStyle, Paragraph, Spacer, PageBreak
from reportlab.lib.enums import TA_CENTER, TA_RIGHT, TA_LEFT
from html import escape
from openpyxl import Workbook
from openpyxl.styles import Font, PatternFill, Alignment, Border, Side
from io import BytesIO
from datetime import date
import re


# ============================================================
# UTILITAIRES INTERNES AUX RAPPORTS
# ============================================================

def sanitize_filename_report(text):
    """Nettoie un nom de fichier pour √©viter les caract√®res probl√©matiques."""
    if not text: return "Rapport"
    # On garde uniquement alphanum√©rique, tirets et underscores
    return re.sub(r'[^\w\s-]', '', str(text)).strip().replace(' ', '_')


def sanitize_for_excel_report(text):
    """Pr√©pare le texte pour Excel (√©vite les formules injection)."""
    if not text:
        return ""
    text = str(text)
    # Emp√™che l'injection de formules (=, +, -, @)
    if text.startswith(('=', '+', '-', '@')):
        text = "'" + text
    return text


# ============================================================
# G√âN√âRATEUR PDF AVEC LOGO VECTORIEL
# ============================================================

class LogoGraphique(Flowable):
    """Dessine un petit graphique vectoriel (Logo) directement en PDF."""
    def __init__(self, width=40, height=40):
        Flowable.__init__(self)
        self.width = width
        self.height = height

    def draw(self):
        # Couleurs
        bleu_fonce = colors.HexColor('#1F3B73')
        bleu_clair = colors.HexColor('#4facfe')
        
        # Barres du graphique
        self.canv.setFillColor(bleu_fonce)
        self.canv.rect(0, 0, 8, 15, fill=1, stroke=0)  # Barre 1
        self.canv.rect(12, 0, 8, 25, fill=1, stroke=0) # Barre 2
        
        self.canv.setFillColor(bleu_clair)
        self.canv.rect(24, 0, 8, 35, fill=1, stroke=0) # Barre 3 (La plus haute)
        
        # Ligne de tendance (Fl√®che)
        self.canv.setStrokeColor(colors.HexColor('#FFD700')) # Or
        self.canv.setLineWidth(2)
        self.canv.line(-5, 5, 35, 40) # Ligne montante

def generer_rapport_pdf(data, metadata):
    buffer = BytesIO()
    doc = SimpleDocTemplate(
        buffer,
        pagesize=landscape(A4),
        rightMargin=1.0*cm, leftMargin=1.0*cm, topMargin=1.0*cm, bottomMargin=1.0*cm,
        title=f"Rapport - {metadata['etablissement']}"
    )
    
    elements = []
    styles = getSampleStyleSheet()
    
    # --- EN-T√äTE AVEC LOGO ---
    # On cr√©e un tableau invisible pour mettre le Logo √† gauche et le Titre au centre
    logo = LogoGraphique(width=40, height=40)
    
    titre_style = ParagraphStyle('Titre', parent=styles['Heading1'], fontSize=22, textColor=colors.HexColor('#1F3B73'), alignment=TA_LEFT)
    sous_titre_style = ParagraphStyle('SousTitre', parent=styles['Normal'], fontSize=12, textColor=colors.gray, alignment=TA_LEFT)
    
    titre_bloc = [
        Paragraph(f"RAPPORT D'ACTIVIT√â", titre_style),
        Paragraph(f"{escape(metadata['etablissement'])}", sous_titre_style)
    ]
    
    # Tableau d'en-t√™te : [Logo | Textes]
    header_table_data = [[logo, titre_bloc]]
    header_table = Table(header_table_data, colWidths=[1.5*cm, 20*cm])
    header_table.setStyle(TableStyle([
        ('VALIGN', (0,0), (-1,-1), 'MIDDLE'),
        ('LEFTPADDING', (0,0), (-1,-1), 0),
    ]))
    elements.append(header_table)
    
    elements.append(Spacer(1, 0.5*cm))
    
    # --- M√âTADONN√âES (Cadre Gris) ---
    meta_style = ParagraphStyle('Meta', parent=styles['Normal'], fontSize=10, textColor=colors.black)
    meta_label = ParagraphStyle('MetaLabel', parent=styles['Normal'], fontSize=10, textColor=colors.HexColor('#1F3B73'), fontName='Helvetica-Bold')
    
    meta_data = [
        [Paragraph('P√©riode :', meta_label), Paragraph(metadata['periode'], meta_style),
         Paragraph('G√©n√©r√© le :', meta_label), Paragraph(metadata['date_generation'], meta_style)],
        [Paragraph('Total :', meta_label), Paragraph(f"{metadata['total']} entr√©es", meta_style), '', '']
    ]
    
    meta_table = Table(meta_data, colWidths=[2.5*cm, 8*cm, 2.5*cm, 8*cm])
    meta_table.setStyle(TableStyle([
        ('BACKGROUND', (0,0), (-1,-1), colors.HexColor('#F8F9FA')),
        ('BOX', (0,0), (-1,-1), 0.5, colors.HexColor('#CCCCCC')),
        ('PADDING', (0,0), (-1,-1), 6),
        ('VALIGN', (0,0), (-1,-1), 'MIDDLE'),
    ]))
    elements.append(meta_table)
    elements.append(Spacer(1, 0.8*cm))
    
    # --- TABLEAU DE DONN√âES ---
    header_style = ParagraphStyle('Header', parent=styles['Normal'], fontSize=10, textColor=colors.white, fontName='Helvetica-Bold', alignment=TA_CENTER)
    cell_style = ParagraphStyle('Cell', parent=styles['Normal'], fontSize=9, textColor=colors.black)
    
    headers = [
        Paragraph('Date', header_style),
        Paragraph('Heure', header_style),
        Paragraph('Utilisateur', header_style),
        Paragraph('Action', header_style),
        Paragraph('Objet', header_style),
        Paragraph('D√©tails', header_style)
    ]
    
    table_data = [headers]
    for row in data:
        table_data.append([
            Paragraph(row['date'], cell_style),
            Paragraph(row['heure'], cell_style),
            Paragraph(escape(row['utilisateur']), cell_style),
            Paragraph(escape(row['action']), cell_style),
            Paragraph(escape(row['objet']), cell_style),
            Paragraph(escape(row['details']) if row['details'] else '-', cell_style)
        ])
        
    col_widths = [2.5*cm, 1.5*cm, 4.0*cm, 3.0*cm, 6.5*cm, 10.0*cm]
    t = Table(table_data, colWidths=col_widths, repeatRows=1)
    
    t.setStyle(TableStyle([
        ('BACKGROUND', (0, 0), (-1, 0), colors.HexColor('#1F3B73')), # En-t√™te Bleu
        ('VALIGN', (0, 0), (-1, 0), 'MIDDLE'),
        ('TOPPADDING', (0, 0), (-1, 0), 10),
        ('BOTTOMPADDING', (0, 0), (-1, 0), 10),
        ('VALIGN', (0, 1), (-1, -1), 'TOP'),
        ('ROWBACKGROUNDS', (0, 1), (-1, -1), [colors.white, colors.HexColor('#F4F6F9')]), # Zebra
        ('GRID', (0, 0), (-1, -1), 0.5, colors.HexColor('#E0E0E0')),
        ('LINEBELOW', (0, 0), (-1, 0), 2, colors.HexColor('#1F3B73')), # Ligne forte sous header
    ]))
    
    elements.append(t)
    doc.build(elements)
    buffer.seek(0)
    
    filename = f"Rapport_{sanitize_filename_report(metadata['etablissement'])}_{date.today().strftime('%Y%m%d')}.pdf"
    return send_file(buffer, as_attachment=True, download_name=filename, mimetype='application/pdf')


# ============================================================
# G√âN√âRATEUR EXCEL (DESIGN TABLEAU DE BORD)
# ============================================================

def generer_rapport_excel(data, metadata):
    wb = Workbook()
    ws = wb.active
    ws.title = "Activit√©"
    
    # --- STYLES ---
    # Titre
    font_titre = Font(name='Segoe UI', size=18, bold=True, color="1F3B73")
    
    # En-t√™tes Tableau
    fill_header = PatternFill(start_color="1F3B73", end_color="1F3B73", fill_type="solid")
    font_header = Font(name='Segoe UI', size=11, bold=True, color="FFFFFF")
    align_center = Alignment(horizontal="center", vertical="center")
    
    # Donn√©es
    font_data = Font(name='Segoe UI', size=10)
    align_top = Alignment(vertical="top", wrap_text=True)
    border_thin = Border(left=Side(style='thin', color='D9D9D9'), 
                         right=Side(style='thin', color='D9D9D9'), 
                         bottom=Side(style='thin', color='D9D9D9'))

    # --- MISE EN PAGE ---
    
    # 1. Titre et Logo (Simul√© par emoji pour Excel)
    ws.merge_cells('A1:F1')
    ws['A1'] = f"üìä RAPPORT D'ACTIVIT√â - {metadata['etablissement']}"
    ws['A1'].font = font_titre
    ws['A1'].alignment = Alignment(horizontal="left", vertical="center")
    ws.row_dimensions[1].height = 40
    
    # 2. M√©tadonn√©es (Cadre gris clair)
    ws.merge_cells('A2:F4')
    meta_text = (f"P√©riode : {metadata['periode']}\n"
                 f"G√©n√©r√© le : {metadata['date_generation']}\n"
                 f"Total : {metadata['total']} enregistrements")
    
    ws['A2'] = meta_text
    ws['A2'].font = Font(name='Segoe UI', size=10, italic=True, color="555555")
    ws['A2'].alignment = Alignment(horizontal="left", vertical="center", wrap_text=True)
    ws['A2'].fill = PatternFill(start_color="F8F9FA", fill_type="solid")
    ws.row_dimensions[2].height = 60 # Hauteur pour les 3 lignes
    
    # 3. En-t√™tes du tableau (Ligne 6)
    headers = ["Date", "Heure", "Utilisateur", "Action", "Objet", "D√©tails"]
    ws.append([]) # Ligne 5 vide
    ws.append(headers) # Ligne 6
    
    for col_num, header in enumerate(headers, 1):
        cell = ws.cell(row=6, column=col_num)
        cell.fill = fill_header
        cell.font = font_header
        cell.alignment = align_center
    
    ws.row_dimensions[6].height = 30
    
    # 4. Donn√©es
    for row in data:
        ws.append([
            row['date'],
            row['heure'],
            sanitize_for_excel_report(row['utilisateur']),
            sanitize_for_excel_report(row['action']),
            sanitize_for_excel_report(row['objet']),
            sanitize_for_excel_report(row['details']) if row['details'] else '-'
        ])
        
    # 5. Finitions (Bordures et Largeurs)
    # Largeurs optimis√©es
    ws.column_dimensions['A'].width = 12
    ws.column_dimensions['B'].width = 10
    ws.column_dimensions['C'].width = 20
    ws.column_dimensions['D'].width = 18
    ws.column_dimensions['E'].width = 35
    ws.column_dimensions['F'].width = 60
    
    # Appliquer styles aux donn√©es
    for row in ws.iter_rows(min_row=7, max_row=ws.max_row):
        for cell in row:
            cell.font = font_data
            cell.alignment = align_top
            cell.border = border_thin
            
    # Filtres automatiques
    ws.auto_filter.ref = f"A6:F{ws.max_row}"
    
    # Figer les volets
    ws.freeze_panes = "A7"

    buffer = BytesIO()
    wb.save(buffer)
    buffer.seek(0)
    
    filename = f"Rapport_{sanitize_filename_report(metadata['etablissement'])}_{date.today().strftime('%Y%m%d')}.xlsx"
    return send_file(buffer, as_attachment=True, download_name=filename, mimetype='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet')


# ============================================================
# G√âN√âRATEURS INVENTAIRE (PDF/EXCEL)
# ============================================================

def generer_inventaire_pdf(data, metadata):
    """G√©n√®re un PDF propre de l'inventaire complet (Paysage)."""
    buffer = BytesIO()
    
    doc = SimpleDocTemplate(
        buffer,
        pagesize=landscape(A4),
        rightMargin=1.0*cm, leftMargin=1.0*cm, topMargin=1.0*cm, bottomMargin=1.0*cm,
        title=f"Inventaire - {metadata['etablissement']}"
    )
    
    elements = []
    styles = getSampleStyleSheet()
    
    # --- EN-T√äTE (R√©utilisation du style Rapport) ---
    logo = LogoGraphique(width=40, height=40) # Utilise la classe existante
    
    titre_style = ParagraphStyle('Titre', parent=styles['Heading1'], fontSize=22, textColor=colors.HexColor('#1F3B73'), alignment=TA_LEFT)
    sous_titre_style = ParagraphStyle('SousTitre', parent=styles['Normal'], fontSize=12, textColor=colors.gray, alignment=TA_LEFT)
    
    titre_bloc = [
        Paragraph(f"√âTAT DE L'INVENTAIRE", titre_style),
        Paragraph(f"{escape(metadata['etablissement'])}", sous_titre_style)
    ]
    
    header_table = Table([[logo, titre_bloc]], colWidths=[1.5*cm, 20*cm])
    header_table.setStyle(TableStyle([('VALIGN', (0,0), (-1,-1), 'MIDDLE')]))
    elements.append(header_table)
    
    elements.append(Spacer(1, 0.5*cm))
    
    # --- INFO BARRE ---
    info_text = f"<b>G√©n√©r√© le :</b> {metadata['date_generation']}  |  <b>Total r√©f√©rences :</b> {metadata['total']}"
    elements.append(Paragraph(info_text, ParagraphStyle('Info', parent=styles['Normal'], fontSize=10, alignment=TA_RIGHT, textColor=colors.HexColor('#1F3B73'))))
    elements.append(Spacer(1, 0.3*cm))

    # --- TABLEAU ---
    header_style = ParagraphStyle('Header', parent=styles['Normal'], fontSize=10, textColor=colors.white, fontName='Helvetica-Bold', alignment=TA_CENTER)
    cell_style = ParagraphStyle('Cell', parent=styles['Normal'], fontSize=9, textColor=colors.black)
    cell_center = ParagraphStyle('CellCenter', parent=cell_style, alignment=TA_CENTER)
    
    headers = [
        Paragraph('Cat√©gorie', header_style),
        Paragraph('D√©signation', header_style),
        Paragraph('Qt√©', header_style),
        Paragraph('Seuil', header_style),
        Paragraph('Emplacement', header_style),
        Paragraph('P√©remption', header_style)
    ]
    
    table_data = [headers]
    
    for row in data:
        # Alerte visuelle pour le stock bas (Rouge si Qt√© <= Seuil)
        qty_style = cell_center
        if row['quantite'] <= row['seuil']:
            qty_style = ParagraphStyle('Alert', parent=cell_center, textColor=colors.red, fontName='Helvetica-Bold')

        table_data.append([
            Paragraph(escape(row['categorie']), cell_style),
            Paragraph(escape(row['nom']), cell_style),
            Paragraph(str(row['quantite']), qty_style),
            Paragraph(str(row['seuil']), cell_center),
            Paragraph(escape(row['armoire']), cell_style),
            Paragraph(row['peremption'], cell_center)
        ])
    
    # Largeurs optimis√©es pour Paysage (Total ~27.5cm)
    col_widths = [
        5.0*cm,  # Cat√©gorie
        9.5*cm,  # Nom (Large)
        2.0*cm,  # Qt√©
        2.0*cm,  # Seuil
        5.0*cm,  # Armoire
        4.0*cm   # P√©remption
    ]
    
    t = Table(table_data, colWidths=col_widths, repeatRows=1)
    
    t.setStyle(TableStyle([
        ('BACKGROUND', (0, 0), (-1, 0), colors.HexColor('#1F3B73')),
        ('VALIGN', (0, 0), (-1, -1), 'MIDDLE'),
        ('TOPPADDING', (0, 0), (-1, 0), 8),
        ('BOTTOMPADDING', (0, 0), (-1, 0), 8),
        ('ROWBACKGROUNDS', (0, 1), (-1, -1), [colors.white, colors.HexColor('#F4F6F9')]),
        ('GRID', (0, 0), (-1, -1), 0.5, colors.HexColor('#E0E0E0')),
        ('LINEBELOW', (0, 0), (-1, 0), 2, colors.HexColor('#1F3B73')),
    ]))
    
    elements.append(t)
    doc.build(elements)
    buffer.seek(0)
    
    filename = f"Inventaire_{sanitize_filename_report(metadata['etablissement'])}_{date.today().strftime('%Y%m%d')}.pdf"
    return send_file(buffer, as_attachment=True, download_name=filename, mimetype='application/pdf')


def generer_inventaire_excel(data, metadata):
    """G√©n√®re un Excel propre de l'inventaire."""
    wb = Workbook()
    ws = wb.active
    ws.title = "Inventaire"
    
    # Styles
    font_titre = Font(name='Segoe UI', size=16, bold=True, color="1F3B73")
    fill_header = PatternFill(start_color="1F3B73", end_color="1F3B73", fill_type="solid")
    font_header = Font(name='Segoe UI', size=11, bold=True, color="FFFFFF")
    align_center = Alignment(horizontal="center", vertical="center")
    border_thin = Border(left=Side(style='thin', color='D9D9D9'), right=Side(style='thin', color='D9D9D9'), bottom=Side(style='thin', color='D9D9D9'))
    font_alert = Font(color="DC3545", bold=True) # Rouge pour stock bas

    # 1. En-t√™te
    ws.merge_cells('A1:F1')
    ws['A1'] = f"üì¶ √âTAT DE L'INVENTAIRE - {metadata['etablissement']}"
    ws['A1'].font = font_titre
    ws['A1'].alignment = Alignment(horizontal="left", vertical="center")
    ws.row_dimensions[1].height = 35
    
    ws['A2'] = f"G√©n√©r√© le : {metadata['date_generation']}"
    ws['A2'].font = Font(italic=True, color="666666")
    
    # 2. Tableau
    headers = ["Cat√©gorie", "D√©signation", "Quantit√©", "Seuil", "Emplacement", "P√©remption"]
    ws.append([])
    ws.append(headers) # Ligne 4
    
    for col_num, header in enumerate(headers, 1):
        cell = ws.cell(row=4, column=col_num)
        cell.value = header
        cell.fill = fill_header
        cell.font = font_header
        cell.alignment = align_center
    
    ws.row_dimensions[4].height = 30
    
    # 3. Donn√©es
    for row in data:
        ws.append([
            row['categorie'],
            row['nom'],
            row['quantite'],
            row['seuil'],
            row['armoire'],
            row['peremption']
        ])
        
        current_row = ws.max_row
        
        # Style des cellules
        for col in range(1, 7):
            cell = ws.cell(row=current_row, column=col)
            cell.border = border_thin
            cell.alignment = Alignment(vertical="center")
            
            # Centrer Qt√©, Seuil, Date
            if col in [3, 4, 6]:
                cell.alignment = align_center
                
        # Alerte Stock Bas (Rouge)
        if row['quantite'] <= row['seuil']:
            ws.cell(row=current_row, column=3).font = font_alert

    # 4. Largeurs
    ws.column_dimensions['A'].width = 25 # Cat
    ws.column_dimensions['B'].width = 40 # Nom
    ws.column_dimensions['C'].width = 12 # Qt√©
    ws.column_dimensions['D'].width = 12 # Seuil
    ws.column_dimensions['E'].width = 25 # Armoire
    ws.column_dimensions['F'].width = 15 # Date
    
    # Filtres
    ws.auto_filter.ref = f"A4:F{ws.max_row}"
    ws.freeze_panes = "A5"

    buffer = BytesIO()
    wb.save(buffer)
    buffer.seek(0)
    
    filename = f"Inventaire_{sanitize_filename_report(metadata['etablissement'])}_{date.today().strftime('%Y%m%d')}.xlsx"
    return send_file(buffer, as_attachment=True, download_name=filename, mimetype='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet')



==================================================
FICHIER : views\api.py
==================================================
# ============================================================
# FICHIER : views/api.py (VERSION FINALE OPTIMIS√âE)
# ============================================================
# -*- coding: utf-8 -*-
import json
from datetime import datetime
from typing import NamedTuple, List, Dict, Any
from flask import Blueprint, request, jsonify, session, current_app, render_template
from werkzeug.exceptions import BadRequest

# Imports locaux
from db import db, Objet, Armoire, Categorie, Utilisateur, Reservation, Kit, KitObjet, Suggestion, Historique, MaintenanceLog, EquipementSecurite
from extensions import limiter
from utils import login_required, admin_required

# --- SERVICES ---
from services.stock_service import StockService, StockServiceError
from services.panier_service import PanierService, PanierServiceError
from services.inventory_service import InventoryService, InventoryServiceError

from sqlalchemy import func, select

api_bp = Blueprint('api', __name__, url_prefix='/api')

# ============================================================
# STRUCTURES DE DONN√âES & HELPERS
# ============================================================

class Services(NamedTuple):
    stock: StockService
    panier: PanierService
    inventory: InventoryService

def get_services() -> Services:
    user_id = session.get('user_id')
    etablissement_id = session.get('etablissement_id')

    if not user_id or not etablissement_id:
        raise ValueError("Session invalide")

    user = db.session.get(Utilisateur, user_id)
    if not user or user.etablissement_id != etablissement_id:
        current_app.logger.critical(f"SECURITY: IDOR Attempt. User {user_id}")
        raise ValueError("Session invalide : Incoh√©rence √©tablissement")

    return Services(
        stock=StockService(etablissement_id),
        panier=PanierService(etablissement_id),
        inventory=InventoryService(etablissement_id)
    )

def _parse_request_dates(date_str, h_debut, h_fin):
    """Parsing robuste avec logs pour le d√©bogage."""
    if not date_str: raise ValueError("Param√®tre 'date' manquant")
    if not h_debut: raise ValueError("Param√®tre 'heure_debut' manquant")
    if not h_fin: raise ValueError("Param√®tre 'heure_fin' manquant")
    
    try:
        d = datetime.strptime(date_str, "%Y-%m-%d").date()
        t_start = datetime.strptime(h_debut, "%H:%M").time()
        t_end = datetime.strptime(h_fin, "%H:%M").time()
        
        start_dt = datetime.combine(d, t_start)
        end_dt = datetime.combine(d, t_end)
        
        if start_dt >= end_dt:
            raise ValueError("L'heure de d√©but doit √™tre avant l'heure de fin")
            
        return start_dt, end_dt
    except ValueError as e:
        raise ValueError(f"Format de date/heure invalide: {str(e)}")

def _creneaux_se_chevauchent(start1, end1, start2, end2):
    """D√©termine si deux cr√©neaux temporels se chevauchent."""
    return start1 < end2 and end1 > start2

def _extraire_items_panier_chevauchant(services: Services, user_id: int, start_dt: datetime, end_dt: datetime) -> List[Dict[str, Any]]:
    """Retourne les items du panier qui chevauchent le cr√©neau demand√©."""
    items = []
    try:
        contenu = services.panier.get_contenu(user_id)
        # V√©rification structure dict
        if not contenu or not isinstance(contenu, dict) or 'items' not in contenu:
            return items
            
        for item in contenu['items']:
            try:
                # Validation des champs requis
                if not all(k in item for k in ('type', 'id_item', 'quantite', 'date_reservation', 'heure_debut', 'heure_fin')):
                    continue

                # Conversion dates
                cart_date_str = item['date_reservation']
                if isinstance(cart_date_str, str):
                    cart_date = datetime.strptime(cart_date_str, "%Y-%m-%d").date()
                else:
                    cart_date = cart_date_str

                cart_start = datetime.combine(cart_date, datetime.strptime(item['heure_debut'], "%H:%M").time())
                cart_end = datetime.combine(cart_date, datetime.strptime(item['heure_fin'], "%H:%M").time())
                
                if _creneaux_se_chevauchent(cart_start, cart_end, start_dt, end_dt):
                    items.append({
                        'type': item['type'],
                        'id': item['id_item'],
                        'quantite': item['quantite']
                    })
            except (KeyError, ValueError, TypeError) as e:
                current_app.logger.warning(f"Item panier invalide ignor√©: {e}")
                continue
    except Exception as e:
        current_app.logger.warning(f"Erreur lecture panier (non bloquant): {e}")
    
    return items

def _validate_simulated_cart(cart_data):
    if not isinstance(cart_data, list):
        raise ValueError("Le panier doit √™tre une liste")
    
    # Utilisation de la constante du service (Fallback si non d√©finie)
    max_items = getattr(PanierService, 'MAX_ITEMS_PANIER', 50)
    if len(cart_data) > max_items:
        raise ValueError("Panier trop volumineux")
    
    for item in cart_data:
        if not isinstance(item, dict): raise ValueError("Item malform√©")
        if not all(k in item for k in ('type', 'id')): raise ValueError("Champs type/id manquants")
        
        qty = item.get('quantite') or item.get('quantity')
        if qty is None or not isinstance(qty, (int, float)) or qty <= 0:
            raise ValueError("Quantit√© invalide ou manquante")

# ============================================================
# GESTION D'ERREURS CENTRALIS√âE
# ============================================================

@api_bp.errorhandler(StockServiceError)
@api_bp.errorhandler(PanierServiceError)
@api_bp.errorhandler(InventoryServiceError)
def handle_business_error(error):
    return jsonify({"success": False, "error": str(error), "code": "BUSINESS_ERROR"}), 200

@api_bp.errorhandler(ValueError)
@api_bp.errorhandler(BadRequest)
def handle_validation_error(error):
    current_app.logger.warning(f"[API VALIDATION ERROR] {str(error)}")
    msg = str(error) if isinstance(error, ValueError) else "JSON malform√© ou invalide"
    return jsonify({
        "success": False, 
        "error": msg, 
        "code": "VALIDATION_ERROR"
    }), 400

# ============================================================
# 1. GESTION DU PANIER
# ============================================================

@api_bp.route("/panier", methods=['GET'])
@login_required
@limiter.limit("120 per minute")
def get_panier():
    services = get_services()
    contenu = services.panier.get_contenu(session['user_id'])
    return jsonify({"success": True, "data": contenu})

@api_bp.route("/panier/ajouter", methods=['POST'])
@login_required
@limiter.limit("60 per minute")
def ajouter_item_panier():
    if not request.is_json: return jsonify({'success': False, 'error': 'JSON required'}), 415
    services = get_services()
    data = request.get_json()
    result = services.panier.ajouter_item(session['user_id'], data)
    return jsonify({"success": True, "data": result}), 201

@api_bp.route("/panier/retirer/<int:item_id>", methods=['DELETE'])
@login_required
def retirer_item_panier(item_id):
    services = get_services()
    services.panier.retirer_item(session['user_id'], item_id)
    return jsonify({"success": True}), 200

@api_bp.route("/panier", methods=['DELETE'])
@login_required
def vider_panier():
    services = get_services()
    services.panier.vider_panier(session['user_id'])
    return jsonify({"success": True}), 200

@api_bp.route("/panier/checkout", methods=['POST'])
@login_required
@limiter.limit("10 per minute")
def checkout_panier():
    services = get_services()
    user_id = session['user_id']
    try:
        result = services.panier.valider_panier(user_id)
        
        # --- CORRECTION POUR LE TOAST JS ---
        # Le JS attend data.reservations_count
        response_data = result

        # Si le service renvoie une liste (les r√©servations cr√©√©es), on la structure
        if isinstance(result, list):
            response_data = {
                'reservations_count': len(result),
                'reservations': result
            }
        # Si c'est un dictionnaire mais qu'il manque la cl√© explicite
        elif isinstance(result, dict) and 'reservations_count' not in result:
            # On essaie de deviner le nombre, sinon 1 par d√©faut (car succ√®s)
            count = len(result.get('reservations', [])) or len(result.get('items', [])) or 1
            response_data = result.copy()
            response_data['reservations_count'] = count

        current_app.logger.info(f"API CHECKOUT SUCCESS | User {user_id}")
        return jsonify({"success": True, "data": response_data}), 201

    except Exception as e:
        current_app.logger.error(f"API CHECKOUT ERROR: {e}", exc_info=True)
        if isinstance(e, (PanierServiceError, StockServiceError)):
            raise e
        return jsonify({"success": False, "error": "Erreur technique"}), 500

# ============================================================
# 2. DISPONIBILIT√âS (OPTIMIS√â)
# ============================================================

@api_bp.route("/disponibilites", methods=['GET'])
@login_required
def api_disponibilites():
    try:
        services = get_services()
        
        start_dt, end_dt = _parse_request_dates(
            request.args.get('date'), 
            request.args.get('heure_debut'), 
            request.args.get('heure_fin')
        )

        # 1. R√©cup√©ration intelligente du panier
        items_a_deduire = _extraire_items_panier_chevauchant(
            services, session['user_id'], start_dt, end_dt
        )

        # 2. Panier Simul√© (Optionnel)
        panier_param = request.args.get('panier')
        if panier_param:
            try:
                panier_simule = json.loads(panier_param)
                _validate_simulated_cart(panier_simule)
                items_a_deduire.extend(panier_simule)
            except Exception as e:
                current_app.logger.warning(f"Panier simul√© invalide: {e}")

        # 3. Calcul
        resultats = services.stock.get_disponibilites(start_dt, end_dt, panier_items=items_a_deduire)
        return jsonify({"success": True, "data": resultats})

    except ValueError as e:
        return jsonify({"success": False, "error": str(e), "code": "INVALID_PARAMS"}), 400
    except Exception as e:
        current_app.logger.error(f"Erreur API Disponibilit√©s: {e}", exc_info=True)
        return jsonify({"success": False, "error": "Erreur serveur"}), 500

# ============================================================
# 3. INVENTAIRE & RECHERCHE (CORRIG√â)
# ============================================================

@api_bp.route("/search")
@login_required
@limiter.limit("30 per minute")
def search():
    services = get_services()
    query_text = request.args.get('q', '').strip()
    results = services.inventory.search_objets(query_text)
    return jsonify({"success": True, "data": results})

@api_bp.route("/inventaire")
@login_required
def api_inventaire():
    try:
        services = get_services()
        
        # 1. Nettoyage des param√®tres (Gestion du cas "1:1" ou erreurs JS)
        def get_clean_int(key):
            val = request.args.get(key)
            if not val: return None
            # On ne garde que les chiffres (ex: "1:1" -> "11" ou juste le premier "1")
            # Ici on prend une approche simple : on essaie de convertir, sinon None
            try:
                return int(val)
            except ValueError:
                # Si format bizarre comme "1:1", on essaie de prendre le premier chiffre
                import re
                match = re.search(r'\d+', str(val))
                return int(match.group()) if match else None

        filters = {
            'q': request.args.get('q'),
            'armoire_id': get_clean_int('armoire'),
            'categorie_id': get_clean_int('categorie'),
            'etat': request.args.get('etat')
        }
        
        sort_by = request.args.get('sort_by', 'nom')
        direction = request.args.get('direction', 'asc')
        
        # 2. Appel Service
        dto = services.inventory.get_paginated_inventory(
            page=request.args.get('page', 1, type=int),
            sort_by=sort_by,
            direction=direction,
            filters=filters
        )
        
        # 3. Extraction Context (D√©fensive)
        arm_nom = None
        cat_nom = None
        
        if dto.context:
            if isinstance(dto.context, dict):
                arm_nom = dto.context.get('armoire_nom')
                cat_nom = dto.context.get('categorie_nom')
            else:
                arm_nom = getattr(dto.context, 'armoire_nom', None)
                cat_nom = getattr(dto.context, 'categorie_nom', None)

        # 4. Rendu
        html = render_template(
            '_inventaire_content.html',
            objets=dto.items or [], # Protection contre None
            pagination={
                'page': dto.current_page,
                'total_pages': dto.total_pages,
                'endpoint': 'inventaire.inventaire'
            },
            sort_by=sort_by,
            direction=direction,
            armoire=arm_nom,
            categorie=cat_nom,
            armoire_id=filters['armoire_id'],
            categorie_id=filters['categorie_id'],
            date_actuelle=datetime.now(),
            etat=filters['etat']
        )
        return jsonify({'html': html})

    except Exception as e:
        current_app.logger.error(f"Erreur API Inventaire: {e}", exc_info=True)
        # En cas d'erreur, on renvoie un bout de HTML d'erreur pour que l'utilisateur voie quelque chose
        error_html = f'<div class="alert alert-danger m-3">Erreur de chargement : {str(e)}</div>'
        return jsonify({'html': error_html}), 500

# ============================================================
# 4. CALENDRIER
# ============================================================

@api_bp.route("/reservations_par_mois/<int:year>/<int:month>")
@login_required
def api_reservations_par_mois(year, month):
    etablissement_id = session.get('etablissement_id')
    try:
        from calendar import monthrange
        start_date = datetime(year, month, 1)
        days_in_month = monthrange(year, month)[1]
        end_date = datetime(year, month, days_in_month, 23, 59, 59)

        stats = db.session.execute(
            db.select(
                func.date(Reservation.debut_reservation).label('jour'), 
                func.count(func.distinct(Reservation.groupe_id)).label('total')
            )
            .filter(
                Reservation.etablissement_id == etablissement_id,
                Reservation.debut_reservation >= start_date,
                Reservation.debut_reservation <= end_date,
                Reservation.statut == 'confirm√©e'
            )
            .group_by(func.date(Reservation.debut_reservation))
        ).all()
        return jsonify({str(row.jour): row.total for row in stats})
    except Exception:
        return jsonify({})

@api_bp.route("/reservation_details/<groupe_id>")
@login_required
def api_reservation_details(groupe_id):
    etablissement_id = session.get('etablissement_id')
    try:
        stmt = (
            db.select(Reservation)
            .options(
                db.joinedload(Reservation.objet), 
                db.joinedload(Reservation.utilisateur),
                db.joinedload(Reservation.kit).joinedload(Kit.objets_assoc).joinedload(KitObjet.objet)
            )
            .filter_by(groupe_id=groupe_id, etablissement_id=etablissement_id)
        )
        res = db.session.execute(stmt).unique().scalars().all()
        if not res: return jsonify({'error': 'Introuvable'}), 404
        
        first = res[0]
        details = {
            'groupe_id': groupe_id,
            'debut': first.debut_reservation.isoformat(),
            'fin': first.fin_reservation.isoformat(),
            'user_name': first.utilisateur.nom_utilisateur if first.utilisateur else "Inconnu",
            'can_edit': (first.utilisateur_id == session.get('user_id')) or (session.get('user_role') == 'admin'),
            'items': []
        }
        for r in res:
            if r.kit_id and r.kit:
                img = r.kit.objets_assoc[0].objet.image_url if r.kit.objets_assoc and r.kit.objets_assoc[0].objet else None
                details['items'].append({'type': 'kit', 'id': r.kit_id, 'nom': r.kit.nom, 'quantite': r.quantite_reservee, 'image': img})
            elif r.objet:
                details['items'].append({'type': 'objet', 'id': r.objet_id, 'nom': r.objet.nom, 'quantite': r.quantite_reservee, 'image': r.objet.image_url})
        return jsonify(details)
    except Exception as e:
        current_app.logger.error(f"Erreur details: {e}")
        return jsonify({'error': "Erreur serveur"}), 500

@api_bp.route("/supprimer_reservation", methods=['POST'])
@login_required
def api_supprimer_reservation():
    if not request.is_json: return jsonify({'success': False, 'error': 'JSON required'}), 415
    etablissement_id = session.get('etablissement_id')
    gid = request.get_json().get('groupe_id')
    try:
        existing = db.session.execute(db.select(Reservation).filter_by(groupe_id=gid, etablissement_id=etablissement_id).limit(1)).scalar()
        if not existing: return jsonify({'success': False, 'error': "Introuvable"}), 404
        if session.get('user_role') != 'admin' and existing.utilisateur_id != session.get('user_id'):
            return jsonify({'success': False, 'error': "Interdit"}), 403
        db.session.execute(db.delete(Reservation).where(Reservation.groupe_id == gid))
        db.session.commit()
        return jsonify({'success': True})
    except Exception as e:
        db.session.rollback()
        return jsonify({'success': False, 'error': "Erreur technique"}), 500

@api_bp.route("/reservations_jour/<date_str>")
@login_required
def api_reservations_jour_detail(date_str):
    etablissement_id = session.get('etablissement_id')
    try:
        d = datetime.strptime(date_str, '%Y-%m-%d').date()
        res = db.session.execute(
            db.select(Reservation, Utilisateur.nom_utilisateur)
            .join(Utilisateur, Reservation.utilisateur_id == Utilisateur.id)
            .filter(Reservation.etablissement_id == etablissement_id, func.date(Reservation.debut_reservation) == d, Reservation.statut == 'confirm√©e')
            .order_by(Reservation.debut_reservation)
        ).all()
        seen_groups = set()
        data = []
        for r, nom_user in res:
            if r.groupe_id not in seen_groups:
                data.append({'nom_utilisateur': nom_user, 'heure_debut': r.debut_reservation.strftime('%H:%M'), 'heure_fin': r.fin_reservation.strftime('%H:%M')})
                seen_groups.add(r.groupe_id)
        return jsonify({'reservations': data})
    except Exception:
        return jsonify({'reservations': []}), 500

# ============================================================
# 5. MODIFICATION LIVE DES R√âSERVATIONS
# ============================================================

@api_bp.route("/reservation/<groupe_id>/ajouter", methods=['POST'])
@login_required
def reservation_ajouter_item(groupe_id):
    if not request.is_json: return jsonify({'success': False, 'error': 'JSON required'}), 415
    services = get_services()
    data = request.get_json()
    try:
        with db.session.begin_nested(): # Transaction atomique
            stmt = select(Reservation).filter_by(
                groupe_id=groupe_id, 
                etablissement_id=session['etablissement_id']
            )
            if session.get('user_role') != 'admin':
                stmt = stmt.filter_by(utilisateur_id=session.get('user_id'))
                
            existing_resas = db.session.execute(stmt).scalars().all()
            if not existing_resas:
                return jsonify({'success': False, 'error': "R√©servation introuvable ou non autoris√©e"}), 404
                
            first_resa = existing_resas[0]
            item_type = data.get('type')
            item_id = int(data.get('id'))
            qty_to_add = int(data.get('quantite', 1))
            
            dispo = services.stock.get_disponibilites(first_resa.debut_reservation, first_resa.fin_reservation)
            stock_restant = 0
            found = False
            
            list_to_check = dispo['objets'] if item_type == 'objet' else dispo['kits']
            for item in list_to_check:
                if item['id'] == item_id:
                    stock_restant = item['disponible']
                    found = True
                    break
            
            if not found: return jsonify({'success': False, 'error': "Item indisponible"}), 400
            if stock_restant < qty_to_add: return jsonify({'success': False, 'error': f"Stock insuffisant (Max: {stock_restant})"}), 400

            target_resa = None
            for r in existing_resas:
                if (item_type == 'kit' and r.kit_id == item_id) or (item_type == 'objet' and r.objet_id == item_id):
                    target_resa = r
                    break
                
            if target_resa: target_resa.quantite_reservee += qty_to_add
            else:
                new_resa = Reservation(
                    utilisateur_id=first_resa.utilisateur_id, etablissement_id=session['etablissement_id'],
                    quantite_reservee=qty_to_add, debut_reservation=first_resa.debut_reservation,
                    fin_reservation=first_resa.fin_reservation, groupe_id=groupe_id, statut='confirm√©e'
                )
                if item_type == 'kit': new_resa.kit_id = item_id
                else: new_resa.objet_id = item_id
                db.session.add(new_resa)
            
        db.session.commit()
        return jsonify({'success': True})
    except Exception as e:
        db.session.rollback()
        return jsonify({'success': False, 'error': "Erreur technique"}), 500

@api_bp.route("/reservation/<groupe_id>/retirer/<int:item_id>", methods=['DELETE'])
@login_required
def reservation_retirer_item(groupe_id, item_id):
    etablissement_id = session.get('etablissement_id')
    item_type = request.args.get('type')
    try:
        with db.session.begin_nested():
            stmt = select(Reservation).filter_by(groupe_id=groupe_id, etablissement_id=etablissement_id)
            resas = db.session.execute(stmt).scalars().all()
            target = None
            for r in resas:
                if (item_type == 'kit' and r.kit_id == item_id) or (item_type == 'objet' and r.objet_id == item_id):
                    target = r
                    break
            if not target: return jsonify({'success': False, 'error': "Item non trouv√©"}), 404
            
            if target.quantite_reservee > 1: target.quantite_reservee -= 1
            else: db.session.delete(target)
        
        db.session.commit()
        remaining = db.session.execute(select(func.count(Reservation.id)).filter_by(groupe_id=groupe_id)).scalar()
        return jsonify({'success': True, 'remaining_items': remaining})
    except Exception as e:
        db.session.rollback()
        return jsonify({'success': False, 'error': str(e)}), 500

@api_bp.route("/reservation/<groupe_id>/modifier_heure", methods=['POST'])
@login_required
def reservation_modifier_heure(groupe_id):
    if not request.is_json: return jsonify({'success': False, 'error': 'JSON required'}), 415
    etablissement_id = session.get('etablissement_id')
    data = request.get_json()
    
    try:
        # 1. Parsing des nouvelles heures
        d = datetime.strptime(data.get('date'), "%Y-%m-%d").date()
        t_start = datetime.strptime(data.get('heure_debut'), "%H:%M").time()
        t_end = datetime.strptime(data.get('heure_fin'), "%H:%M").time()
        new_start = datetime.combine(d, t_start)
        new_end = datetime.combine(d, t_end)
        
        if new_start >= new_end:
            return jsonify({'success': False, 'error': "Heures invalides"}), 400
            
        # Validation date future
        if new_start <= datetime.now():
            return jsonify({'success': False, 'error': "Impossible de modifier dans le pass√©"}), 400

        # 2. R√©cup√©ration des r√©servations du groupe
        stmt = select(Reservation).filter_by(
            groupe_id=groupe_id, 
            etablissement_id=etablissement_id
        )
        
        if session.get('user_role') != 'admin':
            stmt = stmt.filter_by(utilisateur_id=session.get('user_id'))
            
        resas = db.session.execute(stmt).scalars().all()
        
        if not resas:
            return jsonify({'success': False, 'error': "Introuvable ou non autoris√©"}), 404

        # 3. VALIDATION CRITIQUE : V√©rification du stock sur le nouveau cr√©neau
        for r in resas:
            if r.objet_id:
                taken = db.session.query(func.sum(Reservation.quantite_reservee)).filter(
                    Reservation.etablissement_id == etablissement_id,
                    Reservation.groupe_id != groupe_id,  # On s'exclut
                    Reservation.objet_id == r.objet_id,
                    Reservation.debut_reservation < new_end,
                    Reservation.fin_reservation > new_start,
                    Reservation.statut == 'confirm√©e'
                ).scalar() or 0
                
                obj = db.session.get(Objet, r.objet_id)
                if not obj:
                    return jsonify({'success': False, 'error': "Objet introuvable"}), 404
                    
                dispo = obj.quantite_physique - taken
                
                if dispo < r.quantite_reservee:
                    return jsonify({'success': False, 'error': f"Stock insuffisant pour '{obj.nom}'"}), 400
            
            elif r.kit_id:
                kit = db.session.get(Kit, r.kit_id)
                if not kit: return jsonify({'success': False, 'error': "Kit introuvable"}), 404
                
                for kit_obj in kit.objets_assoc:
                    qty_needed = kit_obj.quantite * r.quantite_reservee
                    taken = db.session.query(func.sum(Reservation.quantite_reservee)).filter(
                        Reservation.etablissement_id == etablissement_id,
                        Reservation.groupe_id != groupe_id,
                        Reservation.objet_id == kit_obj.objet_id,
                        Reservation.debut_reservation < new_end,
                        Reservation.fin_reservation > new_start,
                        Reservation.statut == 'confirm√©e'
                    ).scalar() or 0
                    
                    obj = kit_obj.objet
                    dispo = obj.quantite_physique - taken
                    
                    if dispo < qty_needed:
                        return jsonify({'success': False, 'error': f"Stock insuffisant pour '{obj.nom}' (Kit)"}), 400

        # 4. Application
        for r in resas:
            r.debut_reservation = new_start
            r.fin_reservation = new_end
            
        db.session.commit()
        
        # Log am√©lior√©
        user = db.session.get(Utilisateur, session.get('user_id'))
        current_app.logger.info(
            f"R√©servation {groupe_id} d√©plac√©e vers {new_start.strftime('%Y-%m-%d %H:%M')} "
            f"par {user.nom_utilisateur if user else 'Inconnu'} (ID: {session.get('user_id')})"
        )
        
        return jsonify({'success': True})
        
    except ValueError as e:
        return jsonify({'success': False, 'error': str(e)}), 400
    except Exception as e:
        db.session.rollback()
        current_app.logger.error(f"Erreur modifier_heure: {e}", exc_info=True)
        return jsonify({'success': False, 'error': "Erreur technique"}), 500

# ============================================================
# 6. SUGGESTIONS & S√âCURIT√â
# ============================================================

@api_bp.route("/suggerer_commande", methods=['POST'])
@login_required
def suggerer_commande():
    if not request.is_json: return jsonify({'success': False, 'error': 'JSON required'}), 415
    etablissement_id = session.get('etablissement_id')
    data = request.get_json()
    try:
        db.session.add(Suggestion(
            objet_id=int(data['objet_id']), utilisateur_id=session.get('user_id'),
            quantite=int(data['quantite']), commentaire=data.get('commentaire', ''),
            etablissement_id=etablissement_id, statut='En attente', date_demande=datetime.now()
        ))
        db.session.commit()
        return jsonify({'success': True})
    except Exception:
        db.session.rollback()
        return jsonify({'success': False, 'error': "Erreur"}), 500

@api_bp.route("/traiter_suggestion/<int:suggestion_id>/<action>", methods=['POST'])
@login_required
def traiter_suggestion(suggestion_id, action):
    if session.get('user_role') != 'admin': return jsonify({'success': False, 'error': "Non autoris√©"}), 403
    suggestion = db.session.get(Suggestion, suggestion_id)
    if not suggestion: return jsonify({'success': False, 'error': "Introuvable"}), 404
    try:
        if action == 'valider': suggestion.statut = 'Valid√©e'
        elif action == 'refuser': db.session.delete(suggestion)
        db.session.commit()
        return jsonify({'success': True})
    except Exception:
        db.session.rollback()
        return jsonify({'success': False, 'error': "Erreur"}), 500

@api_bp.route("/valider_dormant/<int:objet_id>", methods=['POST'])
@login_required
def valider_dormant(objet_id):
    if session.get('user_role') != 'admin': return jsonify({'success': False, 'error': "Non autoris√©"}), 403
    try:
        db.session.add(Historique(
            objet_id=objet_id, utilisateur_id=session.get('user_id'),
            action="V√©rification", details="Objet dormant valid√©",
            etablissement_id=session.get('etablissement_id'), timestamp=datetime.now()
        ))
        db.session.commit()
        return jsonify({'success': True})
    except Exception:
        db.session.rollback()
        return jsonify({'success': False, 'error': "Erreur"}), 500

# CORRECTION : Suppression du doublon /api/api/
@api_bp.route('/signalement', methods=['POST'])
@login_required
def signaler_dysfonctionnement():
    if not request.is_json: return jsonify({'success': False, 'error': 'JSON required'}), 415
    try:
        data = request.json
        equipement_id = data.get('equipement_id')
        description = data.get('description')
        
        if not equipement_id or not description:
            return jsonify({'success': False, 'error': "Description manquante."}), 400

        user = db.session.get(Utilisateur, session.get('user_id'))
        nom_operateur = user.nom_utilisateur if user else "Utilisateur Inconnu"

        log = MaintenanceLog(
            equipement_id=equipement_id,
            date_intervention=datetime.now().date(),
            operateur=nom_operateur,
            resultat='signalement', 
            observations=description
        )
        
        db.session.add(log)
        db.session.commit()
        
        return jsonify({'success': True})
        
    except Exception as e:
        current_app.logger.error(f"Erreur signalement: {e}")
        return jsonify({'success': False, 'error': "Erreur technique."}), 500

@api_bp.route('/traiter_signalement/<int:log_id>/<action>', methods=['POST'])
@admin_required
def traiter_signalement(log_id, action):
    try:
        log = db.session.get(MaintenanceLog, log_id)
        if not log: return jsonify({'success': False, 'error': "Introuvable"}), 404
        
        if action == 'valider':
            log.resultat = 'non_conforme' 
            log.observations += " [Valid√© par Admin]"
        elif action == 'refuser':
            db.session.delete(log)
        
        db.session.commit()
        return jsonify({'success': True})
    except Exception as e:
        return jsonify({'success': False, 'error': str(e)}), 500

==================================================
FICHIER : views\auth.py
==================================================
# ============================================================
# FICHIER : views/auth.py (Solution Pseudo Unique)
# ============================================================
import secrets
from flask import Blueprint, render_template, request, redirect, url_for, flash, session, current_app
from werkzeug.security import generate_password_hash, check_password_hash
from db import db, Utilisateur, Etablissement, Parametre
from utils import get_etablissement_params, login_required, validate_password_strength, validate_email
from extensions import limiter

auth_bp = Blueprint('auth', __name__)

@auth_bp.route('/login', methods=['GET', 'POST'])
@limiter.limit("10 per minute")
def login():
    if request.method == 'POST':
        username = request.form.get('username')
        password = request.form.get('password')
        
        # Recherche de l'utilisateur unique
        user = db.session.execute(db.select(Utilisateur).filter_by(nom_utilisateur=username)).scalar_one_or_none()
        
        if user and check_password_hash(user.mot_de_passe, password):
            if user.role == 'desactive':
                flash("Ce compte a √©t√© d√©sactiv√©.", "error")
                return redirect(url_for('auth.login'))

            session.clear()
            session['user_id'] = user.id
            session['user_name'] = user.nom_utilisateur
            session['user_role'] = user.role
            session['etablissement_id'] = user.etablissement_id
            
            etab = db.session.get(Etablissement, user.etablissement_id)
            session['nom_etablissement'] = etab.nom if etab else "Mon Labo"
            
            return redirect(url_for('inventaire.index'))
        else:
            flash("Identifiants incorrects.", "error")
            
    return render_template('login.html')

@auth_bp.route('/register', methods=['GET', 'POST'])
@limiter.limit("5 per minute")
def register():
    if request.method == 'POST':
        username = request.form.get('username')
        email = request.form.get('email')
        password = request.form.get('password')
        code_invitation = request.form.get('code_invitation', '').strip().upper()
        
        if not validate_email(email):
            flash("Format d'email invalide.", "error")
            return render_template('register.html')

        is_valid_pass, msg_pass = validate_password_strength(password)
        if not is_valid_pass:
            flash(msg_pass, "error")
            return render_template('register.html')

        etablissement = db.session.execute(db.select(Etablissement).filter_by(code_invitation=code_invitation)).scalar_one_or_none()
        if not etablissement:
            flash("Code d'invitation invalide.", "error")
            return render_template('register.html')
            
        # V√âRIFICATION STRICTE DU PSEUDO
        existing_user = db.session.execute(db.select(Utilisateur).filter_by(nom_utilisateur=username)).scalar_one_or_none()
        if existing_user:
            flash(f"Le nom d'utilisateur '{username}' est d√©j√† pris. Veuillez en choisir un autre.", "error")
            return render_template('register.html')
            
        existing_email = db.session.execute(db.select(Utilisateur).filter_by(email=email)).scalar_one_or_none()
        if existing_email:
            flash("Cet email est d√©j√† utilis√©.", "error")
            return render_template('register.html')

        try:
            nouvel_utilisateur = Utilisateur(
                nom_utilisateur=username,
                email=email,
                mot_de_passe=generate_password_hash(password, method='pbkdf2:sha256'),
                role='utilisateur',
                etablissement_id=etablissement.id
            )
            db.session.add(nouvel_utilisateur)
            db.session.commit()
            flash("Compte cr√©√© ! Connectez-vous.", "success")
            return redirect(url_for('auth.login'))
        except Exception as e:
            db.session.rollback()
            current_app.logger.error(f"Erreur register: {e}")
            flash("Erreur technique.", "error")
            
    return render_template('register.html')

@auth_bp.route('/logout')
def logout():
    session.clear()
    flash("Vous avez √©t√© d√©connect√©.", "info")
    return redirect(url_for('auth.login'))

@auth_bp.route('/setup', methods=['GET', 'POST'])
@limiter.limit("3 per minute")
def setup():
    """Cr√©ation d'un NOUVEL √âtablissement."""
    if request.method == 'POST':
        nom_etablissement = request.form.get('nom_etablissement')
        username = request.form.get('username')
        email = request.form.get('email')
        password = request.form.get('password')
        
        if not validate_email(email):
            flash("Format d'email invalide.", "error")
            return render_template('setup.html')

        is_valid_pass, msg_pass = validate_password_strength(password)
        if not is_valid_pass:
            flash(msg_pass, "error")
            return render_template('setup.html')

        # V√âRIFICATION STRICTE DU PSEUDO
        user_exist = db.session.execute(db.select(Utilisateur).filter_by(nom_utilisateur=username)).scalar_one_or_none()
        if user_exist:
            flash(f"Le nom d'utilisateur '{username}' est d√©j√† pris. Essayez '{username}_lycee' ou '{username}_admin'.", "error")
            return render_template('setup.html')

        email_exist = db.session.execute(db.select(Utilisateur).filter_by(email=email)).scalar_one_or_none()
        if email_exist:
            flash("Cet email est d√©j√† utilis√©.", "error")
            return render_template('setup.html')

        try:
            code_temp = f"LAB-{secrets.token_hex(6).upper()}"
            etab = Etablissement(nom=nom_etablissement, code_invitation=code_temp)
            db.session.add(etab)
            db.session.flush()
            
            admin_user = Utilisateur(
                nom_utilisateur=username,
                email=email,
                mot_de_passe=generate_password_hash(password, method='pbkdf2:sha256'),
                role='admin',
                etablissement_id=etab.id
            )
            db.session.add(admin_user)
            
            db.session.add(Parametre(cle='licence_statut', valeur='FREE', etablissement_id=etab.id))
            instance_id = secrets.token_hex(8).upper()
            db.session.add(Parametre(cle='instance_id', valeur=instance_id, etablissement_id=etab.id))
            
            db.session.commit()
            
            flash(f"√âtablissement cr√©√© ! Connectez-vous.", "success")
            return redirect(url_for('auth.login'))
            
        except Exception as e:
            db.session.rollback()
            current_app.logger.error(f"Erreur setup: {e}")
            flash(f"Erreur technique.", "error")

    return render_template('setup.html')

# ... (Route profil inchang√©e)
@auth_bp.route('/profil', methods=['GET', 'POST'])
@login_required
def profil():
    user_id = session.get('user_id')
    user = db.session.get(Utilisateur, user_id)
    
    if not user:
        return redirect(url_for('auth.logout'))

    if request.method == 'POST':
        ancien_mdp = request.form.get('ancien_mot_de_passe')
        nouveau_mdp = request.form.get('nouveau_mot_de_passe')
        confirm_mdp = request.form.get('confirmation_mot_de_passe')

        if not ancien_mdp or not nouveau_mdp:
            flash("Veuillez remplir tous les champs.", "error")
        elif not check_password_hash(user.mot_de_passe, ancien_mdp):
            flash("Mot de passe actuel incorrect.", "error")
        elif nouveau_mdp != confirm_mdp:
            flash("Les nouveaux mots de passe ne correspondent pas.", "error")
        else:
            is_valid, msg = validate_password_strength(nouveau_mdp)
            if not is_valid:
                flash(msg, "error")
            else:
                try:
                    user.mot_de_passe = generate_password_hash(nouveau_mdp, method='pbkdf2:sha256')
                    db.session.commit()
                    
                    session.clear()
                    session.modified = True
                    flash("Mot de passe modifi√© avec succ√®s. Veuillez vous reconnecter.", "success")
                    return redirect(url_for('auth.login'))
                    
                except Exception as e:
                    db.session.rollback()
                    current_app.logger.error(f"Erreur profil: {e}")
                    flash("Erreur lors de la mise √† jour.", "error")
                
    return render_template('profil.html', user=user)

==================================================
FICHIER : views\inventaire.py
==================================================
# ============================================================
# FICHIER : views/inventaire.py
# ============================================================
import math
import os
from urllib.parse import urlparse
from datetime import datetime, timedelta
from flask import (Blueprint, render_template, request, redirect, url_for,
                   flash, session, jsonify, current_app)
from werkzeug.utils import secure_filename
from sqlalchemy import func, desc, or_
from sqlalchemy.orm import joinedload
from sqlalchemy.exc import IntegrityError

# IMPORTS DB
from db import db, Objet, Armoire, Categorie, Reservation, Utilisateur, Historique, Echeance, Budget, Depense, Fournisseur, Suggestion

# IMPORTS UTILS
from utils import login_required, admin_required, limit_objets_required, allowed_file

# --- CORRECTION ICI : On importe le Service au lieu de la fonction API ---
from services.inventory_service import InventoryService, InventoryServiceError
from services.security_service import SecurityService

inventaire_bp = Blueprint(
    'inventaire', 
    __name__,
    template_folder='../templates'
)


# ============================================================
# UTILITAIRES INTERNES (S√©curit√© & Nettoyage)
# ============================================================

def is_valid_url(url):
    """V√©rifie si une cha√Æne est une URL valide (http/https)."""
    try:
        result = urlparse(url)
        return all([result.scheme in ['http', 'https'], result.netloc])
    except:
        return False

def cleanup_old_file(relative_path):
    """
    Supprime un fichier local de mani√®re s√©curis√©e.
    Emp√™che la travers√©e de r√©pertoire (Path Traversal).
    """
    if not relative_path or not relative_path.startswith('uploads/'):
        return
    
    try:
        # 1. Normalisation du chemin
        safe_path = os.path.normpath(relative_path)
        
        # 2. V√©rification que le chemin reste dans 'static/uploads'
        root_uploads = os.path.join(current_app.root_path, 'static', 'uploads')
        full_path = os.path.join(current_app.root_path, 'static', safe_path)
        
        # On compare les chemins absolus pour √™tre s√ªr
        if not os.path.abspath(full_path).startswith(os.path.abspath(root_uploads)):
            current_app.logger.warning(f"SECURITY: Tentative de suppression hors uploads : {relative_path}")
            return
        
        if os.path.exists(full_path):
            os.remove(full_path)
            current_app.logger.info(f"Fichier orphelin supprim√© : {full_path}")
            
    except Exception as e:
        current_app.logger.warning(f"Echec suppression fichier {relative_path}: {e}")



# ============================================================
# ROUTES
# ============================================================
@inventaire_bp.route("/")
def index():
    # --- LOGIQUE DASHBOARD (Conserv√©e) ---
    etablissement_id = session.get('etablissement_id')
    user_id = session.get('user_id')
    if not etablissement_id:
        flash("Erreur critique : session invalide. Veuillez vous reconnecter.", "error")
        return redirect(url_for('auth.logout'))
    
    dashboard_data = {}

    if session.get('user_role') == 'admin':
        dashboard_data['stats'] = {
            'total_objets': db.session.query(Objet).filter_by(etablissement_id=etablissement_id).count(),
            'total_utilisateurs': db.session.query(Utilisateur).filter_by(etablissement_id=etablissement_id).count(),
            'reservations_actives': db.session.query(Reservation).filter(
                Reservation.etablissement_id == etablissement_id,
                Reservation.debut_reservation >= datetime.now()
            ).count()
        }

    admin_user = db.session.execute(db.select(Utilisateur).filter_by(role='admin', etablissement_id=etablissement_id)).scalar_one_or_none()
    dashboard_data['admin_contact'] = admin_user.email if admin_user and admin_user.email else (admin_user.nom_utilisateur if admin_user else "Non d√©fini")
    
    vingt_quatre_heures_avant = datetime.now() - timedelta(hours=24)
    objets_recents = db.session.execute(db.select(Objet.id, Objet.nom).join(Historique, Objet.id == Historique.objet_id).filter(Objet.etablissement_id == etablissement_id, Historique.timestamp >= vingt_quatre_heures_avant, or_(Historique.action == 'Cr√©ation', (Historique.action == 'Modification') & (Historique.details.like('%Quantit√©%')))).group_by(Objet.id, Objet.nom).order_by(db.desc(func.max(Historique.timestamp))).limit(10)).mappings().all()
    dashboard_data['objets_recents'] = objets_recents

    date_aujourdhui = datetime.now().date()
    date_limite = date_aujourdhui + timedelta(days=30)

    echeances_brutes = db.session.execute(
        db.select(Echeance)
        .filter(
            Echeance.etablissement_id == etablissement_id,
            Echeance.traite == 0,
            Echeance.date_echeance >= date_aujourdhui,
            Echeance.date_echeance <= date_limite
        )
        .order_by(Echeance.date_echeance.asc())
        .limit(5)
    ).scalars().all()

    prochaines_echeances_calculees = []
    for echeance in echeances_brutes:
        jours_restants = (echeance.date_echeance - date_aujourdhui).days
        prochaines_echeances_calculees.append({
            'intitule': echeance.intitule,
            'date_echeance_obj': echeance.date_echeance,
            'jours_restants': jours_restants
        })
    dashboard_data['prochaines_echeances'] = prochaines_echeances_calculees

    now = datetime.now()
    
    raw_reservations = db.session.execute(
        db.select(Reservation)
        .options(joinedload(Reservation.objet), joinedload(Reservation.kit))
        .filter(
            Reservation.etablissement_id == etablissement_id,
            Reservation.utilisateur_id == user_id,
            Reservation.debut_reservation >= now
        )
        .order_by(Reservation.debut_reservation.asc())
    ).scalars().all()

    # 2. Regroupement intelligent en Python
    reservations_map = {}
    for r in raw_reservations:
        if r.groupe_id not in reservations_map:
            reservations_map[r.groupe_id] = {
                'groupe_id': r.groupe_id,
                'debut': r.debut_reservation,
                'fin': r.fin_reservation,
                'liste_items': [] # On utilise 'liste_items' pour √©viter le conflit Jinja
            }
        
        # On d√©termine le nom et le type
        is_kit = r.kit_id is not None
        nom = r.kit.nom if is_kit else (r.objet.nom if r.objet else "Inconnu")
        
        reservations_map[r.groupe_id]['liste_items'].append({
            'nom': nom,
            'type': 'kit' if is_kit else 'objet',
            'quantite': r.quantite_reservee
        })

    # 3. On transforme en liste et on garde les 5 prochaines
    dashboard_data['reservations'] = list(reservations_map.values())[:5]

    annee_scolaire_actuelle = now.year if now.month >= 9 else now.year - 1

    budget_actuel = db.session.execute(
        db.select(Budget).filter_by(
            annee=annee_scolaire_actuelle,
            cloture=False,
            etablissement_id=etablissement_id
        )
    ).scalar_one_or_none()

    solde_actuel = None
    if budget_actuel:
        total_depenses = db.session.query(func.sum(Depense.montant)).filter_by(
            budget_id=budget_actuel.id,
            etablissement_id=etablissement_id
        ).scalar() or 0
        solde_actuel = budget_actuel.montant_initial - total_depenses

    dashboard_data['solde_budget'] = solde_actuel

    # --- LOGIQUE HISTORIQUE ADMINISTRATEUR (Cat√©goris√©) ---
    historique_groupe = {
        'creations': [],
        'modifications': [],
        'deplacements': [],
        'suppressions': []
    }

    if session.get('user_role') == 'admin':
        mouvements = db.session.execute(
            db.select(Historique, Objet.nom.label('nom_actuel'), Utilisateur.nom_utilisateur)
            .outerjoin(Objet, Historique.objet_id == Objet.id)
            .outerjoin(Utilisateur, Historique.utilisateur_id == Utilisateur.id)
            .filter(Historique.etablissement_id == etablissement_id)
            .order_by(Historique.timestamp.desc())
            .limit(50)
        ).all()

        for h, nom_obj, nom_user in mouvements:
            nom_affichage = nom_obj if nom_obj else "Objet supprim√©"
            
            item = {
                'id': h.id,
                'objet': nom_affichage,
                'user': nom_user or "Inconnu",
                'date': h.timestamp,
                'details': h.details
            }

            if h.action == 'Cr√©ation':
                historique_groupe['creations'].append(item)
            elif h.action == 'Suppression':
                if "de :" in h.details:
                    try:
                        item['objet'] = h.details.split("de :")[1].strip()
                    except IndexError:
                        pass
                historique_groupe['suppressions'].append(item)
            elif h.action == 'Modification':
                if "D√©plac√©" in h.details or "Armoire" in h.details:
                    historique_groupe['deplacements'].append(item)
                else:
                    historique_groupe['modifications'].append(item)

    dashboard_data['historique_groupe'] = historique_groupe
    
    fournisseurs = db.session.execute(
        db.select(Fournisseur)
        .filter_by(etablissement_id=etablissement_id)
        .order_by(Fournisseur.nom)
        .limit(5)
    ).scalars().all()
    
    dashboard_data['fournisseurs'] = fournisseurs

    suggestions_dashboard = db.session.execute(
        db.select(Suggestion)
        .options(joinedload(Suggestion.objet), joinedload(Suggestion.utilisateur))
        .filter_by(etablissement_id=etablissement_id, statut='En attente')
        .order_by(Suggestion.date_demande.desc())
        .limit(10)
    ).scalars().all()
    
    dashboard_data['suggestions'] = suggestions_dashboard
    
    # --- NOUVEAU : WIDGET S√âCURIT√â ---
    try:
        sec_service = SecurityService()
        dashboard_data['securite'] = sec_service.get_dashboard_stats(etablissement_id)
    except Exception as e:
        current_app.logger.error(f"Erreur chargement widget s√©curit√©: {str(e)}")
        dashboard_data['securite'] = None
    # ---------------------------------

    start_tour = db.session.query(Armoire).filter_by(etablissement_id=etablissement_id).count() == 0
    
    return render_template("index.html", start_tour=start_tour, now=datetime.now(), data=dashboard_data)


@inventaire_bp.route("/inventaire")
@login_required
def inventaire():
    """
    Affiche l'inventaire principal.
    CORRIG√â : Utilise InventoryService.
    """
    etablissement_id = session['etablissement_id']
    service = InventoryService(etablissement_id)

    # Param√®tres
    page = request.args.get('page', 1, type=int)
    sort_by = request.args.get('sort_by', 'nom')
    direction = request.args.get('direction', 'asc')
    
    
    filters = {
        'q': request.args.get('q', None),
        'armoire_id': request.args.get('armoire', type=int),
        'categorie_id': request.args.get('categorie', type=int),
        'etat': request.args.get('etat', None)
    }

    try:
        # Appel Service (Retourne un DTO)
        dto = service.get_paginated_inventory(page, sort_by, direction, filters)

        # Construction du dict pagination pour le template
        pagination = {
            'page': dto.current_page,
            'total_pages': dto.total_pages,
            'endpoint': 'inventaire.inventaire'
        }
        
        # Listes pour les filtres (Dropdowns)
        armoires = db.session.execute(db.select(Armoire).filter_by(etablissement_id=etablissement_id).order_by(Armoire.nom)).scalars().all()
        categories = db.session.execute(db.select(Categorie).filter_by(etablissement_id=etablissement_id).order_by(Categorie.nom)).scalars().all()
        armoire_id = request.args.get('armoire', type=int)
        categorie_id = request.args.get('categorie', type=int)
        
        return render_template("inventaire.html",
                            objets=dto.items, # Liste de dicts
                            armoires=armoires,
                            categories=categories,
                            pagination=pagination,
                            date_actuelle=datetime.now(),
                            now=datetime.now,
                            sort_by=sort_by,
                            direction=direction,
                            is_general_inventory=True,
                            armoire_id=armoire_id,
                            categorie_id=categorie_id
                            )
                            
    except Exception as e:
        current_app.logger.error(f"Erreur inventaire: {e}")
        flash("Erreur lors du chargement de l'inventaire.", "error")
        return redirect(url_for('inventaire.index'))

# ============================================================
# ROUTES DE GESTION DES OBJETS (CRUD)
# ============================================================
@inventaire_bp.route("/ajouter_objet", methods=["POST"])
@login_required
@limit_objets_required
def ajouter_objet():
    etablissement_id = session['etablissement_id']
    user_id = session.get('user_id')

    try:
        # 1. Validation Nom
        nom = request.form.get("nom", "").strip()
        if not nom:
            flash("Le nom de l'objet est obligatoire.", "error")
            return redirect(request.referrer)

        # 2. Validation Num√©rique
        quantite = int(request.form.get("quantite", 0))
        seuil = int(request.form.get("seuil", 0))
        if quantite < 0 or seuil < 0:
            raise ValueError("Valeurs n√©gatives interdites.")

        # 3. Validation Foreign Keys (Int√©grit√©)
        armoire_id = int(request.form.get("armoire_id"))
        categorie_id = int(request.form.get("categorie_id"))

        armoire = db.session.get(Armoire, armoire_id)
        if not armoire or armoire.etablissement_id != etablissement_id:
            flash("Armoire invalide.", "error")
            return redirect(request.referrer)

        categorie = db.session.get(Categorie, categorie_id)
        if not categorie or categorie.etablissement_id != etablissement_id:
            flash("Cat√©gorie invalide.", "error")
            return redirect(request.referrer)

        # --- GESTION IMAGE ---
        image_path_db = None
        if 'image' in request.files:
            file = request.files['image']
            if file and file.filename != '':
                # Check taille (5 Mo)
                file.seek(0, 2)
                if file.tell() > 5 * 1024 * 1024:
                    flash("Image trop volumineuse (Max 5 Mo).", "warning")
                else:
                    file.seek(0)
                    if allowed_file(file.filename):
                        filename = secure_filename(file.filename)
                        ts = datetime.now().strftime("%Y%m%d%H%M%S")
                        unique_filename = f"{ts}_{filename}"
                        upload_folder = os.path.join(current_app.root_path, 'static', 'uploads')
                        if not os.path.exists(upload_folder): os.makedirs(upload_folder)
                        file.save(os.path.join(upload_folder, unique_filename))
                        image_path_db = f"uploads/{unique_filename}"
        
        if not image_path_db:
            url_input = request.form.get("image_url", "").strip()
            if url_input and is_valid_url(url_input):
                image_path_db = url_input

        # --- GESTION FDS ---
        fds_path_db = None
        if 'fds_file' in request.files:
            file = request.files['fds_file']
            if file and file.filename != '':
                file.seek(0, 2)
                if file.tell() > 5 * 1024 * 1024:
                    flash("FDS trop volumineuse (Max 5 Mo).", "warning")
                else:
                    file.seek(0)
                    if file.filename.lower().endswith('.pdf'):
                        filename = secure_filename(file.filename)
                        ts = datetime.now().strftime("%Y%m%d%H%M%S")
                        unique_filename = f"FDS_{ts}_{filename}"
                        fds_folder = os.path.join(current_app.root_path, 'static', 'uploads', 'fds')
                        if not os.path.exists(fds_folder): os.makedirs(fds_folder)
                        file.save(os.path.join(fds_folder, unique_filename))
                        fds_path_db = f"uploads/fds/{unique_filename}"

        if not fds_path_db:
            url_input = request.form.get("fds_url", "").strip()
            if url_input and is_valid_url(url_input):
                fds_path_db = url_input

        # --- CR√âATION ---
        new_objet = Objet(
            nom=nom,
            quantite_physique=quantite,
            seuil=seuil,
            armoire_id=armoire_id,
            categorie_id=categorie_id,
            date_peremption=request.form.get("date_peremption") or None,
            image_url=image_path_db,
            fds_url=fds_path_db,
            etablissement_id=etablissement_id
        )
        db.session.add(new_objet)
        db.session.flush() 
        
        hist = Historique(
            objet_id=new_objet.id,
            utilisateur_id=user_id,
            action="Cr√©ation",
            details=f"Ajout initial (Qt√©: {new_objet.quantite_physique})",
            etablissement_id=etablissement_id,
            timestamp=datetime.now()
        )
        db.session.add(hist)
        db.session.commit()
        flash(f"L'objet '{new_objet.nom}' a √©t√© ajout√© avec succ√®s !", "success")
        
    except (ValueError, TypeError):
        db.session.rollback()
        flash("Donn√©es invalides.", "error")
    except Exception as e:
        db.session.rollback()
        current_app.logger.error(f"Erreur ajout objet: {e}")
        flash(f"Une erreur est survenue.", "error")
        
    return redirect(request.referrer or url_for('inventaire.index'))


@inventaire_bp.route("/modifier_objet/<int:id_objet>", methods=["POST"])
@login_required
def modifier_objet(id_objet):
    objet = db.session.get(Objet, id_objet)
    if not objet or objet.etablissement_id != session['etablissement_id']:
        flash("Objet non trouv√© ou acc√®s interdit.", "error")
        return redirect(url_for('inventaire.index'))

    user_id = session.get('user_id')
    etablissement_id = session['etablissement_id']

    # Liste des fichiers √† supprimer APR√àS le commit r√©ussi (Race condition fix)
    files_to_cleanup = []

    try:
        # 1. Validation Nom
        nom = request.form.get("nom", "").strip()
        if not nom:
            flash("Le nom ne peut pas √™tre vide.", "error")
            return redirect(request.referrer)

        # 2. Validation Num√©rique
        try:
            quantite = int(request.form.get("quantite", 0))
            seuil = int(request.form.get("seuil", 0))
            if quantite < 0 or seuil < 0: raise ValueError
        except ValueError:
            flash("Quantit√© et seuil doivent √™tre positifs.", "error")
            return redirect(request.referrer)

        # 3. Validation FK
        armoire_id = int(request.form.get("armoire_id", 0))
        categorie_id = int(request.form.get("categorie_id", 0))

        armoire = db.session.get(Armoire, armoire_id)
        if not armoire or armoire.etablissement_id != etablissement_id:
            flash("Armoire invalide.", "error")
            return redirect(request.referrer)

        categorie = db.session.get(Categorie, categorie_id)
        if not categorie or categorie.etablissement_id != etablissement_id:
            flash("Cat√©gorie invalide.", "error")
            return redirect(request.referrer)

        # Capture √©tat avant modif
        anciens = {
            'nom': objet.nom,
            'quantite': objet.quantite_physique,
            'seuil': objet.seuil,
            'armoire': objet.armoire_id,
            'categorie': objet.categorie_id
        }

        # --- GESTION IMAGE ---
        is_image_updated = False
        if 'image' in request.files:
            file = request.files['image']
            if file and file.filename != '':
                file.seek(0, 2)
                if file.tell() > 5 * 1024 * 1024:
                    flash("Image trop volumineuse (Max 5 Mo).", "warning")
                else:
                    file.seek(0)
                    if allowed_file(file.filename):
                        # On marque l'ancien fichier pour suppression future
                        if objet.image_url and objet.image_url.startswith('uploads/'):
                            files_to_cleanup.append(objet.image_url)
                        
                        filename = secure_filename(file.filename)
                        ts = datetime.now().strftime("%Y%m%d%H%M%S")
                        unique_filename = f"{ts}_{filename}"
                        upload_folder = os.path.join(current_app.root_path, 'static', 'uploads')
                        if not os.path.exists(upload_folder): os.makedirs(upload_folder)
                        file.save(os.path.join(upload_folder, unique_filename))
                        
                        objet.image_url = f"uploads/{unique_filename}"
                        is_image_updated = True

        if not is_image_updated:
            url_input = request.form.get("image_url")
            if url_input is not None: # Champ pr√©sent
                url_clean = url_input.strip()
                if url_clean:
                    if is_valid_url(url_clean):
                        if objet.image_url and objet.image_url.startswith('uploads/'):
                            files_to_cleanup.append(objet.image_url)
                        objet.image_url = url_clean
                    else:
                        flash("URL image invalide.", "warning")
                else:
                    # Suppression demand√©e (champ vide)
                    if objet.image_url and objet.image_url.startswith('uploads/'):
                        files_to_cleanup.append(objet.image_url)
                    objet.image_url = None

        # --- GESTION FDS ---
        is_fds_updated = False
        if 'fds_file' in request.files:
            file = request.files['fds_file']
            if file and file.filename != '':
                file.seek(0, 2)
                if file.tell() > 5 * 1024 * 1024:
                    flash("FDS trop volumineuse (Max 5 Mo).", "warning")
                else:
                    file.seek(0)
                    if file.filename.lower().endswith('.pdf'):
                        if objet.fds_url and objet.fds_url.startswith('uploads/'):
                            files_to_cleanup.append(objet.fds_url)
                        
                        filename = secure_filename(file.filename)
                        ts = datetime.now().strftime("%Y%m%d%H%M%S")
                        unique_filename = f"FDS_{ts}_{filename}"
                        fds_folder = os.path.join(current_app.root_path, 'static', 'uploads', 'fds')
                        if not os.path.exists(fds_folder): os.makedirs(fds_folder)
                        file.save(os.path.join(fds_folder, unique_filename))
                        
                        objet.fds_url = f"uploads/fds/{unique_filename}"
                        is_fds_updated = True

        if not is_fds_updated:
            fds_input = request.form.get("fds_url")
            if fds_input is not None:
                url_clean = fds_input.strip()
                if url_clean:
                    if is_valid_url(url_clean):
                        if objet.fds_url and objet.fds_url.startswith('uploads/'):
                            files_to_cleanup.append(objet.fds_url)
                        objet.fds_url = url_clean
                    else:
                        flash("URL FDS invalide.", "warning")
                else:
                    if objet.fds_url and objet.fds_url.startswith('uploads/'):
                        files_to_cleanup.append(objet.fds_url)
                    objet.fds_url = None

        # --- MISE √Ä JOUR ---
        objet.nom = nom
        objet.quantite_physique = quantite
        objet.seuil = seuil
        objet.armoire_id = armoire_id
        objet.categorie_id = categorie_id
        objet.date_peremption = request.form.get("date_peremption") or None
        
        # --- HISTORIQUE ---
        details_modif = []
        if anciens['quantite'] != objet.quantite_physique:
            diff = objet.quantite_physique - anciens['quantite']
            signe = "+" if diff > 0 else ""
            details_modif.append(f"Stock: {anciens['quantite']} ‚ûù {objet.quantite_physique} ({signe}{diff})")
            
        if anciens['nom'] != objet.nom: details_modif.append(f"Nom chang√©")
        if anciens['armoire'] != objet.armoire_id: details_modif.append("D√©plac√© (Armoire)")
        if anciens['categorie'] != objet.categorie_id: details_modif.append("Cat√©gorie modifi√©e")

        if details_modif or anciens['seuil'] != objet.seuil:
            msg = ", ".join(details_modif) if details_modif else "Mise √† jour des d√©tails"
            hist = Historique(
                objet_id=objet.id,
                utilisateur_id=user_id,
                action="Modification",
                details=msg,
                etablissement_id=etablissement_id,
                timestamp=datetime.now()
            )
            db.session.add(hist)

        db.session.commit()
        
        # --- NETTOYAGE POST-COMMIT (S√âCURIS√â) ---
        for old_path in files_to_cleanup:
            cleanup_old_file(old_path)

        flash(f"L'objet '{objet.nom}' a √©t√© mis √† jour.", "success")

    except Exception as e:
        db.session.rollback()
        current_app.logger.exception(f"Erreur critique modif objet {id_objet}")
        flash("Une erreur technique est survenue.", "error")

    return redirect(request.referrer or url_for('inventaire.index'))
    
    
@inventaire_bp.route("/objet/supprimer/<int:id_objet>", methods=["POST"])
@admin_required
def supprimer_objet(id_objet):
    objet = db.session.get(Objet, id_objet)
    
    # V√©rification d'appartenance
    if not objet or objet.etablissement_id != session['etablissement_id']:
        flash("Objet non trouv√© ou acc√®s non autoris√©.", "error")
        return redirect(url_for('inventaire.index'))

    try:
        nom_objet = objet.nom
        
        # Historique
        hist = Historique(
            objet_id=None, 
            utilisateur_id=session.get('user_id'),
            action="Suppression",
            details=f"Suppression d√©finitive de : {nom_objet}",
            etablissement_id=session['etablissement_id'],
            timestamp=datetime.now()
        )
        db.session.add(hist)
        
        # Suppression
        db.session.delete(objet)
        db.session.commit()
        flash(f"L'objet '{nom_objet}' a √©t√© supprim√©.", "success")
        
    except Exception as e:
        db.session.rollback()
        current_app.logger.error(f"Erreur suppression objet: {e}")
        flash(f"Une erreur est survenue lors de la suppression.", "error")

    return redirect(request.referrer or url_for('inventaire.inventaire'))



@inventaire_bp.route("/objet/<int:objet_id>")
@login_required
def voir_objet(objet_id):
    etablissement_id = session['etablissement_id']
    
    objet = db.session.execute(
        db.select(Objet)
        .options(joinedload(Objet.armoire), joinedload(Objet.categorie))
        .filter_by(id=objet_id, etablissement_id=etablissement_id)
    ).scalar_one_or_none()

    if not objet:
        flash("Objet non trouv√© ou acc√®s non autoris√©.", "error")
        return redirect(url_for('inventaire.index'))

    now = datetime.now()
    total_reserve = db.session.query(func.sum(Reservation.quantite_reservee)).filter(
        Reservation.objet_id == objet.id,
        Reservation.etablissement_id == etablissement_id,
        Reservation.fin_reservation > now
    ).scalar() or 0
    
    objet.quantite_disponible = objet.quantite_physique - total_reserve

    results = db.session.execute(
        db.select(Historique, Utilisateur)
        .outerjoin(Utilisateur, Historique.utilisateur_id == Utilisateur.id)
        .filter(Historique.objet_id == objet.id)
        .filter(Historique.etablissement_id == etablissement_id)
        .order_by(Historique.timestamp.desc())
        .limit(20)
    ).all()

    historique = []
    for h, u in results:
        h.nom_utilisateur = u.nom_utilisateur if u else "Utilisateur supprim√©"
        historique.append(h)

    armoires = db.session.execute(db.select(Armoire).filter_by(etablissement_id=etablissement_id)).scalars().all()
    categories = db.session.execute(db.select(Categorie).filter_by(etablissement_id=etablissement_id)).scalars().all()

    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'Inventaire', 'url': url_for('inventaire.inventaire')},
    ]
    
    # Si l'objet a une cat√©gorie, on l'ajoute pour faciliter la navigation
    if objet.categorie:
        breadcrumbs.append({
            'text': objet.categorie.nom, 
            'url': url_for('inventaire.voir_categorie', categorie_id=objet.categorie.id)
        })
    
    # L'objet lui-m√™me (non cliquable)
    breadcrumbs.append({'text': objet.nom, 'url': None})

    return render_template("objet_details.html",
                           objet=objet,
                           historique=historique,
                           armoires=armoires,
                           categories=categories,
                           breadcrumbs=breadcrumbs,
                           now=datetime.now())

#==============================================================================
#  ROUTE AFFICHAGE ARMOIRES
#==============================================================================
@inventaire_bp.route("/armoire/<int:armoire_id>")
@login_required
def voir_armoire(armoire_id):
    """
    Affiche le contenu d'une armoire.
    CORRIG√â : Utilise InventoryService.
    """
    etablissement_id = session['etablissement_id']
    service = InventoryService(etablissement_id)

    page = request.args.get('page', 1, type=int)
    sort_by = request.args.get('sort_by', 'nom')
    direction = request.args.get('direction', 'asc')
    
    armoire = db.session.get(Armoire, armoire_id)
    if not armoire or armoire.etablissement_id != etablissement_id:
        flash("Armoire non trouv√©e ou acc√®s non autoris√©.", "error")
        return redirect(url_for('inventaire.index'))

    # Appel Service avec filtre armoire
    filters = {'armoire_id': armoire_id}
    dto = service.get_paginated_inventory(page, sort_by, direction, filters)

    pagination = {
        'page': dto.current_page,
        'total_pages': dto.total_pages,
        'endpoint': 'inventaire.voir_armoire',
        'armoire_id': armoire_id
    }

    autres_armoires = db.session.execute(
        db.select(Armoire)
        .filter(
            Armoire.etablissement_id == etablissement_id,
            Armoire.id != armoire_id
        )
        .order_by(Armoire.nom)
    ).scalars().all()

    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'Gestion des Armoires', 'url': url_for('main.gestion_armoires')},
        {'text': armoire.nom, 'url': None}
    ]

    return render_template("armoire.html",
                           armoire=armoire,
                           objets=dto.items, # DTO
                           pagination=pagination,
                           sort_by=sort_by,
                           direction=direction,
                           autres_armoires=autres_armoires,
                           breadcrumbs=breadcrumbs,
                           date_actuelle=datetime.now(),
                           armoire_id=armoire_id,
                           categorie_id=None
                           )

#==============================================================================
#  ROUTE AFFICHAGE CATEGORIES
#==============================================================================
@inventaire_bp.route("/categorie/<int:categorie_id>")
@login_required
def voir_categorie(categorie_id):
    """
    Affiche le contenu d'une cat√©gorie.
    CORRIG√â : Utilise InventoryService.
    """
    etablissement_id = session['etablissement_id']
    service = InventoryService(etablissement_id)

    page = request.args.get('page', 1, type=int)
    sort_by = request.args.get('sort_by', 'nom')
    direction = request.args.get('direction', 'asc')

    categorie = db.session.get(Categorie, categorie_id)
    if not categorie or categorie.etablissement_id != etablissement_id:
        flash("Cat√©gorie non trouv√©e ou acc√®s non autoris√©.", "error")
        return redirect(url_for('inventaire.index'))

    # Appel Service avec filtre cat√©gorie
    filters = {'categorie_id': categorie_id}
    dto = service.get_paginated_inventory(page, sort_by, direction, filters)

    pagination = {
        'page': dto.current_page,
        'total_pages': dto.total_pages,
        'endpoint': 'inventaire.voir_categorie',
        'categorie_id': categorie_id
    }

    categories_list = db.session.execute(
        db.select(Categorie)
        .filter(
            Categorie.etablissement_id == etablissement_id,
            Categorie.id != categorie_id
        )
        .order_by(Categorie.nom)
    ).scalars().all()

    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'Gestion des Cat√©gories', 'url': url_for('main.gestion_categories')},
        {'text': categorie.nom, 'url': None}
    ]

    return render_template("categorie.html",
                           categorie=categorie,
                           objets=dto.items, # DTO
                           pagination=pagination,
                           sort_by=sort_by,
                           direction=direction,
                           categories_list=categories_list,
                           breadcrumbs=breadcrumbs,
                           date_actuelle=datetime.now(),
                           armoire_id=None,
                           categorie_id=categorie_id
                           )
                           
#=======================================================
# ROUTE GESTION ALERTES TRAITEES
#=======================================================
@inventaire_bp.route("/maj_traite/<int:objet_id>", methods=["POST"])
@login_required
def maj_traite(objet_id):
    etablissement_id = session['etablissement_id']
    data = request.get_json()
    
    objet = db.session.get(Objet, objet_id)

    if not objet or objet.etablissement_id != etablissement_id:
        return jsonify(success=False, error="Objet non trouv√© ou acc√®s non autoris√©."), 404

    try:
        objet.traite = 1 if data.get("traite") else 0
        db.session.commit()
        return jsonify(success=True)
    except Exception as e:
        db.session.rollback()
        return jsonify(success=False, error=str(e)), 500

@inventaire_bp.route("/maj_commande/<int:objet_id>", methods=["POST"])
@login_required
def maj_commande(objet_id):
    etablissement_id = session['etablissement_id']
    data = request.get_json()
    
    objet = db.session.get(Objet, objet_id)

    if not objet or objet.etablissement_id != etablissement_id:
        return jsonify(success=False, error="Objet non trouv√© ou acc√®s non autoris√©."), 404

    try:
        objet.en_commande = 1 if data.get("en_commande") else 0
        db.session.commit()
        return jsonify(success=True)
    except Exception as e:
        db.session.rollback()
        return jsonify(success=False, error=str(e)), 500


#=================================================================
# ROUTE GESTION STOCK DORMANT
#=================================================================
@inventaire_bp.route("/dormants")
@login_required
def objets_dormants():
    etablissement_id = session['etablissement_id']
    service = InventoryService(etablissement_id)
    
    # On r√©cup√®re les objets non utilis√©s depuis 1 an (365 jours)
    dormants = service.get_dormant_objects(days=365)
    
    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'Centre d\'Alertes', 'url': url_for('main.alertes')},
        {'text': 'Stocks Dormants', 'url': None}
    ]
    
    return render_template("dormants.html", 
                           objets=dormants, 
                           breadcrumbs=breadcrumbs,
                           now=datetime.now())

==================================================
FICHIER : views\main.py
==================================================
from datetime import datetime, timedelta
import os
from flask import (Blueprint, render_template, request, redirect, url_for,
                   flash, session, send_from_directory, current_app)
from sqlalchemy import func, desc
from sqlalchemy.orm import joinedload
from db import db, Armoire, Categorie, Fournisseur, Objet, Reservation, Utilisateur, Echeance, Depense, Budget, Parametre, Suggestion, MaintenanceLog, EquipementSecurite
from utils import login_required

main_bp = Blueprint(
    'main', 
    __name__,
    template_folder='../templates'
)

#============================================================
# ROUTE RACINE (ACCUEIL)
#============================================================
@main_bp.route('/')
def index():
    if 'user_id' in session:
        return redirect(url_for('inventaire.index'))
    return redirect(url_for('auth.login'))

    
#============================================================
# GESTION ARMOIRES (LOGIQUE RESTAUR√âE)
#============================================================
@main_bp.route("/gestion_armoires")
@login_required
def gestion_armoires():
    etablissement_id = session['etablissement_id']
    
    armoires = db.session.execute(
        db.select(Armoire.id, Armoire.nom, func.count(Objet.id).label('count'))
        .outerjoin(Objet, Armoire.id == Objet.armoire_id)
        .filter(Armoire.etablissement_id == etablissement_id)
        .group_by(Armoire.id, Armoire.nom)
        .order_by(Armoire.nom)
    ).mappings().all()

    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'G√©rer les Armoires', 'url': None}
    ]

    return render_template("gestion_armoires.html",
                           armoires=armoires,
                           breadcrumbs=breadcrumbs,
                           now=datetime.now())

#============================================================
# GESTION CATEGORIES (LOGIQUE RESTAUR√âE)
#============================================================
@main_bp.route("/gestion_categories")
@login_required
def gestion_categories():
    etablissement_id = session['etablissement_id']

    categories = db.session.execute(
        db.select(Categorie.id, Categorie.nom, func.count(Objet.id).label('count'))
        .outerjoin(Objet, Categorie.id == Objet.categorie_id)
        .filter(Categorie.etablissement_id == etablissement_id)
        .group_by(Categorie.id, Categorie.nom)
        .order_by(Categorie.nom)
    ).mappings().all()

    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'G√©rer les Cat√©gories', 'url': None}
    ]

    return render_template("gestion_categories.html",
                           categories=categories,
                           breadcrumbs=breadcrumbs,
                           now=datetime.now())

#================================================================
#  GESTION CALENDRIER (SECTION MODIFI√âE)
#================================================================
@main_bp.route('/calendrier')
@login_required
def calendrier():
    etablissement_id = session.get('etablissement_id')
    
    # Gestion du mois affich√© (par d√©faut mois courant)
    year = request.args.get('year', datetime.now().year, type=int)
    month = request.args.get('month', datetime.now().month, type=int)
    
    # 1. R√©cup√©ration des jours avec r√©servations pour ce mois
    # On groupe par jour et on compte les groupes de r√©servation distincts
    start_date = datetime(year, month, 1)
    if month == 12:
        end_date = datetime(year + 1, 1, 1)
    else:
        end_date = datetime(year, month + 1, 1)

    stats_res = db.session.execute(
        db.select(
            func.date(Reservation.debut_reservation).label('jour'), 
            func.count(func.distinct(Reservation.groupe_id)).label('total')
        )
        .filter(
            Reservation.etablissement_id == etablissement_id,
            Reservation.debut_reservation >= start_date,
            Reservation.debut_reservation < end_date,
            Reservation.statut == 'confirm√©e'
        )
        .group_by(func.date(Reservation.debut_reservation))
    ).all()

    # 2. Transformation en Dictionnaire pour acc√®s rapide dans le template
    # Format : {'2025-12-28': 2, '2025-12-29': 1}
    reservations_map = {str(row.jour): row.total for row in stats_res}
    
    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'Calendrier', 'url': None}
    ]

    return render_template(
        'calendrier.html', 
        year=year, 
        month=month, 
        reservations_map=reservations_map,
        breadcrumbs=breadcrumbs,
        now=datetime.now()
    )


@main_bp.route("/jour/<string:date_str>")
@login_required
def vue_jour(date_str):
    etablissement_id = session['etablissement_id']
    try:
        date_obj = datetime.strptime(date_str, '%Y-%m-%d').date()
    except ValueError:
        flash("Format de date invalide.", "danger")
        return redirect(url_for('main.calendrier'))

    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'Calendrier', 'url': url_for('main.calendrier')},
        {'text': date_obj.strftime('%d %B %Y'), 'url': None}
    ]

    start_of_day = datetime.combine(date_obj, datetime.min.time())
    end_of_day = datetime.combine(date_obj, datetime.max.time())

    # La requ√™te SQLAlchemy est bien pr√©sente et compl√®te
    reservations_brutes = db.session.execute(
        db.select(
            Reservation.groupe_id,
            Reservation.debut_reservation,
            Reservation.fin_reservation,
            Utilisateur.nom_utilisateur
        )
        .join(Utilisateur, Reservation.utilisateur_id == Utilisateur.id)
        .filter(
            Reservation.etablissement_id == etablissement_id,
            Reservation.debut_reservation < end_of_day,
            Reservation.fin_reservation > start_of_day
        )
        .distinct(Reservation.groupe_id)
        .order_by(Reservation.groupe_id, Reservation.debut_reservation)
    ).mappings().all()

    # La logique de formatage des donn√©es est bien pr√©sente et compl√®te
    reservations_par_heure = {hour: {'starts': [], 'continues': []} for hour in range(24)}
    for resa in reservations_brutes:
        debut_dt = resa.debut_reservation.replace(tzinfo=None)
        fin_dt = resa.fin_reservation.replace(tzinfo=None)

        start_hour = max(8, debut_dt.hour)
        end_hour = min(20, fin_dt.hour if fin_dt.minute > 0 or fin_dt.second > 0 else fin_dt.hour - 1)

        if debut_dt.date() == date_obj and 8 <= debut_dt.hour <= 20:
            reservations_par_heure[debut_dt.hour]['starts'].append(dict(resa))
        
        for hour in range(start_hour, end_hour + 1):
            if 8 <= hour <= 20:
                if hour != debut_dt.hour or debut_dt.date() != date_obj:
                    if not any(d.get('groupe_id') == resa.groupe_id for d in reservations_par_heure[hour]['continues']):
                        reservations_par_heure[hour]['continues'].append(dict(resa))

    # L'appel √† render_template est bien pr√©sent et complet
    return render_template("vue_jour.html",
                           date_concernee=date_obj,
                           reservations_par_heure=reservations_par_heure,
                           breadcrumbs=breadcrumbs)

#================================================================
# GESTION ALERTES
#================================================================
@main_bp.route("/alertes")
@login_required
def alertes():
    etablissement_id = session['etablissement_id']
    now = datetime.now()

    options = [
        joinedload(Objet.armoire),
        joinedload(Objet.categorie)
    ]
    
    # 1. Sous-requ√™te pour la quantit√© disponible
    subquery = db.session.query(
        Objet.id.label('objet_id'),
        (Objet.quantite_physique - func.coalesce(db.session.query(func.sum(Reservation.quantite_reservee))
            .filter(Reservation.objet_id == Objet.id, Reservation.fin_reservation > now)
            .scalar_subquery(), 0)).label('quantite_disponible')
    ).filter(Objet.etablissement_id == etablissement_id).subquery()

    # 2. Requ√™te brute (Renvoie des Rows [Objet, quantite])
    rows_stock = db.session.query(Objet, subquery.c.quantite_disponible.label('quantite_disponible'))\
        .join(subquery, Objet.id == subquery.c.objet_id)\
        .options(*options)\
        .filter(
            Objet.etablissement_id == etablissement_id,
            subquery.c.quantite_disponible <= Objet.seuil
        ).order_by(Objet.nom).all()

    # --- CORRECTION ICI : On extrait l'objet de la Row ---
    objets_stock_results = []
    for row in rows_stock:
        # row[0] est l'objet, row[1] est la quantit√© disponible calcul√©e
        obj = row[0] 
        # On peut attacher la quantit√© calcul√©e √† l'objet si on veut l'afficher
        obj.quantite_disponible_calc = row[1] 
        objets_stock_results.append(obj)
    # -----------------------------------------------------

    # 3. Requ√™te P√©remption (Celle-ci renvoie d√©j√† des Objets, pas de souci)
    date_limite = (now + timedelta(days=30)).date()
    objets_peremption = db.session.query(Objet)\
        .options(*options)\
        .filter(
            Objet.etablissement_id == etablissement_id,
            Objet.date_peremption != None,
            func.date(Objet.date_peremption) < date_limite,
            Objet.traite == 0
        ).order_by(Objet.date_peremption.asc()).all()
    
    # 4. Suggestions
    suggestions = db.session.execute(
        db.select(Suggestion)
        .options(joinedload(Suggestion.objet), joinedload(Suggestion.utilisateur))
        .filter_by(etablissement_id=etablissement_id, statut='En attente')
        .order_by(Suggestion.date_demande.desc())
    ).scalars().all()
    
    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'Centre d\'Alertes', 'url': None}
    ]
    
    signalements_securite = []
    signalements_securite = db.session.execute(
        db.select(MaintenanceLog)
        .join(EquipementSecurite)
        .filter(EquipementSecurite.etablissement_id == etablissement_id)
        .filter(MaintenanceLog.resultat == 'signalement')
        .order_by(MaintenanceLog.date_intervention.desc())
    ).scalars().all()
    
    return render_template("alertes.html",
                           objets_stock=objets_stock_results,
                           objets_peremption=objets_peremption,
                           suggestions=suggestions,
                           breadcrumbs=breadcrumbs,
                           date_actuelle=now,
                           signalements_securite=signalements_securite,
                           now=now)

#================================================================
# GESTION FOURNISSEURS
#================================================================
@main_bp.route("/fournisseurs")
@login_required
def voir_fournisseurs():
    etablissement_id = session['etablissement_id']
    
    # NOUVELLE REQU√äTE : On r√©cup√®re tous les fournisseurs de l'√©tablissement
    fournisseurs = db.session.execute(
        db.select(Fournisseur)
        .filter_by(etablissement_id=etablissement_id)
        .order_by(Fournisseur.nom)
    ).scalars().all()
    
    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'Annuaire Fournisseurs', 'url': None}
    ]
    
    return render_template("fournisseurs.html", 
                           fournisseurs=fournisseurs,
                           breadcrumbs=breadcrumbs)

#================================================================
#  GESTION PANIER
#================================================================
@main_bp.route("/panier")
@login_required
def panier():
    # D√©finition du fil d'Ariane
    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'Mon Panier', 'url': None}
    ]
    return render_template("panier.html", breadcrumbs=breadcrumbs)

#================================================================
#  GESTION PAGE A PROPOS
#================================================================
@main_bp.route("/a-propos")
@login_required
def a_propos():
    etablissement_id = session.get('etablissement_id')
    
    # 1. R√©cup√©ration des infos de licence (Indispensable pour le template)
    params = db.session.execute(
        db.select(Parametre).filter_by(etablissement_id=etablissement_id)
    ).scalars().all()
    
    params_dict = {p.cle: p.valeur for p in params}
    
    licence_info = {
        'is_pro': params_dict.get('licence_statut') == 'PRO',
        'instance_id': params_dict.get('instance_id', 'N/A'),
        'statut': params_dict.get('licence_statut', 'FREE')
    }

    # 2. Fil d'Ariane
    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': '√Ä Propos', 'url': None}
    ]

    return render_template("a_propos.html", 
                           breadcrumbs=breadcrumbs,
                           licence=licence_info,
                           now=datetime.now())



# ================================================================
# GESTION BUDGET (Lecture pour tous, Admin pour modifs)
# ================================================================
@main_bp.route("/budget")
@login_required
def voir_budget():
    etablissement_id = session['etablissement_id']
    
    # 1. D√©terminer l'ann√©e scolaire
    now = datetime.now()
    annee_courante = now.year if now.month >= 9 else now.year - 1
    
    # 2. R√©cup√©rer le budget
    budget = db.session.execute(
        db.select(Budget).filter_by(
            etablissement_id=etablissement_id,
            annee=annee_courante
        )
    ).scalar_one_or_none()
    
    # 3. Calculs
    depenses = []
    total_depenses = 0
    solde = 0
    
    if budget:
        # R√©cup√©rer les d√©penses li√©es
        depenses = db.session.execute(
            db.select(Depense)
            .options(joinedload(Depense.fournisseur))
            .filter_by(budget_id=budget.id)
            .order_by(Depense.date_depense.desc())
        ).scalars().all()
        
        total_depenses = sum(d.montant for d in depenses)
        solde = budget.montant_initial - total_depenses

    # 4. Fil d'ariane
    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'Suivi Budg√©taire', 'url': None}
    ]

    # 5. Liste des fournisseurs (pour la modale d'ajout, si admin)
    fournisseurs = []
    if session.get('user_role') == 'admin':
        fournisseurs = db.session.execute(
            db.select(Fournisseur).filter_by(etablissement_id=etablissement_id).order_by(Fournisseur.nom)
        ).scalars().all()

    return render_template("budget.html",
                           budget_affiche=budget,
                           depenses=depenses,
                           total_depenses=total_depenses,
                           solde=solde,
                           annee=annee_courante,
                           fournisseurs=fournisseurs,
                           breadcrumbs=breadcrumbs,
                           now=now)


#================================================================
# PAGES DU FOOTER
#================================================================
@main_bp.route("/documentation")
@login_required
def documentation():
    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'Documentation', 'url': None}
    ]
    return render_template("documentation.html", breadcrumbs=breadcrumbs)

@main_bp.route("/legal")
# Pas de @login_required ici, les mentions l√©gales doivent √™tre publiques
def legal():
    breadcrumbs = [
        {'text': 'Accueil', 'url': url_for('inventaire.index')},
        {'text': 'Mentions L√©gales', 'url': None}
    ]
    return render_template("legal.html", breadcrumbs=breadcrumbs)


#================================================================
#  GESTION FAVICON
#================================================================
@main_bp.route('/favicon.ico')
def favicon():
    return send_from_directory(os.path.join(current_app.root_path, 'static', 'icons'),
                               'favicon.ico', mimetype='image/vnd.microsoft.icon')


==================================================
FICHIER : views\securite.py
==================================================
from datetime import datetime, timedelta
from flask import Blueprint, render_template, request, jsonify, current_app, session, redirect, url_for
from utils import login_required, admin_required
from services.security_service import SecurityService
from db import db, EquipementSecurite, MaintenancePlan, MaintenanceLog, Utilisateur # <--- Ajout Utilisateur

securite_bp = Blueprint('securite', __name__, url_prefix='/securite')
security_service = SecurityService()

@securite_bp.route('/')
@login_required
def index():
    if not session.get('etablissement_id'):
        return redirect(url_for('main.index'))
    equipements = security_service.get_all_equipements(session['etablissement_id'])
    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'S√©curit√© & Maintenance', 'url': None}
    ]
    return render_template('securite/index.html', equipements=equipements, breadcrumbs=breadcrumbs)

@securite_bp.route('/equipement/<int:id>')
@login_required
def voir_equipement(id):
    equipement = db.session.get(EquipementSecurite, id)
    if not equipement or equipement.etablissement_id != session['etablissement_id']:
        return redirect(url_for('securite.index'))

    breadcrumbs = [
        {'text': 'Tableau de Bord', 'url': url_for('inventaire.index')},
        {'text': 'S√©curit√©', 'url': url_for('securite.index')},
        {'text': equipement.nom, 'url': None}
    ]
    return render_template('securite/details.html', equipement=equipement, breadcrumbs=breadcrumbs, now=datetime.now())

# --- API ACTIONS ---

@securite_bp.route('/api/equipement', methods=['POST'])
@login_required
def ajouter_equipement():
    try:
        data = request.json
        if not data.get('nom') or not data.get('type_equipement'):
            return jsonify({'success': False, 'error': "Champs obligatoires manquants."}), 400
        
        if data.get('date_installation'):
            try:
                data['date_installation'] = datetime.strptime(data['date_installation'], '%Y-%m-%d').date()
            except ValueError:
                return jsonify({'success': False, 'error': "Date invalide."}), 400

        security_service.create_equipement(session['etablissement_id'], data)
        return jsonify({'success': True})
    except Exception as e:
        current_app.logger.error(f"Erreur ajout √©quipement: {e}")
        return jsonify({'success': False, 'error': "Erreur technique."}), 500

@securite_bp.route('/api/equipement/<int:id>/update', methods=['POST'])
@admin_required
def update_equipement(id):
    equipement = db.session.get(EquipementSecurite, id)
    if not equipement or equipement.etablissement_id != session['etablissement_id']:
        return jsonify({'success': False, 'error': "Acc√®s refus√©"}), 403
    
    try:
        data = request.json
        equipement.nom = data.get('nom', equipement.nom)
        equipement.numero_serie = data.get('numero_serie')
        equipement.etat_general = data.get('etat_general')
        
        if data.get('date_installation'):
             equipement.date_installation = datetime.strptime(data['date_installation'], '%Y-%m-%d').date()
             
        db.session.commit()
        return jsonify({'success': True})
    except Exception as e:
        return jsonify({'success': False, 'error': str(e)}), 500

@securite_bp.route('/api/equipement/<int:id>/add_plan', methods=['POST'])
@admin_required
def add_plan(id):
    equipement = db.session.get(EquipementSecurite, id)
    if not equipement or equipement.etablissement_id != session['etablissement_id']:
        return jsonify({'success': False, 'error': "Acc√®s refus√©"}), 403
    
    try:
        data = request.json
        periodicite = int(data.get('periodicite_jours', 365))
        prochaine = datetime.now().date() + timedelta(days=periodicite)
        
        plan = MaintenancePlan(
            equipement_id=id,
            titre=data.get('titre'),
            periodicite_jours=periodicite,
            type_prestataire=data.get('type_prestataire'),
            date_prochaine_action=prochaine,
            alerte_active=True
        )
        db.session.add(plan)
        db.session.commit()
        return jsonify({'success': True})
    except Exception as e:
        return jsonify({'success': False, 'error': str(e)}), 500

@securite_bp.route('/api/equipement/<int:id>/add_log', methods=['POST'])
@admin_required
def add_log(id):
    equipement = db.session.get(EquipementSecurite, id)
    if not equipement or equipement.etablissement_id != session['etablissement_id']:
        return jsonify({'success': False, 'error': "Acc√®s refus√©"}), 403
    
    try:
        data = request.json
        date_inter = datetime.strptime(data.get('date_intervention'), '%Y-%m-%d').date()
        
        log = MaintenanceLog(
            equipement_id=id,
            date_intervention=date_inter,
            operateur=data.get('operateur'),
            resultat=data.get('resultat'),
            observations=data.get('observations')
        )
        db.session.add(log)
        
        if data.get('plan_id'):
            plan = db.session.get(MaintenancePlan, int(data['plan_id']))
            if plan:
                log.plan_id = plan.id
                plan.date_derniere_action = date_inter
                plan.date_prochaine_action = date_inter + timedelta(days=plan.periodicite_jours)
        
        db.session.commit()
        return jsonify({'success': True})
    except Exception as e:
        return jsonify({'success': False, 'error': str(e)}), 500

@securite_bp.route('/api/signalement', methods=['POST'])
@login_required
def signaler_dysfonctionnement():
    try:
        data = request.json
        equipement_id = data.get('equipement_id')
        description = data.get('description')
        
        if not equipement_id or not description:
            return jsonify({'success': False, 'error': "Description manquante."}), 400

        # --- CORRECTION NOM UTILISATEUR ---
        user = db.session.get(Utilisateur, session.get('user_id'))
        nom_operateur = user.nom_utilisateur if user else "Utilisateur Inconnu"

        log = MaintenanceLog(
            equipement_id=equipement_id,
            date_intervention=datetime.now().date(),
            operateur=nom_operateur, # Utilisation du vrai nom
            resultat='signalement', 
            observations=description
        )
        
        db.session.add(log)
        db.session.commit()
        
        return jsonify({'success': True})
        
    except Exception as e:
        current_app.logger.error(f"Erreur signalement: {e}")
        return jsonify({'success': False, 'error': "Erreur technique."}), 500

@securite_bp.route('/api/traiter_signalement/<int:log_id>/<action>', methods=['POST'])
@admin_required
def traiter_signalement(log_id, action):
    try:
        log = db.session.get(MaintenanceLog, log_id)
        if not log: return jsonify({'success': False, 'error': "Introuvable"}), 404
        
        if action == 'valider':
            log.resultat = 'non_conforme' 
            log.observations += " [Valid√© par Admin]"
        elif action == 'refuser':
            db.session.delete(log)
        
        db.session.commit()
        return jsonify({'success': True})
    except Exception as e:
        return jsonify({'success': False, 'error': str(e)}), 500

==================================================
FICHIER : views\__init__.py
==================================================

