<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Armoire : {{ armoire.nom }}</title>
	<meta name="csrf-token" content="{{ csrf_token() }}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
	<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="{{ url_for('static', filename='js/script.js') }}" defer></script>
</head>
<body data-add-url="{{ url_for('inventaire.ajouter_objet') }}">
    {% include 'header.html' %}
    <div class="main-container">
		{% with messages = get_flashed_messages(with_categories=true) %}
		{% if messages %}
			<div class="flash-messages">
				{% for category, message in messages %}
					<div class="flash {{ category }}">{{ message }}</div>
				{% endfor %}
			</div>
		{% endif %}
		{% endwith %}
        <nav class="breadcrumb-nav">
            <a href="{{ url_for('main.gestion_armoires') }}" class="breadcrumb-link">
                <span class="breadcrumb-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="page-title-icon" viewBox="0 -960 960 960"><path d="M360-440q-17 0-28.5-11.5T320-480q0-17 11.5-28.5T360-520q17 0 28.5 11.5T400-480q0 17-11.5 28.5T360-440Zm240 0q-17 0-28.5-11.5T560-480q0-17 11.5-28.5T600-520q17 0 28.5 11.5T640-480q0 17-11.5 28.5T600-440ZM120-120v-80h40v-560q0-33 23.5-56.5T240-840h480q33 0 56.5 23.5T800-760v560h40v80H120Zm120-80h200v-560H240v560Zm280 0h200v-560H520v560Zm-40-320Z"/></svg>
                </span>
                <span class="breadcrumb-text">Accès aux Armoires</span>
            </a>
            <span class="breadcrumb-separator">/</span>
            <span class="breadcrumb-current">{{ armoire.nom }}</span>
        </nav>
        
        <div class="table-header">
            <h2 class="page-title">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor"><path d="M440-181 240-296q-19-11-29.5-29T200-365v-230q0-22 10.5-40t29.5-29l200-115q19-11 40-11t40 11l200 115q19 11 29.5 29t10.5 40v230q0 22-10.5 40T720-296L520-181q-19 11-40 11t-40-11Zm0-92v-184l-160-93v185l160 92Zm80 0 160-92v-185l-160 93v184ZM80-680v-120q0-33 23.5-56.5T160-880h120v80H160v120H80ZM280-80H160q-33 0-56.5-23.5T80-160v-120h80v120h120v80Zm400 0v-80h120v-120h80v120q0 33-23.5 56.5T800-80H680Zm120-600v-120H680v-80h120q33 0 56.5 23.5T880-800v120h-80ZM480-526l158-93-158-91-158 91 158 93Zm0 45Zm0-45Zm40 69Zm-80 0Z"/></svg>
                <span>Objets dans : <strong>{{ armoire.nom }}</strong></span>
            </h2>
        </div>

        <div id="inventory-content" 
             data-sort-by="{{ sort_by }}" 
             data-direction="{{ direction }}" 
             data-armoire-id="{{ armoire.id }}">
            
            {# On inclut le même template partiel que pour la page d'inventaire #}
            {% include '_inventaire_content.html' %}
        </div>

        {% if session.user_role == 'admin' %}
        <div id="bulk-action-section" class="bulk-action-bar" style="display: none;">
			<span>Déplacer la sélection vers l'armoire :</span>
			<select id="move-destination">
                <option value="" disabled selected>Choisir une destination...</option>
				{% for autre_armoire in autres_armoires %}
					<option value="{{ autre_armoire.id }}">{{ autre_armoire.nom }}</option>
				{% endfor %}
			</select>
			<button id="bulk-move-btn" class="btn-action">Déplacer</button>
		</div>
        {% endif %}
    </div>
	{% include 'footer.html' %}
    {% include '_modals.html' %}
</body>
</html>