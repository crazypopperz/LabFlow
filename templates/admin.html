{% extends "base.html" %}
{% block title %}Panneau d'Administration - LabFlow{% endblock %}

{% block content %}
<div class="main-container">
    {% include '_breadcrumb.html' %}
    
    <!-- En-tête principal -->
    <div class="admin-hero">
        <div class="admin-hero-content">
            <div class="admin-hero-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="48px">
                    <path d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Z"/>
                </svg>
            </div>
            <div>
                <h1 class="admin-hero-title">Panneau d'Administration</h1>
                <p class="admin-hero-subtitle">Gérez et configurez votre application LabFlow</p>
            </div>
        </div>
		
		<!-- Code d'invitation de l'établissement -->
		<div class="alert alert-info shadow-sm">
			<div class="d-flex align-items-center mb-2">
				<i class="bi bi-ticket-perforated-fill fs-4 me-2"></i>
				<h5 class="mb-0">Code d'invitation de votre établissement</h5>
			</div>
			<p class="mb-2">Partagez ce code avec vos collègues pour qu'ils rejoignent <strong>{{ session.nom_etablissement }}</strong> :</p>
			<div class="input-group">
				<input type="text" 
					   class="form-control form-control-lg text-center fw-bold" 
					   id="codeInvitation"
					   value="{{ etablissement.code_invitation }}" 
					   readonly
					   style="font-family: monospace; font-size: 1.75rem; letter-spacing: 0.1em; background: #f8f9fa;">
				<button class="btn btn-primary btn-lg" onclick="copierCode()" type="button">
					<i class="bi bi-clipboard me-1"></i> Copier
				</button>
			</div>
			<small class="text-muted d-block mt-2">
				<i class="bi bi-info-circle me-1"></i>
				Ce code permet à quiconque le possède de créer un compte dans votre établissement
			</small>
		</div>

		<script>
		function copierCode() {
			const input = document.getElementById('codeInvitation');
			input.select();
			navigator.clipboard.writeText(input.value).then(() => {
				const btn = event.target.closest('button');
				const originalHTML = btn.innerHTML;
				btn.innerHTML = '<i class="bi bi-check-circle-fill me-1"></i> Copié !';
				btn.classList.remove('btn-primary');
				btn.classList.add('btn-success');
				setTimeout(() => {
					btn.innerHTML = originalHTML;
					btn.classList.remove('btn-success');
					btn.classList.add('btn-primary');
				}, 2000);
			});
		}
		</script>
        
        <!-- Statut de la licence -->
        <div class="license-status {{ 'license-pro' if licence.is_pro else 'license-free' }}">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="20px">
                <path d="m354-287 126-76 126 77-33-144 111-96-146-13-58-136-58 135-146 13 111 97-33 143ZM233-120l65-281L80-590l288-25 112-265 112 265 288 25-218 189 65 281-247-149-247 149Zm247-350Z"/>
            </svg>
            <span>{{ 'Version Pro' if licence.is_pro else 'Version Gratuite' }}</span>
        </div>
    </div>

    <!-- Info box -->
    <div class="admin-info-banner">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="24px">
            <path d="M480-680q-33 0-56.5-23.5T400-760q0-33 23.5-56.5T480-840q33 0 56.5 23.5T560-760q0 33-23.5 56.5T480-680Zm-60 560v-480h120v480H420Z"/>
        </svg>
        <p>Cette section vous permet d'effectuer des opérations de maintenance et de gestion sur l'ensemble de l'application.</p>
    </div>

    <!-- SECTION : Gestion Quotidienne -->
    <div class="admin-category">
        <div class="category-header">
            <h2 class="category-title">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="28px">
                    <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h168q13-36 43.5-58t68.5-22q38 0 68.5 22t43.5 58h168q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm280-670q13 0 21.5-8.5T510-820q0-13-8.5-21.5T480-850q-13 0-21.5 8.5T450-820q0 13 8.5 21.5T480-790Z"/>
                </svg>
                Gestion Quotidienne
            </h2>
            <p class="category-description">Outils essentiels pour la gestion journalière de votre laboratoire</p>
        </div>

        <div class="admin-grid">
            <!-- Carte Utilisateurs -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-blue">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M40-160v-112q0-34 17.5-62.5T104-378q62-31 126-46.5T360-440q66 0 130 15.5T616-378q29 15 46.5 43.5T680-272v112H40Zm720 0v-120q0-44-24.5-84.5T666-434q51 6 96 20.5t84 35.5q36 20 55 44.5t19 53.5v120H760ZM360-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm400-160q0 66-47 113t-113 47q-11 0-28-2.5t-28-5.5q27-32 41.5-71t14.5-81q0-42-14.5-81T544-792q14-5 28-6.5t28-1.5q66 0 113 47t47 113Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Gestion des Utilisateurs</h3>
                <p class="card-description">Ajoutez, supprimez ou modifiez les comptes utilisateurs et leurs permissions</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.gestion_utilisateurs') }}" class="btn-card btn-primary">
                        Gérer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte Kits -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-purple">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M80-160v-400q0-33 23.5-56.5T160-640h120v-80q0-33 23.5-56.5T360-800h240q33 0 56.5 23.5T680-720v80h120q33 0 56.5 23.5T880-560v400H80Zm240-480h320v-80H320v80Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Gestion des Kits</h3>
                <p class="card-description">Créez et configurez des kits de matériel prédéfinis pour faciliter les réservations</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.gestion_kits') }}" class="btn-card btn-primary">
                        Gérer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte Échéances -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-orange">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M200-80q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H200Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Gestion des Échéances</h3>
                <p class="card-description">Définissez et suivez les dates importantes : maintenances, contrats, commandes</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.gestion_echeances') }}" class="btn-card btn-primary">
                        Gérer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte Budget -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-green">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M600-120q-118 0-210-67T260-360H120v-80h122q-2-11-2-20v-40q0-9 2-20H120v-80h140q38-106 130-173t210-67q69 0 130.5 24T840-748l-70 70q-35-29-78.5-45.5T600-740q-75 0-136.5 38.5T370-600h230v80H344q-2 11-3 20t-1 20q0 11 1 20t3 20h256v80H370q32 63 93.5 101.5T600-220q48 0 92.5-16.5T770-282l70 70q-48 44-109.5 68T600-120Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Gestion Budgétaire</h3>
                <p class="card-description">Suivez votre budget annuel, enregistrez vos dépenses et exportez des rapports</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.budget') }}" class="btn-card btn-primary">
                        Accéder
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte Fournisseurs -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-teal">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M280-160q-50 0-85-35t-35-85H60l18-80h113q17-19 40-29.5t49-10.5q26 0 49 10.5t40 29.5h167l84-360H182l4-17q6-28 27.5-45.5T264-800h456l-37 160h117l120 160-40 200h-80q0 50-35 85t-85 35q-50 0-85-35t-35-85H400q0 50-35 85t-85 35Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Gestion des Fournisseurs</h3>
                <p class="card-description">Consultez, ajoutez ou supprimez les fiches des fournisseurs référencés</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.gestion_fournisseurs') }}" class="btn-card btn-primary">
                        Gérer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>
			
			<!-- Carte Gestion des commandes -->
			<div class="admin-card">
                <div class="d-flex justify-content-between align-items-start mb-3">
                    <div class="card-icon-wrapper card-icon-amber mb-0">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                            <path d="M440-280h80v-160h160v-80H520v-160h-80v160H280v80h160v160Zm40 200q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
                        </svg>
                    </div>
                    {% if suggestions %}
                    <span class="badge bg-warning text-dark rounded-pill border border-warning-subtle">
                        {{ suggestions|length }} en attente
                    </span>
                    {% endif %}
                </div>
                
                <h3 class="card-title">Suggestions</h3>
                
                <div class="card-description p-0 flex-grow-1">
                    {% if suggestions %}
                        <ul class="list-group list-group-flush">
                            {% for s in suggestions %}
                            <li class="list-group-item px-0 py-2 border-0 d-flex justify-content-between align-items-center">
                                <div class="d-flex align-items-center gap-2 overflow-hidden">
                                    <!-- Avatar demandeur -->
                                    <div class="rounded-circle bg-light d-flex align-items-center justify-content-center text-secondary border" 
                                         style="width: 24px; height: 24px; flex-shrink: 0;" 
                                         title="Demandé par {{ s.utilisateur.nom_utilisateur }}">
                                        <i class="bi bi-person-fill" style="font-size: 0.7rem;"></i>
                                    </div>
                                    <!-- Nom objet -->
                                    <span class="text-truncate fw-medium text-dark" style="font-size: 0.9rem;">
                                        {{ s.objet.nom }}
                                    </span>
                                </div>
                                <!-- Quantité -->
                                <span class="badge bg-warning-subtle text-dark border border-warning-subtle rounded-pill">
                                    +{{ s.quantite }}
                                </span>
                            </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <div class="text-center text-muted py-3">
                            <i class="bi bi-check-circle fs-4 d-block mb-1 opacity-50"></i>
                            <small>Aucune suggestion en attente.</small>
                        </div>
                    {% endif %}
                </div>

                <div class="card-footer mt-3">
                    <a href="{{ url_for('main.alertes') }}#suggestions" class="btn-card btn-primary w-100 justify-content-center">
                        Traiter les demandes
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- SECTION : Analyse et Exports -->
    <div class="admin-category">
        <div class="category-header">
            <h2 class="category-title">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="28px">
                    <path d="m105-399-65-47 200-320 120 140 160-260 120 180 135-214 65 47-198 314-119-179-152 247-121-141-145 233Z"/>
                </svg>
                Analyse et Exports
            </h2>
            <p class="category-description">Outils d'analyse et d'export pour vos données</p>
        </div>

        <div class="admin-grid">
            <!-- Carte Import -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-indigo">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M240-160q-33 0-56.5-23.5T160-240v-480q0-33 23.5-56.5T240-800h360l160 160v400q0 33-23.5 56.5T720-160H240Zm0-80h480v-360H560v-120H240v480Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Importation en Masse</h3>
                <p class="card-description">Ajoutez plusieurs objets à votre inventaire en une seule fois via Excel</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.importer_page') }}" class="btn-card btn-primary">
                        Importer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte Rapports -->
            <div class="admin-card">
                <div class="card-icon-wrapper card-icon-pink">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="m105-399-65-47 200-320 120 140 160-260 120 180 135-214 65 47-198 314-119-179-152 247-121-141-145 233Zm475 159q42 0 71-29t29-71q0-42-29-71t-71-29q-42 0-71 29t-29 71q0 42 29 71t71 29Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Rapports d'Activité</h3>
                <p class="card-description">Générez des rapports détaillés sur l'utilisation du matériel et les réservations</p>
                <div class="card-footer">
                    <a href="{{ url_for('admin.rapports') }}" class="btn-card btn-primary">
                        Générer
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Carte Export Inventaire -->
            <div class="admin-card card-wide">
                <div class="card-icon-wrapper card-icon-cyan">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h160v-40h240v40h160q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Exporter l'Inventaire Complet</h3>
                <p class="card-description">Obtenez une liste complète de tous les objets avec leur stock disponible actuel</p>
                <div class="card-footer card-footer-multiple">
                    <a href="{{ url_for('admin.exporter_inventaire', format='pdf') }}" class="btn-card btn-secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M320-240h320v-80H320v80Zm0-160h320v-80H320v80ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Z"/>
                        </svg>
                        Export PDF
                    </a>
                    <a href="{{ url_for('admin.exporter_inventaire', format='excel') }}" class="btn-card btn-secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M240-160q-33 0-56.5-23.5T160-240v-480q0-33 23.5-56.5T240-800h360l160 160v400q0 33-23.5 56.5T720-160H240Z"/>
                        </svg>
                        Export Excel
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- SECTION : Administration du Système -->
    <div class="admin-category">
        <div class="category-header">
            <h2 class="category-title">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="28px">
                    <path d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Z"/>
                </svg>
                Administration du Système
            </h2>
            <p class="category-description">Configuration avancée et maintenance de l'application</p>
        </div>

        <div class="admin-grid">
            <!-- Carte Licence -->
            <div class="admin-card card-license">
                <div class="license-header">
                    <div class="card-icon-wrapper {{ 'card-icon-gold' if licence.is_pro else 'card-icon-gray' }}">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                            <path d="m354-287 126-76 126 77-33-144 111-96-146-13-58-136-58 135-146 13 111 97-33 143Z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="card-title">Licence et Activation</h3>
                        <div class="license-badge {{ 'badge-pro' if licence.is_pro else 'badge-free' }}">
                            {{ 'VERSION PRO' if licence.is_pro else 'VERSION GRATUITE' }}
                        </div>
                    </div>
                </div>
                
                <div class="instance-id-box">
                    <span class="instance-label">Identifiant d'instance</span>
                    <code id="instance-id-code" title="Cliquez pour copier">{{ licence.instance_id }}</code>
                </div>

                <div class="card-footer">
                    {% if not licence.is_pro %}
                    <form action="{{ url_for('admin.activer_licence') }}" method="post" class="license-form">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <input type="text" name="licence_cle" placeholder="Entrez votre clé de licence Pro" required>
                        <button type="submit" class="btn-card btn-gold">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                                <path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/>
                            </svg>
                            Activer
                        </button>
                    </form>
                    {% else %}
                    <button class="btn-card btn-secondary" data-modal-trigger="reset-licence-modal">
                        Réinitialiser la Licence
                    </button>
                    {% endif %}
                </div>
            </div>

            <!-- Carte Base de Données -->
            <div class="admin-card card-database">
                <div class="card-icon-wrapper card-icon-red">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="32px">
                        <path d="M480-120q-151 0-255.5-46.5T120-280v-400q0-66 105.5-113T480-840q149 0 254.5 47T840-680v400q0 67-104.5 113.5T480-120Z"/>
                    </svg>
                </div>
                <h3 class="card-title">Base de Données</h3>
                <p class="card-description">Sauvegardez ou restaurez l'intégralité de votre base de données</p>
                
                <div class="alert-warning">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="20px">
                        <path d="m40-120 440-760 440 760H40Zm138-80h604L480-720 178-200Zm302-40q17 0 28.5-11.5T520-280q0-17-11.5-28.5T480-320q-17 0-28.5 11.5T440-280q0 17 11.5 28.5T480-240Zm-40-120h80v-200h-80v200Z"/>
                    </svg>
                    <span>L'importation écrasera toutes les données actuelles</span>
                </div>

                <div class="card-footer card-footer-multiple">
                    {% if licence.is_pro %}
                    <a href="{{ url_for('admin.telecharger_db') }}" class="btn-card btn-success">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M480-320 280-520l56-58 104 104v-326h80v326l104-104 56 58-200 200ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z"/>
                        </svg>
                        Sauvegarder
                    </a>
                    {% else %}
                    <button type="button" class="btn-card btn-disabled" 
                            data-modal-trigger="warning-modal"
                            data-modal-title="Fonctionnalité Pro"
                            data-modal-message="La sauvegarde de la base de données est réservée à la version Pro.">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                            <path d="M240-80q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h40v-80q0-83 58.5-141.5T480-920q83 0 141.5 58.5T680-720v80h40q33 0 56.5 23.5T800-560v400q0 33-23.5 56.5T720-80H240Z"/>
                        </svg>
                        Sauvegarder
                    </button>
                    {% endif %}
                    
                    <form action="{{ url_for('admin.importer_db') }}" method="post" enctype="multipart/form-data" class="inline-form">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <input type="file" name="fichier" id="fichier-db" accept=".db" style="display: none;">
                        <label for="fichier-db" class="btn-card btn-secondary">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" width="18px">
                                <path d="M440-320v-326L336-542l-56-58 200-200 200 200-56 58-104-104v326h-80ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z"/>
                            </svg>
                            Importer
                        </label>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

{% include '_modale_warning.html' %}
{% include '_modals.html' %}
{% endblock %}